(window.__se_editor_jsonp=window.__se_editor_jsonp||[]).push([[20],{104:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(54),l=n.n(c),u=n(49),p=n(376),d=n(52),h=n(59),g=n(129),f=n(51),m=(i=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this._selected=this.props.value},n.UNSAFE_componentWillReceiveProps=function(e){this._selected=e.value},n.render=function(){var e=this,t=this.props,n=t.id,i=t.name,r=t.namespace,o=t.groups,a=t.deviceType,s=t.i18n,c=t.type,p=t.focused,d=t.labelVisible,h=t.useIcon,m=t.logAreaId,y=this._selected,v="se-"+r+"-toolbar-"+c+"-container",_=d?"se-toolbar-label":"se-blind",b=o.map(function(t){var o=t.value,d=t.title,v=t.label,b=t.logId,S=y===o,C=a===f.t.DESKTOP,I=h?"icon":"text",O=l()("se-"+r+"-toolbar-"+c+"-button","se-"+i+"-"+c+"-toolbar-button","se-"+i+"-"+o+"-toolbar-button","se-"+I+"-toolbar-button",S?"se-is-selected":"");return u.b.createElement(g.a,{logAreaId:m,namespace:r,logId:b,type:c,dataName:n,focused:S&&p,className:O,handleClick:e.handleChange,dataValue:o,key:o,i18n:s},h&&u.b.createElement("span",{className:"se-toolbar-icon"}),u.b.createElement("span",{className:_,"aria-hidden":C},s(v)),C&&u.b.createElement("span",{className:"se-toolbar-tooltip"},s(d)))});return u.b.createElement("div",{className:v,"data-type":c,"data-name":i},b)},n.handleChange=function(e){var t=this.props,n=t.type,i=t.id,r=t.name,o=t.title,a=t.label,s=t.action;(0,t.onChange)({event:e,type:n,id:i,name:r,title:o,label:a,action:s,value:e.currentTarget.dataset.value})},t}(u.b.Component),s()(i.prototype,"handleChange",[d.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleChange"),i.prototype),i);m.defaultProps={label:"",id:"",name:"",title:"",namespace:"",labelVisible:!1,useIcon:!0,value:null,focused:!1,logAreaId:"",onChange:function(){},i18n:function(e){return e}},m.propTypes={type:u.a.oneOf([h.b.GROUP_TOGGLE]).isRequired,id:u.a.string,name:u.a.string,label:u.a.string,labelVisible:u.a.bool,useIcon:u.a.bool,action:u.a.string,title:u.a.string,namespace:u.a.string,deviceType:u.a.string,groups:u.a.oneOfType([u.a.object,u.a.array]).isRequired,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool]),focused:u.a.bool,logAreaId:u.a.string,onChange:u.a.func,i18n:u.a.func},t.a=Object(p.b)(m)},107:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(54),l=n.n(c),u=n(52),p=n(49),d=n(376),h=n(59),g=n(51),f=n(129),m=(i=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.handleChange=this.handleChange.bind(this)},n.render=function(){var e,t=this.props,n=t.id,i=t.name,r=t.namespace,o=t.documentToolbarIconType,a=t.moreViewButton,s=t.deviceType,c=t.label,u=t.labelVisible,d=t.i18n,m=t.value,y=t.focused,v=t.logAreaId,_=t.logId,b=t.type,S=t.highlight,C=s===g.t.DESKTOP,I=r===h.e.DOCUMENT,O=o===h.d.TEXT_ICON||u,T=l()("se-"+i+"-toolbar-button",((e={})["se-"+r+"-toolbar-"+b+"-button"]=!I||!a,e["se-"+r+"-toolbar-"+b+"-more-button"]=I&&a,e["se-"+o+"-toolbar-button"]=C&&I,e["se-is-selected"]=m,e)),L=O?"se-toolbar-label":"se-blind",E=this._renderTooltip(),P=d(c);return p.b.createElement(f.a,{className:T,namespace:r,type:b,logAreaId:v,logId:_,dataName:n,i18n:d,focused:y,highlight:S,handleClick:this.handleChange},p.b.createElement("span",{className:"se-toolbar-icon"}),p.b.createElement("span",{className:L,"aria-hidden":C},P),C&&E)},n._renderTooltip=function(){var e=this.props,t=(0,e.i18n)(e.title[e.value?"active":"inactive"]);return p.b.createElement("span",{className:"se-toolbar-tooltip"},t)},n.handleChange=function(e){var t=this.props,n=t.name,i=t.label,r=t.type,o=t.title,a=t.action;(0,t.onChange)({event:e,type:r,name:n,label:i,title:o,action:a,value:!t.value})},t}(p.b.Component),s()(i.prototype,"handleChange",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleChange"),i.prototype),i);m.defaultProps={label:"",id:"",name:"",title:{inactive:"",active:""},namespace:"",documentToolbarIconType:"",labelVisible:!1,moreViewButton:!1,value:!1,focused:!1,className:"",highlight:{},onChange:function(){},i18n:function(e){return e}},m.propTypes={type:p.a.oneOf([h.b.TOGGLE]).isRequired,id:p.a.string,name:p.a.string,label:p.a.string,deviceType:p.a.string,action:p.a.string,title:p.a.shape({inactive:p.a.string,active:p.a.string}),labelVisible:p.a.bool,namespace:p.a.string,documentToolbarIconType:p.a.string,moreViewButton:p.a.bool,value:p.a.oneOfType([p.a.bool,p.a.string]),highlight:p.a.object,focused:p.a.bool,onChange:p.a.func,i18n:p.a.func,logAreaId:p.a.string,logId:p.a.string},t.a=Object(d.b)(m)},1106:function(e,t){e.exports="//editor-static.pstatic.net/e/basic.desktop/1.52.0//img/common_loading-63cbd21e.gif"},1107:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i="se3#";function r(e){return void 0===e&&(e=""),i+e}var o={get:function(e){var t=localStorage.getItem(r(e));if(null!==t){try{return JSON.parse(t)}catch(e){}return t}},set:function(e,t){var n=t;"string"!==typeof t&&(n=JSON.stringify(t)),localStorage.setItem(r(e),n)},remove:function(e){localStorage.removeItem(r(e))},clearAll:function(){localStorage.clear()},each:function(e){void 0===e&&(e=function(){});for(var t=localStorage.length,n=0;n<t;n++){var r=new RegExp(i),o=localStorage.key(n).replace(r,"");e(this.get(o),o)}}}},111:function(e,t,n){"use strict";n.d(t,"g",function(){return u}),n.d(t,"c",function(){return p}),n.d(t,"b",function(){return d}),n.d(t,"r",function(){return h}),n.d(t,"d",function(){return g}),n.d(t,"p",function(){return f}),n.d(t,"k",function(){return m}),n.d(t,"h",function(){return y}),n.d(t,"e",function(){return v}),n.d(t,"l",function(){return _}),n.d(t,"m",function(){return b}),n.d(t,"q",function(){return S}),n.d(t,"i",function(){return C}),n.d(t,"j",function(){return I}),n.d(t,"a",function(){return O}),n.d(t,"o",function(){return E}),n.d(t,"n",function(){return P}),n.d(t,"f",function(){return w});var i,r,o,a,s,c=n(191),l=n(1312),u={FILTERED_WORD:"filteredWord",INCOMPLETE_WORD:"incompleteWord",MIN_LENGTH:"minLength",MAX_LENGTH:"maxLength",DUPLICATE_KEYWORD:"duplicateKeyword",NO_KEYWORD:"noKeyword",FULL_WRITING_ERROR:"fullWritingError",SUBJECT_EDITING:"subjectEditing",KEYWORD_EDITING:"keywordEditing"},p="클로바 AI와 함께 글을 써보세요",d=((i={})[c.j.CONTINUE]="이어쓰기가 완료되었어요!",i[c.j.SUMMARIZE]="요약하기가 완료되었어요!",i[c.j.REWRITE]="바꿔쓰기가 완료되었어요!",i[c.j.TITLE]="제목이 모두 작성되었어요!",i[c.j.TAG]="태그가 모두 작성되었어요!",i[c.j.SUMMARIZE_ALL]="전체글 요약이 완료되었어요!",i[c.j.INTRO]="인사말이 작성되었어요!",i[c.j.OUTRO]="맺음말이 작성되었어요!",i),h=((r={})[c.j.ARTICLE]="new",r[c.j.REWRITE]="rewrite",r[c.j.CONTINUE]="continue",r[c.j.SUMMARIZE]="summarize",r[c.j.OUTRO]="outro",r[c.j.INTRO]="intro",r[c.j.SUMMARIZE_ALL]="summarizeall",r[c.j.TAG]="tag",r[c.j.TITLE]="title",r),g="AI가 글을 작성하고 있어요...",f=((o={})[c.j.TITLE]="AI가 제목을 작성하고 있어요...",o[c.j.TAG]="AI가 태그를 작성하고 있어요...",o),m=40,y=40,v={SUBJECT:"subject",KEYWORD:"keyword"},_={SUBJECT:"subject",KEYWORD_TOP:"keywordTop",KEYWORD_INPUT:"keywordInput",TOOLBOX:"toolbox",TOOLBOX_BUTTON:"toolboxButton"},b={SUBJECT:{FILTERED_WORD:Symbol("filtered word"),NETWORK_ERROR:Symbol("network error"),INCOMPLETE_WORD:Symbol("incomplete word"),MAX_LENGTH:Symbol("max length"),MIN_LENGTH:Symbol("min length"),EDITING:Symbol("editing"),TIMEOUT:Symbol("timeout"),AI_TEMPORARY_ERROR:Symbol("ai temporary error")},KEYWORD_TOP:{FILTERED_WORD:Symbol("filtered word"),NETWORK_ERROR:Symbol("network error"),NO_KEYWORD:Symbol("no keyword"),AI_TEMPORARY_ERROR:Symbol("ai temporary error")},KEYWORD_INPUT:{MAX_LENGTH:Symbol("max length"),DUPLICATE_KEYWORD:Symbol("duplicate keyword"),EDITING:Symbol("editing"),AI_TEMPORARY_ERROR:Symbol("ai temporary error"),INCOMPLETE_WORD:Symbol("incomplete word")},TOOLBOX:{FILTERED_WORD:Symbol("filtered word"),NETWORK_ERROR:Symbol("network error"),TIMEOUT:Symbol("timeout"),AI_TEMPORARY_ERROR:Symbol("ai temporary error"),FULL_WRITING_ERROR:Symbol("full writing error"),INCOMPLETE_WORD:Symbol("incomplete word"),OVERFLOW_SELECTED_INPUT_TRUNCATED:Symbol("overflow selected input truncated"),OVERFLOW_CONTENT_INPUT_TRUNCATED:Symbol("overflow content input truncated"),MINIMUM_WRITING_ERROR:Symbol("minimum length error")},TOOLBOX_BUTTON:{DISABLED_PARTIAL_WRITING:Symbol("disabled partial writing warning")}},S={INITIAL:"initial",IN_PROGRESS:"inProgress",COMPLETED:"completed",ABORTED:"aborted",ERROR:"error"},C={RETRY:"retry",CONFIRM:"confirm",AI_WRITE:"ai-write"},I={INSIGHT:"complete",ERROR:"error",ERROR_API:"error-api",NO_DATA:"no-data"},O=((a={})[I.NO_DATA]="AI 글쓰기 시작하기",a[I.ERROR]="다시 시도하기",a[I.ERROR_API]="다시 시도하기",a[I.INSIGHT]="글쓰기 스타일을 모두 확인했어요",a),T="se-ai-highlight-tooltip",L="se-ai-highlight-invalid-tooltip",E={TUTORIAL_MORE:"tutorialMore",TUTORIAL_BOTTOM:"tutorialBottom",TUTORIAL_HISTORY:"tutorialHistory",SUB_PANEL:"subPanel",INSERT_FOR_USABLE_AI:"insertForUsableAi",INSERT_FOR_UNSUPPORTED_BROWSER:"insertForUnsupportedBrowser",TOOLBAR_FOR_USABLE_AI:"toolbarForUsableAi",TOOLBAR_FOR_UNSUPPORTED_BROWSER:"toolbarForUnsupportedBrowser"},P=((s={})[E.TUTORIAL_MORE]={className:T,text:"글에 어울리는 제목과 태그를\n추천해드려요.",displayCount:1,displayDuration:3e3,position:l.a.TOP_LEFT,layoutName:"toolbox_more",tutorialNext:E.TUTORIAL_BOTTOM},s[E.TUTORIAL_BOTTOM]={className:T,text:"원하는 구간을 드래그하고, 더 좋은 글로 다듬어보세요.",displayCount:1,displayDuration:3e3,position:null,layoutName:"toolbox_bottom",roundedShape:!0,tutorialNext:E.TUTORIAL_HISTORY},s[E.TUTORIAL_HISTORY]={className:T,text:"이전 내용을 복원할 수 있어요.",displayCount:1,displayDuration:3e3,position:l.a.TOP_RIGHT,layoutName:"toolbox_history"},s[E.SUB_PANEL]={className:T,text:"인사말 작성, 전체 글 요약으로\n글을 손쉽게 완성해보세요.",displayCount:1,displayDuration:3e3,position:l.a.RIGHT,layoutName:"toolbox_sub_panel"},s[E.INSERT_FOR_USABLE_AI]={className:T,text:"인서트 메뉴에서 AI 글쓰기를\n사용할 수 있어요.",displayCount:2,displayDuration:5e3,position:l.a.RIGHT,layoutName:"insert_menu"},s[E.INSERT_FOR_UNSUPPORTED_BROWSER]={className:L,text:"이 브라우저에서는 지원하지 않는 기능입니다.",displayCount:1,displayDuration:3e3,position:l.a.RIGHT,layoutName:"insert_menu"},s[E.TOOLBAR_FOR_USABLE_AI]={className:T,text:"AI 글쓰기로 짜임새 있는 글을\n빠르게 작성해보세요!",displayCount:2,displayDuration:5e3,position:l.a.RIGHT,layoutName:"toolbar_button"},s[E.TOOLBAR_FOR_UNSUPPORTED_BROWSER]={className:L,text:"이 브라우저에서는 지원하지 않는 기능입니다.",displayCount:1,displayDuration:3e3,position:l.a.RIGHT,layoutName:"toolbar_button"},s),w="se-ai-toolbox-history-button"},1125:function(e){e.exports={v:"5.9.0",fr:100,ip:0,op:100,w:96,h:108,nm:"Icon_AI_48*54",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:3,nm:"Null 1",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[48.25,55,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[183,183,100],ix:6,l:2}},ao:0,ip:0,op:100,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Layer 2 Outlines 8",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.333],y:[0]},t:0,s:[-80]},{t:63.33203125,s:[0]}],ix:10},p:{a:0,k:[10.993,-3.415,0],ix:2,l:2},a:{a:0,k:[-4.257,-2.165,0],ix:1,l:2},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:0,s:[0,0,100]},{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:20,s:[115,115,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:40,s:[100,100,100]},{t:63.33203125,s:[0,0,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.3,0],[0,-.3],[.839,0],[0,-.3],[-.3,0],[0,-.84],[-.3,0],[0,.3],[-.839,0],[0,.3],[.3,0],[0,.84]],o:[[-.3,0],[0,.84],[-.3,0],[0,.3],[.839,0],[0,.3],[.3,0],[0,-.84],[.3,0],[0,-.3],[-.839,0],[0,-.3]],v:[[-4.161,-4.915],[-4.701,-4.375],[-6.22,-2.855],[-6.76,-2.315],[-6.22,-1.775],[-4.701,-.255],[-4.161,.285],[-3.621,-.255],[-2.102,-1.775],[-1.562,-2.315],[-2.102,-2.855],[-3.621,-4.375]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:7,k:{a:0,k:[0,.945,.212,.745,.169,.914,.265,.818,.338,.882,.318,.89,.496,.778,.306,.935,.654,.675,.294,.98,.827,.459,.522,.973,1,.243,.749,.965],ix:9}},s:{a:0,k:[-23.28,-28.159],ix:5},e:{a:0,k:[-1.605,8.03],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1},{ty:"tr",p:{a:0,k:[-1.757,6.085],ix:2},a:{a:0,k:[-1.757,6.085],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Layer 2 Outlines 7",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.093],y:[1.024]},o:{x:[.333],y:[0]},t:36.667,s:[-80]},{t:83.3346354166667,s:[0]}],ix:10},p:{a:0,k:[-7.444,-11.478,0],ix:2,l:2},a:{a:0,k:[-9.194,3.522,0],ix:1,l:2},s:{a:1,k:[{i:{x:[.151,.151,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:36.667,s:[0,0,100]},{i:{x:[.151,.151,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:63.335,s:[120,120,100]},{t:83.3346354166667,s:[100,100,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-.41],[1.159,0],[0,-.41],[-.41,0],[0,-1.16],[-.409,0],[0,.41],[-1.159,0],[0,.411],[.41,0],[0,1.16],[.41,0]],o:[[0,1.16],[-.41,0],[0,.411],[1.159,0],[0,.41],[.41,0],[0,-1.16],[.41,0],[0,-.41],[-1.159,0],[0,-.41],[-.409,0]],v:[[-9.908,.535],[-12.007,2.635],[-12.757,3.385],[-12.007,4.135],[-9.908,6.235],[-9.159,6.985],[-8.409,6.235],[-6.31,4.135],[-5.56,3.385],[-6.31,2.635],[-8.409,.535],[-9.159,-.215]],c:!0},ix:2},nm:"Path 6",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:7,k:{a:0,k:[0,.945,.212,.745,.171,.914,.265,.818,.341,.882,.318,.89,.507,.771,.355,.945,.673,.659,.392,1,.836,.451,.571,.982,1,.243,.749,.965],ix:9}},s:{a:0,k:[-13.035,-8.733],ix:5},e:{a:0,k:[7.986,21.203],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1},{ty:"tr",p:{a:0,k:[-1.757,6.085],ix:2},a:{a:0,k:[-1.757,6.085],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:36.6666666666667,op:100,st:-33.3333333333333,bm:0},{ddd:0,ind:4,ty:4,nm:"Layer 2 Outlines 6",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[0],y:[.992]},o:{x:[.333],y:[0]},t:60,s:[-60]},{t:100,s:[0]}],ix:10},p:{a:0,k:[-2.507,-17.165,0],ix:2,l:2},a:{a:0,k:[-4.257,-2.165,0],ix:1,l:2},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:60,s:[0,0,100]},{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:83.332,s:[120,120,100]},{t:100,s:[100,100,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.3,0],[0,-.3],[.839,0],[0,-.3],[-.3,0],[0,-.84],[-.3,0],[0,.3],[-.839,0],[0,.3],[.3,0],[0,.84]],o:[[-.3,0],[0,.84],[-.3,0],[0,.3],[.839,0],[0,.3],[.3,0],[0,-.84],[.3,0],[0,-.3],[-.839,0],[0,-.3]],v:[[-4.161,-4.915],[-4.701,-4.375],[-6.22,-2.855],[-6.76,-2.315],[-6.22,-1.775],[-4.701,-.255],[-4.161,.285],[-3.621,-.255],[-2.102,-1.775],[-1.562,-2.315],[-2.102,-2.855],[-3.621,-4.375]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:7,k:{a:0,k:[0,.945,.212,.745,.166,.914,.265,.818,.333,.882,.318,.89,.493,.778,.306,.935,.654,.675,.294,.98,.827,.459,.522,.973,1,.243,.749,.965],ix:9}},s:{a:0,k:[-12.952,-10.539],ix:5},e:{a:0,k:[7.968,20.152],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1},{ty:"tr",p:{a:0,k:[-1.757,6.085],ix:2},a:{a:0,k:[-1.757,6.085],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:60,op:100,st:60,bm:0},{ddd:0,ind:5,ty:4,nm:"Layer 2 Outlines 3",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[0],y:[1.033]},o:{x:[.333],y:[0]},t:-.001,s:[0]},{t:33.3346354166667,s:[45]}],ix:10},p:{a:0,k:[-7.444,-11.478,0],ix:2,l:2},a:{a:0,k:[-9.194,3.522,0],ix:1,l:2},s:{a:1,k:[{i:{x:[0,0,.667],y:[.985,.985,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:-.001,s:[100,100,100]},{t:33.3346354166667,s:[0,0,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-.41],[1.159,0],[0,-.41],[-.41,0],[0,-1.16],[-.409,0],[0,.41],[-1.159,0],[0,.411],[.41,0],[0,1.16],[.41,0]],o:[[0,1.16],[-.41,0],[0,.411],[1.159,0],[0,.41],[.41,0],[0,-1.16],[.41,0],[0,-.41],[-1.159,0],[0,-.41],[-.409,0]],v:[[-9.908,.535],[-12.007,2.635],[-12.757,3.385],[-12.007,4.135],[-9.908,6.235],[-9.159,6.985],[-8.409,6.235],[-6.31,4.135],[-5.56,3.385],[-6.31,2.635],[-8.409,.535],[-9.159,-.215]],c:!0},ix:2},nm:"Path 6",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:7,k:{a:0,k:[0,.945,.212,.745,.17,.914,.265,.818,.343,.882,.318,.89,.499,.778,.306,.935,.654,.675,.294,.98,.827,.459,.522,.973,1,.243,.749,.965],ix:9}},s:{a:0,k:[-15.829,-10.741],ix:5},e:{a:0,k:[14.394,22.125],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1},{ty:"tr",p:{a:0,k:[-1.757,6.085],ix:2},a:{a:0,k:[-1.757,6.085],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:-33.3333333333333,bm:0},{ddd:0,ind:6,ty:4,nm:"Layer 2 Outlines 2",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[-2.507,-17.165,0],ix:2,l:2},a:{a:0,k:[-4.257,-2.165,0],ix:1,l:2},s:{a:1,k:[{i:{x:[.565,.565,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:.001,s:[100,100,100]},{i:{x:[.233,.233,.667],y:[1,1,1]},o:{x:[.411,.411,.333],y:[0,0,0]},t:23.333,s:[129,129,100]},{t:50.0013020833333,s:[0,0,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.3,0],[0,-.3],[.839,0],[0,-.3],[-.3,0],[0,-.84],[-.3,0],[0,.3],[-.839,0],[0,.3],[.3,0],[0,.84]],o:[[-.3,0],[0,.84],[-.3,0],[0,.3],[.839,0],[0,.3],[.3,0],[0,-.84],[.3,0],[0,-.3],[-.839,0],[0,-.3]],v:[[-4.161,-4.915],[-4.701,-4.375],[-6.22,-2.855],[-6.76,-2.315],[-6.22,-1.775],[-4.701,-.255],[-4.161,.285],[-3.621,-.255],[-2.102,-1.775],[-1.562,-2.315],[-2.102,-2.855],[-3.621,-4.375]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:7,k:{a:0,k:[0,.945,.212,.745,.169,.914,.265,.818,.337,.882,.318,.89,.495,.778,.306,.935,.654,.675,.294,.98,.827,.459,.522,.973,1,.243,.749,.965],ix:9}},s:{a:0,k:[-15.969,-9.986],ix:5},e:{a:0,k:[13.626,21.601],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1},{ty:"tr",p:{a:0,k:[-1.757,6.085],ix:2},a:{a:0,k:[-1.757,6.085],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:-16.6666666666667,bm:0},{ddd:0,ind:7,ty:4,nm:"Layer 2 Outlines",parent:1,sr:1,ks:{o:{a:0,k:96,ix:11},r:{a:1,k:[{i:{x:[.107],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:23.332,s:[-6]},{i:{x:[.044],y:[1]},o:{x:[.333],y:[0]},t:76.668,s:[-6]},{t:100,s:[0]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.333,y:.333},t:0,s:[-6.882,2.085,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.333,y:.333},t:6.668,s:[-6.882,2.085,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.166,y:1},o:{x:.333,y:0},t:23.332,s:[-6.882,2.085,0],to:[.542,0,0],ti:[0,0,0]},{i:{x:.667,y:1},o:{x:.846,y:0},t:50,s:[-3.632,2.085,0],to:[0,0,0],ti:[.542,0,0]},{t:76.66796875,s:[-6.882,2.085,0]}],ix:2,l:2},a:{a:0,k:[-8.632,17.085,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[5.56,-.915],[5.564,-.915]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[5.555,-.915],[5.56,-.915]],c:!0},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[2.037,.003],[.709,-.599],[0,0],[0,-.2],[0,0],[-.391,0],[0,0],[-.141,.14],[0,0],[-.01,.02],[0,.87]],o:[[-.869,.001],[0,0],[-.139,.14],[0,0],[0,.4],[0,0],[.19,0],[0,0],[0,0],[.56,-.66],[0,-2.038]],v:[[5.56,-.915],[3.135,.005],[-8.54,11.655],[-8.749,12.165],[-8.749,16.375],[-8.039,17.085],[-3.832,17.085],[-3.321,16.875],[8.333,5.205],[8.373,5.155],[9.243,2.775]],c:!0},ix:2},nm:"Path 4",mn:"ADBE Vector Shape - Group",hd:!1},{ind:3,ty:"sh",ix:4,ks:{a:0,k:{i:[[.33,.33],[-.66,.66],[0,0],[-.659,-.66],[.66,-.66],[0,0],[.433,0]],o:[[-.66,-.66],[0,0],[.659,-.66],[.66,.66],[0,0],[-.33,.33],[-.432,0]],v:[[-6.43,14.755],[-6.43,12.365],[4.355,1.575],[6.744,1.575],[6.744,3.965],[-4.041,14.755],[-5.236,15.25]],c:!0},ix:2},nm:"Path 5",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:7,k:{a:0,k:[0,.945,.212,.745,.17,.914,.265,.818,.34,.882,.318,.89,.497,.778,.306,.935,.654,.675,.294,.98,.827,.459,.522,.973,1,.243,.749,.965],ix:9}},s:{a:0,k:[-13.752,-10.29],ix:5},e:{a:0,k:[9.658,17.297],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1},{ty:"tr",p:{a:0,k:[-1.757,6.085],ix:2},a:{a:0,k:[-1.757,6.085],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:5,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:0,bm:0},{ddd:0,ind:8,ty:4,nm:"Layer 3 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[46.923,83.652,0],ix:2,l:2},a:{a:0,k:[-1.633,1.045,0],ix:1,l:2},s:{a:0,k:[200,200,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[15.697,5.852],[16.676,5.852],[16.676,-3.762],[15.697,-3.762]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0]],o:[[0,0]],v:[[15.697,-3.762]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[.176,-.627],[0,0],[0,0],[0,0],[0,0],[0,0],[0,1.353]],o:[[0,0],[0,0],[0,.902],[0,0],[0,0],[0,0],[0,0],[0,0],[.198,-.847],[0,0]],v:[[-9.212,-3.267],[-9.212,-2.475],[-3.57,-2.475],[-3.855,-.165],[-10.247,-.165],[-10.247,.627],[-1.568,.627],[-1.568,-.165],[-2.887,-.165],[-2.579,-3.267]],c:!0},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ind:3,ty:"sh",ix:4,ks:{a:0,k:{i:[[0,0],[0,0],[1.1,-.616],[0,0],[-.253,.737],[-.638,-.297],[0,0],[0,1.386],[0,0]],o:[[0,0],[0,1.287],[0,0],[.638,-.374],[.318,.66],[0,0],[-1.068,-.484],[0,0],[0,0]],v:[[5.189,-2.871],[5.189,-1.65],[3.374,1.386],[4.001,2.035],[5.663,.11],[7.378,1.793],[7.939,1.067],[6.135,-1.65],[6.135,-2.871]],c:!0},ix:2},nm:"Path 4",mn:"ADBE Vector Shape - Group",hd:!1},{ind:4,ty:"sh",ix:5,ks:{a:0,k:{i:[[0,0],[0,0],[1.188,-.627],[0,0],[-.276,.693],[-.517,-.297],[0,0],[0,1.232],[0,0]],o:[[0,0],[0,1.276],[0,0],[.792,-.418],[.22,.517],[0,0],[-.902,-.473],[0,0],[0,0]],v:[[1.13,-2.816],[1.13,-1.705],[-.773,1.298],[-.178,1.991],[1.592,.088],[2.891,1.507],[3.506,.836],[2.064,-1.705],[2.064,-2.816]],c:!0},ix:2},nm:"Path 5",mn:"ADBE Vector Shape - Group",hd:!1},{ind:5,ty:"sh",ix:6,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-12.566,4.62],[-11.598,4.62],[-11.598,-2.772],[-12.566,-2.772]],c:!0},ix:2},nm:"Path 6",mn:"ADBE Vector Shape - Group",hd:!1},{ind:6,ty:"sh",ix:7,ks:{a:0,k:{i:[[0,0]],o:[[0,0]],v:[[-12.566,-2.772]],c:!1},ix:2},nm:"Path 7",mn:"ADBE Vector Shape - Group",hd:!1},{ind:7,ty:"sh",ix:8,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-17.247,-2.772],[-19.941,4.62],[-19.018,4.62],[-18.281,2.541],[-15.4,2.541],[-14.652,4.62],[-13.639,4.62],[-16.312,-2.772]],c:!0},ix:2},nm:"Path 8",mn:"ADBE Vector Shape - Group",hd:!1},{ind:8,ty:"sh",ix:9,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-16.872,-1.474],[-16.84,-1.474],[-15.697,1.716],[-17.995,1.716]],c:!0},ix:2},nm:"Path 9",mn:"ADBE Vector Shape - Group",hd:!1},{ind:9,ty:"sh",ix:10,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[2.266,-1.089],[0,0],[-.055,3.058]],o:[[0,0],[0,0],[-.176,2.068],[0,0],[2.629,-1.43],[0,0]],v:[[9.229,-2.739],[9.229,-1.914],[12.803,-1.914],[8.799,3.256],[9.394,3.993],[13.859,-2.739]],c:!0},ix:2},nm:"Path 10",mn:"ADBE Vector Shape - Group",hd:!1},{ind:10,ty:"sh",ix:11,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-9.245,1.573],[-9.245,2.365],[-3.669,2.365],[-3.669,3.267],[-9.18,3.267],[-9.18,5.72],[-2.227,5.72],[-2.227,4.939],[-8.201,4.939],[-8.201,3.982],[-2.689,3.982],[-2.689,1.573]],c:!0},ix:2},nm:"Path 11",mn:"ADBE Vector Shape - Group",hd:!1},{ind:11,ty:"sh",ix:12,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-.729,4.554],[7.951,4.554],[7.951,3.762],[-.729,3.762]],c:!0},ix:2},nm:"Path 12",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"gf",o:{a:0,k:100,ix:10},r:1,bm:0,g:{p:7,k:{a:0,k:[0,.945,.212,.745,.125,.914,.265,.818,.249,.882,.318,.89,.391,.771,.355,.945,.657,.659,.392,1,.873,.451,.571,.982,1,.243,.749,.965],ix:9}},s:{a:0,k:[-3.998,-4.762],ix:5},e:{a:0,k:[.553,10.2],ix:6},t:1,nm:"Gradient Fill 1",mn:"ADBE Vector Graphic - G-Fill",hd:!1},{ty:"tr",p:{a:0,k:[-1.633,1.045],ix:2},a:{a:0,k:[-1.633,1.045],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:13,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:100,st:0,bm:0}],markers:[]}},121:function(e,t,n){"use strict";var i=n(51),r=/^(https)/,o=function(){function e(e,t){if(!t)throw new Error("image src is null!");this._imageUrl=t,this._resultUrl="//"+e+"/?src=%22"+encodeURI(this._imageUrl)+"%22",this._type=null,this._service=null}var t=e.prototype;return t.withType=function(e){return void 0===e&&(e="w1"),this._type=e,this},t.withService=function(e){return this._service=e,this},t.build=function(){return null!=this._type&&(this._resultUrl+="&type="+this._type),null!=this._service&&(this._resultUrl+="&service="+this._service),this._resultUrl},e}(),a=function(e,t,n){void 0===t&&(t="w1"),void 0===n&&(n=null);var r=i.W.get("configAgent").get("productConfig.domains.dthumb");return new o(r,e).withType(t).withService(n).build()},s={makeDthumbHttpsUrl:function(e,t,n){return void 0===t&&(t="w1"),void 0===n&&(n=null),e?r.test(e)?e:a(e,t,n):e},makeDthumbUrl:function(e,t,n){return void 0===t&&(t="w1"),void 0===n&&(n=null),a(e,t,n)}};t.a=s},127:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(1),l=n.n(c),u=n(50),p=n.n(u),d=n(1126),h=n.n(d),g=n(386),f=n(51),m=n(49),y=n(191),v=n(1080),_=n(1314),b=n(111),S=n(834),C=n(719),I=n(784),O=n(214),T=(i=function(){function e(){var e,t=this;this._writeMap=((e={})[y.j.ARTICLE]=function(){return t._article.apply(t,arguments)},e[y.j.REWRITE]=function(){return t._rewrite.apply(t,arguments)},e[y.j.CONTINUE]=function(){return t._continue.apply(t,arguments)},e[y.j.SUMMARIZE]=function(){return t._summarize.apply(t,arguments)},e[y.j.INTRO]=function(){return t._intro.apply(t,arguments)},e[y.j.OUTRO]=function(){return t._outro.apply(t,arguments)},e[y.j.SUMMARIZE_ALL]=function(){return t._summarizeAll.apply(t,arguments)},e[y.j.TITLE]=function(){return t._title.apply(t,arguments)},e[y.j.TAG]=function(){return t._tag.apply(t,arguments)},e),this._aiLayerService=f.W.get("aiLayerService"),this._aiStreamService=f.W.get("aiStreamService"),this._alertLayerService=f.W.get("alertLayerService"),this._documentService=f.W.get("documentService"),this._finderService=f.W.get("finderService"),this._editingService=f.W.get("editingService"),this._canvasScrollingService=f.W.get("canvasScrollingService"),this._virtualEditable=f.W.get("virtualEditable"),this._componentFactory=f.W.get("componentFactory"),this._aiHistoryService=f.W.get("aiHistoryService"),this._writingLogService=f.W.get("writingLogService"),this._selectionService=f.W.get("selectionService"),this._aiBannerLayoutService=f.W.get("aiBannerLayoutService"),this._contentsToolbarLayoutService=f.W.get("contentsToolbarLayoutService"),this._selectionInfoStore=f.W.get("selectionInfoStore")}var t=e.prototype;return t.close=function(){this._canvasScrollingService.scrollToAdjustedCursor(),this._aiBannerLayoutService.close(),this._aiLayerService.close(),this._aiHistoryService.resetHistory();var e=this._selectionInfoStore.collapsed;e||this._contentsToolbarLayoutService.updateContentsToolbarPosition({clientRects:this._virtualEditable.getClientRects(),range:{collapsed:e}})},t.confirm=function(e){var t=this,n=e.target;this._alertLayerService.open({type:"confirm",title:"AI 글쓰기를 종료하시겠습니까?",description:"AI 글쓰기를 종료하면 지금까지 생성된 내용이 전부 삭제됩니다.",onClickConfirm:function(){C.a.log(n,"laiwr*mal.confirm"),t.close()},onClickCancel:function(){C.a.log(n,"laiwr*mal.cancel")}})},t.update=function(e){var t=e.subject,n=e.toast,i=e.invalid;if(Object(g.a)(t)||this._aiLayerService.setSubject(t),n){var r=n.target,o=n.value;this._aiLayerService.setToast(r,o)}if(i){var a=i.target,s=i.value;this._aiLayerService.setInvalid(a,s)}},t.setSubject=function(e){this._aiLayerService.setSubject(e)},t.setStep=function(e){this._aiLayerService.setStep(e),this._alertLayerService.close()},t.setInvalid=function(e,t){this._aiLayerService.setInvalid(e,t)},t.resetInvalid=function(e,t){this._aiLayerService.resetInvalid(e,t)},t.setToast=function(e,t){this._aiLayerService.setToast(e,t)},t.addKeyword=function(e){this._aiLayerService.addKeyword(e)},t.updateKeywordValue=function(e,t){this._aiLayerService.updateKeywordValue(e,t)},t.deleteKeyword=function(e,t){this._aiLayerService.deleteKeyword(e),t&&this._aiLayerService.setToast(b.l.KEYWORD_INPUT,null)},t.goKeywordStep=function(){this._aiLayerService.goKeywordStep()},t.updateSubject=function(){var e=s()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._aiLayerService.updateSubject(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.write=function(){var e=s()(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){n._aiLayerService.resetToast(),n._aiLayerService.loadStart()}),e.prev=1,e.next=4,this._aiLayerService.filterKeywords();case 4:if(!(t=e.sent).length){e.next=8;break}return Object(m.h)(function(){n._aiLayerService.updateInvalidKeywords(t),n._aiLayerService.setToast(b.l.KEYWORD_TOP,b.m.KEYWORD_TOP.FILTERED_WORD)}),e.abrupt("return");case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),Object(m.h)(function(){n._aiLayerService.setToast(b.l.KEYWORD_TOP,b.m.KEYWORD_TOP.NETWORK_ERROR)}),e.abrupt("return");case 14:return e.prev=14,Object(m.h)(function(){n._aiLayerService.loadEnd()}),e.finish(14);case 17:return Object(m.h)(function(){n._aiLayerService.setKeywordLayerClosing(!0)}),setTimeout(function(){Object(m.h)(function(){n.setStep(y.a.WRITING),n._aiLayerService.setKeywordLayerClosing(!1)})},400),e.prev=19,e.next=22,this._article();case 22:Object(m.h)(function(){n.setStep(y.a.TOOLBOX)}),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(19),Object(m.h)(function(){if(n._aiLayerService.setStep(y.a.TOOLBOX),n._aiStreamService.failed){var t=e.t1.errorCode,i=y.b.includes(t)||n._aiStreamService.streamFailed?b.m.TOOLBOX.AI_TEMPORARY_ERROR:b.m.TOOLBOX.NETWORK_ERROR;t===y.e.FILTERED_DATA&&(i=b.m.TOOLBOX.FILTERED_WORD),t===y.e.TIMEOUT&&(i=b.m.TOOLBOX.TIMEOUT),n._aiLayerService.setToast(b.l.TOOLBOX,i)}});case 28:return e.prev=28,Object(m.h)(function(){n._aiHistoryService.resetHistory(),n._aiHistoryService.pushWholeState(),n._updateHistoryState()}),e.finish(28);case 31:case"end":return e.stop()}},e,this,[[1,10,14,17],[19,25,28,31]])}));return function(){return e.apply(this,arguments)}}(),t._write=function(){var e=s()(o.a.mark(function e(t,n,i){var r,a,s,c,l,u,p,d,g=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i&&(i={}),Object(m.h)(function(){g._aiLayerService.busy(),g._aiLayerService.setWritingType(t),g._aiLayerService.setWritingPhase(b.q.IN_PROGRESS),g._virtualEditable.aiTypingStart()}),e.prev=2,r=this._aiStreamService.stream(t,n,i),a=!0,s=!1,c=!1,e.prev=7,u=o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d.value,Object(m.h)(function(){var e=g._insert(n,t);e.start&&e.end&&(a?(g._aiLayerService.updateInsertedRange(e),a=!1):g._aiLayerService.updateInsertedRange({end:e.end}))});case 2:case"end":return e.stop()}},e)}),p=h()(r);case 10:return e.next=12,p.next();case 12:if(!(s=!(d=e.sent).done)){e.next=17;break}return e.delegateYield(u(),"t0",14);case 14:s=!1,e.next=10;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(7),c=!0,l=e.t1;case 23:if(e.prev=23,e.prev=24,!s||null==p.return){e.next=28;break}return e.next=28,p.return();case 28:if(e.prev=28,!c){e.next=31;break}throw l;case 31:return e.finish(28);case 32:return e.finish(23);case 33:Object(m.h)(function(){g._aiLayerService.setWritingPhase(b.q.COMPLETED)}),e.next=40;break;case 36:throw e.prev=36,e.t2=e.catch(2),Object(m.h)(function(){g._aiLayerService.setWritingPhase(e.t2.aborted?b.q.ABORTED:b.q.ERROR)}),e.t2;case 40:return e.prev=40,Object(m.h)(function(){g._aiLayerService.setRangeToAiInserted(),g._virtualEditable.aiTypingEnd(),g._aiLayerService.idle()}),e.finish(40);case 43:case"end":return e.stop()}},e,this,[[2,36,40,43],[7,19,23,33],[24,,28,32]])}));return function(t,n,i){return e.apply(this,arguments)}}(),t._createCompStoreWithJSON=function(e,t){void 0===t&&(t={});var n=this._documentService.convertComponents([e])[0];return this._componentFactory.createComponentWithCompData(n,t)},t._insertJSON=function(e){var t=this._createCompStoreWithJSON(e);return this._updateInsertedTextLength(t.getPlainTextWithEmoji().length),t.ctype!==v.a.TEXT||t.textLength?this._editingService.insert({sourceComponents:[t]}).range:(this._editingService.lineBreak(),this._aiLayerService.insertedRange)},t._insertJSONToDocumentTitle=function(e){var t=this._createCompStoreWithJSON(e,{value:{textStyle:{fontSizeCode:O.b.FOLLOW_CURRENT_STYLE}}}),n=this._documentService.getComponentByCtype(v.a.DOCUMENT_TITLE),i=n.getTextStyle(n.getStartPoint());t.updateWholeCharacterStyle(i),this._updateInsertedTextLength(t.getPlainTextWithEmoji().length);var r=n.insert(t,{isAttach:!0});return this._selectionService.setRange(n.getCompEndRange()),r},t._insert=function(e,t){return t===y.j.TITLE?this._insertJSONToDocumentTitle(e):this._insertJSON(e)},t.writeByType=function(){var e=s()(o.a.mark(function e(t){var n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._checkParagraphValid(t)){e.next=4;break}return Object(m.h)(function(){n._aiLayerService.setToast(b.l.TOOLBOX,b.m.TOOLBOX.INCOMPLETE_WORD)}),e.abrupt("return");case 4:return Object(m.h)(function(){n.setStep(y.a.WRITING)}),e.prev=5,e.next=8,this._writeByType(t);case 8:Object(m.h)(function(){n.setStep(y.a.TOOLBOX),n._infoProcessedDetail(t)}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),Object(m.h)(function(){if(n._aiLayerService.setStep(y.a.TOOLBOX),n._aiStreamService.failed){var i=e.t0.errorCode,r=y.b.includes(i)||n._aiStreamService.streamFailed?b.m.TOOLBOX.AI_TEMPORARY_ERROR:b.m.TOOLBOX.NETWORK_ERROR;i===y.e.IO_VALIDATION_FAILED&&(r=y.d.includes(t)?b.m.TOOLBOX.MINIMUM_WRITING_ERROR:b.m.TOOLBOX.FULL_WRITING_ERROR),i===y.e.FILTERED_DATA&&(r=b.m.TOOLBOX.FILTERED_WORD),i===y.e.TIMEOUT&&(r=b.m.TOOLBOX.TIMEOUT),n._aiLayerService.setToast(b.l.TOOLBOX,r)}});case 14:return e.prev=14,Object(m.h)(function(){n._updateHistoryState()}),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[5,11,14,17]])}));return function(t){return e.apply(this,arguments)}}(),t._writeByType=function(e){return this._writeMap[e]()},t._article=function(){var e=s()(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){var e=n._aiLayerService.cursorAtWritingTarget,t=n._editingService.cursorAtEmptyPara;e||n._aiLayerService.selectClosestComp(),e&&t||n._moveNextLine()}),t=this._aiLayerService.subject,e.next=4,this._write(y.j.ARTICLE,{purpose:t,writingMaterials:this._writingMaterials});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._rewrite=function(){var e=s()(o.a.mark(function e(){var t,n,i=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){t=i._finderService.getPlainTextWithContext(),n=i._finderService.getTextInfoOfSelectionEnd(),i._editingService.eraseBlock()}),e.next=3,this._write(y.j.REWRITE,t,{textFormat:n});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._continue=function(){var e=s()(o.a.mark(function e(){var t,n,i=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){t=i._finderService.getPlainTextWithContext(),n=i._finderService.getTextInfoOfSelectionEnd(),i._moveNextLine()}),e.next=3,this._write(y.j.CONTINUE,t,{textFormat:n});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._summarize=function(){var e=s()(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){t=n._finderService.getPlainTextWithContext(),n._moveNextLine()}),e.next=3,this._write(y.j.SUMMARIZE,t);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._intro=function(){var e=s()(o.a.mark(function e(){var t,n,i=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){t=i._documentService.getContentText(),n=i._documentService.getDocumentTitle(),i._moveStartOfBody()}),e.next=3,this._write(y.j.INTRO,{article:t,title:n});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._outro=function(){var e=s()(o.a.mark(function e(){var t,n,i=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){t=i._documentService.getContentText(),n=i._documentService.getDocumentTitle(),i._moveEndOfBody()}),e.next=3,this._write(y.j.OUTRO,{article:t,title:n});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._summarizeAll=function(){var e=s()(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){t=n._documentService.getContentText(),n._moveEndOfBody()}),e.next=3,this._write(y.j.SUMMARIZE_ALL,{selected:t});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._title=function(){var e=s()(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){t=n._documentService.getContentText(),n._documentService.setDocumentTitle(null),n._moveToTitle()}),e.next=3,this._write(y.j.TITLE,{article:t,writingMaterials:this._writingMaterials},{maxLength:_.a});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._tag=function(){var e=s()(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.h)(function(){t=n._documentService.getContentText(),n._moveEndOfBody()}),e.next=3,this._write(y.j.TAG,{article:t,writingMaterials:this._writingMaterials});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.stop=function(){this._aiStreamService.stop()},t.startNewWriting=function(){this._selectionService.collapse(),this._aiLayerService.reset(),this.setStep(y.a.SUBJECT)},t.startWriting=function(){var e=this,t=this._aiLayerService.resolveStep();if(t===y.a.TOOLBOX)return this._aiLayerService.cursorAtWritingTarget&&this._selectionService.selectCurrentParagraph(),this._aiHistoryService.resetHistory(),this._aiHistoryService.pushWholeState(),this._canvasScrollingService.scrollToAdjustedCursor().then(function(){return e.setStep(t)});this.setStep(t)},t.undo=function(){this._aiHistoryService.undo(),this._updateHistoryState()},t.redo=function(){this._aiHistoryService.redo(),this._updateHistoryState()},t._updateHistoryState=function(){this._aiLayerService.setUndoable(this._aiHistoryService.isUndoable()),this._aiLayerService.setRedoable(this._aiHistoryService.isRedoable())},t._moveToTitle=function(){this._canvasScrollingService.focusTitle(),this._canvasScrollingService.scrollToTop()},t._moveStartOfBody=function(){this._editingService.insertEmptyLineAtStartOfBody(),this._canvasScrollingService.scrollToTop()},t._moveEndOfBody=function(){var e=this;this._canvasScrollingService.focusToLastComp(),this._canvasScrollingService.scrollToFocus(),this._editingService.cursorAtEmptyPara||setTimeout(function(){e._editingService.lineBreak()},0)},t.updatePersonaInsights=function(){var e=s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._aiLayerService.loadStart(),e.next=3,this._aiLayerService.updatePersonaInsights();case 3:this._aiLayerService.loadEnd();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.retryInsightsUpdate=function(){this._aiLayerService.loadStart(),this._aiLayerService.resetPersonaInsights(),this._aiLayerService.setPersonaStatus(b.j.INSIGHT)},t._moveNextLine=function(){this._editingService.moveNextLine()},t._updateInsertedTextLength=function(e){this._writingLogService.updateInsertedTextLength(e)},t._checkParagraphValid=function(e){var t="";switch(e){case y.j.SUMMARIZE:case y.j.CONTINUE:case y.j.REWRITE:t=this._finderService.getPlainTextWithEmojiOfWritingTargetWithinSelection();break;case y.j.SUMMARIZE_ALL:case y.j.TITLE:case y.j.TAG:case y.j.INTRO:case y.j.OUTRO:t=this._documentService.getContentText()}return Object(I.a)(t)},t._infoProcessedDetail=function(e){if(this._aiStreamService.processInfo.includes(y.g.INPUT_TRUNCATED))switch(e){case y.j.SUMMARIZE:case y.j.REWRITE:this._aiLayerService.setToast(b.l.TOOLBOX,b.m.TOOLBOX.OVERFLOW_SELECTED_INPUT_TRUNCATED);break;case y.j.SUMMARIZE_ALL:case y.j.TITLE:case y.j.TAG:this._aiLayerService.setToast(b.l.TOOLBOX,b.m.TOOLBOX.OVERFLOW_CONTENT_INPUT_TRUNCATED)}},t.scrollToAdjustedCursor=function(){return this._canvasScrollingService.scrollToAdjustedCursor()},t.showNetworkErrorToast=function(){var e=this;Object(m.h)(function(){e._aiStreamService.failed||(e.stop(),e._aiLayerService.setWritingPhase(b.q.ERROR),e._aiLayerService.setRangeToAiInserted(),e._virtualEditable.aiTypingEnd(),e._aiLayerService.idle(),e._aiLayerService.setStep(y.a.TOOLBOX),setTimeout(function(){e._aiLayerService.setToast(b.l.TOOLBOX,b.m.TOOLBOX.NETWORK_ERROR)},200),e._updateHistoryState())})},l()(e,[{key:"_writingMaterials",get:function(){return this._aiLayerService.keywords.map(function(e){return e.value})}}]),e}(),p()(i.prototype,"close",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),p()(i.prototype,"confirm",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"confirm"),i.prototype),p()(i.prototype,"update",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"update"),i.prototype),p()(i.prototype,"setSubject",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"setSubject"),i.prototype),p()(i.prototype,"setStep",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"setStep"),i.prototype),p()(i.prototype,"setInvalid",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"setInvalid"),i.prototype),p()(i.prototype,"resetInvalid",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"resetInvalid"),i.prototype),p()(i.prototype,"setToast",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"setToast"),i.prototype),p()(i.prototype,"addKeyword",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"addKeyword"),i.prototype),p()(i.prototype,"updateKeywordValue",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"updateKeywordValue"),i.prototype),p()(i.prototype,"deleteKeyword",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"deleteKeyword"),i.prototype),p()(i.prototype,"goKeywordStep",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"goKeywordStep"),i.prototype),p()(i.prototype,"updateSubject",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"updateSubject"),i.prototype),p()(i.prototype,"write",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"write"),i.prototype),p()(i.prototype,"_writeByType",[S.b,m.d],Object.getOwnPropertyDescriptor(i.prototype,"_writeByType"),i.prototype),p()(i.prototype,"_article",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_article"),i.prototype),p()(i.prototype,"_rewrite",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_rewrite"),i.prototype),p()(i.prototype,"_continue",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_continue"),i.prototype),p()(i.prototype,"_summarize",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_summarize"),i.prototype),p()(i.prototype,"_intro",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_intro"),i.prototype),p()(i.prototype,"_outro",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_outro"),i.prototype),p()(i.prototype,"_summarizeAll",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_summarizeAll"),i.prototype),p()(i.prototype,"_title",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_title"),i.prototype),p()(i.prototype,"_tag",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"_tag"),i.prototype),p()(i.prototype,"stop",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"stop"),i.prototype),p()(i.prototype,"startNewWriting",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"startNewWriting"),i.prototype),p()(i.prototype,"startWriting",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"startWriting"),i.prototype),p()(i.prototype,"undo",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"undo"),i.prototype),p()(i.prototype,"redo",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"redo"),i.prototype),p()(i.prototype,"updatePersonaInsights",[m.d],Object.getOwnPropertyDescriptor(i.prototype,"updatePersonaInsights"),i.prototype),i);t.a=T},128:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m,y,v,_,b,S,C,I,O,T,L,E,P,w=n(56),k=n.n(w),x=n(58),D=n.n(x),A=n(0),j=n.n(A),R=n(60),N=n.n(R),M=n(1),B=n.n(M),W=n(50),U=n.n(W),F=(n(61),n(386)),z=n(51),V=n(49),G=n(191),H=n(111),q={NETWORK_ERROR:"일시적인 오류입니다. 네트워크 연결 상태를 확인 후 잠시 후 다시 시도해 주세요.",TIMEOUT:"사용량이 많아 서비스 이용이 원활하지 않습니다. 잠시 후 다시 시도해 주세요.",AI_TEMPORARY_ERROR:"AI 기능을 일시적으로 사용할 수 없습니다. 잠시 후 다시 시도해 주세요.",FILTERED_WORD:"글쓰기 도움을 드리기 어려운 주제 또는 표현이 포함되어 있습니다. 수정 후 다시 시도하세요.",NO_KEYWORD:"글감을 1개 이상 추가해주세요.",SUBJECT_MAX_LENGTH:"글의 주제는 1~40자까지 입력할 수 있습니다.",SUBJECT_MIN_LENGTH:"글의 주제는 1~40자까지 입력할 수 있습니다.",KEYWORD_MAX_LENGTH:"글감은 최대 "+H.h+"자까지 입력할 수 있습니다.",DUPLICATE_KEYWORD:"이미 추가된 글감이에요.",INCOMPLETE_WORD:"글쓰기 도움을 드리기 어려운 주제 또는 표현이 포함되어 있습니다. 수정 후 다시 시도하세요.",FULL_WRITING_ERROR:"본문을 충분히 작성한 후 다시 시도해주세요.",SUBJECT_EDITING:"글의 주제 입력을 완료해주세요.",KEYWORD_EDITING:"글감 입력을 완료해주세요.",MINIMUM_WRITING_ERROR:"글을 더 길게 드래그 한 뒤 다시 시도해주세요.",OVERFLOW_CONTENT_INPUT_TRUNCATED:"본문이 너무 길어 생략된 내용이 있을 수 있어요.",OVERFLOW_SELECTED_INPUT_TRUNCATED:"선택한 글이 너무 길어 생략된 내용이 있을 수 있어요.",DISABLED_PARTIAL_WRITING:"본문 텍스트를 드래그 한 뒤 사용할 수 있어요."},J=((i={})[H.m.SUBJECT.FILTERED_WORD]={message:q.FILTERED_WORD,duration:null},i[H.m.SUBJECT.MAX_LENGTH]={message:q.SUBJECT_MAX_LENGTH,duration:3e3},i[H.m.SUBJECT.MIN_LENGTH]={message:q.SUBJECT_MIN_LENGTH,duration:null},i[H.m.SUBJECT.NETWORK_ERROR]={message:q.NETWORK_ERROR,duration:null},i[H.m.SUBJECT.EDITING]={message:q.SUBJECT_EDITING,duration:null},i[H.m.SUBJECT.TIMEOUT]={message:q.TIMEOUT,duration:null},i[H.m.SUBJECT.AI_TEMPORARY_ERROR]={message:q.AI_TEMPORARY_ERROR,duration:null},i[H.m.SUBJECT.INCOMPLETE_WORD]={message:q.INCOMPLETE_WORD,duration:null},i[H.m.KEYWORD_TOP.FILTERED_WORD]={message:q.FILTERED_WORD,duration:3e3},i[H.m.KEYWORD_TOP.NETWORK_ERROR]={message:q.NETWORK_ERROR,duration:3e3},i[H.m.KEYWORD_TOP.NO_KEYWORD]={message:q.NO_KEYWORD,duration:3e3},i[H.m.KEYWORD_TOP.AI_TEMPORARY_ERROR]={message:q.AI_TEMPORARY_ERROR,duration:3e3},i[H.m.KEYWORD_INPUT.MAX_LENGTH]={message:q.KEYWORD_MAX_LENGTH,duration:3e3},i[H.m.KEYWORD_INPUT.DUPLICATE_KEYWORD]={message:q.DUPLICATE_KEYWORD,duration:3e3},i[H.m.KEYWORD_INPUT.EDITING]={message:q.KEYWORD_EDITING,duration:3e3},i[H.m.KEYWORD_INPUT.AI_TEMPORARY_ERROR]={message:q.AI_TEMPORARY_ERROR,duration:3e3},i[H.m.KEYWORD_INPUT.INCOMPLETE_WORD]={message:q.INCOMPLETE_WORD,duration:3e3},i[H.m.TOOLBOX.FILTERED_WORD]={message:q.FILTERED_WORD,duration:3e3},i[H.m.TOOLBOX.NETWORK_ERROR]={message:q.NETWORK_ERROR,duration:3e3},i[H.m.TOOLBOX.TIMEOUT]={message:q.TIMEOUT,duration:3e3},i[H.m.TOOLBOX.AI_TEMPORARY_ERROR]={message:q.AI_TEMPORARY_ERROR,duration:3e3},i[H.m.TOOLBOX.FULL_WRITING_ERROR]={message:q.FULL_WRITING_ERROR,duration:3e3},i[H.m.TOOLBOX.INCOMPLETE_WORD]={message:q.INCOMPLETE_WORD,duration:3e3},i[H.m.TOOLBOX.MINIMUM_WRITING_ERROR]={message:q.MINIMUM_WRITING_ERROR,duration:3e3},i[H.m.TOOLBOX.OVERFLOW_CONTENT_INPUT_TRUNCATED]={message:q.OVERFLOW_CONTENT_INPUT_TRUNCATED,duration:3e3},i[H.m.TOOLBOX.OVERFLOW_SELECTED_INPUT_TRUNCATED]={message:q.OVERFLOW_SELECTED_INPUT_TRUNCATED,duration:3e3},i[H.m.TOOLBOX_BUTTON.DISABLED_PARTIAL_WRITING]={message:q.DISABLED_PARTIAL_WRITING,duration:3e3},i),K=function(){function e(e,t){this._key=void 0,this._message=void 0,this._timeoutId=void 0;var n=J[e],i=n.message,r=n.duration;this._key=e,this._message=i,r&&(this._timeoutId=setTimeout(function(){t()},r))}return e.prototype.destroy=function(){clearTimeout(this._timeoutId)},B()(e,[{key:"key",get:function(){return this._key}},{key:"message",get:function(){return this._message}}]),e}();n.d(t,"a",function(){return X});var X=(r=function(){function e(e){this._id=z.cb.generate(),N()(this,"_value",o,this),N()(this,"_valid",a,this),N()(this,"_recommend",s,this),this._value=e}var t=e.prototype;return t.updateValue=function(e){this._value=e},t.updateValid=function(e){this._valid=e},t.updateRecommend=function(e){this._recommend=e},B()(e,[{key:"id",get:function(){return this._id}},{key:"value",get:function(){return this._value}},{key:"valid",get:function(){return this._valid}},{key:"recommend",get:function(){return this._recommend}}]),e}(),o=U()(r.prototype,"_value",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=U()(r.prototype,"_valid",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s=U()(r.prototype,"_recommend",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r),Y=function(){function e(){}var t=e.prototype;return t.setInvalid=function(e){},t.resetInvalid=function(){},B()(e,[{key:"invalidType",get:function(){return null}}]),e}(),Q=(c=V.g.shallow,l=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,N()(t,"_subject",u,D()(t)),N()(t,"_invalidTypes",p,D()(t)),t}j()(t,e);var n=t.prototype;return n.setSubject=function(e){this._subject=e},n.reset=function(){this._subject="",this._invalidTypes=[]},n.setInvalid=function(e){this._invalidTypes=[].concat(this._invalidTypes.filter(function(t){return t!==e}),[e])},n.resetInvalid=function(e){this._invalidTypes=e?this._invalidTypes.filter(function(t){return t!==e}):[]},B()(t,[{key:"subject",get:function(){return this._subject}},{key:"invalidType",get:function(){return this._invalidTypes[this._invalidTypes.length-1]||null}}]),t}(Y),u=U()(l.prototype,"_subject",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=U()(l.prototype,"_invalidTypes",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l),Z=(d=V.g.shallow,h=V.g.shallow,g=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,N()(t,"_keywords",f,D()(t)),N()(t,"_invalidTypes",m,D()(t)),t}j()(t,e);var n=t.prototype;return n.add=function(e){this._keywords.push(new X(e))},n.remove=function(e){this._keywords=this._keywords.filter(function(t){var n=t.id;return e.id!==n}),this._allValid&&this.resetInvalid(H.g.FILTERED_WORD)},n.replace=function(e){this._keywords=e.map(function(e){return new X(e)}),this._keywords.forEach(function(e){e.updateRecommend(!0)})},n.update=function(e,t){var n=this._keywords.find(function(t){return e===t.id});n.updateValue(t),n.updateValid(!0),this._allValid&&this.resetInvalid(H.g.FILTERED_WORD)},n.reset=function(){this._keywords=[],this._invalidTypes=[]},n.setInvalidKeywords=function(e){this._keywords.forEach(function(t){var n=t.value;t.updateValid(!e.includes(n))}),this.setInvalid(H.g.FILTERED_WORD)},n.setInvalid=function(e){null!==e?this._invalidTypes=[].concat(this._invalidTypes.filter(function(t){return t!==e}),[e]):this._resetInvalidExcept(H.g.FILTERED_WORD)},n.resetInvalid=function(e){this._invalidTypes=e?this._invalidTypes.filter(function(t){return t!==e}):[]},n._resetInvalidExcept=function(e){this._invalidTypes=this._invalidTypes.filter(function(t){return t===e})},B()(t,[{key:"keywords",get:function(){return this._keywords}},{key:"invalidType",get:function(){return this._invalidTypes[this._invalidTypes.length-1]||null}},{key:"_allValid",get:function(){return this._keywords.every(function(e){return e.valid})}}]),t}(Y),f=U()(g.prototype,"_keywords",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=U()(g.prototype,"_invalidTypes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U()(g.prototype,"invalidType",[V.e],Object.getOwnPropertyDescriptor(g.prototype,"invalidType"),g.prototype),U()(g.prototype,"_allValid",[V.e],Object.getOwnPropertyDescriptor(g.prototype,"_allValid"),g.prototype),g),$=(y=function(e){function t(t){var n,i;return void 0===t&&(t={}),i=e.call(this,t)||this,N()(i,"_opened",v,D()(i)),N()(i,"_keywordLayerClosing",_,D()(i)),N()(i,"_step",b,D()(i)),N()(i,"_loading",S,D()(i)),N()(i,"_undoable",C,D()(i)),N()(i,"_redoable",I,D()(i)),N()(i,"_writingType",O,D()(i)),N()(i,"_toast",T,D()(i)),N()(i,"_writingPhase",L,D()(i)),i._prevStep=null,i._insertedRange={start:null,end:null},i._stores=((n={})[H.e.SUBJECT]=new Q,n[H.e.KEYWORD]=new Z,n),N()(i,"_personaStatus",E,D()(i)),N()(i,"_personaInsights",P,D()(i)),i._configAgent=z.W.get("configAgent"),i._userInfo=i._configAgent.get("userInfo"),i}j()(t,e);var n=t.prototype;return n.open=function(e){void 0===e&&(e=G.a.SUBJECT),this._opened=!0,this.setStep(e)},n.close=function(){this._opened=!1,this._undoable=!1,this._redoable=!1,this._writingType=null,this._writingPhase=H.q.INITIAL,this._step=null,this._prevStep=null,this._resetInsertedRange(),this.resetToast(),this.reset()},n.reset=function(){Object.values(this._stores).forEach(function(e){return e.reset()})},n.setWritingType=function(e){this._writingType=e},n.setKeywordLayerClosing=function(e){this._keywordLayerClosing=e},n._getStore=function(e){return this._stores[e]},n.setSubject=function(e){this._subjectStore.setSubject(e)},n.setStep=function(e){this._prevStep=this._step,this._step=e,Object.values(this._stores).forEach(function(e){return e.resetInvalid()})},n.setInvalid=function(e,t){this._getStore(e).setInvalid(t)},n.setToast=function(e,t){var n,i=this,r=this._toast[e];if(r&&r.destroy(),t){var o=new K(t,function(){i._toast[e]=null});this._toast=k()({},this._toast,((n={})[e]=o,n))}else this._toast[e]=null},n.resetToast=function(){Object.values(this._toast).forEach(function(e){e&&e.destroy()}),this._toast={}},n.resetInvalid=function(e,t){e?this._getStore(e).resetInvalid(t):Object.values(this._stores).forEach(function(e){return e.resetInvalid()})},n._resetInsertedRange=function(){this._insertedRange={start:null,end:null}},n.setUndoable=function(e){this._undoable=e},n.setRedoable=function(e){this._redoable=e},n.addKeyword=function(e){this._keywordStore.add(e),this._keywordStore.resetInvalid(H.g.NO_KEYWORD)},n.updateKeywordValue=function(e,t){this._keywordStore.update(e,t)},n.updateKeywords=function(e){this._keywordStore.replace(e)},n.deleteKeyword=function(e){this._keywordStore.remove(e),0===this.keywords.length&&this.setInvalid(H.e.KEYWORD,H.g.NO_KEYWORD)},n.loadStart=function(){this._loading=!0},n.loadEnd=function(){this._loading=!1},n.updateInvalidKeywords=function(e){this._keywordStore.setInvalidKeywords(e)},n.getInvalid=function(e){return this._getStore(e).invalidType},n.updateInsertedRange=function(e){var t=e.start,n=void 0===t?this._insertedRange.start:t,i=e.end,r=void 0===i?this._insertedRange.end:i;this._insertedRange={start:n,end:r}},n.setWritingPhase=function(e){this._writingPhase=e,e===H.q.IN_PROGRESS&&this._resetInsertedRange()},n.setPersonaInsights=function(e){var t=e.interest,n=void 0===t?"":t,i=e.preferredExpression,r=void 0===i?"":i,o=e.writingStyle,a=void 0===o?"":o;this._personaInsights={interest:n,preferredExpression:r,writingStyle:a}},n.setPersonaStatus=function(e){this._personaStatus=e},B()(t,[{key:"opened",get:function(){return this._opened}},{key:"keywordLayerClosing",get:function(){return this._keywordLayerClosing}},{key:"_subjectStore",get:function(){return this._stores[H.e.SUBJECT]}},{key:"_keywordStore",get:function(){return this._stores[H.e.KEYWORD]}},{key:"personaInsights",get:function(){return k()({},this._personaInsights)}},{key:"personaStatus",get:function(){return this._personaStatus}},{key:"subject",get:function(){return this._subjectStore.subject}},{key:"keywords",get:function(){return this._keywordStore.keywords}},{key:"step",get:function(){return this._step}},{key:"prevStep",get:function(){return this._prevStep}},{key:"loading",get:function(){return this._loading}},{key:"undoable",get:function(){return this._undoable}},{key:"redoable",get:function(){return this._redoable}},{key:"writingType",get:function(){return this._writingType}},{key:"writingPhase",get:function(){return this._writingPhase}},{key:"toast",get:function(){return this._toast}},{key:"insertedRange",get:function(){return this._insertedRange}},{key:"personaInsightsExist",get:function(){return Object.values(this._personaInsights).some(function(e){return!Object(F.a)(e)})}},{key:"invalidTypes",get:function(){return Object.values(this._stores).reduce(function(e,t){var n=t.invalidType;return n&&e.push(n),e},[])}},{key:"nickname",get:function(){return this._userInfo.nickName||this._userInfo.userId||"블로거"}},{key:"tutorialActiveState",get:function(){return!(this.writingPhase===H.q.ERROR)}}]),t}(z.e),v=U()(y.prototype,"_opened",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=U()(y.prototype,"_keywordLayerClosing",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=U()(y.prototype,"_step",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=U()(y.prototype,"_loading",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=U()(y.prototype,"_undoable",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=U()(y.prototype,"_redoable",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=U()(y.prototype,"_writingType",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=U()(y.prototype,"_toast",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),L=U()(y.prototype,"_writingPhase",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.q.INITIAL}}),E=U()(y.prototype,"_personaStatus",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.j.INSIGHT}}),P=U()(y.prototype,"_personaInsights",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{interest:void 0,writingStyle:void 0,preferredExpression:void 0}}}),U()(y.prototype,"personaInsights",[V.e],Object.getOwnPropertyDescriptor(y.prototype,"personaInsights"),y.prototype),U()(y.prototype,"subject",[V.e],Object.getOwnPropertyDescriptor(y.prototype,"subject"),y.prototype),U()(y.prototype,"step",[V.e],Object.getOwnPropertyDescriptor(y.prototype,"step"),y.prototype),U()(y.prototype,"loading",[V.e],Object.getOwnPropertyDescriptor(y.prototype,"loading"),y.prototype),U()(y.prototype,"undoable",[V.e],Object.getOwnPropertyDescriptor(y.prototype,"undoable"),y.prototype),U()(y.prototype,"redoable",[V.e],Object.getOwnPropertyDescriptor(y.prototype,"redoable"),y.prototype),U()(y.prototype,"writingType",[V.e],Object.getOwnPropertyDescriptor(y.prototype,"writingType"),y.prototype),U()(y.prototype,"writingPhase",[V.e],Object.getOwnPropertyDescriptor(y.prototype,"writingPhase"),y.prototype),y);t.b=$},129:function(e,t,n){"use strict";var i=n(55),r=n.n(i),o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(54)),g=n.n(h),f=n(49),m=n(376),y=n(59),v=n(294),_=n(239),b="icon",S=function(e){function t(){var t;return(t=e.call(this)||this)._ref=f.b.createRef(),t}u()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._autoHideTooltip()},n.componentWillUnmount=function(){this._timer&&clearTimeout(this._timer)},n.render=function(){var e=this.props,t=e.type,n=e.text,i=e.arrow,r=e.src,o=g()("__se-highlight-tooltip","se-highlight-tooltip","se-highlight-tooltip-position-"+i),a=g()(["se-highlight-tooltip-container",{"se-highlight-tooltip-icon-type":t===b}]);return f.b.createElement("div",{ref:this._ref,className:o},f.b.createElement("div",{className:a},t===b&&f.b.createElement("div",{className:"se-highlight-tooltip-icon"},f.b.createElement("img",{src:r})),f.b.createElement("p",{className:"se-highlight-tooltip-description",dangerouslySetInnerHTML:{__html:n}}),f.b.createElement("span",{className:"se-highlight-arrow-icon"})))},n._autoHideTooltip=function(){var e=this;this._timer=setTimeout(function(){_.b.hide(e.props.name,_.a.TOOLTIP,e._ref.current)},3e3)},t}(f.b.Component);S.defaultProps={name:"",type:"",arrow:"",text:"",src:""},S.propTypes={name:f.a.string,type:f.a.string,arrow:f.a.string,text:f.a.string,src:f.a.string};var C,I,O=Object(m.b)(S),T=n(245),L=n(34),E=n(231),P=n(111),w=[y.b.LABEL_SELECT,y.b.ICON_SELECT,y.b.DROP_DOWN,y.b.COLOR_PICKER,y.b.CUSTOM_LAYER,y.b.RANGE_SLIDER,y.b.MORE_VIEW],k=(C=function(e){function t(t){var n;return n=e.call(this,t)||this,a()(n,"_tooltipVisible",I,c()(n)),n._handleClick=function(e){n._tooltipVisible=!1,n.props.handleClick(e)},n._handleMouseOver=function(){n.props.handleMouseOver()},n.buttonRef=f.b.createRef(),n}u()(t,e);var n=t.prototype;return n.componentDidUpdate=function(){this.props.focused&&this.buttonRef.current.focus()},n.render=function(){var e=this.props,t=e.disabled,n=e.dataName,i=e.className,o=e.highlight,a=e.children,s=o&&o.badge&&!_.b.shown(n,_.a.BADGE),c=o&&o.tooltip,l=g()([i,s&&"se-highlight-toolbar-button",(s||c)&&"__se-highlight-button",c&&"se-highlight-tooltip-toolbar-button","__se-sentry"]),u=this._resolveDataAttributes(),p=this._resolveExpandedAttributes(),d=this._resolveHighlightTooltip(c),h=this._resolveAiTooltip(),m=this._resolveBetaIcon();return f.b.createElement(f.b.Fragment,null,f.b.createElement(v.a,r()({type:"button",title:"",className:l,elementRef:this.buttonRef,disabled:t,onClick:this._handleClick,onMouseOver:this._handleMouseOver},u,p),a,m,d),h)},n._resolveBetaIcon=function(){return this.props.useBeta?f.b.createElement("div",{className:"se-highlight-beta-icon"}):null},n._resolveHighlightTooltip=function(e){if(!e||!e.text)return null;var t=this.props,n=t.dataName,i=t.i18n;return f.b.createElement(O,{name:n,type:e.type,arrow:e.arrow,text:i(e.text),src:e.src})},n._resolveAiTooltip=function(){var e=this.props,t=e.dataName,n=e.namespace;if(t!==L.a.AI_WRITE||n!==y.e.DOCUMENT||!this._tooltipVisible)return null;var i=E.a.IS_IE?P.o.TOOLBAR_FOR_UNSUPPORTED_BROWSER:P.o.TOOLBAR_FOR_USABLE_AI;return f.b.createElement(T.a,{type:i})},n._resolveDataAttributes=function(){var e=this.props,t=e.namespace,n=e.dataValue,i=e.dataName,r=e.dataRole,o=e.type,a=e.logAreaId,s=e.logId;return{"data-group":t+"Toolbar","data-value":n,"data-type":o,"data-name":i,"data-log":a&&s?a+"."+s:null,"data-role":r}},n._resolveExpandedAttributes=function(){var e=this.props,t=e.ariaExpanded,n=e.ariaHasPopup,i=e.type;if(w.includes(i))return{"aria-expanded":t,"aria-haspopup":n}},t}(f.b.Component),I=d()(C.prototype,"_tooltipVisible",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C);k.defaultProps={focused:!1,disabled:!1,handleClick:function(){},handleMouseOver:function(){},i18n:function(e){return e},ariaExpanded:"false",ariaHasPopup:"false"},k.propTypes={namespace:f.a.oneOf(Object.values(y.e)).isRequired,type:f.a.oneOf(Object.values(y.b)),dataRole:f.a.string,dataValue:f.a.oneOfType([f.a.string,f.a.number,f.a.bool]),dataName:f.a.string,handleClick:f.a.func,handleMouseOver:f.a.func,className:f.a.string,disabled:f.a.bool,focused:f.a.bool,i18n:f.a.func,logAreaId:f.a.string,logId:f.a.string,useBeta:f.a.bool,highlight:f.a.object,ariaExpanded:f.a.string,ariaHasPopup:f.a.string};t.a=Object(m.b)(k)},1307:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(49),a=n(376),s=n(1113),c=n.n(s),l=n(51),u=n(722);t.a=function(e){var t=function(t){function n(e){var n;if((n=t.call(this,e)||this).state={LazyComponent:null},!e.useCase||!e.useCase.close)throw new Error("props.useCase.close is required.");return n._flows=new u.a,n}r()(n,t);var i=n.prototype;return i.componentDidMount=function(){var t=this.props.store.opened;(e.preload||t)&&this._loadComponent()},i.componentDidUpdate=function(){var e=this.props.store.opened;!this.state.LazyComponent&&e&&this._loadComponent()},i.componentWillUnmount=function(){this._flows.abort()},i.render=function(){var e=this.state.LazyComponent,t=this.props.store,n=t.opened,i=t.unmountDelayTime,r=void 0===i?0:i;return e&&n?o.b.createElement(c.a,{mounted:n,unmountAfter:r},o.b.createElement(e,this.props)):null},i._loadComponent=function(){var t=this;this._flows.fork("loading").next(e.Loader).next(function(e){var n=e.default;t.setState({LazyComponent:n})}).fail(function(){var e=l.W.get("alertLayerService"),n=t.props,i=n.useCase,r=n.i18n;i.close(),e.open({type:"alert",title:r("errorLazy:title"),description:r("errorLazy:description")})})},n}(o.b.Component);return Object(a.b)(t)}},1308:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={EACH_VIDEO_PROCESSED:"eachVideoProcessed",EVERY_VIDEO_PROCESSED:"everyVideoProcessed",EDIT_COMPLETED:"editCompleted",UPLOADER_REOPENED:"uploaderReopened",BACKGROUND_UPLOAD_STARTED:"backgroundUploadStarted",USER_THUMBNAIL_UPLOADED:"userThumbnailUploaded",BACKGROUND_UPLOAD_FINISHED:"backgroundUploadFinished"}},1309:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i,r=n(0),o=n.n(r),a=n(1310),s=function(){function e(){}var t=e.prototype;return t.refine=function(e){var t=this._refine(e);return t&&Array.isArray(t)&&0!==t.length?t:null},t._refine=function(e){throw new Error("implemented",e)},e}(),c=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype._refine=function(e){return[e.fileId]},t}(s),l=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype._refine=function(e){return[e.audioId]},t}(s),u=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype._refine=function(e){switch(e.vid?a.c.SIMPLE:a.c.NORMAL){case a.c.SIMPLE:return[e.vid];case a.c.NORMAL:return e.filter(function(e){return e.vid}).map(function(e){return""+e.vid})}},t}(s),p=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n._refine=function(e){var t=this._resolveImageType(e);return this._refineByType(t,e)},n._resolveImageType=function(e){return e&&Array.isArray(e.succeededImages)?a.a.NORMAL:e&&e.type===a.a.USER_UPLOAD_VIDEO_THUMBNAIL?a.a.USER_UPLOAD_VIDEO_THUMBNAIL:e&&Array.isArray(e)&&e[0].photos?a.a.NPE:void 0},n._refineByType=function(e,t){switch(e){case a.a.NORMAL:return t.succeededImages.map(function(e){var t=e.response;return encodeURI(""+t.domain+t.path+"/"+t.fileName)});case a.a.USER_UPLOAD_VIDEO_THUMBNAIL:return[encodeURI(""+t.domain+t.path+"/"+t.fileName)];case a.a.NPE:return t.flatMap(function(e){return e.photos?e.photos:[]}).filter(function(e){return e.modified}).map(function(e){var t=e.domain,n=e.path;return encodeURI(""+t+n)})}},t}(s),d=((i={})[a.b.FILE]=new c,i[a.b.AUDIO]=new l,i[a.b.VIDEO]=new u,i[a.b.IMAGE]=new p,i),h=function(e,t){var n=d[e],i=n?n.refine(t):null;return i&&{type:e,data:i}}},1310:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o});var i={FILE:"file",AUDIO:"audio",IMAGE:"image",VIDEO:"video"},r={SIMPLE:"simple",NORMAL:"normal"},o={NORMAL:"normal",USER_UPLOAD_VIDEO_THUMBNAIL:"userUploadVideoThumbnail",NPE:"naverPhotoEditor"}},1312:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",LEFT_TOP:"left-top",LEFT_CENTER:"left-center",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_CENTER:"right-center",RIGHT_BOTTOM:"right-bottom",LEFT:"left",RIGHT:"right",CENTER:"center"}},1313:function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"g",function(){return o}),n.d(t,"h",function(){return a}),n.d(t,"i",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return m}),n.d(t,"d",function(){return y});var i=n(1079),r={ctype:i.b.string.isRequired,x:i.b.number.isRequired,y:i.b.number.isRequired},o={ctype:i.b.string.isRequired,latitude:i.b.number.isRequired,longitude:i.b.number.isRequired},a={ctype:i.b.string.isRequired,src:i.b.string.isRequired},s={ctype:i.b.string.isRequired,src:i.b.string.isRequired,width:i.b.number,height:i.b.number},c={ctype:i.b.string.isRequired,placeId:i.b.string,name:i.b.string,address:i.b.string,latlng:i.b.shape(o),searchType:i.b.string,bookingUrl:i.b.string,tel:i.b.string},l={ctype:i.b.string.isRequired,title:i.b.string,tags:i.b.array.isRequired,description:i.b.string},u={ctype:i.b.string.isRequired,srcFrom:i.b.string.isRequired,externalId:i.b.string},p={ctype:i.b.string.isRequired,selectedWeeks:i.b.array.isRequired,daysOfWeek:i.b.array.isRequired},d={ctype:i.b.string.isRequired,startDay:i.b.number.isRequired,endDay:i.b.number.isRequired},h={ctype:i.b.string.isRequired,daysOfWeek:i.b.array,weekDayGroup:i.b.shape(p),dateGroup:i.b.shape(d)},g={ctype:i.b.string.isRequired,repetitionType:i.b.shape(h),time:i.b.string.isRequired},f={ctype:i.b.string.isRequired,type:i.b.string.isRequired,startDate:i.b.string.isRequired,endDate:i.b.string.isRequired,expired:i.b.bool.isRequired},m={ctype:i.b.string.isRequired,text:i.b.string.isRequired,name:i.b.string.isRequired,owner:i.b.bool.isRequired},y={Repetition:g,Notification:f}},1314:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=100},1344:function(e,t,n){"use strict";n.r(t);var i,r,o,a,s=n(34),c=n(71),l=n(69),u=n(231),p="ai-write",d="image",h="sticker",g="horizontalLine",f="quotation",m=((i={})[p]={type:"default",name:"ai-write",label:"insertMenuLayout:ai_write_label",disabled:u.a.IS_IE,logId:"ai"},i[d]={type:"default",name:"image",label:"insertMenuLayout:photo_label",disabled:!1,logId:"photo"},i[h]={type:"default",name:"sticker",label:"insertMenuLayout:sticker_label",disabled:!1,logId:"sticker"},i[g]={type:"optional",name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label",disabled:!1,logId:"horizt",panels:{default:{name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label1",disabled:!1,logId:"horizt0"},line1:{name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label2",disabled:!1,logId:"horizt1"},line2:{name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label3",disabled:!1,logId:"horizt2"},line3:{name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label4",disabled:!1,logId:"horizt3"},line4:{name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label5",disabled:!1,logId:"horizt4"},line5:{name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label6",disabled:!1,logId:"horizt5"},line6:{name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label7",disabled:!1,logId:"horizt6"},line7:{name:"horizontalLine",label:"insertMenuLayout:horizontal_line_label8",disabled:!1,logId:"horizt7"}}},i[f]={type:"optional",name:"quotation",label:"insertMenuLayout:quotation_label",disabled:!1,logId:"quotat",panels:{default:{name:"quotation",label:"insertMenuLayout:quotation_label1",disabled:!1,logId:"quota0"},quotation_line:{name:"quotation",label:"insertMenuLayout:quotation_label2",disabled:!1,logId:"quota1"},quotation_bubble:{name:"quotation",label:"insertMenuLayout:quotation_label3",disabled:!1,logId:"quota2"},quotation_underline:{name:"quotation",label:"insertMenuLayout:quotation_label4",disabled:!1,logId:"quota3"},quotation_postit:{name:"quotation",label:"insertMenuLayout:quotation_label5",disabled:!1,logId:"quota4"},quotation_corner:{name:"quotation",label:"insertMenuLayout:quotation_label6",disabled:!1,logId:"quota5"}}},i),y={getDefinitions:function(e){var t={};return Object(c.a)(e,function(e){var n=m[e];t[e]=Object(l.a)({},n)}),t}},v=n(780),_=n(51),b=n(0),S=n.n(b),C=function(e){function t(){var t;return(t=e.call(this)||this)._toastLayerService=_.W.get("toastLayerService"),t}return S()(t,e),t.prototype.close=function(){this._toastLayerService.close()},t}(_.m),I={INFO:"info",WARNING:"warning"},O=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){},n.close=function(){this._store.hideToast()},n.warningMessage=function(e){this._store.openToast({type:I.WARNING,message:e}),this._hideToast()},n.infoMessage=function(e){this._store.openToast({type:I.INFO,message:e}),this._hideToast()},n._hideToast=function(){var e=this;setTimeout(function(){e._store.hideToast()},this._store.lastingMoment)},t}(_.f),T=n(60),L=n.n(T),E=n(58),P=n.n(E),w=n(50),k=n.n(w),x=(n(61),n(16)),D=n(49),A=(r=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"message",o,P()(n)),L()(n,"opened",a,P()(n)),n.lastingMoment=2e3,n.unmountDelayTime=400,n.type=I.WARNING;var i=t,r=i.state,s=void 0===r?{}:r,c=i.config,l=void 0===c?{}:c;return n.opened=Object(x.a)(s,"opened",n.opened),n.message=Object(x.a)(s,"message",n.message),n.lastingMoment=Object(x.a)(l,"lastingMoment",n.lastingMoment),n.type=Object(x.a)(l,"type",n.type),n}S()(t,e);var n=t.prototype;return n.openToast=function(e){var t=e.type,n=e.message;this.type=t,this.message=n,this.opened=!0},n.hideToast=function(){this.opened=!1},t}(_.e),o=k()(r.prototype,"message",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=k()(r.prototype,"opened",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r),j=n(54),R=n.n(j),N=n(376),M=n(1),B=n.n(M),W=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.render=function(){var e=this.props,t=e.isFlexible,n=e.store,i=n.message,r=n.type,o=n.opened;if(!i)return null;var a=R()(["se-toast-popup",{"se-toast-flexible":t,"se-toast-interaction-enter":o,"se-toast-interaction-exit":!o}]),s=R()("se-toast-popup-content","se-toast-popup-content-"+r);return D.b.createElement("div",{className:a},D.b.createElement("div",{className:"se-toast-popup-contiainer"},D.b.createElement("div",{className:s},D.b.createElement("p",{role:"alert",className:"se-toast-popup-message",dangerouslySetInnerHTML:{__html:i}}))))},t}(D.b.Component);W.defaultProps={i18n:function(e){return e}},W.propTypes={store:D.a.instanceOf(A).isRequired,i18n:D.a.func,isFlexible:D.a.bool};var U,F,z,V=Object(N.b)(function(e,t){var n;return void 0===t&&(t=0),n=function(n){function i(e){var t;return(t=n.call(this,e)||this).state={shouldRender:!1},t._deferred=null,t}S()(i,n);var r=i.prototype;return r.componentDidUpdate=function(){this._renderStartConditionSatisfied?this._shouldMount():this._renderStopConditionSatisfied&&this._shouldUnmount()},r.componentWillUnmount=function(){this._deferred&&clearTimeout(this._deferred)},r.render=function(){return this._satisfied,this.state.shouldRender?D.b.createElement(e,this.props):null},r._shouldMount=function(){this.setState({shouldRender:!0})},r._shouldUnmount=function(){var e=this;this._deferred&&clearTimeout(this._deferred),this._deferred=setTimeout(function(){e._deferred=null,e.setState({shouldRender:!1})},t)},B()(i,[{key:"_satisfied",get:function(){return this.props.store.opened}},{key:"_renderStartConditionSatisfied",get:function(){return!0===this._satisfied&&!1===this.state.shouldRender}},{key:"_renderStopConditionSatisfied",get:function(){return!1===this._satisfied&&!0===this.state.shouldRender}}]),i}(D.b.Component),k()(n.prototype,"_satisfied",[D.e],Object.getOwnPropertyDescriptor(n.prototype,"_satisfied"),n.prototype),k()(n.prototype,"_renderStartConditionSatisfied",[D.e],Object.getOwnPropertyDescriptor(n.prototype,"_renderStartConditionSatisfied"),n.prototype),k()(n.prototype,"_renderStopConditionSatisfied",[D.e],Object.getOwnPropertyDescriptor(n.prototype,"_renderStopConditionSatisfied"),n.prototype),n}(W,400)),G=_.G.extend({name:"ToastLayer",view:V,useCase:C,service:O,store:A}),H=n(1307),q=n(437),J=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.close=function(){this._store.closePopup(),this._unpauseDocumentEdit()},n.open=function(e){this._pauseDocumentEdit(),this._store.openPopup(e)},n.toggle=function(e){this._store.togglePopup(e)},n.getRecentSpecialLetterList=function(e){var t=this._store,n=t.persistentPolicy,i=void 0===n?[]:n,r=t.letterGroupList,o=Object.keys(i)[0],a=i[o],s=a.key,c=a.property,l=[].concat(r[o][c]),u=l.indexOf(e);return u>-1&&l.splice(u,1),l.unshift(e),l.length>q.a.STORAGE_VALUE_MAX_LENGTH&&l.pop(),{key:s,list:l}},n.updateRecentSpecialLetterList=function(e){this._store.updateRecentSpecialLetterList(e)},n.changeLetterGroup=function(e){this._store.changeLetterGroup(e)},n.hasChangedPosition=function(){this._store.movedPopup=!0},t}(_.d),K=n(436),X=n(779),Y=_.G.extend({name:"SpecialLetterLayer",view:Object(H.a)({Loader:function(){return n.e(48).then(n.bind(null,1361))}}),useCase:K.a,service:J,store:X.a}),Q=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.m),Z=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(e,t){void 0===e&&(e="white"),void 0===t&&(t=0),this._clearTimerId(),t?this._delayedOpen(e,t):this._open(e)},n.close=function(){this._clearTimerId(),this.isOpen()&&(this._store.hide(),this._unpauseDocumentEdit())},n.isOpen=function(){return this._store.isShow},n._open=function(e){this._pauseDocumentEdit(),this._store.show(e)},n._delayedOpen=function(e,t){this._timerId=setTimeout(this._open.bind(this,e),t)},n._clearTimerId=function(){this._timerId&&clearTimeout(this._timerId),this._timerId=null},t}(_.d),$=(U=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"isShow",F,P()(n)),L()(n,"dimColor",z,P()(n));var i=t.state,r=void 0===i?{}:i;return n.isShow=Object(x.a)(r,"isShow",n.isShow),n.dimColor=Object(x.a)(r,"dimColor",n.dimColor),n}S()(t,e);var n=t.prototype;return n.show=function(e){this.isShow=!0,this.dimColor=e},n.hide=function(){this.isShow=!1},t}(_.e),F=k()(U.prototype,"isShow",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=k()(U.prototype,"dimColor",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"white"}}),U),ee=n(93),te=n(52),ne=0,ie=1,re={};re[ne]={preventDefaultList:["keydown","keyup","mousedown","mousemove","mouseup","touchstart","touchend","touchcancel","touchmove","scroll","contextmenu","dragstart","dragover","dragend","drop"],stopPropagationList:[]},re[ie]={preventDefaultList:["keydown","keyup","mousemove","touchmove","scroll","dragstart","dragover","dragend","drop"],stopPropagationList:["mousedown","mouseup","touchstart","touchend","touchcancel"]};var oe=function(e,t){var n;return void 0===t&&(t=ne),Object(N.b)((n=function(n){function i(e){var i;return(i=n.call(this,e)||this)._blockMode=t,i._elRef=D.b.createRef(),i._el=null,i}S()(i,n);var r=i.prototype;return r.componentDidMount=function(){var e=this._getBlockListByMode(this._blockMode),t=e.preventDefaultList,n=e.stopPropagationList,i=this._el=this._elRef.current;this._attachBlockEvent(i,t,this._handlePreventDefault),this._attachBlockEvent(i,n,this._handleStopPropagation)},r.componentDidUpdate=function(){var e=this._getBlockListByMode(this._blockMode),t=e.preventDefaultList,n=e.stopPropagationList;if(this._el!==this._elRef.current){var i=this._el=this._elRef.current;this._detachBlockEvent(i,t,this._handlePreventDefault),this._detachBlockEvent(i,n,this._handleStopPropagation),this._attachBlockEvent(i,t,this._handlePreventDefault),this._attachBlockEvent(i,n,this._handleStopPropagation)}},r.componentWillUnmount=function(){var e=this._getBlockListByMode(this._blockMode),t=e.preventDefaultList,n=e.stopPropagationList;this._detachBlockEvent(this._el,t,this._handlePreventDefault),this._detachBlockEvent(this._el,n,this._handleStopPropagation),this._el=null},r.render=function(){return D.b.createElement("div",{ref:this._elRef},D.b.createElement(e,this.props))},r._getBlockListByMode=function(e){return re[e]||re[ne]},r._attachBlockEvent=function(e,t,n){t.forEach(function(t){e.addEventListener(t,n)})},r._detachBlockEvent=function(e,t,n){t.forEach(function(t){e.removeEventListener(t,n)})},r._handlePreventDefault=function(e){return e.preventDefault(),e.stopPropagation(),!1},r._handleStopPropagation=function(e){e.stopPropagation()},i}(D.b.Component),k()(n.prototype,"_handlePreventDefault",[te.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handlePreventDefault"),n.prototype),k()(n.prototype,"_handleStopPropagation",[te.autobind],Object.getOwnPropertyDescriptor(n.prototype,"_handleStopPropagation"),n.prototype),n))},ae=function(e){function t(t){var i;return i=e.call(this,t)||this,(new Image).src=n(1106),i}return S()(t,e),t.prototype.render=function(){var e=this.props.store,t=e.isShow,n=e.dimColor;return t?D.b.createElement(ee.a,{className:"se-popup-loading",opened:t,dimColor:n},D.b.createElement("div",{className:"se-popup-loading-icon"},D.b.createElement("span",{className:"se-blind"},this.props.i18n("loadingLayer:loading")))):null},t}(D.b.Component);ae.defaultProps={i18n:function(e){return e}},ae.propTypes={store:D.a.instanceOf($).isRequired,useCase:D.a.instanceOf(Q).isRequired,i18n:D.a.func};var se,ce=oe(Object(N.b)(ae)),le=_.G.extend({name:"LoadingLayer",view:ce,useCase:Q,service:Z,store:$}),ue=n(389),pe=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){},n.close=function(){},n.confirm=function(){this._store.confirmProgress()},n.start=function(e){this._store.start(e)},n.updateProgress=function(e){this._store.updateProgress(e)},n.update=function(e){this._store.update(e)},n.end=function(){this._store.end()},t}(_.d),de=n(390),he=_.G.extend({name:"UploadProgressLayer",view:Object(H.a)({Loader:function(){return n.e(24).then(n.bind(null,1318))}}),useCase:ue.a,service:pe,store:de.b}),ge=n(287),fe=function(e){function t(t){var n;return(n=e.call(this,t)||this)._resolve=null,n._editorStatusStore=_.W.get("editorStatusStore"),n}S()(t,e);var n=t.prototype;return n.open=function(){var e=this;return new Promise(function(t){e._resolve=t,e._editorStatusStore.busy(),e._store.open()})},n.close=function(e){void 0===e&&(e=!0),this._store.close(),this._editorStatusStore.idle(),this._resolve&&this._resolve(e)},t}(_.d),me=n(288),ye=_.G.extend({name:"VideoThumbnailLayer",view:Object(H.a)({Loader:function(){return Promise.all([n.e(11),n.e(25)]).then(n.bind(null,1366))},preload:!0}),useCase:ge.a,service:fe,store:me.a}),ve=n(391),_e=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){this._store.shown||(this._pauseDocumentEdit(),this._store.open())},n.close=function(){this._unpauseDocumentEdit(),this._store.close()},t}(_.d),be=n(392),Se=_.G.extend({name:"HighlightBannerLayer",view:Object(H.a)({Loader:function(){return n.e(26).then(n.bind(null,1319))}}),useCase:ve.a,service:_e,store:be.a}),Ce=n(393),Ie=n(394),Oe=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(e){this._store.opened||this._store.type!==Ie.a.LOGIN&&(this._onClickConfirm=e.onClickConfirm||function(){},this._onClickCancel=e.onClickCancel||function(){},this._pauseDocumentEdit(),this._store.open(e))},n.close=function(){this._store.opened&&(this._store.close(),this._unpauseDocumentEdit())},n.cancel=function(){this._store.opened&&(this.close(),this._onClickCancel())},n.confirm=function(){var e=this._store,t=e.type,n=e.errorList;this.close(),this._onClickConfirm({type:t,errorList:n})},t}(_.d),Te=n(395),Le=_.G.extend({name:"AlertLayer",view:Object(H.a)({Loader:function(){return n.e(27).then(n.bind(null,1359))},preload:!0}),useCase:Ce.a,service:Oe,store:Te.a}),Ee=n(244),Pe=n(243),we=n(96),ke=n(165),xe=function(e){function t(t){var n;return(n=e.call(this,t)||this)._canvasScrollingService=_.W.get("canvasScrollingService"),n._componentFactory=_.W.get("componentFactory"),n._editMode=!1,n}S()(t,e);var n=t.prototype;return n.open=function(){this.openLoadingLayer(),this._canvasScrollingService.hideWindowScroll(),this._pauseDocumentEdit(),this._store.open()},n.editWebtoon=function(e){this.openLoadingLayer(),this._canvasScrollingService.hideWindowScroll(),this._pauseDocumentEdit(),this._store.editWebtoon(e),this._editMode=!0},n.openLoadingLayer=function(){this._store.openLoadingLayer()},n.closeLoadingLayer=function(){var e=this;setTimeout(function(){e._store.closeLoadingLayer()},500)},n.close=function(){this._store.close(),this._unpauseDocumentEdit(),this._canvasScrollingService.restoreWindowScroll(),this._editMode=!1},n.insertShellImage=function(e){this._store.insertShellImage(e)},n.getImageStore=function(e){return this._store.images.find(function(t){return t.id===e})},n.updateCurrentPage=function(e){this._store.updateCurrentPage(e)},n.changeLayout=function(e){this._store.changeLayout(e)},n.deleteImage=function(e){var t=Object(we.a)(this._store.images,function(t){return e===t.id});t>-1&&this._store.deleteImage(t)},n.changeImageOrder=function(e,t){e!==t&&this._store.changeImageOrder(e,t)},n.isEditMode=function(){return this._editMode},n.isOpen=function(){return this._store.opened},n._refineComponentData=function(){var e=this._store,t=e.images,n=e.layout,i={ctype:"webtoon",images:t,layout:n};if(n===ke.b.HORIZONTAL){var r=this._store.horizontalDirection,o=function(e){return!!e.length&&e.every(function(e){var t=e.width,n=void 0===t?0:t,i=e.height,r=void 0===i?0:i,o=e.originalWidth,a=void 0===o?0:o,s=e.originalHeight,c=void 0===s?0:s;return!!(c&&a&&a>=c)||!!(n&&r&&n>=r)})}(t)?"1:1":"3:4";i.horizontalDirection=r,i.horizontalAspectRatio=o}return i},n.createComponentData=function(){var e=this._refineComponentData();return this._componentFactory.createComponentWithCompData(e)},n.uploadStatus=function(e){this._store.uploadStatus(e)},t}(_.d),De=_.G.extend({name:"WebtoonLayer",view:Object(H.a)({Loader:function(){return n.e(45).then(n.bind(null,1352))}}),useCase:Pe.a,service:xe,store:Ee.a}),Ae=n(59),je=n(56),Re=n.n(je),Ne=n(17),Me=n.n(Ne),Be=n(719),We=n(239),Ue=["buttonName","styleName","compType","toolbarName"],Fe=[Ae.e.DOCUMENT,Ae.e.PROPERTY],ze=(se=function(e){function t(){var t;return(t=e.call(this)||this)._deviceType=_.W.get("configAgent").get("productEnv.deviceType"),t._pluginButtonRegistry=_.W.get("pluginButtonRegistry"),t._upperCaseRegex=new RegExp("[A-Z]"),t.state={wrapperStyle:{overflow:"hidden"}},t}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.namespace;e.isFlexible&&t===Ae.e.DOCUMENT?this._refineDisplayButtonSet():this._resetWrapperOverflowStyle()},n.componentDidUpdate=function(e){this._shouldRefineDisplayButtonSetOnUpdate(e)&&this._refineDisplayButtonSet()},n.render=function(){var e=this.props.className,t=this._renderButtonList(),n=this._resolveToolbarWrapperStyle();return D.b.createElement("ul",{ref:this._toolbarWrapperRef,className:e,onMouseUp:this._handleClick,style:n},t)},n._toolbarWrapperRef=function(e){this._toolbarWrapper=e},n._shouldRefineDisplayButtonSetOnUpdate=function(e){var t=this.props,n=t.namespace,i=t.isFlexible,r=t.selectedUnitIds,o=t.viewMode;return!!i&&(!!Fe.includes(n)&&(o!==e.viewMode||n===Ae.e.PROPERTY&&r!==e.selectedUnitIds))},n._refineDisplayButtonSet=function(){var e=this._toolbarWrapper.childNodes;if(e.length>0){var t=e[0].offsetTop,n=[];Object(c.a)(e,function(e){e.offsetTop!==t&&0!==e.offsetTop||n.push(e)}),this.props.onReflowToolbar({displayButtonCount:n.length})}this._resetWrapperOverflowStyle()},n._resetWrapperOverflowStyle=function(){this.setState({wrapperStyle:{overflow:""}})},n._resolveToolbarWrapperStyle=function(){return this.state.wrapperStyle},n._resolveButtonListClassName=function(e){var t=e.name,n=e.option,i=Object(x.a)(n,"position");return R()("se-toolbar-item","se-toolbar-item-"+t,i?"se-toolbar-"+i:"")},n._renderButtonList=function(){var e=this,t=this.props,n=t.buttons,i=t.moreButtons,r=i&&this._getMoreButtons(i);return n.map(function(t,n){var i=e._resolveButton(t),o=i.className,a=i.buttonView,s=i.props,c=i.handleKeyDown;return r&&"more-view"===t.styleName&&Object(l.a)(s,{options:r}),D.b.createElement("li",{key:t.buttonName+"-"+n,className:o,onKeyDown:c,"data-role":"button-container"},a(s))})},n._getMoreButtons=function(e){var t=this;return e.map(function(e){var n=t._resolveButton(e);return{id:e.styleName,buttonName:e.buttonName,className:n.className,buttonView:n.buttonView,props:n.props}})},n._resolveButton=function(e){var t=this.props,n=t.namespace,i=t.documentToolbarIconType,r=t.i18n,o=t.focusButtonId,a=t.activeButtonId,s=t.activePanelButtonId,c=t.selectedComponentType,l=e.buttonName,u=e.styleName,p=e.compType,d=e.toolbarName,h=Me()(e,Ue),g=this._resolveButtonListClassName({name:u,option:h.option}),f=this._pluginButtonRegistry.getButtonView({compType:p,toolbarName:d,buttonName:l}),m=this._resolveHandleKeyDown(l),y=this._resolveClickLogId(p),v=l===o,_=l===a||l===s;return{className:g,buttonView:f,props:Re()({namespace:n,deviceType:this._deviceType,documentToolbarIconType:i,focused:v,isActivated:_,logAreaId:y,onClickSelector:this._handleClickSelector,i18n:r,selectedComponentType:c},h),handleKeyDown:m}},n._resolveClickLogId=function(e){void 0===e&&(e="");var t=this.props,n=t.logAreaId,i=t.namespace,r=e.slice(0,2).split("");if([Ae.e.DOCUMENT,Ae.e.PROPERTY,Ae.e.CONTEXT].includes(i))return n;var o=e.match(this._upperCaseRegex);return o?r.push(o[0].toLowerCase()):r.push(e.slice(e.length-1)),r.join("")+n},n._resolveHandleKeyDown=function(e){var t=this;return function(n){t.props.onKeyDown(n,e)}},n._handleClickSelector=function(e){var t=e.id;this.props.onClickSelector(t)},n._handleClick=function(e){Be.a.log(e.nativeEvent);var t=e.target.closest("button");if(t&&t.classList.contains("__se-highlight-button")){var n=t.dataset,i=n.name,r=n.value;if(i){var o=i+(r?":"+r:"");We.b.hide(o,We.a.BADGE,t)}}},t}(D.b.Component),k()(se.prototype,"_toolbarWrapperRef",[te.autobind],Object.getOwnPropertyDescriptor(se.prototype,"_toolbarWrapperRef"),se.prototype),k()(se.prototype,"_refineDisplayButtonSet",[te.autobind],Object.getOwnPropertyDescriptor(se.prototype,"_refineDisplayButtonSet"),se.prototype),k()(se.prototype,"_handleClickSelector",[te.autobind],Object.getOwnPropertyDescriptor(se.prototype,"_handleClickSelector"),se.prototype),k()(se.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(se.prototype,"_handleClick"),se.prototype),se);ze.defaultProps={buttons:[],moreButtons:[],className:"",namespace:"",isFlexible:!1,documentToolbarIconType:"",focusButtonId:"",activeButtonId:"",activePanelButtonId:"",logAreaId:"",onKeyDown:function(){},onClickSelector:function(){}},ze.propTypes={buttons:D.a.oneOfType([D.a.array,D.a.object]),moreButtons:D.a.oneOfType([D.a.array,D.a.object]),className:D.a.string,namespace:D.a.string,viewMode:D.a.string,isFlexible:D.a.bool,documentToolbarIconType:D.a.string,focusButtonId:D.a.string,activeButtonId:D.a.string,activePanelButtonId:D.a.string,selectedUnitIds:D.a.oneOfType([D.a.array,D.a.object]),selectedComponentType:D.a.string,logAreaId:D.a.string,onKeyDown:D.a.func,onClickSelector:D.a.func,onReflowToolbar:D.a.func,i18n:D.a.func};var Ve,Ge,He,qe,Je,Ke,Xe,Ye,Qe=Object(N.b)(ze),Ze=n(66),$e=n(84),et=n(257),tt=n(720),nt=(Ve=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"focusButtonId",Ge,P()(n)),L()(n,"activeButtonId",He,P()(n)),L()(n,"buttonSetMap",qe,P()(n)),L()(n,"toolbarState",Je,P()(n)),L()(n,"defaultButtonSet",Ke,P()(n));var i=t.state,r=void 0===i?{}:i;return n._pluginButtonRegistry=_.W.get("pluginButtonRegistry"),n._configAgent=_.W.get("configAgent"),n._storage=_.W.get("storagePolicy"),n.buttonSetMap=Object(x.a)(r,"buttonSetMap",n.buttonSetMap),n.activeButtonId=Object(x.a)(r,"activeButtonId",n.activeButtonId),n.toolbarState=Object(x.a)(r,"toolbarState",n.toolbarState),n.defaultButtonSet=Object(x.a)(r,"defaultButtonSet",n.defaultButtonSet),n.useColorDetailFlag=!1!==n._configAgent.get("modules.colorPicker.config.useDetail"),n}S()(t,e);var n=t.prototype;return n.deactivateAllButtons=function(){this.activeButtonId=""},n.focusLastButton=function(){var e=this.buttonSetMap.buttonSet.length;this.focusButtonId=this.buttonSetMap.buttonSet[e-1]},n.blurFocusedButton=function(){this.focusButtonId=""},n.isLastButton=function(e){var t=this.buttonSetMap.buttonSet.length;return this.buttonSetMap.buttonSet[t-1]===e},n.toggleButton=function(e){var t=this.activeButtonId===e;this.activeButtonId=t?"":e},n.updateButtonSet=function(e){if(Object(Ze.a)(e))return this.buttonSetMap.buttonSet.replace(this.defaultButtonSet),void this.buttonSetMap.displayButtonSet.replace(this.defaultButtonSet);var t=D.f.toJS(this.buttonSetMap.buttonSet),n=D.f.toJS(e);Object($e.a)(t,n)||(this.buttonSetMap.buttonSet.replace(e),this.buttonSetMap.displayButtonSet.replace(e),this.buttonSetMap.moreButtonSet=[])},n.updateDisplayButtonSet=function(e){var t=this.filterButtons(this.buttonSetMap.buttonSet);if(e<t.length){var n=t.slice(0,e-1),i=t.slice(n.length,t.length),r=n.concat("more-view");this.buttonSetMap.displayButtonSet.replace(r),this.buttonSetMap.moreButtonSet.replace(i)}},n.resetDisplayButtonSet=function(){var e=this.buttonSetMap.buttonSet;this.buttonSetMap.displayButtonSet.replace(e),this.buttonSetMap.moreButtonSet=[]},n.updateToolbarState=function(e){this.toolbarState=e},n.filterButtons=function(e){var t=this;return tt.a.trimForArray(e.filter(function(e){var n=t._pluginButtonRegistry.getButtonStyleName({compType:t.toolbarState.componentType,toolbarName:"propertyToolbar",buttonName:e});return!t.disabledButtons.includes(n)}),"separator-bar")},n.updateUserConfig=function(e){var t=e.compType,n=e.toolbarName,i=e.buttonName,r="plugins.componentSettings."+t+".config.toolbar."+n+"."+Object(et.a)(i);e.buttonConfig=this._configAgent.get(r),"font-color"!==i&&"background-color"!==i&&"cell-background-color"!==i&&"table-border"!==i||(e.useColorDetailFlag=this.useColorDetailFlag)},n.highlight=function(e,t){return!(!e||!t)&&We.b.get(t,e)},n.updateHighLight=function(e){var t=this._configAgent.get("productConfig.highlight"),n=this.highlight(e.buttonName,t);n&&(e.highlight=n)},n.updateStoragePolicy=function(e){if(e.option&&e.option.storagePolicy){var t=e.option.storagePolicy,n=t.key,i=t.property,r=this._storage.get(n);e.option[i]=r,e.storageKey=n}},n._getButtonsWithButtonSet=function(e){var t=this;void 0===e&&(e=[]);var n=this.toolbarState.componentType;return this.filterButtons(e).map(function(e){var i=t._pluginButtonRegistry.getButtonInfo({compType:n,toolbarName:"propertyToolbar",buttonName:e});if(i)return t.updateUserConfig(i),t.updateHighLight(i),t.updateStoragePolicy(i),Re()({value:Object(x.a)(t.toolbarState,i.propertyName)},i)})},B()(t,[{key:"buttons",get:function(){return this._getButtonsWithButtonSet(this.buttonSetMap.displayButtonSet)}},{key:"moreButtons",get:function(){return this._getButtonsWithButtonSet(this.buttonSetMap.moreButtonSet)}},{key:"disabledButtons",get:function(){var e=this,t=["speller","translation"].filter(function(t){return!1===e._configAgent.get("productConfig."+t)});return _.W.get("componentFactory").isUnsupportedCompType("wrappingParagraph")&&t.push("text-arrangement"),t}}]),t}(_.w),Ge=k()(Ve.prototype,"focusButtonId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),He=k()(Ve.prototype,"activeButtonId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),qe=k()(Ve.prototype,"buttonSetMap",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{buttonSet:[],displayButtonSet:[],moreButtonSet:[]}}}),Je=k()(Ve.prototype,"toolbarState",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ke=k()(Ve.prototype,"defaultButtonSet",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k()(Ve.prototype,"buttons",[D.e],Object.getOwnPropertyDescriptor(Ve.prototype,"buttons"),Ve.prototype),k()(Ve.prototype,"moreButtons",[D.e],Object.getOwnPropertyDescriptor(Ve.prototype,"moreButtons"),Ve.prototype),k()(Ve.prototype,"disabledButtons",[D.e],Object.getOwnPropertyDescriptor(Ve.prototype,"disabledButtons"),Ve.prototype),Ve),it=(Xe=function(e){function t(){var t;t=e.call(this)||this;var n=_.W.get("configAgent");return t._documentToolbarLayoutService=_.W.get("documentToolbarLayoutService"),t._propertyToolbarLayoutService=_.W.get("propertyToolbarLayoutService"),t._toolbarService=_.W.get("toolbarService"),!1!==n.get("productConfig.propertyToolbar")&&t._initializeReaction(),t}S()(t,e);var n=t.prototype;return n._initializeReaction=function(){var e=this;this._toolbarService.reactionOfToolbarState(function(t){var n=t.toolbarState,i=t.buttonSet;e._propertyToolbarLayoutService.updateButtonSet(i),e._propertyToolbarLayoutService.updateToolbarState(n)},"propertyToolbar",{delay:1})},n.handleTab=function(e,t){!1===e.shiftKey&&this._propertyToolbarLayoutService.isLastButton(t)&&(this._documentToolbarLayoutService.focusFirstButton(),e.preventDefault())},n.handleBlur=function(){this._propertyToolbarLayoutService.blurFocusedButton()},n.toggleButton=function(e){this._documentToolbarLayoutService.hideAllLayers(),this._propertyToolbarLayoutService.toggleButton(e)},n.reflowToolbar=function(e){this._propertyToolbarLayoutService.reflowToolbar(e)},t}(_.m),k()(Xe.prototype,"handleTab",[D.d],Object.getOwnPropertyDescriptor(Xe.prototype,"handleTab"),Xe.prototype),k()(Xe.prototype,"handleBlur",[D.d],Object.getOwnPropertyDescriptor(Xe.prototype,"handleBlur"),Xe.prototype),k()(Xe.prototype,"toggleButton",[D.d],Object.getOwnPropertyDescriptor(Xe.prototype,"toggleButton"),Xe.prototype),Xe),rt=(Ye=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=e.viewMode,r=e.isFlexible,o=t.toolbarState,a=t.buttons,s=t.moreButtons,c=R()("se-toolbar","se-property-toolbar","se-property-toolbar-"+o.componentType);return D.b.createElement("div",{className:"se-header-inbox se-l-property-toolbar",onBlur:this._handleBlur},D.b.createElement(Qe,{className:c,namespace:Ae.e.PROPERTY,viewMode:i,isFlexible:r,buttons:a,moreButtons:s,logAreaId:"prt",focusButtonId:t.focusButtonId,activeButtonId:t.activeButtonId,selectedUnitIds:o.selectedUnitIds,i18n:n,onReflowToolbar:this._handleReflowToolbar,onKeyDown:this._handleKeyDown,onClickSelector:this._handleClickSelector}))},n._handleClickSelector=function(e){this.props.useCase.toggleButton(e)},n._handleReflowToolbar=function(e){var t=e.displayButtonCount;this.props.useCase.reflowToolbar(t)},n._handleKeyDown=function(e,t){9===e.which&&this.props.useCase.handleTab(e,t)},n._handleBlur=function(){this.props.useCase.handleBlur()},t}(D.b.Component),k()(Ye.prototype,"_handleClickSelector",[te.autobind],Object.getOwnPropertyDescriptor(Ye.prototype,"_handleClickSelector"),Ye.prototype),k()(Ye.prototype,"_handleReflowToolbar",[te.autobind],Object.getOwnPropertyDescriptor(Ye.prototype,"_handleReflowToolbar"),Ye.prototype),k()(Ye.prototype,"_handleKeyDown",[te.autobind],Object.getOwnPropertyDescriptor(Ye.prototype,"_handleKeyDown"),Ye.prototype),k()(Ye.prototype,"_handleBlur",[te.autobind],Object.getOwnPropertyDescriptor(Ye.prototype,"_handleBlur"),Ye.prototype),Ye);rt.defaultProps={store:null,i18n:function(e){return e}},rt.propTypes={store:D.a.instanceOf(nt).isRequired,useCase:D.a.instanceOf(it).isRequired,i18n:D.a.func,viewMode:D.a.string,isFlexible:D.a.bool};var ot,at,st,ct,lt=Object(N.b)(rt),ut=function(e){function t(t){var n;return(n=e.call(this,t)||this)._propertyChangeService=_.W.get("propertyChangeService"),n}S()(t,e);var n=t.prototype;return n.updateButtonSet=function(e){this._store.updateButtonSet(e)},n.updateToolbarState=function(e){this._store.updateToolbarState(e)},n.focusLastButton=function(){this._store.focusLastButton()},n.blurFocusedButton=function(){this._store.blurFocusedButton()},n.isLastButton=function(e){return this._store.isLastButton(e)},n.toggleButton=function(e){this._store.toggleButton(e)},n.hideAllLayers=function(){this._store.deactivateAllButtons()},n.reflowToolbar=function(e){this._store.updateDisplayButtonSet(e)},n.resetDisplayButtonSet=function(){this._store.resetDisplayButtonSet()},t}(_.f),pt=n(64),dt={propertyToolbar:{align:Object(pt.a)("align-group"),"more-view":Object(pt.a)("more-view")}},ht=function(e){function t(){return e.call(this,{buttonSetMap:dt})||this}return S()(t,e),t}(_.l),gt=_.H.extend({name:"PropertyToolbarLayout",view:lt,useCase:it,service:ut,store:nt,toolbar:ht}),ft=function(e){function t(){var t;return(t=e.call(this)||this)._panelContainerLayerService=_.W.get("panelContainerLayerService"),t._stickerPanelLayoutService=_.W.get("stickerPanelLayoutService"),t._documentToolbarLayoutService=_.W.get("documentToolbarLayoutService"),t._dragAndDropService=_.W.get("dragAndDropService"),t}S()(t,e);var n=t.prototype;return n.closePanel=function(){var e=this._panelContainerLayerService.getTarget();return this._documentToolbarLayoutService.setPanelButtonEnable(e,!1),this._stickerPanelLayoutService.close(),this._panelContainerLayerService.closePanel()},n.open=function(e){var t=(void 0===e?{}:e).option,n=void 0===t?{}:t,i=this._panelContainerLayerService.getTarget(),r=n.target||i,o=_.W.get(r+"PanelLayoutService");if(!o||!o.open)throw new Error('cannot find panel "'+r+'"');this._documentToolbarLayoutService.setPanelButtonEnable(i,!1),this._documentToolbarLayoutService.setPanelButtonEnable(r,!0),o.open(),this._panelContainerLayerService.openPanel(r,n.position)},n.close=function(){this.closePanel()},n.dragClear=function(){this._dragAndDropService.dragClear()},t}(_.m),mt=(ot=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"opened",at,P()(n)),L()(n,"target",st,P()(n)),n.panelType=_.M.SIDEBAR,n.dimColor="transparent",n.unmountDelayTime=400;var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;return n._configAgent=_.W.get("configAgent"),n.opened=Object(x.a)(o,"opened",n.opened),n.panelType=Object(x.a)(s,"panelType",n.panelType),n.dimColor=Object(x.a)(s,"dimColor",n.dimColor),n.panelType=n._getValidValue(n._configAgent,"productConfig.panelType",n.panelType),n}S()(t,e);var n=t.prototype;return n._getValidValue=function(e,t,n){if(void 0===e&&(e={get:function(){}}),"productConfig.panelType"===t){var i=e.get(t);if(i===_.M.SIDEBAR||i===_.M.POPUP)return i}return n},n.closePanel=function(){this.target="",this.opened=!1},n.openPanel=function(e){void 0===e&&(e=""),this.opened=!0,this.target=e},t}(_.w),at=k()(ot.prototype,"opened",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),st=k()(ot.prototype,"target",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ot),yt=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(e,t){this.getPanelType()===_.M.POPUP&&this._pauseDocumentEdit(),this._store.openPanel(e,t)},n.close=function(){this._store.closePanel(),this.getPanelType()===_.M.POPUP&&this._unpauseDocumentEdit()},n.openPanel=function(e,t){this.open(e,t)},n.closePanel=function(){this.close()},n.opened=function(){return this._store.opened},n.getPanelType=function(){return this._store.panelType},n.getTarget=function(){return this._store.target},n.toggleLayout=function(e,t,n){var i=this._store,r=i.opened,o=i.target;o.length>0&&o!==e?(t.open(),this.openPanel(e),n&&n(e,!0)):r?(n&&n(e,!1),this.closePanel()):(t.open(),this.openPanel(e),n&&n(e,!0))},t}(_.d),vt=(ct=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={mounted:!1,showUpEnabled:!1,isEventBlockerOn:!1},n}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._timer=setTimeout(function(){e.setState({showUpEnabled:!0,mounted:!0})},10)},t.getDerivedStateFromProps=function(e,t){return t.mounted?{showUpEnabled:e.store.opened}:null},n.componentWillUnmount=function(){this.setState({mounted:!1,showUpEnabled:!1,isEventBlockerOn:!1}),this._timer&&clearTimeout(this._timer)},n.render=function(){var e=this.props.store,t=e.panelType,n=e.target,i=e.opened;if(!n)return null;var r=t===_.M.POPUP?this._wrapPopup(i):this._wrapSidebar(i);return D.b.createElement(D.b.Fragment,null,r)},n._wrapChildren=function(e,t){var n={onClickItem:this._handleClickItem,target:t?e:"",wrappingType:this.props.store.panelType,draggable:this.props.store.panelType===_.M.SIDEBAR};return D.b.Children.map(this.props.children,function(e){return D.b.cloneElement(e,n)})},n._wrapPopup=function(e){var t;if(!e)return null;var n=this.props,i=n.i18n,r=n.store,o=r.dimColor,a=r.target,s=R()(["se-popup-panel","se-popup-"+a,(t={},t[this.props.className]=!0,t)]);return D.b.createElement(ee.a,{opened:e,className:s,dimColor:o},D.b.createElement("div",{className:"se-popup-content"},this._wrapChildren(a,e)),D.b.createElement("button",{type:"button",className:"se-popup-close-button","data-log":"sely.close",onClick:this.handleClickClose},D.b.createElement("span",{className:"se-blind"},i("panelLayout:close_popup"))))},n._wrapSidebar=function(e){var t,n=this.props,i=n.i18n,r=n.store.target,o=this.state,a=o.showUpEnabled,s=o.isEventBlockerOn,c=R()(["se-sidebar",{"se-sidebar-interaction":a,"se-is-event-blocking":s}]),l=R()(((t={})["se-sidebar-container se-sidebar-container-"+r]=!0,t)),u=this._logArea(r);return D.b.createElement("aside",{className:c,onDragStart:this._handleDragStart,onDragEnd:this.disableEventBlocker},D.b.createElement("div",{className:l},this._wrapChildren(r,e),D.b.createElement("button",{type:"button",className:"se-sidebar-close-button","data-log":u+".close",onClick:this.handleClickClose},D.b.createElement("span",{className:"se-blind"},i("panelLayout:close_popup","")))))},n._logArea=function(e){switch(e){case"moment":return"lmot";case"search":return"lsch";case"library":return"llib";case"template":return"ltpl";default:return"lsch"}},n._handleClickItem=function(){var e=this.props,t=e.useCase;e.store.panelType===_.M.POPUP&&t.closePanel()},n.handleClickClose=function(e){Be.a.log(e.nativeEvent),this.props.useCase.closePanel()},n.enableEventBlocker=function(){this.setState({isEventBlockerOn:!0})},n.disableEventBlocker=function(){this.setState({isEventBlockerOn:!1})},n._handleDragStart=function(e){this.enableEventBlocker(),e.target.addEventListener("dragend",this._handleDragEnd)},n._handleDragEnd=function(e){!1===document.body.contains(e.target)&&this.props.useCase.dragClear(),this.disableEventBlocker()},t}(D.b.Component),k()(ct.prototype,"_wrapPopup",[te.autobind],Object.getOwnPropertyDescriptor(ct.prototype,"_wrapPopup"),ct.prototype),k()(ct.prototype,"_wrapSidebar",[te.autobind],Object.getOwnPropertyDescriptor(ct.prototype,"_wrapSidebar"),ct.prototype),k()(ct.prototype,"_handleClickItem",[te.autobind],Object.getOwnPropertyDescriptor(ct.prototype,"_handleClickItem"),ct.prototype),k()(ct.prototype,"handleClickClose",[te.autobind],Object.getOwnPropertyDescriptor(ct.prototype,"handleClickClose"),ct.prototype),k()(ct.prototype,"enableEventBlocker",[te.autobind],Object.getOwnPropertyDescriptor(ct.prototype,"enableEventBlocker"),ct.prototype),k()(ct.prototype,"disableEventBlocker",[te.autobind],Object.getOwnPropertyDescriptor(ct.prototype,"disableEventBlocker"),ct.prototype),k()(ct.prototype,"_handleDragStart",[te.autobind],Object.getOwnPropertyDescriptor(ct.prototype,"_handleDragStart"),ct.prototype),k()(ct.prototype,"_handleDragEnd",[te.autobind],Object.getOwnPropertyDescriptor(ct.prototype,"_handleDragEnd"),ct.prototype),ct);vt.defaultProps={children:null,i18n:function(e){return e}},vt.propTypes={children:D.a.oneOfType([D.a.arrayOf(D.a.element),D.a.element]),useCase:D.a.instanceOf(ft).isRequired,store:D.a.instanceOf(mt).isRequired,i18n:D.a.func,className:D.a.string,draggable:D.a.bool};var _t=Object(N.b)(vt),bt=_.G.extend({name:"PanelContainerLayer",view:_t,useCase:ft,store:mt,service:yt}),St=n(396),Ct=n(12),It=n.n(Ct),Ot=n(18),Tt=n.n(Ot),Lt=function(){function e(e){this._config=e}return e.prototype.convert=function(e){return{ctype:"sticker",packCode:e.packCode,seq:e.seq,thumbnail:{ctype:"thumbnail",height:e.stickerInfo.imageHeight,src:e.stickerInfo.originalUrl,width:e.stickerInfo.imageWidth},format:e.animated?_.Q.ANIMATED:_.Q.NORMAL}},e}(),Et=function(){function e(e){this._config=e}var t=e.prototype;return t.convertToDragItem=function(e){return this.convert(e)},t.convert=function(e){var t=Object(x.a)(e,"fromText"),n=[{ctype:"paragraph",nodes:[{ctype:"textNode",value:t,link:{ctype:"urlLink",url:Object(x.a)(e,"urls.link")}}],style:{ctype:"paragraphStyle",align:"center"}}];return{ctype:"image",layout:"default",align:"left",src:Object(x.a)(e,"urls.img"),width:Object(x.a)(e,"width"),height:Object(x.a)(e,"height"),alt:t,caption:n,internalResource:!0,origin:{ctype:"imageOrigin",srcFrom:Object(x.a)(e,"provider"),externalId:Object(x.a)(e,"id")},phase:"empty"}},e}(),Pt=n(157),wt=n(555),kt=n(121),xt=function(){function e(e){this._config=e}var t=e.prototype;return t.convert=function(){throw new Error("[ERROR] 컴포넌트 데이터 변환 메소드를 구현해 주세요.")},t._makeThumbnailInfo=function(e){return e?new Promise(function(t){var n=new Image;n.onload=function(n){var i=n.currentTarget;t({ctype:"thumbnail",src:e,width:i.width,height:i.height})},n.onerror=function(){t(null)},n.src=kt.a.makeDthumbHttpsUrl(e)}):null},t._makeValue=function(e){var t=[];return e&&t.push({ctype:"value",value:this._restoreSpecialChar(e)}),t},t._modifyPeopleInfo=function(e){var t=this;return Object(Pt.a)(e,function(e,n){var i="string"==typeof n?n:Object(x.a)(n,"name");return i&&e.push({ctype:"value",value:t._restoreSpecialChar(i)}),e},[])},t._restoreSpecialChar=function(e){return wt.a.restoreSpecialChar(e)},t._formatWithComma=function(e){return wt.a.formatWithComma(e)},e}(),Dt=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.a)(t,"image.url",""),e.next=3,this._makeThumbnailInfo(n);case 3:return i=e.sent,r=this._makeOglinkInfo(t),i&&(r.thumbnail=i),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeOglinkInfo(e)},n._makeOglinkInfo=function(e){var t=this._restoreSpecialChar(e.title),n=this._restoreSpecialChar(e.description);return{layout:"moment",title:t,domain:e.domain,link:e.url,description:n,thumbnail:{ctype:"thumbnail",src:Object(x.a)(e,"image.url"),width:Object(x.a)(e,"image.width"),height:Object(x.a)(e,"image.height")},video:!1,oglinkSign:e.oglinkSign,ctype:"oglink"}},t}(xt),At=n(119),jt=n(109),Rt=n(195),Nt=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._resolveThumbnailUrl(t),e.next=3,this._makeThumbnailInfo(n);case 3:return i=e.sent,r=this._makeMaterialInfo(t),i&&(r.thumbnail=i),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._resolveThumbnailUrl=function(e){return Object(At.a)(Object(jt.a)(Object(Rt.a)(e,["bigThumbnail2","bigThumbnail","thumbnail"])))},n._makeMaterialInfo=function(e){var t=e.title,n=e.author,i=this._restoreSpecialChar(t),r="string"==typeof n?this._restoreSpecialChar(n.replace(/\|/gi,", ").replace(/ 지음$/gi,"")):"미등록";return{ctype:"material",title:i,link:e.linkUrl,dataId:e.isbn,subId:e.bid,type:"book",volNo:e.volNo||"",detailInfo:[{ctype:"item",label:"저자",labelName:"author",values:this._makeValue(r)},{ctype:"item",label:"출판",labelName:"publisher",values:this._makeValue(e.publisher)},{ctype:"item",label:"발매",labelName:"publishDay",values:this._makeValue(wt.a.reviseDateFormat(e.publishDay))}]}},t}(xt),Mt=n(574),Bt=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._resolveThumbnailUrl(t),e.next=3,this._makeThumbnailInfo(n);case 3:return i=e.sent,r=this._makeMaterialInfo(t),i&&(r.thumbnail=i),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._resolveThumbnailUrl=function(e){return Object(At.a)(Object(jt.a)(Object(Rt.a)(e,["imageUrls.thumbnail250","imageUrls.thumbnail150","imageUrls.poster.url"])))},n._filterInvalidReleaseDate=function(e){return e?e.reduce(function(e,t){var n=Mt.a.getYYYYMMDDFormat(t.day);return"Invalid date"!==n&&e.push({ctype:"value",value:n}),e},[]):[]},n._makeMaterialInfo=function(e){var t=this._restoreSpecialChar(e.titles.korean),n=this._filterInvalidReleaseDate(e.theaters),i=this._modifyPeopleInfo(e.directors.directors),r=this._modifyPeopleInfo(e.actors.actors);return{ctype:"material",title:t,link:e.destinationUrl,dataId:e.mcode,type:"movie",detailInfo:[{ctype:"item",label:"감독",labelName:"directors",values:i},{ctype:"item",label:"출연",labelName:"actors",values:r},{ctype:"item",label:"개봉",labelName:"makingYear",values:n}]}},t}(xt),Wt=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.a)(t,"image",""),e.next=3,this._makeThumbnailInfo(n);case 3:return i=e.sent,r=this._makeMaterialInfo(t),i&&(r.thumbnail=i),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._makeMaterialInfo=function(e){var t={ctype:"material",title:this._restoreSpecialChar(e.title),link:e.url,dataId:e.mcode||e.os,type:"broadcast",detailInfo:[]};return t.detailInfo.push({ctype:"item",label:"연출",labelName:"directors",values:this._modifyPeopleInfo(e.producer)}),t.detailInfo.push({ctype:"item",label:"출연",labelName:"actors",values:this._modifyPeopleInfo(e.guest)}),t.detailInfo.push({ctype:"item",label:"방송",labelName:"makingYear",values:[{ctype:"value",value:e.year+", "+e.channel}]}),t},t}(xt),Ut=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.a)(t,"albumImg",""),e.next=3,this._makeThumbnailInfo(n);case 3:return i=e.sent,r=this._makeMaterialInfo(t),i&&(r.thumbnail=i),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._makeMaterialInfo=function(e){return{ctype:"material",title:this._restoreSpecialChar(e.title),link:e.albumUrl,dataId:e.albumID,type:"music",detailInfo:[{ctype:"item",label:"아티스트",labelName:"artist",values:this._makeValue(e.artist.replace(/♩/gi,", "))},{ctype:"item",label:"발매일",labelName:"release",values:this._makeValue(wt.a.reviseDateFormat(e.release))}]}},t}(xt),Ft=n(112),zt=[[null,1,10,7,4,1,1,1,1],[null,2,11,8,5,2,2,2,2],[null,3,12,9,6,3,3,3,3]],Vt=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.a)(t,"imageUrl",""),e.next=3,this._makeThumbnailInfo(n);case 3:return i=e.sent,r=this._makeMaterialInfo(t),i&&(r.thumbnail=i),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._makeMaterialInfo=function(e){var t=this._restoreSpecialChar(e.productTitle),n=this._convertToGoodsType(e.mpTp,e.prodTp)+"";return{ctype:"material",title:t,link:this._makeLink(n,e),dataId:e.id,type:"shopping",detailInfo:[{ctype:"item",label:"",labelName:"type",values:[{ctype:"value",value:n}]},{ctype:"item",label:"",labelName:"nPayPcType",values:[{ctype:"value",value:e.nPayPcType}]},{ctype:"item",label:"",labelName:"nPayMblType",values:[{ctype:"value",value:e.nPayMblType}]},{ctype:"item",label:"",labelName:"mallNameOrg",values:[{ctype:"value",value:this._restoreSpecialChar(e.mallNameOrg)}]},{ctype:"item",label:"",labelName:"price",values:[{ctype:"value",value:this._formatWithComma(e.price)}]}]}},n._makeLink=function(e,t){var n=this._isCompareProduct(e);return t.mallProductUrl?t.mallProductUrl:!0===n?"https://search.shopping.naver.com/catalog/"+t.id+"?section=price":"https://search.shopping.naver.com/catalog/"+t.id},n._convertToGoodsType=function(e,t){var n=zt[e];return n?n[t]:null},n._isCompareProduct=function(e){return Object(Ft.a)([1,4],e)},t}(xt),Gt=n(97),Ht=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchNewsDetail(t);case 2:return n=e.sent,i=this._resolveThumbnailUrl(n),e.next=6,this._makeThumbnailInfo(i);case 6:return r=e.sent,o=this._makeMaterialInfo(n),r&&(o.thumbnail=r),e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._resolveThumbnailUrl=function(e){return Object(At.a)(Object(jt.a)(Object(Rt.a)(e,["images[0].url","images.image[0].url","images.image.url"])))},n._fetchNewsDetail=function(e){return Gt.a.get(this._config.newsDetailAPI,{params:{oid:e.officeId||e.subId,aid:e.articleId||e.dataId},success:function(e){return Object(x.a)(e,"items[0]")}})},n._makeMaterialInfo=function(e){return{ctype:"material",title:this._restoreSpecialChar(e.title),link:e.orgUrl,dataId:e.articleId,subId:e.officeId,type:"news",detailInfo:[{ctype:"item",label:"",labelName:"subcontent",values:[{ctype:"value",value:this._restoreSpecialChar(e.subcontent)}]},{ctype:"item",label:"출처",labelName:"officeHname",values:[{ctype:"value",value:this._restoreSpecialChar(e.officeHname)}]}]}},t}(xt),qt=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(x.a)(t,"imageUrl",""),e.next=3,this._makeThumbnailInfo(n);case 3:return i=e.sent,r=this._makeMaterialInfo(t),i&&(r.thumbnail=i),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._makeMaterialInfo=function(e){var t=e.objectId,n=this._resolveDatas(e),i=n.title,r=n.genre,o=n.locationName,a=n.period;return{ctype:"material",type:"show",dataId:t,layout:"default",title:i,link:n.link,detailInfo:[{label:"장르",labelName:"genre",values:this._makeValue(r),ctype:"item"},{label:"장소",labelName:"locationName",values:this._makeValue(o),ctype:"item"},{label:"기간",labelName:"period",values:this._makeValue(a),ctype:"item"}]}},n._isExhibitionDefine=function(e){return"269"!==e.searchLinkParameter.pkid},n._resolveDatas=function(e){var t,n,i,r=e.rendingUrl,o=e.formattedPeriod;return!0===this._isExhibitionDefine(e)?(t=e.name,n="전시",i=e.locationName):(t=e.title,n=e.majorGenreName,i=e.placeInformation.name),{title:t,genre:n,locationName:i,period:o,link:r}},t}(xt),Jt=n(152),Kt={travel:function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._resolveThumbnailUrl(t),e.next=3,this._makeThumbnailInfo(n);case 3:return i=e.sent,r=this._makeMaterialInfo(t),i&&(r.thumbnail=i),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._resolveThumbnailUrl=function(e){return Object(At.a)(Object(jt.a)(Object(Rt.a)(e,["thumbnailImageUrl"])))},n._makeMaterialInfo=function(e){var t=e.id,n=e.nameKo,i=e.subtype,r=e.linkUrl,o=this._restoreSpecialChar(n),a=this._getTitleValues(e),s=this._getDescriptionValues(e),c=this._getInfoValues(e).filter(function(e){return e});return{ctype:"material",dataId:t,title:o,link:r,type:"travel",subId:i,detailInfo:[{ctype:"item",label:"nameEn",labelName:"nameEn",values:this._makeValues(a)},{ctype:"item",label:"설명",labelName:"description",values:this._makeValues(s)},{ctype:"item",label:Jt.b[i].label,labelName:Jt.b[i].labelName,values:this._makeValues(c)}]}},n._getTitleValues=function(e){var t=e.nameEn,n=[];return t&&n.push(t),n},n._getDescriptionValues=function(e){var t=e.subtype,n=e.description,i=e.overallRating,r=e.starRating,o=[];if(t===Jt.c.OVERSEAS_HOTEL){if(!i&&!r)return o;o.push(i||null),r&&o.push(r)}else n&&o.push(this._restoreSpecialChar(n));return o},n._getInfoValues=function(e){var t=e.subtype,n=e.continent,i=e.countryName,r=e.cityName,o=e.subCategory,a=e.tags;return t===Jt.c.OVERSEAS_COUNTRY?[n]:t===Jt.c.OVERSEAS_CITY?[i]:t===Jt.c.OVERSEAS_POI?[r,o]:t===Jt.c.OVERSEAS_HOTEL?[r,i]:t===Jt.c.DOMESTIC_GEO?a||[]:void 0},n._makeValues=function(e){var t=this;return e.map(function(e){return{ctype:"value",value:t._restoreSpecialChar(e)}})},t}(xt),moment:Dt,sticker:Lt,"purchased-image":Et,photo:Et,book:Nt,movie:Bt,broadcast:Wt,music:Ut,shopping:Vt,news:Ht,show:qt},Xt=function(){function e(e){this._config=Object(l.a)(e,{fetchCount:20})}return e.prototype.abort=function(){Gt.b.abort()},e}(),Yt=function(e){function t(t){var n;return(n=e.call(this,t)||this)._currentRequestInfo={},n._nextPageInfo={},n._resultState=!1,n}S()(t,e);var n=t.prototype;return n.getInitializeData=function(e){return void 0===e&&(e={}),this._fetchInitializeData(e)},n.search=function(e){if(!1===Object(Ze.a)(e.keyword))return this._search(e)},n.nextPage=function(){return this._nextPage()},n._fetchInitializeData=function(e){var t=Object(x.a)(e,"source",["U","P","OC"]).join(""),n=Object(x.a)(e,"orientation",["all"]).join(""),i=Object(x.a)(e,"paid",["F","P"]).join("");return this._nextPageInfo={providers:t,orientation:n,per_page:this._config.fetchCount,paid_type:i,page:1},this._currentRequestInfo={url:this._config.API.INITIALIZE,query:this._nextPageInfo},this._request()},n._search=function(e){var t=Object(x.a)(e,"source",["U","P","OC"]).join(""),n=Object(x.a)(e,"orientation",["all"]).join(""),i=Object(x.a)(e,"paid",["F","P"]).join("");return this._currentRequestInfo={searchOption:e,url:this._config.API.SEARCH,query:{query:e.keyword,providers:t,orientation:n,paid_type:i,per_page:this._config.fetchCount,page:e.page||1}},this._request()},n._nextPage=function(){if(this._resultState){if(!Object(Ze.a)(this._nextPageInfo||{})&&!Object($e.a)(this._currentRequestInfo.query,this._nextPageInfo))return this._currentRequestInfo.query=this._nextPageInfo,this._request()}else if(this._currentRequestInfo.query)return this._request()},n._request=function(){var e=this,t=this._currentRequestInfo.searchOption;return Gt.b.get(this._currentRequestInfo.url,{params:this._currentRequestInfo.query,options:{useAbort:!0},success:function(t){e._resultState=!0;var n=e._currentRequestInfo.query.page,i=t.hasMore;e._setNextPageInfo(i);var r=Object(x.a)(t,"result",[]),o=r.length,a=e._config.fetchCount*(n-1)+o,s=(new Date).getTime();return{items:r.map(function(e){return e.groupKey=s,e}),next:{page:e._currentRequestInfo.query.page+1,hasMore:i},count:o,total:a}},error:function(n){var i=!!n.aborted;if(i)return e._resultState=!1,{searchOption:t,isFetchNextPageError:!0,aborted:i,items:[],next:{},count:0,total:0};throw n}})},n._setNextPageInfo=function(e){e&&(this._nextPageInfo=Object(l.a)({page:this._currentRequestInfo.query.page+1},this._currentRequestInfo.query))},t}(Xt),Qt=function(e){function t(t){var n;return(n=e.call(this,t)||this)._config=Object(l.a)(t,{fetchCount:20}),n._initialize(),n}S()(t,e);var n=t.prototype;return n._initialize=function(){this._nextPageInfo=null,this._tryAgainWithCurrentInfo=!1,this._baseQuery=null,this._currentRequestInfo={url:this._config.API.INITIALIZE,query:this._baseQuery}},n.getInitializeData=function(){return this._fetchInitializeData()},n.search=function(e){return this._search(e)},n.nextPage=function(){return this._nextPage()},n._fetchInitializeData=function(){return this._baseQuery={s:1,count:this._config.fetchCount},this._currentRequestInfo={url:this._config.API.INITIALIZE,query:this._baseQuery},this._request()},n._search=function(e){return this._nextPageInfo=null,this._baseQuery={q:e.keyword,count:this._config.fetchCount},this._currentRequestInfo={url:this._config.API.SEARCH,query:this._baseQuery},this._request()},n._nextPage=function(){if(this._tryAgainWithCurrentInfo){if(this._currentRequestInfo.query)return this._request()}else if(!Object(Ze.a)(this._nextPageInfo||{})&&!Object($e.a)(this._currentRequestInfo.query,this._nextPageInfo))return this._currentRequestInfo.query=this._nextPageInfo,this._request()},n._request=function(){var e=this;return Gt.b.get(this._currentRequestInfo.url,{params:this._currentRequestInfo.query,options:{useAbort:!0},parser:function(e){return Object(x.a)(e,"data",{})},success:function(t){return e._tryAgainWithCurrentInfo=!1,e._setNextPageInfo(t.next),t},error:function(t){var n=!!t.aborted;if(n)return e._tryAgainWithCurrentInfo=!0,{isFetchNextPageError:!0,aborted:n,items:[],next:{},count:0,total:0};throw t}})},n._setNextPageInfo=function(e){Object(Ze.a)(e)?this._nextPageInfo=null:this._nextPageInfo=Object(l.a)(e,this._baseQuery)},t}(Xt),Zt=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(Qt),$t=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(Qt),en=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(Qt),tn=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(Qt),nn=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.getInitializeData=function(){var e={total:0,start:1,count:0,items:[]};return new Promise(function(t){t(e)})},t}(Qt),rn=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(Qt),on=function(e){function t(t){var n;return(n=e.call(this,t)||this)._initialize(),n}S()(t,e);var n=t.prototype;return n._initialize=function(){this._currentRequestInfo={url:this._config.API.INITIALIZE}},n.getCategories=function(){return this._fetchInitializeData()},n.getStickerPack=function(e){return this._fetchStickerPack(e)},n._fetchInitializeData=function(){return this._currentRequestInfo={url:this._config.API.INITIALIZE,query:{}},this._request()},n._fetchStickerPack=function(e){var t=this._config.API.INITIALIZE+"/"+e.packCode;return this._currentRequestInfo={url:t},this._request()},n._request=function(){return Gt.b.get(this._currentRequestInfo.url,{params:this._currentRequestInfo.query,success:function(e){return e},error:function(e){throw e}})},t}(function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.getCategories=function(){throw new Error("[ERROR] 데이터 공급 객체에 필수 메소드가 없습니다. - getCategories")},n.getStickerPack=function(){throw new Error("[ERROR] 데이터 공급 객체에 필수 메소드가 없습니다. - getStickerPack")},t}(Xt));function an(e){throw e}var sn,cn,ln,un,pn,dn=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.getRecommendList=function(e){var t=Object(x.a)(this._config,"dataProvider.getRecommendList");return"function"==typeof t?t():Gt.b.get(e,{params:{page:1,size:1e4},options:{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0,simpleRequestForced:!0},success:function(e){return e||{}},error:an}).then(function(e){return e&&e.defaultPrevented&&an(e),e})},n.getPartTemplateList=function(e){var t=Object(x.a)(this._config,"dataProvider.getPartTemplateList");return"function"==typeof t?t():Gt.b.get(e,{params:{page:1,size:1e4},options:{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0,simpleRequestForced:!0},success:function(e){return e||{}},error:an}).then(function(e){return e&&e.defaultPrevented&&an(e),e})},n.getRecommend=function(e,t){var n=Object(x.a)(this._config,"dataProvider.getRecommend");return"function"==typeof n?n(t):Gt.b.get(e,{params:{templateNo:t.templateNo},options:{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0,simpleRequestForced:!0},success:function(e){return e||{}},error:an}).then(function(e){return e&&e.defaultPrevented&&an(e),e})},n.getMyTemplateList=function(e,t){var n=Object(x.a)(this._config,"dataProvider.getMyTemplateList");if("function"==typeof n)return n(t);var i=t.userId;return Gt.b.get(e,{params:{userId:i,page:1,size:1e4},options:{withCredentials:!0,simpleRequestForced:!0},success:function(e){return e||{}},error:an}).then(function(e){return e&&e.defaultPrevented&&an(e),e})},n.getMyTemplate=function(e,t){var n=Object(x.a)(this._config,"dataProvider.getMyTemplate");return"function"==typeof n?n(t):Gt.b.get(e,{params:t,options:{withCredentials:!0,simpleRequestForced:!0},success:function(e){return e||{}},error:an}).then(function(e){return e&&e.defaultPrevented&&an(e),e})},n.deleteMyTemplate=function(e,t,n){void 0===n&&(n=!0);var i=Object(x.a)(this._config,"dataProvider.deleteMyTemplate");return"function"==typeof i?i(t):(n?Gt.b.delete:Gt.b.post)(e,{params:t,options:{withCredentials:!0,simpleRequestForced:!0},success:function(e){return e||{}},error:an}).then(function(e){return e&&e.defaultPrevented&&an(e),e})},n.addMyTemplate=function(e,t){var n=Object(x.a)(this._config,"dataProvider.addMyTemplate");return"function"==typeof n?n(t):Gt.b.post(e,{data:t,options:{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0,simpleRequestForced:!0},success:function(e){return e||{}},error:an}).then(function(e){return e&&e.defaultPrevented&&an(e),e})},t}(Xt),hn=function(e){function t(t){var n;return(n=e.call(this,t)||this)._currentRequestInfo={},n._nextPageInfo={},n._resultState=!1,n}S()(t,e);var n=t.prototype;return n.getInitializedData=function(){},n.search=function(e){return this._currentRequestInfo={url:this._config.API.SEARCH,query:{ordering:e.ordering,per_page:this._config.fetchCount,page:e.page||1}},this._request()},n._resolveUnknownSize=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.width){e.next=4;break}return e.abrupt("return",t);case 4:return e.next=6,new Promise(function(e){var n=new Image;n.onload=function(){t.width=n.width,t.height=n.height,e(t)},n.onerror=function(){e(t)},n.src=t.urls.img});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.nextPage=function(){if(this._resultState){if(!Object(Ze.a)(this._nextPageInfo||{})&&!Object($e.a)(this._currentRequestInfo.query,this._nextPageInfo))return this._currentRequestInfo.query=this._nextPageInfo,this._request()}else if(this._currentRequestInfo.query)return this._request()},n._request=function(){var e=Tt()(It.a.mark(function e(){var t,n=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gt.b.get(this._currentRequestInfo.url,{params:this._currentRequestInfo.query,success:function(e){n._resultState=!0;var t=n._currentRequestInfo.query.page,i=e.hasMore;n._setNextPageInfo(i);var r=Object(x.a)(e,"result",[]),o=r.length,a=n._config.fetchCount*(t-1)+o,s=(new Date).getTime();return{items:r.map(function(e){return e.groupKey=s,e.provider="ogqCommercial",e}),next:{page:n._currentRequestInfo.query.page+1,hasMore:i},count:o,total:a}},error:function(){return n._resultState=!1,{items:[],next:{},count:0,total:0}}});case 2:if(!((t=e.sent).items.length>0)){e.next=7;break}return e.next=6,this._resolveUnknownSize(t.items);case 6:t.items=e.sent;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._setNextPageInfo=function(e){e&&(this._nextPageInfo=Object(l.a)({page:this._currentRequestInfo.query.page+1},this._currentRequestInfo.query))},t}(Xt),gn=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(Qt),fn={moment:function(e){function t(t){var n;return(n=e.call(this,t)||this)._currentRequestInfo={},n._nextPageInfo={},n._resultState=!1,n}S()(t,e);var n=t.prototype;return n.getInitializeData=function(){},n.search=function(e){return this._search(e)},n.nextPage=function(){return this._nextPage()},n._search=function(e){return this._nextPageInfo={itemCount:this._config.fetchCount,page:e.page||1,momentSortType:e.ordering,publicOnly:!0,exposableOnly:!0,blogId:this._config.blogId},this._currentRequestInfo={url:this._config.API.SEARCH,query:this._nextPageInfo},this._request()},n._nextPage=function(){if(this._resultState){if(!Object(Ze.a)(this._nextPageInfo||{})&&!Object($e.a)(this._currentRequestInfo.query,this._nextPageInfo))return this._currentRequestInfo.query=this._nextPageInfo,this._request()}else if(this._currentRequestInfo.query)return this._request()},n._request=function(){var e=this,t=this._currentRequestInfo.searchOption;return Gt.b.get(this._currentRequestInfo.url,{params:this._currentRequestInfo.query,options:this._currentRequestInfo.options,success:function(t){e._resultState=!0;var n=e._currentRequestInfo.query.page,i=Object(x.a)(t,"totalCount",0),r=i>e._config.fetchCount*n;e._setNextPageInfo(r);var o=Object(x.a)(t,"results",[]),a=o.length,s=(new Date).getTime(),c=Mt.a.getMomentInstance;return{items:o.map(function(e){var t=c(parseInt(e.addDate)).format("YYYY.MM.DD.");return Re()({},e,{groupKey:s,createdAt:t})}),next:{page:e._currentRequestInfo.query.page+1,hasMore:r},count:a,total:i}},error:function(n){var i=!!n.aborted;if(i)return e._resultState=!1,{searchOption:t,isFetchNextPageError:!0,aborted:i,items:[],next:{},count:0,total:0};throw n}})},n._setNextPageInfo=function(e){e&&(this._nextPageInfo=Object(l.a)({page:this._currentRequestInfo.query.page+1},this._currentRequestInfo.query))},t}(Xt),photo:Yt,travel:function(e){function t(t){var n;return(n=e.call(this,t)||this)._config=Object(l.a)(t,{fetchCount:20}),n._initialize(),n}return S()(t,e),t.prototype._search=function(e){var t=Object(x.a)(e,"range",["o","p","d"]).join("");return this._nextPageInfo=null,this._baseQuery={s:e.page||1,q:e.keyword,count:this._config.fetchCount,filterType:t},this._currentRequestInfo={url:this._config.API.SEARCH,query:this._baseQuery},this._request()},t}(Qt),book:Zt,movie:$t,broadcast:en,music:tn,shopping:nn,news:rn,sticker:on,template:dn,"purchased-image":hn,show:gn},mn=function(){function e(e){this.providers={},this.currentProvider=null,this.converters={},this.currentConverter=null,this.config=e}var t=e.prototype;return t.getProvider=function(){return this.currentProvider},t.changeProvider=function(e){this.currentProvider!==this.providers[e]&&(this._cancelCurrentProvider(),this._initializeDataProvider(e),this._initializeDataConverter(e))},t.abort=function(){this._cancelCurrentProvider()},t.getInitializeData=function(){var e=Tt()(It.a.mark(function e(t,n){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.changeProvider(t),e.next=3,this.currentProvider.getInitializeData(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.search=function(){var e=Tt()(It.a.mark(function e(t,n){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.changeProvider(t),e.next=3,this.currentProvider.search(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.nextPage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.currentProvider.nextPage(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.convertToCompData=function(e){return this._convertToCompData(e)},t._convertToCompData=function(e){return this.currentConverter.convert(e)},t._initializeDataConverter=function(e){var t=Kt[e],n=this.config[e];t&&(t&&void 0===this.converters[e]&&(this.converters[e]=new t(n)),this.currentConverter=this.converters[e])},t._initializeDataProvider=function(e){var t=fn[e],n=this.config[e];void 0===this.providers[e]&&(this.providers[e]=new t(n)),this.currentProvider=this.providers[e],this.currentSearchType=e},t._cancelCurrentProvider=function(){this.currentProvider&&this.currentProvider.abort()},e}(),yn=u.a.satisfies("os.name = Android && os.version = 4.4.2")&&u.a.isSamsungBrowser(),vn=function(e){function t(t){var n;n=e.call(this,t)||this;var i=_.W.get("configAgent").configMap.apiInfo;return n._componentFactory=_.W.get("componentFactory"),n._i18n=_.W.get("i18n"),n._fetchAuthorizedImage=i.fetchAuthorizedImage,n._searchDataManager=n._initializeSearchDataManager(i),n._dataConverter=n._initializeDataConverter(i),n}S()(t,e);var n=t.prototype;return n.open=function(){this._store.open()},n.close=function(){this._store.close()},n.togglePanel=function(){return this._store.opened?this.close():this.open(),this._store.opened},n.update=function(){this._store.update()},n.append=function(){this._store.append()},n.reset=function(){this._store.reset()},n.updateErrorStatus=function(e){this._store.updateErrorStatus(e)},n.getInitialSearchType=function(){return this._store.initialSearchType},n.getSearchType=function(){return this._store.searchType},n.getSearchOption=function(){return this._store.searchOption},n.changeSearchType=function(){var e=Tt()(It.a.mark(function e(t,n){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this._store.changeSearchType(t),e.next=4,this.requestData(t,n);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.changeSearchOption=function(){var e=Tt()(It.a.mark(function e(t,n){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this._store.changeSearchOption(n),e.next=4,this.requestData(t,n);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.resetAll=function(){this._store.resetAll()},n.keywordSearch=function(){var e=Tt()(It.a.mark(function e(t,n){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this._store.changeSearchOption(n),e.next=4,this.requestData(t,n);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.requestData=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.paid,r=n.range,o=this._store.getPanelConfig(t),"photo"===t?n.paid=i||Object(x.a)(o,"license",["F","P"]):"travel"===t&&(n.range=r||Object(x.a)(o,"range",["o","p","d"])),!n||!n.keyword){e.next=8;break}return e.next=6,this.search(t,n);case 6:e.next=10;break;case 8:return e.next=10,this.recommendData(t,n);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.authorizedImage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gt.a.get(this._fetchAuthorizedImage,{params:{productId:t},success:function(e){return!!e.imageUrl}});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),n.search=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this._store.searchType){e.next=2;break}return e.abrupt("return");case 2:return i=this._store.searchType,e.next=5,this._searchDataManager.search(t,n);case 5:(r=e.sent)&&i===this._store.searchType&&this._store.update(r);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n._preLoadImage=function(e){return new Promise(function(t){var n=new Image;n.onload=function(){t(!0)},n.onerror=function(){t(!1)},n.src=e})},n._getValidImageList=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=0;case 2:if(!(i<t.length)){e.next=10;break}return e.next=5,this._preLoadImage(t[i].urls.thumb);case 5:e.sent&&n.push(t[i]);case 7:i++,e.next=2;break;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.recommendData=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this._store.searchType){e.next=2;break}return e.abrupt("return");case 2:return i=this._store.searchType,e.next=5,this._searchDataManager.getInitializeData(t,n);case 5:if(r=e.sent,!yn||"photo"!==t){e.next=10;break}return e.next=9,this._getValidImageList(r.items);case 9:r.items=e.sent;case 10:r&&i===this._store.searchType&&!this._store.alreadySearchedState&&this._store.update(r);case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.nextPage=function(){var e=Tt()(It.a.mark(function e(){var t,n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._store.searchType,n=t,e.next=4,this._searchDataManager.nextPage();case 4:if(i=e.sent,!yn||"photo"!==t){e.next=9;break}return e.next=8,this._getValidImageList(i.items);case 8:i.items=e.sent;case 9:r=this._store.searchType,i&&n===r&&this._store.append(i);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.itemDataToStore=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertToCompData(t);case 2:return n=e.sent,e.abrupt("return",this.createComponent(n));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.itemDataToCompData=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertToCompData(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.createComponent=function(e){return this._componentFactory.createComponentWithCompData(e)},n.removeItemById=function(e){this._store.removeItemById(e)},n._initializeDataConverter=function(e){var t=Kt.travel,n=Kt.book,i=Kt.movie,r=Kt.broadcast,o=Kt.music,a=Kt.shopping,s=Kt.news,c=Kt.show;return{photo:new(0,Kt.photo),travel:new t,book:new n,movie:new i,broadcast:new r,music:new o,shopping:new a,news:new s({newsDetailAPI:e.fetchNewsDetail}),show:new c}},n._initializeSearchDataManager=function(e){return new mn({photo:{API:{INITIALIZE:e.fetchRecommendedImage,SEARCH:e.fetchImages}},travel:{API:{INITIALIZE:e.fetchRecommendedTravels,SEARCH:e.fetchTravels}},book:{API:{INITIALIZE:e.fetchBookBestSellers,SEARCH:e.fetchBooks}},movie:{API:{INITIALIZE:e.fetchBoxOfficeMovies,SEARCH:e.fetchMovies}},broadcast:{API:{INITIALIZE:e.fetchRecommandedBroadcasts,SEARCH:e.fetchBroadcasts}},music:{API:{INITIALIZE:e.fetchNewMusic,SEARCH:e.fetchMusics}},shopping:{API:{SEARCH:e.fetchShoppingItems}},news:{API:{INITIALIZE:e.fetchPopularNews,SEARCH:e.fetchNews,NEWS_DETAIL:e.fetchNewsDetail}},show:{API:{INITIALIZE:e.fetchRecommandedShows,SEARCH:e.fetchShows}}})},n.convertToDragItem=function(e){var t=this.getSearchType();return this._dataConverter[t].convertToDragItem(e)},n.convertToCompData=function(e){var t=this.getSearchType();return this._dataConverter[t].convert(e)},n.setSearchedState=function(e){this._store.setSearchedState(e)},t}(_.f),_n=n(397),bn=_.H.extend({name:"SearchPanelLayout",view:Object(H.a)({Loader:function(){return Promise.all([n.e(0),n.e(1),n.e(28)]).then(n.bind(null,1348))}}),useCase:St.a,service:vn,store:_n.a}),Sn=n(399),Cn=n(400),In=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=_.W.get("configAgent"),n._i18n=_.W.get("i18n"),n._componentListStore=_.W.get("componentListStore"),n._componentFactory=_.W.get("componentFactory"),n._userId=n._configAgent.get("userInfo.userId"),n._searchDataManager=n._initializeSearchDataManager(),n._prevMomentItems=[],n._isCalledOnce=!1,n}S()(t,e);var n=t.prototype;return n.open=function(){this._store.reset(),this._store.open(),this.search(this._store.momentOption)},n.close=function(){this._store.close()},n.togglePanel=function(){return this._store.opened?this._store.close():this._store.open(),this._store.opened},n.reset=function(){this._store.reset()},n.resetAll=function(){this._store.resetAll()},n.update=function(){this._store.update()},n.append=function(){this._store.append()},n.updateErrorStatus=function(e){this._store.updateErrorStatus(e)},n.getMomentType=function(){return this._store.momentType},n.getMomentOption=function(){return this._store.momentOption},n._initializeSearchDataManager=function(){var e=this._configAgent.configMap.apiInfo;return new mn({moment:{API:{SEARCH:e.fetchMoments},fetchCount:Cn.b,blogId:this._userId}})},n.getMomentItems=function(){return this._store.getMomentItems()},n.getCompData=function(e){return this._store.getItemByIndex(e).baseCompData},n.removeItemBy=function(e){this._store.removeItemByIndex(e)},n.getSyncUnitList=function(e){return this._store.getItemByIndex(e).syncUnitList},n.changeMomentOption=function(e){this.reset(),this._store.changeMomentOption(e),this.search(e)},n.search=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this._store.momentType,e.next=4,this._searchDataManager.search("moment",t);case 4:i=e.sent,this._store.changeMomentOption(t),i&&n===this._store.momentType&&this._store.update(i),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),this._store.isFetchNextPageError=!0,e.abrupt("return",this._showErrorMessage(e.t0));case 13:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),n.nextPage=function(){var e=Tt()(It.a.mark(function e(){var t,n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._store.momentType,e.next=4,this._searchDataManager.nextPage();case 4:(n=e.sent)&&t===this._store.momentType&&this._store.append(n),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),this._store.isFetchNextPageError=!0,e.abrupt("return",this._showErrorMessage(e.t0));case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),n.itemDataToStore=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertToCompData(t);case 2:return n=e.sent,e.abrupt("return",this.createComponent(n));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.itemDataToCompData=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertToCompData(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.createComponent=function(e){return this._componentFactory.createComponentWithCompData(e)},n.convertToCompData=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._searchDataManager.convertToCompData(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._searchDataManager.currentConverter.convertToDragItem(e)},n._showErrorMessage=function(e){if("abort"!==Object(x.a)(e,"message"))return new Error(this._i18n("momentPanelLayout:error_server_data_load"))},t}(_.f),On=n(401),Tn=_.H.extend({name:"MomentPanelLayout",view:Object(H.a)({Loader:function(){return Promise.all([n.e(0),n.e(1),n.e(29)]).then(n.bind(null,1360))}}),useCase:Sn.a,service:In,store:On.a}),Ln=n(402),En=n(404),Pn=n(78),wn=n(190),kn=n(324),xn=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=_.W.get("configAgent"),n._componentFactory=_.W.get("componentFactory"),n._dataProvider=n._initializeDataProvider(),n._dataConverter=new Lt,n._validPackCodeList=[],n}S()(t,e);var n=t.prototype;return n._initializeDataProvider=function(){var e=this._configAgent.get("apiInfo");return(this._configAgent.get("productConfig.stickerPanel")||{}).dataProvider||new on({API:{INITIALIZE:e.fetchStickers}})},n.openRefreshPanel=function(e){this._pauseDocumentEdit(),this._store.openRefreshPanel(e)},n.closeRefreshPanel=function(){this._store.closeRefreshPanel(),this._unpauseDocumentEdit()},n.open=function(){this._store.open()},n.close=function(){this._store.close()},n.togglePanel=function(){return this._store.opened?this._store.close():this._store.open(),this._store.opened},n.updateErrorStatus=function(e){this._store.updateErrorStatus(e)},n.loadInitializeData=function(){var e=Tt()(It.a.mark(function e(){var t,n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataProvider.getCategories();case 2:return t=e.sent,n=Object(At.a)(t.list),e.next=6,this.updateCategory(t);case 6:return this._updateValidPackCode(t.list),e.next=9,this.updateStickerPack(n);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.updateCategory=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,this.loadInitializeData();case 3:return e.abrupt("return",e.sent);case 6:this._store.updateCategory(t);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.updateStickerPack=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dataProvider.getStickerPack(t);case 2:n=e.sent,i=n.list.map(function(e){return{packCode:t.packCode,seq:e.seq,stickerInfo:e,animated:t.isAnimated}}),this._store.updateStickerPack({stickerPack:i,packCode:t.packCode});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.insertItem=function(e){var t=this._dataConverter.convert(e);return this.createComponent(t)},n.createComponent=function(e){return this._componentFactory.createComponentWithCompData(e)},n.updateUsedStickerPack=function(e){if(!0!==Object(Ze.a)(e)){var t=Object(Pn.a)(e,function(e){return e.packCode}),n=Object(wn.a)(t,this._validPackCodeList);!1===Object(Ze.a)(n)&&Object(kn.a)(e,function(e){return n.includes(e.packCode)}),this._store.updateUsedStickerPack(e)}else this._store.updateUsedStickerPack([])},n.getStickerCompData=function(e){return this._dataConverter.convert(e)},n.getUsedStickerList=function(e,t){var n=Object(we.a)(e,t);return n>-1&&e.splice(n,1),e.unshift(t),e},n._updateValidPackCode=function(e){this._validPackCodeList=Object(Pn.a)(e,function(e){return e.packCode})},t}(_.d),Dn=_.H.extend({name:"StickerPanelLayout",view:Object(H.a)({Loader:function(){return n.e(31).then(n.bind(null,1357))}}),useCase:Ln.a,store:En.a,service:xn}),An=n(405),jn=n(194),Rn=["image","video","imageNode","imageGroup","imageStrip"],Nn=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=_.W.get("configAgent"),n._i18n=_.W.get("i18n"),n._componentListStore=_.W.get("componentListStore"),n._componentFactory=_.W.get("componentFactory"),n._searchDataManager=n._initializeSearchDataManager(),n._prevLibraryItems=[],n._isCalledOnce=!1,n}S()(t,e);var n=t.prototype;return n.open=function(){this._store.open(),this.search(this._store.orderOption)},n.openTab=function(e){this._store.open(),this._store.changeLibraryType(e),this.search(this._store.orderOption)},n.close=function(){this._store.close()},n.togglePanel=function(){return this._store.opened?this._store.close():this._store.open(),this._store.opened},n.reset=function(){this._store.reset()},n.update=function(){this._store.update()},n.append=function(){this._store.append()},n.getLibraryType=function(){return this._store.libraryType},n.getMediaItemsForLibrary=function(){return Object(Pt.a)(this._componentListStore.compList,function(e,t){if(!0===t.isLibraryComponent()){var n=t.getLibraryItemData(),i=e.keys,r=e.items;Rn.includes(t.ctype)&&(Array.isArray(n)?n.forEach(function(e){i[e.data.id]=""+e.data.domain+e.data.path}):i[n.id]=n.key),n&&(Array.isArray(n)?n.forEach(function(e){r.push(e)}):r.push(n))}return e},{keys:{},items:[]})},n.updateMediaList=function(){var e=this.getMediaItemsForLibrary(),t=e.keys,n=e.items,i=Object(jn.a)(n,function(e){return"string"==typeof e.key});this._store.updateMediaList(i,t)},n._initializeSearchDataManager=function(){var e=this._configAgent.configMap.apiInfo;return new mn({"purchased-image":{API:{SEARCH:e.fetchPurchasedImages}}})},n.getLibraryItems=function(){return this._store.getLibraryItems()},n.getCompData=function(e){return this._store.getItemByIndex(e).baseCompData},n.removeItemBy=function(e){this._store.removeItemByIndex(e)},n.getSyncUnitList=function(e){return this._store.getItemByIndex(e).syncUnitList},n.changeLibraryType=function(e,t){this.reset(),this._store.changeLibraryType(e),this.search(t)},n.changeOrderOption=function(e){this.reset(),this._store.changeOrderOption(e),this.search(e)},n.search=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this._store.libraryType,e.next=4,this._searchDataManager.search("purchased-image",t);case 4:(i=e.sent)&&n===this._store.libraryType&&this._store.update(i),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",this._showErrorMessage(e.t0));case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),n.nextPage=function(){var e=Tt()(It.a.mark(function e(){var t,n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._store.libraryType,e.next=4,this._searchDataManager.nextPage();case 4:(n=e.sent)&&t===this._store.libraryType&&this._store.append(n),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",this._showErrorMessage(e.t0));case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),n.itemDataToStore=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertToCompData(t);case 2:return n=e.sent,e.abrupt("return",this.createComponent(n));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.itemDataToCompData=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertToCompData(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.createComponent=function(e){return this._componentFactory.createComponentWithCompData(e)},n.convertToCompData=function(e){return this._searchDataManager.convertToCompData(e)},n._showErrorMessage=function(e){if("abort"!==Object(x.a)(e,"message"))return new Error(this._i18n("libraryPanelLayout:error_server_data_load"))},n._getAutoPopupMode=function(){return this._store.autoPopupMode},n._isActiveAutoPopup=function(){return this._getAutoPopupMode()===s.b.ACTIVE},n._isInActiveAutoPopup=function(){return this._getAutoPopupMode()===s.b.INACTIVE},n._isIncresedLibraryItems=function(){var e=this.getLibraryItems();return this._prevLibraryItems.length<e.length},n.isTimeToAutoPopup=function(e){if(void 0===e&&(e=!0),!1!==this._isCalledOnce)return!1;if(this._isActiveAutoPopup()){if(this._isIncresedLibraryItems())return this._isCalledOnce=!0,!0}else{if(this._isInActiveAutoPopup())return this._isCalledOnce=!0,!1;if(!e)return this._isCalledOnce=!0,!1;if(this._isIncresedLibraryItems())return this._isCalledOnce=!0,!0}return!1},t}(_.f),Mn=n(406),Bn=_.H.extend({name:"LibraryPanelLayout",view:Object(H.a)({Loader:function(){return Promise.all([n.e(0),n.e(1),n.e(32)]).then(n.bind(null,1358))}}),useCase:An.a,service:Nn,store:Mn.a}),Wn=n(407),Un=n(242),Fn="apiInfo.fetchRecommendedTemplates",zn="apiInfo.fetchRecommendedTemplate",Vn="apiInfo.fetchPartialTemplates",Gn="apiInfo.fetchMyTemplates",Hn="apiInfo.fetchMyTemplate",qn="apiInfo.addMyTemplate",Jn="apiInfo.deleteMyTemplate",Kn=((sn={})[Un.a.RECOMMEND]=Fn,sn[Un.a.PART]=Vn,sn[Un.a.MY]=Gn,sn),Xn=function(e){function t(t){var n;(n=e.call(this,t)||this)._configAgent=_.W.get("configAgent"),n._i18n=_.W.get("i18n"),n._componentFactory=_.W.get("componentFactory"),n._userId=n._configAgent.get("userInfo.userId");var i=n._configAgent.get("productConfig.templatePanel.dataProvider");return n._templateDataProvider=new dn({dataProvider:i}),n._savedListApiUrl={},n}S()(t,e);var n=t.prototype;return n.open=function(){var e=this._store.selectedTemplateType;this._savedListApiUrl[e]!==this._getListApiUrl(e)&&this._store.reset(),this._store.open()},n.close=function(){this._store.close()},n.togglePanel=function(){return this._store.opened?this._store.close():this._store.open(),this._store.opened},n.showLoadingIcon=function(){this._store.showLoadingIcon()},n.hideLoadingIcon=function(){this._store.hideLoadingIcon()},n._getListApiUrl=function(e){return this._configAgent.get(Kn[e])},n.loadRecommendList=function(){var e=Tt()(It.a.mark(function e(){var t,n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._store.initialize(),t=Un.a.RECOMMEND,n=this._getListApiUrl(t),e.next=5,this._templateDataProvider.getRecommendList(n);case 5:i=e.sent,this._savedListApiUrl[t]=n,this._store.update(i,t);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.loadPartTemplateList=function(){var e=Tt()(It.a.mark(function e(){var t,n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._store.initialize(),t=Un.a.PART,n=this._getListApiUrl(t),e.next=5,this._templateDataProvider.getPartTemplateList(n);case 5:i=e.sent,this._savedListApiUrl[t]=n,this._store.update(i,t);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.update=function(e){this._store.update(e)},n.updateErrorStatus=function(e){this._store.updateErrorStatus(e)},n.getPartTemplateComponentList=function(e){if(e.length)return this._componentFactory.createComponentListWithCompDataList(e)},n.applyMyTemplate=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._configAgent.get(Hn),i={userId:this._userId,templateNo:t},e.next=4,this._templateDataProvider.getMyTemplate(n,i);case 4:if(r=e.sent,!(o=Object(x.a)(r,"documentModel"))){e.next=8;break}return e.abrupt("return",JSON.parse(o));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.applyRecommendTemplate=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._configAgent.get(zn),i={templateNo:t},e.next=4,this._templateDataProvider.getRecommend(n,i);case 4:if(r=e.sent,!(o=Object(x.a)(r,"documentModel"))){e.next=8;break}return e.abrupt("return",JSON.parse(o));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.loadMyTemplateList=function(){var e=Tt()(It.a.mark(function e(){var t,n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._store.initialize(),t=Un.a.MY,n=this._getListApiUrl(t),i={userId:this._userId},e.next=6,this._templateDataProvider.getMyTemplateList(n,i);case 6:r=e.sent,this._savedListApiUrl[t]=n,this._store.update(r,t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.addMyTemplate=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._configAgent.get(qn),i={userId:this._userId,documentModel:JSON.stringify(t)},e.next=4,this._templateDataProvider.addMyTemplate(n,i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.deleteMyTemplate=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._configAgent.get(Hn),i=this._configAgent.get(Jn),r={userId:this._userId,templateNo:t},o=n===i,e.next=6,this._templateDataProvider.deleteMyTemplate(i,r,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.getPartTemplateData=function(e){var t=this._store.getItemById(e),n=Object(x.a)(t,"documentModel");if(n)return JSON.parse(n).document.components},n.changeTemplateType=function(e){this._store.reset(),this._store.changeTemplateType(e)},t}(_.f),Yn=n(408),Qn=_.H.extend({name:"TemplatePanelLayout",view:Object(H.a)({Loader:function(){return n.e(33).then(n.bind(null,1353))}}),useCase:Wn.a,service:Xn,store:Yn.a}),Zn=(cn=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"viewMode",ln,P()(n));var i=t.state,r=void 0===i?{}:i,o=_.W.get("configAgent");return n.useHelp=o.get("productConfig.help")||!1,n.usePreview=!1!==o.get("productConfig.preview"),n.viewMode=Object(x.a)(r,"viewMode",n.viewMode),n}S()(t,e);var n=t.prototype;return n.changeToNextViewMode=function(){this.changeViewMode(this.nextViewMode)},n.changeViewMode=function(e){this.viewMode=e},B()(t,[{key:"nextViewMode",get:function(){return this.viewMode===_.U.VIEW_MODE_PC?_.U.VIEW_MODE_MOBILE:this.viewMode===_.U.VIEW_MODE_MOBILE?_.U.VIEW_MODE_TABLET:this.viewMode===_.U.VIEW_MODE_TABLET?_.U.VIEW_MODE_PC:this.viewMode}},{key:"viewMode",get:function(){return this.viewMode}}]),t}(_.w),ln=k()(cn.prototype,"viewMode",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.U.VIEW_MODE_PC}}),k()(cn.prototype,"nextViewMode",[D.e],Object.getOwnPropertyDescriptor(cn.prototype,"nextViewMode"),cn.prototype),cn),$n=n(743),ei=(un=function(e){function t(){var t;return(t=e.call(this)||this)._viewModeLayoutService=_.W.get("viewModeLayoutService"),t._headerLayoutService=_.W.get("headerLayoutService"),t._documentToolbarLayoutService=_.W.get("documentToolbarLayoutService"),t._propertyToolbarLayoutService=_.W.get("propertyToolbarLayoutService"),t._canvasLayoutService=_.W.get("canvasLayoutService"),t._helpPanelLayoutService=_.W.get("helpPanelLayoutService")||{togglePanel:function(){}},t._panelContainerLayerService=_.W.get("panelContainerLayerService"),t._virtualEditable=_.W.get("virtualEditable"),t._contentsToolbarLayoutService=_.W.get("contentsToolbarLayoutService"),t._canvasScrollingServie=_.W.get("canvasScrollingService"),t}S()(t,e);var n=t.prototype;return n.changeViewMode=function(){var e=this,t=this._viewModeLayoutService.changeViewMode();this._headerLayoutService.changeViewMode(t),this._documentToolbarLayoutService.resetDisplayButtonSet(),this._propertyToolbarLayoutService.resetDisplayButtonSet(),this._canvasLayoutService.changeViewMode(t),setTimeout(function(){if(e._contentsToolbarLayoutService){var t=e._virtualEditable.getClientRects();e._contentsToolbarLayoutService.updateContentsToolbarPosition({clientRects:t})}e._canvasScrollingServie.scrollToFocus(!0)},300)},n.openHelpPanel=function(){this._helpPanelLayoutService.togglePanel(),this._panelContainerLayerService.closePanel()},t}(_.m),k()(un.prototype,"changeViewMode",[te.history,D.d],Object.getOwnPropertyDescriptor(un.prototype,"changeViewMode"),un.prototype),un),ti=(pn=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.store,t=e.viewMode;if(!e.usePreview)return null;var n=this._getViewModeData(t),i=n.className,r=n.buttonText,o="flbbtn."+n.logId;return D.b.createElement("li",{className:"se-utils-item"},D.b.createElement("button",{type:"button",className:i,"data-log":o,onClick:this._handleClickViewMode},D.b.createElement("span",{className:"se-utils-text"},r)))},n._getViewModeData=function(e){switch(e){case _.U.VIEW_MODE_MOBILE:return{className:"se-util-button __mode-button se-util-button-device-mobile",buttonText:this.props.i18n("viewModeLayout:mobile_view"),logId:"vtablet"};case _.U.VIEW_MODE_TABLET:return{className:"se-util-button __mode-button se-util-button-device-tablet",buttonText:this.props.i18n("viewModeLayout:tablet_view"),logId:"vdesktop"};default:return{className:"se-util-button __mode-button se-util-button-device-desktop",buttonText:this.props.i18n("viewModeLayout:pc_view"),logId:"vmobile"}}},n._handleClickViewMode=function(e){this.props.useCase.changeViewMode(),Be.a.log(e.nativeEvent)},t}(D.b.Component),k()(pn.prototype,"_handleClickViewMode",[te.autobind],Object.getOwnPropertyDescriptor(pn.prototype,"_handleClickViewMode"),pn.prototype),pn);ti.defaultProps={i18n:function(e){return e}},ti.propTypes={i18n:D.a.func,useCase:D.a.instanceOf(ei).isRequired,store:D.a.instanceOf(Zn).isRequired};var ni,ii=Object(N.b)(ti),ri=(ni=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.useHelp;return!1===i?null:D.b.createElement("li",{className:"se-utils-item"},D.b.createElement("a",{href:!0===i?"#":i,target:"_blank",className:"se-util-button se-util-button-guide","data-log":"flbbtn.help",onClick:this._handleClickHelp},D.b.createElement("span",{className:"se-utils-text"},n("viewModeLayout:help"))))},n._handleClickHelp=function(e){!0===this.props.store.useHelp&&(this.props.useCase.openHelpPanel(),e.preventDefault()),Be.a.log(e.nativeEvent)},t}(D.b.Component),k()(ni.prototype,"_handleClickHelp",[te.autobind],Object.getOwnPropertyDescriptor(ni.prototype,"_handleClickHelp"),ni.prototype),ni);ri.defaultProps={i18n:function(e){return e}},ri.propTypes={i18n:D.a.func,useCase:D.a.instanceOf(ei).isRequired,store:D.a.instanceOf(Zn).isRequired};var oi=Object(N.b)(ri),ai=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.render=function(){return D.b.createElement($n.TransitionGroup,null,D.b.createElement($n.CSSTransition,{classNames:{appear:"se-utils-interaction-enter",appearActive:"se-utils-interaction-enter-active"},timeout:300,appear:!0},D.b.createElement("div",{className:"se-utils"},D.b.createElement("ul",{className:"se-ultils-list"},D.b.createElement(ii,this.props),D.b.createElement(oi,this.props)))))},t}(D.b.Component);ai.propTypes={store:D.a.instanceOf(Zn).isRequired};var si,ci,li=Object(N.b)(ai),ui=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.getViewMode=function(){return this._store.viewMode},n.changeViewMode=function(){return this._store.changeToNextViewMode(),this._store.viewMode},t}(_.f),pi=_.H.extend({name:"ViewModeLayout",view:li,useCase:ei,service:ui,store:Zn}),di=(si=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"visibility",ci,P()(n));var i=t.state,r=void 0===i?{}:i;return n.visibility=Object(x.a)(r,"visibility",n.visibility),n}S()(t,e);var n=t.prototype;return n.toggle=function(e){this.visibility="boolean"==typeof e?e:!this.visibility},n.show=function(){this.visibility=!0},n.hide=function(){this.visibility=!1},t}(_.w),ci=k()(si.prototype,"visibility",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),si),hi=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.m),gi=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){return D.b.createElement("div",{className:this._isShow()},D.b.createElement("span",{className:"se-blind"},this.props.i18n("loadingProgressLayout:loading"),"."))},n._isShow=function(){var e={"se-progressbar":!0};return!0===this.props.store.visibility&&(e["se-is-on"]=!0),R()(e)},t}(D.b.Component);gi.defaultProps={children:null,i18n:function(e){return e}},gi.propTypes={children:D.a.oneOfType([D.a.arrayOf(D.a.element),D.a.element]),i18n:D.a.func,store:D.a.instanceOf(di).isRequired,useCase:D.a.instanceOf(hi).isRequired};var fi=Object(N.b)(gi),mi=function(e){function t(t){var n;return(n=e.call(this)||this)._store=t,n}S()(t,e);var n=t.prototype;return n.show=function(){this._store.show()},n.hide=function(){this._store.hide()},t}(_.f),yi=_.H.extend({name:"LoadingProgressLayout",view:fi,service:mi,store:di,useCase:hi}),vi=n(409),_i=n(723),bi=n(557),Si=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.readCopiedUrl=function(){var e=Tt()(It.a.mark(function e(){var t,n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_i.a.isReadPermissionUnknown()){e.next=2;break}return e.abrupt("return","");case 2:return e.prev=2,e.next=5,_i.a.readText();case 5:if(t=e.sent,n=bi.a.prependProtocol(t),!bi.a.isValidURL(n)){e.next=9;break}return e.abrupt("return",t);case 9:return e.abrupt("return","");case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return","");case 15:case"end":return e.stop()}},e,null,[[2,12]])}));return function(){return e.apply(this,arguments)}}(),n.open=function(){var e=Tt()(It.a.mark(function e(){var t;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readCopiedUrl();case 2:t=e.sent,this._pauseDocumentEdit(),this._store.open(t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.updatePreview=function(e){this._store.updatePreview(e)},n.setLoading=function(e){this._store.setLoading(e)},n.changeToTextLayout=function(){this._store.changeToTextLayout()},n.close=function(){this._store.close(),this._unpauseDocumentEdit()},n.reset=function(){this._store.reset()},t}(_.d),Ci=n(290),Ii=_.G.extend({name:"LinkLayer",view:Object(H.a)({Loader:function(){return n.e(34).then(n.bind(null,1367))}}),useCase:vi.a,service:Si,store:Ci.a}),Oi=n(410),Ti={width:"920",height:"610",scrollbars:"yes",resizable:"yes",status:"yes"},Li=function(){function e(e,t,n){void 0===n&&(n="real"),this._baseUrl=this._getBaseUrl(n),this.resetPopupOptions(e,t)}var t=e.prototype;return t.resetPopupOptions=function(e,t){void 0===t&&(t={}),this.close(),this._popupTitle="se_"+(e||"popup"),this._popupOptions=Re()({},Ti,t)},t._getBaseUrl=function(e){throw new Error("Implement '_getBaseUrl(buildPhase="+e+")' method")},t._getPopupUrl=function(e){void 0===e&&(e={});var t=Object.keys(e).map(function(t){return t+"="+e[t]}).join("&");return this._baseUrl+"?"+t},t._filterData=function(e){return e},t.open=function(e){var t=this;return void 0===e&&(e={}),new Promise(function(n){var i=t._getPopupUrl(e);t._handleMessageData=function(e){var i=t._filterData(e);i&&(t.close(),n(i))},t._openPopup(i)})},t._openPopup=function(e){if(this._popupWindow&&!this._popupWindow.closed)this._popupWindow.focus();else{var t=this._getPopupOption();this._addMessageListener(e),u.a.IS_IE?(this._popupWindow=window.open(location.href,this._popupTitle,t),this._popupWindow.location.href=e):this._popupWindow=window.open(e,this._popupTitle,t)}},t._getPopupOption=function(){var e=this,t=this._popupOptions,n=t.width,i=t.height;return"left="+(screen.availWidth-n)/2+",top="+(screen.availHeight-i)/2+","+Object.keys(this._popupOptions).map(function(t){return t+"="+e._popupOptions[t]}).join(",")},t.close=function(){this._removeMessageListener(),this._popupWindow&&this._popupWindow.close(),this._popupWindow=null},t._removeMessageListener=function(){this._receiveMessage&&window.removeEventListener("message",this._receiveMessage,!1),this._receiveMessage=null},t._addMessageListener=function(e){var t=this;this._removeMessageListener();var n=(0===e.indexOf("//")?location.protocol+e:e).match(/https?:\/\/[^/]*/i),i=n&&n[0]||location.origin;this._receiveMessage=function(e){e.origin===i&&e.source===t._popupWindow&&t._handleMessageData&&t._handleMessageData(e.data)},window.addEventListener("message",this._receiveMessage,!1)},e}(),Ei={dev:"alpha.",qa:"stage.",stage:"stage.",real:""};var Pi=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n._getBaseUrl=function(e){return"https://"+function(e){var t=Ei[e];return"string"==typeof t?t:Ei.stage}(e)+"mybox.naver.com/mini"},n._getPopupUrl=function(t){return void 0===t&&(t={}),e.prototype._getPopupUrl.call(this,t)+"&type=popup&postMessage=true"},n._filterData=function(e){if(e){var t=e.type,n=e.args;if("submit"===t){var i=(void 0===n?{}:n).files;return void 0===i?[]:i}}},t}(Li),wi=null,ki={getInstance:function(e,t){return void 0===e&&(e="mybox-popup"),void 0===t&&(t={}),wi?wi.resetPopupOptions(e,t):wi=new Pi(e,t),wi},destroy:function(){wi&&wi.close(),wi=null}},xi={dev:"test.",qa:"test.",stage:"ecommerce.",real:"ecommerce."};var Di,Ai,ji,Ri,Ni,Mi,Bi,Wi,Ui,Fi,zi,Vi,Gi,Hi,qi,Ji=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n._getBaseUrl=function(e){var t=function(e){var t=xi[e];return"string"==typeof t?t:xi.stage}(e);return location.protocol+"//"+t+"upphoto.naver.com/sns/view"},n._getPopupUrl=function(t){void 0===t&&(t={});var n=t,i=n.type,r=n.maxCount,o=void 0===r?50:r;return e.prototype._getPopupUrl.call(this,{postMessage:!0,maxFileCount:o})+"#"+i+"/origin="+encodeURIComponent(location.origin)+"&msgToken="+(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]},n._filterData=function(e){if(e){var t=JSON.parse(e),n=t.func,i=t.imageUrls;return"addImageUrls"===n?void 0===i?[]:i:void 0}},t}(Li),Ki=null,Xi={getInstance:function(e,t){return void 0===e&&(e="upphoto-sns-popup"),void 0===t&&(t={}),Ki?Ki.resetPopupOptions(e,t):Ki=new Ji(e,t),Ki},destroy:function(){Ki&&Ki.close(),Ki=null}},Yi=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){this._pauseDocumentEdit(),this._store.openCloudSnsPopup()},n.openCloudSNSWindowPopup=function(e){var t=this;return void 0===e&&(e={}),this._store.opened||this.open(),new Promise(function(n){t._resolve=t._resolve||n,t._option=Re()({},t._option,e);var i=t._option.type;t._openPopup(i)})},n.close=function(){this._destroyPopup(),this._store.closeCloudSnsPopup(),this._unpauseDocumentEdit(),this._resolve=null,this._option=null},n._openPopup=function(e){"ncloud"===e?this._openMyboxPopup():e&&this._openUpphotoSnsPopup()},n._getMaxCount=function(){return this._option.maxCount||_.W.get("configAgent").get("editorInfo.cloudMaxImageCount")},n._openMyboxPopup=function(){var e=this,t=this._getMaxCount();this._popup=ki.getInstance("mybox-photo"),this._popup.open({mode:"photo",maxCount:t}).then(function(t){e._resolve(t.map(function(e){return{url:e.downloadUrl,downloaderType:e.downloaderType}})),e.close()})},n._openUpphotoSnsPopup=function(){var e=this,t=this._option.type,n=this._getMaxCount();this._popup=Xi.getInstance("upphoto-sns-popup"),this._popup.open({type:t,maxCount:n}).then(function(t){e._resolve(t.map(function(e){return{url:decodeURIComponent(e),downloaderType:""}})),e.close()})},n._destroyPopup=function(){this._popup&&this._popup.close(),this._popup=null},t}(_.d),Qi=n(412),Zi=_.G.extend({name:"CloudSnsLayer",view:Object(H.a)({Loader:function(){return n.e(35).then(n.bind(null,1320))}}),useCase:Oi.a,service:Yi,store:Qi.a}),$i=n(164),er=n(99),tr=function(e){function t(t){var n;return(n=e.call(this,t)||this)._i18n=_.W.get("i18n"),n._componentFactory=_.W.get("componentFactory"),n._componentListStore=_.W.get("componentListStore"),n._canvasScrollingService=_.W.get("canvasScrollingService"),n}S()(t,e);var n=t.prototype;return n.open=function(e){this._pauseDocumentEdit();var t=this._refineToLayerData(e),n=this._i18n("chatLayer:name_placeholder");this._isUpdateMode=t&&!!t.compId,this._store.open(Re()({},t,{baseName:n})),this._canvasScrollingService.hideWindowScroll()},n.close=function(){this._store.close(),this._store.reset(),this._unpauseDocumentEdit(),this._canvasScrollingService.restoreWindowScroll()},n.isUpdateMode=function(){return this._isUpdateMode},n.addMessage=function(){this._store.addMessage()},n.addWriter=function(){this._store.addWriter()},n.toggleDragging=function(e){this._store.toggleDragging(e)},n.editMessage=function(e){this._store.editMessage(e)},n.editWriter=function(e){this._store.editWriter(e)},n.deleteWriter=function(e){this._store.deleteWriter(e)},n.completeMessageEditing=function(){this._store.completeMessageEditing()},n.completeWriterEditing=function(e,t){this._store.completeWriterEditing(e,t)},n.deleteMessage=function(e){this._store.deleteMessage(e)},n.changeOrder=function(e,t){this._store.changeOrder(e,t)},n.changeEditingText=function(e){this._store.changeEditingText(e)},n.selectWriter=function(e){this._store.selectWriter(e)},n.completeWritersEditing=function(){this._store.completeWritersEditing()},n.showWriterPopup=function(){this._store.showWriterPopup()},n.hideWriterPopup=function(){this._store.hideWriterPopup()},n.refineToCompData=function(e){var t=e.messages,n=e.writers,i=e.compId,r=n.map(function(e){return e.name});return{messages:t.map(function(e){return{ctype:"message",text:e.text,name:e.name,owner:e.owner}}),writers:r,compId:i}},n._refineToLayerData=function(e){var t=e.messages,n=void 0===t?[]:t,i=e.writers,r=void 0===i?[]:i,o=e.compId,a=void 0===o?null:o,s=r.map(function(e){return{name:e,key:_.cb.generate(),editing:!1}});return{messages:n.map(function(e){var t=Object(er.a)(s,function(t){return t.name===e.name}).key,n=e.text,i=e.owner,r=e.name;return{key:_.cb.generate(),text:n,owner:i,name:r,writer:t,dragging:!1,editing:!1}}),writers:s,compId:a}},t}(_.d),nr=n(240),ir=_.G.extend({name:"ChatLayer",view:Object(H.a)({Loader:function(){return n.e(30).then(n.bind(null,1349))}}),useCase:$i.a,service:tr,store:nr.a}),rr=n(832),or=n(490),ar=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(e){this._pauseDocumentEdit(),this._store.openImageDetailLayer(e)},n.close=function(){this._store.closeImageDetailLayer(),this._unpauseDocumentEdit()},n.openLoadingLayer=function(){this._store.openLoadingLayer()},n.closeLoadingLayer=function(){this._store.closeLoadingLayer()},t}(_.d),sr=n(413),cr=_.H.extend({name:"ImageDetailLayer",view:Object(H.a)({Loader:function(){return n.e(36).then(n.bind(null,1321))}}),useCase:sr.a,service:ar,store:or.a}),lr=n(439),ur=n(438),pr=n(306),dr=n(1281),hr=n(1282),gr=n(297),fr=function(){function e(e){this._config=e,this.reset()}var t=e.prototype;return t.reset=function(){this._pageBucketHash={},this._pageBucketSize=0},t.getAt=function(e){return this._pageBucketHash[e]},t.setAt=function(e,t){this._pageBucketSize+=t.length,this._pageBucketHash[e]=t.slice(0)},t.isLacking=function(e,t){return!this._pageBucketHash[t+1]&&e.length<=this._config.maxItemsPerPage},t.count=function(){return this._pageBucketSize},t.append=function(e){var t=Math.max(Math.ceil(this._pageBucketSize/this._config.maxItemsPerPage),1),n=this._pageBucketHash[t];this._pageBucketSize+=e.length,n?this._appendPage(e,t,n):this._createPage(e,t)},t._createPage=function(e,t){var n=this._config.maxItemsPerPage,i=e.splice(0,n);this._pageBucketHash[t]=i.slice(0);var r=e.length;0!==r&&(r>n?this._createPage(e,t+1):this._pageBucketHash[t+1]=e.slice(0))},t._appendPage=function(e,t,n){var i=this._config.maxItemsPerPage,r=n.length;if(r===i)this._createPage(e,t+1);else{var o=e.splice(0,i-r);this._pageBucketHash[t]=[].concat(this._pageBucketHash[t],o),this._createPage(e,t+1)}},e}(),mr=function(){function e(e){this._config=e,this._i18n=_.W.get("i18n"),this._language=this._i18n.language(),this._api=null,this._nextPagePool=new fr({maxItemsPerPage:e.maxItemsPerPage}),this._initialize()}var t=e.prototype;return t.abort=function(){Gt.a.abort()},t.search=function(e){if(!e)return this._makeErrorResult("INVALID_REQUEST");var t=this._generateSearchParams(e);return this._api=this._config.api.search,this._request({params:t,isFirstSearch:!0})},t.nearby=function(e,t){var n=this._generateNearByParams(e,t);return this._api=this._config.api.nearby,this._request({params:n,isFirstSearch:!0})},t.nextpage=function(e){return this._nextpage(e)},t._generateSearchParams=function(){throw new Error("[ERROR] 검색 API 요청 파라미터를 처리하는 메서드가 없습니다.")},t._generateNearByParams=function(){throw new Error("[ERROR] 주변 검색 API 요청 파라미터를 처리하는 메서드가 없습니다.")},t._doAfterResponse=function(){throw new Error("[ERROR] API 요청 응답을 처리하는 메서드가 없습니다.")},t._nextpage=function(){throw new Error("[ERROR] 다음 페이지를 처리하는 메서드가 없습니다.")},t._request=function(e){var t=this,n=e.isFirstSearch,i=e.page,r=void 0===i?1:i,o=e.params;return n&&this._initialize(),Gt.a.get(this._api,{params:o,options:{useAbort:!0},success:function(e){return t._doAfterResponse(e,r)},error:function(e){throw e}})},t._initialize=function(){this._nextPagePool.reset(),this._itemCount=0},t._refineItem=function(e){var t=e.name,n=e.address,i=e.placeId,r=e.latlng,o=e.isDomestic,a=e.bookingUrl,s=void 0===a?"":a,c=e.tel,l=void 0===c?"":c;return{ctype:"place",latlng:Re()({ctype:"position"},r),address:n,placeId:i,name:t,bookingUrl:s,tel:l,__isDomestic:o}},t._makeSuccessResult=function(e,t){return{items:this._nextPagePool.getAt(e),pagination:{itemCount:this._itemCount,currentPage:e,hasNextPage:t}}},t._makeErrorResult=function(e){return{items:[],status:e}},e}(),yr=function(e){function t(t){var n;return(n=e.call(this,t)||this)._params=null,n}S()(t,e);var n=t.prototype;return n._generateSearchParams=function(e){return this._params={query:e,siteSort:0,displayCount:this._config.maxItemsPerPage,page:1},this._params},n._generateNearByParams=function(e,t){var n=e.latitude,i=e.longitude;return this._params={siteSort:0,displayCount:this._config.maxItemsPerPage,page:1,radius:4e3,longitude:i,latitude:n},t&&(this._params.query=t,delete this._params.radius),this._params},n._nextpage=function(e){return this._nextPagePool.getAt(e)?this._makeSuccessResult(e):(this._params.page=e,this._request({isFirstSearch:!1,params:this._params,page:e}))},n._doAfterResponse=function(e,t){var n=this,i=Object(x.a)(e,"result.place");if(i){var r=i.list||[];if(0===r.length)return this._makeErrorResult("ZERO_RESULTS");var o=r.map(function(e){var t=n._refineItem({name:e.name,address:e.roadAddress||e.address||e.abbrAddress||"",placeId:e.id,latlng:{latitude:parseFloat(e.y),longitude:parseFloat(e.x)},bookingUrl:e.naverBookingUrl,tel:e.virtualTel||e.tel,isDomestic:!0});return t.searchType=e.type,t});return this._nextPagePool.setAt(t,o),this._itemCount=Math.min(parseInt(i.totalCount),2e3),this._makeSuccessResult(t,this._nextPagePool.count()<this._itemCount)}return this._makeErrorResult("ZERO_RESULTS")},t}(mr),vr={"ko-KR":"ko","en-US":"en","zh-TW":"zh-TW","zh-CN":"zh-CN","es-ES":"es","id-ID":"id","ja-JP":"ja","vi-VN":"vi"},_r=function(){function e(e){this._config=e,this._i18n=_.W.get("i18n"),this._language=this._i18n.language()}var t=e.prototype;return t.geocode=function(e){var t=this,n={language:vr[this._language]};if("string"==typeof e)n.place_id=e;else{var i=e.latitude,r=e.longitude;n.latitude=i,n.longitude=r}return Gt.a.get(this._config.api,{params:n,success:function(n){return t._doAfterResponse(n,e)},error:function(e){throw e}})},t._doAfterResponse=function(){throw new Error("[ERROR] API 요청 응답을 처리하는 메서드가 없습니다.")},t._makeSuccessResult=function(e){var t=e.address,n=e.placeId,i=e.latlng,r=e.isDomestic;return{ctype:"place",latlng:Re()({ctype:"position"},i),name:t,address:t,placeId:n,__isDomestic:r}},t._makeErrorResult=function(){return null},e}(),br=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype._doAfterResponse=function(e,t){if(Object(Ze.a)(e))return this._makeErrorResult();var n=e[0];return Object(Ze.a)(n)?this._makeErrorResult():this._makeSuccessResult({address:n.formattedAddress,placeId:"",latlng:t,isDomestic:!0})},t}(_r),Sr=function(){function e(e){this._config=e,this._i18n=_.W.get("i18n"),this._language=this._i18n.language()}var t=e.prototype;return t.staticmap=function(e){return Gt.a.get(this._config.api,{params:this._generateParams(e),success:function(e){return e.url||e.staticMapUrl},error:function(){return null}})},t._generateParams=function(e){var t=e.markers,n=e.center,i=e.zoom,r=this._config.iconUrls,o=t.map(function(e){var t=Object(x.a)(e,"latlng");return(t?t.latitude:e.latitude)+","+(t?t.longitude:e.longitude)}),a=this._generateBaseParams();if(a.markers=o,r){var s=t.length;1===s&&(a.iconUrls=r["image-marker-x2"]),s>1&&(a.iconUrls=o.map(function(e,t){return r["image-place"+(t+1)+"-x2"]}))}return n&&(a.center=n.latitude+","+n.longitude),i&&(a.zoom=i),a},t._generateBaseParams=function(){throw new Error("[ERROR] 스태틱 맵 API 요청 파라미터를 처리하는 메서드가 없습니다.")},e}(),Cr=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype._generateBaseParams=function(){var e=this._config.size;return{viewSizeRatio:.7,width:e.width,height:e.height}},t}(Sr),Ir=n(70),Or=function(){function e(e){this._config=e,this._i18n=_.W.get("i18n"),this._language=this._i18n.language()}var t=e.prototype;return t.autocomplete=function(e){var t=this;if(!e)return this._makeErrorResult();var n=this._generateParams(e);return Gt.a.get(this._config.api,{params:n,success:function(e){return t._doAfterResponse(e)},error:function(){return t._makeErrorResult()}})},t._generateParams=function(){throw new Error("[ERROR] API 요청 파라미터를 처리하는 메서드가 없습니다.")},t._doAfterResponse=function(){throw new Error("[ERROR] API 요청 응답을 처리하는 메서드가 없습니다.")},t._makeSuccessResult=function(e){return{suggestions:e}},t._makeErrorResult=function(){return{suggestions:[]}},e}(),Tr={query:[],items:[[],[],[],[]]},Lr=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n._generateParams=function(e){return{query:e}},n._doAfterResponse=function(e){var t=Object(Ir.a)({},Tr,e),n=this._getNaverACPlaceData(t);return this._makeSuccessResult(n)},n._getNaverACPlaceData=function(e){var t=[],n=[];return e.items[0].length>0?t=e.items[0]:e.items[2].length>0&&(t=e.items[2]),t.forEach(function(e){e.forEach(function(e){n.push({description:e,placeId:null})})}),n},t}(Or),Er={"ko-KR":"ko","en-US":"en","zh-TW":"zh-TW","zh-CN":"zh-CN","es-ES":"es","id-ID":"id","ja-JP":"ja","vi-VN":"vi"},Pr=function(e){function t(t){var n;return(n=e.call(this,t)||this)._nextPageToken=null,n}S()(t,e);var n=t.prototype;return n._generateSearchParams=function(e){return{query:e,language:Er[this._language]}},n._generateNearByParams=function(e,t){var n={location:e.latitude+","+e.longitude,language:Er[this._language],radius:5e4};return t&&(n.keyword=t),n},n._nextpage=function(e){var t=this._nextPagePool.getAt(e);return t?this._nextPageToken&&this._nextPagePool.isLacking(t,e)?this._request({isFirstSearch:!1,params:{pagetoken:this._nextPageToken},page:e}):this._makeSuccessResult(e):this._request({isFirstSearch:!1,params:{pagetoken:this._nextPageToken},page:e})},n._doAfterResponse=function(e,t){var n=this;if("OK"===e.status){var i=(e.results||[]).map(function(e){return n._refineItem({name:e.name,address:e.formatted_address||e.vicinity||"",placeId:e.place_id,latlng:{latitude:e.geometry.location.lat,longitude:e.geometry.location.lng},isDomestic:!1})});return this._nextPagePool.append(i),this._itemCount=this._nextPagePool.count(),this._nextPageToken=e.next_page_token,this._makeSuccessResult(t,!!this._nextPageToken)}return this._makeErrorResult("ZERO_RESULTS")},t}(mr),wr=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype._doAfterResponse=function(e,t){if("OK"===e.status){var n=e.results[0],i={address:n.formatted_address,placeId:n.place_id,isDomestic:!1};if("string"==typeof t){var r=n.geometry.location,o=r.lat,a=r.lng;i.latlng={latitude:o,longitude:a}}else i.latlng=t;return this._makeSuccessResult(i)}return this._makeErrorResult()},t}(_r),kr={"ko-KR":"ko","en-US":"en","zh-TW":"zh-TW","zh-CN":"zh-CN","es-ES":"es","id-ID":"id","ja-JP":"ja","vi-VN":"vi"},xr=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype._generateBaseParams=function(){var e=this._config.size;return{scale:1,size:e.width+"x"+e.height,language:kr[this._language]}},t}(Sr),Dr={"ko-KR":"ko","en-US":"en","zh-TW":"zh-TW","zh-CN":"zh-CN","es-ES":"es","id-ID":"id","ja-JP":"ja","vi-VN":"vi"},Ar=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n._generateParams=function(e){return{input:e,language:Dr[this._language]}},n._doAfterResponse=function(e){if("OK"===e.status){var t=e.predictions.map(function(e){return{description:e.description,placeId:e.place_id,terms:e.terms}});return this._makeSuccessResult(t)}return this._makeErrorResult()},t}(Or),jr=n(305),Rr=n(212),Nr=["isUpdateMode"],Mr=function(e){function t(t){var n;n=e.call(this,t)||this;var i=_.W.get("configAgent");n._api=i.get("apiInfo"),n._i18n=_.W.get("i18n"),n._componentFactory=_.W.get("componentFactory"),n._toastTimer=null,n._resolve=null;var r=Rr.b[n._language],o=i.get("editorInfo.placesMapInfo"),a=i.get("productConfig.staticMapSize");return n._providers={domestic:{search:new yr({maxItemsPerPage:t.maxItemsPerPage,api:{search:n._api.fetchNaverPlaces,nearby:n._api.fetchNaverNearBy}}),geocode:new br({api:n._api.fetchNaverGeocode}),staticmap:new Cr({api:n._api.fetchNaverStaticMap,size:a,iconUrls:o}),autocomplete:new Lr({api:n._api.fetchNaverAutocomplete})},overseas:{search:new Pr({maxItemsPerPage:t.maxItemsPerPage,api:{search:n._api.fetchGooglePlaces,nearby:n._api.fetchGoogleNearBy},language:r}),geocode:new wr({api:n._api.fetchGoogleGeocode,language:r}),staticmap:new xr({api:n._api.fetchGoogleStaticMap,size:a,iconUrls:o,language:r}),autocomplete:new Ar({api:n._api.fetchGoogleAutocomplete,language:r})}},n._nextPagePool=new fr({maxItemsPerPage:t.maxItemsPerPage}),n._initializeOpeningOptions(),n}S()(t,e);var n=t.prototype;return n.openPlacePopup=function(e){void 0===e&&(e={}),this.open(Object.assign(e,{isUpdateMode:!1}))},n.open=function(e){void 0===e&&(e={});var t=e,n=t.isUpdateMode,i=void 0===n||n,r=Me()(t,Nr);this.updateInitializeData(r),this._isUpdateMode=i,this._pauseDocumentEdit(),this._store.open()},n.getMaxPlaceCount=function(){return this._store.maxPlaceCount},n.isUpdateMode=function(){return this._isUpdateMode},n.hasPlaces=function(){return this._store.places.length>0},n.resolve=function(e){this._resolve&&this._resolve(e),this._resolve=null},n.close=function(){this._store.opened&&(this._initializeOpeningOptions(),this._store.close(),this._unpauseDocumentEdit())},n._initializeOpeningOptions=function(){this._resolve=null,this._isSuggestionSearching=!1,this._nextPagePool.reset()},n.editPlaces=function(e){var t=this;return new Promise(function(n){t._resolve=n,t.open(e)})},n.groupByLocation=function(e){var t={queries:[],coordinates:[]};return e.forEach(function(e){var n=e.location;n?t.coordinates.push({latitude:n.latitude,longitude:n.longitude}):t.queries.push(e.path)}),t},n.updateInitializeData=function(e){this._store.updateInitializeData(e)},n.updateAutocompleteData=function(e){this._store.updateAutocompleteData(e)},n.updateSearchData=function(e){this._store.updateSearchData(e)},n.updateIndicatorStatus=function(e){this._isSuggestionSearching=!1,this._store.updateIndicatorStatus(e)},n.updateCompData=function(e){this._store.updateCompData(e)},n.updateHighlightData=function(e){this._store.updateHighlightData(e)},n.updateEditingInfoWindowData=function(e){this._store.updateEditingInfoWindowData(e)},n.addPlaces=function(e){this._store.addPlaces(e)},n.removePlace=function(e){this._store.removePlace(e)},n.resetPlaces=function(){this._store.resetPlaces()},n.showToast=function(e){var t=this;clearTimeout(this._toastTimer),this._store.showToast(e),this._toastTimer=setTimeout(function(){t._store.hideToast()},3e3)},n.startSearching=function(){this._store.updateSearchingStatus(!0)},n.stopSearching=function(){this._store.updateSearchingStatus(!1)},n.isFullPlace=function(){return this._store.isFullPlace},n.isAddedPlace=function(e){return!!this._store.places.filter(function(t){return Object($e.a)(t.latlng,e.latlng)&&Object($e.a)(t.placeId,e.placeId)})[0]},n.isIdenticalRegionOfAddedPlace=function(e){var t=this._store.places.length>0&&this._store.places[0];return!t||e.__isDomestic===t.__isDomestic},n.isIdenticalRegion=function(e){return(e.__isDomestic?Rr.c.DOMESTIC:Rr.c.OVERSEAS)===this._store.regionType},n.fetchCoordByIp=function(){return Gt.a.get(this._api.fetchCoordByIp,{success:function(e){return e},error:function(){return null}})},n.fetchDomesticCheck=function(e){var t=e.latitude,n=e.longitude;return Gt.a.get(this._api.fetchDomesticCheck,{params:{latitude:t,longitude:n},success:function(e){return e.isLocalCoordinate},error:function(){return null}})},n.fetchDomesticBulkCheck=function(e){var t=e.map(function(e){return e.longitude+"|"+e.latitude});return Gt.a.get(this._api.fetchDomesticBulkCheck,{params:{coordinates:t},success:function(e){return e},error:function(){return null}})},n.fetchImageExif=function(e){return(e=e.filter(function(e){return!!e})).length<1?null:Gt.a.post(this._api.fetchLocationOfImages,{data:e,options:{headers:{"Content-Type":"application/json"}},success:function(e){var t=e.filter(function(e){return e.longitude&&e.latitude});return t.length?t:null},error:function(){return null}})},n.createComponent=function(e){var t=e.places,n=e.imgUrl,i=this._store.regionType,r={ctype:"placesMap",layout:jr.a.DEFAULT,thumbnail:{src:n,ctype:"thumbnail"},searchEngine:i===Rr.c.DOMESTIC?Rr.d.NAVER:Rr.d.GOOGLE,places:t};return this._componentFactory.createComponentWithCompData(r)},n.getSuggestion=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s,c,l,u,p;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isSuggestionSearching=!0,n=this._makeUniqueData(t),i=n.length,r=1===t.length?6:3,o=[],a=0;case 6:if(!(a<i)){e.next=26;break}if(s=n[a],c=s.isLocalCoordinate,l={latitude:s.latitude,longitude:s.longitude},u=void 0,!c){e.next=17;break}return e.next=14,this._fetchNaverNearBy(l);case 14:u=e.sent,e.next=20;break;case 17:return e.next=19,this._fetchGoogleNearBy(l);case 19:u=e.sent;case 20:u=Object(gr.a)(u.items,o,function(e,t){return e.placeId===t.placeId}),p=u.slice(0,r),o=[].concat(o,p);case 23:a++,e.next=6;break;case 26:return this._nextPagePool.append(o),this._itemCount=this._nextPagePool.count(),e.abrupt("return",{items:this._nextPagePool.getAt(1),pagination:{itemCount:this._nextPagePool.count(),currentPage:1}});case 29:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._makeUniqueData=function(e){var t=this._classifyUniqueLatLng(e),n=t.uniqueData,i=t.latlngDuplicatedHash;return this._rearrangeUniqueLatLng(n,i)},n._classifyUniqueLatLng=function(e){for(var t=[],n={},i=(e=Object(pr.a)(e)).length-1;i>=0;i--){for(var r=e[i],o=new naver.maps.LatLng(r.latitude,r.longitude),a=0,s=i-1;s>=0;s--){var c=e[s],l=new naver.maps.LatLng(c.latitude,c.longitude);naver.maps.EPSG3857.getDistance(o,l)<=250&&(a++,e.splice(s,1),i-=1)}t.push(r),n[r.latitude+","+r.longitude]=a}return{uniqueData:t,latlngDuplicatedHash:n}},n._rearrangeUniqueLatLng=function(e,t){if(e.length>=6){var n=[];Object(dr.a)(Object(hr.a)(t),function(e){return e[1]}).reverse().forEach(function(t){var i=t[0],r=Object(we.a)(e,function(e){var t=i.split(",");return e.lat===+t[0]&&e.lng===+t[1]}),o=e.splice(r,1);o&&o.length>0&&n.push(o[0])}),e=[].concat(n,e).slice(0,5)}return e},n._fetchGoogleNearBy=function(e){return this._providers.overseas.search.nearby(e)},n._fetchNaverNearBy=function(e){return this._providers.domestic.search.nearby(e)},n.fetchAutocomplete=function(e){return this._providers[this._store.regionType].autocomplete.autocomplete(e)},n.fetchSearchByPlaceId=function(e){return this._isSuggestionSearching=!1,this.fetchGeocode(e)},n.fetchSearch=function(e){var t=this._providers[this._store.regionType].search;return this._isSuggestionSearching=!1,t.search(e)},n.fetchNextPage=function(e){return this._isSuggestionSearching?{items:this._nextPagePool.getAt(e),pagination:{itemCount:this._nextPagePool.count(),currentPage:e}}:this._providers[this._store.regionType].search.nextpage(e)},n.fetchStaticMap=function(e){var t=e[0].__isDomestic?Rr.c.DOMESTIC:Rr.c.OVERSEAS,n=Rr.a[t],i={markers:e};return 1===e.length&&(i.zoom=n),this._providers[t].staticmap.staticmap(i)},n.fetchGeocode=function(e){return this._providers[this._store.regionType].geocode.geocode(e)},n.updateRegionType=function(e,t){t||(this._isSuggestionSearching=!1),this._store.updateRegionType(e,t)},n.isOverseas=function(){return this._store.regionType===Rr.c.OVERSEAS},n.updateJsLoadErrorStatus=function(e){this._store.updateJsLoadErrorStatus(e)},n.isJsLoadError=function(){return this._store.jsErrorStatus},n.getSupportRegion=function(){return this._store.supportRegion},t}(_.d),Br=_.G.extend({name:"PlaceLayer",view:Object(H.a)({Loader:function(){return Promise.all([n.e(77),n.e(49)]).then(n.bind(null,1346))}}),useCase:ur.a,service:Mr,store:lr.a,i18nConf:{ko:{placeLayer:{domestic:"국내",overseas:"해외",prev:"이전",next:"다음",search:"검색",loading:"로딩 중",add:"추가",cancel_btn:"취소",apply_btn:"확인",drop_pin_btn:"지도에 직접 표시",drop_pin_title:"드랍 핀",drop_pin_desc:"장소 표시를 위해 맵을 클릭해주세요.",search_input_placeholder:"장소명을 입력하세요",info_title:"원하시는 장소를 검색하거나",info_desc:"지도를 클릭해 직접 장소를 표시해 보세요.",info_title_no_result:"검색 결과가 없습니다.",info_desc_no_result:"다른 검색어로 다시 검색해 보세요.",no_selected_location:"위치는 최소 1개 이상 있어야 합니다.",no_place_name:"장소명을 입력하세요.",exceeded_max_limit:"위치는 최대 {{maxPlaceCount}}개까지 추가할 수 있습니다.",exceeded_max_limit_of_image:"하나의 장소만 선택해 주세요.",error_no_search_result:"검색 결과가 없습니다.",already_added:"이미 추가된 위치입니다.",clear_btn:"검색어 삭제",delete_place:"장소 삭제",address:"주소",info_window_placeholder:"장소명",exceeded_max_place_name:"최대 {{maxPlaceNameLength}}자까지 입력이 가능합니다."}},en:{placeLayer:{domestic:"Domestic",overseas:"Overseas",prev:"Previous",next:"Next",search:"Search",loading:"Loading",add:"Add",cancel_btn:"Cancel",apply_btn:"Apply",drop_pin_btn:"Drop Pin",drop_pin_title:"Drop Pin.",drop_pin_desc:"Click the map to mark the place directly.",search_input_placeholder:"Search for a location",info_title:"Search for a location.",info_desc:"or drop your own pin on the map.",info_title_no_result:"No result found.",info_desc_no_result:"Please try with another keyword.",no_selected_location:"Please add at least 1 location.",no_place_name:"Please enter a location name.",exceeded_max_limit:"You can add up to {{maxPlaceCount}} locations.",exceeded_max_limit_of_image:"Please select 1 location.",error_no_search_result:"No result found.",already_added:"This location already has been added.",clear_btn:"clear input value",delete_place:"delete place",address:"Address",info_window_placeholder:"Location name",exceeded_max_place_name:"You can insert up to {{maxPlaceNameLength}} characters."}},fr:{placeLayer:{domestic:"Domestique",overseas:"Outre-mer",prev:"Précédent",next:"Suivant",search:"Recherche",loading:"Chargement",add:"Ajouter",cancel_btn:"Annuler",apply_btn:"[T]Apply",drop_pin_btn:"[T]Drop Pin",drop_pin_title:"[T]Drop Pin.",drop_pin_desc:"[T]Click the map to mark the place directly.",search_input_placeholder:"[T]Search for a location",info_title:"[T]Search for a location.",info_desc:"[T]or drop your own pin on the map.",info_title_no_result:"Aucun résultat trouvé.",info_desc_no_result:"[T]Please try with another keyword.",no_selected_location:"[T]Please add at least 1 location.",no_place_name:"[T]Please enter a location name.",exceeded_max_limit:"[T]You can add up to {{maxPlaceCount}} locations.",exceeded_max_limit_of_image:"[T]Please select 1 location.",already_added:"[T]This location already has been added.",error_no_search_result:"Aucun résultat trouvé.",clear_btn:"[T]clear input value",delete_place:"[T]delete place",address:"[T]Address",info_window_placeholder:"[T]Location name",exceeded_max_place_name:"Vous pouvez insérer jusqu'à {{maxPlaceNameLength}} caractères."}}}}),Wr=n(416),Ur=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){this._pauseDocumentEdit(),this._store.open()},n.close=function(){this._store.close(),this._unpauseDocumentEdit()},t}(_.d),Fr=n(417),zr=_.G.extend({name:"FileUploadLayer",view:Object(H.a)({Loader:function(){return n.e(38).then(n.bind(null,1322))}}),useCase:Wr.a,service:Ur,store:Fr.a}),Vr=n(419),Gr=n(418),Hr=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){this._store.opened||(this._pauseDocumentEdit(),this._store.open())},n.close=function(){this._store.close(),this._unpauseDocumentEdit()},t}(_.d),qr=_.G.extend({name:"PaidPhotoNotificationLayer",view:Object(H.a)({Loader:function(){return n.e(39).then(n.bind(null,1323))}}),useCase:Gr.a,service:Hr,store:Vr.a}),Jr=n(251),Kr=n(1311),Xr=n(191),Yr=n(411),Qr=(Di=Object(te.history)({sync:!1}),Ai=Object(te.history)({sync:!1}),ji=Object(te.history)({sync:!1,transaction:!0}),Ri=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=_.W.get("configAgent"),t._insertMenuLayoutService=_.W.get("insertMenuLayoutService"),t._imageUploadService=_.W.get("imageUploadService"),t._horizontalLineComponentService=_.W.get("horizontalLineComponentService"),t._quotationComponentService=_.W.get("quotationComponentService"),t._editingService=_.W.get("editingService"),t._stickerPanelLayoutService=_.W.get("stickerPanelLayoutService"),t._imageTypeLayerService=_.W.get("imageTypeLayerService"),t._componentListStore=_.W.get("componentListStore"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._imageBehavior=_.W.get("imageBehavior"),t._complexImageLayoutsEnabled=t._configAgent.get("productConfig.complexImageLayoutsEnabled"),t._documentToolbarLayoutService=_.W.get("documentToolbarLayoutService"),t._panelContainerLayerService=_.W.get("panelContainerLayerService"),t._libraryPanelLayoutService=_.W.get("libraryPanelLayoutService")||{close:function(){}},t._templatePanelLayoutService=_.W.get("templatePanelLayoutService")||{close:function(){}},t._searchPanelLayoutService=_.W.get("searchPanelLayoutService")||{close:function(){}},t._helpPanelLayoutService=_.W.get("helpPanelLayoutService")||{close:function(){}},t._documentService=_.W.get("documentService"),t._aiLayerService=_.W.get("aiLayerService"),t._aiHistoryService=_.W.get("aiHistoryService"),t._selectionService=_.W.get("selectionService"),t._aiBannerLayoutService=_.W.get("aiBannerLayoutService"),t._specialLetterLayerService=_.W.get("specialLetterLayerService"),t._panelContainerLayerService=_.W.get("panelContainerLayerService"),t._helpPanelLayoutService=_.W.get("helpPanelLayoutService"),t._canvasScrollingService=_.W.get("canvasScrollingService"),t}S()(t,e);var n=t.prototype;return n.openInsertMenu=function(){this._insertMenuLayoutService.open()},n.closeInsertMenu=function(){this._insertMenuLayoutService.close()},n.updateActivatedButtonKey=function(e){this._insertMenuLayoutService.updateActivatedKey(e)},n.handlePanelButtonClick=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,i=t.value,this._insertMenuLayoutService.close(),e.t0=n,e.next="image"===e.t0?5:"sticker"===e.t0?8:"horizontalLine"===e.t0?10:"quotation"===e.t0?12:"ai-write"===e.t0?14:16;break;case 5:return e.next=7,this._insertImages();case 7:return e.abrupt("break",16);case 8:return this._toggleStickerPanel(),e.abrupt("break",16);case 10:return this._insertHorizontalLine(i),e.abrupt("break",16);case 12:return this._insertQuotation(i),e.abrupt("break",16);case 14:return this._openAiLayer(i),e.abrupt("break",16);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._toggleStickerPanel=function(){this._libraryPanelLayoutService.close(),this._templatePanelLayoutService.close(),this._searchPanelLayoutService.close(),this._helpPanelLayoutService.close(),!0===this._stickerPanelLayoutService.togglePanel()?(this._documentToolbarLayoutService.setPanelButtonEnable("sticker",!0),this._panelContainerLayerService.openPanel("sticker")):(this._panelContainerLayerService.closePanel(),this._documentToolbarLayoutService.setPanelButtonEnable("sticker",!1))},n._insertQuotation=function(e){var t=this._quotationComponentService.createWithLayout(e);this._editingService.insert({sourceComponents:[t]}),this._documentToolbarLayoutService.updateQuotationSelectedValue(t.layout)},n._insertHorizontalLine=function(e){var t=this._horizontalLineComponentService.createComponent({layout:e});this._editingService.insert({sourceComponents:[t]}),this._documentToolbarLayoutService.updateHorizontalSelectedValue(t.layout)},n._insertImages=function(){var e=Tt()(It.a.mark(function e(){var t,n,i,r,o,a,s,c;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog({multiple:!0});case 2:if(t=e.sent,n=t.validFiles,i=n.length,r=this._selectionInfoStore.focus,o=r.compId,a=r.unitId,s=this._componentListStore.getComponentById(o),c=s.getStoreById(a),"inline-image-allowed-append"!==c.attributes.insertion||"child"!==c.selection){e.next=13;break}return e.next=12,this._insertInlineImages(t);case 12:return e.abrupt("return",e.sent);case 13:if(!this._canUseComplexLayouts(i)){e.next=15;break}return e.abrupt("return",this._imageTypeLayerService.open({type:Yr.a.FILE,payload:Re()({},t,{length:i})}));case 15:return e.next=17,this._insertImageComponents(t);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._insertImageComponents=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageBehavior.insertImage(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._insertInlineImages=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageBehavior.insertInlineImage(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._canUseComplexLayouts=function(e){return e>1&&this._complexImageLayoutsEnabled},n._openAiLayer=function(){var e=this;this._prepareModalOpen();var t=this._aiLayerService.resolveStep();return t===Xr.a.TOOLBOX?(this._aiLayerService.cursorAtWritingTarget&&this._selectionService.selectCurrentParagraph(),this._aiHistoryService.resetHistory(),this._aiHistoryService.pushWholeState(),this._canvasScrollingService.scrollToAdjustedCursor().then(function(){return e._aiLayerService.open(t)})):this._aiLayerService.open(t)},n._prepareModalOpen=function(){var e=this._panelContainerLayerService.getTarget();this._documentToolbarLayoutService.setPanelButtonEnable(e,!1),this._helpPanelLayoutService.close(),this._helpPanelLayoutService.closeLayer(),this._specialLetterLayerService.close(),this._panelContainerLayerService.closePanel(),this._aiBannerLayoutService.open()},t}(_.m),k()(Ri.prototype,"openInsertMenu",[D.d],Object.getOwnPropertyDescriptor(Ri.prototype,"openInsertMenu"),Ri.prototype),k()(Ri.prototype,"closeInsertMenu",[D.d],Object.getOwnPropertyDescriptor(Ri.prototype,"closeInsertMenu"),Ri.prototype),k()(Ri.prototype,"handlePanelButtonClick",[te.preventOnComponentProcessing],Object.getOwnPropertyDescriptor(Ri.prototype,"handlePanelButtonClick"),Ri.prototype),k()(Ri.prototype,"_toggleStickerPanel",[D.d],Object.getOwnPropertyDescriptor(Ri.prototype,"_toggleStickerPanel"),Ri.prototype),k()(Ri.prototype,"_insertQuotation",[D.d,te.history],Object.getOwnPropertyDescriptor(Ri.prototype,"_insertQuotation"),Ri.prototype),k()(Ri.prototype,"_insertHorizontalLine",[D.d,te.history],Object.getOwnPropertyDescriptor(Ri.prototype,"_insertHorizontalLine"),Ri.prototype),k()(Ri.prototype,"_insertImages",[D.d],Object.getOwnPropertyDescriptor(Ri.prototype,"_insertImages"),Ri.prototype),k()(Ri.prototype,"_insertImageComponents",[D.d,Di],Object.getOwnPropertyDescriptor(Ri.prototype,"_insertImageComponents"),Ri.prototype),k()(Ri.prototype,"_insertInlineImages",[D.d,Ai],Object.getOwnPropertyDescriptor(Ri.prototype,"_insertInlineImages"),Ri.prototype),k()(Ri.prototype,"_openAiLayer",[te.preventOnDocumentProcessing,D.d,ji],Object.getOwnPropertyDescriptor(Ri.prototype,"_openAiLayer"),Ri.prototype),Ri),Zr=n(23),$r=n(75),eo=n(221),to=n(134),no={top:0,left:0,height:0,width:0},io=(Ni=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"activated",Mi,P()(n)),L()(n,"visibility",Bi,P()(n)),L()(n,"top",Wi,P()(n)),L()(n,"left",Ui,P()(n)),L()(n,"height",Fi,P()(n)),L()(n,"width",zi,P()(n)),L()(n,"opened",Vi,P()(n)),L()(n,"forceRenderFlag",Gi,P()(n)),L()(n,"activatedKey",Hi,P()(n)),n.panels=y.getDefinitions(["image","sticker","horizontalLine","quotation"]);var i=t.state,r=void 0===i?{}:i;return n._domAccessor=_.W.get("domAccessor"),n._componentListStore=_.W.get("componentListStore"),n._selectionInfoStore=_.W.get("selectionInfoStore"),n._dragAndDropStore=_.W.get("dragAndDropStore"),n._configAgent=_.W.get("configAgent"),n.panels=n._refinePanels(r),n.activated=Object(x.a)(r,"activated",n.activated),n.visibility=Object(x.a)(r,"visibility",n.visibility),n.opened=Object(x.a)(r,"opened",n.opened),n.top=Object(x.a)(r,"top",n.top),n.left=Object(x.a)(r,"left",n.left),n.height=Object(x.a)(r,"height",n.height),n.width=Object(x.a)(r,"width",n.width),n._prevClientRects=[],n._prevScrollTop=0,n._needToForceUpdate=!1,n}S()(t,e);var n=t.prototype;return n.moveTo=function(e,t){if(void 0===t&&(t=0),this._isDragging())this.hide();else{if(this._needToForceUpdate=this._isNeedToForceUpdate(e,t),this._prevScrollTop=t,this._prevClientRects=e,this._isCollapsed()&&this._isTypeFollowCursor()){var n=Object($r.a)(e);this._isComponentMoveTo(n.top)&&this.hide(),this._setTopAtMiddle(n)}else{var i=this._getComponentClientRect();this._setTopAtBottom(i)}this._checkVisibility(),this.opened&&this.close()}},n._isNeedToForceUpdate=function(e,t){return!this._hasPrevClientRects()||this._isFocusedAfterCollapse(e)||this._isMovedAsUpOrDown(e,t)},n._hasPrevClientRects=function(){return this._prevClientRects.length>=1},n._isFocusedAfterCollapse=function(e){return this._prevClientRects.length>1&&1===e.length},n._isMovedAsUpOrDown=function(e,t){return this._prevClientRects[0].top+t!==e[0].top+this._prevScrollTop},n._isTypeFollowCursor=function(){var e=this.activateComponentType();return["text","sectionTitle"].includes(e)},n._isComponentMoveTo=function(e){return Math.abs(e-this.top)>150},n._checkVisibility=function(){this.isVisibility()?this.show():this.hide()},n._getComponentClientRect=function(){var e=this._selectionInfoStore.start,t=this._domAccessor.getComponentElement(e.compId);if(!t)return no;var n=t.getBoundingClientRect(),i=n.top,r=n.height;return{top:i,left:n.left,height:r,width:n.width}},n._setTopAtMiddle=function(e){var t=e.top,n=e.height,i=e.left,r=e.width,o=parseFloat(t),a=parseFloat(n);this.top=o+a/2,this.left=parseFloat(i),this.width=parseFloat(r),this.height=a,this._forceUpdate()},n._setTopAtBottom=function(e){var t=e.top,n=e.height,i=e.left,r=e.width,o=parseFloat(t),a=parseFloat(n);this.top=o+a,this.left=parseFloat(i),this.width=parseFloat(r),this.height=a,this._forceUpdate()},n._forceUpdate=function(){if(!this._needToForceUpdate)return!1;this._needToForceUpdate=!1,this.forceRenderFlag=1e5*Math.random()},n.show=function(){this.visibility=!0},n.hide=function(){this.visibility=!1},n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},n._isSingleCompMode=function(){return this._selectionInfoStore.mode===_.P.SINGLE_COMP},n._isCollapsed=function(){return this._selectionInfoStore.collapsed},n._isDragging=function(){return"dragging"===this._dragAndDropStore.progress},n.activateComponentType=function(){var e=this._selectionInfoStore.toValidJSON(),t=this._componentListStore.getSelectedComponents(e);return Object(At.a)(t).ctype},n.isVisibility=function(){return!this._isDragging()&&("documentTitle"!==this.activateComponentType()&&(this._isSingleCompMode()||this._isCollapsed()))},n.updateActivatedKey=function(e){this.activatedKey=e},n._refinePanels=function(e){var t=Object(x.a)(e,"panels",this.panels);if((this._configAgent.get("plugins.excludeComponents")||[]).forEach(function(e){Object(eo.a)(t,e)&&delete t[e]}),this.aiActive){var n=y.getDefinitions([p])||{};t=Re()({},n,t)}return this._refineQuotationSubPanels(t),t},n._refineQuotationSubPanels=function(e){var t=this._configAgent.get("productConfig.quotation.layouts");if(t){var n=Object(to.a)(Object(x.a)(e,"quotation.panels"),t);Object(Zr.a)(e,"quotation.panels",n)}},B()(t,[{key:"aiActive",get:function(){return!!this._configAgent.get("productConfig.aiAssistant")}}]),t}(_.w),Mi=k()(Ni.prototype,"activated",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bi=k()(Ni.prototype,"visibility",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wi=k()(Ni.prototype,"top",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ui=k()(Ni.prototype,"left",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fi=k()(Ni.prototype,"height",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),zi=k()(Ni.prototype,"width",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vi=k()(Ni.prototype,"opened",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gi=k()(Ni.prototype,"forceRenderFlag",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hi=k()(Ni.prototype,"activatedKey",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ni),ro=n(55),oo=n.n(ro),ao=(qi=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e,t=this.props,n=t.panel,i=t.i18n,r=t.index,o=R()(((e={"se-insert-menu-sub-panel-button":!0})["se-insert-menu-sub-panel-button-"+n.name+"-"+r]=!0,e));return D.b.createElement("li",{className:"se-insert-menu-sub-panel-item",key:r},D.b.createElement("button",{type:"button",className:o,onClick:this._handleSubPanelBtnClick},D.b.createElement("span",{className:"se-blind"},i(n.label))))},n._handleSubPanelBtnClick=function(e){var t=this.props,n=t.handleSubPanelClick,i=t.panel,r=t.index;n(i.name,r,e)},t}(D.b.Component),k()(qi.prototype,"_handleSubPanelBtnClick",[te.autobind],Object.getOwnPropertyDescriptor(qi.prototype,"_handleSubPanelBtnClick"),qi.prototype),qi);ao.propTypes={index:D.a.string.isRequired,handleSubPanelClick:D.a.func.isRequired,panel:D.a.object.isRequired,i18n:D.a.func.isRequired};var so=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this._renderSubPanel(this.props.panels),t=this._subPanelClassName(this.props.name);return D.b.createElement("ul",{className:t},e)},n._subPanelClassName=function(e){var t;return R()(((t={"se-insert-menu-sub-panel":!0})["se-insert-menu-sub-panel-"+e]=!0,t))},n._renderSubPanel=function(e){var t=this.props,n=t.handleSubPanelClick,i=t.i18n;return Object(Pn.a)(e,function(e,t){return D.b.createElement(ao,{key:t,index:t,handleSubPanelClick:n,panel:e,i18n:i})})},t}(D.b.Component);so.defaultProps={panels:{},name:"",handleSubPanelClick:function(){}},so.propTypes={panels:D.a.shape({}),name:D.a.string,handleSubPanelClick:D.a.func,i18n:D.a.func.isRequired};var co,lo=Object(N.b)(so),uo=n(294),po=n(245),ho=n(111),go=(co=function(e){function t(t){var n;return(n=e.call(this,t)||this).handlerPanelMouseOver=n.props.handlePanelMouseOver.bind(P()(n)),n.handlerPanelClick=n.props.handlePanelClick.bind(P()(n)),n}S()(t,e);var n=t.prototype;return n.render=function(){var e=this._renderPanel(this.props.panels);return D.b.createElement("ul",{className:"se-insert-menu-panel",ref:this._ref},e)},n._ref=function(e){this._insertMenuPanels=e},n._renderPanel=function(e){var t=this,n=this.props,i=n.i18n,r=n.store.activatedKey;return Object(Pn.a)(e,function(e,n){var o,a,s=e.disabled,c=void 0!==s&&s,l=R()(((o={"se-insert-menu-button":!0})["se-insert-menu-button-"+e.name]=!0,o)),u=R()(((a={"se-insert-menu-item":!0})["se-insert-menu-item-"+e.name]=!0,a["se-is-activated"]=r===n&&!c,a)),p=t._resolveAiTooltip(e),d=t._resolveInsertMenuSubPanel(e);return D.b.createElement("li",{className:u,key:n},D.b.createElement(uo.a,{type:"button",className:l,"data-log":e.logId,"data-group":"insertMenu","data-key":n,"data-name":e.name,onMouseOver:t.handlerPanelMouseOver,onClick:t.handlerPanelClick,disabled:c},D.b.createElement("span",{className:"se-insert-menu-button-label"},i(e.label))),p,d)})},n._resolveAiTooltip=function(e){var t=this.props.store.opened;if(e.name===p&&t){var n=u.a.IS_IE?ho.o.INSERT_FOR_UNSUPPORTED_BROWSER:ho.o.INSERT_FOR_USABLE_AI;return D.b.createElement(po.a,{type:n})}return null},n._resolveInsertMenuSubPanel=function(e){var t=this.props,n=t.handleSubPanelClick,i=t.i18n;return Object(Ze.a)(e.panels)?null:D.b.createElement(lo,oo()({},e,{i18n:i,handleSubPanelClick:n}))},t}(D.b.Component),k()(co.prototype,"_ref",[te.autobind],Object.getOwnPropertyDescriptor(co.prototype,"_ref"),co.prototype),co);go.defaultProps={panels:{},handlePanelClick:function(){},handleSubPanelClick:function(){}},go.propTypes={panels:D.a.shape({}),handlePanelClick:D.a.func,handleSubPanelClick:D.a.func,i18n:D.a.func.isRequired};var fo,mo=Object(N.b)(go),yo=(fo=function(e){function t(){var t;return(t=e.call(this)||this)._wrapperRef=D.b.createRef(),t.state={isMenuInverted:!1},t.count=1,t}S()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){Kr.a.on("click",this._handleOutsideClick)},n.componentDidMount=function(){this.parentNode=this._getWrapperElement().parentNode},n.componentWillUnmount=function(){Kr.a.off("click",this._handleOutsideClick)},n.render=function(){var e=this.props,t=e.i18n,n=e.store,i=e.useCase;if(!n.visibility)return null;var r=this._wrapperClassName(),o={top:this._getTopPosition()},a=n.panels;return D.b.createElement("div",{className:r,style:o,ref:this._wrapperRef,"data-update-flag":n.forceRenderFlag},D.b.createElement(D.b.Fragment,null,D.b.createElement("div",{className:"se-insert-point-marker-button",onClick:this._handleToggleMarker},D.b.createElement("span",{className:"se-insert-point-marker-icon"}),D.b.createElement("span",{className:"se-blind"},t("insertMenuLayout:insert_point_marker_description"))),D.b.createElement(mo,{panels:a,handlePanelMouseOver:this._handlePanelMouseOver,handlePanelClick:this._handlePanelClick,handleSubPanelClick:this._handleSubPanelClick,i18n:t,useCase:i,store:n})))},n._getWrapperElement=function(){return this._wrapperRef.current},n._getTopPosition=function(){return this.props.store.top-this._getParentTop()+this._getParentScrollTop()},n._getParentTop=function(){return this.parentNode?this.parentNode.getBoundingClientRect().top:0},n._getParentScrollTop=function(){return this.parentNode?this.parentNode.scrollTop:0},n._wrapperClassName=function(){var e=this.state.isMenuInverted,t=this.props.store,n=t.visibility,i=t.opened,r=t.aiActive;return R()({"se-insert-menu":!0,"se-insert-menu-ai":r,"se-insert-menu-invert":e,"se-is-activated":i,"se-is-hidden":!n,"se-is-not-support-ai":r&&u.a.IS_IE})},n._handleToggleMarker=function(e){var t=this.props,n=t.store,i=t.minMarginBottom,r=t.logAreaId;if(n.opened)this.props.useCase.closeInsertMenu(),Be.a.log(e.nativeEvent,r+".close");else{var o=this._getMarginBottomAtContent()<i;this.setState({isMenuInverted:o}),this.props.useCase.openInsertMenu(),Be.a.log(e.nativeEvent,r+".open")}},n._handlePanelClick=function(e,t){void 0===t&&(t="default");var n=this.props,i=n.store,r=n.logAreaId,o=e.currentTarget.dataset.name,a=i.panels[o];a&&"default"===a.type&&(this.props.useCase.handlePanelButtonClick({name:o,value:t}),Be.a.log(e.nativeEvent,r+"."+a.logId))},n._handlePanelMouseOver=function(e){var t=e.currentTarget.dataset.key;this.props.useCase.updateActivatedButtonKey(t)},n._handleSubPanelClick=function(e,t,n){void 0===t&&(t="default");var i=this.props,r=i.store,o=i.logAreaId,a=r.panels[e].panels[t];this.props.useCase.handlePanelButtonClick({name:e,value:t}),Be.a.log(n.nativeEvent,o+"."+a.logId)},n._handleOutsideClick=function(e){var t=e.target,n=this.props.store.opened,i=Jr.a.isOutsideElementbySelector(t,".se-insert-menu");n&&i&&this.props.useCase.closeInsertMenu()},n._getMarginBottomAtContent=function(){var e=_.W.get("domAccessor").getScrollTarget(),t=this._getWrapperElement();return parseFloat(e.scrollTop+e.clientHeight)-parseFloat(t.offsetTop)},t}(D.b.Component),k()(fo.prototype,"_handleToggleMarker",[te.autobind],Object.getOwnPropertyDescriptor(fo.prototype,"_handleToggleMarker"),fo.prototype),k()(fo.prototype,"_handlePanelClick",[te.autobind],Object.getOwnPropertyDescriptor(fo.prototype,"_handlePanelClick"),fo.prototype),k()(fo.prototype,"_handlePanelMouseOver",[te.autobind],Object.getOwnPropertyDescriptor(fo.prototype,"_handlePanelMouseOver"),fo.prototype),k()(fo.prototype,"_handleSubPanelClick",[te.autobind],Object.getOwnPropertyDescriptor(fo.prototype,"_handleSubPanelClick"),fo.prototype),k()(fo.prototype,"_handleOutsideClick",[te.autobind],Object.getOwnPropertyDescriptor(fo.prototype,"_handleOutsideClick"),fo.prototype),fo);yo.defaultProps={children:null,i18n:function(e){return e},minMarginBottom:400,logAreaId:"ipt"},yo.propTypes={children:D.a.oneOfType([D.a.arrayOf(D.a.element),D.a.element]),i18n:D.a.func,useCase:D.a.instanceOf(Qr).isRequired,store:D.a.instanceOf(io).isRequired,minMarginBottom:D.a.number,logAreaId:D.a.string};var vo,_o,bo,So,Co,Io,Oo,To,Lo=Object(N.b)(yo),Eo=function(e){function t(t){var n;return(n=e.call(this,t)||this)._virtualEditable=_.W.get("virtualEditable"),n}S()(t,e);var n=t.prototype;return n.open=function(){this.moveTo(),this._store.open()},n.moveTo=function(e){void 0===e&&(e=this._virtualEditable.getClientRects());var t=_.W.get("domAccessor").getScrollTarget().scrollTop;this._store.moveTo(e,t)},n.close=function(){this.moveTo(),this._store.close(),this.updateActivatedKey(null)},n.updateActivatedKey=function(e){this._store.updateActivatedKey(e)},t}(_.f),Po=_.H.extend({name:"InsertMenuLayout",view:Lo,useCase:Qr,service:Eo,store:io}),wo=(vo=D.e.struct,_o=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"activeButtonId",bo,P()(n)),L()(n,"buttonSet",So,P()(n)),L()(n,"toolbarState",Co,P()(n)),L()(n,"refreshCount",Io,P()(n)),n._configAgent=_.W.get("configAgent"),n._pluginButtonRegistry=_.W.get("pluginButtonRegistry"),n._selectionInfoStore=_.W.get("selectionInfoStore");var i=t.state,r=void 0===i?{}:i;return n.buttonSet=Object(x.a)(r,"buttonSet",n.buttonSet),n.activeButtonId=Object(x.a)(r,"activeButtonId",n.activeButtonId),n.toolbarState=Object(x.a)(r,"toolbarState",n.toolbarState),n.useColorDetailFlag=!1!==n._configAgent.get("modules.colorPicker.config.useDetail"),n}S()(t,e);var n=t.prototype;return n.refresh=function(){this.refreshCount=(this.refreshCount+1)%1e3},n.deactivateAllButtons=function(){this.activeButtonId=""},n.toggleButton=function(e){var t=this.activeButtonId===e;this.activeButtonId=t?"":e},n.filterButtons=function(e){var t=this;return tt.a.trimForArray(e.filter(function(e){var n=t._pluginButtonRegistry.getButtonStyleName({compType:t.toolbarState.componentType,toolbarName:"contextToolbar",buttonName:e});return!t.disabledButtons.includes(n)}),"separator-bar")},n.highlight=function(e,t){if(e&&t)return We.b.get(t,e)},n.updateHighlight=function(e){var t=this._configAgent.get("productConfig.highlight"),n=this.highlight(e.buttonName,t);n&&(e.highlight=n)},n.updateUserConfig=function(e){var t=e.compType,n=e.toolbarName,i=e.buttonName,r="plugins.componentSettings."+t+".config.toolbar."+n+"."+Object(et.a)(i);e.buttonConfig=this._configAgent.get(r),"font-color"!==i&&"background-color"!==i&&"cell-background-color"!==i&&"table-border"!==i||(e.useColorDetailFlag=this.useColorDetailFlag)},n.updateButtonSet=function(e){this.buttonSet.replace(e)},n.updateToolbarState=function(e){this.toolbarState=e},n.hide=function(){this._reset()},n._reset=function(){this.buttonSet.replace([])},B()(t,[{key:"disabledButtons",get:function(){var e=this;return["speller","translation"].filter(function(t){return!1===e._configAgent.get("productConfig."+t)})}},{key:"buttons",get:function(){var e=this,t=this.toolbarState.componentType;return this.filterButtons(this.buttonSet).map(function(n){var i=e._pluginButtonRegistry.getButtonInfo({compType:t,toolbarName:"contextToolbar",buttonName:n});return e.updateUserConfig(i),e.updateHighlight(i),Re()({value:Object(x.a)(e.toolbarState,i.propertyName)},i)})}},{key:"toolbarName",get:function(){return this.toolbarState.componentType}},{key:"isActivated",get:function(){var e=this._configAgent.get("productConfig.contextToolbar");if("object"==typeof e){var t=Object(x.a)(e,"allowComponents"),n=this.toolbarState.componentType;if(t&&t.length>0&&!t.includes(n))return!1}var i=Object(x.a)(this.toolbarState,"selectedUnitIds");return!(!i||2!==i.length)&&(i[0]===i[1]&&this.buttonSet.length>0)}}]),t}(_.w),bo=k()(_o.prototype,"activeButtonId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),So=k()(_o.prototype,"buttonSet",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Co=k()(_o.prototype,"toolbarState",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Io=k()(_o.prototype,"refreshCount",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k()(_o.prototype,"disabledButtons",[D.e],Object.getOwnPropertyDescriptor(_o.prototype,"disabledButtons"),_o.prototype),k()(_o.prototype,"buttons",[vo],Object.getOwnPropertyDescriptor(_o.prototype,"buttons"),_o.prototype),k()(_o.prototype,"toolbarName",[D.e],Object.getOwnPropertyDescriptor(_o.prototype,"toolbarName"),_o.prototype),k()(_o.prototype,"isActivated",[D.e],Object.getOwnPropertyDescriptor(_o.prototype,"isActivated"),_o.prototype),_o),ko=(Oo=function(e){function t(){var t;return(t=e.call(this)||this)._contextToolbarLayoutService=_.W.get("contextToolbarLayoutService"),t._toolbarService=_.W.get("toolbarService"),t._initializeReaction(),t}S()(t,e);var n=t.prototype;return n._initializeReaction=function(){var e=this;this._toolbarService.reactionOfToolbarState(function(t){var n=t.toolbarState,i=t.buttonSet;e._contextToolbarLayoutService.updateButtonSet(i),e._contextToolbarLayoutService.updateToolbarState(n)},"contextToolbar",{delay:7,compareStructural:!1})},n.toggleButton=function(e){this._contextToolbarLayoutService.toggleButton(e)},t}(_.m),k()(Oo.prototype,"toggleButton",[D.d],Object.getOwnPropertyDescriptor(Oo.prototype,"toggleButton"),Oo.prototype),Oo),xo=(To=function(e){function t(t){var n;return(n=e.call(this,t)||this)._domAccessor=_.W.get("domAccessor"),n._contextToolbar=document.createElement("div"),n._toolbarSlot=null,n}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._removeContextToolbar(),this._appendContextToolbar()},n.componentDidUpdate=function(){this._removeContextToolbar(),this._appendContextToolbar()},n.componentWillUnmount=function(){this._removeContextToolbar()},n.render=function(){var e=this.props,t=e.i18n,n=e.store,i=n.buttons,r=n.isActivated;n.refreshCount;if(!1===r)return null;var o=this._resolveToolbarClassName();return D.c.createPortal(D.b.createElement(Qe,{className:o,namespace:Ae.e.CONTEXT,i18n:t,buttons:i,logAreaId:"ct",activeButtonId:n.activeButtonId,onClickSelector:this._handleClickSelector}),this._contextToolbar)},n._handleClickSelector=function(e){this.props.useCase.toggleButton(e)},n._appendContextToolbar=function(){this._toolbarSlot=this._getToolbarSlot(),this._toolbarSlot&&(this._toolbarSlot.style.display="block",this._toolbarSlot.appendChild(this._contextToolbar),this.props.isFlexible&&this._resolveWrapperFlexibleStyle(this._toolbarSlot))},n._removeContextToolbar=function(){this._toolbarSlot&&this._toolbarSlot.hasChildNodes()&&(this._toolbarSlot.style.display="none",this._toolbarSlot.removeChild(this._contextToolbar))},n._resolveToolbarClassName=function(){var e=this.props.store,t=e.toolbarName,n=e.toolbarState;return R()("se-toolbar","se-context-toolbar","se-context-toolbar-"+t,n.selectedUnitIds,"__se-context-toolbar")},n._resolveWrapperFlexibleStyle=function(e){var t=e.querySelector(".__se-context-toolbar");if(t){var n=this._isRefineded();t.classList[n?"add":"remove"]("se-context-toolbar-edge")}},n._getToolbarSlot=function(){var e=this._getSelectedUnitId();return _.W.get("domAccessor").findToolbarSlot(e)},n._getSelectedUnitId=function(){var e=this.props.store.toolbarState.selectedUnitIds;if(e)return e[0]},n._isRefineded=function(){var e=this._getToolbarSlot();if(!e)return!1;var t=e.querySelector(".__se-context-toolbar"),n=e.closest(".__se-unit");if(!t||!n)return!1;var i=t.offsetWidth;return n.offsetWidth<i},t}(D.b.Component),k()(To.prototype,"_handleClickSelector",[te.autobind],Object.getOwnPropertyDescriptor(To.prototype,"_handleClickSelector"),To.prototype),To);xo.defaultProps={i18n:function(e){return e}},xo.propTypes={i18n:D.a.func,store:D.a.instanceOf(wo).isRequired,useCase:D.a.instanceOf(ko).isRequired,isFlexible:D.a.bool};var Do,Ao,jo,Ro,No,Mo,Bo,Wo,Uo=Object(N.b)(xo),Fo=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.toggleButton=function(e){this._store.toggleButton(e)},n.hideAllLayers=function(){this._store.deactivateAllButtons()},n.updateToolbarState=function(e){this._store.updateToolbarState(e)},n.updateButtonSet=function(e){this._store.updateButtonSet(e)},n.refresh=function(){this._store.refresh()},n.hide=function(){this._store.hide()},t}(_.f),zo=_.H.extend({name:"ContextToolbarLayout",view:Uo,useCase:ko,service:Fo,store:wo,setting:{config:{},state:{}}}),Vo=(Do=D.e.struct,Ao=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"activeButtonId",jo,P()(n)),L()(n,"position",Ro,P()(n)),L()(n,"buttonSet",No,P()(n)),L()(n,"toolbarState",Mo,P()(n));var i=t.state,r=void 0===i?{}:i;return n._configAgent=_.W.get("configAgent"),n._pluginButtonRegistry=_.W.get("pluginButtonRegistry"),n._storage=_.W.get("storagePolicy"),n.activeButtonId=Object(x.a)(r,"activeButtonId",n.activeButtonId),n.position=Object(x.a)(r,"position",n.position),n.buttonSet=Object(x.a)(r,"buttonSet",n.buttonSet),n.toolbarState=Object(x.a)(r,"toolbarState",n.toolbarState),n.useColorDetailFlag=!1!==n._configAgent.get("modules.colorPicker.config.useDetail"),n.showBottom=!0===n._configAgent.get("productConfig.contentsToolbar.showBottom"),n}S()(t,e);var n=t.prototype;return n.deactivateAllButtons=function(){this.activeButtonId=""},n.toggleButton=function(e){var t=this.activeButtonId===e;this.activeButtonId=t?"":e},n.filterButtons=function(e){var t=this;return tt.a.trimForArray(e.filter(function(e){var n=t._pluginButtonRegistry.getButtonStyleName({compType:t.toolbarState.componentType,toolbarName:"contentsToolbar",buttonName:e});return!t.disabledButtons.includes(n)}),"separator-bar")},n.highlight=function(e,t){if(e&&t){var n=We.b.get(t,e);return n&&(n.tooltip=!1),n}},n.updateHighlight=function(e){var t=this._configAgent.get("productConfig.highlight"),n=this.highlight(e.buttonName,t);n&&(e.highlight=n)},n.updateUserConfig=function(e){var t=e.compType,n=e.toolbarName,i=e.buttonName,r="plugins.componentSettings."+t+".config.toolbar."+n+"."+Object(et.a)(i);e.buttonConfig=this._configAgent.get(r),"font-color"!==i&&"background-color"!==i&&"cell-background-color"!==i&&"table-border"!==i||(e.useColorDetailFlag=this.useColorDetailFlag)},n.updateStoragePolicy=function(e){if(e&&e.option&&e.option.storagePolicy){var t=e.option.storagePolicy,n=t.key,i=t.property,r=this._storage.get(n);e.option[i]=r,e.storageKey=n}},n.changeToolbarPosition=function(e){this.position.top=e.top||0,this.position.left=e.left||0,"boolean"==typeof e.collapsed&&(this.position.collapsed=e.collapsed)},n.updateToolbarState=function(e){this.toolbarState=e},n.updateButtonSet=function(e){this.buttonSet.replace(e)},B()(t,[{key:"disabledButtons",get:function(){var e=this,t=["speller","translation"].filter(function(t){return!1===e._configAgent.get("productConfig."+t)}),n=this._configAgent.get("plugins.excludeComponents");return n&&n.includes("quotation")&&t.push("to-quotation"),t}},{key:"buttons",get:function(){var e=this;return this.filterButtons(this.buttonSet).map(function(t){var n=e._pluginButtonRegistry.getButtonInfo({compType:e.toolbarState.componentType,toolbarName:"contentsToolbar",buttonName:t});return e.updateUserConfig(n),e.updateHighlight(n),e.updateStoragePolicy(n),Re()({value:Object(x.a)(e.toolbarState,n.propertyName)},n)})}},{key:"isVisible",get:function(){var e=this.buttonSet,t=this.toolbarState,n=this.position,i=this._configAgent.get("productConfig.contentsToolbar"),r=Object(x.a)(i,"allowComponents"),o=t.componentType,a=t.selectionMode;return!(r&&r.length>0&&!r.includes(o))&&(e.length>0&&a===_.P.BLOCK&&!n.collapsed)}}]),t}(_.w),jo=k()(Ao.prototype,"activeButtonId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ro=k()(Ao.prototype,"position",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{left:0,top:0,collapsed:!0}}}),No=k()(Ao.prototype,"buttonSet",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mo=k()(Ao.prototype,"toolbarState",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),k()(Ao.prototype,"disabledButtons",[D.e],Object.getOwnPropertyDescriptor(Ao.prototype,"disabledButtons"),Ao.prototype),k()(Ao.prototype,"buttons",[Do],Object.getOwnPropertyDescriptor(Ao.prototype,"buttons"),Ao.prototype),k()(Ao.prototype,"isVisible",[D.e],Object.getOwnPropertyDescriptor(Ao.prototype,"isVisible"),Ao.prototype),Ao),Go=n(132),Ho=(Bo=function(e){function t(){var t;return(t=e.call(this)||this)._contentsToolbarLayoutService=_.W.get("contentsToolbarLayoutService"),t._toolbarService=_.W.get("toolbarService"),t._initializeReaction(),t}S()(t,e);var n=t.prototype;return n._initializeReaction=function(){var e=this;this._toolbarService.reactionOfToolbarState(function(t){var n=t.toolbarState,i=t.buttonSet;e._contentsToolbarLayoutService.updateButtonSet(i),e._contentsToolbarLayoutService.updateToolbarState(n)},"contentsToolbar",{delay:5})},n.toggleButton=function(e){this._contentsToolbarLayoutService.toggleButton(e)},n.updateContentsToolbarPosition=function(){this._contentsToolbarLayoutService.updateContentsToolbarPosition({})},t}(_.m),k()(Bo.prototype,"toggleButton",[D.d],Object.getOwnPropertyDescriptor(Bo.prototype,"toggleButton"),Bo.prototype),k()(Bo.prototype,"updateContentsToolbarPosition",[D.d],Object.getOwnPropertyDescriptor(Bo.prototype,"updateContentsToolbarPosition"),Bo.prototype),Bo),qo=(Wo=function(e){function t(t){var n;return(n=e.call(this,t)||this)._resize=Object(Go.a)(function(){n.props.useCase.updateContentsToolbarPosition()},50,{leading:!1}),n._domAccessor=_.W.get("domAccessor"),n._currentRef=D.b.createRef(),n}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){window.addEventListener("resize",this._resize)},n.componentDidUpdate=function(){var e=this._currentRef.current;if(e){var t=this._resolveWrapperPosition(e);this._resolveWrapperFlexibleStyle(e,t)}},n.componentWillUnmount=function(){window.removeEventListener("resize",this._resize)},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.toolbarState;if(!t.isVisible)return null;var r=this._resolveWrapperClassName();return D.b.createElement("div",{className:r,ref:this._currentRef},D.b.createElement(Qe,{className:"se-toolbar se-contents-toolbar se-contents-toolbar-"+i.componentType,namespace:Ae.e.CONTENTS,buttons:t.buttons,i18n:n,logAreaId:"ct",activeButtonId:t.activeButtonId,onClickSelector:this._handleClickSelector}))},n._getScrollElement=function(){return this._domAccessor.getScrollTarget()},n._getCanvasWrapperWidth=function(){return this._domAccessor.getCanvas().offsetWidth},n._handleClickSelector=function(e){this.props.useCase.updateContentsToolbarPosition(),this.props.useCase.toggleButton(e)},n._resolveWrapperClassName=function(){var e=this.props.store,t=e.isVisible,n=e.position;return n.top,n.left,R()({"__se-cursor-unrelated":!0,"se-contents-toolbar-wrap":!0,"se-is-on":t})},n._resolveWrapperFlexibleStyle=function(e,t){e.style.top=t.top+"px",e.style.left=t.left+"px";var n=t.isOverflowLeft||t.isOverflowRight;e.classList[n?"add":"remove"]("se-contents-toolbar-wrap-edge"),t.isOverflowRight&&e.classList.add("se-contents-toolbar-wrap-edge-right")},n._resolveWrapperPosition=function(e){return this.props.isFlexible?this._refineEmbedPosition(e):this._refineFullscreenPosition(e)},n._refineFullscreenPosition=function(e){return this._resolveDefaultPosition(e)},n._refineEmbedPosition=function(e){var t=this._resolveDefaultPosition(e),n=e.offsetWidth,i=t.top,r=t.left,o=this._getContentAndScrollTarget(),a=o.bodyScroll,s=o.contentTarget,c=o.scrollTarget;if(a){var l=s.getBoundingClientRect(),u=Jr.a.getScrollTop(c);r-=l.left,i=i-u-l.top}var p=this._getCanvasWrapperWidth(),d=r<0,h=r+n>p;if(r=Math.max(r,10),d&&(r=10),h){var g=r+n-p;r=Math.max(r-g-10,10)}return{top:i,left:r,isOverflowLeft:d,isOverflowRight:h}},n._resolveDefaultPosition=function(e){var t=this.props.store.position,n=t.top,i=t.left,r=this._getScrollElement(),o=r.getBoundingClientRect(),a=Jr.a.getScrollTop(r),s={top:n-o.top+a,left:i-o.left-e.offsetWidth/2};return this.props.stickyHeader&&(s.top=s.top-this._resolveFixedHeaderTop()),s},n._resolveFixedHeaderTop=function(){var e=this._domAccessor.getHeader();return e.offsetHeight+parseInt(getComputedStyle(e).top,10)},n._getContentAndScrollTarget=function(){var e=this._getScrollElement(),t=e===document.body;return{bodyScroll:t,contentTarget:t?this._domAccessor.getCanvas():this._domAccessor.getBodyContainer(),scrollTarget:t?window:e}},t}(D.b.Component),k()(Wo.prototype,"_handleClickSelector",[te.autobind],Object.getOwnPropertyDescriptor(Wo.prototype,"_handleClickSelector"),Wo.prototype),Wo);qo.defaultProps={children:null,i18n:function(e){return e}},qo.propTypes={children:D.a.oneOfType([D.a.arrayOf(D.a.element),D.a.element]),i18n:D.a.func,useCase:D.a.instanceOf(Ho).isRequired,store:D.a.instanceOf(Vo).isRequired,isFlexible:D.a.bool,stickyHeader:D.a.bool};var Jo,Ko,Xo,Yo,Qo,Zo,$o,ea=Object(N.b)(qo),ta=function(e){function t(t){var n;return(n=e.call(this,t)||this)._virtualEditable=_.W.get("virtualEditable"),n}S()(t,e);var n=t.prototype;return n.toggleButton=function(e){this._store.toggleButton(e)},n.hideAllLayers=function(){this._store.deactivateAllButtons(),this._store.updateButtonSet([])},n.hide=function(){this._store.changeToolbarPosition({collapsed:!0})},n.updateToolbarState=function(e){this._store.updateToolbarState(e),this.updateContentsToolbarPosition({clientRects:this._virtualEditable.getClientRects()})},n.updateButtonSet=function(e){this._store.updateButtonSet(e),this.updateContentsToolbarPosition({clientRects:this._virtualEditable.getClientRects()})},n.updateCollapsed=function(e){this._store.changeToolbarPosition({collapsed:e})},n.updateContentsToolbarPosition=function(e){var t=e.clientRects,n=void 0===t?this._virtualEditable.getClientRects():t,i=e.range,r=void 0===i?{}:i,o=this._calculatePosition(n,r);o&&this._store.changeToolbarPosition(o)},n._calculatePosition=function(e,t){if(Object(Ze.a)(e))return null;var n=this._store.showBottom?Object($r.a)(e):Object(At.a)(e),i=n.left,r=n.top,o=n.bottom,a=n.width/2+i;return{top:this._store.showBottom?o:r,left:a,collapsed:t.collapsed}},t}(_.f),na=n(107),ia=["type","title","className","label","logId"],ra=(Jo=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.TOGGLE:t,i=e.title,r=void 0===i?{inactive:"contentBold:title_inactive",active:"contentBold:title_active"}:i,o=e.className,a=void 0===o?"text-bold":o,s=e.label,c=void 0===s?"contentBold:label":s,l=e.logId,u=void 0===l?"bold":l,p=Me()(e,ia);return D.b.createElement(na.a,oo()({type:n,title:r,className:a,label:c,logId:u},p,{onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.toggleBold(e)},t}(D.b.Component),k()(Jo.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(Jo.prototype,"_handleChange"),Jo.prototype),Jo),oa=["type","title","className","label","logId"],aa=(Ko=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.TOGGLE:t,i=e.title,r=void 0===i?{inactive:"contentItalic:title_inactive",active:"contentItalic:title_active"}:i,o=e.className,a=void 0===o?"text-italic":o,s=e.label,c=void 0===s?"contentItalic:label":s,l=e.logId,u=void 0===l?"italic":l,p=Me()(e,oa);return D.b.createElement(na.a,oo()({type:n,title:r,className:a,label:c,logId:u},p,{onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.toggleItalic(e)},t}(D.b.Component),k()(Ko.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(Ko.prototype,"_handleChange"),Ko.prototype),Ko),sa=n(210),ca=n(430),la=["type","title","label","labelVisible","selectIfHasValue","onValidateValue","custom","logId"],ua=(Xo=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.CUSTOM_LAYER:t,i=e.title,r=void 0===i?{inactive:"contentLink:title_inactive",active:"contentLink:title_active"}:i,o=e.label,a=void 0===o?"contentLink:label":o,s=e.labelVisible,c=void 0!==s&&s,l=e.selectIfHasValue,u=void 0===l||l,p=e.onValidateValue,d=void 0===p?wt.a.hasValue:p,h=e.custom,g=void 0===h?{CustomLayer:ca.a,customProps:{placeholder:"contentLink:placeholder"}}:h,f=e.logId,m=void 0===f?"urllink":f,y=Me()(e,la);return D.b.createElement(sa.a,oo()({type:n,title:r,label:a,labelVisible:c,selectIfHasValue:u,onValidateValue:d,custom:g,logId:m},y,{onClick:this._handleClick,onChange:this._handleChange}))},n._handleClick=function(e){this.props.onClickSelector(e)},n._handleChange=function(e){this.props.useCase.changeLink(e),this.props.onClickSelector(e)},t}(D.b.Component),k()(Xo.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Xo.prototype,"_handleClick"),Xo.prototype),k()(Xo.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(Xo.prototype,"_handleChange"),Xo.prototype),Xo),pa=n(295),da=n(754),ha={bold:{view:ra,useCase:pa.a,propertyName:"bold",styleName:"bold"},italic:{view:aa,useCase:pa.a,propertyName:"italic",styleName:"italic"},link:{view:ua,useCase:da.a,propertyName:"link",styleName:"link"}},ga={contentsToolbar:{bold:ha.bold,italic:ha.italic,link:ha.link}},fa=function(e){function t(){return e.call(this,{buttonSetMap:ga})||this}return S()(t,e),t}(_.l),ma=_.H.extend({name:"ContentsToolbarLayout",view:ea,useCase:Ho,service:ta,store:Vo,toolbar:fa}),ya=(Yo=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"visible",Qo,P()(n)),L()(n,"position",Zo,P()(n)),L()(n,"link",$o,P()(n));var i=t.state,r=void 0===i?{}:i;return n.visible=Object(x.a)(r,"visible",n.visible),n.position=Object(x.a)(r,"position",n.position),n.link=Object(x.a)(r,"link",n.link),n}S()(t,e);var n=t.prototype;return n.update=function(e,t){this.position=e,this.link=t},n.show=function(){this.visible=!0},n.hide=function(){this.visible=!1},t}(_.w),Qo=k()(Yo.prototype,"visible",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zo=k()(Yo.prototype,"position",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{top:0,left:0}}}),$o=k()(Yo.prototype,"link",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Yo),va=function(e){function t(t){var n;return(n=e.call(this,t)||this)._domAccessor=_.W.get("domAccessor"),n._currentRef=D.b.createRef(),n}S()(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this._currentRef.current;if(e){var t=this._resolveWrapperPosition(e);this._resolveWrapperFlexibleStyle(e,t)}},n.render=function(){var e=this.props.store,t=e.visible,n=e.link;return t?D.b.createElement("div",{className:"se-link-tooltip-wrap",ref:this._currentRef},D.b.createElement("p",{className:"se-link-tooltip"},D.b.createElement("span",{className:"se-link-tooltip-text"},n))):null},n._resolveWrapperFlexibleStyle=function(e,t){e.style.top=t.top+"px",e.style.left=t.left+"px";var n=t.isOverflowLeft||t.isOverflowRight;e.classList[n?"add":"remove"]("se-link-tooltip-wrap-edge")},n._resolveWrapperPosition=function(e){return this.props.isFlexible?this._refineEmbedPosition(e):this._refineFullscreenPosition(e)},n._refineFullscreenPosition=function(e){return this._resolveDefaultPosition(e)},n._refineEmbedPosition=function(e){var t=this._resolveDefaultPosition(e),n=e.offsetWidth,i=t.top,r=t.left,o=this._getContentAndScrollTarget(),a=o.bodyScroll,s=o.contentTarget,c=o.scrollTarget;if(a){var l=s.getBoundingClientRect(),u=Jr.a.getScrollTop(c);r-=l.left,i=i-u-l.top}var p=this._getCanvasWrapperWidth(),d=r<0,h=r+n>p;if(r=Math.max(r,10),d&&(r=10),h){var g=r+n-p;r=Math.max(r-g-10,10)}return{top:i,left:r,isOverflowLeft:d,isOverflowRight:h}},n._resolveDefaultPosition=function(e){var t=this.props.store.position,n=t.top,i=t.left,r=this._getScrollElement(),o=r.getBoundingClientRect(),a=Jr.a.getScrollTop(r);return{top:n-o.top+a,left:i-o.left-e.offsetWidth/2}},n._getScrollElement=function(){return this._domAccessor.getScrollTarget()},n._getCanvasWrapperWidth=function(){return this._domAccessor.getCanvas().offsetWidth},n._getContentAndScrollTarget=function(){var e=this._getScrollElement(),t=e===document.body;return{bodyScroll:t,contentTarget:t?this._domAccessor.getCanvas():this._domAccessor.getBodyContainer(),scrollTarget:t?window:e}},t}(D.b.Component);va.defaultProps={isFlexible:!1},va.propTypes={store:D.a.instanceOf(ya).isRequired,isFlexible:D.a.bool};var _a,ba,Sa,Ca,Ia,Oa,Ta,La,Ea,Pa,wa,ka,xa,Da,Aa=Object(N.b)(va),ja=function(e){function t(t){var n;return(n=e.call(this,t)||this)._eventDispatcher.on(_.z.HOTKEY,n.hide.bind(P()(n))),n}S()(t,e);var n=t.prototype;return n._calculatePosition=function(e){void 0===e&&(e=[]);var t=e[0];if(t){var n=t.left;return{top:t.top,left:t.width/2+n}}},n.show=function(e){void 0===e&&(e={});var t=e,n=t.clientRects,i=t.link,r=this._calculatePosition(n);r&&i&&(this._store.update(r,i),this._store.show())},n.hide=function(){this._store.hide()},t}(_.f),Ra=_.H.extend({name:"LinkTooltipLayout",view:Aa,service:ja,store:ya}),Na=(_a=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"viewMode",ba,P()(n)),n.documentWidth=null;var i=t.state,r=void 0===i?{}:i;return n.viewMode=Object(x.a)(r,"viewMode",n.viewMode),n.documentWidth=_.W.get("configAgent").get("productConfig.documentWidth"),n._componentListStore=_.W.get("componentListStore"),n._dragAndDropStore=_.W.get("dragAndDropStore"),n._selectionInfoStore=_.W.get("selectionInfoStore"),n}return S()(t,e),t.prototype.changeViewMode=function(e){this.viewMode=e},B()(t,[{key:"componentList",get:function(){return this._componentListStore}},{key:"dragAndDrop",get:function(){return this._dragAndDropStore}},{key:"selectionInfo",get:function(){return this._selectionInfoStore}},{key:"themeName",get:function(){return _.W.get("themeStore").themeName}},{key:"hasLastText",get:function(){var e=Object($r.a)(this._componentListStore.compList);return!!e&&"text"===e.ctype}}]),t}(_.w),ba=k()(_a.prototype,"viewMode",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.U.VIEW_MODE_PC}}),k()(_a.prototype,"componentList",[D.e],Object.getOwnPropertyDescriptor(_a.prototype,"componentList"),_a.prototype),k()(_a.prototype,"dragAndDrop",[D.e],Object.getOwnPropertyDescriptor(_a.prototype,"dragAndDrop"),_a.prototype),k()(_a.prototype,"selectionInfo",[D.e],Object.getOwnPropertyDescriptor(_a.prototype,"selectionInfo"),_a.prototype),k()(_a.prototype,"themeName",[D.e],Object.getOwnPropertyDescriptor(_a.prototype,"themeName"),_a.prototype),k()(_a.prototype,"hasLastText",[D.e],Object.getOwnPropertyDescriptor(_a.prototype,"hasLastText"),_a.prototype),_a),Ma=n(718),Ba=n(90),Wa=function(){function e(){this._jobQueue=[],this._isProgress=!1}var t=e.prototype;return t.add=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._makeJob(t),this._addJob(n),!this._isProgress){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this._nextTick();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._nextTick=function(){var e=Tt()(It.a.mark(function e(){var t;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._nextJob())){e.next=7;break}return this._isProgress=!0,e.next=5,this._doWork(t);case 5:e.next=8;break;case 7:this._isProgress=!1;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._doWork=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.call(this);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._addJob=function(e){this._jobQueue.push(e)},t._nextJob=function(){return this._jobQueue.shift()},t._makeJob=function(e){var t=this;return Tt()(It.a.mark(function n(){return It.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.call(t);case 2:return n.next=4,t._nextTick();case 4:case"end":return n.stop()}},n)}))},e}(),Ua=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._editorStatusStore=_.W.get("editorStatusStore"),this._deviceType=_.W.get("configAgent").get("productEnv.deviceType")||"",this._taskQueue=new Wa,this._editingService=_.W.get("editingService"),this._crawlerService=_.W.get("crawlerService"),this._loadingProgressLayoutService=_.W.get("loadingProgressLayoutService"),this._eventDispatcherService=_.W.get("eventDispatcherService"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this.insertContentsFromUrl=Object(Ba.a)(this.insertContentsFromUrl,1e3,{leading:!0,trailing:!1})}var t=e.prototype;return t.insertContentsFromUrl=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isCrawlerAllowed()||!t){e.next=5;break}return e.next=4,this._insertContentsFromUrl(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._insertContentsFromUrl=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],this._beforeCrawling(),e.next=4,this._taskQueue.add(Tt()(It.a.mark(function e(){var o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r._crawlerService.crawlFrom(t);case 3:if(o=e.sent){e.next=7;break}return r._afterCrawling(),e.abrupt("return",{sourceComponents:[]});case 7:i=[o],a=r._selectionInfoStore.toValidJSON(),(s=r._deviceType!==_.t.MOBILE?r._editingService.insert({sourceComponents:i,selectionInfo:a}):r._editingService.insertWithNewText({sourceComponents:i,selectionInfo:a})).errorMsg&&(n=s.errorMsg),r._afterCrawling(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r._afterCrawling();case 17:case"end":return e.stop()}},e,null,[[0,14]])})));case 4:return e.abrupt("return",{errorMsg:n,sourceComponents:i});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._isCrawlerAllowed=function(){var e=this._selectionInfoStore.start,t=e.compId,n=e.unitId,i=this._componentListStore.getComponentById(t).getStoreById(n);return"text"===i.attributes.insertion&&i.isLinkAllowed()&&!1===i.isListParagraphByPoint(e)},t._beforeCrawling=function(){this._editorStatusStore.busy(),this._eventDispatcherService.emit(_.z.IN_PROGRESS),this._loadingProgressLayoutService&&this._loadingProgressLayoutService.show()},t._afterCrawling=function(){this._editorStatusStore.idle(),this._eventDispatcherService.emit(_.z.PROGRESS_COMPLETED),this._loadingProgressLayoutService&&this._loadingProgressLayoutService.hide()},e}(),Fa=n(286),za=n(39),Va=n(122),Ga="sizeExceed",Ha="apiFailed",qa=(Sa=Object(te.history)({sync:!1}),Ca=Object(te.history)({sync:!1}),Ia=Object(te.history)({sync:!1}),Oa=Object(te.history)({sync:!1}),Ta=Object(te.history)({throttle:!0}),La=Object(te.command)(za.a.COMMON.INSERT_COMPONENTS),Ea=Object(te.command)(za.a.COMMON.PREPEND_COMPONENTS),Pa=Object(te.command)(za.a.COMMON.APPEND_COMPONENTS),wa=Object(te.command)(za.a.COMMON.DELETE_COMPONENTS),ka=Object(te.history)({overwriteSelection:!0,sync:!1}),xa=function(e){function t(){var t;return(t=e.call(this)||this)._eventDispatcherService=_.W.get("eventDispatcherService"),t._insertMenuLayoutService=_.W.get("insertMenuLayoutService"),t._copyPasteService=_.W.get("copyPasteService"),t._finderService=_.W.get("finderService"),t._configAgent=_.W.get("configAgent"),t._editingService=_.W.get("editingService"),t._virtualEditable=_.W.get("virtualEditable"),t._documentService=_.W.get("documentService"),t._canvasLayoutService=_.W.get("canvasLayoutService"),t._selectionService=_.W.get("selectionService"),t._toastLayerService=_.W.get("toastLayerService"),t._contentsToolbarLayoutService=_.W.get("contentsToolbarLayoutService"),t._contextToolbarLayoutService=_.W.get("contextToolbarLayoutService"),t._loadingLayerService=_.W.get("loadingLayerService"),t._canvasScrollingService=_.W.get("canvasScrollingService"),t._contextmenuLayerService=_.W.get("contextmenuLayerService"),t._historyService=_.W.get("historyService"),t._i18n=_.W.get("i18n"),t._alertLayerService=_.W.get("alertLayerService"),t._propertyChangeService=_.W.get("propertyChangeService"),t._writingLogService=_.W.get("writingLogService"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._componentListStore=_.W.get("componentListStore"),t._imageBehavior=_.W.get("imageBehavior"),t._crawlerBehavior=new Ua,t._allowSameFontAndBackgroundColor=!1!==t._configAgent.get("productConfig.allowSameFontAndBackgroundColor"),t._disabledListFormat=!1===t._configAgent.get("productConfig.textFormat.list"),t._showXcamWarningConfig=t._configAgent.get("productConfig.enableXcamWarningMessage",!1),t._xCamWarningShowed={image:!1,video:!1,file:!1},t._convertLimitSize=t._configAgent.get("editorInfo.convertLimitSize"),t}S()(t,e);var n=t.prototype;return n.__ON_LAZY__=function(){var e;this._canvasLayoutService.attachEvents(((e={})[_.S.CHANGE_VALUE]=this._handleChangeValue.bind(this),e[_.S.LEAVE_UNIT]=this._handleLeaveUnit.bind(this),e[_.S.SELECTING_BY_MOUSE]=this._handleSelectingByMouse.bind(this),e[_.S.SELECT_END]=this._handleSelectend.bind(this),e[_.S.PASTE]=this._handlePaste.bind(this),e[_.S.AFTER_PASTE]=this._handleAfterPaste.bind(this),e[_.S.CUT]=this._handleCut.bind(this),e[_.S.COPY]=this._handleCopy.bind(this),e[_.S.CHANGE_CURSOR]=Object(Ba.a)(this._handleChangeCursor.bind(this),100),e[_.S.GLOBAL.MOUSEUP]=this._handleMouseUp.bind(this),e)),this._eventDispatcherService.on(_.z.INPUT,this._handleInput.bind(this)),this._eventDispatcherService.on(_.z.CONTENT_COUNT_TARGET_BLURRED,this._handleCountTargetBlur.bind(this)),this._eventDispatcherService.on(_.z.CONTENT_COUNT_TARGET_FOCUSED,this._handleCountTargetFocus.bind(this)),this._eventDispatcherService.on(_.C.ADD_XCAM_CONTENTS,this._handleAddXcamContents.bind(this))},n._handleInput=function(){if(this._canvasLayoutService.shouldUpdateContentLength()){var e=this._selectionInfoStore.focus.compId;this._canvasLayoutService.setAvailableContentLength(e)}},n._handleCountTargetBlur=function(e){this._canvasLayoutService.resetAvailableContentLength(e)},n._handleCountTargetFocus=function(e){this._canvasLayoutService.setAvailableContentLength(e)},n._handleChangeCursor=function(e){var t=e.clientRects,n=e.collapsed,i=e.isDropCursor;this._insertMenuLayoutService&&this._insertMenuLayoutService.moveTo(t),!i&&this._eventDispatcherService.dispatch(_.z.SELECTION_CHANGE),this._contentsToolbarLayoutService&&(i?this._contentsToolbarLayoutService.hide():this._dragAndDropService.isUpdateReadySelection()&&(this._contentsToolbarLayoutService.updateContentsToolbarPosition({clientRects:t,range:{collapsed:n}}),this._dragAndDropService.setUpdateReadySelection(!1))),this._selectionInfoStore.shouldBlur&&(this._virtualEditable.blur(),this._selectionInfoStore.setShouldBlur(!1))},n._handleCopy=function(e,t){var n=t.html,i=t.text,r=this._finderService.getCompStoresWithinSelection();this._copyPasteService.copy(e,{targets:r,html:n,text:i})},n._handleCut=function(e,t){var n=t.html,i=t.text,r=this._finderService.getCompStoresWithinSelection();this._copyPasteService.copy(e,{targets:r,html:n,text:i})&&this._editingService.erase(void 0,_.u.LEFT)},n._handlePaste=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s,c,l;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.a.IS_IE){e.next=2;break}return e.abrupt("return");case 2:if(t.preventDefault(),n=this._copyPasteService.checkClipboardData(t),i=n.isCopiedEditorData,r=n.isCaptureImage,o=n.isOldEditorData,a=n.isOnlyText,!r){e.next=8;break}return e.next=7,this._insertCaptureImage(t);case 7:return e.abrupt("return");case 8:if(this._loadingLayerService.open("transparent",100),e.prev=9,!o){e.next=16;break}return s=this._copyPasteService.getHTMLClipboardData(t),e.next=14,this._insertOldEditorData(s);case 14:e.next=34;break;case 16:if(!i){e.next=21;break}return e.next=19,this._insertCopiedEditorData();case 19:e.next=34;break;case 21:if(!a){e.next=29;break}return e.next=24,this._copyPasteService.parseText(t);case 24:return c=e.sent,e.next=27,this._insertExternalData(c);case 27:e.next=34;break;case 29:return e.next=31,this._copyPasteService.parseResourceByEvent(t);case 31:return l=e.sent,e.next=34,this._insertExternalData(l);case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(9),e.t0.message&&this._showAlert(e.t0.message);case 39:return e.prev=39,this._loadingLayerService.close(),e.finish(39);case 42:case"end":return e.stop()}},e,this,[[9,36,39,42]])}));return function(t){return e.apply(this,arguments)}}(),n._insertOldEditorData=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._copyPasteService.getOldEditorData(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:if(0!==(n=e.t0).length){e.next=8;break}return e.abrupt("return");case 8:i=this._editingService.insertByInternalPaste({sourceComponents:n}),r=i.errorMsg,this._showWarning(r);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._insertCopiedEditorData=function(){var e=Tt()(It.a.mark(function e(){var t,n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._copyPasteService.getCopiedEditorData();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:if(0!==(t=e.t0).length){e.next=8;break}return e.abrupt("return");case 8:n=this._editingService.insertByInternalPaste({sourceComponents:t}),i=n.errorMsg,this._showWarning(i);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._insertCaptureImage=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._copyPasteService.getClipboardData(t);case 2:return n=e.sent,e.next=5,this._imageBehavior.insertImage({validFiles:n,invalidFiles:[]});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._insertExternalData=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s,c,l;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(n=t.sourceComponents,i=t.url,r=t.dataURIImage,0!==n.length){e.next=5;break}return e.abrupt("return");case 5:if(!r||!r.length){e.next=8;break}return e.next=8,this._imageBehavior.insertImage({validFiles:[r]});case 8:if(this._checkComponentStyle(n),o=this._editingService.insertByExternalPaste({sourceComponents:n}),a=o.errorMsg,s=[],!i){e.next=17;break}return e.next=14,this._crawlerBehavior.insertContentsFromUrl(i);case 14:(c=e.sent)&&(a=c.errorMsg),c&&(s=c.sourceComponents);case 17:l=[].concat(n,s).filter(function(e){return"image"===e.ctype}).length,a?this._showWarning(a):l&&this._eventDispatcherService.dispatch(_.C.ADD_XCAM_CONTENTS,{ctype:"image"});case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._handleAfterPaste=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.a.IS_IE&&t){e.next=2;break}return e.abrupt("return");case 2:if(this._loadingLayerService.open("transparent",100),e.prev=3,n=this._configAgent.get("productConfig.uploadIECaptureImageEnabled")||!1,!this._copyPasteService.isCopiedEditorData(t)){e.next=10;break}return e.next=8,this._insertCopiedEditorData();case 8:e.next=27;break;case 10:if(!this._copyPasteService.isOldEditorData(t)){e.next=15;break}return e.next=13,this._insertOldEditorData(t);case 13:e.next=27;break;case 15:if(!n||!this._copyPasteService.isIECaptureImage(t)){e.next=22;break}if(i=t.match(/(data:image.+)/g)||[],!(r=i[0])||!r.length){e.next=20;break}return e.next=20,this._imageBehavior.insertImage({validFiles:[r]});case 20:e.next=27;break;case 22:return e.next=24,this._copyPasteService.parseResourceByPastedData(t);case 24:return o=e.sent,e.next=27,this._insertExternalData(o);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(3),e.t0.message&&this._showAlert(e.t0.message);case 32:return e.prev=32,this._loadingLayerService.close(),e.finish(32);case 35:case"end":return e.stop()}},e,this,[[3,29,32,35]])}));return function(t){return e.apply(this,arguments)}}(),n._handleLeaveUnit=function(e){this._changeCursorByKey(e)&&e.event.preventDefault(),this._contextToolbarLayoutService&&"mousemove"!==e.event.type&&this._contextToolbarLayoutService.hide()},n._handleSelectingByMouse=function(e){this._canvasScrollingService.scrollPage(e)},n._handleMouseUp=function(){this._canvasScrollingService.forceStopAutoScroll()},n._handleChangeValue=function(e){this._editingService.isCursorMode()||this._editingService.isBlockMode()?this._writeWithTransaction(e):this._write(e),this._eventDispatcherService.emit(_.z.INPUT,e),this._writingLogService.updateTextWritingTime()},n._write=function(e){var t=this._editingService.write(e);this._showWarning(t)},n._writeWithTransaction=function(e){if(!this._disabledListFormat&&" "===e.slice(-1)&&this._propertyChangeService.canBeListBySpace()){this._writeWithHistory(e);var t="hotk."+(this._convertToList()===_.F.BULLET?"listbullet":"listdecimal");Be.a.log(this._virtualEditable.getInputElement(),t),this._virtualEditable.focus()}else this._writeWithThrottleHistory(e)},n._writeWithHistory=function(e){this._write(e)},n._writeWithThrottleHistory=function(e){this._write(e)},n._convertToList=function(){var e=this._propertyChangeService.convertToList();return this._removeListPrefix(),e},n._removeListPrefix=function(){var e=this._selectionInfoStore.toValidJSON();e.start.offset=0,this._selectionInfoStore.setRange({start:e.start,end:e.end}),this._editingService.erase(this._selectionInfoStore.toValidJSON())},n.destroy=function(){this._canvasLayoutService.destroyVirtualEditable()},n.refresh=function(){this._canvasLayoutService.refreshVirtualEditable()},n.toggleMultiSelection=function(e){this._canvasLayoutService.toggleMultiSelection(e)},n.insertTextComp=function(e,t){this._editingService.insertTextCompPositionById(t,e)},n.insertComponentsCommand=function(e){var t=e.data,n=e.option,i=void 0===n?{}:n,r=t.components;try{this._editingService.insertComponentsWithData(this._documentService.convertComponents(r),Re()({},i,{forceRefine:!0}))}catch(e){console.error(e)}},n.prependComponentsCommand=function(e){var t=e.data,n=e.option,i=void 0===n?{}:n,r=t.components,o=i.compId,a=i.newLine,s=void 0===a||a,c=Object(Va.a)(i,["compId","newLine"])||{},l=o?this._componentListStore.getComponentById(o):this._componentListStore.getComponentByIndex(this._componentListStore.getFirstContentsIndex());if(l){var u=l.getStartPoint();u&&this._selectionInfoStore.setRange({start:u,end:u})}try{this._editingService.insertComponentsWithData(this._documentService.convertComponents(r),Re()({},c,{commandType:"prepend",disableMerge:s,forceRefine:!0}))}catch(e){console.error(e)}},n.appendComponentsCommand=function(e){var t=e.data,n=e.option,i=void 0===n?{}:n,r=t.components,o=i.compId,a=i.newLine,s=void 0===a||a,c=Object(Va.a)(i,["compId","newLine"])||{},l=o?this._componentListStore.getComponentById(o):this._componentListStore.getLastComponent();if(l){var u=l.getEndPoint();u&&this._selectionInfoStore.setRange({start:u,end:u})}try{this._editingService.insertComponentsWithData(this._documentService.convertComponents(r),Re()({},c,{commandType:"append",disableMerge:s,forceRefine:!0}))}catch(e){console.error(e)}},n.deleteComponentsCommand=function(e){var t=e.data.components;try{this._editingService.deleteComponents(t)}catch(e){console.error(e)}},n._handleSelectend=function(e){this._canvasScrollingService.forceStopAutoScroll();var t=e.destination,n=e.clientRects,i=e.range,r=t.focus;i.collapsed&&(this._editingService.refineEmptyNodeInParagraph(r)&&e.preventDefault());this._contentsToolbarLayoutService&&this._contentsToolbarLayoutService.updateContentsToolbarPosition({clientRects:n,range:i})},n._changeCursorByKey=function(e){var t=e.event,n=e.direction,i=e.destination,r=e.isShrink,o=e.collapsed,a=t.type,s=i.anchor,c=i.focus;return!0===this._selectionService.isCurrentAnchorUnitId(s.unitId)&&!1===o?this._selectionService.selectAsBlock({direction:n,toPoint:c,eventType:a,isShrink:r}):this._selectionService.moveCursor({direction:n,toPoint:c,eventType:a})},n._showWarning=function(e){e&&this._toastLayerService.warningMessage(e)},n.showContextMenu=function(e){if(this._contextmenuLayerService){var t=e.target,n=e.clientX,i=e.clientY;if(Jr.a.isFocusableInputElement(t))return;this._contextmenuLayerService.open({top:i,left:n,selectAllable:this._selectionService.isSelectAllable(),undoable:this._historyService.isUndoable(),redoable:this._historyService.isRedoable(),saveAsUrl:this._getSaveAsUrlByEvent(e)}),e.preventDefault()}},n._getSaveAsUrlByEvent=function(e){var t=e.target;if(!t)return null;var n=t.classList.contains("se-image-resource"),i=t.classList.contains("se-inline-image-resource");if("IMG"===t.tagName&&(n||i)){var r=e.target.src,o=r;if(r.indexOf("?type=")>0||i)o=r.split("?type=")[0]+"?attachment";return o}return null},n._showAlert=function(e){switch(e){case Ha:return void this._alertLayerService.open({type:"alert",title:this._i18n("canvasLayout:paste_failed_title"),description:this._i18n("canvasLayout:paste_failed_desc")});case Ga:this._alertLayerService.open({type:"alert",title:this._i18n("canvasLayout:paste_failed_title"),description:this._i18n("canvasLayout:paste_size_exceeded_description",{limit:Ma.a.convertToFileSizeUnit(this._convertLimitSize,"")})})}},n._checkComponentStyle=function(e){var t=this;this._allowSameFontAndBackgroundColor||e.forEach(function(e){"text"===e.ctype&&e.getText().traverseNodes(function(e){var n=e.style,i=n.fontColor,r=n.backgroundColor;i&&i===r&&(n.backgroundColor="",t._toastLayerService.warningMessage(t._i18n("colorPickerButton:specify_different_color")))})})},n._handleAddXcamContents=function(e){this._checkXcamWarningShowed(e.detail.ctype)},n._checkXcamWarningShowed=function(e){if(this._showXcamWarningConfig&&!this._xCamWarningShowed[e]){var t=this._i18n("common:xcam_warning");this._showWarning(t),this._xCamWarningShowed[e]=!0}},t}(Fa.a),k()(xa.prototype,"_handleChangeCursor",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_handleChangeCursor"),xa.prototype),k()(xa.prototype,"_handleCopy",[te.preventOnComponentProcessing,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_handleCopy"),xa.prototype),k()(xa.prototype,"_handleCut",[te.preventOnComponentProcessing,te.history,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_handleCut"),xa.prototype),k()(xa.prototype,"_handlePaste",[te.preventOnComponentProcessing],Object.getOwnPropertyDescriptor(xa.prototype,"_handlePaste"),xa.prototype),k()(xa.prototype,"_insertOldEditorData",[D.d,Sa],Object.getOwnPropertyDescriptor(xa.prototype,"_insertOldEditorData"),xa.prototype),k()(xa.prototype,"_insertCopiedEditorData",[D.d,Ca],Object.getOwnPropertyDescriptor(xa.prototype,"_insertCopiedEditorData"),xa.prototype),k()(xa.prototype,"_insertCaptureImage",[D.d,Ia],Object.getOwnPropertyDescriptor(xa.prototype,"_insertCaptureImage"),xa.prototype),k()(xa.prototype,"_insertExternalData",[D.d,Oa],Object.getOwnPropertyDescriptor(xa.prototype,"_insertExternalData"),xa.prototype),k()(xa.prototype,"_handleAfterPaste",[te.preventOnComponentProcessing,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_handleAfterPaste"),xa.prototype),k()(xa.prototype,"_handleLeaveUnit",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_handleLeaveUnit"),xa.prototype),k()(xa.prototype,"_handleSelectingByMouse",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_handleSelectingByMouse"),xa.prototype),k()(xa.prototype,"_handleMouseUp",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_handleMouseUp"),xa.prototype),k()(xa.prototype,"_handleChangeValue",[te.preventOnComponentProcessing,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_handleChangeValue"),xa.prototype),k()(xa.prototype,"_writeWithHistory",[te.history],Object.getOwnPropertyDescriptor(xa.prototype,"_writeWithHistory"),xa.prototype),k()(xa.prototype,"_writeWithThrottleHistory",[Ta],Object.getOwnPropertyDescriptor(xa.prototype,"_writeWithThrottleHistory"),xa.prototype),k()(xa.prototype,"_convertToList",[te.history],Object.getOwnPropertyDescriptor(xa.prototype,"_convertToList"),xa.prototype),k()(xa.prototype,"destroy",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"destroy"),xa.prototype),k()(xa.prototype,"refresh",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"refresh"),xa.prototype),k()(xa.prototype,"insertTextComp",[te.history,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"insertTextComp"),xa.prototype),k()(xa.prototype,"insertComponentsCommand",[La,te.history,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"insertComponentsCommand"),xa.prototype),k()(xa.prototype,"prependComponentsCommand",[Ea,te.history,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"prependComponentsCommand"),xa.prototype),k()(xa.prototype,"appendComponentsCommand",[Pa,te.history,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"appendComponentsCommand"),xa.prototype),k()(xa.prototype,"deleteComponentsCommand",[wa,te.history,D.d],Object.getOwnPropertyDescriptor(xa.prototype,"deleteComponentsCommand"),xa.prototype),k()(xa.prototype,"_handleSelectend",[D.d,ka],Object.getOwnPropertyDescriptor(xa.prototype,"_handleSelectend"),xa.prototype),k()(xa.prototype,"_showWarning",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_showWarning"),xa.prototype),k()(xa.prototype,"showContextMenu",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"showContextMenu"),xa.prototype),k()(xa.prototype,"_showAlert",[D.d],Object.getOwnPropertyDescriptor(xa.prototype,"_showAlert"),xa.prototype),xa),Ja=n(1306),Ka=(Da=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.i18n,n=e.dragAndDrop,i=e.isClickable,r=n.isCanvasBottomActivated,o=R()({"se-canvas-bottom":!0,"se-is-clickable-canvas-bottom-button":i}),a=R()({"se-drop-indicator":!0,"se-drop-indicator-bottom":r});return D.b.createElement("div",{className:o,onDragOver:this._handleDragOver,onClick:this._handleClick},D.b.createElement("button",{type:"button",className:"se-canvas-bottom-button __edge-area"},D.b.createElement("span",{className:"se-blind"},t("canvasLayout:addText"))),D.b.createElement("div",{className:a}))},n._handleClick=function(e){this.props.onClick(e)},n._handleDragOver=function(e){this.props.onDragOver(e)},t}(D.b.Component),k()(Da.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Da.prototype,"_handleClick"),Da.prototype),k()(Da.prototype,"_handleDragOver",[te.autobind],Object.getOwnPropertyDescriptor(Da.prototype,"_handleDragOver"),Da.prototype),Da);Ka.defaultProps={onClick:function(){},onDragOver:function(){},isClickable:!1},Ka.propTypes={onClick:D.a.func,onDragOver:D.a.func,isClickable:D.a.bool,dragAndDrop:D.a.instanceOf(Ja.a).isRequired,i18n:D.a.func.isRequired};var Xa,Ya,Qa=Object(N.b)(Ka),Za=n(711),$a=n(712),es=(Xa=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"compList",Ya,P()(n)),n._componentFactory=_.W.get("componentFactory"),n._themeStore=_.W.get("themeStore");var i=t.state,r=void 0===i?{}:i;return n.compList=n._createCompStoreList(r.compList),n._hashArray=n._makeHashArray(n.compList),n}S()(t,e);var n=t.prototype;return n.destroy=function(){var e=this;Object(c.a)(this.compList,function(t,n){t.destroy&&t.destroy(),e.compList[n]=null}),this._hashArray.length=0,this._hashArray=null,this.compList.length=0,this.compList=null},n.syncUp=function(){this._hashArray.syncUpWithDataList()},n.allowPlaceholderShownCompType=function(e){return["text","sectionTitle"].includes(e)},n._makeHashArray=function(e){var t=this;return new Za.a(e,function(e){return t._handleChangeData(e)})},n._handleChangeData=function(e){_.W.get("componentIdChecker").sync(e)},n.insertComponent=function(e){this._insertComponent(e)},n.insertComponentBefore=function(e,t){var n=this.getComponentIndex(e.id);this._insertComponent(t,n)},n.insertComponentAfter=function(e,t){var n=this.getComponentIndex(e.id)+1;this._insertComponent(t,n)},n.updateComponent=function(e){this._updateComponent(e)},n.detachComponents=function(e,t){return this._hashArray.detachData(e,t)},n.replace=function(e,t){this._hashArray.replaceBetween(t,e.id,e.id)},n.replaceBetween=function(e,t,n){this._hashArray.replaceBetween(n,e.id,t.id)},n.deleteComponentById=function(e){this._deleteComponentById(e)},n.attachFirstParagraphAtEnd=function(e,t){this._attachFirstParagraphAtEnd(e,t)},n.resetCompList=function(e){var t=this._createCompStoreList(e);this.compList.replace(t),this._hashArray=this._makeHashArray(this.compList)},n.splitComponentByPoint=function(e){var t=e.compId,n=this.getComponentById(t),i=this.getComponentIndex(t)+1,r=n.splitComponent(e),o=r.front,a=r.back;return this._insertComponent(a,i),{front:o,back:a}},n.refineComponentList=function(e){var t=this.compList,n=this.getFirstComponent(),i=[],r=e.start,o=e.end,a={},s={},l=!1;if(Object(c.a)(t,function(e){if(n.id!==e.id)if("text"===e.ctype&&"text"===n.ctype){n.insert(e),i.push(e.id);var t=n.getText().id;e.id===r.compId&&(a.compId=n.id,a.unitId=t),e.id===o.compId&&(s.compId=n.id,s.unitId=t),l=!0}else n=e}),this._deleteComponentById(i),l)return{start:Object.assign(r,a),end:Object.assign(o,s)}},n.findNextSelection=function(e,t){if(t===_.u.LEFT){var n=this.getPrevComponent(e);if(!n)return;if(this.isTextType(n)||"documentTitle"===n.ctype){var i=n.getEndPoint();return{start:i,end:i}}return n.getComponentActiveRange()}var r=this.getNextComponent(e);if(r){if(this.isTextType(r)){var o=r.getStartPoint();return{start:o,end:o}}return r.getComponentActiveRange()}},n.getUpwardClosestTextTypeCompStore=function(e){for(var t=e;t;){if(["text","wrappingParagraph"].includes(t.ctype))return t;t=this.getPrevComponent(t)}return null},n.getComponentList=function(){return this.compList},n.getComponentById=function(e){return this._hashArray.getDataById(e)},n.getComponentByIndex=function(e){return this._hashArray.getDataByIndex(e)},n.getComponentIndex=function(e){return this._hashArray.getIndex(e)},n.getComponentsByCtype=function(e){return this._hashArray.filter(function(t){return t.ctype===e})},n.getComponentByCtype=function(e){var t=this._hashArray.filter(function(t){return t.ctype===e});return Object(At.a)(t)},n.getComponentsByCtypes=function(e){return void 0===e&&(e=[]),this._hashArray.filter(function(t){return e.includes(t.ctype)})},n.getComponentsByIds=function(e){return void 0===e&&(e=[]),this.filter(function(t){return e.includes(t.id)})},n.getFirstComponent=function(){return this._hashArray.getFirst()},n.getLastComponent=function(){return this._hashArray.getLast()},n.getPrevComponent=function(e){return this._hashArray.getPrev(e.id)},n.getPrevComponentById=function(e){var t=this.getComponentById(e);return this.getPrevComponent(t)},n.getNextComponent=function(e){return this._hashArray.getNext(e.id)},n.getNextComponentById=function(e){var t=this.getComponentById(e);return this.getNextComponent(t)},n.getComponentIds=function(){return this._hashArray.getKeys()},n.getComponentsBetween=function(e,t){return this._hashArray.getBetween(e,t)},n.getComponentsByCtypeUntil=function(e,t){var n=this._hashArray.getFirst().id;return this._hashArray.getBetween(n,e).filter(function(e){return e.ctype===t})},n.getComponentsByCtypeFrom=function(e,t){var n=this._hashArray.getLast().id;return this._hashArray.getBetween(e,n).filter(function(e){return e.ctype===t})},n.getSelectedComponents=function(e){var t=e.compIdMap,n=e.start,i=e.end;return e.mode===_.P.MULTI_COMP?this.getComponentsByIds(Object.keys(t)):this.getComponentsBetween(n.compId,i.compId)},n.getCompListLength=function(){return this._hashArray.getLength()},n.getContentText=function(){var e=[];return this.compList.forEach(function(t,n,i){_.s.includes(t.ctype)&&(n>0&&"text"===i[n-1].ctype&&"text"===t.ctype&&e.push("\n"),e.push(t.getPlainTextWithEmoji()))}),e.join("")},n.getAiContentText=function(){var e=[];return this.compList.forEach(function(t,n,i){_.s.includes(t.ctype)&&(n>0&&"text"===i[n-1].ctype&&"text"===t.ctype&&e.push("\n"),e.push(t.getPlainTextOnlyAi()))}),e.join("")},n.getPointByParaId=function(e){var t=this.compList.find(function(t){return t.hasParagraph(e)});if(!t)return null;var n=t.getText();return{compId:t.id,unitId:n.id}},n.getParagraphByPoint=function(e){var t=e.compId,n=e.paraId,i=this.getComponentById(t).getText();return i?i.getParagraphById(n):null},n.moveComponentToIndex=function(e,t){this.deleteComponentById(e.id),this._insertComponent(e,t)},n.moveComponentToPrev=function(e){var t=this._hashArray.getIndex(e);if("documentTitle"!==this.getFirstComponent().ctype||1!==t){var n=this._hashArray.getDataByIndex(t);this.moveComponentToIndex(n,t-1)}},n.moveComponentToNext=function(e){var t=this._hashArray.getIndex(e),n=t+1;if(!this._hashArray.isOutOfBound(n)){var i=this._hashArray.getDataByIndex(t);this.moveComponentToIndex(i,n)}},n.has=function(e){return this._hashArray.has(e)},n.isEmpty=function(){return this._hashArray.isEmpty()},n.isFirstComponent=function(e){return e&&this.getFirstComponent().id===e.id},n.getSelectedAlign=function(e){var t=e.mode,n=this.getSelectedComponents(e).map(function(t){return t.getSelectedAlign(e)});return Re()({selectionMode:t},$a.a.mergeStyles(n))},n.collectStyle=function(e){var t=e.mode,n=Object(jt.a)(this.getSelectedComponents(e)),i=n.map(function(t){return t.collectStyle(e)}),r=$a.a.mergeStyles(i);return n.length>1&&null===r.align&&(r.align=this.getSelectedAlign(e).align),Re()({selectionMode:t},r)},n.inheritTextStyle=function(e,t){var n=this.getUpwardClosestTextTypeCompStore(e);if(n){var i=n.getCompEndPoint(),r=t.getCompStartRange(),o=n.getTextStyle(i);delete o.dropCap,delete o.align,delete o.subscript,delete o.superscript,delete o.list,t.updateStyles(o,r)}else{var a=this._themeStore.getUserDefinedStyle(t.ctype);a&&t.updateUserDefinedStyle(Object(Va.a)(a,["align"]))}},n.getDerivedTextStyle=function(e){var t=this.getComponentById(e.compId),n=t&&t.getTextStyle&&t.getTextStyle(e);if(n)return n;var i=this.getUpwardClosestTextTypeCompStore(t);if(i){var r=i.getCompEndPoint();return i.getTextStyle(r)}return this._themeStore.getUserDefinedStyle("text")},n.getCompStoresWithinSelection=function(e){var t=this;return this.getSelectedComponents(e).map(function(n){var i=n.clone(e);return"textUnit"===i.ctype?t._componentFactory.createComponentWithCompData({ctype:"text",value:i.toValidJSON()}):i})},n._deleteComponentById=function(e){this._hashArray.remove(e)},n._insertComponent=function(e,t){this._hashArray.add(e,t)},n._updateComponent=function(e){var t=this.getComponentById(e.id);this._hashArray.replaceBetween(e,t.id,t.id)},n._attachFirstParagraphAtEnd=function(e,t){e.attachFirstParagraphAtEnd(t),t.isEmpty()&&this.deleteComponentById(t.id)},n._createCompStoreList=function(e){return void 0===e&&(e=[]),this._componentFactory.createComponentListWithCompDataList(e)},n.forEach=function(e){this._hashArray.forEach(e)},n.filter=function(e){return this._hashArray.filter(e)},n.append=function(e){var t=e.sourceComponents,n=e.point,i=this.getComponentById(n.compId);if("text"===i.attributes.insertion){var r=this.splitComponentByPoint(n).front;r.isEmpty()?this.replace(r,t):this.insertComponentAfter(r,t)}else this.insertComponentAfter(i,t)},n.isTextType=function(e){return["text","sectionTitle","wrappingParagraph"].includes(e.ctype)},n.isBackward=function(e,t){var n=this.getComponentIndex(e.compId),i=this.getComponentIndex(t.compId);if(i<n)return!1;if(i===n){if(t.unitId===e.unitId&&t.paraId){var r=this.getComponentById(t.compId).getText();return r&&r.isBackward(e,t)}return!1}return!0},n.countBy=function(e){return this.compList.filter(function(t){return t.ctype===e}).length},n.getComponentsByLikeType=function(e){return this.compList.filter(function(t){var n=Object(x.a)(t,"ctype","");if("image"===e){var i=Object(x.a)(t,"wrappedSection.ctype",""),r=Object(x.a)(t,"background.image",null);return-1!==n.indexOf(e)||-1!==i.indexOf(e)||null!==r}return n===e})},n.countByLikeType=function(e){return"image"===e?this.countByIncludedImage():this.getComponentsByLikeType(e).length},n.countByIncludedImage=function(){var e=this.getComponentsByLikeType("image");return Object(Pt.a)(e,function(e,t){var n=t.ctype;return"imageGroup"===n||"imageStrip"===n?e+=Object(x.a)(t,"images",[]).reduce(function(e,t){return e+=Object(x.a)(t,"internalResource",!1)?1:0},0):"image"===n?e+=Object(x.a)(t,"internalResource","")?1:0:"wrappingParagraph"===n?e+=Object(x.a)(t,"wrappedSection.internalResource",!1)?1:0:"documentTitle"===n&&(e+=Object(x.a)(t,"background.image.internalResource",!1)?1:0),e},0)},n.getFirstContentsIndex=function(){return"documentTitle"===this.getComponentByIndex(0).ctype?1:0},n.toPlainJSON=function(e,t){return this.getComponentsBetween(e,t).map(function(n,i,r){return n.toPlainJSON(0===i?e:void 0,i===r.length-1?t:void 0)})},n.toValidJSON=function(){var e=[];return this.compList.forEach(function(t){if(t.toValidJSON){var n=t.toValidJSON();Object(Ze.a)(n)||e.push(n)}else Object(Ze.a)(t)||e.push(t)}),e},B()(t,[{key:"shouldPlaceholderShownCompId",get:function(){var e=this,t=1===this.filter(function(e){if("documentTitle"!==e.ctype)return e}).length,n="";return this.compList.forEach(function(i){e.allowPlaceholderShownCompType(i.ctype)&&t&&(n=i.id)}),n}},{key:"firstBodyComponent",get:function(){var e=this.getFirstContentsIndex();return this.getComponentByIndex(e)}}]),t}(_.w),Ya=k()(Xa.prototype,"compList",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k()(Xa.prototype,"shouldPlaceholderShownCompId",[D.e],Object.getOwnPropertyDescriptor(Xa.prototype,"shouldPlaceholderShownCompId"),Xa.prototype),Xa),ts=n(740),ns=n(831),is=n(742);function rs(e){var t=e.list,n=e.store,i=e.rendererCollector,r=n.allowPlaceholderShownCompType,o=n.shouldPlaceholderShownCompId;return D.b.createElement(D.b.Fragment,null,t.map(function(e){var t=i.getRenderer(e.ctype),n={key:e.id,store:e};return r(e.ctype)&&(n.shouldPlaceholderShown=o===e.id),t&&t(n)}))}rs.propTypes={list:N.a.observableArray.isRequired,store:D.a.instanceOf(es).isRequired,rendererCollector:D.a.object.isRequired};var os=Object(ts.a)(Object(ts.b)(Object(N.b)(rs),{getKey:function(e){return e.id},reorder:function(e,t){var n=t.selectionInfoStore.toValidJSON(),i=n.start,r=n.end;if(null===i.compId&&null===r.compId)return e;var o=t.store.getSelectedComponents(n),a=o[o.length-1],s=Object(Pn.a)(Object(is.a)(t.list,0,Object(we.a)(t.list,function(e){return Object(Ft.a)(e,a)})+1),function(e){return e.id}),c=Object(ns.a)(s,e),l=Object(wn.a)(e,s);return c.length?[c].concat(l):[].concat(l)}}),{path:"store.compList",output:"list"}),as=function(e){function t(t){var n;return(n=e.call(this,t)||this)._selectionInfoStore=_.W.get("selectionInfoStore"),n}S()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this._componentRendererCollector=_.W.get("componentRendererCollector")},n.render=function(){var e=this.props.store;return D.b.createElement("article",{className:"se-components-wrap"},D.b.createElement(os,{store:e,selectionInfoStore:this._selectionInfoStore,rendererCollector:this._componentRendererCollector}))},t}(D.b.Component);as.defaultProps={},as.propTypes={store:D.a.instanceOf(es).isRequired};var ss,cs=as,ls=(ss=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.i18n,n=e.store,i=n.dragAndDrop,r=n.componentList,o=this._resolveCanvasClass();return D.b.createElement("section",{className:o,onContextMenu:this.handleContextMenu,onMouseDown:this.handleMouseDown},D.b.createElement("div",{className:"se-content-guide"}),D.b.createElement(cs,{store:r}),D.b.createElement(Qa,{isClickable:!1===n.hasLastText,dragAndDrop:i,i18n:t}))},n._resolveCanvasClass=function(){var e,t=this.props,n=t.store,i=t.isFlexible,r=n.viewMode,o=n.themeName,a=n.documentWidth;return R()(((e={"se-canvas":!0})["se-canvas-width-"+a]=!!a,e["se-canvas-flexible"]=i,e["se-l-viewport-mobile"]=r===_.U.VIEW_MODE_MOBILE,e["se-l-viewport-tablet"]=[_.U.VIEW_MODE_PC,_.U.VIEW_MODE_TABLET].includes(r),e["se-l-viewport-desktop"]=r===_.U.VIEW_MODE_PC,e["se-theme-"+o]=!0,e))},n.handleContextMenu=function(e){this.props.useCase.showContextMenu(e)},n.handleMouseDown=function(e){e.ctrlKey||e.metaKey?this._handleCtrlClick(e):this._handleEdgeClick(e)},n._handleCtrlClick=function(e){var t=this._extractCompId(e);if(t){var n=this.props.store,i=n.componentList,r=n.selectionInfo;i.getComponentById(t).isSelectable?(e.nativeEvent.stopImmediatePropagation(),this.props.useCase.toggleMultiSelection(t)):r.isComponentMode()&&e.nativeEvent.stopImmediatePropagation()}},n._extractCompId=function(e){var t=e.target;return t.dataset.compid?t.dataset.compid:Jr.a.ancestor(t,function(e){var t=e.dataset.compid;return void 0!=t&&""!==t}).dataset.compid},n._handleEdgeClick=function(e){var t=e.target;if(t.classList.contains("__edge-area")){e.preventDefault();var n=t.dataset.compid,i=t.dataset.direction;this.props.useCase.insertTextComp(n,i)}},t}(D.b.Component),k()(ss.prototype,"handleContextMenu",[te.autobind],Object.getOwnPropertyDescriptor(ss.prototype,"handleContextMenu"),ss.prototype),k()(ss.prototype,"handleMouseDown",[te.autobind],Object.getOwnPropertyDescriptor(ss.prototype,"handleMouseDown"),ss.prototype),ss);ls.propTypes={i18n:function(e){return e}},ls.propTypes={useCase:D.a.instanceOf(qa).isRequired,store:D.a.instanceOf(Na).isRequired,i18n:D.a.func.isRequired,isFlexible:D.a.bool};var us,ps,ds,hs,gs,fs=Object(N.b)(ls),ms=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=_.W.get("configAgent"),n._componentListStore=_.W.get("componentListStore"),n._selectionInfoStore=_.W.get("selectionInfoStore"),n._editorStatusStore=_.W.get("editorStatusStore"),n._virtualEditable=_.W.get("virtualEditable"),n._contentTextMaxLength=n._configAgent.get("productConfig.contentTextMaxLength")||1/0,n}S()(t,e);var n=t.prototype;return n.attachEvents=function(e){var t=this;Object.keys(e).forEach(function(n){var i=e[n];t._virtualEditable.on(n,i)}),this.refreshVirtualEditable()},n.destroyVirtualEditable=function(){this._virtualEditable.destroy()},n.refreshVirtualEditable=function(){this._virtualEditable.refresh()},n.toggleMultiSelection=function(e){this._selectionInfoStore.toggleSelect(e)},n.changeViewMode=function(e){this._componentListStore.compList.forEach(function(t){t.changeViewMode&&t.changeViewMode(e)}),this._editorStatusStore.changeViewMode(e),this._store.changeViewMode(e),this._virtualEditable.refresh(),this._eventDispatcher.emit(_.z.DOCUMENT_VIEWPORT_RESIZED)},n.getViewMode=function(){return this._store.viewMode},n.shouldUpdateContentLength=function(){var e=this._isMaxContentLengthOptionEnabled(),t=null===this._editorStatusStore.contentTextLength;return e&&t},n.resetAvailableContentLength=function(e){if(this._isMaxContentLengthOptionEnabled()){var t=this._componentListStore.getComponentById(e);this._isTextCountTarget(t)&&t.resetAvailableContentLength()}},n.setAvailableContentLength=function(e){if(this._isMaxContentLengthOptionEnabled()){var t=this._componentListStore.getComponentById(e);if(this._isTextCountTarget(t)){var n=this._componentListStore.getContentText().length,i=t.getText().textLength,r=this._contentTextMaxLength-(n-i);this._editorStatusStore.setContentTextLength(n),t.setAvailableContentLength(r)}}},n._isMaxContentLengthOptionEnabled=function(){return!Number.isNaN(this._contentTextMaxLength)&&Number.isFinite(this._contentTextMaxLength)},n._isTextCountTarget=function(e){return _.s.includes(e.ctype)},t}(_.f),ys=_.H.extend({name:"CanvasLayout",view:fs,useCase:qa,service:ms,store:Na}),vs=function(e){function t(){var t;return(t=e.call(this)||this)._headerLayoutService=_.W.get("headerLayoutService"),t}return S()(t,e),t.prototype.enableSticky=function(){this._headerLayoutService.enableSticky()},t}(_.m),_s=(us=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,L()(t,"_sticky",ps,P()(t)),L()(t,"_editorFocused",ds,P()(t)),L()(t,"_documentTitleFocused",hs,P()(t)),L()(t,"_viewMode",gs,P()(t)),t}S()(t,e);var n=t.prototype;return n.enableSticky=function(){this._sticky=!0},n.updateFocusedCanvas=function(e){this._editorFocused=e},n.updateDocumentTitleFocused=function(e){this._documentTitleFocused=e},n.changeViewMode=function(e){this._viewMode=e},B()(t,[{key:"sticky",get:function(){return this._sticky}},{key:"visible",get:function(){return!this._sticky||this._editorFocused&&!1===this._documentTitleFocused}},{key:"viewMode",get:function(){return this._viewMode}}]),t}(_.w),ps=k()(us.prototype,"_sticky",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ds=k()(us.prototype,"_editorFocused",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hs=k()(us.prototype,"_documentTitleFocused",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gs=k()(us.prototype,"_viewMode",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.U.VIEW_MODE_PC}}),k()(us.prototype,"sticky",[D.e],Object.getOwnPropertyDescriptor(us.prototype,"sticky"),us.prototype),k()(us.prototype,"visible",[D.e],Object.getOwnPropertyDescriptor(us.prototype,"visible"),us.prototype),k()(us.prototype,"viewMode",[D.e],Object.getOwnPropertyDescriptor(us.prototype,"viewMode"),us.prototype),us),bs=n(238),Ss=window.CSS&&CSS.supports&&CSS.supports("position","sticky"),Cs=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={fixed:!1},n._ref=D.b.createRef(),n._titleHeight=0,n._headerHeight=0,n._fixedTop=0,n._fixedPosition=null,n.props.useCase.enableSticky(),n}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=_.W.get("domAccessor").getScrollTarget(window);this._handleScroll=this._onScroll.bind(this),this._scrollArea=t===document.body?window:t,this._scrollArea&&this._scrollArea.addEventListener("scroll",this._handleScroll),this._titleResizeObserver=new bs.default(function(t){var n=t[0].contentRect.height;e._titleHeight!==n&&(e._titleHeight=n,e._updateHeaderTop())}),this._headerResizeObserver=new bs.default(function(t){var n=t[0].contentRect.height;e._headerHeight!==n&&(e._headerHeight=n,e._updateHeaderTop())}),this._headerResizeObserver.observe(this._ref.current),this._fixedTop=this._calculateFixedTop(),Ss||this.props.layoutType!==_.I.EMBED||(this._fixedPosition="absolute")},n.componentWillUnmount=function(){this._scrollArea&&this._scrollArea.removeEventListener("scroll",this._handleScroll),this._headerResizeObserver&&this._headerResizeObserver.disconnect(),this._titleResizeObserver&&this._titleResizeObserver.disconnect()},n.render=function(){var e=this.state.fixed,t=this.props,n=t.children,i=t.editorType,r=t.store,o=r.viewMode,a=r.visible,s=D.b.Children.map(n,function(e){return e&&D.b.cloneElement(e,{viewMode:o})}),c=R()("se-header","se-header-type-"+i,"se-header-sticky",{"se-is-fixed":e,"se-l-header-mobile":o===_.U.VIEW_MODE_MOBILE,"se-l-header-tablet":[_.U.VIEW_MODE_PC,_.U.VIEW_MODE_TABLET].includes(o),"se-l-header-desktop":o===_.U.VIEW_MODE_PC}),l={position:e?this._fixedPosition:null,top:e?this._fixedTop:this._getHeaderTopFromContents(),visibility:a?"visible":"hidden"};return D.b.createElement("header",{className:c,style:l,ref:this._ref},s)},n._updateHeaderTop=function(){if(!this.state.fixed){var e=this.props.outsideScroll,t=this._getHeaderTopFromContents(),n=e?t:t-this._getScrollTop();this._ref.current.style.top=n+"px"}},n._getDocumentTitleElement=function(){return this._documentTitle&&this._documentTitle.parentNode||(this._documentTitle&&this._titleResizeObserver.unobserve(this._documentTitle),this._documentTitle=_.W.get("domAccessor").querySelector(".se-documentTitle"),this._documentTitle&&this._titleResizeObserver.observe(this._documentTitle)),this._documentTitle},n._getDocumentTitleHeight=function(){var e=this._getDocumentTitleElement();if(e){var t=getComputedStyle(e),n=parseInt(t.marginTop,10)||0,i=parseInt(t.marginBottom,10)||0;return e.offsetHeight+n+i}return 0},n._getScrollTop=function(){return this._scrollArea.scrollTop||this._scrollArea.pageYOffset||0},n._getHeaderTopFromContents=function(){return this._getDocumentTitleHeight()-this._headerHeight},n._onScroll=function(){var e=this._getScrollTop(),t=this._getHeaderTopFromContents()-e,n=t<=0;this.state.fixed!==n&&this.setState({fixed:n}),n?this._ref.current.style.top=this._fixedTop+"px":this.props.outsideScroll||(this._ref.current.style.top=t+"px")},n._calculateFixedTop=function(){return this.props.layoutType===_.I.EMBED?0:_.W.get("domAccessor").getRootContainer().offsetTop||0},t}(D.b.Component);Cs.defaultProps={children:null,editorType:_.y.BASIC,layoutType:_.I.FULL_SCREEN,outsideScroll:!1},Cs.propTypes={store:D.a.instanceOf(_s).isRequired,useCase:D.a.instanceOf(vs).isRequired,children:D.a.oneOfType([D.a.array,D.a.element]),editorType:D.a.string,layoutType:D.a.string,outsideScroll:D.a.bool};var Is=Cs,Os=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=D.b.createRef(),n}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._timer=setTimeout(function(){e._ref.current&&e._ref.current.classList.remove("se-header-interaction")},400)},n.componentWillUnmount=function(){this._timer&&clearTimeout(this._timer)},n.render=function(){var e=this.props,t=e.children,n=e.editorType,i=R()("se-header","se-header-interaction","se-header-type-"+n);return D.b.createElement("header",{className:i,ref:this._ref,onDragStart:this._handleDragStart},t)},n._handleDragStart=function(e){e.stopPropagation()},t}(D.b.Component);Os.defaultProps={i18n:function(e){return e},children:null,editorType:_.y.BASIC},Os.propTypes={store:D.a.instanceOf(_s).isRequired,useCase:D.a.instanceOf(vs).isRequired,i18n:D.a.func,children:D.a.oneOfType([D.a.array,D.a.element]),editorType:D.a.string};var Ts,Ls,Es,Ps,ws,ks=function(e){var t=e.sticky,n=Object(N.b)(t?Is:Os);return D.b.createElement(n,e)},xs=n(89),Ds=(Ts=function(e){function t(t){var n;return(n=e.call(this,t)||this)._componentListStore=_.W.get("componentListStore"),n._selectionInfoStore=_.W.get("selectionInfoStore"),n._virtualEditable=_.W.get("virtualEditable"),n._domAccessor=_.W.get("domAccessor"),n}S()(t,e);var n=t.prototype;return n.destroy=function(){this._disposerReaction&&this._disposerReaction(),this._disposerReaction=null,this._virtualEditable&&(this._virtualEditable.removeListener(_.S.FOCUS,this._handleFocus),this._virtualEditable.removeListener(_.S.BLUR,this._handleBlur))},n._handleFocus=function(){this._store.updateFocusedCanvas(!0)},n._handleBlur=function(e){var t=e.relatedTarget;!this._domAccessor.getBodyContainer().contains(t)&&this._store.updateFocusedCanvas(!1)},n._getFocusedCompId=function(){return this._selectionInfoStore.focus.compId},n._updateDocumentTitleFocused=function(e){if(this._store.sticky){var t=(this._componentListStore.getComponentById(e)||{}).ctype;this._store.updateDocumentTitleFocused("documentTitle"===t)}},n.enableSticky=function(){this._store.sticky||(this._store.enableSticky(),this._disposerReaction=D.f.reaction(this._getFocusedCompId,this._updateDocumentTitleFocused),this._virtualEditable.on(_.S.FOCUS,this._handleFocus),this._virtualEditable.on(_.S.BLUR,this._handleBlur))},n.changeViewMode=function(e){this._store.changeViewMode(e)},t}(_.f),k()(Ts.prototype,"_handleFocus",[xs.autobind],Object.getOwnPropertyDescriptor(Ts.prototype,"_handleFocus"),Ts.prototype),k()(Ts.prototype,"_handleBlur",[xs.autobind],Object.getOwnPropertyDescriptor(Ts.prototype,"_handleBlur"),Ts.prototype),k()(Ts.prototype,"_getFocusedCompId",[xs.autobind],Object.getOwnPropertyDescriptor(Ts.prototype,"_getFocusedCompId"),Ts.prototype),k()(Ts.prototype,"_updateDocumentTitleFocused",[xs.autobind],Object.getOwnPropertyDescriptor(Ts.prototype,"_updateDocumentTitleFocused"),Ts.prototype),Ts),As=_.H.extend({name:"HeaderLayout",view:ks,useCase:vs,service:Ds,store:_s}),js=function(){function e(){}var t=e.prototype;return t.cloneCompList=function(e){var t=[];return e.forEach(function(e){t.push(e.cloneComponent())}),t},t.createParagraphInfoList=function(e){var t=[];return e.forEach(function(e){e.getTextUnits().forEach(function(n){n.forEach(function(i){if(!i.isEmpty()){var r=[];i.nodes.forEach(function(e){"textNode"===e.ctype?r.push(e.value):r.push("\t")});var o={value:r.join(""),compId:e.id,unitId:n.id,paraId:i.id};t.push(o)}})})}),t},t.getPlainText=function(e){var t="";return e.forEach(function(e){t+=e.value,t+="\n"}),t},t.matchCheckResultWithParagraphList=function(e,t){var n=[],i=t.length,r=0,o=0;return e.forEach(function(e){e.id=_.cb.generate(),e.excluded=!1,e.corrected=!1;for(var a=r;a<i;a++){var s=t[a],c=s.value,l=e.errata,u=c.indexOf(l,o);if(u>=0){e.position={};var p=e.position;Object.assign(p,s),delete p.value,p.startOffset=u,p.endOffset=u+l.length,o=p.endOffset,r=a;break}o=0}e.position&&n.push(e)}),n},e}(),Rs=function(e){function t(t){var n;return(n=e.call(this)||this)._store=t,n._componentListStore=_.W.get("componentListStore"),n._editorStatusStore=_.W.get("editorStatusStore"),n._virtualEditable=_.W.get("virtualEditable"),n._canvasScrollingService=_.W.get("canvasScrollingService"),n._dragAndDropService=_.W.get("dragAndDropService"),n._hotkeyBinder=_.W.get("hotkeyBinder"),n._spellChecker=_.W.get("spellChecker"),n._dataController=new js,n}S()(t,e);var n=t.prototype;return n.startSpellCheck=function(e){var t=this._dataController.cloneCompList(this._componentListStore),n=this._dataController.createParagraphInfoList(t),i=this._dataController.matchCheckResultWithParagraphList(e,n);this._enterSpellCheck(t,i)},n.getResultSpellCheck=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._dataController.getPlainText(t),e.next=3,this._spellChecker.request(n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.checkAgain=function(e,t){var n=t.spellCheckList;this._mergeCheckList(n,e);var i=n.filter(function(e){return!1===e.corrected&&!1===e.excluded}).length>0;return i&&this._store.selectFirstErrata(),i},n.getParagraphList=function(e){e||(e=this._componentListStore);var t=this._dataController.cloneCompList(e);return this._dataController.createParagraphInfoList(t)},n._mergeCheckList=function(e,t){var n=e.length,i=0;t.forEach(function(t){for(var r=i;r<n;r++){var o=e[r];if(o.corrected&&o.correctInfo.term===t.errata)return delete o.correctInfo,o.corrected=!1,o.errata=t.errata,o.suggests=t.suggests,void(i=r)}})},n._enterSpellCheck=function(e,t){this._editorStatusStore.startReadOnly(),this._canvasScrollingService.hideWindowScroll(),this._virtualEditable.disable(),this._hotkeyBinder.pause(),this._dragAndDropService.disable(),this._store.enterSpellCheck({spellCheckDocument:e,spellCheckList:t})},n._leaveSpellCheck=function(){this._editorStatusStore.finishReadOnly(),this._store.closeSpellCheck(),this._dragAndDropService.enable(),this._hotkeyBinder.unpause(),this._virtualEditable.enable(),this._virtualEditable.refresh(),this._canvasScrollingService.restoreWindowScroll()},n.confirmSpellCheck=function(e){var t=this,n=e.spellCheckList,i=e.spellCheckDocument;n.forEach(function(e){var n=e.corrected,r=e.position;if(!1!==n){var o=t._findParagraph(i,r);t._findParagraph(t._componentListStore.compList,r).replaceAllNodes(o.nodes)}}),this._leaveSpellCheck()},n._findParagraph=function(e,t){var n=t.compId,i=t.unitId,r=t.paraId,o=Object(er.a)(e,{id:n}).getTextUnits(),a=Object(er.a)(o,{id:i}).getParagraphById(r);return a.refine(),a},n.cancelSpellCheck=function(){this._leaveSpellCheck()},n.togglePopup=function(e){this._store.togglePopup(e)},n.correctAll=function(){this._store.correctAll(),this._store.checkTargetList.length>0&&this._store.selectFirstErrata()},n.hasSpellCheckTarget=function(){return 0!==this._store.checkTargetList.length},t}(_.f),Ns=n(291),Ms=n(420),Bs=_.H.extend({name:"SpellCheckLayout",view:Object(H.a)({Loader:function(){return n.e(40).then(n.bind(null,1362))}}),service:Rs,store:Ns.a,useCase:Ms.a}),Ws=n(421),Us=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=_.W.get("configAgent"),n._mathEditor=_.W.get("mathEditor"),n}S()(t,e);var n=t.prototype;return n.open=function(e){this._pauseDocumentEdit(),this._store.open(e)},n.close=function(){this._mathEditor.close(),this._store.close(),this._unpauseDocumentEdit()},n.startMathEditor=function(e){var t=this,n=this._store.params,i=this._getFormulaEditorInitData(n),r={close:this.close.bind(this),submit:function(e){n.callback&&n.callback(e.mathList),t.close()}};this._mathEditor.open(e,i,r)},n._getFormulaEditorInitData=function(e){var t=0,n=[];if(e.compList&&e.activeCompData){var i=e.activeCompData;n=e.compList,t=Object(we.a)(n,function(e){return e.id===i.id})}return{mathList:n,limitMathWidth:this._configAgent.get("productConfig.documentWidth"),defaultFontSize:this._getDefaultFontSize(e.fontSizeCode),activeTabIndex:t,uploadThumbnails:e.uploadThumbnails,calculate:this._calculate.bind(this)}},n._calculate=function(e,t){var n=this._configAgent.get("apiInfo.fetchCalculatedResult");Gt.b.get(n,{params:{query:e},success:function(e){return t(e)},error:function(e){return t(e)}})},n._getDefaultFontSize=function(e){return Number(e.replace("fs",""))},t}(_.d),Fs=n(422),zs=_.G.extend({name:"MathEditorLayer",view:Object(H.a)({Loader:function(){return n.e(41).then(n.bind(null,1324))},preload:!0}),useCase:Ws.a,service:Us,store:Fs.a}),Vs=n(292),Gs=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=_.W.get("configAgent"),n._closeCallback=null,n}S()(t,e);var n=t.prototype;return n.openVideoUploader=function(e){var t=this;return void 0===e&&(e={}),new Promise(function(n){t._resolve=n,t._pauseDocumentEdit(),t._store.open(e)})},n.openVideoMetaEdit=function(e,t,n,i,r){!1!==this._configAgent.get("modules.videoUploader.config.featureMetaEdit")&&(this._closeCallback=r,this._pauseDocumentEdit(),this._store.open({vid:e,mediaMeta:t,thumbnail:n,serviceData:i}))},n.close=function(e){var t=(void 0===e?{completed:!1}:e).completed;this._store.close(),this._unpauseDocumentEdit(),this._closeCallback&&(this._closeCallback(t),this._closeCallback=null),this._resolve&&this._resolve(t)},n.getMediaMeta=function(){return this._store.mediaMeta},n.getThumbnail=function(){return this._store.thumbnail},n.getServiceData=function(){return this._store.serviceData},n.getShowUploadButton=function(){return this._store.showUploadButton},t}(_.d),Hs=n(293),qs=_.G.extend({name:"VideoUploadLayer",view:Object(H.a)({Loader:function(){return Promise.all([n.e(11),n.e(42)]).then(n.bind(null,1368))},preload:!0}),useCase:Vs.a,service:Gs,store:Hs.a}),Js=n(323),Ks=n(166),Xs=function(e){function t(t){var n;return(n=e.call(this,t)||this)._componentFactory=_.W.get("componentFactory"),n._canvasScrollingService=_.W.get("canvasScrollingService"),n}S()(t,e);var n=t.prototype;return n.open=function(e){this._canvasScrollingService.hideWindowScroll(),this._pauseDocumentEdit(),this._store.open(e)},n.close=function(){this._store.close(),this._unpauseDocumentEdit(),this._canvasScrollingService.restoreWindowScroll()},n.changeLayout=function(e){this._store.changeLayout(e)},n.updateImages=function(e){this._store.updateImages(e)},n.reorderImages=function(e){this._store.reorderImages(e)},n.getCurrentOrderLayerStore=function(){return this._store},n.getImages=function(){return this._store.getImages()},n.getUnitsAsImageCompStores=function(){return this._store.getUnitsAsImageCompStores()},n.deleteImage=function(e){this._store.deleteImage(e)},n.changeImageUnitToShell=function(e){this._store.changeImage(e,{phase:_.O.PROCESSING,internalResource:!0,path:""})},n.replaceImageFromData=function(e){var t=this._store.images,n=t.findIndex(function(t){return t.id===e.id}),i=this._convertToCompData(e);t[n]=this._componentFactory.createComponentWithCompData(i,{attributes:{cursor:"selectable-unit",selection:"selectable-unit",erasure:"query",drop:"object"}})},n.replaceImage=function(e){var t=this._store.images;t[t.findIndex(function(t){return t.id===e.id})]=e},n.applyEditedImages=function(e){var t=this._store.images,n=e.map(function(e){var n=t.find(function(t){return t.id===e.key});return n.applyEditedImage(e),n});this.updateImages(n)},n._convertToCompData=function(e){var t=e.fileName,n=e.fileSize,i=e.width,r=e.height;return{ctype:"image",fileName:t,alt:t,fileSize:+n,width:+i,height:+r,originalWidth:+i,originalHeight:+r,path:e.url,location:null,place:null,format:e.animatedCnt>1?_.D.ANIMATED:_.D.NORMAL,internalResource:!0,phase:_.O.DONE}},n.adjustImageGroupRatio=function(e){this._store.adjustImageGroupRatio(e)},n.updatePhase=function(e,t){var n=e.format,i={phase:t};this._store.isIndividualLayout()||n!==_.D.PANORAMA&&n!==_.D.VR360||(i.displayFormat=_.D.NORMAL),e.setState(i)},n.updateImageSize=function(e,t,n){e.updateImageSize(t,n)},t}(_.d),Ys=n(167),Qs=_.G.extend({name:"ImageGroupOrderLayer",view:Object(H.a)({Loader:function(){return Promise.all([n.e(0),n.e(52)]).then(n.bind(null,1350))}}),useCase:Ks.a,service:Xs,store:Ys.a,setting:{config:{},state:{}}}),Zs=n(423),$s=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){this._store.open()},n.close=function(){this._store.close()},n.togglePanel=function(){return this._store.opened?this._store.close():this._store.open(),this._store.opened},n.openLayer=function(e,t){this._store.openLayer(),this.setLayerKey(e),this.setLayerTitle(t)},n.closeLayer=function(){this._store.closeLayer()},n.toggleLayer=function(){return this._store.isLayerOpen?this._store.closeLayer():this._store.openLayer(),this._store.isLayerOpen},n.setLayerKey=function(e){this._store.setLayerKey(e)},n.setLayerTitle=function(e){this._store.setLayerTitle(e)},t}(_.f),ec=n(424),tc=_.H.extend({name:"HelpPanelLayout",view:Object(H.a)({Loader:function(){return Promise.all([n.e(76),n.e(43)]).then(n.bind(null,1345))}}),useCase:Zs.a,service:$s,store:ec.a,setting:{config:{},state:{}}}),nc=n(491),ic=n(752),rc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(e){this._store.open(e)},n.close=function(){this._store.close()},n.saveAsCurrentFile=function(){Object(ic.a)(this._store.saveAsUrl)},t}(_.d),oc=n(425),ac=_.G.extend({name:"ContextmenuLayer",view:Object(H.a)({Loader:function(){return n.e(44).then(n.bind(null,1325))}}),useCase:nc.a,service:rc,store:oc.a}),sc=n(426),cc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){this._store.opened||(this._pauseDocumentEdit(),this._store.open())},n.close=function(){this._store.opened&&(this._store.close(),this._unpauseDocumentEdit())},n.toggleLayer=function(){this._store.opened?this.close():this.open()},t}(_.d),lc=n(427),uc=_.G.extend({name:"A11yHelpLayer",view:Object(H.a)({Loader:function(){return n.e(46).then(n.bind(null,1326))}}),useCase:sc.a,service:cc,store:lc.a}),pc=n(428),dc=function(){function e(e){this._config=e}var t=e.prototype;return t.convert=function(){throw new Error("[ERROR] 컴포넌트 데이터 변환 메소드를 구현해 주세요.")},t._makeThumbnailInfo=function(e){return e?new Promise(function(t){var n=new Image;n.onload=function(n){var i=n.currentTarget;t({ctype:"thumbnail",src:e,width:i.width,height:i.height})},n.onerror=function(){t(null)},n.src=kt.a.makeDthumbHttpsUrl(e)}):null},t._modifyPeopleInfo=function(e){var t=this;return Object(Pn.a)(e,function(e){return t._restoreSpecialChar(Object(x.a)(e,"name")||e)})},t._restoreSpecialChar=function(e){return wt.a.restoreSpecialChar(e)},t._formatWithComma=function(e){return wt.a.formatWithComma(e)},e}(),hc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t,n,i,r){var o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this._resolveThumbnailUrl(t),e.next=3,this._makeThumbnailInfo(o);case 3:return a=e.sent,s=this._makeMaterialInfo(t),a&&(s.thumbnail=a),s.iconType=n,s.provider=i,s.categoryId=r,e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._resolveThumbnailUrl=function(e){return Object(At.a)(Object(jt.a)(Object(Rt.a)(e,["bigThumbnail2","bigThumbnail","thumbnail"])))},n._makeMaterialInfo=function(e){var t=e.title,n=e.author,i=this._restoreSpecialChar(t)||"미등록",r="string"==typeof n?this._restoreSpecialChar(n.replace(/\|/gi,", ").replace(/ 지음$/gi,"")):"미등록",o=this._restoreSpecialChar(e.publisher);return{title:i,description:"저자 : "+(r||"미등록")+" · 출판 : "+(o||"미등록"),url:e.linkUrl}},t}(dc),gc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t,n,i,r){var o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(x.a)(t,"imageUrls.poster.url",""),e.next=3,this._makeThumbnailInfo(o);case 3:return a=e.sent,s=this._makeMaterialInfo(t),a&&(s.thumbnail=a),s.iconType=n,s.provider=i,s.categoryId=r,e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._makeMaterialInfo=function(e){return{title:this._restoreSpecialChar(e.titles.korean)||"미등록",description:"감독 : "+(""+this._modifyPeopleInfo(e.directors.directors)||"미등록")+" · 출연 : "+(""+this._modifyPeopleInfo(e.actors.actors)||"미등록"),url:e.destinationUrl}},t}(dc),fc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t,n,i,r){var o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(x.a)(t,"image",""),e.next=3,this._makeThumbnailInfo(o);case 3:return a=e.sent,s=this._makeMaterialInfo(t),a&&(s.thumbnail=a),s.iconType=n,s.provider=i,s.categoryId=r,e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._makeMaterialInfo=function(e){return{title:this._restoreSpecialChar(e.title)||"미등록",description:"연출 : "+(""+this._modifyPeopleInfo(e.producer)||"미등록")+" · 출연 : "+(""+this._modifyPeopleInfo(e.guest)||"미등록"),url:e.url}},t}(dc),mc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t,n,i,r){var o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(x.a)(t,"albumImg",""),e.next=3,this._makeThumbnailInfo(o);case 3:return a=e.sent,s=this._makeMaterialInfo(t),a&&(s.thumbnail=a),s.iconType=n,s.provider=i,s.categoryId=r,e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._makeMaterialInfo=function(e){return{title:this._restoreSpecialChar(e.title)||"미등록",description:"아티스트 : "+(this._restoreSpecialChar(e.artist.replace(/♩/gi,", "))||"미등록")||"미등록",url:e.albumUrl}},t}(dc),yc=[[null,1,10,7,4,1,1,1,1],[null,2,11,8,5,2,2,2,2],[null,3,12,9,6,3,3,3,3]],vc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t,n,i,r){var o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(x.a)(t,"imageUrl",""),e.next=3,this._makeThumbnailInfo(o);case 3:return a=e.sent,s=this._makeMaterialInfo(t),a&&(s.thumbnail=a),s.iconType=n,s.provider=i,s.categoryId=r,e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._makeMaterialInfo=function(e){var t=this._restoreSpecialChar(e.productTitle),n=this._convertToGoodsType(e.mpTp,e.prodTp),i=this._makeLink(n,e),r=this._formatWithComma(e.price),o=this._isCompareProduct(n)?"최저 "+r+"원":e.mallNameOrg;return{title:t,description:this._restoreSpecialChar(o),url:i}},n._makeLink=function(e,t){var n=this._isCompareProduct(e);return t.mallProductUrl?t.mallProductUrl:!0===n?"https://search.shopping.naver.com/catalog/"+t.id+"?section=price":"https://search.shopping.naver.com/catalog/"+t.id},n._convertToGoodsType=function(e,t){var n=yc[e];return n?n[t]:null},n._isCompareProduct=function(e){return Object(Ft.a)([1,4],e)},t}(dc),_c=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t,n,i,r){var o,a,s,c;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchNewsDetail(t);case 2:return o=e.sent,a=this._resolveThumbnailUrl(o),e.next=6,this._makeThumbnailInfo(a);case 6:return s=e.sent,c=this._makeMaterialInfo(o),s&&(c.thumbnail=s),c.iconType=n,c.provider=i,c.categoryId=r,e.abrupt("return",c);case 13:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._resolveThumbnailUrl=function(e){return Object(At.a)(Object(jt.a)(Object(Rt.a)(e,["images[0].url","images.image[0].url","images.image.url"])))},n._fetchNewsDetail=function(e){return Gt.a.get(this._config.newsDetailAPI,{params:{oid:e.officeId||e.subId,aid:e.articleId||e.dataId},success:function(e){return Object(x.a)(e,"items[0]")}})},n._makeMaterialInfo=function(e){return{title:this._restoreSpecialChar(e.title)||"미등록",description:this._restoreSpecialChar(e.officeHname)||"미등록",url:e.orgUrl}},t}(dc),bc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t,n,i,r){var o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(x.a)(t,"imageUrl",""),e.next=3,this._makeThumbnailInfo(o);case 3:return a=e.sent,s=this._makeMaterialInfo(t),a&&(s.thumbnail=a),s.iconType=n,s.provider=i,s.categoryId=r,e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._makeMaterialInfo=function(e){var t=this._resolveDatas(e),n=t.title,i=t.genre,r=t.period,o=t.link;return{title:n,description:"장르 : "+(i||"미등록")+" · 기간 : "+(r||"미등록"),url:o}},n._checkExhibition=function(e){return"269"!==e.searchLinkParameter.pkid},n._resolveDatas=function(e){var t=e.rendingUrl,n=e.formattedPeriod,i=this._checkExhibition(e);return{title:i?e.name:e.title,genre:i?"전시":e.majorGenreName,period:n,link:t}},t}(dc),Sc={travel:function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.convert=function(){var e=Tt()(It.a.mark(function e(t,n,i,r){var o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this._resolveThumbnailUrl(t),e.next=3,this._makeThumbnailInfo(o);case 3:return a=e.sent,s=this._makeMaterialInfo(t),a&&(s.thumbnail=a),s.iconType=n,s.provider=i,s.categoryId=r,e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),n.convertToDragItem=function(e){return this._makeMaterialInfo(e)},n._resolveThumbnailUrl=function(e){return Object(At.a)(Object(jt.a)(Object(Rt.a)(e,["thumbnailImageUrl"])))},n._makeMaterialInfo=function(e){var t=e.nameKo,n=e.subtype,i=e.linkUrl,r=e.overallRating,o=e.starRating,a=this._restoreSpecialChar(t)||"미등록",s=this._getDescriptionString(e),c=this._getInfoString(e);return{title:a,description:"설명 : "+s+" · "+Jt.b[n].label+" : "+c,url:i,subtype:n,overallRating:r,starRating:o}},n._getDescriptionValues=function(e){var t=e.subtype,n=e.description,i=e.overallRating,r=e.starRating,o=[];if(t===Jt.c.OVERSEAS_HOTEL){if(!i&&!r)return o;i&&o.push(i),r&&o.push(r)}else o.push(this._restoreSpecialChar(n));return o},n._getDescriptionString=function(e){var t=this._getDescriptionValues(e);return this._makeValues(t).join(", ")||"미등록"},n._getInfoValues=function(e){var t=e.subtype,n=e.continent,i=e.countryName,r=e.cityName,o=e.subCategory,a=e.tags;return t===Jt.c.OVERSEAS_COUNTRY?[n]:t===Jt.c.OVERSEAS_CITY?[i]:t===Jt.c.OVERSEAS_POI?[r,o]:t===Jt.c.OVERSEAS_HOTEL?[r,i]:t===Jt.c.DOMESTIC_GEO?a||[]:void 0},n._getInfoString=function(e){var t=this._getInfoValues(e).filter(function(e){return e}),n=e.subtype;return t.length?n===Jt.c.DOMESTIC_GEO?this._makeValues(t).reduce(function(e,t){return e+"#"+t+" "},""):this._makeValues(t).join(", "):"미등록"},n._makeValues=function(e){var t=this;return e.map(function(e){return t._restoreSpecialChar(e)})},t}(dc),book:hc,movie:gc,broadcast:fc,music:mc,shopping:vc,news:_c,show:bc},Cc=(Ls=function(e){function t(t){var n;(n=e.call(this,t)||this)._store=t;var i=_.W.get("configAgent").get("apiInfo"),r=n._store.category,o=r.categoryInfos,a=r.categorySet;return n._categoryInfos=o,n._categorySet=a,n._searchDataManager=n._initializeSearchDataManager(i),n._dataConverter=n._initializeDataConverter(i),n}S()(t,e);var n=t.prototype;return n.open=function(e){this._pauseDocumentEdit(),this._store.open(e)},n.close=function(){this._store.close(),this._unpauseDocumentEdit()},n.setIsUrl=function(e){void 0===e&&(e=!0),this._store.setIsUrl(e)},n.setLoadingState=function(e){void 0===e&&(e=!1),this._store.setLoadingState(e)},n.search=function(e){void 0===e&&(e={}),this.clearSearchResult(),this.setLoadingState(!0),this._store.isFetchNextPageError=!1,this._store.isBuiltInSet?this._searchBuiltInCategory(e):this._search(e)},n.updateCrawledResult=function(e,t){if(!e||"image"===e.ctype){return this.setLoadingState(!1),void this._store.updateSearchResult({searchItems:[],totalCount:0,totalPage:0})}var n=e.ctype,i=e.title,r=e.description,o=e.thumbnail,a=e.thumbnailUrl,s=e.inputUrl,c=e.url,l="oembed"===n,u=o&&o.src||"",p=l?a:u,d=l?s:c,h=this._store.getProvider(),g={searchItems:[{title:i,description:r,url:d,thumbnail:{src:p||""},iconType:"normal",provider:h,categoryId:"web-url"}],totalCount:1,totalPage:1};this.updateKeyword(t),this.setLoadingState(!1),this.clearSearchResult(),this._store.updateSearchResult(g)},n._updateSubCategory=function(e){var t=this._getCategoriesByTabId(e);this._store.updateSubCategory(t.subCategories)},n.changeTab=function(e,t){t&&(this._store.tags=[]);var n=e?this._getTabIndexById(e):0;this._store.changeTabIndex(n),this._updateSubCategory(e),this.search()},n.changeSubCategory=function(e,t){t&&(this._store.tags=[]),this.clearSearchResult(),this._store.changeSubCategory(e),this.search({subCategoryIndex:e})},n.checkOnlyUrlTags=function(){for(var e=this._store.plainTagItem,t=0;t<e.length;t++){if("web-url"!==e[t].links[0].categoryId)return!1}return!0},n.checkAddibleTag=function(e){return!!this._store.allowTagOverlap||!this.getTags().some(function(t){return t.links[0].url===e})},n.addNewTag=function(e){Object.assign(e,{ctype:"mediaTag"}),Object.assign(e.point,{ctype:"point"}),e.links.forEach(function(e){Object.assign(e,{ctype:"mediaTagLink"}),Object.assign(e.thumbnail,{ctype:"thumbnail"});var t=e.subtype,n=e.description,i=e.overallRating,r=e.starRating;if(t===Jt.c.OVERSEAS_HOTEL){var o=n.split(" · ");i&&(o[0]="설명 : "+(i?"★ "+i:"")+(r?", ":"")+" "+(r||"")),Object.assign(e,{description:o.join(" · ")})}}),this._store.setIsUrl(!1),this._store.addNewTag(e),this._updateLastUsedCategory(),this.updateKeyword("")},n._updateLastUsedCategory=function(){var e=this._store,t=e.currentTabIndex,n=e.currentSubCategoryIndex;this._store.updateLastUsedCategory(t,n)},n.delTag=function(e){this._store.delTag(e)},n.updateTag=function(e,t){this._store.updateTag(e,t)},n.isFullTagItems=function(){return this._store.tags.length>=this._store.maxTagItems},n.clearSearchResult=function(){this._store.clearSearchResult()},n.clearSearchLayer=function(){this._store.clearSearchKeyword(),this._store.clearSearchResult()},n.clearSearchKeyword=function(){this._store.clearSearchKeyword()},n.updateKeyword=function(e){this._store.updateKeyword(e)},n.updatePinPoint=function(e){var t=e.dragTarget,n=e.x,i=e.y,r=Number(t.dataset.tagindex);this._store.updatePinPoint(r,n,i)},n.nextPage=function(){var e=Tt()(It.a.mark(function e(){var t,n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setLoadingState(!0),t=this._store.currentPage,n=t+1,!this._store.isBuiltInSet){e.next=12;break}return e.next=7,this._searchDataManager.nextPage();case 7:i=e.sent,this._store.setCurrentPage(n),this._searchSuccess(i),e.next=13;break;case 12:this._search({page:n});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.getAllowUrlAttach=function(){return this._store.allowUrlAttach},n.getTabIdByIndex=function(e){return this._store.getTabIdByIndex(e)},n.getTabLabelByIndex=function(e){return this._store.getTabLabelByIndex(e)},n.getTags=function(){return this._store.plainTagItem},n.getPreservedTag=function(){return this._store.preservedTags},n.getCompId=function(){return this._store.imageCompId},n.getDuplicateConfig=function(){return this._store.duplicateConfig},n.getCurrentTabIndex=function(){return this._store.currentTabIndex},n.getcurrentSubCategoryIndex=function(){return this._store.currentSubCategoryIndex},n._getTabIndexById=function(e){return this._store.getTabIndexById(e)},n._getSearchKeyword=function(){return this._store.keyword},n._getCurrentPage=function(){return this._store.currentPage},n._getCategoriesByTabId=function(e){var t=this._categoryInfos.find(function(t){return t.id===e});return{category:t,subCategories:t.subCategories}},n._getSearchAPI=function(e){void 0===e&&(e={});var t=this._store,n=t.currentTabIndex,i=t.currentSubCategoryIndex,r=void 0===i?0:i,o=this._categorySet[n],a=this._getCategoriesByTabId(o);if(a.category.api)return a.category.api;var s=e.subCategoryIndex||r;return a.subCategories[s].api},n._searchBuiltInCategory=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s,c;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._store.getCurrentCategoryIdByIndex(),i=t.keyword||this._getSearchKeyword(),r=t.page||this._getCurrentPage(),o=n.replace("material-",""),a={size:10},s=10*r+1,this._store.updateKeyword(i),Object.assign(a,{keyword:i}),this._store.updateCurrentPage(r),Object.assign(a,{s:s}),e.prev=10,e.next=13,this._searchDataManager.search(o,a);case 13:c=e.sent,this._searchSuccess(c),e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(10),e.abrupt("return",this.searchFail(e.t0));case 20:case"end":return e.stop()}},e,this,[[10,17]])}));return function(t){return e.apply(this,arguments)}}(),n._search=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.keyword||this._getSearchKeyword(),i=t.page||this._getCurrentPage(),r={size:10},this._store.updateKeyword(n),Object.assign(r,{keyword:n}),this._store.updateCurrentPage(i),Object.assign(r,{page:i}),o=this._getSearchAPI(t),Object.assign(r,{api:o}),e.next=11,Gt.a.get(r.api,{params:{q:r.keyword,size:r.size,page:r.page},options:{query:r.keyword},success:this._searchSuccess,error:this.searchFail});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._searchSuccess=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,this._resultToTagData(t);case 3:n=e.sent,this._store.updateSearchResult({searchItems:n.items,totalCount:n.totalCount,totalPage:n.totalPage}),e.next=8;break;case 7:console.warn("The search results are empty.");case 8:this._store.isFetchNextPageError=!1,this.setLoadingState(!1);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.searchFail=function(){this._store.isFetchNextPageError=!0},n._resultToTagData=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._store.isBuiltInSet,i=n?this._formatMaterialData(t):this._formatCustomData(t),!n){e.next=8;break}return e.next=5,this._materialToTag(t.items);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=this._customSearchToTag(t.items);case 9:return r=e.t0,Object.assign(i,{items:r}),e.abrupt("return",i);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._formatCustomData=function(e){return{totalCount:e.totalCount,totalPage:e.totalPage,page:e.page,size:e.size}},n._formatMaterialData=function(e){var t=e.total,n=e.count,i=e.next;return{totalCount:t,totalPage:Math.ceil(t/10),page:Math.floor(i.s/10),size:n}},n._customSearchToTag=function(e){var t=this._store.getCurrentCategoryIdByIndex(),n=this._store.getIconType(t),i=this._store.getProvider();return e.map(function(e){return{id:e.id,title:e.title,description:e.description,url:e.url,thumbnail:{src:e.thumbnail},iconType:n,provider:i,categoryId:t,meta:e.meta}})},n._materialToTag=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._store.getCurrentCategoryIdByIndex(),i=this._store.getIconType(n),r=this._store.getProvider(),o=this._dataConverter[n],e.next=6,t.map(function(e){return o.convert(e,i,r,n)});case 6:return a=e.sent,e.abrupt("return",Promise.all(a));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.getTagChanged=function(){return JSON.stringify(this._store.preservedTags)!==JSON.stringify(this._store.plainTagItem)},n._initializeSearchDataManager=function(e){return new mn({travel:{API:{SEARCH:e.fetchTravels}},book:{API:{SEARCH:e.fetchBooks},fetchCount:10},movie:{API:{SEARCH:e.fetchMovies},fetchCount:10},broadcast:{API:{SEARCH:e.fetchBroadcasts},fetchCount:10},music:{API:{SEARCH:e.fetchMusics},fetchCount:10},shopping:{API:{SEARCH:e.fetchShoppingItems},fetchCount:10},news:{API:{SEARCH:e.fetchNews,NEWS_DETAIL:e.fetchNewsDetail},fetchCount:10},show:{API:{SEARCH:e.fetchShows},fetchCount:10}})},n._initializeDataConverter=function(e){var t=Sc.book,n=Sc.movie,i=Sc.broadcast,r=Sc.music,o=Sc.shopping,a=Sc.news,s=Sc.show;return{"material-travel":new(0,Sc.travel),"material-book":new t,"material-movie":new n,"material-broadcast":new i,"material-music":new r,"material-shopping":new o,"material-news":new a({newsDetailAPI:e.fetchNewsDetail}),"material-show":new s}},t}(_.d),k()(Ls.prototype,"_searchSuccess",[te.autobind],Object.getOwnPropertyDescriptor(Ls.prototype,"_searchSuccess"),Ls.prototype),k()(Ls.prototype,"searchFail",[te.autobind],Object.getOwnPropertyDescriptor(Ls.prototype,"searchFail"),Ls.prototype),Ls),Ic=n(429),Oc=_.G.extend({name:"ImageTagLayer",view:Object(H.a)({Loader:function(){return n.e(47).then(n.bind(null,1351))}}),useCase:pc.a,service:Cc,store:Ic.a}),Tc=n(445),Lc={default:"ko",en:"ko",ko:"en"},Ec=(Es=function(e){function t(t){var n;(n=e.call(this,t)||this)._selectionInfoStore=_.W.get("selectionInfoStore"),n._virtualEditable=_.W.get("virtualEditable"),n._configAgent=_.W.get("configAgent"),n._translateAPI=n._configAgent.get("apiInfo").fetchTranslate;var i=(n._language||"").split("-")[0];if(i===n._store.toCode){var r=Lc[i]||Lc.default;n._updateStore("","",r,i)}return n}S()(t,e);var n=t.prototype;return n.open=function(){var e=Tt()(It.a.mark(function e(t,n,i){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=this._store.toCode),void 0===i&&(i="auto"),this._pauseDocumentEdit(),e.next=5,this._translate(t,n,i);case 5:this._open();case 6:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}(),n.close=function(){this._store.close(),this._unpauseDocumentEdit()},n.setDetectionMode=function(e){this._store.setDetectionMode(e)},n.setLoadingState=function(e){this._store.loading=e},n.translate=function(e,t,n){void 0===e&&(e=this._store.sourceText),void 0===t&&(t=this._store.toCode),void 0===n&&(n=this._store.fromCode),this.setLoadingState(!0),this._translate(e,t,n)},n._translate=function(){var e=Tt()(It.a.mark(function e(t,n,i){var r,o,a,s,c;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._getValidText(t),o="",a=this._store.detectionMode?"auto":i,s=n,!r){e.next=11;break}return e.next=7,this._requestTranslate(r,n,a);case 7:c=e.sent,a=c.sourceLangCode?c.sourceLangCode:a,s=c.targetLangCode?c.targetLangCode:s,o=c.translatedText;case 11:this._updateStore(o,r,s,a),this.setLoadingState(!1);case 13:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}(),n._getValidText=function(e){var t=this._store.MAX_LENGTH,n=e;return e.length>t&&(this._store.textOvered=!0,n=e.slice(0,t)),n},n._updateStore=function(e,t,n,i){this._store.update(e,t,n,i)},n._open=function(){this._store.open()},n._requestTranslate=function(){var e=Tt()(It.a.mark(function e(t,n,i){var r,o,a,s,c,l;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.trim()){e.next=2;break}return e.abrupt("return",{sourceLangCode:i,targetLangCode:n,translatedText:t});case 2:return r={},e.next=5,this._request(t,n,i);case 5:if(o=e.sent,this._setUnknownLangCode(!1),"N2MT05"!==o.errorCode){e.next=15;break}return n=Lc[n]||Lc.default,e.next=11,this._request(t,n,i);case 11:o=e.sent,r.newTargetLangCode=n,e.next=16;break;case 15:"N2MT09"===o.errorCode?o={message:{result:{translatedText:t,srcLangType:n}}}:"N2MT02"===o.errorCode&&this._setUnknownLangCode(!0);case 16:return a=o.message.result,s=a.srcLangType,c=a.translatedText,l=a.tarLangType,r.targetLangCode=l,r.sourceLangCode=s,r.translatedText=c,e.abrupt("return",r);case 21:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}(),n._request=function(){var e=Tt()(It.a.mark(function e(t,n,i){var r,o,a;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i||"auto",o=this._translateAPI,a=o+("?source="+r+"&target="+n),e.next=6,Gt.b.post(a,{data:t,options:{withCredentials:!1,headers:{"Content-Type":"text/html"}},success:function(e){return e},error:function(e){var t={};try{t=JSON.parse(e.errorDetailMessage)}catch(e){}return{message:{result:{translatedText:"",srcLangType:r,tarLangType:n}},errorCode:t.errorCode}}});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}(),n._setUnknownLangCode=function(e){this._store.unknownLangCode=e},n.resetSourceText=function(){this._store.resetSourceText()},n.resetTextOvered=function(){this._store.textOvered=!1},n.changeSourceLangCode=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.code,i=t.fromCode,r=t.toCode,n!==i){e.next=3;break}return e.abrupt("return");case 3:if(n!==r){e.next=7;break}return e.next=6,this._exchangeLangCode();case 6:return e.abrupt("return");case 7:return o=this._store,a=o.translatedText,s=o.sourceText,this.setDetectionMode("auto"===n),this._updateStore(a,s,r,n),e.next=12,this.translate();case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.changeTargetLangCode=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.code,i=t.fromCode,r=t.toCode,n!==r){e.next=3;break}return e.abrupt("return");case 3:if(n!==i){e.next=7;break}return e.next=6,this._exchangeLangCode();case 6:return e.abrupt("return");case 7:return o=this._store,a=o.translatedText,s=o.sourceText,this._updateStore(a,s,n,i),e.next=11,this.translate();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._exchangeLangCode=function(){var e=Tt()(It.a.mark(function e(){var t,n,i,r,o,a;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._store,n=t.fromCode,i=t.toCode,r=Lc[i]||Lc.default,o="auto"===n?r:n,a=i,this.setDetectionMode(!1),e.next=7,this.translate(this.sourceText,o,a);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),B()(t,[{key:"sourceText",get:function(){var e=this._store.sourceText;return e.length<1?"":e}}]),t}(_.d),k()(Es.prototype,"_updateStore",[D.d],Object.getOwnPropertyDescriptor(Es.prototype,"_updateStore"),Es.prototype),k()(Es.prototype,"changeSourceLangCode",[D.d],Object.getOwnPropertyDescriptor(Es.prototype,"changeSourceLangCode"),Es.prototype),k()(Es.prototype,"changeTargetLangCode",[D.d],Object.getOwnPropertyDescriptor(Es.prototype,"changeTargetLangCode"),Es.prototype),Es),Pc=n(446),wc=_.G.extend({name:"TranslationLayer",view:Object(H.a)({Loader:function(){return n.e(53).then(n.bind(null,1369))}}),useCase:Tc.a,service:Ec,store:Pc.a,setting:{config:{},state:{}}}),kc=n(307),xc=n(447),Dc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=_.W.get("configAgent"),n._componentFactory=_.W.get("componentFactory"),n._selectionInfoStore=_.W.get("selectionInfoStore"),n._componentListStore=_.W.get("componentListStore"),n}S()(t,e);var n=t.prototype;return n.open=function(e){this._pauseDocumentEdit(),this._store.open(e)},n.close=function(){this._store.close(),this._unpauseDocumentEdit()},n.changeAccountId=function(e){this._store.changeAccountId(e)},n.changeBannerType=function(e){this._store.changeBannerType(e)},n.changeImage=function(e){this._store.changeImage(e)},n.createTalktalkComponent=function(){var e=this._store,t=e.bannerType,n=e.selectedAccountInfo,i=e.image,r={ctype:"talktalk",layout:t,accountId:n.accountId,profileName:n.profileName},o=this._componentFactory.createComponentWithCompData(r);return t===xc.a.CUSTOM&&(o.image=this._imageDataToComp(i)),o},n.editTalktalkComponent=function(){var e=this._store,t=e.bannerType,n=e.selectedAccountInfo,i=e.image,r=this._selectionInfoStore.toValidJSON(),o=this._componentListStore.getSelectedComponents(r),a=Object(At.a)(o),s={layout:t,accountId:n.accountId,profileName:n.profileName};t===xc.a.CUSTOM&&a.updateImage(this._imageDataToComp(i)),a.updateAccount(s)},n._imageDataToComp=function(e){var t=this._configAgent.get("editorInfo"),n=this._configAgent.get("infraInfo.photoInfra.imageHost");return this._componentFactory.createComponentWithCompData({ctype:"image",src:""+n+e.url+"?type="+t.thumbnailType.normal,internalResource:!0,caption:null,domain:n,path:e.path+"/"+e.fileName,displayFormat:"normal",width:parseInt(e.width,10),height:parseInt(e.height,10),fileSize:parseInt(e.fileSize,10),fileName:e.fileName})},t}(_.d),Ac=n(308),jc=_.G.extend({name:"TalktalkEditLayer",view:Object(H.a)({Loader:function(){return n.e(54).then(n.bind(null,1370))}}),useCase:kc.a,service:Dc,store:Ac.a}),Rc=n(442),Nc=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(e){var t=e.onClickChange,n=e.onClickRemove;this._store.opened||(this._onClickChange=t||function(){},this._onClickRemove=n||function(){},this._pauseDocumentEdit(),this._store.open())},n.close=function(){this._store.opened&&(this._store.close(),this._unpauseDocumentEdit())},n.change=function(){this._store.opened&&(this.close(),this._onClickChange())},n.remove=function(){this._store.opened&&(this.close(),this._onClickRemove())},t}(_.d),Mc=n(443),Bc=_.G.extend({name:"ImageLocationEditLayer",view:Object(H.a)({Loader:function(){return n.e(51).then(n.bind(null,1328))}}),useCase:Rc.a,service:Nc,store:Mc.a}),Wc=n(128),Uc=n(127),Fc=n(834),zc=_.G.extend({name:"AiLayer",view:Object(H.a)({Loader:function(){return n.e(55).then(n.bind(null,1347))}}),store:Wc.b,useCase:Uc.a,service:Fc.a}),Vc=function(e){function t(){var t;return(t=e.call(this)||this)._aiBannerLayoutService=_.W.get("aiBannerLayoutService"),t}return S()(t,e),t.prototype.close=function(){this._aiBannerLayoutService.closePermanently()},t}(_.m),Gc=n(1107),Hc=JSON.stringify({hidden:!0}),qc=(Ps=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,L()(t,"_opened",ws,P()(t)),t}S()(t,e);var n=t.prototype;return n.open=function(){this._opened=!0},n.close=function(){this._opened=!1},n.closePermanently=function(){Gc.a.set("AI_BANNER",Hc),this._opened=!1},B()(t,[{key:"opened",get:function(){return!(Gc.a.get("AI_BANNER")||{}).hidden&&this._opened}}]),t}(_.w),ws=k()(Ps.prototype,"_opened",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k()(Ps.prototype,"opened",[D.e],Object.getOwnPropertyDescriptor(Ps.prototype,"opened"),Ps.prototype),Ps),Jc=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._handleClose=function(e){Be.a.log(e.nativeEvent,"lbbai.close"),t.props.useCase.close(),e.nativeEvent.stopImmediatePropagation()},t}return S()(t,e),t.prototype.render=function(){return this.props.store.opened?D.b.createElement("div",{className:"se-ai-banner"},D.b.createElement("strong",{className:"se-ai-banner-text"},"블로그는 소중한 개인 공간이므로 직접 글을 검토하고 수정하여 완성도 있는 글을 써보세요."),D.b.createElement("button",{type:"button",onClick:this._handleClose,className:"se-ai-banner-close-button"},D.b.createElement("span",{className:"se-blind"},"닫기"))):null},t}(D.b.Component);Jc.propTypes={store:D.a.instanceOf(qc).isRequired,useCase:D.a.instanceOf(Vc).isRequired};var Kc,Xc,Yc,Qc,Zc,$c,el,tl,nl,il=Object(N.b)(Jc),rl=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.open=function(){this._store.open()},n.close=function(){this._store.close()},n.closePermanently=function(){this._store.closePermanently()},t}(_.f),ol=_.H.extend({name:"AiBannerLayout",view:il,useCase:Vc,service:rl,store:qc}),al=n(1124),sl=Object(Pn.a)(s.a,function(e){return e}),cl=(Kc=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"buttonSetMap",Xc,P()(n)),L()(n,"focusButtonId",Yc,P()(n)),L()(n,"activeButtonId",Qc,P()(n)),L()(n,"activePanelButtonId",Zc,P()(n)),L()(n,"selectedButtonStates",$c,P()(n)),L()(n,"toolbarState",el,P()(n));var i=t,r=i.config,o=void 0===r?{}:r,a=i.state,s=void 0===a?{}:a;n._pluginButtonRegistry=_.W.get("pluginButtonRegistry"),n._configAgent=_.W.get("configAgent"),n._additionalButtonsMap={},n._generateAdditionalButtonsMap(),n.activePanelButtonId=Object(x.a)(s,"activePanelButtonId",n.activePanelButtonId),n.activeButtonId=Object(x.a)(s,"activeButtonId",n.activeButtonId),n.buttonSetMap=n._rearrangeButtonSet(o);var c=n._configAgent.get("productConfig.quotation.layouts"),l=n._configAgent.get("productConfig.horizontalLine.layouts");return n.selectedButtonStates=Object(x.a)(s,"state",{"horizontal-line":l?l[0]:"default",quotation:c?c[0]:"default"}),n}S()(t,e);var n=t.prototype;return n.deactivateAllButtons=function(){this.activeButtonId=""},n.updateHorizontalSelectedValue=function(e){e&&(this.selectedButtonStates["horizontal-line"]=e)},n.updateQuotationSelectedValue=function(e){e&&(this.selectedButtonStates.quotation=e)},n.focusFirstButton=function(){this.focusButtonId=this.buttonSetMap.buttonSet[0]},n.blurFocusedButton=function(){this.focusButtonId=""},n.isFirstButton=function(e){return this.buttonSetMap.buttonSet[0]===e},n.togglePanelButton=function(e){var t=this.activePanelButtonId===e;this.activePanelButtonId=t?"":e},n.setPanelButtonEnable=function(e,t){var n=this.activePanelButtonId===e;t?this.activePanelButtonId=e:n&&(this.activePanelButtonId="")},n.toggleButton=function(e){var t=this.activeButtonId===e;this.activeButtonId=t?"":e},n.updateDisplayButtonSet=function(e){var t=this.buttonSetMap.buttonSet;if(e<t.length){var n=t.slice(0,e-1),i=t.slice(n.length,t.length),r=n.concat("more-view");this.buttonSetMap.displayButtonSet=r,this.buttonSetMap.moreButtonSet=i}},n.resetDisplayButtonSet=function(){var e=this.buttonSetMap.buttonSet;this.buttonSetMap.displayButtonSet.replace(e),this.buttonSetMap.moreButtonSet=[]},n.updateToolbarState=function(e){this.toolbarState=e},n.highlight=function(e,t){if(t&&e)return We.b.get(t,e)},n.updateAdditionalButtonOption=function(e,t,n){n&&(e.option=this._additionalButtonsMap[t])},n.updateHighlight=function(e,t){var n=t?e.option.name:e.buttonName,i=t?Re()({id:e.option.name},e.option.highlight):this._configAgent.get("productConfig.highlight"),r=this.highlight(n,i);r&&(e.highlight=r)},n.resolveButtonInfoByStates=function(e,t){var n=this.selectedButtonStates[t];return n?Re()({selectedValue:n},e,{value:Object(x.a)(this.toolbarState,e.propertyName)}):Re()({},e,{value:Object(x.a)(this.toolbarState,e.propertyName)})},n._getButtonsWithButtonSet=function(e){var t=this;return void 0===e&&(e=[]),e.reduce(function(e,n){var i=t._isAdditionalButton(n),r=t._pluginButtonRegistry.getButtonInfo({compType:"default",toolbarName:"documentToolbar",buttonName:i?"additional-button":n});return r&&(t.updateAdditionalButtonOption(r,n,i),t.updateHighlight(r,i),e.push(t.resolveButtonInfoByStates(r,n))),e},[])},n._isAdditionalButton=function(e){return Object(eo.a)(this._additionalButtonsMap,e)},n._generateAdditionalButtonsMap=function(){var e=this;(this._configAgent.get("productConfig.documentToolbar.additionalButtons")||[]).forEach(function(t){var n=t.name;e._additionalButtonsMap[n]=t})},n._rearrangeButtonSet=function(e){var t,n=this,i=this._configAgent.get("productConfig.layoutType"),r=Object(x.a)(e,"buttonSetMap",this.buttonSetMap),o=this._configAgent.get("productConfig.documentToolbar.buttonSet"),a=Object.keys(this._additionalButtonsMap)||[],s=o||r.buttonSet||[],c=(s=s.reduce(function(e,t){return(sl.includes(t)||n._isAdditionalButton(t))&&e.push(t),e},[])).indexOf("separator-bar");(i===_.I.EMBED&&c>-1&&s.splice(c,1),(a=Object(gr.a)(a,s,function(e,t){return-1!==e.indexOf(t)})).length>0)&&(t=s).splice.apply(t,[-1===c?s.length:c,0].concat(a));return{buttonSet:s=this._filterByExcludeComponents(s),displayButtonSet:s,moreButtonSet:[]}},n._filterByExcludeComponents=function(e){var t=this._configAgent.get("plugins.excludeComponents");if(!t)return e;var n=t.map(function(e){return Object(al.a)(e)});return t.includes("placesMap")&&n.push("map"),t.includes("image")&&(n.push("social-media-image"),t.includes("material")&&n.push("search")),t.includes("oglink")&&n.push("moment"),Object(wn.a)(e,n)},B()(t,[{key:"buttons",get:function(){return this._getButtonsWithButtonSet(this.buttonSetMap.displayButtonSet)}},{key:"moreButtons",get:function(){return this._getButtonsWithButtonSet(this.buttonSetMap.moreButtonSet)}}]),t}(_.w),Xc=k()(Kc.prototype,"buttonSetMap",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{buttonSet:[],displayButtonSet:[],moreButtonSet:[]}}}),Yc=k()(Kc.prototype,"focusButtonId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qc=k()(Kc.prototype,"activeButtonId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Zc=k()(Kc.prototype,"activePanelButtonId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$c=k()(Kc.prototype,"selectedButtonStates",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),el=k()(Kc.prototype,"toolbarState",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),k()(Kc.prototype,"buttons",[D.e],Object.getOwnPropertyDescriptor(Kc.prototype,"buttons"),Kc.prototype),k()(Kc.prototype,"moreButtons",[D.e],Object.getOwnPropertyDescriptor(Kc.prototype,"moreButtons"),Kc.prototype),Kc),ll=(tl=function(e){function t(){var t;t=e.call(this)||this;var n=_.W.get("configAgent");return t._documentToolbarLayoutService=_.W.get("documentToolbarLayoutService"),t._propertyToolbarLayoutService=_.W.get("propertyToolbarLayoutService"),t._toolbarService=_.W.get("toolbarService"),!1!==n.get("productConfig.documentToolbar")&&t._initializeReaction(),t}S()(t,e);var n=t.prototype;return n._initializeReaction=function(){var e=this;this._toolbarService.reactionOfToolbarState(function(t){var n=t.toolbarState;e._documentToolbarLayoutService.updateToolbarState(n)},"documentToolbar",{delay:1})},n.handleTab=function(e,t){e.shiftKey&&this._documentToolbarLayoutService.isFirstButton(t)&&(this._propertyToolbarLayoutService.focusLastButton(),e.preventDefault())},n.handleBlur=function(){this._documentToolbarLayoutService.blurFocusedButton()},n.toggleButton=function(e){this._propertyToolbarLayoutService.hideAllLayers(),this._documentToolbarLayoutService.toggleButton(e)},n.reflowToolbar=function(e){this._documentToolbarLayoutService.reflowToolbar(e)},t}(_.m),k()(tl.prototype,"handleTab",[D.d],Object.getOwnPropertyDescriptor(tl.prototype,"handleTab"),tl.prototype),k()(tl.prototype,"handleBlur",[D.d],Object.getOwnPropertyDescriptor(tl.prototype,"handleBlur"),tl.prototype),k()(tl.prototype,"toggleButton",[D.d],Object.getOwnPropertyDescriptor(tl.prototype,"toggleButton"),tl.prototype),tl),ul=(nl=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=e.viewMode,r=e.isFlexible,o=t.buttons,a=t.moreButtons,s=t.toolbarState.componentType,c=this._resolveToolbarType(),l=R()("se-toolbar","se-document-toolbar",{"se-toolbar-flexible":r});return D.b.createElement("div",{className:"se-header-inbox se-l-document-toolbar",onBlur:this._handleBlur},D.b.createElement(Qe,{className:l,namespace:Ae.e.DOCUMENT,viewMode:i,isFlexible:r,documentToolbarIconType:c,buttons:o,moreButtons:a,logAreaId:"dot",focusButtonId:t.focusButtonId,activePanelButtonId:t.activePanelButtonId,activeButtonId:t.activeButtonId,selectedComponentType:s,i18n:n,onReflowToolbar:this._handleReflowToolbar,onKeyDown:this._handleKeyDown,onClickSelector:this._handleClickSelector}))},n._resolveToolbarType=function(){return!1===this.props.useDocumentToolbarButtonText?Ae.d.ICON:Ae.d.TEXT_ICON},n._handleClickSelector=function(e){this.props.useCase.toggleButton(e)},n._handleReflowToolbar=function(e){var t=e.displayButtonCount;this.props.useCase.reflowToolbar(t)},n._handleKeyDown=function(e,t){9===e.which&&this.props.useCase.handleTab(e,t)},n._handleBlur=function(){this.props.useCase.handleBlur()},t}(D.b.Component),k()(nl.prototype,"_handleClickSelector",[te.autobind],Object.getOwnPropertyDescriptor(nl.prototype,"_handleClickSelector"),nl.prototype),k()(nl.prototype,"_handleReflowToolbar",[te.autobind],Object.getOwnPropertyDescriptor(nl.prototype,"_handleReflowToolbar"),nl.prototype),k()(nl.prototype,"_handleKeyDown",[te.autobind],Object.getOwnPropertyDescriptor(nl.prototype,"_handleKeyDown"),nl.prototype),k()(nl.prototype,"_handleBlur",[te.autobind],Object.getOwnPropertyDescriptor(nl.prototype,"_handleBlur"),nl.prototype),nl);ul.defaultProps={i18n:function(e){return e},useDocumentToolbarButtonText:!0},ul.propTypes={store:D.a.instanceOf(cl).isRequired,useCase:D.a.instanceOf(ll).isRequired,i18n:D.a.func,viewMode:D.a.string,isFlexible:D.a.bool,useDocumentToolbarButtonText:D.a.bool};var pl,dl,hl,gl,fl,ml,yl=Object(N.b)(ul),vl=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.focusFirstButton=function(){this._store.focusFirstButton()},n.blurFocusedButton=function(){this._store.blurFocusedButton()},n.isFirstButton=function(e){return this._store.isFirstButton(e)},n.toggleButton=function(e){this._store.toggleButton(e)},n.togglePanelButton=function(e){this._store.togglePanelButton(e)},n.setPanelButtonEnable=function(e,t){this._store.setPanelButtonEnable(e,t)},n.hideAllLayers=function(){this._store.deactivateAllButtons()},n.updateHorizontalSelectedValue=function(e){this._store.updateHorizontalSelectedValue(e)},n.updateQuotationSelectedValue=function(e){this._store.updateQuotationSelectedValue(e)},n.reflowToolbar=function(e){this._store.updateDisplayButtonSet(e)},n.resetDisplayButtonSet=function(){this._store.resetDisplayButtonSet()},n.updateToolbarState=function(e){this._store.updateToolbarState(e)},t}(_.f),_l=n(771),bl=(pl=Object(te.history)({sync:!1}),dl=Object(te.history)({sync:!1}),hl=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=_.W.get("configAgent"),t._imageUploadService=_.W.get("imageUploadService"),t._imageTypeLayerService=_.W.get("imageTypeLayerService"),t._imageBehavior=_.W.get("imageBehavior"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._componentListStore=_.W.get("componentListStore"),t._complexImageLayoutsEnabled=t._configAgent.get("productConfig.complexImageLayoutsEnabled"),t}S()(t,e);var n=t.prototype;return n.insertImage=function(){var e=Tt()(It.a.mark(function e(){var t,n,i,r,o,a,s,c,l;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog({multiple:!0});case 2:if(t=e.sent,n=t.validFiles,i=t.invalidFiles,r=n.length,o=this._selectionInfoStore.focus,a=o.compId,s=o.unitId,c=this._componentListStore.getComponentById(a),l=c.getStoreById(s),"inline-image-allowed-append"!==l.attributes.insertion||"child"!==l.selection){e.next=15;break}return e.next=13,this._insertInlineImage({validFiles:n,invalidFiles:i});case 13:e.next=21;break;case 15:if(!this._canUseComplexLayouts(r)){e.next=19;break}this._openImageTypeLayer({validFiles:n,invalidFiles:i,length:n.length}),e.next=21;break;case 19:return e.next=21,this._insertImage({validFiles:n,invalidFiles:i});case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._openImageTypeLayer=function(e){this._imageTypeLayerService.open({type:Yr.a.FILE,payload:e})},n._insertInlineImage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageBehavior.insertInlineImage(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._insertImage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageBehavior.insertImage(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._canUseComplexLayouts=function(e){return e>1&&this._complexImageLayoutsEnabled},t}(_.m),k()(hl.prototype,"insertImage",[te.sentryCatch,te.preventOnDocumentProcessing],Object.getOwnPropertyDescriptor(hl.prototype,"insertImage"),hl.prototype),k()(hl.prototype,"_openImageTypeLayer",[D.d],Object.getOwnPropertyDescriptor(hl.prototype,"_openImageTypeLayer"),hl.prototype),k()(hl.prototype,"_insertInlineImage",[pl,D.d],Object.getOwnPropertyDescriptor(hl.prototype,"_insertInlineImage"),hl.prototype),k()(hl.prototype,"_insertImage",[dl,D.d],Object.getOwnPropertyDescriptor(hl.prototype,"_insertImage"),hl.prototype),hl),Sl={image:{view:_l.a,useCase:bl,styleName:"image"}},Cl={documentToolbar:{"text-format-drop-down":Object(pt.a)("text-format-drop-down"),image:Sl.image,"social-media-image":Object(pt.a)("social-media-image"),sticker:Object(pt.a)("sticker"),video:Object(pt.a)("video"),"horizontal-line":Object(pt.a)("horizontal-line"),quotation:Object(pt.a)("quotation"),map:Object(pt.a)("map"),oglink:Object(pt.a)("oglink"),file:Object(pt.a)("file"),audio:Object(pt.a)("audio"),schedule:Object(pt.a)("schedule"),code:Object(pt.a)("code"),table:Object(pt.a)("table"),formula:Object(pt.a)("formula"),search:Object(pt.a)("search"),moment:Object(pt.a)("moment"),library:Object(pt.a)("library"),template:Object(pt.a)("template"),"additional-button":Object(pt.a)("additional-button"),"more-view":Object(pt.a)("more-view"),talktalk:Object(pt.a)("talktalk"),"separator-bar":Object(pt.a)("separator-bar"),webtoon:Object(pt.a)("webtoon"),chat:Object(pt.a)("chat"),"ai-write":Object(pt.a)("ai-write")}},Il=function(e){function t(){return e.call(this,{buttonSetMap:Cl})||this}return S()(t,e),t}(_.l),Ol=_.H.extend({name:"DocumentToolbarLayout",view:yl,useCase:ll,service:vl,store:cl,toolbar:Il}),Tl=n(822),Ll=n(86),El=n(87),Pl=n(169),wl=n(102),kl=n(1079),xl=n(214),Dl=n(1365),Al=["link","layout"],jl=(gl=function(e){S()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:null,selection:null,insertion:"text",drop:"text",paste:"text",lineBreak:{enter:"hard-and-insert-empty-line-at-end",shiftEnter:"line-break-in-paragraph"},erasure:"text"},n.isSelectable=!1,L()(n,"layout",fl,P()(n)),L()(n,"title",ml,P()(n)),n._componentFactory=_.W.get("componentFactory"),n._configAgent=_.W.get("configAgent");var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;return n.attributes=Object(Ir.a)(n.attributes,s.attributes),n.layout=Object(x.a)(o,"layout",o.layout||n.layout),n.title=n._createTextUnit(o.title,s.title),n}return t.toPlainJSON=function(e,t){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),{id:this.id,ctype:this.ctype,layout:this.layout,title:this.title.toPlainJSON(e,t)}},t._createTextUnit=function(e,t){var n={state:e,config:Object(l.a)({},t,{attributes:{selection:"text",insertion:"text",drop:"text",paste:"text",lineBreak:{enter:"hard-and-insert-empty-line-at-end",shiftEnter:"line-break-in-paragraph"},erasure:"text"},filterTextStyle:{fontSizeCode:xl.b.conditionalAllowed(["fs11","fs13","fs15","fs16","fs19","fs24","fs28","fs30","fs34","fs38"]),backgroundColor:xl.b.NOT_ALLOWED,strikeThrough:xl.b.NOT_ALLOWED,subscript:xl.b.NOT_ALLOWED,superscript:xl.b.NOT_ALLOWED,dropCap:xl.b.NOT_ALLOWED},styleFilterPayload:{layout:this.layout}})},i=Object(x.a)(t,"textStyle",{}),r=n.config.filterTextStyle;return n.config.filterTextStyle=Object(Ir.a)(r,i),new Dl.a(n)},t.attachLastParagraphAtStart=function(e){var t=this.getText(),n=e.getText();t.attachParagraphAtStart(n.detachLastParagraph())},t.setText=function(e){var t=this.title.getStyleFilter();this.title=e,this.title.updateStyleFilter(t),this.updateTheme()},t.insert=function(e,t){void 0===t&&(t={});var n=this.getText(),i=e.getText();if("text"===e.ctype&&i.getParagraphsLength()>1){var r=t.mergePoint||this.getEndPoint(),o=n.getPositionByPoint(r);if(o===xl.d.TEXT_START){var a=e.getStartPoint(),s=e.getEndPoint();return this.attachLastParagraphAtStart(e),{start:a,end:Object.assign(s,{compId:this.id})}}if(o===xl.d.TEXT_END)return this.attachFirstParagraphAtEnd(e),{start:r,end:e.getEndPoint()}}var c=n.mergeWith(i,t);return c.start.compId=this.id,c.end.compId=this.id,c},t.changeLink=function(e,t){var n=this.refineSelection(t);return this.getText().changeLink(this.checkProtocol(e),n)},t.changeLayout=function(e){this.layout=e,this.getText().updateStyleFilterPayload({layout:e}),this.updateTheme()},t.updateProperty=function(e,t){var n=e.link,i=e.layout,r=Me()(e,Al);if(i&&this.changeLayout(i),Object(wl.a)(this,r),n)return this.changeLink(n,t)},t.getStoreById=function(e){return e===this.id?this:e===this.title.id?this.title:null},t.getText=function(){return this.title},t.hasDropCapInParagraph=function(e){return this.getText().hasDropCapInParagraph(e)},t.hasInlineImageInParagraph=function(e){return this.getText().hasInlineImageInParagraph(e)},t.hasInlineImageOnly=function(){return this.getText().hasInlineImageOnly()},t._updateParagraphStyle=function(e,t){return this.getText().updateWholeParagraphStyle(e),t},t.isRepresentativeImage=function(){return this.getText().isRepresentativeImage()},t.hasRepresentativeImage=function(){return this.getText().hasRepresentativeImage()},t.setRepresentativeImage=function(e){var t=e.paraId,n=e.nodeId;this.getText().setRepresentativeImage(t,n)},t.releaseRepresentativeImage=function(e){this.getText().releaseRepresentativeImage(e)},t.getRepresentativeId=function(){var e=this,t=this.getText().getRepresentativeId();return Object(Pn.a)(t,function(t){return""+e.id+t})},t.setAvailableContentLength=function(e){this.getText().setAvailableContentLength(e)},t.resetAvailableContentLength=function(){this.getText().resetAvailableContentLength()},t.collectStyle=function(t){var n=e.prototype.collectStyle.call(this,t);return n.textLayout=this.layout,n},B()(n,[{key:"textLength",get:function(){return this.getText().textLength}},{key:"translationEnabled",get:function(){return"none"!==this.title.selection}}]),n}(Object(_.Z)(_.j)),fl=k()(gl.prototype,"layout",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),ml=k()(gl.prototype,"title",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gl);jl.ctype="sectionTitle",jl.schema={id:kl.a.string.isRequired,ctype:kl.a.string.isRequired,layout:kl.a.string.isRequired,title:kl.a.textUnit.isRequired};var Rl,Nl,Ml=jl,Bl=(Rl=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=_.W.get("configAgent"),t._libraryPanelLayoutService=_.W.get("libraryPanelLayoutService"),t._toastLayerService=_.W.get("toastLayerService"),t._eventDispatcherService=_.W.get("eventDispatcherService"),t._i18n=_.W.get("i18n"),t._contentTextMaxLength=t._configAgent.get("productConfig.contentTextMaxLength"),t}S()(t,e);var n=t.prototype;return n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId,i=e.paraId,r=e.nodeId;_.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n,paraId:i,nodeId:r}),this._libraryPanelLayoutService.updateMediaList()},n.showOverContentLengthLimitWarn=function(){this._eventDispatcherService.emit(_.z.ON_MAX_CONTENT_TEXT_LENGTH),this._toastLayerService.warningMessage(this._i18n("textUnit:warning_limit_over_max_text_length",{maxLength:this._contentTextMaxLength}))},t}(Object(_.Y)(_.c)),k()(Rl.prototype,"setRepresentativeImage",[te.history,D.d],Object.getOwnPropertyDescriptor(Rl.prototype,"setRepresentativeImage"),Rl.prototype),Rl),Wl={useToolbarSlot:!1},Ul=(Nl=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=e.useCase,r=t.id,o=t.ctype,a=t.title,s=t.layout,c=t.isFocused,l=this._getAdditionalOption(a),u=this._resolveSectionClassName({ctype:o,layout:s,isFocused:c});return D.b.createElement(Ll.a,{id:r,ctype:o,layout:s,i18n:n},D.b.createElement(El.a,{compId:r,compStore:t},D.b.createElement("div",{className:u},D.b.createElement(Pl.a,{text:a,compId:r,useCase:i,additionalOption:l,options:Wl,onLimitTextLength:this._handleContentLengthLimit,onClickRepresentative:this._handleClickRepresentative}))))},n._resolveSectionClassName=function(e){var t,n=e.ctype,i=e.layout,r=e.isFocused;return R()(((t={})["se-section se-section-"+n]=!!n,t["se-l-"+(i||"default")]=!0,t["se-is-focused"]=r,t))},n._getAdditionalOption=function(e){var t=this.props,n=t.i18n;return{placeholder:t.shouldPlaceholderShown&&e.unchangedFirstNodeStyle?n("sectionTitleComponent:placeholder"):null,uploadProgressTitle:n("sectionTitleComponent:upload_process_title"),representativeTitle:n("sectionTitleComponent:representative")}},n._handleClickRepresentative=function(e){var t=e.paraId,n=e.nodeId,i=this.props.store;this.props.useCase.setRepresentativeImage({compId:i.id,unitId:i.id,paraId:t,nodeId:n})},n._handleContentLengthLimit=function(){this.props.useCase.showOverContentLengthLimitWarn()},t}(D.b.Component),k()(Nl.prototype,"_handleClickRepresentative",[te.autobind],Object.getOwnPropertyDescriptor(Nl.prototype,"_handleClickRepresentative"),Nl.prototype),k()(Nl.prototype,"_handleContentLengthLimit",[te.autobind],Object.getOwnPropertyDescriptor(Nl.prototype,"_handleContentLengthLimit"),Nl.prototype),Nl);Ul.defaultProps={i18n:function(e){return e},shouldPlaceholderShown:!1},Ul.propTypes={shouldForceRefresh:D.a.bool,i18n:D.a.func,store:D.a.instanceOf(Ml).isRequired,useCase:D.a.instanceOf(Bl).isRequired,shouldPlaceholderShown:D.a.bool};var Fl,zl,Vl,Gl,Hl,ql,Jl,Kl,Xl,Yl,Ql,Zl,$l,eu=Object(N.b)(Ul),tu=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.a),nu={propertyToolbar:{"text-format":Object(pt.a)("text-format"),"font-family":Object(pt.a)("font-family"),"font-size":Object(pt.a)("font-size"),bold:Object(pt.a)("bold"),italic:Object(pt.a)("italic"),underline:Object(pt.a)("underline"),"font-color":Object(pt.a)("font-color"),"align-drop-down-with-justify":Object(pt.a)("align-drop-down-with-justify"),"line-height":Object(pt.a)("line-height"),"special-letter":Object(pt.a)("special-letter"),"text-link":Object(pt.a)("text-link"),"translation-right-label":Object(pt.a)("translation-right-label"),speller:Object(pt.a)("speller"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{},contentsToolbar:{"section-title-layout":Object(pt.a)("section-title-layout"),"to-text":Object(pt.a)("to-text"),"font-family":Object(pt.a)("font-family"),"font-size":Object(pt.a)("font-size"),bold:Object(pt.a)("bold"),italic:Object(pt.a)("italic"),"font-color":Object(pt.a)("font-color"),"to-quotation":Object(pt.a)("to-quotation"),"cycle-align":Object(pt.a)("cycle-align-with-justify"),"cycle-align-without-justify":Object(pt.a)("cycle-align"),translation:Object(pt.a)("translation"),"separator-bar":Object(pt.a)("separator-bar"),"ai-write":Object(pt.a)("ai-write")}},iu={propertyToolbar:function(e){var t=["text-format","font-family","font-size","separator-bar","bold","italic","underline","font-color","separator-bar","align-drop-down-with-justify","line-height","separator-bar","special-letter","text-link"];return e.selectedComponents.every(function(e){return e.translationEnabled})&&t.push("separator-bar","translation-right-label"),t.push("separator-bar","speller"),t},contentsToolbar:function(e){var t=e.selectedComponents,n=e.defaultButtonSet,i=e.configAgent;if(!1===(t.filter(function(e){return"sectionTitle"===e.ctype}).length===t.length))return[];if(n)return n;var r=["font-family","separator-bar","font-size","separator-bar","bold","italic","separator-bar","font-color","separator-bar","to-quotation","separator-bar","cycle-align"];return i.get("productConfig.aiAssistant")&&!u.a.IS_IE&&r.unshift("ai-write","separator-bar"),t.every(function(e){return e.translationEnabled})&&r.push("separator-bar","translation"),r}},ru=function(e){function t(){return e.call(this,{buttonSetMap:nu,buttonResolver:iu})||this}return S()(t,e),t}(_.l),ou=_.q.extend({name:"SectionTitleComponent",view:eu,useCase:Bl,service:tu,store:Ml,toolbar:ru}),au=n(88),su=(Fl=Object(te.history)({sync:!1}),zl=Object(te.history)({sync:!1}),Vl=Object(te.history)({sync:!1}),Gl=Object(te.history)({sync:!1}),Hl=Object(te.history)({sync:!1}),ql=function(e){function t(){var t;return(t=e.call(this)||this)._documentTitleComponentService=_.W.get("documentTitleComponentService"),t._eventDispatcherService=_.W.get("eventDispatcherService"),t._imageUploadService=_.W.get("imageUploadService"),t._toastLayerService=_.W.get("toastLayerService"),t._canvasLayoutService=_.W.get("canvasLayoutService"),t._cloudSnsLayerService=_.W.get("cloudSnsLayerService"),t._libraryPanelLayoutService=_.W.get("libraryPanelLayoutService")||{updateMediaList:function(){}},t._imageBehavior=_.W.get("imageBehavior"),t._imageEditService=_.W.get("imageEditService"),t._i18n=_.W.get("i18n"),t._alertLayerService=_.W.get("alertLayerService"),t._dragAndDropService=_.W.get("dragAndDropService"),t}S()(t,e);var n=t.prototype;return n._openPhotoEditorByDirect=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._documentTitleComponentService.getComponentStore(),i=this._documentTitleComponentService.getBackgroundImageData(),r=n.toValidJSON(),e.next=5,this._imageEditService.editImage({activeCompId:i.id,editableImages:[r],direct:t});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.cropCoverImage=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditorByDirect("crop");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.filterCoverImage=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditorByDirect("filter");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.adjustCoverImage=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditorByDirect("adjust");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId;_.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n}),this._libraryPanelLayoutService.updateMediaList()},n.deleteBackground=function(){this._documentTitleComponentService.deleteBackgroundImage()},n.uploadBackground=function(){var e=Tt()(It.a.mark(function e(){var t,n,i=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog();case 2:return t=e.sent,n=this._documentTitleComponentService.getComponentStore().id,e.abrupt("return",this._imageBehavior.insertBackground(n,t).then(function(){i._canvasLayoutService.refreshVirtualEditable()}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.uploadBackgroundFromSNS=function(){var e=Tt()(It.a.mark(function e(){var t,n,i=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.a.UNDER_IE11){e.next=3;break}return this._alertLayerService.open({type:_.n.ALERT,isDimUse:!1,title:this._i18n("commonPopup:recommended_browser_title"),description:this._i18n("commonPopup:recommended_browser_description")}),e.abrupt("return");case 3:return e.next=5,this._cloudSnsLayerService.openCloudSNSWindowPopup({maxCount:1});case 5:return t=e.sent,n=this._documentTitleComponentService.getComponentStore().id,e.next=9,this._imageBehavior.insertBackgroundFromUrls(n,t).then(function(){i._canvasLayoutService.refreshVirtualEditable()});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.startEditingBackgroundPosition=function(){this._dragAndDropService.disable(),this._documentTitleComponentService.startEditingBackgroundPosition()},n.fixBackgroundPosition=function(e){this._documentTitleComponentService.updateBackgroundPosition(e),this._documentTitleComponentService.stopEditingBackgroundPosition(),this._dragAndDropService.enable()},n.revertBackgroundPosition=function(){this._documentTitleComponentService.stopEditingBackgroundPosition(),this._dragAndDropService.enable()},n.showToast=function(e){this._toastLayerService.warningMessage(e)},t}(_.c),k()(ql.prototype,"cropCoverImage",[te.sentryCatch,te.preventOnDocumentProcessing,Fl,D.d],Object.getOwnPropertyDescriptor(ql.prototype,"cropCoverImage"),ql.prototype),k()(ql.prototype,"filterCoverImage",[te.sentryCatch,te.preventOnDocumentProcessing,zl,D.d],Object.getOwnPropertyDescriptor(ql.prototype,"filterCoverImage"),ql.prototype),k()(ql.prototype,"adjustCoverImage",[te.sentryCatch,te.preventOnDocumentProcessing,Vl,D.d],Object.getOwnPropertyDescriptor(ql.prototype,"adjustCoverImage"),ql.prototype),k()(ql.prototype,"setRepresentativeImage",[te.history,D.d],Object.getOwnPropertyDescriptor(ql.prototype,"setRepresentativeImage"),ql.prototype),k()(ql.prototype,"deleteBackground",[te.history,D.d],Object.getOwnPropertyDescriptor(ql.prototype,"deleteBackground"),ql.prototype),k()(ql.prototype,"uploadBackground",[Gl,D.d],Object.getOwnPropertyDescriptor(ql.prototype,"uploadBackground"),ql.prototype),k()(ql.prototype,"uploadBackgroundFromSNS",[te.preventOnComponentProcessing,Hl,D.d],Object.getOwnPropertyDescriptor(ql.prototype,"uploadBackgroundFromSNS"),ql.prototype),k()(ql.prototype,"fixBackgroundPosition",[te.history,D.d],Object.getOwnPropertyDescriptor(ql.prototype,"fixBackgroundPosition"),ql.prototype),k()(ql.prototype,"showToast",[D.d],Object.getOwnPropertyDescriptor(ql.prototype,"showToast"),ql.prototype),ql),cu=n(1313),lu=n(444),uu={LEFT:"left",CENTER:"center"},pu=n(1080),du=n(1314),hu=(Jl=function(e){S()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).backgroundConfig={uploadDND:!0,uploadSNS:!0,uploadLocal:!0,reposition:!0},n.attributes={cursor:"query",selection:"isolated",insertion:"append",erasure:"unerasable",drop:"query",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"}},n.isSelectable=!1,n.allowedComponentAlign=[uu.LEFT,uu.CENTER],L()(n,"layout",Kl,P()(n)),L()(n,"background",Xl,P()(n)),L()(n,"title",Yl,P()(n)),L()(n,"subTitle",Ql,P()(n)),L()(n,"phase",Zl,P()(n)),L()(n,"representativeEnabled",$l,P()(n)),n.onRenderServiceDataButton=null,n.onClickServiceDataButton=null,n.thumbnailTypeMap={};var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;return n._configAgent=_.W.get("configAgent"),n._infraConfig=n._configAgent.get("infraConfig"),n.backgroundConfig=Object(l.a)({},s.background,n.backgroundConfig),n.lineBreakable=Object(x.a)(s,"lineBreakable",n.lineBreakable),n.attributes=Object(Ir.a)(n.attributes,s.attributes),n.updateConfig(),n.layout=o.layout||s.layout||n.layout,n.title=n._createTitleTextUnit(o.title,s.title),n.subTitle=n._createSubTitleTextUnit(o.subTitle,s.subTitle),n.background=n._resolveBackground(o.background),n.thumbnailTypeMap=n._configAgent.get("editorInfo.thumbnailType")||n.thumbnailTypeMap,n.useThumbnail=Object(x.a)(n._infraConfig,"image.useThumbnail",!0),n.onClickServiceDataButton=s.onClickServiceDataButton,n.onRenderServiceDataButton=s.onRenderServiceDataButton,n}return t.toPlainJSON=function(e,t){if(e&&t){if(e.unitId===this.title.id||t.unitId===this.title.id)return{ctype:pu.a.TEXT,value:this.title.toPlainJSON(e,t)};if(this.subTitle&&(e.unitId===this.subTitle.id||t.unitId===this.subTitle.id))return{ctype:pu.a.TEXT,value:this.subTitle.toPlainJSON(e,t)}}return{id:this.id,ctype:this.ctype,layout:this.layout,background:D.f.toJS(this.background),phase:this.phase,title:this.title.toPlainJSON(),subTitle:this.subTitle?this.subTitle.toPlainJSON():null}},t._resolveBackground=function(e){if(e&&e.image){if(!this.imageDisabled){var t=Object(l.a)({},e),n=t.image;return t.image=new lu.a({state:n,config:{attributes:{erasure:"query"}}}),t}_.W.get("eventDispatcher").dispatch(_.C.UNSUPPORTED_CTYPE)}},t._createTitleTextUnit=function(e,t){var n=this._isSubTitleEnabled()?{enter:"next-unit",shiftEnter:"next-unit"}:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},i={state:e,config:Object(l.a)({},t,{attributes:{cursor:null,selection:"trapped",insertion:"append",drop:"only-text",paste:"only-text",lineBreak:n,erasure:"trapped-text"},maxLength:du.a,filterTextStyle:{fontFamily:xl.b.FOLLOW_CURRENT_STYLE,fontSizeCode:xl.b.FOLLOW_CURRENT_STYLE,fontColor:xl.b.NOT_ALLOWED,backgroundColor:xl.b.NOT_ALLOWED,bold:xl.b.NOT_ALLOWED,italic:xl.b.NOT_ALLOWED,underline:xl.b.NOT_ALLOWED,strikeThrough:xl.b.NOT_ALLOWED,subscript:xl.b.NOT_ALLOWED,superscript:xl.b.NOT_ALLOWED,dropCap:xl.b.NOT_ALLOWED,link:xl.b.NOT_ALLOWED,list:xl.b.NOT_ALLOWED}})},r=Object(x.a)(t,"textStyle",{}),o=i.config.filterTextStyle;return i.config.filterTextStyle=Object(Ir.a)(o,r),new Dl.a(i)},t._createSubTitleTextUnit=function(e,t){var n=!this._isSubTitleEnabled(),i={state:e,config:Object(l.a)({},t,{attributes:{cursor:null,selection:"trapped",insertion:"append",drop:"only-text",paste:"only-text",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"backward-escapable-text"},maxLength:250,disable:n,filterTextStyle:{fontFamily:xl.b.FOLLOW_CURRENT_STYLE,fontSizeCode:xl.b.FOLLOW_CURRENT_STYLE,fontColor:xl.b.NOT_ALLOWED,backgroundColor:xl.b.NOT_ALLOWED,bold:xl.b.NOT_ALLOWED,italic:xl.b.NOT_ALLOWED,underline:xl.b.NOT_ALLOWED,strikeThrough:xl.b.NOT_ALLOWED,subscript:xl.b.NOT_ALLOWED,superscript:xl.b.NOT_ALLOWED,dropCap:xl.b.NOT_ALLOWED,link:xl.b.NOT_ALLOWED,list:xl.b.NOT_ALLOWED}})},r=Object(x.a)(t,"textStyle",{}),o=i.config.filterTextStyle;return i.config.filterTextStyle=Object(Ir.a)(o,r),new Dl.a(i)},t.updateStyle=function(e){this._isParagraphStyle(e)?e.align&&this.allowedComponentAlign.includes(e.align)&&(this.getText().updateWholeParagraphStyle(e),this.align=e.align):this.getText().updateWholeCharacterStyle(e)},t.applyUserDefinedStyle=function(e){var t=this.getText();if(t.isEmpty()){var n={start:t.getStartPoint(),end:t.getEndPoint()};this.updateStyles(e,n);var i=e.align;i&&this.allowedComponentAlign.includes(i)&&(this.align=i)}},t.reset=function(){this.updatePhase(_.O.DONE)},t.applyEditedImage=function(e){var t=this.background.image,n=e.photos[0];if(n.modified){var i=n.height,r=n.width,o=n.domain,a=n.path,s=""+o+a,c=!1===this.useThumbnail?s:s+"?type="+this.thumbnailTypeMap.normal,l=Re()({},t,{src:c,path:a,originalWidth:r,originalHeight:i});this._replaceBackgroundImage(l)}},t.queryDragAndDrop=function(e){var t=e.type,n=e.dropPoint,i=e.items,r=["library","aside"].includes(t)&&i.length&&"image"===i[0].ctype,o=this.backgroundConfig.uploadDND;return("external-file"===t||r)&&o?{items:[i[0]],insertCommand:"query",insertPoint:n,direction:_.x.DOCUMENT_BACKGROUND}:null},t.queryCursor=function(e){var t=e.direction,n=e.toPoint.unitId===this.id,i=null;return(t===_.u.LEFT||t===_.u.UP)&&n&&(i={start:this.getStartPoint(),end:this.getStartPoint()}),{type:"range",range:i}},t.putCursor=function(e){this._changeSelectionToChild(),(e.unitId===this.title.id?this.title:this.subTitle).putCursor(e)},t.getNextUnit=function(){return this.subTitle},t.getPrevUnit=function(){return this.title},t.merge=function(e){var t=Object(At.a)(e);return this.insertBackgroundImage(t),{components:[this]}},t.insert=function(e,t){void 0===t&&(t={});var n=this.getText(),i=e.getText(),r=n.mergeWith(i,t);return r.start.compId=this.id,r.end.compId=this.id,r},t.erase=function(e,t){var n={};!0===this._isBackgroundTarget(e)?this.deleteBackgroundImage():n=this.getText().erase(e,t);var i={start:{compId:this.id},end:{compId:this.id}};return Object(l.a)(i,n)},t.queryErasure=function(){return this.deleteBackgroundImage(),{result:"move",range:this.getCompEndRange()}},t.refineSelection=function(e){return e},t.insertBackgroundImage=function(e){var t=e instanceof lu.a?e:this._uploadDataToComp(e);this.background=D.f.observable({ctype:"background",image:new lu.a({state:t,config:{attributes:{erasure:"query"}}}),point:{ctype:"point",x:50,y:50}})},t._uploadDataToComp=function(e){var t=e.domain||this._configAgent.get("infraInfo.photoInfra.imageHost"),n=e.animatedCnt>1?"animated":"normal",i=""+t+e.url,r=!1===this.useThumbnail?i:i+"?type="+this.thumbnailTypeMap.normal;return this._componentFactory.createComponentWithCompData({ctype:"image",src:r,internalResource:!0,caption:null,domain:t,path:e.path+"/"+e.fileName,format:n,displayFormat:n,width:parseInt(e.width,10),height:parseInt(e.height,10),fileSize:parseInt(e.fileSize,10),allowVR360OrPanorama:!1})},t._replaceBackgroundImage=function(e){this.background=D.f.observable({ctype:"background",image:new lu.a({state:e,config:{attributes:{erasure:"query"}}}),point:this.background.point})},t.updateBackgroundPosition=function(e){var t=e.backgroundPositionX,n=e.backgroundPositionY;this.background.point.x=parseFloat(t),this.background.point.y=parseFloat(n)},t.deleteBackgroundImage=function(){this.background=null,this.updatePhase(_.O.DONE)},t.getRepresentativeId=function(){var e=[];if(this.background){var t=this.background.image.getRepresentativeId();e.push(this.id+"|"+t)}return e},t.hasBackgroundImage=function(){return""!==Object(x.a)(this,"background.image.src","")},t.hasEditableBackgroundImage=function(){var e=Object(x.a)(this,"background.image",{}),t=e.format,n=e.internalResource;return"normal"===t&&!0===n},t.clone=function(e){var t=this.getText().clone(e);return t.resetStyle(),t},t.selectAsBlock=function(e,t){this.deselect(),e.unitId===this.title.id?(this.title.selectAsBlock(e,t),this._changeSelectionToChild()):e.unitId===this.subTitle.id?(this.subTitle.selectAsBlock(e,t),this._changeSelectionToChild()):this._changeSelectionToBlock()},t.setRepresentativeImage=function(){this.background&&this.background.image.setRepresentativeImage()},t.releaseRepresentativeImage=function(){this.background.image.releaseRepresentativeImage()},t.getRepresentativeInnerData=function(){return this.background.image.getRepresentativeInnerData()},t.updateTheme=function(t,n){if(e.prototype.updateTheme.call(this,t,n),this.themeStyle&&this.themeStyle[this.layout]&&!this.align){var i=this.themeStyle[this.layout].title;this.align=i.align}},t.getStoreById=function(e){return e===this.id?this:e===this.title.id?this.title:this.background&&e===this.background.image.id?this.background.image:e===this.subTitle.id?this.subTitle:null},t._isBackgroundTarget=function(e){return Object(x.a)(e,"start.unitId")===Object(x.a)(this,"background.image.id")},t.deselect=function(){this._changeSelectionToNone(),this.title.deselect(),this.subTitle.deselect()},t.getText=function(e){return e?this[e]:"none"!==this.subTitle.selection?this.subTitle:this.title},t.getDocumentTitle=function(){return this.title.getPlainTextWithEmoji()},t.updateConfig=function(){e.prototype.updateConfig.call(this),this.representativeEnabled=!1!==this._configAgent.get("productConfig.representativeEnabled")},t.isRepresentativeImage=function(){return this.representativeEnabled&&!0===Object(x.a)(this,"background.image.internalResource",!1)},t.hasRepresentativeImage=function(){return Object(x.a)(this,"background.image.represent",!1)},t.collectStyle=function(e){var t=this.getText().collectStyle(e),n=Object(x.a)(this,"background.image.src","");return Object(l.a)({src:n},t)},t.isLibraryComponent=function(){var e=!!Object(x.a)(this,"background.image.src",!1),t=!!Object(x.a)(this,"background.image.internalResource",!1);return e&&t},t.getLibraryItemData=function(){var e=Object(x.a)(this.toValidJSON(),"background.image"),t=e.domain,n=e.path,i=Object(l.a)({phase:"done"},e);return{id:this.id,key:""+t+n,thumbnail:Object(x.a)(this,"background.image.src"),data:i}},t.getFontSizeCode=function(){return this.getFirstParagraph().getFirstNode().computedStyle.fontSizeCode},t._isSubTitleEnabled=function(){return"flex"===this.layout},t._isFocusedOnText=function(){return"none"!==this.title.selection||"none"!==this.subTitle.selection},t.updateServiceData=function(e){this.background&&this.background.image.updateServiceData(e)},B()(n,[{key:"imageDisabled",get:function(){return this._componentFactory.isUnsupportedCompType("image")}},{key:"isDndUploadEnable",get:function(){return!!this.backgroundConfig&&this.backgroundConfig.uploadDND}},{key:"isSnsUploadEnabled",get:function(){return!!this.backgroundConfig&&this.backgroundConfig.uploadSNS}},{key:"isLocalUploadEnabled",get:function(){return!!this.backgroundConfig&&this.backgroundConfig.uploadLocal}},{key:"isBackgroundMovable",get:function(){return!!this.backgroundConfig&&this.backgroundConfig.reposition}},{key:"translationEnabled",get:function(){return this._isFocusedOnText()}}]),n}(_.j),Kl=k()(Jl.prototype,"layout",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),Xl=k()(Jl.prototype,"background",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yl=k()(Jl.prototype,"title",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ql=k()(Jl.prototype,"subTitle",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zl=k()(Jl.prototype,"phase",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.O.DONE}}),$l=k()(Jl.prototype,"representativeEnabled",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k()(Jl.prototype,"isDndUploadEnable",[D.e],Object.getOwnPropertyDescriptor(Jl.prototype,"isDndUploadEnable"),Jl.prototype),k()(Jl.prototype,"isSnsUploadEnabled",[D.e],Object.getOwnPropertyDescriptor(Jl.prototype,"isSnsUploadEnabled"),Jl.prototype),k()(Jl.prototype,"isLocalUploadEnabled",[D.e],Object.getOwnPropertyDescriptor(Jl.prototype,"isLocalUploadEnabled"),Jl.prototype),k()(Jl.prototype,"isBackgroundMovable",[D.e],Object.getOwnPropertyDescriptor(Jl.prototype,"isBackgroundMovable"),Jl.prototype),Jl);hu.ctype="documentTitle",hu.schema={id:kl.a.string.isRequired,layout:kl.a.string.isRequired,ctype:kl.a.string.isRequired,title:kl.a.textUnit.isRequired,subTitle:kl.a.textUnit,background:kl.a.shape({ctype:kl.a.string.isRequired,image:kl.a.shape(lu.a.schema).isRequired,point:kl.a.shape(cu.f).isRequired}),align:kl.a.string};var gu,fu=hu,mu=(gu=function(e){function t(t){var n;return(n=e.call(this,t)||this)._uniqueEventKey="click.__se-draggable-background",n._globalEventProxy=Kr.a,n._handleDragStart=n._handleDragStart.bind(P()(n)),n._handleDragMove=n._handleDragMove.bind(P()(n)),n._handleDragEnd=n._handleDragEnd.bind(P()(n)),n._handleMouseEnter=n._handleMouseEnter.bind(P()(n)),n._handleClickDraggableBackgroundOutside=n._handleClickDraggableBackgroundOutside.bind(P()(n)),n}S()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){var e=this.props.backgroundPoint;this.setState({draggable:!1,initialX:0,initialY:0,isLockHorizontal:!1,isLockVertical:!1,backgroundPositionX:e.x,backgroundPositionY:e.y,standardBackgroundPositionX:e.x,standardBackgroundPositionY:e.y})},n.componentDidMount=function(){this._globalEventProxy.on(this._uniqueEventKey,this._handleClickDraggableBackgroundOutside)},n.UNSAFE_componentWillReceiveProps=function(e){var t=e.isEditing,n=e.backgroundImage,i=e.backgroundPoint;t!==this.props.isEditing&&(this._updateBackgroundStates(n),this._resetPosition(i))},n.componentWillUnmount=function(){this._globalEventProxy.off(this._uniqueEventKey)},n.render=function(){var e=this.props,t=e.targetClassName,n=e.backgroundClassName,i=e.targetChildren,r=e.backgroundChildren,o=this._makeBackgroundStyle(),a="__se-draggable-background "+n;return D.b.createElement("div",{className:a,ref:this._ref,style:o},this._appendTempElement(),r,D.b.createElement("div",{className:t,onMouseDown:this._handleDragStart},i))},n._ref=function(e){this._background=e},n._hasBackgroundImage=function(){return!Object(Ze.a)(this.props.backgroundImage)},n._makeBackgroundStyle=function(){if(!1===this._hasBackgroundImage())return{};var e=this.props,t=e.backgroundImage,n=e.backgroundPoint,i=n.x,r=n.y;return this.props.isEditing&&(i=this.state.backgroundPositionX,r=this.state.backgroundPositionY),{backgroundImage:"url('"+t.src.replace(/'/g,"\\'")+"')",backgroundPositionX:i+"%",backgroundPositionY:r+"%"}},n._appendTempElement=function(){if(this.state.draggable){return D.b.createElement("div",{className:"__background-dim",style:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:20,background:"rgba(255,255,255,0)"},onMouseMove:this._handleDragMove,onMouseUp:this._handleDragEnd,onMouseEnter:this._handleMouseEnter})}},n._handleDragStart=function(e){this._updateInitPosition(e)},n._handleDragMove=function(e){var t=this._calculateBackgroundPosition(e);this._updateBackgroundPosition(t)},n._handleDragEnd=function(){var e={backgroundPositionX:this.state.backgroundPositionX,backgroundPositionY:this.state.backgroundPositionY};this.props.onChangePosition(e),this._updateStandardBackgroundPosition()},n._handleMouseEnter=function(e){0===e.buttons&&this._handleDragEnd()},n._updateBackgroundStates=function(e){var t=this._getBackgroundSizeState(e),n=this._getBackgroundLockState(t);this.setState(Re()({},t,n))},n._getBackgroundSizeState=function(e){var t=e.originalWidth/e.originalHeight,n=parseFloat(this._background.clientWidth),i=parseFloat(this._background.clientHeight),r=n/i,o=n,a=i;return t>r?o=a*t:t<r&&(a=o/t),{viewWidth:n,viewHeight:i,resizedWidth:o,resizedHeight:a}},n._getBackgroundLockState=function(e){var t=e.viewWidth/e.viewHeight,n=e.resizedWidth/e.resizedHeight;return{isLockHorizontal:t>=n,isLockVertical:t<=n}},n._updateInitPosition=function(e){this.setState({draggable:!0,initialX:e.clientX,initialY:e.clientY})},n._updateStandardBackgroundPosition=function(){this.setState({draggable:!1,standardBackgroundPositionX:this.state.backgroundPositionX,standardBackgroundPositionY:this.state.backgroundPositionY})},n._updateBackgroundPosition=function(e){var t=this.state,n=t.isLockHorizontal,i=t.isLockVertical;!1===n&&this.setState({backgroundPositionX:e.positionX}),!1===i&&this.setState({backgroundPositionY:e.positionY})},n._resetPosition=function(e){this.setState({backgroundPositionX:e.x,backgroundPositionY:e.y,standardBackgroundPositionX:e.x,standardBackgroundPositionY:e.y})},n._calculateBackgroundPosition=function(e){var t=this.state,n=t.initialX,i=t.initialY,r=t.resizedWidth,o=t.resizedHeight,a=t.standardBackgroundPositionX,s=t.standardBackgroundPositionY,c=(n-e.clientX)/r*100,l=(i-e.clientY)/o*100,u=parseFloat(a)+c,p=parseFloat(s)+l;return u>100?u=100:u<0&&(u=0),p>100?p=100:p<0&&(p=0),{positionX:u,positionY:p}},n._handleClickDraggableBackgroundOutside=function(){this.props.isEditing&&this.props.onClickOutside()},t}(D.b.Component),k()(gu.prototype,"_ref",[te.autobind],Object.getOwnPropertyDescriptor(gu.prototype,"_ref"),gu.prototype),gu);mu.defaultProps={isEditing:!1,backgroundClassName:"",targetClassName:"",backgroundChildren:null,targetChildren:null,onChangePosition:function(){},onClickOutside:function(){},position:{},backgroundImage:{},backgroundPoint:{}},mu.propTypes={isEditing:D.a.bool,backgroundClassName:D.a.string,targetClassName:D.a.string,backgroundChildren:D.a.oneOfType([D.a.string,D.a.element]),targetChildren:D.a.oneOfType([D.a.string,D.a.element]),onChangePosition:D.a.func,onClickOutside:D.a.func,position:D.a.object,backgroundImage:D.a.object,backgroundPoint:D.a.object};var yu=Object(N.b)(mu),vu=function(e){var t=e.background,n=e.i18n,i=e.isEditing,r=e.onChangePosition,o=e.onClickOutside,a=e.isBackgroundMovable;if(t&&t.image){if(a)return D.b.createElement(yu,{backgroundClassName:"se-title-cover __se-cursor-unrelated",targetClassName:"se-cover-moving-message",backgroundChildren:D.b.createElement("div",{className:"se-title-cover-dim"}),targetChildren:n("documentTitleComponent:image_move_notice"),isEditing:i,backgroundImage:t.image,backgroundPoint:t.point,onChangePosition:r,onClickOutside:o});var s=t.image,c=t.point,l={};return Object(Ze.a)(s)||(l={backgroundImage:"url('"+s.src.replace(/'/g,"\\'")+"')",backgroundPositionX:c.x+"%",backgroundPositionY:c.y+"%"}),D.b.createElement("div",{className:"__se-draggable-background se-title-cover __se-cursor-unrelated",style:l},D.b.createElement("div",{className:"se-title-cover-dim"}))}return null};vu.propTypes={isEditing:D.a.bool,onChangePosition:D.a.func,onClickOutside:D.a.func,background:D.a.object,i18n:D.a.func,isBackgroundMovable:D.a.bool};var _u=Object(N.b)(vu),bu=function(e){var t=e.enabled,n=e.isRepresentative,i=e.i18n,r=e.onClick,o=R()({"se-set-rep-image-button":!0,"se-is-selected":n});return t?D.b.createElement("button",{type:"button",className:o,title:i("documentTitleComponent:delegate_image_setting_title"),onClick:r},D.b.createElement("span",{className:"se-set-rep-image-button-text"},i("documentTitleComponent:delegate_image_setting"))):null};bu.propTypes={enabled:D.a.bool,onClick:D.a.func,isRepresentative:D.a.bool,i18n:D.a.func};var Su,Cu=Object(N.b)(bu),Iu=(Su=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.store,t=e.onRenderServiceDataButton,n=t&&t(e.toPlainJSON());return n?D.b.createElement("div",{className:"se-service-data-wrap",onClick:this._handleClick,onDoubleClick:this._handleDoubleClick,dangerouslySetInnerHTML:{__html:n}}):null},n._handleClick=function(e){var t=this.props.store,n=t.onClickServiceDataButton;n&&n(t.toPlainJSON(),e.nativeEvent)},n._handleDoubleClick=function(e){e.stopPropagation()},t}(D.b.Component),k()(Su.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Su.prototype,"_handleClick"),Su.prototype),k()(Su.prototype,"_handleDoubleClick",[te.autobind],Object.getOwnPropertyDescriptor(Su.prototype,"_handleDoubleClick"),Su.prototype),Su);Iu.propTypes={store:D.a.instanceOf(_.b)};var Ou=Iu,Tu=function(e){var t=e.i18n,n=e.store,i=e.onClickLocalUpload,r=e.onClickSnsUpload,o=e.onClickRepresentativeButton,a=e.onClickReposition,s=e.onClickCrop,c=e.onClickFilter,l=e.onClickAdjust,u=e.onClickDelete,p=e.onClickCancel,d=e.onClickConfirm,h=n.representativeEnabled,g="flex"===n.layout;return D.b.createElement("div",{className:"se-cover-button-wrap"},D.b.createElement("div",{className:"se-cover-attach-button-container"},n.isLocalUploadEnabled&&D.b.createElement("span",{className:"se-cover-button se-cover-button-local-image-upload",title:t("documentTitleComponent:background_upload"),onClick:i}),n.isSnsUploadEnabled&&D.b.createElement("span",{className:"se-cover-button se-cover-button-sns-image-upload",title:t("documentTitleComponent:background_image_load"),onClick:r})),D.b.createElement("div",{className:"se-cover-edit-button-container"},D.b.createElement(Cu,{i18n:t,enabled:!!h&&n.isRepresentativeImage(),isRepresentative:Object(x.a)(n,"background.image.represent",!1),onClick:o}),n.isBackgroundMovable&&D.b.createElement("span",{className:"se-cover-button se-cover-button-set-position",title:t("documentTitleComponent:background_position_move_title"),onClick:a},D.b.createElement("span",{className:"se-cover-button-label"},t("documentTitleComponent:background_position_move"))),g&&n.hasEditableBackgroundImage()&&D.b.createElement(D.b.Fragment,null,D.b.createElement("span",{className:"se-cover-button se-cover-button-set-crop",title:t("documentTitleComponent:background_image_crop"),onClick:s},D.b.createElement("span",{className:"se-cover-button-label"},t("documentTitleComponent:background_image_crop"))),D.b.createElement("span",{className:"se-cover-button se-cover-button-set-filter",title:t("documentTitleComponent:background_image_filter"),onClick:c},D.b.createElement("span",{className:"se-cover-button-label"},t("documentTitleComponent:background_image_filter"))),D.b.createElement("span",{className:"se-cover-button se-cover-button-set-adjust",title:t("documentTitleComponent:background_image_adjust"),onClick:l},D.b.createElement("span",{className:"se-cover-button-label"},t("documentTitleComponent:background_image_adjust")))),D.b.createElement("span",{className:"se-cover-button se-cover-button-del-image",title:t("documentTitleComponent:background_image_delete_title"),onClick:u},D.b.createElement("span",{className:"se-cover-button-label"},t("documentTitleComponent:background_image_delete_title")))),D.b.createElement("div",{className:"se-cover-moving-button-container"},D.b.createElement("span",{className:"se-cover-button se-cover-button-discard-position",title:t("documentTitleComponent:background_position_cancel_title"),onClick:p},t("documentTitleComponent:cancel")),D.b.createElement("span",{className:"se-cover-button se-cover-button-confirm-position",title:t("documentTitleComponent:background_position_save_title"),onClick:d},t("documentTitleComponent:confirm"))),n.background&&D.b.createElement(Ou,{store:n}))};Tu.propTypes={store:D.a.instanceOf(fu),isLocalUploadEnabled:D.a.bool,isSnsUploadEnabled:D.a.bool,isRepresentativeEnabled:D.a.bool,isRepresentative:D.a.bool,isBackgroundMovable:D.a.bool,onClickLocalUpload:D.a.func,onClickSnsUpload:D.a.func,onClickRepresentativeButton:D.a.func,onClickReposition:D.a.func,onClickCrop:D.a.func,onClickFilter:D.a.func,onClickAdjust:D.a.func,onClickDelete:D.a.func,onClickCancel:D.a.func,onClickConfirm:D.a.func,i18n:D.a.func};var Lu,Eu=Tu,Pu={useToolbarSlot:!1},wu=["image","external-file","aside","library"],ku=(Lu=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={isEditing:!1},n._prevBackgroundId=null,n}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.componentDidUpdate=function(){var e=this.props.store.background,t=Object(x.a)(e,"image.id");this._prevBackgroundId!==t&&(this._disposeReactionBackground&&this._disposeReactionBackground(),this._disposeReactionBackground=D.f.reaction(function(){return e},this._handleReactionBackground,{fireImmediately:!0}),this._prevBackgroundId=t)},n.componentWillUnmount=function(){this._disposeReactionBackground&&this._disposeReactionBackground()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.layout,a=this._resolveWrapperClassName(),s=this._renderTitle(),c=this._renderSubtitle(),l=t.imageDisabled?null:this._renderBackground(),u=t.imageDisabled?null:this._renderButtons();return D.b.createElement(Ll.a,{store:t,id:i,ctype:r,layout:o,className:a,head:l,tail:u,i18n:n},D.b.createElement(au.a,{blockWrapperProps:t,draggable:"false"},s,c))},n._renderTitle=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.title,o={placeholder:n("documentTitleComponent:title_placeholder")},a=t.getFontSizeCode(),s=R()("se-title-text","se-module-"+a+"-min-height-for-ie");return D.b.createElement(Pl.a,{text:r,compId:i,className:s,options:Pu,additionalOption:o,onLimitTextLength:this._handleLimitOverTitle})},n._renderSubtitle=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.subTitle;if(r.disable)return null;var o={placeholder:n("documentTitleComponent:sub_title_placeholder")},a=R()("se-subtitle-text");return D.b.createElement(Pl.a,{text:r,compId:i,className:a,options:Pu,additionalOption:o,onLimitTextLength:this._handleLimitOverSubTitle})},n._getAdditionalOption=function(){return{placeholder:(0,this.props.i18n)("documentTitleComponent:title_placeholder")}},n._renderBackground=function(){var e=this.props.store;return D.b.createElement(_u,{i18n:this.props.i18n,isEditing:this.state.isEditing,background:this.props.store.background,onChangePosition:this._handleChangePosition,onClickOutside:this._handleClickBackgroundOutside,isBackgroundMovable:e.isBackgroundMovable})},n._renderButtons=function(){return Eu({i18n:this.props.i18n,store:this.props.store,onClickLocalUpload:this._handleClickImageBtn,onClickSnsUpload:this._handleClickSNSBtn,onClickRepresentativeButton:this._handleClickRepresent,onClickReposition:this._handleClickPositionBtn,onClickCrop:this._handleClickCropBtn,onClickFilter:this._handleClickFilterBtn,onClickAdjust:this._handleClickAdjustBtn,onClickDelete:this._handleClickDelBtn,onClickCancel:this._handleClickCancel,onClickConfirm:this._handleClickConfirm})},n._resolveWrapperClassName=function(){var e=this.state.isEditing,t=this.props.store,n=t.dragAndDrop,i=n.dragDataType,r=wu.includes(i),o=!0===t.isDndUploadEnable&&n.isOnDrop&&r,a=this._hasBackgroundImage()&&!1===e;return R()({"__se-cursor-inverted":a,"se-documentTitle-cover-image":a,"se-documentTitle-cover-image se-is-cover-moving":e,"se-is-drop-activated":o})},n._handleClickRepresent=function(e){this.props.useCase.setRepresentativeImage({compId:this.props.store.id}),Be.a.log(e.nativeEvent,"ttlct.rep")},n._handleChangePosition=function(e){this.setState({backgroundPosition:e})},n._hasBackgroundImage=function(){var e=this.props.store;return""!==Object(x.a)(e,"background.image.src","")},n._handleClickCropBtn=function(){this.props.useCase.cropCoverImage()},n._handleClickFilterBtn=function(){this.props.useCase.filterCoverImage()},n._handleClickAdjustBtn=function(){this.props.useCase.adjustCoverImage()},n._handleClickDelBtn=function(e){this.props.useCase.deleteBackground(),Be.a.log(e.nativeEvent,"ttlct.pdel")},n._handleClickImageBtn=function(e){this.props.useCase.uploadBackground(),Be.a.log(e.nativeEvent,"ttlct.photo")},n._handleClickSNSBtn=function(){this.props.useCase.uploadBackgroundFromSNS()},n._handleClickPositionBtn=function(e){this.props.useCase.startEditingBackgroundPosition(),this._startEditing(),Be.a.log(e.nativeEvent,"ttlct.move")},n._handleClickConfirm=function(e){this.props.useCase.fixBackgroundPosition(this.state.backgroundPosition),this._stopEditing(),Be.a.log(e.nativeEvent,"ttlct.moveok")},n._handleClickCancel=function(e){this.props.useCase.revertBackgroundPosition(),this._stopEditing(),Be.a.log(e.nativeEvent,"ttlct.movecancel")},n._handleClickBackgroundOutside=function(){this._cancelEditingMode()},n._handleLimitOverTitle=function(){var e=this.props,t=e.i18n,n=e.store;this.props.useCase.showToast(t("documentTitleComponent:warning_limit_over_title_text",{maxLength:n.title.maxLength}))},n._handleLimitOverSubTitle=function(){var e=this.props,t=e.i18n,n=e.store;this.props.useCase.showToast(t("documentTitleComponent:warning_limit_over_sub_title_text",{maxLength:n.subTitle.maxLength}))},n._handleReactionBackground=function(){this.props.useCase.repaintCursor()},n._startEditing=function(){var e=this.props.store.background.point;this.setState({isEditing:!0,backgroundPosition:{backgroundPositionX:e.x||"50%",backgroundPositionY:e.y||"50%"}})},n._stopEditing=function(){this.setState({isEditing:!1})},n._cancelEditingMode=function(){this.props.useCase.revertBackgroundPosition(),this._stopEditing()},t}(D.b.Component),k()(Lu.prototype,"_renderButtons",[te.muteIfReadOnly],Object.getOwnPropertyDescriptor(Lu.prototype,"_renderButtons"),Lu.prototype),k()(Lu.prototype,"_handleClickRepresent",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickRepresent"),Lu.prototype),k()(Lu.prototype,"_handleChangePosition",[te.autobind,te.muteIfReadOnly],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleChangePosition"),Lu.prototype),k()(Lu.prototype,"_handleClickCropBtn",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickCropBtn"),Lu.prototype),k()(Lu.prototype,"_handleClickFilterBtn",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickFilterBtn"),Lu.prototype),k()(Lu.prototype,"_handleClickAdjustBtn",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickAdjustBtn"),Lu.prototype),k()(Lu.prototype,"_handleClickDelBtn",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickDelBtn"),Lu.prototype),k()(Lu.prototype,"_handleClickImageBtn",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickImageBtn"),Lu.prototype),k()(Lu.prototype,"_handleClickSNSBtn",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickSNSBtn"),Lu.prototype),k()(Lu.prototype,"_handleClickPositionBtn",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickPositionBtn"),Lu.prototype),k()(Lu.prototype,"_handleClickConfirm",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickConfirm"),Lu.prototype),k()(Lu.prototype,"_handleClickCancel",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickCancel"),Lu.prototype),k()(Lu.prototype,"_handleClickBackgroundOutside",[te.autobind,te.muteIfReadOnly],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleClickBackgroundOutside"),Lu.prototype),k()(Lu.prototype,"_handleLimitOverTitle",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleLimitOverTitle"),Lu.prototype),k()(Lu.prototype,"_handleLimitOverSubTitle",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleLimitOverSubTitle"),Lu.prototype),k()(Lu.prototype,"_handleReactionBackground",[te.autobind],Object.getOwnPropertyDescriptor(Lu.prototype,"_handleReactionBackground"),Lu.prototype),Lu);ku.defaultProps={i18n:function(e){return e},dragAndDrop:{isDropEnabled:!1,isExternalImage:!1,direction:"",compId:"",unitId:""}},ku.propTypes={shouldForceRefresh:D.a.bool,i18n:D.a.func,useCase:D.a.instanceOf(su).isRequired,store:D.a.instanceOf(fu).isRequired,dragAndDrop:D.a.object};var xu,Du,Au,ju,Ru,Nu,Mu,Bu,Wu,Uu,Fu,zu=Object(N.b)(ku),Vu=function(e){function t(){var t;return(t=e.call(this)||this)._componentListStore=_.W.get("componentListStore"),t._virtualEditable=_.W.get("virtualEditable"),t}S()(t,e);var n=t.prototype;return n.updateBackgroundImage=function(e){this.getComponentStore().insertBackgroundImage(e)},n.deleteBackgroundImage=function(){this.getComponentStore().deleteBackgroundImage()},n.reset=function(){this.getComponentStore().reset()},n.updateBackgroundPosition=function(e){this.getComponentStore().updateBackgroundPosition(e)},n.startEditingBackgroundPosition=function(){this._virtualEditable.disable()},n.stopEditingBackgroundPosition=function(){this._virtualEditable.enable()},n.getComponentStore=function(){return this._componentListStore.getComponentByCtype("documentTitle")},n.getBackgroundImageId=function(){return this.getComponentStore().toValidJSON().background.image.id},n.getBackgroundImageData=function(){return this.getComponentStore().toValidJSON().background.image},t}(_.a),Gu=n(211),Hu=["type","title","label","hasIcon","value","logId","buttonConfig"],qu=["fs26","fs32","fs38"],Ju=(xu=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.LABEL_SELECT:t,i=e.title,r=void 0===i?"titleFontSizeCode:title":i,o=e.label,a=void 0===o?"titleFontSizeCode:label":o,s=e.hasIcon,c=void 0!==s&&s,l=e.value,u=void 0===l?"fs38":l,p=e.logId,d=void 0===p?"size":p,h=e.buttonConfig,g=Me()(e,Hu),f=this._refineOptions(h&&h.allowList);return D.b.createElement(Gu.a,oo()({type:n,title:r,label:a,hasIcon:c,value:u,logId:d,options:f},g,{onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeFontSize(e),this.props.onClickSelector(e)},n._refineOptions=function(e){return Object(to.a)(Ae.a,e||qu)},t}(D.b.Component),k()(xu.prototype,"_handleClickOption",[te.autobind],Object.getOwnPropertyDescriptor(xu.prototype,"_handleClickOption"),xu.prototype),xu),Ku=n(246),Xu=n(304),Yu=(Du=Object(te.history)({sync:!1}),Au=Object(te.history)({sync:!1}),ju=function(e){function t(){var t;return(t=e.call(this)||this)._documentTitleComponentService=_.W.get("documentTitleComponentService"),t._imageEditService=_.W.get("imageEditService"),t._alertLayerService=_.W.get("alertLayerService"),t._canvasLayoutService=_.W.get("canvasLayoutService"),t._imageUploadService=_.W.get("imageUploadService"),t._imageBehavior=_.W.get("imageBehavior"),t}S()(t,e);var n=t.prototype;return n.changeImage=function(){var e=Tt()(It.a.mark(function e(){var t,n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog();case 2:return t=e.sent,n=this._documentTitleComponentService.getComponentStore().id,e.next=6,this._imageBehavior.insertBackground(n,t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.editImage=function(){var e=Tt()(It.a.mark(function e(){var t,n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._documentTitleComponentService.getComponentStore(),n=this._documentTitleComponentService.getBackgroundImageData(),i=t.toValidJSON(),e.next=5,this._imageEditService.editImage({activeCompId:n.id,editableImages:[i]});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._handleFailUploadBackground=function(e){var t=this;this._alertLayerService.open({type:"alert",title:e.cause,description:e.description,onClickConfirm:function(){t._canvasLayoutService.refreshVirtualEditable()}}),this._documentTitleComponentService.reset(),this._imageUploadService.reset()},t}(_.m),k()(ju.prototype,"changeImage",[te.sentryCatch,Du,D.d],Object.getOwnPropertyDescriptor(ju.prototype,"changeImage"),ju.prototype),k()(ju.prototype,"editImage",[te.sentryCatch,te.preventOnDocumentProcessing,Au,D.d],Object.getOwnPropertyDescriptor(ju.prototype,"editImage"),ju.prototype),k()(ju.prototype,"_handleFailUploadBackground",[te.autobind],Object.getOwnPropertyDescriptor(ju.prototype,"_handleFailUploadBackground"),ju.prototype),ju),Qu={"title-font-size":{view:Ju,useCase:pa.a,propertyName:"fontSizeCode",styleName:"font-size-code"},"background-image-replacement":{view:Xu.a,useCase:Yu,propertyName:"",styleName:"image-replacement"},"background-image-edit":{view:Ku.a,useCase:Yu,propertyName:"",styleName:"image-edit"}},Zu={propertyToolbar:{"font-family":Object(pt.a)("font-family"),"title-font-size":Qu["title-font-size"],"align-drop-down-without-right":Object(pt.a)("align-drop-down-without-right"),"background-image-replacement":Qu["background-image-replacement"],"background-image-edit":Qu["background-image-edit"],"special-letter":Object(pt.a)("special-letter"),"translation-right-label":Object(pt.a)("translation-right-label"),speller:Object(pt.a)("speller"),"separator-bar":Object(pt.a)("separator-bar")}},$u={propertyToolbar:function(e){var t=e.selectedComponents,n=["font-family","title-font-size","separator-bar","align-drop-down-without-right","separator-bar","special-letter"];return t.every(function(e){return e.translationEnabled})&&n.push("separator-bar","translation-right-label"),n.push("separator-bar","speller"),1===t.length&&t[0].hasBackgroundImage()&&(n.push("separator-bar","background-image-replacement"),t[0].hasEditableBackgroundImage()&&n.push("separator-bar","background-image-edit")),n}},ep=function(e){function t(){return e.call(this,{buttonSetMap:Zu,buttonResolver:$u})||this}return S()(t,e),t}(_.l),tp=_.q.extend({name:"DocumentTitleComponent",view:zu,useCase:su,service:Vu,store:fu,toolbar:ep}),np=n(156),ip={DEFAULT:"default"},rp={FIT:"fit",EXTEND:"extend",PAGEFULL:"pagefull"},op=n(309),ap=n(215),sp=n(825),cp=function(e){var t=e.i18n,n=e.images,i=e.onDoubleClick,r=e.onClickRepresent,o=e.onClickDelete,a=e.onCompleteImage;return n.map(function(e){var n=e.representativeEnabled,s={showLocationButton:e.showLocationButton,showRepresentative:!!n&&e.isRepresentativeImage()};return D.b.createElement(sp.a,{key:e.id,style:{width:e.widthPercentage+"%"},onDoubleClick:i,onClickRepresentative:r,onClickDelete:o,onCompleteImage:a,additionalOption:s,labelLink:t("imageUnit:label_link"),labelThumbnail:t("imageUnit:label_thumbnail"),labelDeleteImage:t("imageUnit:label_delete_image"),labelThisIs360VR:t("imageUnit:label_this_is_360vr"),labelUse360vr:t("imageUnit:label_use_360vr"),i18n:t,store:e})})},lp=n(106),up=n(113),pp=n(172),dp=n(563),hp=["contentMode","link"],gp=Object(_.bb)(_.h),fp=(Ru=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"query",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"query"},n.domain="",n.thumbnailTypeMap={},n.imageMiniumHeight=0,L()(n,"caption",Nu,P()(n)),L()(n,"images",Mu,P()(n)),L()(n,"layout",Bu,P()(n)),L()(n,"contentMode",Wu,P()(n)),L()(n,"phase",Uu,P()(n)),L()(n,"align",Fu,P()(n));var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;n._config=s,n._configAgent=_.W.get("configAgent"),n._infraConfig=n._configAgent.get("infraConfig"),n._componentFactory=_.W.get("componentFactory"),n.thumbnailTypeMap=n._configAgent.get("editorInfo.thumbnailType")||n.thumbnailTypeMap,n.useThumbnail=Object(x.a)(n._infraConfig,"image.useThumbnail",!0),n.imageMiniumHeight=n._configAgent.get("editorInfo.imageMiniumHeight")||n.imageMiniumHeight,n.attributes=Object(Ir.a)(n.attributes,s.attributes),n.showLocationButton=!1,n.caption=n._createTextUnitStore(o.caption,s.caption);var c={attributes:{cursor:"selectable-unit",selection:"selectable-unit",erasure:"query"}};return n.images=Object(Pn.a)(o.images,function(e){return n._componentFactory.createComponentWithCompData(e,c)}),n.layout=o.layout||n.layout,n.contentMode=o.contentMode||n.contentMode,n.align=o.align||n.align,n.updateWidthRatio(n.images),n}S()(t,e);var n=t.prototype;return n.filterStyle=function(e){this.caption.filterStyle(e)},n.setState=function(){return this},n.updateConfig=function(){e.prototype.updateConfig.call(this),this.images.forEach(function(e){e.updateConfig&&e.updateConfig()})},n.updateData=function(e){var t=this;e.images.forEach(function(e){var n=t.images.find(function(t){return t.id===e.id});Object(lp.a)(n,e)})},n.changeContentMode=function(e){this.contentMode=e},n.changeLink=function(e,t){if(void 0===e&&(e={}),!0===this.caption.isFocused)return this.caption.changeLink(this.checkProtocol(e),t);if(!0===this._isImageUnit(t)){var n=t.start.unitId;this._findImageUnitByUnitId(n).link=e.value?this.checkProtocol(e).value:null}},n.updateProperty=function(e,t){var n=e.contentMode,i=e.link,r=Me()(e,hp);if(n&&this.changeContentMode(n),Object(wl.a)(this,r),i)return this.changeLink(i,t)},n.queryDragAndDrop=function(e){var t=e.items,n=e.dropPoint,i=e.focus,r=e.insertDirection,o=e.itemIds,a=e.isOnEdge,s=t.some(function(e){return"image"!==e.ctype}),c=t.length>1,l=3===this.images.length,u=!c&&!s&&!l,p=this.images.findIndex(function(e){return e.id===i.unitId}),d=t[0].id===i.unitId&&!s&&!c&&p>-1,h=o.includes(this.id);if(a)return i.compId===i.unitId&&this.id===i.compId?null:(n.unitId=this.id,{insertCommand:r===_.x.BOTTOM?"append":"prepend",insertPoint:n,direction:r});if(d){var g=p-this.images.findIndex(function(e){return e.id===n.unitId});if(0===g)return null;if(1===g&&n.offset>0)return null;if(-1===g&&0===n.offset)return null;var f=0===n.offset?_.x.LEFT:_.x.RIGHT;return{insertCommand:"query",insertPoint:n,direction:f}}return h?null:u?{insertCommand:"query",insertPoint:n,direction:0===n.offset?_.x.LEFT:_.x.RIGHT}:this._isAppendable({items:t,hasOtherType:s,isFull:l,focus:i})?(n.unitId=this.id,{insertCommand:r===_.x.BOTTOM?"append":"prepend",insertPoint:n,direction:r}):null},n._isAppendable=function(e){var t=e.hasOtherType,n=e.isFull,i=e.focus,r=this.images.some(function(e){return e.id===i.unitId});return t||n||r},n.merge=function(e,t){var n=e.every(function(e){return"image"===e.ctype});if(e.length<=2&&n){var i,r=t.unitId,o=t.offset;e.forEach(function(e){Object.assign(e.attributes,{cursor:"selectable-unit",selection:"selectable-unit",erasure:"query"}),e.format!==_.D.PANORAMA&&e.format!==_.D.VR360||(e.displayFormat=_.D.NORMAL,e._resolveThumbnailType())});var a=[].concat(e),s=this.images.findIndex(function(e){return e.id===r});if(s>=0&&o>=1?s=0===o?Math.max(s-1,0):Math.min(s+1,2):s<0&&(s=0),(i=this.images).splice.apply(i,[s,0].concat(a)),this.updateWidthRatio(this.images),1===a.length){var c=a[0],l=this.caption.isEmpty()?c.caption:this.caption,u=dp.a.dropProperty(l.toValidJSON(),"id");this.caption=this._createTextUnitStore(u,this._config.caption),this.updateTheme()}return{components:[this]}}return{components:[this].concat(e)}},n.mergeWith=function(e,t){var n,i=t.mergePoint,r=i.unitId,o=i.offset,a=[].concat(e),s=this.images.findIndex(function(e){return e.id===r});return s>=0&&1===o?s+=1:s<0&&(s=0),(n=this.images).splice.apply(n,[s,0].concat(a)),this.updateWidthRatio(this.images),this},n.queryErasure=function(e){if(this._isImageUnit(e)){if(this._removeImageUnit(e),1===this.images.length){var t=this.images[0].toValidJSON();t.id=this.id;var n=this._componentFactory.createComponentWithCompData(t);return{result:"replace",component:n,range:n.getComponentActiveRange()}}return{result:"replace",component:this,range:this.getComponentActiveRange()}}if(this._isSelectedComponent())return{result:"self",component:null,range:null}},n._removeImageUnit=function(e){var t=this.images.filter(function(t){return t.id!==e.start.unitId});this.images=this.updateWidthRatio(t)},n.changeImage=function(e,t){var n=e.start.unitId;this._findImageUnitByUnitId(n).setState(t)},n.applyEditedImage=function(e){var t=this,n=e.photos.map(function(e){return e.modified?t._refineIntoImageData(e):e});this.updateData({compId:e.key,images:n}),this.updateWidthRatio(this.images)},n._refineIntoImageData=function(e){var t=e.key,n=e.fileSize,i=e.height,r=e.width,o=e.domain,a=e.path,s=""+o+a;return{fileSize:n,height:i,width:r,originalWidth:r,originalHeight:i,path:a,id:t,src:!1===this.useThumbnail?s:s+"?type="+this.thumbnailTypeMap.normal}},n.getStoreById=function(e){if(e===this.id)return this;if(e===this.caption.id)return this.caption;var t=this.images.find(function(t){return t.id===e});return t||null},n.getSelectedAlign=function(){return{align:this.align}},n.collectStyle=function(e){var t="justify"===this.align||null===this.align?"left":this.align,n={layout:this.layout,contentMode:this.contentMode,width:this.width,height:this.height,align:t};if(e&&!0===this.caption.isFocused){var i=this.caption.collectStyle(e),r=Object(pp.a)(i,function(e){return""===e||null===e});n.caption=r}if(!0===this._isImageUnit(e)){var o=Object(er.a)(this.images,{id:e.start.unitId});n.link={value:o.link},n.src=o.src}return n},n._findImageUnitByUnitId=function(e){return this.images.filter(function(t){return t.id===e})[0]},n._isSelectedComponent=function(){return"single"===this.selection||"multi"===this.selection||"block"===this.selection},n._isImageUnit=function(e){return!!this._findImageUnitByUnitId(e.start.unitId)},n.updateWidthRatio=function(e){if(0===e.length)return!1;var t=e,n=t[0].height;t.forEach(function(e){var t=n/e.height;e._normalHeight=e.height*t,e._normalWidth=e.width*t});var i=t.reduce(function(e,t){return("number"==typeof e?e:e._normalWidth)+("number"==typeof t?t:t._normalWidth)});return t.forEach(function(e){e.widthPercentage=e._normalWidth/i*100,delete e._normalHeight,delete e._normalWidth}),t},n.clone=function(e){if(this.caption.isFocused)return this.caption.clone(e);if(this.isUnitFocused){var t=this._findFocusedUnit().clone();return t.resetWidthPercentage(),t}return this._componentFactory.createComponentWithCompData(this.toValidJSON())},n._findFocusedUnit=function(){return Object(er.a)(this.images,function(e){return"single"===e.selection})},n.isRepresentativeImage=function(){return Object(up.a)(this.images,function(e){return e.isRepresentativeImage()})},n.hasRepresentativeImage=function(){return Object(up.a)(this.images,function(e){return e.hasRepresentativeImage()})},n.setRepresentativeImage=function(e){var t=e.unitId,n=this._findImageUnitByUnitId(t);n||(n=Object(er.a)(this.images,function(e){return e.isRepresentativeImage()})),n&&n.setRepresentativeImage()},n.releaseRepresentativeImage=function(e){var t=e.unitId,n=this._findImageUnitByUnitId(t);n&&n.releaseRepresentativeImage()},n.getRepresentativeId=function(){var e=this;return Object(Pn.a)(this.images,function(t){return e.id+"|"+t.getRepresentativeId()})},n.getRepresentativeInnerData=function(){var e=Object(er.a)(this.images,function(e){return e.hasRepresentativeImage()});return e?e.getRepresentativeInnerData():null},n.isLibraryComponent=function(){return Object(up.a)(this.images,function(e){return!0===e.isLibraryComponent()})},n.getLibraryItemData=function(){var e=this;return Object(jt.a)(Object(Pn.a)(this.images,function(t){if(t.isLibraryComponent())return Object.assign(t.getLibraryItemData(),{id:e.id})}))},n.deselect=function(){this.images.forEach(function(e){return e.deselect()}),this.caption.deselect(),this._changeSelectionToNone()},n._createTextUnitStore=function(e,t){var n={state:e,config:Object(l.a)({},t,{attributes:{cursor:"trapped",selection:"trapped",insertion:"append",drop:"only-text",paste:"only-text",lineBreak:{enter:"move-to-next-text",shiftEnter:"line-break-in-paragraph"},erasure:"trapped-text"},filterTextStyle:{fontFamily:xl.b.NOT_ALLOWED,fontSizeCode:xl.b.NOT_ALLOWED,fontColor:xl.b.NOT_ALLOWED,backgroundColor:xl.b.NOT_ALLOWED,italic:xl.b.NOT_ALLOWED,underline:xl.b.NOT_ALLOWED,strikeThrough:xl.b.NOT_ALLOWED,subscript:xl.b.NOT_ALLOWED,superscript:xl.b.NOT_ALLOWED,dropCap:xl.b.NOT_ALLOWED}})},i=Object(x.a)(t,"textStyle",{}),r=n.config.filterTextStyle;return n.config.filterTextStyle=Object(Ir.a)(r,i),new Dl.a(n)},n.toPlainJSON=function(e,t){if(void 0===e&&(e=this.getStartPoint),void 0===t&&(t=this.getEndPoint()),this._isOnCaption(e,t))return{ctype:pu.a.TEXT,value:this.caption.toPlainJSON(e,t)};var n=this.images.find(function(n){return e.unitId===n.id||t.unitId===n.id});return n?n.toPlainJSON():{id:this.id,ctype:this.ctype,caption:this.caption.toPlainJSON(),images:this.images.map(function(e){return e.toPlainJSON()}),layout:this.layout,phase:this.phase,contentMode:this.contentMode,align:this.align}},B()(t,[{key:"isUnitFocused",get:function(){return Object(up.a)(this.images,function(e){return"single"===e.selection})}},{key:"isFocused",get:function(){return this.caption.isFocused||this.isUnitFocused||"none"!==this.selection}},{key:"translationEnabled",get:function(){return"none"!==this.caption.selection}}]),t}(Object(_.Z)(gp)),Nu=k()(Ru.prototype,"caption",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mu=k()(Ru.prototype,"images",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Bu=k()(Ru.prototype,"layout",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ip.DEFAULT}}),Wu=k()(Ru.prototype,"contentMode",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return rp.EXTEND}}),Uu=k()(Ru.prototype,"phase",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.O.DONE}}),Fu=k()(Ru.prototype,"align",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k()(Ru.prototype,"isUnitFocused",[D.e],Object.getOwnPropertyDescriptor(Ru.prototype,"isUnitFocused"),Ru.prototype),k()(Ru.prototype,"isFocused",[D.e],Object.getOwnPropertyDescriptor(Ru.prototype,"isFocused"),Ru.prototype),Ru);fp.ctype="imageStrip",fp.schema={id:kl.a.string.isRequired,ctype:kl.a.string.isRequired,layout:kl.a.string.isRequired,contentMode:kl.a.string.isRequired,images:kl.a.arrayOf(kl.a.shape(lu.a.schema)).isRequired,caption:kl.a.captionTextUnit,align:kl.a.string};var mp,yp,vp,_p,bp=fp,Sp=(mp=Object(te.history)({sync:!1}),yp=Object(te.history)({sync:!1}),vp=function(e){function t(){var t;t=e.call(this)||this;var n=_.W.get("configAgent");return t._maxLength=n.get("plugins.componentSettings.imageStrip.config.caption.maxLength"),t._editingService=_.W.get("editingService"),t._imageStripComponentService=_.W.get("imageStripComponentService"),t._imageUploadService=_.W.get("imageUploadService"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._imageEditService=_.W.get("imageEditService"),t._libraryPanelLayoutService=_.W.get("libraryPanelLayoutService")||{updateMediaList:function(){}},t._imageBehavior=_.W.get("imageBehavior"),t._toastLayerService=_.W.get("toastLayerService"),t._i18n=_.W.get("i18n"),t}S()(t,e);var n=t.prototype;return n.deleteImageUnit=function(e){this._editingService.erase(e)},n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId;_.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n}),this._libraryPanelLayoutService.updateMediaList()},n.changeImage=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog();case 2:return i=e.sent,r=this._selectionInfoStore.toValidJSON(),this._imageStripComponentService.changeImageUnitToShell(),e.next=7,this._imageBehavior.changeImage({targetStore:t,selectedImages:i},{onEachUpload:function(e){var t=e.code,i=e.response;"SUCCESS"===t&&o._imageStripComponentService.updateShellImageUnit(i,n)}}).then(function(e){e.invalidImageErrors.length>0&&(o._imageStripComponentService.updateComponentPhase(_.O.DONE,n),o._editingService.erase(r))});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.editImage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageEditService.editImage({activeCompId:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.exceedTextMaxLength=function(){this._toastLayerService.warningMessage(this._i18n("imageStripComponent:exceed_text_max_length",{maxLength:this._maxLength}))},t}(Object(_.Y)(_.c)),k()(vp.prototype,"deleteImageUnit",[te.preventOnComponentProcessing,te.history,D.d],Object.getOwnPropertyDescriptor(vp.prototype,"deleteImageUnit"),vp.prototype),k()(vp.prototype,"setRepresentativeImage",[te.history,D.d],Object.getOwnPropertyDescriptor(vp.prototype,"setRepresentativeImage"),vp.prototype),k()(vp.prototype,"changeImage",[te.preventOnDocumentProcessing,mp,D.d],Object.getOwnPropertyDescriptor(vp.prototype,"changeImage"),vp.prototype),k()(vp.prototype,"editImage",[te.preventOnDocumentProcessing,yp,D.d],Object.getOwnPropertyDescriptor(vp.prototype,"editImage"),vp.prototype),k()(vp.prototype,"exceedTextMaxLength",[D.d],Object.getOwnPropertyDescriptor(vp.prototype,"exceedTextMaxLength"),vp.prototype),vp),Cp=(_p=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=e.useCase,r=t.id,o=t.ctype,a=t.layout||ip.DEFAULT,s=t.contentMode||rp.FIT,c=this._resolveWrapperClassName();return D.b.createElement(Ll.a,{store:t,id:r,ctype:o,layout:a,contentMode:s,className:c,i18n:n},D.b.createElement(El.a,{compId:r,compStore:t},D.b.createElement(au.a,{blockWrapperProps:t},Object(ap.a)({}),D.b.createElement("div",{className:"se-imageStrip-container"},cp({i18n:n,images:t.images,onDoubleClick:this._handleDblClickImage,onClickRepresent:this._handleClickRepresent,onClickDelete:this._handleClickDeleteImageUnit,onCompleteImage:this._handleCompleteImage})),D.b.createElement(op.a,{store:t,useCase:i,i18n:n,additionalOption:{placeholder:this.props.i18n("imageStripComponent:placeholder_caption")},onLimitTextLength:this._handleLimitTextLength}))))},n._resolveWrapperClassName=function(){var e,t=this.props.store.images.length;return R()(((e={})["se-imageStrip"+t]=!0,e))},n._handleDblClickImage=function(e,t){var n=this.props,i=n.store,r=n.useCase;t.editable?r.editImage(t.id):r.changeImage(t,i.id)},n._handleClickRepresent=function(e,t){e.preventDefault(),e.stopPropagation();var n=this.props,i=n.store;n.useCase.setRepresentativeImage({compId:i.id,unitId:t.id}),Be.a.log(e.nativeEvent,"imsct.rep")},n._handleClickDeleteImageUnit=function(e,t){var n,i=this.props,r=i.store;i.useCase.deleteImageUnit({compIdMap:(n={},n[r.id]={},n),start:{compId:r.id,unitId:t.id,paraId:null,nodeId:null,offset:0},end:{compId:r.id,unitId:t.id,paraId:null,nodeId:null,offset:1}}),Be.a.log(e.nativeEvent,"imsct.x")},n._handleCompleteImage=function(){this.props.useCase.repaintCursor()},n._handleLimitTextLength=function(){this.props.useCase.exceedTextMaxLength()},t}(D.b.Component),k()(_p.prototype,"_handleDblClickImage",[te.autobind],Object.getOwnPropertyDescriptor(_p.prototype,"_handleDblClickImage"),_p.prototype),k()(_p.prototype,"_handleClickRepresent",[te.autobind],Object.getOwnPropertyDescriptor(_p.prototype,"_handleClickRepresent"),_p.prototype),k()(_p.prototype,"_handleClickDeleteImageUnit",[te.autobind],Object.getOwnPropertyDescriptor(_p.prototype,"_handleClickDeleteImageUnit"),_p.prototype),k()(_p.prototype,"_handleCompleteImage",[te.autobind],Object.getOwnPropertyDescriptor(_p.prototype,"_handleCompleteImage"),_p.prototype),k()(_p.prototype,"_handleLimitTextLength",[te.autobind],Object.getOwnPropertyDescriptor(_p.prototype,"_handleLimitTextLength"),_p.prototype),_p);Cp.propTypes={shouldForceRefresh:D.a.bool,i18n:D.a.func.isRequired,store:D.a.instanceOf(bp).isRequired,useCase:D.a.instanceOf(Sp).isRequired};var Ip,Op,Tp,Lp,Ep,Pp,wp=Object(N.b)(Cp),kp=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=_.W.get("configAgent"),t._componentListStore=_.W.get("componentListStore"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._i18n=_.W.get("i18n"),t}S()(t,e);var n=t.prototype;return n.updateData=function(e){this.getComponentStore(e.compId).updateData(e)},n.updateComponentPhase=function(e,t){this.getComponentStore(t).updatePhase(e)},n.isImageCompIncluded=function(e,t){var n=e.compId,i=t.compId;if(i===n)return!0;var r=this._componentListStore.getComponentById(n);return"imageStrip"===r.ctype&&r.images.some(function(e){return e.id===i})},n.getSelectedCompStore=function(){var e=this._selectionInfoStore.start.compId;return this.getComponentStore(e)},n.getCompStoreByCompId=function(e){return this.getComponentStore(e)},n.getImageComponent=function(e,t){return e.getStoreById(t)},n.getSelectedImage=function(){var e=this.getSelectedCompStore(),t=this._selectionInfoStore.toValidJSON().start;return this.getImageComponent(e,t.unitId)},n.isComponentActivated=function(){var e=this._selectionInfoStore.toValidJSON().start;return e.compId===e.unitId},n._updateImageStripWithRatio=function(e){var t=this.getCompStoreByCompId(e);t.updateWidthRatio(t.images)},n.updateShellImageUnit=function(e,t){var n=this.getCompStoreByCompId(t).images,i=Object(er.a)(n,{id:e.id});this.updateShellImageUnitBy(e,i,t)},n.updateShellImageUnitBy=function(e,t,n){var i=this._configAgent.get("infraInfo.photoInfra.imageHost"),r=e.animatedCnt>1,o={alt:e.fileName,height:parseInt(e.height,10),width:parseInt(e.width,10),originalWidth:parseInt(e.width,10),originalHeight:parseInt(e.height,10),path:e.path+"/"+e.fileName,fileSize:Number(e.fileSize),format:r?_.D.ANIMATED:_.D.NORMAL,fileName:e.fileName,internalResource:!0,phase:_.O.DONE,domain:e.domain||t.domain||i};r||(o.displayFormat=_.D.NORMAL),t.setState(o),this._updateImageStripWithRatio(n)},n.changeImageUnitToShell=function(){var e=this.getSelectedCompStore(),t=this._selectionInfoStore.toValidJSON();e.changeImage(t,{phase:_.O.PROCESSING,internalResource:!0,path:""})},n.getShellUnitInfoOfImageStripComp=function(e){var t=this._componentListStore.getComponentById(e.start.compId).images.filter(function(e){return e.phase!==_.O.DONE});return 0===t.length?{}:{id:t[0].id,unitStores:t}},n.getInternalResourceImages=function(){return this.getSelectedCompStore().images.filter(function(e){return!0===e.internalResource})},t}(_.a),xp=n(300),Dp=n(301),Ap=n(302),jp=n(303),Rp=n(791),Np=(Ip=Object(te.history)({sync:!1}),Op=Object(te.history)({sync:!1}),Tp=Object(te.history)({sync:!1}),Lp=Object(te.history)({sync:!1}),Ep=Object(te.history)({sync:!1}),Pp=function(e){function t(){var t;return(t=e.call(this)||this)._editingService=_.W.get("editingService"),t._imageUploadService=_.W.get("imageUploadService"),t._componentListStore=_.W.get("componentListStore"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._imageStripComponentService=_.W.get("imageStripComponentService"),t._imageEditService=_.W.get("imageEditService"),t._imageComponentService=_.W.get("imageComponentService"),t._imageBehavior=_.W.get("imageBehavior"),t}S()(t,e);var n=t.prototype;return n.changeImage=function(){var e=Tt()(It.a.mark(function e(){var t,n,i,r,o,a=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._imageStripComponentService.getSelectedCompStore(),n=this._imageStripComponentService.getSelectedImage(),e.next=4,this._imageUploadService.openFileDialog();case 4:return i=e.sent,r=t.id,o=this._selectionInfoStore.toValidJSON(),this._imageStripComponentService.updateComponentPhase(_.O.PROCESSING,r),this._imageStripComponentService.changeImageUnitToShell(),e.next=11,this._imageBehavior.changeImage({targetStore:n,selectedImages:i},{onEachUpload:function(e){var t=e.code,n=e.response;"SUCCESS"===t&&a._imageStripComponentService.updateShellImageUnit(n,r)}}).then(function(e){e.invalidImageErrors.length>0&&a._editingService.erase(o),a._imageStripComponentService.getCompStoreByCompId(r)&&a._imageStripComponentService.updateComponentPhase(_.O.DONE,r)});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._openPhotoEditor=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._imageStripComponentService.getInternalResourceImages(),i=this._imageStripComponentService.isComponentActivated(),r=this._imageStripComponentService.getSelectedImage(),o=i?n[0].id:r.id,e.next=6,this._imageEditService.editImage({activeCompId:o,direct:t});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.editImage=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.adjustImage=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("adjust");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.cropImage=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("crop");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.filterImage=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("filter");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(_.m),k()(Pp.prototype,"changeImage",[te.sentryCatch,te.preventOnComponentProcessing,Ip,D.d],Object.getOwnPropertyDescriptor(Pp.prototype,"changeImage"),Pp.prototype),k()(Pp.prototype,"editImage",[te.sentryCatch,te.preventOnDocumentProcessing,Op,D.d],Object.getOwnPropertyDescriptor(Pp.prototype,"editImage"),Pp.prototype),k()(Pp.prototype,"adjustImage",[te.sentryCatch,te.preventOnDocumentProcessing,Tp,D.d],Object.getOwnPropertyDescriptor(Pp.prototype,"adjustImage"),Pp.prototype),k()(Pp.prototype,"cropImage",[te.sentryCatch,te.preventOnDocumentProcessing,Lp,D.d],Object.getOwnPropertyDescriptor(Pp.prototype,"cropImage"),Pp.prototype),k()(Pp.prototype,"filterImage",[te.sentryCatch,te.preventOnDocumentProcessing,Ep,D.d],Object.getOwnPropertyDescriptor(Pp.prototype,"filterImage"),Pp.prototype),Pp),Mp={"image-edit-right-label":{view:Ku.a,useCase:Np,propertyName:"",styleName:"image-edit"},"image-edit":{view:xp.a,useCase:Np,propertyName:"",styleName:"image-edit"},"image-adjust":{view:Dp.a,useCase:Np,styleName:"image-adjust"},"image-crop":{view:Ap.a,useCase:Np,styleName:"image-crop"},"image-filter":{view:jp.a,useCase:Np,styleName:"image-filter"},"image-replacement-right-label":{view:Xu.a,useCase:Np,propertyName:"",styleName:"image-replacement"},"image-replacement":{view:Rp.a,useCase:Np,propertyName:"",styleName:"image-replacement"}},Bp={propertyToolbar:{"image-replacement-right-label":Mp["image-replacement-right-label"],"image-edit-right-label":Mp["image-edit-right-label"],align:Object(pt.a)("align-group"),"caption-align":Object(pt.a)("caption-align-group"),"content-mode-without-default":Object(pt.a)("content-mode-group-without-default"),"content-mode-fit-and-extend":Object(pt.a)("content-mode-group-fit-and-extend"),"wrapping-layout":Object(pt.a)("wrapping-layout-drop-down"),"image-link":Object(pt.a)("image-link"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"caption-bold":Object(pt.a)("caption-bold"),"special-letter":Object(pt.a)("special-letter"),"caption-link":Object(pt.a)("caption-link"),"caption-align":Object(pt.a)("caption-align"),"image-replacement":Mp["image-replacement"],"image-edit":Mp["image-edit"],"content-mode":Object(pt.a)("content-mode-group"),"content-mode-without-default":Object(pt.a)("content-mode-group-without-default"),"content-mode-fit-and-extend":Object(pt.a)("content-mode-group-fit-and-extend"),delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar"),translation:Object(pt.a)("translation")}};function Wp(e,t){var n=t.start.unitId;return Object(er.a)(e.images,{id:n})}function Up(e,t){return t?t.editable:Object(up.a)(e.images,function(e){return e.editable})}var Fp,zp,Vp,Gp,Hp,qp,Jp,Kp,Xp,Yp,Qp,Zp,$p,ed,td,nd,id,rd,od,ad,sd,cd,ld,ud,pd,dd,hd={propertyToolbar:function(e){var t=e.selectedComponents,n=e.selectionInfoStore,i=[];if(1===t.length){var r=Object(At.a)(t),o=Wp(r,n),a=!!o,s=Up(r,o);r.isCaptionFocused()?i.push("caption-align","separator-bar"):i.push("align","separator-bar"),!0===a&&i.push("separator-bar","image-replacement-right-label"),!0===s&&i.push("separator-bar","image-edit-right-label"),i.push("separator-bar","content-mode-fit-and-extend"),!0===a&&i.push("separator-bar","image-link")}else i.push("align","separator-bar","content-mode-fit-and-extend");return i},contextToolbar:Object(pt.b)(function(e){var t=e.selectedComponents,n=e.selectionInfoStore,i=[],r=Object(At.a)(t),o=n.start.unitId===r.id,a=Wp(r,n),s=!!a,c=r.isCaptionFocused(),l=Up(r,a),u={captionFocused:c,groupSelected:o,activatedImage:a,imageSelected:s,editableIncluded:l};return c?i=["caption-align","separator-bar","caption-bold","special-letter","caption-link","separator-bar","translation"]:o?(!0===l&&i.push("image-edit","separator-bar"),!1===s&&(i.push("content-mode-fit-and-extend"),i.push("separator-bar","delete"))):s&&(!0===s&&i.push("image-replacement"),!0===l&&i.push("image-edit")),{buttons:i,payload:u}})},gd=function(e){function t(){return e.call(this,{buttonSetMap:Bp,buttonResolver:hd})||this}return S()(t,e),t}(_.l),fd=_.q.extend({name:"ImageStripComponent",view:wp,useCase:Sp,service:kp,store:bp,toolbar:gd}),md=n(76),yd=n(787),vd=n(786),_d={DEFAULT:"default"},bd={NORMAL:"normal",FIT:"fit",EXTEND:"extend",PAGEFULL:"pagefull"},Sd=n(85),Cd=n(252),Id=n(20),Od=["contentMode","resizing","link"],Td=Object(_.bb)(Object(_.Z)(_.h)),Ld=(Fp=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},n.documentWidth=null,n.onRender=null,L()(n,"vid",zp,P()(n)),L()(n,"layout",Vp,P()(n)),L()(n,"contentMode",Gp,P()(n)),L()(n,"fileSize",Hp,P()(n)),L()(n,"playTime",qp,P()(n)),L()(n,"template",Jp,P()(n)),L()(n,"internalResource",Kp,P()(n)),L()(n,"vendor",Xp,P()(n)),L()(n,"originalWidth",Yp,P()(n)),L()(n,"originalHeight",Qp,P()(n)),L()(n,"width",Zp,P()(n)),L()(n,"height",$p,P()(n)),L()(n,"format",ed,P()(n)),L()(n,"source",td,P()(n)),L()(n,"represent",nd,P()(n)),L()(n,"caption",id,P()(n)),L()(n,"align",rd,P()(n)),L()(n,"thumbnail",od,P()(n)),L()(n,"mediaMeta",ad,P()(n)),L()(n,"serviceData",sd,P()(n)),L()(n,"videoInfraServiceId",cd,P()(n)),L()(n,"viewMode",ld,P()(n)),L()(n,"imageLoaded",ud,P()(n)),L()(n,"representativeEnabled",pd,P()(n)),L()(n,"phase",dd,P()(n)),n._strictMinimumScale=!1;var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;n._config=s,n._configAgent=_.W.get("configAgent"),n._componentFactory=_.W.get("componentFactory"),n._editorStatusStore=_.W.get("editorStatusStore"),n.documentWidth=n._configAgent.get("productConfig.documentWidth"),n.videoMinimumWidth=n._configAgent.get("editorInfo.videoMinimumWidth"),n.videoMinimumHeight=n._configAgent.get("editorInfo.videoMinimumHeight"),n.attributes=Object(Ir.a)(n.attributes,s.attributes),n.vid=Object(x.a)(o,"vid",n.vid),n.layout=Object(x.a)(o,"layout",n.layout),n.fileSize=Object(x.a)(o,"fileSize",n.fileSize),n.playTime=Object(x.a)(o,"playTime",n.playTime),n.template=Object(x.a)(o,"template",n.template),n.internalResource=Object(x.a)(o,"internalResource",n.internalResource),n.vendor=Object(x.a)(o,"vendor",n.vendor),n.contentMode=Object(x.a)(o,"contentMode"),n.width=Object(x.a)(o,"width"),n.height=Object(x.a)(o,"height"),n.originalWidth=Object(x.a)(o,"originalWidth",n.width),n.originalHeight=Object(x.a)(o,"originalHeight",n.height),n.viewMode=n._editorStatusStore.viewMode,n.onRender=s.onRenderServiceData,n.updateConfig(),n.originalWidth&&n.originalHeight?n.width&&n.height?n._resolveWidthAndHeight({width:n.width,height:n.height}):(n.width=n.originalWidth,n.height=n.originalHeight,n._resolveWidthAndHeight({width:n.width,height:n.height})):(n.width=n.documentWidth,n.height=Math.floor(9*n.width/16),n.originalWidth=n.width,n.originalHeight=n.height,n.contentMode=bd.FIT),n.format=Object(x.a)(o,"format",n.format),n.source=Object(x.a)(o,"source",n.source),n.represent=Object(x.a)(o,"represent",n.represent),n.align=Object(x.a)(o,"align",n.align),n.caption=n._createCaptionTextUnitStore(o.caption,s.caption),n.thumbnail=Object(lp.a)(n.thumbnail,o.thumbnail),n.viewMode=Object(x.a)(o,"viewMode",n.viewMode);var c=n._configAgent.get("infraInfo.videoInfra.serviceId");return n.videoInfraServiceId=c?c.toString():null,o.mediaMeta&&(n.mediaMeta=Object(lp.a)({ctype:"mediaMeta"},o.mediaMeta),n.mediaMeta.tags=Object(x.a)(n.mediaMeta,"tags",[])),o.serviceData&&!Object(Ze.a)(o.serviceData)&&(n.serviceData=Object(x.a)(o,"serviceData",null)),n.contentMode?n._resolveSizeByContentMode():n._resolveContentModeBySize(),n.maxVideoTitleLength=40,n.updatePhase(n.thumbnail.src?_.O.DONE:_.O.PROCESSING),n}S()(t,e);var n=t.prototype;return n.setState=function(e){if(e&&e.caption){var t=this._createCaptionTextUnitStore(e.caption,this._config.caption);delete e.caption,this.caption=t}return this.vid=Object(x.a)(e,"vid",this.vid),this.layout=Object(x.a)(e,"layout",this.layout),this.fileSize=Object(x.a)(e,"fileSize",this.fileSize),this.playTime=Object(x.a)(e,"playTime",this.playTime),this.template=Object(x.a)(e,"template",this.template),this.internalResource=Object(x.a)(e,"internalResource",this.internalResource),this.vendor=Object(x.a)(e,"vendor",this.vendor),this.contentMode=Object(x.a)(e,"contentMode",this.contentMode),this.width=Object(x.a)(e,"width"),this.height=Object(x.a)(e,"height"),this.originalWidth=Object(x.a)(e,"originalWidth",this.originalWidth),this.originalHeight=Object(x.a)(e,"originalHeight",this.originalHeight),this.format=Object(x.a)(e,"format",this.format),this.source=Object(x.a)(e,"source",this.source),this.represent=Object(x.a)(e,"represent",this.represent),this.align=Object(x.a)(e,"align",this.align),this.videoInfraServiceId=Object(x.a)(e,"videoInfraServiceId",this.videoInfraServiceId),this.thumbnail=Object(lp.a)(this.thumbnail,e.thumbnail),this.viewMode=Object(x.a)(e,"viewMode",this.viewMode),this.maxVideoTitleLength=Object(x.a)(e,"maxVideoTitleLength",this.maxVideoTitleLength),this.width&&this.height||(this.width=this.originalWidth,this.height=this.originalHeight),this._resolveWidthAndHeight({width:this.width,height:this.height}),this._resolveContentModeBySize(),e.mediaMeta&&(this.mediaMeta=Object(lp.a)({ctype:"mediaMeta"},e.mediaMeta),this.mediaMeta.tags=Object(x.a)(this.mediaMeta,"tags",[])),e.serviceData&&!Object(Ze.a)(e.serviceData)&&(this.serviceData=Object(x.a)(e,"serviceData",null)),this.updatePhase(this.thumbnail.src?_.O.DONE:_.O.PROCESSING),this},n.changeContentMode=function(e){this.contentMode=e,this._resolveSizeByContentMode()},n.changeSize=function(e){var t=e.width,n=e.height,i=e.isReset,r=this.width/this.height,o=t,a=n,s=!0;o?a||(a=t/r):o=n*r,i&&(o=this.originalWidth,a=this.originalHeight,s=!1),this._resolveWidthAndHeight({width:o,height:a,strictMinimumScale:s}),this._resolveContentModeBySize()},n.changeLink=function(e,t){return void 0===e&&(e={}),!0===this.caption.isFocused?this.caption.changeLink(this.checkProtocol(e),t):(this.link=e.value?this.checkProtocol(e).value:null,[this.getStartPoint()])},n.updateProperty=function(e,t){var n=e.contentMode,i=e.resizing,r=e.link,o=Me()(e,Od);if(n&&this.changeContentMode(n),i&&this.changeSize(i),Object(wl.a)(this,o),r)return this.changeLink(r,t)},n.updateMediaMeta=function(e){this.mediaMeta=Object(lp.a)({ctype:"mediaMeta"},e)},n.updateThumbnail=function(e,t,n){this.thumbnail.src=e,this.thumbnail.width=t,this.thumbnail.height=n,this.thumbnail.src&&this.updatePhase(_.O.DONE)},n.updateServiceData=function(e){e&&!Object(Ze.a)(e)&&(this.serviceData=e)},n.normalizeData=function(e){null!==this.mediaMeta&&void 0!==this.mediaMeta||this.updateMediaMeta({title:"",description:"",tags:[]});var t=this.mediaMeta.title;Object(Ze.a)(t)&&(this.mediaMeta=Re()({},this.mediaMeta,{title:e.substring(0,this.maxVideoTitleLength)}))},n.getMaxVideoTitleLength=function(){return this.maxVideoTitleLength},n.getMediaMeta=function(){if(this.mediaMeta){var e=this.mediaMeta,t=e.title,n=e.description,i=e.tags;return{title:t,description:n,tags:D.f.toJS(i)}}return{title:"",description:"",tags:[]}},n.collectStyle=function(e){var t="justify"===this.align||null===this.align?"left":this.align,n={layout:this.layout,align:t,contentMode:this.contentMode,size:{width:this.width,height:this.height}};if(e&&!0===this.caption.isFocused){var i=this.caption.collectStyle(e),r=Object(pp.a)(i,function(e){return""===e||null===e});n.caption=r}return n},n.getSelectedAlign=function(){return{align:this.align}},n._getDefaultContentMode=function(e){if(e){var t=this.getLayoutThemeStyle(this.themeStyle)||{};return Object(x.a)(t,"component.contentMode",bd.FIT)}return bd.NORMAL},n._validateContentMode=function(e){return e&&Object(Ft.a)(bd,e)},n._resolveContentModeBySize=function(){var e=this.isLonggerThanDocumentWidth(this.width)||this.isWidthEqualToDocumentWidth(this.width),t=this._config.contentMode,n=Object(Id.a)(t)?t({width:this.width,height:this.height,largerThanDocumentWidth:e}):t;this._validateContentMode(n)?this.contentMode=n:this.contentMode=this._getDefaultContentMode(e)},n._resolveSizeByContentMode=function(){var e=this.documentWidth/this.width,t=bd.NORMAL,n=bd.FIT,i=bd.EXTEND,r=bd.PAGEFULL;if(this.contentMode===t)if(this.width<this.documentWidth)this._updateSize(this.width,this.height);else if(this.width>this.documentWidth||this.originalWidth>=this.documentWidth){var o=.75*this.documentWidth,a=this.height*e*.75;this._updateSize(o,a)}else this.originalWidth<this.documentWidth&&this._resolveWidthAndHeight({width:this.originalWidth,height:this.originalHeight});else if([n,i,r].includes(this.contentMode)){var s=Math.floor(this.height*e);this._updateSize(this.documentWidth,s)}},n._resolveWidthAndHeight=function(e){var t=e.width,n=void 0===t?this.width:t,i=e.height,r=void 0===i?this.height:i,o=e.strictMinimumScale,a=void 0!==o&&o,s=this.width/this.height,c=n,l=r;if(this._strictMinimumScale=a,this.strictMinimumScale&&l<this.videoMinimumHeight&&(c=(l=this.videoMinimumHeight)*s),this.strictMinimumScale&&c<this.videoMinimumWidth)l=(c=this.videoMinimumWidth)/s;else if(c>this.documentWidth){var u=this.documentWidth/n;c=this.documentWidth,l=Math.floor(r*u)}this._updateSize(c,l)},n._updateSize=function(e,t){this.width=Math.floor(e),this.height=Math.floor(t)},n.isWidthEqualToDocumentWidth=function(e,t){return void 0===t&&(t=""),this._isNumber(e)?e===this.documentWidth:!!this._isNumber(t)&&t*this.width/this.height===this.documentWidth},n.isLonggerThanDocumentWidth=function(e,t){return void 0===t&&(t=""),this._isNumber(e)?e>this.documentWidth:!!this._isNumber(t)&&t*this.width/this.height>this.documentWidth},n.isSmallerThanMinimumHeight=function(e,t){return void 0===e&&(e=""),this._isNumber(t)?t<this.videoMinimumHeight:!!this._isNumber(e)&&e*this.height/this.width<this.videoMinimumHeight},n.isSmallerThanMinimumWidth=function(e,t){return void 0===t&&(t=""),this._isNumber(e)?e<this.videoMinimumWidth:!!this._isNumber(t)&&t*this.width/this.height<this.videoMinimumWidth},n._isNumber=function(e){return"number"==typeof e},n.isLibraryComponent=function(){return!0===this.internalResource&&!!this.thumbnail.src},n.getLibraryItemData=function(){var e=this.toValidJSON(),t=Object(x.a)(this,"thumbnail.src");return e.caption=null,{id:this.id,key:this.vid+"&"+t,thumbnail:t,data:e}},n.getRepresentativeImageURL=function(){return Object(x.a)(this,"thumbnail.src")},n.getRepresentativeInnerData=function(){return this.toValidJSON()},n.updateViewMode=function(e){this.viewMode=e},n.completeImageLoad=function(){this.imageLoaded=!0},n.updateConfig=function(){e.prototype.updateConfig.call(this),this.representativeEnabled=!1!==this._configAgent.get("productConfig.representativeEnabled")},n.isRepresentativeImage=function(){return e.prototype.isRepresentativeImage.call(this)&&!this.isSmallerThanMinimumSize(this.width,this.height)&&this.phase===_.O.DONE},n.isSmallerThanMinimumSize=function(e,t){return this.isSmallerThanMinimumWidth(e,t)||this.isSmallerThanMinimumHeight(e,t)},n.isFeatureMetaEdit=function(){return!1!==this._configAgent.get("modules.videoUploader.config.featureMetaEdit")},n._createCaptionTextUnitStore=function(e,t){var n={state:e,config:Object(l.a)({},t,{attributes:{cursor:"trapped",selection:"trapped",insertion:"append",drop:"only-text",paste:"only-text",lineBreak:{enter:"move-to-next-text",shiftEnter:"line-break-in-paragraph"},erasure:"trapped-text"},maxLength:1/0,filterTextStyle:{fontFamily:xl.b.NOT_ALLOWED,fontSizeCode:xl.b.NOT_ALLOWED,fontColor:xl.b.NOT_ALLOWED,backgroundColor:xl.b.NOT_ALLOWED,italic:xl.b.NOT_ALLOWED,underline:xl.b.NOT_ALLOWED,strikeThrough:xl.b.NOT_ALLOWED,subscript:xl.b.NOT_ALLOWED,superscript:xl.b.NOT_ALLOWED,dropCap:xl.b.NOT_ALLOWED,list:xl.b.NOT_ALLOWED}})},i=Object(x.a)(t,"textStyle",{}),r=n.config.filterTextStyle;return n.config.filterTextStyle=Object(Ir.a)(r,i),new Dl.a(n)},n.toPlainJSON=function(e,t){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),this._isOnCaption(e,t)?{ctype:pu.a.TEXT,value:this.caption.toPlainJSON(e,t)}:{id:this.id,ctype:this.ctype,phase:this.phase,vid:this.vid,layout:this.layout,contentMode:this.contentMode,fileSize:this.fileSize,playTime:this.playTime,template:this.template,internalResource:this.internalResource,vendor:this.vendor,originalWidth:this.originalWidth,originalHeight:this.originalHeight,width:this.width,height:this.height,format:this.format,source:this.source,represent:this.represent,caption:this.caption.toPlainJSON(),align:this.align,thumbnail:D.f.toJS(this.thumbnail),mediaMeta:D.f.toJS(this.mediaMeta),serviceData:D.f.toJS(this.serviceData),videoInfraServiceId:this.videoInfraServiceId,viewMode:this.viewMode}},B()(t,[{key:"translationEnabled",get:function(){return"none"!==this.caption.selection}},{key:"strictMinimumScale",get:function(){return!0===this._configAgent.get("editorInfo.strictMinimumScale")||this._strictMinimumScale}},{key:"verticalThumbnail",get:function(){return this.originalWidth<this.originalHeight}}]),t}(Object(_.X)(Td)),zp=k()(Fp.prototype,"vid",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Vp=k()(Fp.prototype,"layout",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),Gp=k()(Fp.prototype,"contentMode",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bd.FIT}}),Hp=k()(Fp.prototype,"fileSize",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qp=k()(Fp.prototype,"playTime",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Jp=k()(Fp.prototype,"template",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Kp=k()(Fp.prototype,"internalResource",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xp=k()(Fp.prototype,"vendor",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Yp=k()(Fp.prototype,"originalWidth",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qp=k()(Fp.prototype,"originalHeight",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Zp=k()(Fp.prototype,"width",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$p=k()(Fp.prototype,"height",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ed=k()(Fp.prototype,"format",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"normal"}}),td=k()(Fp.prototype,"source",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),nd=k()(Fp.prototype,"represent",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),id=k()(Fp.prototype,"caption",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rd=k()(Fp.prototype,"align",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),od=k()(Fp.prototype,"thumbnail",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{ctype:"thumbnail",alt:"",src:""}}}),ad=k()(Fp.prototype,"mediaMeta",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sd=k()(Fp.prototype,"serviceData",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cd=k()(Fp.prototype,"videoInfraServiceId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ld=k()(Fp.prototype,"viewMode",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.U.VIEW_MODE_PC}}),ud=k()(Fp.prototype,"imageLoaded",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pd=k()(Fp.prototype,"representativeEnabled",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),dd=k()(Fp.prototype,"phase",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.O.EMPTY}}),Fp);Ld.ctype="video",Ld.schema={id:kl.a.string.isRequired,ctype:kl.a.string.isRequired,layout:kl.a.string.isRequired,align:kl.a.string,contentMode:kl.a.string.isRequired,fileSize:kl.a.number,playTime:kl.a.number,internalResource:kl.a.bool.isRequired,vendor:kl.a.string,thumbnail:kl.a.shape(cu.i),originalWidth:kl.a.number,originalHeight:kl.a.number,width:kl.a.number,height:kl.a.number,caption:kl.a.captionTextUnit,format:kl.a.string.isRequired,source:kl.a.string,represent:kl.a.bool.isRequired,vid:kl.a.string.isRequired,mediaMeta:kl.a.shape(cu.c),serviceData:kl.a.object,videoInfraServiceId:kl.a.string};var Ed=Ld,Pd=function(e,t){var n=e.store,i=e.onLoad,r=e.onError,o=e.verticalThumbnailRatio,a=n.thumbnail,s=n.width,c=n.height,l=n.phase,u=n.selection,p=a&&a.src?a.src.replace(/['"]/g,"\\'"):"";return D.b.createElement("div",{className:"se-video-thumbnail",style:{paddingTop:o+"%",backgroundImage:'url("'+p+'")'}},D.b.createElement(Sd.b,{src:l===_.O.DONE?a.src:null,type:"none"!==u||t.readOnly?Sd.a.normal:Sd.a.lazyLoad,alt:a.alt,className:"se-video-thumbnail-resource",originalWidth:s,originalHeight:c,onLoad:i,onError:r}))};Pd.contextType=Cd.a,Pd.propTypes={store:D.a.instanceOf(Ed),onLoad:D.a.func,onError:D.a.func,verticalThumbnailRatio:D.a.number};var wd,kd=Object(N.b)(Pd),xd=(wd=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={activatedVideoInfo:!1,isLongTitle:!1,isLongDesc:!1,prevTags:[],isLongTags:!1},n.refMetaTitleText=D.b.createRef(),n.refMetaDeskText=D.b.createRef(),n.refMetaTagText=D.b.createRef(),n.titleTextWidth=0,n.metaInfoWrapperWidth=0,n.prevMetaInfo={},n.tagWrapperHeight=0,n}S()(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.store.mediaMeta,i=t.prevTags,r=JSON.stringify(n&&n.tags?n.tags:[]);return r!==JSON.stringify(i||[])?Re()({},t,{prevTags:JSON.parse(r)}):t};var n=t.prototype;return n.componentDidMount=function(){this._updateTitleState(),this._updateMetaInfo(),this._updateDescState(),this._updateTagState()},n.componentDidUpdate=function(e){var t=this.props,n=t.mediaTitle,i=t.viewMode,r=t.contentMode,o=t.store,a=Object(x.a)(o.mediaMeta,"description"),s=Object(x.a)(o.mediaMeta,"tags"),c=this._isTitleOnly(),l=e.mediaTitle!==n,u=e.viewMode!==i,p=e.contentMode!==r,d=this.prevMetaInfo.description!==a,h=this.prevMetaInfo.tags!==s,g=u||p||(d||h);!l||!c&&c||this._updateTitleState(),!l&&g&&(this._updateMetaInfoWrapperWidthState(),this._updateMetaInfo()),(l||d||h)&&(this._updateDescState(),this._updateMetaInfo()),(l||d||h)&&this._updateTagState()},n.render=function(){this.state.prevTags;var e=this._renderVideoPlayInfo(),t=this._renderVideoMetaInfo();return D.b.createElement(D.b.Fragment,null,e,t)},n._updateMetaInfo=function(){this.prevMetaInfo=this.props.store.mediaMeta||{}},n._updateTitleState=function(){if(!this.props.mediaTitle)return null;this.titleTextWidth=this.refMetaTitleText.current.clientWidth,this.metaInfoWrapperWidth=this.refMetaTitleText.current.parentNode.clientWidth,this.titleTextWidth>this.metaInfoWrapperWidth?this.setState({activatedVideoInfo:!1,isLongTitle:!0}):this.setState({activatedVideoInfo:!1,isLongTitle:!1})},n._updateDescState=function(){var e=this.refMetaDeskText.current;e&&(e.scrollWidth>e.clientWidth?this.setState({activatedVideoInfo:!1,isLongDesc:!0}):this.setState({activatedVideoInfo:!1,isLongDesc:!1}))},n._isTagsExceededWidth=function(){var e=this.props.store.mediaMeta,t=Object(x.a)(e,"tags",[]),n=Object(x.a)(this.refMetaTagText,"current",{}),i=Object(x.a)(n,"children",[]);if(t.length>0&&i.length>0)for(var r=i[0].getBoundingClientRect().top,o=0;o<i.length;o++){var a=i[o],s=a.getBoundingClientRect(),c=a.getClientRects();if(s.top!==r||c.length>1&&c[0].top!==c[c.length-1].top)return!0}return!1},n._updateTagState=function(){this._isTagsExceededWidth()?this.setState(function(e){return Re()({},e,{activatedVideoInfo:!1,isLongTags:!0})}):this.setState(function(e){return Re()({},e,{activatedVideoInfo:!1,isLongTags:!1})})},n._updateMetaInfoWrapperWidthState=function(){if(!this.props.mediaTitle)return null;this.metaInfoWrapperWidth=this.refMetaTitleText.current.parentNode.clientWidth,this.titleTextWidth>this.metaInfoWrapperWidth?this.setState({isLongTitle:!0}):this.setState({isLongTitle:!1})},n._getStatusMessage=function(){var e=this.props,t=e.store,n=e.i18n,i=t.phase;return i===_.O.PROCESSING?n("videoComponent:video_uploading"):i===_.O.ERROR?n("videoComponent:video_upload_failed"):null},n._renderVideoPlayInfo=function(){var e=this.props,t=e.store,n=e.verticalThumbnailRatio,i=t.playTime,r=t.phase,o=this._getStatusMessage(),a=r===_.O.DONE;return D.b.createElement("div",{className:"se-video-play-info",style:{paddingTop:n+"%"}},a&&i&&D.b.createElement("span",{className:"se-video-time"},Mt.a.getHMSFormat(i)),!a&&D.b.createElement("span",{className:"se-video-status"},o))},n._renderVideoMetaInfo=function(){var e=this._renderVideoTitle(),t=this._renderVideoDescription(),n=this._renderVideoTags();if(e||t||n){var i=this._resolveVideoInfoClassName(),r=this._renderToggleButton();return D.b.createElement("div",{className:i},r,t,e,n)}},n._renderVideoDescription=function(){var e=this.props.store.mediaMeta,t=Object(x.a)(e,"description",""),n=this._isOnlyWhitespace(t),i=this._isDescOnly(),r=R()({"se-video-description":!0,"se-video-description-only":i,"se-video-description-long":i&&this.state.isLongDesc});if(t&&!n)return D.b.createElement("p",{ref:this.refMetaDeskText,className:r},t)},n._renderVideoTitle=function(){var e=this.props.store.mediaMeta,t=Object(x.a)(e,"title","");if(!Object(Ze.a)(t)){var n=Object(x.a)(e,"description",""),i=this._isOnlyWhitespace(n),r=this.state.isLongTitle,o=this._isTitleOnly(),a=R()({"se-video-title":!0,"se-video-title-only":o,"se-video-title-long":r&&i});return D.b.createElement("div",{className:a},D.b.createElement("span",{className:"se-video-title-text-dummy",ref:this.refMetaTitleText},t),D.b.createElement("strong",{className:"se-video-title-text"},t))}},n._renderVideoTags=function(){var e=this.props.store.mediaMeta,t=Object(x.a)(e,"tags",[]),n=0===t.length,i=this._isTagOnly(),r=R()({"se-video-tag-wrap":!0,"se-video-tag-only":i,"se-video-tag-long":i&&this.state.isLongTags});if(!n)return D.b.createElement("div",{ref:this.refMetaTagText,className:r},this._renderVideoTagItem(t))},n._renderVideoTagItem=function(e){return e.map(function(e,t){return D.b.createElement("span",{className:"se-video-tag",key:t},e)})},n._isNeedToogleButton=function(){var e=this._isTitleOnly(),t=this._isDescOnly(),n=this._isTagOnly(),i=!this.state.isLongTitle,r=!this.state.isLongDesc,o=!this.state.isLongTags,a=this._emptyServiceData();return!(e&&i||t&&r||n&&o)||this.props.store.onRender&&!a},n._renderToggleButton=function(){var e=this.props.i18n,t=this._getNClickTagName();return this._isNeedToogleButton()?D.b.createElement("button",{type:"button",className:"se-video-info-toggle-button",onClick:this._handleOpenMetaInfo,onDoubleClick:this._handleOpenMetaInfo,"data-log":t},D.b.createElement("span",{className:"se-blind"},e("videoComponent:mediaMeta_more_label"))):null},n._resolveVideoInfoClassName=function(){return R()({"se-video-info-wrap":!0,"se-is-activated":this.state.activatedVideoInfo})},n._isOnlyWhitespace=function(e){return 0===e.trim().length},n._isTitleOnly=function(){var e=this.props.store.mediaMeta,t=Object(x.a)(e,"description",""),n=Object(x.a)(e,"tags",[]);return Object(Ze.a)(t)&&0===n.length},n._isDescOnly=function(){var e=this.props.store.mediaMeta,t=Object(x.a)(e,"tags",[]),n=Object(x.a)(e,"title","");return Object(Ze.a)(n)&&0===t.length},n._isTagOnly=function(){var e=this.props.store.mediaMeta,t=Object(x.a)(e,"description",""),n=Object(x.a)(e,"title","");return Object(Ze.a)(t)&&Object(Ze.a)(n)},n._emptyServiceData=function(){var e=this.props.store.serviceData;return Object(Ze.a)(e)||Object(up.a)(e,function(e){return Object(Ze.a)(e)})},n._getNClickTagName=function(){return this.state.activatedVideoInfo?"vioct.mvmetasimple":"vioct.mvmetadetail"},n._handleOpenMetaInfo=function(e){var t=this._getNClickTagName();e.stopPropagation(),this.setState({activatedVideoInfo:!this.state.activatedVideoInfo}),this.props.refreshVirtualEditable(),Be.a.log(e.nativeEvent,t)},t}(D.b.Component),k()(wd.prototype,"_handleOpenMetaInfo",[te.autobind],Object.getOwnPropertyDescriptor(wd.prototype,"_handleOpenMetaInfo"),wd.prototype),wd);xd.propTypes={store:D.a.instanceOf(Ed),contentMode:D.a.string,viewMode:D.a.string,mediaTitle:D.a.string,i18n:D.a.func,refreshVirtualEditable:D.a.func,verticalThumbnailRatio:D.a.number};var Dd,Ad=Object(N.b)(xd),jd=(Dd=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=_.W.get("configAgent"),t._eventDispatcherService=_.W.get("eventDispatcherService"),t._videoComponentService=_.W.get("videoComponentService"),t._canvasLayoutService=_.W.get("canvasLayoutService"),t._videoUploadLayerService=_.W.get("videoUploadLayerService"),t._libraryPanelLayoutService=_.W.get("libraryPanelLayoutService")||{updateMediaList:function(){}},t._alertLayerService=_.W.get("alertLayerService"),t._i18n=_.W.get("i18n"),t._toastLayerService=_.W.get("toastLayerService"),t._maxLength=t._configAgent.get("plugins.componentSettings.video.config.caption.maxLength"),t}S()(t,e);var n=t.prototype;return n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId;_.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n}),this._libraryPanelLayoutService.updateMediaList()},n.exceedTextMaxLength=function(){this._toastLayerService.warningMessage(this._i18n("videoComponent:exceed_text_max_length",{maxLength:this._maxLength}))},n.subscribeViewModeChange=function(e){this._eventDispatcherService.on(_.z.DOCUMENT_VIEWPORT_RESIZED,e)},n.unsubscribeViewModeChange=function(e){this._eventDispatcherService.off(_.z.DOCUMENT_VIEWPORT_RESIZED,e)},n.refreshViewMode=function(e){var t=this._canvasLayoutService.getViewMode();this._videoComponentService.updateViewMode(e,t)},n.openVideoMetaEditLayer=function(){var e=this._videoComponentService.getVideoId(),t=this._videoComponentService.getMediaMeta(),n=this._videoComponentService.getThumbanil(),i=this._videoComponentService.getServiceData();this._videoUploadLayerService.openVideoMetaEdit(e,t,n,i)},n.completeImageLoad=function(e){this._videoComponentService.completeImageLoad(e)},n.refreshVirtualEditable=function(){this._canvasLayoutService.refreshVirtualEditable()},t}(Object(_.Y)(_.c)),k()(Dd.prototype,"setRepresentativeImage",[te.history,D.d],Object.getOwnPropertyDescriptor(Dd.prototype,"setRepresentativeImage"),Dd.prototype),k()(Dd.prototype,"exceedTextMaxLength",[D.d],Object.getOwnPropertyDescriptor(Dd.prototype,"exceedTextMaxLength"),Dd.prototype),k()(Dd.prototype,"subscribeViewModeChange",[D.d],Object.getOwnPropertyDescriptor(Dd.prototype,"subscribeViewModeChange"),Dd.prototype),k()(Dd.prototype,"unsubscribeViewModeChange",[D.d],Object.getOwnPropertyDescriptor(Dd.prototype,"unsubscribeViewModeChange"),Dd.prototype),k()(Dd.prototype,"openVideoMetaEditLayer",[te.preventOnDocumentProcessing,D.d],Object.getOwnPropertyDescriptor(Dd.prototype,"openVideoMetaEditLayer"),Dd.prototype),k()(Dd.prototype,"completeImageLoad",[D.d],Object.getOwnPropertyDescriptor(Dd.prototype,"completeImageLoad"),Dd.prototype),Dd),Rd=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.render=function(){var e=this.props,t=e.compId,n=e.serviceData,i=e.onRender,r=i&&i({compId:t,serviceData:n});return r?D.b.createElement("div",{className:"se-service-data-wrap",dangerouslySetInnerHTML:{__html:r}}):null},t}(D.b.Component);Rd.propTypes={compId:D.a.string,serviceData:D.a.object,onRender:D.a.func};var Nd,Md=Object(N.b)(Rd),Bd=(Nd=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={isThumbError:!1},n._placeholder=null,n}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.shouldForceRefresh,n=e.useCase;t&&this.props.useCase.refreshAfterLazy(),n.subscribeViewModeChange(this._handleViewModeChange)},n.componentWillUnmount=function(){this.props.useCase.unsubscribeViewModeChange(this._handleViewModeChange)},n.render=function(){var e=this.props,t=e.store,n=e.children,i=e.i18n,r=e.useCase,o=t.id,a=t.ctype,s=t.phase===_.O.DONE,c=t.layout||_d.DEFAULT,l=t.contentMode||bd.FIT,u=this._resolveVideoClassName(),p=this._resolvedWrapperClassName(),d=this._resolveComponentSectionStyle(),h=this._renderRepresentationButton();return D.b.createElement(Ll.a,{id:o,ctype:a,layout:c,contentMode:l,className:p,i18n:i},D.b.createElement(El.a,{compId:o,compStore:t},D.b.createElement(au.a,{blockWrapperProps:t,style:d,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext,onDoubleClick:this._handleDoubleClick},D.b.createElement(md.a,{ctype:a,className:u,draggable:"true"},D.b.createElement(kd,{store:t,onLoad:this._handleImageOnLoad,onError:this._handleImageOnError,verticalThumbnailRatio:this._verticalThumbnailRatio()}),this._renderVideoInfo(),this._renderServiceData(),Object(yd.a)({enabled:"vr360"===this.props.store.format,labelThisIs360VR:this.props.i18n("videoComponent:vr_360_video")}),h,n),s&&D.b.createElement(op.a,{store:t,useCase:r,i18n:i,additionalOption:this._getAdditionalOption(),onLimitTextLength:this._handleLimitTextLength}))))},n._renderRepresentationButton=function(){var e=this.props,t=e.store,n=e.i18n,i={showRepresentative:!!t.representativeEnabled&&t.isRepresentativeImage()};return D.b.createElement(vd.a,{store:t,additionalOption:i,labelThumbnail:n("videoComponent:representative"),status:this.state.isThumbError?null:"complete",onClick:this._handleClickRepresent})},n._verticalThumbnailRatio=function(){var e=this.props.store,t=e.originalHeight,n=e.originalWidth,i=e.verticalThumbnail;if(!i)return null;var r=t/n*100;return i&&r>177.768?177.768:r},n._renderVideoInfo=function(){var e=this.props.store;if(!e.mediaMeta&&e.serviceData&&e.onRender)return D.b.createElement("div",{className:"se-video-info-wrap se-is-activated"});var t=this.props.i18n;return D.b.createElement(Ad,{store:e,verticalThumbnailRatio:this._verticalThumbnailRatio(),contentMode:e.contentMode,mediaTitle:e.mediaMeta&&e.mediaMeta.title||"",viewMode:e.viewMode,i18n:t,refreshVirtualEditable:this._handleRefresh})},n._renderServiceData=function(){var e=this.props.store,t=e.id,n=e.serviceData,i=e.onRender;return i?D.b.createElement(Md,{compId:t,serviceData:n,onRender:i}):null},n._handleRefresh=function(){this.props.useCase.refreshVirtualEditable()},n._getAdditionalOption=function(){return this._placeholder?{placeholder:this._placeholder}:(this._placeholder=this.props.i18n("videoComponent:caption_placeholder"),{placeholder:this._placeholder})},n._handleViewModeChange=function(){var e=this.props,t=e.useCase,n=e.store;t.refreshViewMode(n)},n._resolveComponentSectionStyle=function(){var e=this.props.store,t=e.contentMode,n=e.width,i=e.viewMode,r=n,o=this._isBiggerThanDocument(n),a={};return t!==bd.NORMAL||o||i!==_.U.VIEW_MODE_PC||(a.maxWidth=r+"px"),a},n._resolveVideoClassName=function(){var e=this.props.store,t=e.width,n=e.height,i=n<101||t<101,r=n>280&&t>400&&520<=t,o=n>280&&520<t;return R()({"se-module-video-thumb-error":!0===this.state.isThumbError,"se-module-video-small":i,"se-module-video-middle":r,"se-module-video-large":o})},n._resolvedWrapperClassName=function(){var e=this.props.store.verticalThumbnail;return R()({"se-video-vertical":e})},n._isBiggerThanDocument=function(e){return e>=this.props.store.documentWidth},n._handleImageOnLoad=function(){var e=this.props,t=e.store,n=e.useCase;n.completeImageLoad(t.id),n.repaintCursor()},n._handleImageOnError=function(){var e=this.props,t=e.store,n=e.useCase;this.setState({isThumbError:!0}),n.completeImageLoad(t.id),n.repaintCursor()},n._handleClickRepresent=function(e){var t=this.props.store;this.props.useCase.setRepresentativeImage({compId:t.id,unitId:t.id}),Be.a.log(e.nativeEvent,"vioct.rep")},n._handleLimitTextLength=function(){this.props.useCase.exceedTextMaxLength()},n._handleDoubleClick=function(){this.props.useCase.openVideoMetaEditLayer()},n._handleMoveToPrev=function(){this.props.useCase.moveToPrev(this.props.store.id)},n._handleMoveToNext=function(){this.props.useCase.moveToNext(this.props.store.id)},t}(D.b.Component),k()(Nd.prototype,"_renderRepresentationButton",[te.muteIfReadOnly],Object.getOwnPropertyDescriptor(Nd.prototype,"_renderRepresentationButton"),Nd.prototype),k()(Nd.prototype,"_handleRefresh",[te.autobind],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleRefresh"),Nd.prototype),k()(Nd.prototype,"_handleViewModeChange",[te.autobind],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleViewModeChange"),Nd.prototype),k()(Nd.prototype,"_handleImageOnLoad",[te.autobind],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleImageOnLoad"),Nd.prototype),k()(Nd.prototype,"_handleImageOnError",[te.autobind],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleImageOnError"),Nd.prototype),k()(Nd.prototype,"_handleClickRepresent",[te.autobind],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleClickRepresent"),Nd.prototype),k()(Nd.prototype,"_handleLimitTextLength",[te.autobind],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleLimitTextLength"),Nd.prototype),k()(Nd.prototype,"_handleDoubleClick",[te.autobind,te.muteIfReadOnly],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleDoubleClick"),Nd.prototype),k()(Nd.prototype,"_handleMoveToPrev",[te.autobind],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleMoveToPrev"),Nd.prototype),k()(Nd.prototype,"_handleMoveToNext",[te.autobind],Object.getOwnPropertyDescriptor(Nd.prototype,"_handleMoveToNext"),Nd.prototype),Nd);Bd.defaultProps={i18n:function(e){return e}},Bd.propTypes={shouldForceRefresh:D.a.bool,i18n:D.a.func,store:D.a.instanceOf(Ed).isRequired,useCase:D.a.instanceOf(jd).isRequired,children:D.a.oneOfType([D.a.element,D.a.array])};var Wd,Ud,Fd,zd,Vd,Gd,Hd,qd,Jd,Kd,Xd,Yd,Qd,Zd,$d=Object(N.b)(Bd),eh=function(e){function t(){var t;return(t=e.call(this)||this)._selectionInfoStore=_.W.get("selectionInfoStore"),t._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.createVideoComponent=function(e){var t=Re()({},e,{ctype:"video",phase:_.O.PROCESSING});return this._componentFactory.createComponentWithCompData(t)},n.getVideoId=function(){var e=this._selectionInfoStore.toValidJSON().start;return this.getComponentStore(e.compId).vid||""},n.getMediaMeta=function(){var e=this._selectionInfoStore.toValidJSON().start,t=this.getComponentStore(e.compId).mediaMeta;return t?{title:t.title,description:t.description,tags:D.f.toJS(t.tags)}:{title:"",description:"",tags:[]}},n.getThumbanil=function(){var e=this._selectionInfoStore.toValidJSON().start;return{src:(this.getComponentStore(e.compId).thumbnail||{}).src||""}},n.updateThumbanil=function(e){var t=this._selectionInfoStore.toValidJSON().start,n=this.getComponentStore(t.compId);e&&e.src&&(n.thumbnail.src=e.src||n.thumbnail.src,n.thumbnail.width=e.width||n.thumbnail.width,n.thumbnail.height=e.height||n.thumbnail.height)},n.updateMediaMeta=function(e){var t=this._selectionInfoStore.toValidJSON().start;this.getComponentStore(t.compId).updateMediaMeta(e)},n.getServiceData=function(){var e=this._selectionInfoStore.toValidJSON().start,t=this.getComponentStore(e.compId).serviceData||{};return D.f.toJS(t)},n.updateServiceData=function(e){var t=this._selectionInfoStore.toValidJSON().start;this.getComponentStore(t.compId).updateServiceData(e)},n.completeImageLoad=function(e){this.getComponentStore(e).completeImageLoad()},n.checkLimitedSize=function(e){var t=e.value,n=t.width,i=t.height,r=!1,o=!1,a=!1;return(t.isApplyAllChecked?this._getAllVideoComponents():this._getSelectedVideoCompList()).forEach(function(e){!r&&e.isLonggerThanDocumentWidth(n,i)?r=!0:!a&&e.isSmallerThanMinimumWidth(n,i)&&(a=!0),!o&&e.isSmallerThanMinimumHeight(n,i)&&(o=!0)}),{hasBiggerThanContentWidth:r,hasSmallerThanMinHeight:o,hasSmallerThanMinWidth:a}},n._getAllVideoComponents=function(){return this._componentListStore.getComponentsByCtype("video")},n._getSelectedVideoCompList=function(){var e=this._selectionInfoStore.toValidJSON().compIdMap,t=Object.keys(e);return this._componentListStore.compList.filter(function(e){return t.includes(e.id)}).filter(function(e){return"video"===e.ctype})},n.updateViewMode=function(e,t){e.updateViewMode(t)},n.getCompsByProcessing=function(){return this._componentListStore.getComponentsByCtype("video").filter(function(e){var t=e.phase;return t===_.O.PROCESSING||t===_.O.ERROR})||[]},n.getVideoIdsByProcessing=function(){return this._componentListStore.getComponentsByCtype("video").filter(function(e){var t=e.phase;return t===_.O.PROCESSING||t===_.O.ERROR}).reduce(function(e,t){return e[t.vid]=t,e},{})},t}(_.a),th=n(63),nh=["type","title","label","labelVisible","logId"],ih=(Wd=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"videoMeta:title":i,o=e.label,a=void 0===o?"videoMeta:label":o,s=e.labelVisible,c=void 0===s||s,l=e.logId,u=void 0===l?"mvmeta":l,p=Me()(e,nh);return D.b.createElement(th.a,oo()({type:n,title:r,label:a,logId:u,labelVisible:c},p,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openVideoMetaEditLayer()},t}(D.b.Component),k()(Wd.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Wd.prototype,"_handleClick"),Wd.prototype),Wd),rh=["type","title","label","logId"],oh=(Ud=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"videoMeta:title":i,o=e.label,a=void 0===o?"videoMeta:label":o,s=e.logId,c=void 0===s?"mvmeta":s,l=Me()(e,rh);return D.b.createElement(th.a,oo()({type:n,title:r,label:a,logId:c},l,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openVideoMetaEditLayer()},t}(D.b.Component),k()(Ud.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Ud.prototype,"_handleClick"),Ud.prototype),Ud),ah=(Fd=function(e){function t(){var t;return(t=e.call(this)||this)._videoUploadLayerService=_.W.get("videoUploadLayerService"),t._videoComponentService=_.W.get("videoComponentService"),t}return S()(t,e),t.prototype.openVideoMetaEditLayer=function(){var e=this._videoComponentService.getVideoId(),t=this._videoComponentService.getMediaMeta(),n=this._videoComponentService.getThumbanil(),i=this._videoComponentService.getServiceData();this._videoUploadLayerService.openVideoMetaEdit(e,t,n,i)},t}(_.m),k()(Fd.prototype,"openVideoMetaEditLayer",[te.preventOnDocumentProcessing,D.d],Object.getOwnPropertyDescriptor(Fd.prototype,"openVideoMetaEditLayer"),Fd.prototype),Fd),sh={"video-meta-right-label":{view:ih,useCase:ah,styleName:"video-meta"},"video-meta":{view:oh,useCase:ah,styleName:"video-meta"}},ch={propertyToolbar:{"video-resizing":Object(pt.a)("video-resizing"),align:Object(pt.a)("align-group"),"caption-align":Object(pt.a)("caption-align-group"),"content-mode-without-pagefull":Object(pt.a)("content-mode-group-without-pagefull"),"video-meta-right-label":sh["video-meta-right-label"],"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"cycle-align":Object(pt.a)("cycle-align"),"caption-bold":Object(pt.a)("caption-bold"),"special-letter":Object(pt.a)("special-letter"),"caption-link":Object(pt.a)("caption-link"),"caption-align":Object(pt.a)("caption-align"),"content-mode-without-pagefull":Object(pt.a)("content-mode-group-without-pagefull"),delete:Object(pt.a)("delete"),"video-meta":sh["video-meta"],"separator-bar":Object(pt.a)("separator-bar"),translation:Object(pt.a)("translation"),"content-mode-fit-and-extend":Object(pt.a)("content-mode-group-fit-and-extend"),"additional-info":Object(pt.a)("additional-info")}},lh={propertyToolbar:function(e){var t=e.selectedComponents,n=t[0],i=n.verticalThumbnail,r=1===t.length,o=n.isFeatureMetaEdit(),a=[];if(r){a=n.isCaptionFocused()?["caption-align"]:["align"];var s=o?["video-meta-right-label"]:[];a=i?a.concat(["separator-bar"].concat(s)):a.concat(["separator-bar","video-resizing","separator-bar"].concat(s,["separator-bar","content-mode-without-pagefull"]))}else{a=["align"],Object(up.a)(t,function(e){return!0===e.verticalThumbnail})||(a=a.concat(["separator-bar","video-resizing","separator-bar","content-mode-without-pagefull"]))}return a},contextToolbar:Object(pt.b)(function(e){var t=[],n=e.selectedComponents[0],i=n.contentMode,r=n.verticalThumbnail,o=n.isCaptionFocused(),a=n.isFeatureMetaEdit(),s={captionFocused:o,verticalThumbnail:r};return o?t=["caption-align","separator-bar","caption-bold","special-letter","caption-link","separator-bar","translation"]:(t=a?["video-meta","separator-bar"]:[],r||(t=t.concat(["content-mode-without-pagefull","separator-bar"])),t=t.concat(["delete"]),i===bd.NORMAL&&t.unshift("cycle-align","separator-bar")),{buttons:t,payload:s}})},uh=function(e){function t(){return e.call(this,{buttonSetMap:ch,buttonResolver:lh})||this}return S()(t,e),t}(_.l),ph=_.q.extend({name:"VideoComponent",view:$d,service:eh,store:Ed,toolbar:uh,useCase:jd}),dh=n(722),hh={},gh=function(e,t){var n=null,i=function(i){function r(t){var r;return(r=i.call(this,t)||this).state={LazyComponent:n},r._flows=new dh.a,n?P()(r):(r._flows.fork("loading").next(e).next(function(e){var t=e.default;n=t,r.setState({LazyComponent:n})}),r)}S()(r,i);var o=r.prototype;return o.componentWillUnmount=function(){this._flows.abort()},o.render=function(){var e=this.state.LazyComponent,n=this.props.store.ctype,i=!0;return e?(hh[n]&&(i=!1),hh[n]=!0,D.b.createElement(e,oo()({shouldForceRefresh:i},this.props,t))):null},r}(D.b.Component);return Object(N.b)(i)},fh=n(464),mh=function(e){function t(){var t;return(t=e.call(this)||this)._selectionInfoStore=_.W.get("selectionInfoStore"),t}S()(t,e);var n=t.prototype;return n.changeToTextLayout=function(e){this.getComponentStore(e).changeToTextLayout()},n.changeToImageTypeLayout=function(e){this.getComponentStore(e).changeLayoutWithThumbnail()},n.getFirstSelectedCompId=function(){return this._selectionInfoStore.toValidJSON().start.compId},t}(_.a),yh=n(492),vh={propertyToolbar:{align:Object(pt.a)("align-group"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"cycle-align":Object(pt.a)("cycle-align"),delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},_h={propertyToolbar:function(){return["align","separator-bar"]},contextToolbar:Object(pt.b)(function(){return{buttons:["cycle-align","separator-bar","delete"]}})},bh=function(e){function t(){return e.call(this,{buttonSetMap:vh,buttonResolver:_h})||this}return S()(t,e),t}(_.l),Sh=_.q.extend({name:"OglinkComponent",view:gh(function(){return n.e(61).then(n.bind(null,1334))}),useCase:fh.a,service:mh,store:yh.a,toolbar:bh}),Ch={LEFT:"left",CENTER:"center",RIGHT:"right"},Ih={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Oh={LEFT_TO_RIGHT:"ltr",RIGHT_TO_LEFT:"rtl"},Th={RATIO_1_1:"1:1",RATIO_3_4:"3:4"},Lh=["layout"],Eh=(zd=D.g.shallow,Vd=D.g.shallow,Gd=function(e){S()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},L()(n,"layout",Hd,P()(n)),L()(n,"align",qd,P()(n)),L()(n,"horizontalDirection",Jd,P()(n)),L()(n,"horizontalAspectRatio",Kd,P()(n)),L()(n,"backgroundColor",Xd,P()(n)),L()(n,"images",Yd,P()(n)),L()(n,"mediaMeta",Qd,P()(n)),L()(n,"currentPageIndex",Zd,P()(n)),n.serviceData=null;var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;return n.attributes=Object(Ir.a)(n.attributes,s.attributes),n.layout=Object(x.a)(o,"layout",n.layout),n.align=Object(x.a)(o,"align",n.align),n.images=Object(Pn.a)(o.images,function(e){return n._componentFactory.createComponentWithCompData(Re()({ctype:"image"},e),{attributes:{cursor:"selectable-unit",selection:"selectable-unit",erasure:"query",drop:"object"}})}),n.backgroundColor=Object(x.a)(o,"backgroundColor",n.backgroundColor),n.serviceData=Object(x.a)(o,"serviceData",n.serviceData),o.mediaMeta&&(n.mediaMeta=Object(lp.a)({ctype:"mediaMeta"},o.mediaMeta),n.mediaMeta.tags=Object(x.a)(n.mediaMeta,"tags",[])),n.layout===Ih.HORIZONTAL?(n.horizontalDirection=Object(x.a)(o,"horizontalDirection",Oh.RIGHT_TO_LEFT),n.horizontalAspectRatio=Object(x.a)(o,"horizontalAspectRatio",Th.RATIO_3_4)):n.currentPageIndex=-1,n}return t.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,layout:this.layout,align:this.align,horizontalDirection:this.horizontalDirection,horizontalAspectRatio:this.horizontalAspectRatio,mediaMeta:D.f.toJS(this.mediaMeta),backgroundColor:this.backgroundColor,images:D.f.toJS(this.images),serviceData:D.f.toJS(this.serviceData)}},t.updateServiceData=function(e){this.serviceData=e},t.updateCurrentPage=function(e){this.currentPageIndex=e},t.updateLayout=function(e){this.layout=e},t.updateProperty=function(e){var t=e.layout,n=Me()(e,Lh);t&&this.updateLayout(t),Object(wl.a)(this,n)},t.updateStyle=function(e){var t=e.align;this.align=t},t.collectStyle=function(){return{layout:this.layout,align:this.align||Ch.LEFT}},B()(n,[{key:"pageMaxCount",get:function(){return this.images.length-1}}]),n}(_.g),Hd=k()(Gd.prototype,"layout",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ih.HORIZONTAL}}),qd=k()(Gd.prototype,"align",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jd=k()(Gd.prototype,"horizontalDirection",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kd=k()(Gd.prototype,"horizontalAspectRatio",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xd=k()(Gd.prototype,"backgroundColor",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"#ffffff"}}),Yd=k()(Gd.prototype,"images",[zd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qd=k()(Gd.prototype,"mediaMeta",[Vd],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zd=k()(Gd.prototype,"currentPageIndex",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k()(Gd.prototype,"pageMaxCount",[D.e],Object.getOwnPropertyDescriptor(Gd.prototype,"pageMaxCount"),Gd.prototype),Gd);Eh.ctype="webtoon",Eh.schema={id:kl.a.string.isRequired,layout:kl.a.string.isRequired,align:kl.a.string,ctype:kl.a.string.isRequired,horizontalDirection:kl.a.string,horizontalAspectRatio:kl.a.string,mediaMeta:kl.a.shape(cu.c),backgroundColor:kl.a.string,images:kl.a.arrayOf(kl.a.shape(lu.a.schema)).isRequired,serviceData:kl.a.object};var Ph,wh=Eh,kh=function(e){function t(){var t;return(t=e.call(this)||this)._webtoonLayerService=_.W.get("webtoonLayerService"),t._webtoonComponentService=_.W.get("webtoonComponentService"),t._eventDispatcherService=_.W.get("eventDispatcherService"),t}S()(t,e);var n=t.prototype;return n.updateCurrentPage=function(e,t){this._webtoonComponentService.updateCurrentPage(e,t)},n.editWebtoon=function(){var e=this._webtoonComponentService.getSelectedWebtoonStore(),t=this._webtoonComponentService.getCurrentPageIndex();this._webtoonLayerService.editWebtoon({images:e.images,layout:e.layout,horizontalDirection:e.horizontalDirection,horizontalAspectRatio:e.horizontalAspectRatio,currentPageIndex:t})},n.addResizeViewModeListener=function(e){this._eventDispatcherService.on(_.z.DOCUMENT_VIEWPORT_RESIZED,e)},n.removeResizeViewModeListener=function(e){this._eventDispatcherService.off(_.z.DOCUMENT_VIEWPORT_RESIZED,e)},t}(_.c),xh=(Ph=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={isLoaded:!1},n}S()(t,e);var n=t.prototype;return n.render=function(){var e=this._renderWebtoonImages();return D.b.createElement("div",{className:"se-webtoon-viewer"},e)},n._renderWebtoonImages=function(){var e=this;return this.props.images.map(function(t,n){var i=t.src,r=t.width,o=t.height,a=t.originalWidth,s=t.originalHeight,c=function(e){var t=e.width,n=e.height,i=e.originalHeight,r=e.originalWidth;return t>=5*n||r>=5*i}(t),l=R()("se-webtoon-image",{"se-webtoon-image-ratio-5-1":c});return D.b.createElement("div",{key:"webtoon-vertical-image-"+n,className:l},D.b.createElement(Sd.b,{src:i,type:e.state.isLoaded?null:Sd.a.lazyLoad,width:r,height:o,originalHeight:s,originalWidth:a,onLoad:e._handleImageOnLoad,className:"se-image-resource"}))})},n._handleImageOnLoad=function(){this.setState({isLoaded:!0})},t}(D.b.Component),k()(Ph.prototype,"_handleImageOnLoad",[te.autobind],Object.getOwnPropertyDescriptor(Ph.prototype,"_handleImageOnLoad"),Ph.prototype),Ph);xh.defaultProps={i18n:function(e){return e}},xh.propTypes={i18n:D.a.func,images:D.a.oneOfType([D.a.array,D.a.object]).isRequired};var Dh,Ah=Object(N.b)(xh),jh=n(819),Rh=(Dh=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={isLoaded:!1},n}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.controlRef,n=e.horizontalDirection,i=e.horizontalAspectRatio,r=e.pageMaxCount,o=i?i.replace(":","-"):Th.RATIO_3_4,a=R()(["se-webtoon-viewer","se-webtoon-viewer-ratio-"+o]),s=this._renderWebtoonImages(),c=n===Oh.RIGHT_TO_LEFT?r:0;return D.b.createElement("div",{className:a,draggable:"true"},D.b.createElement("div",{className:"se-webtoon-flick-wrap se-webtoon-flick-image-loaded"},D.b.createElement(jh.a,{ref:t,needPanelThreshold:50,disableOnInit:!0,defaultIndex:c},s)))},n._renderWebtoonImages=function(){var e=this,t=this.props,n=t.images;return(t.horizontalDirection===Oh.RIGHT_TO_LEFT?Object(pr.a)(n.slice()):n).map(function(t,n){var i=t.src,r=t.width,o=t.height,a=t.originalWidth,s=t.originalHeight;return D.b.createElement("div",{key:"eg-flick-panel-"+n,className:"se-webtoon-image"},D.b.createElement(Sd.b,{src:i,type:e.state.isLoaded?null:Sd.a.lazyLoad,width:r,height:o,originalHeight:s,originalWidth:a,onLoad:e._handleImageOnLoad,className:"se-image-resource"}))})},n._reviseByDirection=function(e){var t=this.props,n=t.pageMaxCount;return t.horizontalDirection===Oh.RIGHT_TO_LEFT?n-e:e},n._handleChange=function(e){var t=e.index,n=e._canceled;if(void 0!==n&&n)return null;var i=this.props.onFlickEnd;i&&i(this._reviseByDirection(t))},n._handleImageOnLoad=function(){this.setState({isLoaded:!0})},t}(D.b.Component),k()(Dh.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(Dh.prototype,"_handleChange"),Dh.prototype),k()(Dh.prototype,"_handleImageOnLoad",[te.autobind],Object.getOwnPropertyDescriptor(Dh.prototype,"_handleImageOnLoad"),Dh.prototype),Dh);Rh.defaultProps={i18n:function(e){return e}},Rh.propTypes={i18n:D.a.func,pageMaxCount:D.a.number.isRequired,images:D.a.oneOfType([D.a.array,D.a.object]).isRequired,horizontalDirection:D.a.string,horizontalAspectRatio:D.a.string,onFlickEnd:D.a.func,onClickUpload:D.a.func,controlRef:D.a.any};var Nh,Mh=Object(N.b)(Rh),Bh=n(467),Wh=n.n(Bh),Uh=(Nh=function(e){function t(){var t;return(t=e.call(this)||this).state={showPaging:!1},t._debounceActivatePageInfo=Object(Ba.a)(t._activatePageInfo.bind(P()(t)),100),t}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.currentPageIndex,n=e.pageMaxCount,i=e.horizontalDirection,r=e.controlRef,o=R()(["se-webtoon-slider-wrap","se-webtoon-slider-"+i]),a=i===Oh.RIGHT_TO_LEFT;return D.b.createElement("div",{className:o},D.b.createElement(Wh.a,{ref:r,value:t,defaultValue:0,min:0,max:n,reverse:a,tooltip:!1,onChangeStart:this._handleChangeStart,onChange:this._handleChange}),this._renderPagingInfo())},n._renderPagingInfo=function(){var e=this.state.sliderHandlePosition,t=this.props,n=t.currentPageIndex,i=t.pageMaxCount,r=(e||n)+1,o=i+1,a=R()("se-webtoon-slider-value",{"se-webton-slider-value-active":this.state.showPaging});return D.b.createElement("div",{className:a},D.b.createElement("span",{className:"se-webtoon-slider-value-current"},r),D.b.createElement("span",{className:"se-webtoon-slider-value-total"},"/",o))},n._handleChangeStart=function(){this._debounceActivatePageInfo()},n._handleChange=function(e){this._debounceActivatePageInfo(e);var t=this.props.onSlide;t&&t(e)},n._deactivatePageInfo=function(){this.setState({showPaging:!1})},n._activatePageInfo=function(e){this.setState({showPaging:!0,sliderHandlePosition:e}),this._pagingTimer&&clearTimeout(this._pagingTimer),this._pagingTimer=setTimeout(this._deactivatePageInfo,1e3)},t}(D.b.Component),k()(Nh.prototype,"_handleChangeStart",[te.autobind],Object.getOwnPropertyDescriptor(Nh.prototype,"_handleChangeStart"),Nh.prototype),k()(Nh.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(Nh.prototype,"_handleChange"),Nh.prototype),k()(Nh.prototype,"_deactivatePageInfo",[te.autobind],Object.getOwnPropertyDescriptor(Nh.prototype,"_deactivatePageInfo"),Nh.prototype),Nh);Uh.defaultProps={i18n:function(e){return e}},Uh.propTypes={i18n:D.a.func,pageMaxCount:D.a.number.isRequired,currentPageIndex:D.a.number.isRequired,horizontalDirection:D.a.string,onSlide:D.a.func,controlRef:D.a.any};var Fh,zh=Object(N.b)(Uh),Vh=(Fh=function(e){function t(){var t;return(t=e.call(this)||this)._flickingRef=D.b.createRef(),t._sliderRef=D.b.createRef(),t._debounceChangeSlide=Object(Ba.a)(t._handleChangeSlide.bind(P()(t)),100),t._debounceChangePrev=Object(Ba.a)(t._handleChangePrev.bind(P()(t)),300),t._debounceChangeNext=Object(Ba.a)(t._handleChangeNext.bind(P()(t)),300),t._debounceUpdateCurrentPage=Object(Ba.a)(t._updateCurrentPage.bind(P()(t)),300),t._debounceResizeView=Object(Ba.a)(t._resizeView.bind(P()(t)),50),t}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.shouldForceRefresh,n=e.useCase;t&&n.refreshAfterLazy(),n.addResizeViewModeListener(this._debounceResizeView)},n.componentWillUnmount=function(){this.props.useCase.removeResizeViewModeListener(this._debounceResizeView)},n.render=function(){var e=this.props.store,t=e.layout,n=e.images,i=e.pageMaxCount,r=e.horizontalDirection,o=e.horizontalAspectRatio,a=e.currentPageIndex;return D.b.createElement(D.b.Fragment,null,D.b.createElement(Mh,{controlRef:this._flickingRef,pageMaxCount:i,images:n,currentPageIndex:a,horizontalDirection:r,horizontalAspectRatio:o,onFlickEnd:this._handleChangeFlickEnd}),D.b.createElement(zh,{controlRef:this._sliderRef,currentPageIndex:a,pageMaxCount:i,horizontalDirection:r,onSlide:this._debounceChangeSlide}),t===Ih.HORIZONTAL&&this._renderNavigationButtons())},n._renderNextButton=function(e,t,n){if(e===t)return null;var i=n?"prev":"next";return D.b.createElement("button",{type:"button",className:"se-webtoon-navigation-button se-webtoon-navigation-button-"+i,onClick:this._debounceChangeNext},D.b.createElement("span",{className:"se-blind"},"다음"))},n._renderPrevButton=function(e,t,n){if(0===e)return null;var i=n?"next":"prev";return D.b.createElement("button",{type:"button",className:"se-webtoon-navigation-button se-webtoon-navigation-button-"+i,onClick:this._debounceChangePrev},D.b.createElement("span",{className:"se-blind"},"이전"))},n._renderNavigationButtons=function(){var e=this.props.store,t=e.currentPageIndex,n=e.pageMaxCount,i=e.horizontalDirection===Oh.RIGHT_TO_LEFT;return D.b.createElement("div",{className:"se-webtoon-navigation"},this._renderPrevButton(t,n,i),this._renderNextButton(t,n,i))},n._handleChangeFlickEnd=function(e){this._debounceUpdateCurrentPage(e)},n._handleChangeSlide=function(e){this._debounceUpdateCurrentPage(e),this._moveToFlicking(e)},n._handleChangePrev=function(){var e=this.props.store.currentPageIndex-1;e<0||(this._debounceUpdateCurrentPage(e),this._moveToFlicking(e))},n._handleChangeNext=function(){var e=this.props.store,t=e.currentPageIndex+1;t>e.pageMaxCount||(this._moveToFlicking(t),this._debounceUpdateCurrentPage(t))},n._moveToFlicking=function(e){var t=this.props.store,n=t.pageMaxCount,i=t.horizontalDirection===Oh.RIGHT_TO_LEFT?n-e:e;this._flickingRef.current&&this._flickingRef.current.moveTo(i).catch(function(){})},n._updateCurrentPage=function(e){var t=this.props,n=t.useCase,i=t.store;n.updateCurrentPage(i.id,e)},n._resizeView=function(){this._flickingRef&&this._flickingRef.current.resize()},t}(D.b.Component),k()(Fh.prototype,"_handleChangeFlickEnd",[te.autobind],Object.getOwnPropertyDescriptor(Fh.prototype,"_handleChangeFlickEnd"),Fh.prototype),Fh);Vh.defaultProps={i18n:function(e){return e}},Vh.propTypes={shouldForceRefresh:D.a.bool,i18n:D.a.func,useCase:D.a.instanceOf(kh).isRequired,store:D.a.instanceOf(wh).isRequired,children:D.a.oneOfType([D.a.element,D.a.array])};var Gh,Hh=Object(N.b)(Vh),qh=(Gh=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.layout,a="se-l-"+o;return D.b.createElement(Ll.a,{id:i,ctype:r,layout:o,i18n:n},D.b.createElement(El.a,{compId:i,compStore:t},D.b.createElement(au.a,{blockWrapperProps:t,className:a,onDoubleClick:this._handleDoubleClick},D.b.createElement(md.a,{ctype:r},o===Ih.VERTICAL?this._renderVerticalView():this._renderHorizontalView()))))},n._renderVerticalView=function(){var e=this.props,t=e.store,n=e.i18n,i=t.images;return D.b.createElement(Ah,{images:i,i18n:n})},n._renderHorizontalView=function(){var e=this.props,t=e.store,n=e.i18n,i=e.useCase,r=e.shouldForceRefresh;return D.b.createElement(Hh,{store:t,useCase:i,i18n:n,shouldForceRefresh:r})},n._handleDoubleClick=function(e){var t=e.target;t&&t.classList.contains("se-webtoon-navigation-button")||this.props.useCase.editWebtoon()},t}(D.b.Component),k()(Gh.prototype,"_handleDoubleClick",[te.autobind],Object.getOwnPropertyDescriptor(Gh.prototype,"_handleDoubleClick"),Gh.prototype),Gh);qh.defaultProps={i18n:function(e){return e}},qh.propTypes={shouldForceRefresh:D.a.bool,i18n:D.a.func,useCase:D.a.instanceOf(kh).isRequired,store:D.a.instanceOf(wh).isRequired,children:D.a.oneOfType([D.a.element,D.a.array])};var Jh,Kh,Xh,Yh,Qh,Zh,$h,eg,tg,ng,ig=Object(N.b)(qh),rg=function(e){function t(){var t;return(t=e.call(this)||this)._selectionInfoStore=_.W.get("selectionInfoStore"),t._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.createComponent=function(e){return this._componentFactory.createComponentWithCompData(Re()({ctype:"webtoon"},e))},n.getSelectedWebtoonStore=function(){var e=this._selectionInfoStore.start.compId;return this.getComponentStore(e).toPlainJSON()},n.getCurrentPageIndex=function(){var e=this._selectionInfoStore.start.compId;return this.getComponentStore(e).currentPageIndex},n.updateCurrentPage=function(e,t){this.getComponentStore(e).updateCurrentPage(t)},t}(_.a),og=["type","title","label","labelVisible","logId"],ag=["type","title","logId"],sg={"webtoon-edit-right-label":{view:(Jh=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"webtoonEdit:title":i,o=e.label,a=void 0===o?"webtoonEdit:label":o,s=e.labelVisible,c=void 0===s||s,l=e.logId,u=void 0===l?"edit":l,p=Me()(e,og);return D.b.createElement(th.a,oo()({type:n,title:r,label:a,logId:u,labelVisible:c},p,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editWebtoon()},t}(D.b.Component),k()(Jh.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Jh.prototype,"_handleClick"),Jh.prototype),Jh),useCase:kh,styleName:"webtoon-edit"},"webtoon-edit":{view:(Kh=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"webtoonEdit:title":i,o=e.logId,a=void 0===o?"edit":o,s=Me()(e,ag);return D.b.createElement(th.a,oo()({type:n,title:r,logId:a},s,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editWebtoon()},t}(D.b.Component),k()(Kh.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Kh.prototype,"_handleClick"),Kh.prototype),Kh),useCase:kh,styleName:"webtoon-edit"}},cg={propertyToolbar:{align:Object(pt.a)("align-group"),"webtoon-edit":sg["webtoon-edit-right-label"],"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"webtoon-edit":sg["webtoon-edit"],delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar"),"additional-info":Object(pt.a)("additional-info")}},lg={propertyToolbar:function(){return["align","separator-bar","webtoon-edit"]},contextToolbar:Object(pt.b)(function(){return{buttons:["webtoon-edit","separator-bar","delete"]}})},ug=function(e){function t(){return e.call(this,{buttonSetMap:cg,buttonResolver:lg})||this}return S()(t,e),t}(_.l),pg=_.q.extend({name:"WebtoonComponent",view:ig,useCase:kh,service:rg,store:wh,toolbar:ug}),dg=n(451),hg=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t}return S()(t,e),t.prototype.createComponent=function(e){return this._componentFactory.createComponentWithCompData(Re()({ctype:"horizontalLine"},e))},t}(_.a),gg=n(452),fg=n(104),mg=["type","title","label","value","logId","groups"],yg=(Xh=function(e){function t(){var t;t=e.call(this)||this;var n=_.W.get("configAgent");return t._allowLayouts=n.get("productConfig.horizontalLine.layouts"),t}S()(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.type,i=void 0===n?Ae.b.GROUP_TOGGLE:n,r=t.title,o=void 0===r?"horizontalLineLayout:title":r,a=t.label,s=void 0===a?"horizontalLineLayout:label":a,c=t.value,l=void 0===c?"default":c,u=t.logId,p=void 0===u?"horizt":u,d=t.groups,h=void 0===d?[{value:"default",title:"horizontalLineLayout:default_title",label:"horizontalLineLayout:default_label",logId:"horizt0"},{value:"line1",title:"horizontalLineLayout:line1_title",label:"horizontalLineLayout:line1_label",logId:"horizt1"},{value:"line2",title:"horizontalLineLayout:line2_title",label:"horizontalLineLayout:line2_label",logId:"horizt2"},{value:"line3",title:"horizontalLineLayout:line3_title",label:"horizontalLineLayout:line3_label",logId:"horizt3"},{value:"line4",title:"horizontalLineLayout:line4_title",label:"horizontalLineLayout:line4_label",logId:"horizt4"},{value:"line5",title:"horizontalLineLayout:line5_title",label:"horizontalLineLayout:line5_label",logId:"horizt5"},{value:"line6",title:"horizontalLineLayout:line6_title",label:"horizontalLineLayout:line6_label",logId:"horizt6"},{value:"line7",title:"horizontalLineLayout:line7_title",label:"horizontalLineLayout:line7_label",logId:"horizt7"}]:d,g=Me()(t,mg),f=h;return this._allowLayouts&&(f=f.filter(function(t){return e._allowLayouts.includes(t.value)})),D.b.createElement(fg.a,oo()({type:i,title:o,label:s,value:l,logId:p,groups:f},g,{onChange:this._handleClick}))},n._handleClick=function(e){this.props.useCase.changeLayout(e)},t}(D.b.Component),k()(Xh.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Xh.prototype,"_handleClick"),Xh.prototype),Xh),vg=n(299),_g={"horizontal-line-layout":{view:yg,useCase:vg.a,propertyName:"layout",styleName:"horizontal-line"}},bg={propertyToolbar:{align:Object(pt.a)("align-group"),"horizontal-line-layout":_g["horizontal-line-layout"],"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"cycle-align":Object(pt.a)("cycle-align"),"horizontal-line-layout":_g["horizontal-line-layout"],delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},Sg={propertyToolbar:function(e){var t=e.configAgent.get("productConfig.horizontalLine.layouts");return t&&1===t.length?["align"]:["align","separator-bar","horizontal-line-layout"]},contextToolbar:Object(pt.b)(function(e){return{buttons:1===(e.configAgent.get("productConfig.horizontalLine.layouts")||[]).length?["cycle-align","separator-bar","delete"]:["cycle-align","separator-bar","horizontal-line-layout","separator-bar","delete"]}})},Cg=function(e){function t(){return e.call(this,{buttonSetMap:bg,buttonResolver:Sg})||this}return S()(t,e),t}(_.l),Ig=_.q.extend({name:"HorizontalLineComponent",view:gh(function(){return n.e(56).then(n.bind(null,1329))}),useCase:dg.a,service:hg,store:gg.a,toolbar:Cg}),Og=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.c),Tg=(Yh=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},L()(n,"format",Qh,P()(n)),L()(n,"layout",Zh,P()(n)),L()(n,"packCode",$h,P()(n)),L()(n,"seq",eg,P()(n)),L()(n,"align",tg,P()(n)),L()(n,"thumbnail",ng,P()(n));var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;return n.attributes=Object(Ir.a)(n.attributes,s.attributes),n.format=Object(x.a)(o,"format",n.format),n.layout=Object(x.a)(o,"layout",n.layout),n.packCode=Object(x.a)(o,"packCode",n.packCode),n.seq=Object(x.a)(o,"seq",n.seq),n.align=Object(x.a)(o,"align",n.align),n.thumbnail=Object(lp.a)(n.thumbnail,o.thumbnail),n}return S()(t,e),t.prototype.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,format:this.format,packCode:this.packCode,seq:this.seq,align:this.align,thumbnail:D.f.toJS(this.thumbnail)}},t}(_.g),Qh=k()(Yh.prototype,"format",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.Q.NORMAL}}),Zh=k()(Yh.prototype,"layout",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),$h=k()(Yh.prototype,"packCode",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),eg=k()(Yh.prototype,"seq",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tg=k()(Yh.prototype,"align",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ng=k()(Yh.prototype,"thumbnail",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{ctype:"thumbnail",height:0,src:"",width:0}}}),Yh);Tg.ctype="sticker",Tg.schema={id:kl.a.string.isRequired,ctype:kl.a.string.isRequired,layout:kl.a.string.isRequired,align:kl.a.string,packCode:kl.a.string.isRequired,seq:kl.a.number.isRequired,thumbnail:kl.a.shape(cu.i),format:kl.a.string};var Lg,Eg,Pg=Tg,wg=((Eg=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.selection,a=t.format===_.Q.ANIMATED?"pa":"p",s=t.thumbnail.src+"?type="+a+"100_100",c=t.packCode+"-"+t.seq;return D.b.createElement(Ll.a,{id:i,ctype:r,i18n:n},D.b.createElement(El.a,{compId:i,compStore:t},D.b.createElement(au.a,{blockWrapperProps:t,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext,draggable:"true"},D.b.createElement(md.a,{ctype:r},D.b.createElement(Sd.b,{src:s,alt:c,className:"se-sticker-image",type:"none"!==o||this.context.readOnly?Sd.a.normal:Sd.a.lazyLoad,onLoad:this._handleLoadImage,onError:this._handleErrorImage})))))},n._handleLoadImage=function(){this.props.useCase.repaintCursor()},n._handleErrorImage=function(){this.props.useCase.repaintCursor()},n._handleMoveToPrev=function(){this.props.useCase.moveToPrev(this.props.store.id)},n._handleMoveToNext=function(){this.props.useCase.moveToNext(this.props.store.id)},t}(D.b.Component)).contextType=Cd.a,Lg=Eg,k()(Lg.prototype,"_handleLoadImage",[te.autobind],Object.getOwnPropertyDescriptor(Lg.prototype,"_handleLoadImage"),Lg.prototype),k()(Lg.prototype,"_handleErrorImage",[te.autobind],Object.getOwnPropertyDescriptor(Lg.prototype,"_handleErrorImage"),Lg.prototype),k()(Lg.prototype,"_handleMoveToPrev",[te.autobind],Object.getOwnPropertyDescriptor(Lg.prototype,"_handleMoveToPrev"),Lg.prototype),k()(Lg.prototype,"_handleMoveToNext",[te.autobind],Object.getOwnPropertyDescriptor(Lg.prototype,"_handleMoveToNext"),Lg.prototype),Lg);wg.defaultProps={i18n:function(e){return e}},wg.propTypes={shouldForceRefresh:D.a.bool,useCase:D.a.instanceOf(Og).isRequired,store:D.a.instanceOf(Pg).isRequired,i18n:D.a.func};var kg=Object(N.b)(wg),xg=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.a),Dg={propertyToolbar:{align:Object(pt.a)("align-group"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"cycle-align":Object(pt.a)("cycle-align"),delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},Ag={propertyToolbar:function(){return["align","separator-bar"]},contextToolbar:Object(pt.b)(function(e){var t=e.selectedComponents,n=[],i=e.configAgent.get("productConfig.documentWidth"),r=t[0].thumbnail.width<i,o={smallerThanDocument:r};return r&&n.push("cycle-align"),n.push("separator-bar","delete"),{buttons:n,payload:o}})},jg=function(e){function t(){return e.call(this,{buttonSetMap:Dg,buttonResolver:Ag})||this}return S()(t,e),t}(_.l),Rg=_.q.extend({name:"StickerComponent",view:kg,useCase:Og,store:Pg,service:xg,toolbar:jg}),Ng=n(823),Mg=n(456),Bg=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.a),Wg=n(457),Ug={propertyToolbar:{align:Object(pt.a)("align-group"),"content-mode-without-extend-pagefull":Object(pt.a)("content-mode-group-without-extend-pagefull"),"content-mode-without-pagefull":Object(pt.a)("content-mode-group-without-pagefull"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"content-mode-fit-and-extend":Object(pt.a)("content-mode-group-fit-and-extend"),"content-mode-without-extend-pagefull":Object(pt.a)("content-mode-group-without-extend-pagefull"),"content-mode-without-pagefull":Object(pt.a)("content-mode-group-without-pagefull"),"cycle-align":Object(pt.a)("cycle-align"),delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar"),"additional-info":Object(pt.a)("additional-info")}},Fg=n(247);function zg(e){return Object(up.a)(e,function(e){return e.type===Fg.c.RICH})}function Vg(e){return Object(up.a)(e,function(e){return Fg.d.includes(e.providerName.toLowerCase())})}function Gg(e){return Object(up.a)(e,function(e){return e.isOembedNotSupported})}var Hg,qg={propertyToolbar:function(e){var t=e.selectedComponents,n=["align"],i=zg(t),r=Vg(t);return Gg(t)||r&&i?(n.push("separator-bar"),n):(i?n.push("separator-bar","content-mode-without-extend-pagefull"):n.push("separator-bar","content-mode-without-pagefull"),n)},contextToolbar:Object(pt.b)(function(e){var t=e.selectedComponents,n=[],i=t[0].contentMode,r=zg(t),o=function(e){return Object(up.a)(e,function(e){return e.isScriptRenderType})}(t),a=Vg(t),s=Gg(t),c={isRichType:r,isScriptType:o,isScriptTypeProvider:a,isOembedNotSupported:s};return i===Fg.a.NORMAL&&n.push("cycle-align"),s||a&&r||(r?n.push("separator-bar","content-mode-without-extend-pagefull"):n.push("separator-bar","content-mode-without-pagefull")),n.push("separator-bar","delete"),{buttons:n,payload:c}})},Jg=function(e){function t(){return e.call(this,{buttonSetMap:Ug,buttonResolver:qg})||this}return S()(t,e),t}(_.l),Kg=_.q.extend({name:"OembedComponent",view:gh(function(){return n.e(58).then(n.bind(null,1331))}),useCase:Mg.a,service:Bg,store:Wg.a,toolbar:Jg}),Xg=n(460),Yg=n(461),Qg={propertyToolbar:{align:Object(pt.a)("align-group"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{delete:Object(pt.a)("delete")}},Zg={propertyToolbar:function(){return["align","separator-bar"]},contextToolbar:Object(pt.b)(function(){return{buttons:["delete"]}})},$g=function(e){function t(){return e.call(this,{buttonSetMap:Qg,buttonResolver:Zg})||this}return S()(t,e),t}(_.l),ef=(Hg=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={noImage:!1},n}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.i18n,t=e("materialComponent:not_registerd"),n=this._renderThumbnailImage(),i=this._resolveTitle()||t,r=this._resolveSubTitle()||t,o=this._renderDescription()||t,a=this._renderInfo(),s=this._resolveThumbnailClassName();return D.b.createElement(md.a,{ctype:"material",className:"se-material-travel"},D.b.createElement("div",{className:s},n,D.b.createElement("div",{className:"se-material-thumbnail-frame"})),D.b.createElement("div",{className:"se-material-info"},D.b.createElement("div",{className:"se-material-info-container"},D.b.createElement("strong",{className:"se-material-title"},i),D.b.createElement("span",{className:"se-material-subtitle"},r),D.b.createElement("dl",{className:"se-material-detail"},D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:explanation")),D.b.createElement("dd",{className:"se-material-detail-description"},o),a))),D.b.createElement("div",{className:"se-material-frame"}))},n._renderThumbnailImage=function(){var e=this._resolveTitle(),t=Object(x.a)(this.props.item,"thumbnail.src",""),n=kt.a.makeDthumbHttpsUrl(t);if(!1===this.state.noImage)return D.b.createElement(Sd.b,{className:"se-sidebar-material-thumbnail-resource",src:n,alt:e,onLoad:this._handleThumbnailLoad,onError:this._handleThumbnailError})},n._renderDescription=function(){var e=this.props.i18n,t=this._resolveDescription(),n=Object(x.a)(this.props.item,"subId"),i=Object(x.a)(this.props.item,"detailInfo[1].values[0].value"),r=Object(x.a)(this.props.item,"detailInfo[1].values[1].value");return n===Jt.c.OVERSEAS_HOTEL?i||r?D.b.createElement(D.b.Fragment,null,i?D.b.createElement(D.b.Fragment,null,D.b.createElement("span",{className:"se-material-star-rating"},D.b.createElement("span",{className:"se-blind"},e("materialComponent:rating"))),i):"",i&&r?", ":"",r):"":t},n._renderInfo=function(){var e=this.props.i18n,t=e("materialComponent:not_registerd"),n=this._resolveInfo()||t,i=Object(x.a)(this.props.item,"detailInfo[2].labelName","");return D.b.createElement(D.b.Fragment,null,D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:"+i)),D.b.createElement("dd",{className:"se-material-detail-description"},n))},n._resolveThumbnailClassName=function(){return R()({"se-material-thumbnail":!0,"se-material-thumbnail-no-image":!0===this.state.noImage})},n._handleThumbnailLoad=function(){this.props.onCompleteImage()},n._handleThumbnailError=function(){this.setState({noImage:!0}),this.props.onCompleteImage()},n._resolveTitle=function(){return wt.a.restoreSpecialChar(this.props.item.title)},n._resolveSubTitle=function(){return Object(x.a)(this.props.item,"detailInfo[0].values[0].value","")},n._resolveDescription=function(){var e=Object(x.a)(this.props.item,"detailInfo[1].values",[]);return this._detailInfoToString(e)},n._resolveInfo=function(){var e=Object(x.a)(this.props.item,"detailInfo[2].values",[]);if(Object(x.a)(this.props.item,"subId")===Jt.c.DOMESTIC_GEO){var t=e.reduce(function(e,t){return e+"#"+t.value+" "},"");return wt.a.restoreSpecialChar(t)}return this._detailInfoToString(e)},n._detailInfoToString=function(e){return wt.a.restoreSpecialChar(Object(Pn.a)(e,function(e){return e.value}).join(", "))},t}(D.b.Component),k()(Hg.prototype,"_handleThumbnailLoad",[te.autobind],Object.getOwnPropertyDescriptor(Hg.prototype,"_handleThumbnailLoad"),Hg.prototype),k()(Hg.prototype,"_handleThumbnailError",[te.autobind],Object.getOwnPropertyDescriptor(Hg.prototype,"_handleThumbnailError"),Hg.prototype),Hg);ef.defaultProps={i18n:function(e){return e},onCompleteImage:function(){},item:{title:"",subId:"",thumbnail:{},detailInfo:[{},{},{}],isBigSizeImage:!1}},ef.propTypes={i18n:D.a.func,onCompleteImage:D.a.func,item:D.a.shape({id:D.a.string.isRequired,title:D.a.string,sudId:D.a.string,thumbnail:D.a.object,detailInfo:D.a.oneOfType([D.a.array,D.a.object]),isBigSizeImage:D.a.bool})};var tf,nf=Object(N.b)(ef),rf=(tf=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={noImage:!1},n}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.i18n,t=e("materialComponent:not_registerd"),n=this._renderThumbnailImage(),i=this._resolveTitle(),r=this._resolveAuthor()||t,o=this._resolvePublisher()||t,a=this._resolveRelease()||t,s=this._resolveThumbnailClassName();return D.b.createElement(md.a,{ctype:"material",className:"se-material-book"},D.b.createElement("div",{className:s},n,D.b.createElement("div",{className:"se-material-thumbnail-frame"})),D.b.createElement("div",{className:"se-material-info"},D.b.createElement("div",{className:"se-material-info-container"},D.b.createElement("strong",{className:"se-material-title"},i),D.b.createElement("dl",{className:"se-material-detail"},D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:author")),D.b.createElement("dd",{className:"se-material-detail-description"},r),D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:publisher")),D.b.createElement("dd",{className:"se-material-detail-description"},o),D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:book_release")),D.b.createElement("dd",{className:"se-material-detail-description"},a)))),D.b.createElement("div",{className:"se-material-frame"}))},n._renderThumbnailImage=function(){var e=this._resolveTitle(),t=Object(x.a)(this.props.item,"thumbnail.src","");if(!1===this.state.noImage)return D.b.createElement(Sd.b,{className:"se-sidebar-material-thumbnail-resource",src:t,alt:e,onLoad:this._handleThumbnailLoad,onError:this._handleThumbnailError})},n._resolveThumbnailClassName=function(){return R()({"se-material-thumbnail":!0,"se-material-thumbnail-no-image":!0===this.state.noImage})},n._handleThumbnailLoad=function(){this.props.onCompleteImage()},n._handleThumbnailError=function(){this.setState({noImage:!0}),this.props.onCompleteImage()},n._resolveTitle=function(){return wt.a.restoreSpecialChar(this.props.item.title)},n._resolveAuthor=function(){var e=Object(x.a)(this.props.item,"detailInfo[0].values",[]);return this._detailInfoToString(e).replace(/\|/gi,", ").replace(/ 지음$/gi,"")},n._resolvePublisher=function(){var e=Object(x.a)(this.props.item,"detailInfo[1].values",[]);return this._detailInfoToString(e)},n._resolveRelease=function(){var e=Object(x.a)(this.props.item,"detailInfo[2].values",[]);return this._detailInfoToString(e)},n._detailInfoToString=function(e){return wt.a.restoreSpecialChar(Object(Pn.a)(e,function(e){return e.value}).join(", "))},t}(D.b.Component),k()(tf.prototype,"_handleThumbnailLoad",[te.autobind],Object.getOwnPropertyDescriptor(tf.prototype,"_handleThumbnailLoad"),tf.prototype),k()(tf.prototype,"_handleThumbnailError",[te.autobind],Object.getOwnPropertyDescriptor(tf.prototype,"_handleThumbnailError"),tf.prototype),tf);rf.defaultProps={i18n:function(e){return e},onCompleteImage:function(){},item:{title:"",thumbnail:{},detailInfo:[{},{},{}],isBigSizeImage:!1}},rf.propTypes={i18n:D.a.func,onCompleteImage:D.a.func,item:D.a.shape({id:D.a.string.isRequired,title:D.a.string,thumbnail:D.a.object,detailInfo:D.a.oneOfType([D.a.array,D.a.object]),isBigSizeImage:D.a.bool})};var of,af=Object(N.b)(rf),sf=(of=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={noImage:!1},n}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.i18n,t=e("materialComponent:not_registerd"),n=this._renderThumbnailImage(),i=this._resolveTitle(),r=this._resolveDirector()||t,o=this._resolveActors()||t,a=this._resolveRelease()||t,s=this._resolveThumbnailClassName();return D.b.createElement(md.a,{ctype:"material",className:"se-material-movie"},D.b.createElement("div",{className:s},n,D.b.createElement("div",{className:"se-material-thumbnail-frame"})),D.b.createElement("div",{className:"se-material-info"},D.b.createElement("div",{className:"se-material-info-container"},D.b.createElement("strong",{className:"se-material-title"},i),D.b.createElement("dl",{className:"se-material-detail"},D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:director")),D.b.createElement("dd",{className:"se-material-detail-description"},r),D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:actor")),D.b.createElement("dd",{className:"se-material-detail-description"},o),D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:movie_release")),D.b.createElement("dd",{className:"se-material-detail-description"},a)))),D.b.createElement("div",{className:"se-material-frame"}))},n._renderThumbnailImage=function(){var e=this._resolveTitle(),t=Object(x.a)(this.props.item,"thumbnail.src","");if(!1===this.state.noImage)return D.b.createElement(Sd.b,{className:"se-sidebar-material-thumbnail-resource",src:t,alt:e,onLoad:this._handleThumbnailLoad,onError:this._handleThumbnailError})},n._resolveThumbnailClassName=function(){return R()({"se-material-thumbnail":!0,"se-material-thumbnail-no-image":!0===this.state.noImage})},n._handleThumbnailLoad=function(){this.props.onCompleteImage()},n._handleThumbnailError=function(){this.setState({noImage:!0}),this.props.onCompleteImage()},n._resolveTitle=function(){return wt.a.restoreSpecialChar(this.props.item.title)},n._resolveDirector=function(){var e=Object(x.a)(this.props.item,"detailInfo[0].values",[]);return this._detailInfoToString(e)},n._resolveActors=function(){var e=Object(x.a)(this.props.item,"detailInfo[1].values",[]);return this._detailInfoToString(e)},n._resolveRelease=function(){var e=Object(x.a)(this.props.item,"detailInfo[2].values",[]);return this._detailReleaseToString(e)},n._detailReleaseToString=function(e){var t=this.props.i18n;return 0===e.length?t("materialComponent:movie_not_open"):e.map(function(e,n){return n?t("materialComponent:release_again",{date:e.value}):e.value}).join(" / ")},n._detailInfoToString=function(e){return wt.a.restoreSpecialChar(Object(Pn.a)(e,function(e){return e.value}).join(", "))},t}(D.b.Component),k()(of.prototype,"_handleThumbnailLoad",[te.autobind],Object.getOwnPropertyDescriptor(of.prototype,"_handleThumbnailLoad"),of.prototype),k()(of.prototype,"_handleThumbnailError",[te.autobind],Object.getOwnPropertyDescriptor(of.prototype,"_handleThumbnailError"),of.prototype),of);sf.defaultProps={i18n:function(e){return e},onCompleteImage:function(){},item:{title:"",thumbnail:{},detailInfo:[{},{},{}],isBigSizeImage:!1}},sf.propTypes={i18n:D.a.func,onCompleteImage:D.a.func,item:D.a.shape({id:D.a.string.isRequired,title:D.a.string,thumbnail:D.a.object,detailInfo:D.a.oneOfType([D.a.array,D.a.object]),isBigSizeImage:D.a.bool})};var cf,lf=Object(N.b)(sf),uf=(cf=function(e){function t(){var t;return(t=e.call(this)||this).state={noImage:!1},t}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.i18n,t=e("materialComponent:not_registerd"),n=this._renderThumbnailImage(),i=this._resolveTitle(),r=this._resolveDirector()||t,o=this._resolveActors()||t,a=this._resolveRelease()||t,s=this._resolveThumbnailClassName();return D.b.createElement(md.a,{ctype:"material",className:"se-material-broadcast"},D.b.createElement("div",{className:s},n,D.b.createElement("div",{className:"se-material-thumbnail-frame"})),D.b.createElement("div",{className:"se-material-info"},D.b.createElement("div",{className:"se-material-info-container"},D.b.createElement("strong",{className:"se-material-title"},i),D.b.createElement("dl",{className:"se-material-detail"},D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:producer")),D.b.createElement("dd",{className:"se-material-detail-description"},r),D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:actor")),D.b.createElement("dd",{className:"se-material-detail-description"},o),D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:tv_release")),D.b.createElement("dd",{className:"se-material-detail-description"},a)))),D.b.createElement("div",{className:"se-material-frame"}))},n._renderThumbnailImage=function(){var e=this._resolveTitle(),t=Object(x.a)(this.props.item,"thumbnail.src","");if(!1===this.state.noImage)return D.b.createElement(Sd.b,{className:"se-sidebar-material-thumbnail-resource",src:t,alt:e,onLoad:this._handleThumbnailLoad,onError:this._handleThumbnailError})},n._resolveThumbnailClassName=function(){return R()({"se-material-thumbnail":!0,"se-material-thumbnail-no-image":!0===this.state.noImage})},n._handleThumbnailLoad=function(){this.props.onCompleteImage()},n._handleThumbnailError=function(){this.setState({noImage:!0}),this.props.onCompleteImage()},n._resolveTitle=function(){return wt.a.restoreSpecialChar(this.props.item.title)},n._resolveDirector=function(){var e=Object(x.a)(this.props.item,"detailInfo[0].values",[]);return this._detailInfoToString(e)},n._resolveActors=function(){var e=Object(x.a)(this.props.item,"detailInfo[1].values",[]);return this._detailInfoToString(e)},n._resolveRelease=function(){var e=Object(x.a)(this.props.item,"detailInfo[2].values",[]);return this._detailInfoToString(e)},n._detailInfoToString=function(e){return wt.a.restoreSpecialChar(Object(Pn.a)(e,function(e){return e.value}).join(", "))},t}(D.b.Component),k()(cf.prototype,"_handleThumbnailLoad",[te.autobind],Object.getOwnPropertyDescriptor(cf.prototype,"_handleThumbnailLoad"),cf.prototype),k()(cf.prototype,"_handleThumbnailError",[te.autobind],Object.getOwnPropertyDescriptor(cf.prototype,"_handleThumbnailError"),cf.prototype),cf);uf.defaultProps={i18n:function(e){return e},onCompleteImage:function(){},item:{title:"",thumbnail:{},detailInfo:[{},{},{}],isBigSizeImage:!1}},uf.propTypes={i18n:D.a.func,onCompleteImage:D.a.func,item:D.a.shape({id:D.a.string.isRequired,title:D.a.string,thumbnail:D.a.object,detailInfo:D.a.oneOfType([D.a.array,D.a.object]),isBigSizeImage:D.a.bool})};var pf,df=Object(N.b)(uf),hf=(pf=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={noImage:!1},n}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.i18n,t=e("materialComponent:not_registerd"),n=this._renderThumbnailImage(),i=this._resolveTitle(),r=this._resolveArtist()||t,o=this._resolveRelease()||t,a=this._resolveThumbnailClassName();return D.b.createElement(md.a,{ctype:"material",className:"se-material-music"},D.b.createElement("div",{className:a},n,D.b.createElement("div",{className:"se-material-thumbnail-frame"})),D.b.createElement("div",{className:"se-material-info"},D.b.createElement("div",{className:"se-material-info-container"},D.b.createElement("strong",{className:"se-material-title"},i),D.b.createElement("dl",{className:"se-material-detail"},D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:artist")),D.b.createElement("dd",{className:"se-material-detail-description"},r),D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:music_release")),D.b.createElement("dd",{className:"se-material-detail-description"},o)))),D.b.createElement("div",{className:"se-material-frame"}))},n._renderThumbnailImage=function(){var e=this._resolveTitle(),t=Object(x.a)(this.props.item,"thumbnail.src","");if(!1===this.state.noImage)return D.b.createElement(Sd.b,{className:"se-sidebar-material-thumbnail-resource",src:t,alt:e,onLoad:this._handleThumbnailLoad,onError:this._handleThumbnailError})},n._resolveThumbnailClassName=function(){return R()({"se-material-thumbnail":!0,"se-material-thumbnail-no-image":!0===this.state.noImage})},n._handleThumbnailLoad=function(){this.props.onCompleteImage()},n._handleThumbnailError=function(){this.setState({noImage:!0}),this.props.onCompleteImage()},n._resolveTitle=function(){return wt.a.restoreSpecialChar(this.props.item.title)},n._resolveArtist=function(){var e=Object(x.a)(this.props.item,"detailInfo[0].values",[]);return this._detailInfoToString(e)},n._resolveRelease=function(){var e=Object(x.a)(this.props.item,"detailInfo[1].values",[]);return this._detailInfoToString(e)},n._detailInfoToString=function(e){return wt.a.restoreSpecialChar(Object(Pn.a)(e,function(e){return e.value}).join(", "))},t}(D.b.Component),k()(pf.prototype,"_handleThumbnailLoad",[te.autobind],Object.getOwnPropertyDescriptor(pf.prototype,"_handleThumbnailLoad"),pf.prototype),k()(pf.prototype,"_handleThumbnailError",[te.autobind],Object.getOwnPropertyDescriptor(pf.prototype,"_handleThumbnailError"),pf.prototype),pf);hf.defaultProps={i18n:function(e){return e},onCompleteImage:function(){},item:{title:"",thumbnail:{},detailInfo:[{},{}],isBigSizeImage:!1}},hf.propTypes={i18n:D.a.func,onCompleteImage:D.a.func,item:D.a.shape({id:D.a.string.isRequired,title:D.a.string,thumbnail:D.a.object,detailInfo:D.a.oneOfType([D.a.array,D.a.object]),isBigSizeImage:D.a.bool})};var gf,ff=Object(N.b)(hf),mf=["1","2"],yf=(gf=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={noImage:!1},n}S()(t,e);var n=t.prototype;return n.render=function(){var e=this._renderThumbnailImage(),t=this._resolveTitle(),n=this._renderDetailInfo(),i=this._resolveThumbnailClassName();return D.b.createElement(md.a,{ctype:"material",className:"se-material-shopping"},D.b.createElement("div",{className:i},e,D.b.createElement("div",{className:"se-material-thumbnail-frame"})),D.b.createElement("div",{className:"se-material-info"},D.b.createElement("div",{className:"se-material-info-container"},D.b.createElement("strong",{className:"se-material-title"},t),n)),D.b.createElement("div",{className:"se-material-frame"}))},n._renderThumbnailImage=function(){var e=this._resolveTitle(),t=Object(x.a)(this.props.item,"thumbnail.src","");if(!1===this.state.noImage)return D.b.createElement(Sd.b,{className:"se-sidebar-material-thumbnail-resource",src:t,alt:e,onLoad:this._handleThumbnailLoad,onError:this._handleThumbnailError})},n._resolveThumbnailClassName=function(){return R()({"se-material-thumbnail":!0,"se-material-thumbnail-no-image":!0===this.state.noImage})},n._handleThumbnailLoad=function(){this.props.onCompleteImage()},n._handleThumbnailError=function(){this.setState({noImage:!0}),this.props.onCompleteImage()},n._resolveTitle=function(){return wt.a.restoreSpecialChar(this.props.item.title)},n._renderDetailInfo=function(){var e="",t=this.props.i18n,n=this._getDetailInfoData("price"),i=this._getDetailInfoData("mallNameOrg"),r=this._renderPrice(n),o=this._renderCheapistPrice(n);if(!0===this._isCompareProduct())e=D.b.createElement("dl",{className:"se-material-detail"},D.b.createElement("dt",{className:"se-material-detail-title"},t("materialComponent:price")),D.b.createElement("dd",{className:"se-material-detail-description se-material-detail-shopping-price"},t("materialComponent:price_compare")," ",o));else if(!0===this._hasMallName()){var a=this._renderNaverPayIcon();e=D.b.createElement("dl",{className:"se-material-detail"},D.b.createElement("dt",{className:"se-material-detail-title"},t("materialComponent:mall_name")),D.b.createElement("dd",{className:"se-material-detail-description se-material-detail-shopping-shop"},i,a),D.b.createElement("dt",{className:"se-material-detail-title"},t("materialComponent:price")),D.b.createElement("dd",{className:"se-material-detail-description se-material-detail-shopping-price"},r))}return e},n._renderNaverPayIcon=function(){var e=this.props.i18n,t=this._getDetailInfoData("nPayMblType"),n=this._getDetailInfoData("nPayPcType"),i=!1,r="se-material-npay",o=e("materialComponent:avaiable_npay");return _.W.get("configAgent").isMobile()?mf.includes(t)&&(i=!0,"2"===t&&(r="se-material-npay se-material-npay-plus",o=e("materialComponent:avaiable_npay_plus"))):mf.includes(n)&&(i=!0,"2"===n&&(r="se-material-npay se-material-npay-plus",o=e("materialComponent:avaiable_npay_plus"))),i?D.b.createElement("em",{className:r},D.b.createElement("span",{className:"se-blind"},o)):null},n._renderCheapistPrice=function(e){return this.props.i18n("materialComponent:cheapist_price",{price:wt.a.formatWithComma(e)})},n._renderPrice=function(e){return this.props.i18n("materialComponent:print_price",{price:wt.a.formatWithComma(e)})},n._isCompareProduct=function(){var e=parseInt(this._getDetailInfoData("type"),10);return Object(Ft.a)([1,4],e)},n._getDetailInfoData=function(e){var t=this.props.item.detailInfo;return Object(x.a)(Object(er.a)(t,{labelName:e}),"values[0].value","")},n._hasMallName=function(){return!!this._getDetailInfoData("mallNameOrg")},n._isAvailableNPay=function(){return"1"===this._getDetailInfoData("nPayMblType")},t}(D.b.Component),k()(gf.prototype,"_handleThumbnailLoad",[te.autobind],Object.getOwnPropertyDescriptor(gf.prototype,"_handleThumbnailLoad"),gf.prototype),k()(gf.prototype,"_handleThumbnailError",[te.autobind],Object.getOwnPropertyDescriptor(gf.prototype,"_handleThumbnailError"),gf.prototype),gf);yf.defaultProps={i18n:function(e){return e},onCompleteImage:function(){},item:{title:"",thumbnail:{},detailInfo:[],isBigSizeImage:!1}},yf.propTypes={i18n:D.a.func,onCompleteImage:D.a.func,item:D.a.shape({id:D.a.string.isRequired,title:D.a.string,thumbnail:D.a.object,detailInfo:D.a.oneOfType([D.a.array,D.a.object]),isBigSizeImage:D.a.bool})};var vf,_f=Object(N.b)(yf),bf=n(459),Sf={W480:"w480",FF500_300:"ff500_300"},Cf=(vf=function(e){function t(){var t;return(t=e.call(this)||this).state={src:null,noImage:!1},t}S()(t,e),t.getDerivedStateFromProps=function(e,t){var n={src:(e.item.thumbnail||{}).src||null,noImage:t.noImage};return n.src?n.src!==t.src&&(n.noImage=!1):n.noImage=!0,n};var n=t.prototype;return n.render=function(){var e=this.props.i18n,t=e("materialComponent:not_registerd"),n=this._renderThumbnailImage(),i=this._resolveTitle(),r=this._resolveNewsSummary()||t,o=this._resolveSource()||t,a=this._resolveWrapperClassName(),s=this._resolveThumbnailClassName();return D.b.createElement(md.a,{ctype:"material",className:a},D.b.createElement("div",{className:s},n,D.b.createElement("div",{className:"se-material-thumbnail-frame"})),D.b.createElement("div",{className:"se-material-info"},D.b.createElement("div",{className:"se-material-info-container"},D.b.createElement("strong",{className:"se-material-title"},i),D.b.createElement("dl",{className:"se-material-detail"},D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:news_summary")),D.b.createElement("dd",{className:"se-material-detail-description"},r),D.b.createElement("dt",{className:"se-material-detail-title"},e("materialComponent:office_name")),D.b.createElement("dd",{className:"se-material-detail-description"},o)))),D.b.createElement("div",{className:"se-material-frame"}))},n._resolveWrapperClassName=function(){var e=this.props.item.isBigSizeImage;return R()({"se-material-news":!1===e,"se-material-news-bSize":!0===e})},n._renderThumbnailImage=function(){if(!this.state.noImage){var e=this.props.item.thumbnail,t={src:Object(x.a)(e,"src",""),type:Sf.FF500_300,className:"se-sidebar-material-thumbnail-resource",title:this._resolveTitle(),onLoad:this._handleThumbnailLoad,onError:this._handleThumbnailError};return D.b.createElement(bf.a,t)}},n._resolveThumbnailClassName=function(){return R()({"se-material-thumbnail":!0,"se-material-thumbnail-no-image":!0===this.state.noImage})},n._handleThumbnailLoad=function(){this.props.onCompleteImage()},n._handleThumbnailError=function(){this.setState({noImage:!0}),this.props.onCompleteImage()},n._resolveTitle=function(){return wt.a.restoreSpecialChar(this.props.item.title)},n._resolveNewsSummary=function(){var e=Object(x.a)(this.props.item,"detailInfo[0].values",[]);return this._detailInfoToString(e)},n._resolveSource=function(){var e=Object(x.a)(this.props.item,"detailInfo[1].values",[]);return this._detailInfoToString(e)},n._detailInfoToString=function(e){return wt.a.restoreSpecialChar(Object(Pn.a)(e,function(e){return e.value}).join(", "))},t}(D.b.Component),k()(vf.prototype,"_handleThumbnailLoad",[te.autobind],Object.getOwnPropertyDescriptor(vf.prototype,"_handleThumbnailLoad"),vf.prototype),k()(vf.prototype,"_handleThumbnailError",[te.autobind],Object.getOwnPropertyDescriptor(vf.prototype,"_handleThumbnailError"),vf.prototype),vf);Cf.defaultProps={i18n:function(e){return e},onCompleteImage:function(){},item:{title:"",thumbnail:{},detailInfo:[{},{}],isBigSizeImage:!1}},Cf.propTypes={i18n:D.a.func,onCompleteImage:D.a.func,item:D.a.shape({id:D.a.string.isRequired,title:D.a.string,thumbnail:D.a.object,detailInfo:D.a.oneOfType([D.a.array,D.a.object]),isBigSizeImage:D.a.bool})};var If,Of=Object(N.b)(Cf),Tf=(If=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={noImage:!1},n}S()(t,e);var n=t.prototype;return n.render=function(){var e=(0,this.props.i18n)("materialComponent:not_registerd"),t=R()({"se-material-thumbnail":!0,"se-material-thumbnail-no-image":!0===this.state.noImage}),n=this._renderThumbnailImage(),i=this._resolveTitle(),r=this._resolveGenre()||e,o=this._resolveLocation()||e,a=this._resolvePeriod()||e;return D.b.createElement(md.a,{ctype:"material",className:"se-material-show"},D.b.createElement("div",{className:t},n,D.b.createElement("div",{className:"se-material-thumbnail-frame"})),D.b.createElement("div",{className:"se-material-info"},D.b.createElement("div",{className:"se-material-info-container"},D.b.createElement("strong",{className:"se-material-title"},i),D.b.createElement("dl",{className:"se-material-detail"},this._renderDetails("show_genre",r),this._renderDetails("show_location",o),this._renderDetails("show_period",a)))),D.b.createElement("div",{className:"se-material-frame"}))},n._renderThumbnailImage=function(){var e=this._resolveTitle(),t=this.props.item,n=Object(x.a)(t,"thumbnail.src",""),i=kt.a.makeDthumbHttpsUrl(n);if(!1===this.state.noImage)return D.b.createElement(Sd.b,{className:"se-sidebar-material-thumbnail-resource",src:i,alt:e,onLoad:this._handleThumbnailLoad,onError:this._handleThumbnailError})},n._renderDetails=function(e,t){var n=this.props.i18n;return D.b.createElement(D.b.Fragment,null,D.b.createElement("dt",{className:"se-material-detail-title"},n("materialComponent:"+e)),D.b.createElement("dd",{className:"se-material-detail-description"},t))},n._resolveTitle=function(){return this.props.item.title},n._resolveGenre=function(){var e=this.props.item;return Object(x.a)(e,"detailInfo[0].values[0].value","")},n._resolveLocation=function(){var e=this.props.item;return Object(x.a)(e,"detailInfo[1].values[0].value","")},n._resolvePeriod=function(){var e=this.props.item;return Object(x.a)(e,"detailInfo[2].values[0].value","")},n._handleThumbnailLoad=function(){this.props.onCompleteImage()},n._handleThumbnailError=function(){this.setState({noImage:!0}),this.props.onCompleteImage()},t}(D.b.Component),k()(If.prototype,"_handleThumbnailLoad",[te.autobind],Object.getOwnPropertyDescriptor(If.prototype,"_handleThumbnailLoad"),If.prototype),k()(If.prototype,"_handleThumbnailError",[te.autobind],Object.getOwnPropertyDescriptor(If.prototype,"_handleThumbnailError"),If.prototype),If);Tf.defaultProps={i18n:function(e){return e},onCompleteImage:function(){}},Tf.propTypes={i18n:D.a.func,onCompleteImage:D.a.func,item:D.a.shape({title:D.a.string,thumbnail:D.a.object,detailInfo:D.a.oneOfType([D.a.array,D.a.object]),isBigSizeImage:D.a.bool})};var Lf,Ef,Pf,wf,kf,xf,Df,Af={travel:nf,book:af,movie:lf,broadcast:df,music:ff,shopping:_f,news:Of,show:Object(N.b)(Tf)},jf=_.q.extend({name:"MaterialComponent",view:gh(function(){return n.e(59).then(n.bind(null,1332))},{subComponents:{materialItemMap:Af}}),useCase:Xg.a,store:Yg.a,toolbar:$g}),Rf=n(465),Nf=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t._componentListStore=_.W.get("componentListStore"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._virtualEditable=_.W.get("virtualEditable"),t}S()(t,e);var n=t.prototype;return n.getSelectedComponents=function(){var e=this._selectionInfoStore.toValidJSON();return this._componentListStore.getSelectedComponents(e)},n._replace=function(e,t,n){void 0===n&&(n=[]);var i=this._componentListStore,r=[].concat(n),o=i.getComponentById(e),a=i.getComponentById(t);i.replaceBetween(o,a,r)},n.getSelectedWrappedSection=function(){return Object(At.a)(this.getSelectedComponents()).wrappedSection},n.composeWrappingComponent=function(e){var t,n=this._selectionInfoStore.toValidJSON(),i=this._componentListStore.getComponentById(n.start.compId),r=this._componentListStore.getNextComponent(i),o=i.toValidJSON();r&&"text"===r.ctype?t=r.id:((r=this._componentFactory.createComponentByCtype("text")).updateStyle({align:i.align},r.getCompStartRange()),this._componentListStore.inheritTextStyle(i,r),t=i.id);var a=r.getText().toValidJSON(),s=this._componentFactory.createComponentWithCompData({ctype:"wrappingParagraph",layout:e,wrappedSection:o,text:a});this._replace(i.id,t,s);var c=s.getTextStartRange();this._selectionInfoStore.setRange(c)},n.decomposeWrappingComponent=function(){var e=this;this.getSelectedComponents().forEach(function(t){if("wrappingParagraph"===t.ctype){var n=t.decomposeWrapped(),i=e._getRangeAfterDecompose(t);e._replace(t.id,t.id,n),e._selectionInfoStore.setRange(i);var r=e._selectionInfoStore.toValidJSON();e._componentListStore.refineComponentList(r)}})},n._getRangeAfterDecompose=function(e){var t=e.findSelectedSlot();if("text"===t.attributes.insertion){var n=this._selectionInfoStore.toValidJSON();return{start:Object.assign(n.start,{compId:t.id}),end:Object.assign(n.end,{compId:t.id})}}return t.getComponentActiveRange()},n.changeWrappingLayout=function(e){var t=this._selectionInfoStore.toValidJSON();this.getSelectedComponents().forEach(function(n){"wrappingParagraph"===n.ctype&&n.updateProperty({layout:e},t)}),this._virtualEditable.refresh()},n.isStartFromFirstParagraph=function(){var e=this._selectionInfoStore.toValidJSON().start;return this._componentListStore.getComponentById(e.compId).isFirstParagraph(e)},n.isSelectingWrappedSection=function(){var e=this._selectionInfoStore.toValidJSON();return this._componentListStore.getComponentById(e.start.compId).isSelectingWrappedSection()},n.updateComponentPhase=function(e,t){this.getComponentStore(t).updatePhase(e)},t}(_.a),Mf=n(313),Bf=n(776),Wf=n(758),Uf=n(760),Ff=n(761),zf=n(759),Vf=n(762),Gf=n(768),Hf=n(769),qf=n(767),Jf=n(763),Kf=n(764),Xf=n(126),Yf=(Lf=Object(te.history)({sync:!1}),Ef=Object(te.history)({sync:!1}),Pf=Object(te.history)({sync:!1}),wf=Object(te.history)({sync:!1}),kf=Object(te.history)({sync:!1}),xf=function(e){function t(){var t;return(t=e.call(this)||this)._imageBehavior=_.W.get("imageBehavior"),t._imageComponentService=_.W.get("imageComponentService"),t._imageUploadService=_.W.get("imageUploadService"),t._imageEditService=_.W.get("imageEditService"),t._wrappingParagraphComponentService=_.W.get("wrappingParagraphComponentService"),t._propertyChangeService=_.W.get("propertyChangeService"),t._editingService=_.W.get("editingService"),t._canvasLayoutService=_.W.get("canvasLayoutService"),t}S()(t,e);var n=t.prototype;return n.changeImage=function(){var e=Tt()(It.a.mark(function e(){var t,n,i,r,o,a=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._wrappingParagraphComponentService.getSelectedComponents(),n=this._wrappingParagraphComponentService.getSelectedWrappedSection(),e.next=4,this._imageUploadService.openFileDialog();case 4:return i=e.sent,r=t[0]&&t[0].id,o=n.toPlainJSON(),r&&this._wrappingParagraphComponentService.updateComponentPhase(_.O.PROCESSING,r),e.abrupt("return",this._imageBehavior.changeImage({targetStore:n,selectedImages:i},{onEachUpload:Xf.a}).then(function(e){var t=e.succeededImages;return 0===t.length?a._imageComponentService.changeImageByState(n,o):a._imageComponentService.changeImage(n,t[0].response),r&&a._wrappingParagraphComponentService.updateComponentPhase(_.O.DONE,r),e}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._openPhotoEditor=function(){var e=Tt()(It.a.mark(function e(t,n){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||this._imageComponentService.getFirstSelectedImageComp().id,e.next=3,this._imageEditService.editImage({activeCompId:t,direct:n});case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.editImage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.adjustImage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor(t,"adjust");case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.cropImage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor(t,"crop");case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.filterImage=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor(t,"filter");case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.changeSize=function(e){this._propertyChangeService.changeSize(e),this._wrappingParagraphComponentService.decomposeWrappingComponent()},n.changeQuotationLayout=function(e){var t=e.value;this._propertyChangeService.updateProperty({wrappedSection:{layout:t}})},n.changeWrappingLayout=function(e){var t=e.value;this._wrappingParagraphComponentService.changeWrappingLayout(t)},n.changeTextFormat=function(e){var t=e.value,n="text"===t,i=this._wrappingParagraphComponentService.isSelectingWrappedSection();!n||i?((this._wrappingParagraphComponentService.isStartFromFirstParagraph()||i)&&this._wrappingParagraphComponentService.decomposeWrappingComponent(),this._propertyChangeService.changeTextFormat(t)):this._canvasLayoutService.refreshVirtualEditable()},n.erase=function(){this._editingService.erase()},t}(_.m),k()(xf.prototype,"changeImage",[te.sentryCatch,te.preventOnDocumentProcessing,Lf,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"changeImage"),xf.prototype),k()(xf.prototype,"editImage",[te.sentryCatch,te.preventOnDocumentProcessing,Ef,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"editImage"),xf.prototype),k()(xf.prototype,"adjustImage",[te.sentryCatch,te.preventOnDocumentProcessing,Pf,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"adjustImage"),xf.prototype),k()(xf.prototype,"cropImage",[te.sentryCatch,te.preventOnDocumentProcessing,wf,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"cropImage"),xf.prototype),k()(xf.prototype,"filterImage",[te.sentryCatch,te.preventOnDocumentProcessing,kf,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"filterImage"),xf.prototype),k()(xf.prototype,"changeSize",[te.history,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"changeSize"),xf.prototype),k()(xf.prototype,"changeQuotationLayout",[te.history,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"changeQuotationLayout"),xf.prototype),k()(xf.prototype,"changeWrappingLayout",[te.history,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"changeWrappingLayout"),xf.prototype),k()(xf.prototype,"changeTextFormat",[te.history,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"changeTextFormat"),xf.prototype),k()(xf.prototype,"erase",[te.history,D.d],Object.getOwnPropertyDescriptor(xf.prototype,"erase"),xf.prototype),xf),Qf=(Df=function(e){function t(){var t;return(t=e.call(this)||this)._propertyChangeService=_.W.get("propertyChangeService"),t._wrappingParagraphComponentService=_.W.get("wrappingParagraphComponentService"),t}S()(t,e);var n=t.prototype;return n.changeWrappingLayout=function(){this._wrappingParagraphComponentService.decomposeWrappingComponent()},n.changeContentMode=function(e){var t=e.value;this._propertyChangeService.updateProperty({wrappedSection:{contentMode:t}}),this._wrappingParagraphComponentService.decomposeWrappingComponent()},t}(_.m),k()(Df.prototype,"changeWrappingLayout",[te.history,D.d],Object.getOwnPropertyDescriptor(Df.prototype,"changeWrappingLayout"),Df.prototype),k()(Df.prototype,"changeContentMode",[te.history,D.d],Object.getOwnPropertyDescriptor(Df.prototype,"changeContentMode"),Df.prototype),Df),Zf=n(775),$f={"image-edit-right-label":{view:Ku.a,useCase:Yf,styleName:"image-edit"},"image-edit":{view:xp.a,useCase:Yf,styleName:"image-edit"},"image-adjust":{view:Dp.a,useCase:Yf,styleName:"image-adjust"},"image-crop":{view:Ap.a,useCase:Yf,styleName:"image-crop"},"image-filter":{view:jp.a,useCase:Yf,styleName:"image-filter"},"image-replacement-right-label":{view:Xu.a,useCase:Yf,styleName:"image-replacement"},"image-resizing":{view:Bf.a,useCase:Yf,propertyName:"size",styleName:"resizing"},"content-mode":{view:Wf.a,useCase:Qf,styleName:"object-arrangement"},"content-mode-group-fit-and-extend":{view:Ff.a,useCase:Qf,styleName:"object-arrangement"},"content-mode-group-without-pagefull":{view:Uf.a,useCase:Qf,styleName:"object-arrangement"},"content-mode-without-default":{view:zf.a,useCase:Qf,styleName:"object-arrangement"},"content-mode-only-justify":{view:Vf.a,useCase:Qf,styleName:"object-arrangement-fit"},"wrapping-layout-drop-down":{view:Gf.a,useCase:Yf,propertyName:"wrappingLayout",styleName:"text-arrangement"},"wrapping-layout-group":{view:Hf.a,useCase:Yf,propertyName:"wrappingLayout",styleName:"text-arrangement"},"text-format":{view:qf.a,useCase:Yf,propertyName:"textFormat",styleName:"text-format"},delete:{view:Jf.a,useCase:Yf,styleName:"delete"},"quotation-layout":{view:Kf.a,useCase:Yf,propertyName:"layout",styleName:"quotation"},"to-quotation":{view:Zf.a,useCase:Yf,styleName:"to-quotation"}},em={propertyToolbar:{"image-replacement-right-label":$f["image-replacement-right-label"],"image-edit-right-label":$f["image-edit-right-label"],"image-edit":$f["image-edit"],"image-resizing":$f["image-resizing"],align:Object(pt.a)("align-group"),"align-drop-down-with-justify":Object(pt.a)("align-drop-down-with-justify"),list:Object(pt.a)("list"),"content-mode":$f["content-mode"],"content-mode-fit-and-extend":$f["content-mode-group-fit-and-extend"],"content-mode-without-pagefull":$f["content-mode-group-without-pagefull"],"wrapping-layout":$f["wrapping-layout-drop-down"],"image-link":Object(pt.a)("image-link"),"text-format":$f["text-format"],"font-size":Object(pt.a)("font-size"),bold:Object(pt.a)("bold"),italic:Object(pt.a)("italic"),underline:Object(pt.a)("underline"),"font-color":Object(pt.a)("font-color"),"quotation-layout":$f["quotation-layout"],"content-mode-only-justify":$f["content-mode-only-justify"],"line-height":Object(pt.a)("line-height"),"special-letter":Object(pt.a)("special-letter"),"font-family":Object(pt.a)("font-family"),strikethrough:Object(pt.a)("strikethrough"),"background-color":Object(pt.a)("background-color"),"drop-cap":Object(pt.a)("drop-cap"),superscript:Object(pt.a)("superscript"),subscript:Object(pt.a)("subscript"),"text-link":Object(pt.a)("text-link"),speller:Object(pt.a)("speller"),"separator-bar":Object(pt.a)("separator-bar"),"translation-right-label":Object(pt.a)("translation-right-label")},contextToolbar:{"image-edit":$f["image-edit"],"wrapping-layout-group":$f["wrapping-layout-group"],"quotation-layout":Object(pt.a)("quotation-layout"),"caption-bold":Object(pt.a)("caption-bold"),"special-letter":Object(pt.a)("special-letter"),"caption-link":Object(pt.a)("caption-link"),"caption-align":Object(pt.a)("caption-align"),delete:$f.delete,"separator-bar":Object(pt.a)("separator-bar"),translation:Object(pt.a)("translation")},contentsToolbar:{"font-family":Object(pt.a)("font-family"),"font-size":Object(pt.a)("font-size"),bold:Object(pt.a)("bold"),italic:Object(pt.a)("italic"),"font-color":Object(pt.a)("font-color"),"to-quotation":$f["to-quotation"],"cycle-align":Object(pt.a)("cycle-align-with-justify"),list:Object(pt.a)("list"),"separator-bar":Object(pt.a)("separator-bar"),translation:Object(pt.a)("translation"),"ai-write":Object(pt.a)("ai-write")}},tm=n(449);function nm(e,t){var n=t.start.unitId;return e.id===n||e.hasUnit(n)}function im(e,t){var n=function(e){return Object(tm.a)(e.map(function(e){return(e.value||e.text.value).paragraphs.map(function(e){return{id:e.id,list:e.isListParagraph()}})}))}(e),i=function(e,t){var n=Object(we.a)(e,function(e){return e.id===t.start.paraId}),i=Object(we.a)(e,function(e){return e.id===t.end.paraId});return n<i?{lowIndex:n,highIndex:i}:{lowIndex:i,highIndex:n}}(n,t),r=i.lowIndex,o=i.highIndex,a=r===o,s=!1;if(!(r<0||o<0)){for(var c=r;c<=o;c++)!0===n[c].list&&(s=!0);return s&&a||!s}}var rm,om,am,sm,cm,lm,um,pm,dm,hm={propertyToolbar:function(e){var t=e.selectedComponents,n=e.selectionInfoStore,i=t[0].wrappedSection,r=t.filter(function(e){return"wrappingParagraph"===e.ctype}),o=r.length===t.length,a=r.every(function(e){return e.checkNoWrappedCompSelected()}),s=r.every(function(e){return e.checkFocusedOnQuot(n)}),c=r.every(function(e){var t=e.translationEnabled,i=im(r,n);return t&&o&&a&&i||t&&s}),l=r.every(function(e){return e.isAvailableForDropcap(n)});return nm(i,n)?"image"===i.ctype?function(e){var t=e.selectedComponents,n=[],i=t.length,r=Object(up.a)(t,function(e){return["normal","animated"].includes(e.wrappedSection.displayFormat)}),o=t.some(function(e){return"normal"===e.wrappedSection.displayFormat&&!0===e.wrappedSection.internalResource});return n.push("align"),1===i&&n.push("separator-bar","image-replacement-right-label"),o&&n.push("separator-bar","image-edit-right-label"),r?(n.push("separator-bar","content-mode-without-pagefull"),n.push("separator-bar","wrapping-layout"),n.push("separator-bar","image-link")):n.push("separator-bar","content-mode-fit-and-extend"),n}(e):"quotation"===i.ctype?function(e){var t=e.payload,n=e.translationEnabled,i=t.selectionInfoStore,r=i.start.unitId===i.end.unitId,o="cursor"===i.mode||"block"===i.mode,a=["text-format","font-size","separator-bar","bold","italic","underline","font-color","separator-bar","quotation-layout","separator-bar","content-mode-only-justify","wrapping-layout","separator-bar","line-height","special-letter"];return n&&o&&r&&a.push("separator-bar","translation-right-label"),a.push("separator-bar","speller"),a}({payload:e,translationEnabled:c}):void 0:function(e){var t=e.translationEnabled,n=["text-format","font-family","font-size","separator-bar","bold","italic","underline","strikethrough","font-color","background-color","separator-bar","align-drop-down-with-justify","line-height","list","separator-bar"];return e.dropCapEnabled&&n.push("drop-cap"),n.push("superscript","subscript","special-letter","text-link","separator-bar"),t&&n.push("separator-bar","translation-right-label"),n.push("separator-bar","speller"),n}({translationEnabled:c,dropCapEnabled:l})},contextToolbar:Object(pt.b)(function(e){var t=e.selectedComponents,n=e.selectionInfoStore,i=[],r=t[0].wrappedSection,o=r.ctype,a=nm(r,n),s=t.every(function(e){return e.translationEnabled}),c={sectionType:o,sectionSelected:a,translationEnabled:s};if(a)if("image"===o){var l="normal"===r.displayFormat&&r.internalResource,u=r.isCaptionFocused();c=Re()({},c,{imageEditable:l,captionFocused:u}),i=u?function(e){var t=["caption-align","separator-bar","caption-bold","special-letter","caption-link"];return e&&t.push("separator-bar","translation"),t}(s):function(e){void 0===e&&(e=!1);var t=[];return e&&t.push("image-edit","separator-bar"),t.push("wrapping-layout-group","separator-bar","delete"),t}(l)}else"quotation"===o&&(i=["wrapping-layout-group","separator-bar","delete"]);return{buttons:i,payload:c}}),contentsToolbar:function(e){var t=e.selectionInfoStore,n=e.selectedComponents,i=e.configAgent,r=n[0].wrappedSection,o=n.filter(function(e){return"wrappingParagraph"===e.ctype}),a=!1===nm(r,t),s=o.length===n.length,c=o.every(function(e){return e.checkNoWrappedCompSelected(t)}),l=o.every(function(e){var n=e.translationEnabled,i=im(o,t);return n&&s&&c&&i});if(a&&s){var p=["font-family","separator-bar","font-size","separator-bar","bold","italic","separator-bar","font-color","separator-bar","to-quotation","separator-bar","cycle-align","list"];return i.get("productConfig.aiAssistant")&&!u.a.IS_IE&&p.unshift("ai-write","separator-bar"),l&&p.push("separator-bar","translation"),p}return[]}},gm=function(e){function t(){return e.call(this,{buttonSetMap:em,buttonResolver:hm})||this}return S()(t,e),t}(_.l),fm=_.q.extend({name:"WrappingParagraphComponent",view:gh(function(){return n.e(62).then(n.bind(null,1335))}),useCase:Rf.a,service:Nf,store:Mf.a,toolbar:gm}),mm=n(468),ym=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.updateCodeContents=function(e,t){this.getComponentStore(e).updateCodeContents(t)},t}(_.a),vm=n(493),_m=["type","title","label","groups","value"],bm=(rm=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"codeLayout:title":i,o=e.label,a=void 0===o?"codeLayout:label":o,s=e.groups,c=void 0===s?[{value:"default",title:"codeLayout:default_title",label:"codeLayout:default_label",logId:"scskin1"},{value:"code_stripe",title:"codeLayout:stripe_title",label:"codeLayout:stripe_label",logId:"scskin2"},{value:"code_black",title:"codeLayout:black_title",label:"codeLayout:black_label",logId:"scskin3"}]:s,l=e.value,u=void 0===l?"default":l,p=Me()(e,_m);return D.b.createElement(fg.a,oo()({type:n,title:r,label:a,groups:c,value:u},p,{onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeLayout(e)},t}(D.b.Component),k()(rm.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(rm.prototype,"_handleChange"),rm.prototype),rm),Sm=["type","title","label","hasIcon","value","logId","options"],Cm={"code-font-size":{view:(om=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.LABEL_SELECT:t,i=e.title,r=void 0===i?"codeFontSizeCode:title":i,o=e.label,a=void 0===o?"codeFontSizeCode:label":o,s=e.hasIcon,c=void 0!==s&&s,l=e.value,u=void 0===l?"fs15":l,p=e.logId,d=void 0===p?"size":p,h=e.options,g=void 0===h?{fs13:{label:"codeFontSizeCode:label_fs13",logId:"size13"},fs15:{label:"codeFontSizeCode:label_fs15",logId:"size15"},fs16:{label:"codeFontSizeCode:label_fs16",logId:"size16"}}:h,f=Me()(e,Sm);return D.b.createElement(Gu.a,oo()({type:n,title:r,label:a,hasIcon:c,value:u,logId:d,options:g},f,{onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeFontSize(e),this.props.onClickSelector(e)},t}(D.b.Component),k()(om.prototype,"_handleClickOption",[te.autobind],Object.getOwnPropertyDescriptor(om.prototype,"_handleClickOption"),om.prototype),om),useCase:pa.a,propertyName:"fontSizeCode",styleName:"font-size-code",i18n:{ko:{codeFontSizeCode:{title:"글자 크기 변경",label:"글자 크기",label_fs16:"16",label_fs15:"15",label_fs13:"13"}},en:{codeFontSizeCode:{title:"Change Font Size",label:"Font Size",label_fs16:"16",label_fs15:"15",label_fs13:"13"}},fr:{codeFontSizeCode:{title:"Changer la taille de la police",label:"Taille de police",label_fs16:"16",label_fs15:"15",label_fs13:"13"}}}},"code-layout":{view:bm,useCase:vg.a,propertyName:"layout",styleName:"code",i18n:{ko:{codeLayout:{title:"코드 타입 변경하기",label:"코드 타입",default_title:"기본 타입",default_label:"기본 타입",stripe_title:"가로줄 배경 타입",stripe_label:"가로줄 배경 타입",black_title:"블랙 배경 타입",black_label:"블랙 배경 타입"}},en:{codeLayout:{title:"Change Code Type",label:"Code Type",default_title:"Default Type",default_label:"Default Type",stripe_title:"Horizontal Line Background Type",stripe_label:"Horizontal Line Background Type",black_title:"Black Background Type",black_label:"Black Background Type"}},fr:{codeLayout:{title:"Changer le type de code",label:"Type de code",default_title:"Type par défaut",default_label:"Type par défaut",stripe_title:"Type d'arrière-plan de ligne horizontale",stripe_label:"Type d'arrière-plan de ligne horizontale",black_title:"Type d'arrière-plan noir",black_label:"Type d'arrière-plan noir"}}}}},Im={propertyToolbar:{"code-font-size":Cm["code-font-size"],"code-layout":Cm["code-layout"],"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"code-layout":Cm["code-layout"],delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},Om={propertyToolbar:function(){return["code-font-size","separator-bar","code-layout"]},contextToolbar:Object(pt.b)(function(){return{buttons:["code-layout","separator-bar","delete"]}})},Tm=function(e){function t(){return e.call(this,{buttonSetMap:Im,buttonResolver:Om})||this}return S()(t,e),t}(_.l),Lm=_.q.extend({name:"CodeComponent",view:gh(function(){return Promise.all([n.e(80),n.e(64)]).then(n.bind(null,1336))}),useCase:mm.a,service:ym,store:vm.a,toolbar:Tm}),Em=n(453),Pm=function(e){function t(){var t;return(t=e.call(this)||this)._selectionInfoStore=_.W.get("selectionInfoStore"),t._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.createComponent=function(e){return this._componentFactory.createComponentWithCompData(Re()({ctype:"chat"},e))},n.updateComponent=function(e){var t=e.compId,n=e.messages,i=e.writers,r=this.getComponentStore(t);r&&r.updateChat({messages:n,writers:i})},n.getSelectedCompStore=function(){var e=this._selectionInfoStore.start.compId;return this.getComponentStore(e)},t}(_.a),wm=n(454),km=["type","title","label","labelVisible","logId"],xm=(am=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"chatEdit:title":i,o=e.label,a=void 0===o?"chatEdit:label":o,s=e.labelVisible,c=void 0===s||s,l=e.logId,u=void 0===l?"edit":l,p=Me()(e,km);return D.b.createElement(th.a,oo()({type:n,title:r,label:a,logId:u,labelVisible:c},p,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editChat()},t}(D.b.Component),k()(am.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(am.prototype,"_handleClick"),am.prototype),am),Dm=["type","title","logId"],Am=(sm=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"chatEdit:title":i,o=e.logId,a=void 0===o?"edit":o,s=Me()(e,Dm);return D.b.createElement(th.a,oo()({},s,{type:n,title:r,logId:a,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editChat()},t}(D.b.Component),k()(sm.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(sm.prototype,"_handleClick"),sm.prototype),sm),jm=n(435),Rm={"chat-edit-right-label":{view:xm,useCase:jm.a,styleName:"chat-edit"},"chat-edit":{view:Am,useCase:jm.a,styleName:"chat-edit"}},Nm={propertyToolbar:{align:Object(pt.a)("align-group"),"chat-edit":Rm["chat-edit-right-label"],"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"chat-edit":Rm["chat-edit"],delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},Mm={propertyToolbar:function(){return["align","separator-bar","chat-edit"]},contextToolbar:Object(pt.b)(function(){return{buttons:["chat-edit","separator-bar","delete"]}})},Bm=function(e){function t(){return e.call(this,{buttonSetMap:Nm,buttonResolver:Mm})||this}return S()(t,e),t}(_.l),Wm=_.q.extend({name:"ChatComponent",view:gh(function(){return n.e(57).then(n.bind(null,1330))}),useCase:Em.a,service:Pm,store:wm.a,toolbar:Bm}),Um=n(469),Fm=function(e){function t(){var t;return(t=e.call(this)||this)._api=_.W.get("configAgent").get("apiInfo"),t._componentListStore=_.W.get("componentListStore"),t}S()(t,e);var n=t.prototype;return n.updateComponent=function(e){this.getComponentStore(e.id).setState(e)},n.removeMapImage=function(e){this.getComponentStore(e).removeMapImage()},n.newSchedule=function(e){var t=e.compId,n=e.callback,i=this.getComponentStore(t);1===this._componentListStore.getComponentsByCtype("schedule").filter(function(e){return i.scheduleId===e.scheduleId}).length||null===i.scheduleId?this.addSchedule({compId:t,callback:n}):n.success()},n._toPlainPlacesMapJSON=function(e){return e&&e.toPlainJSON?e.toPlainJSON():e},n.addSchedule=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s,c,l,u,p,d,h,g,f;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.compId,i=t.callback,r=this._api.addSchedule){e.next=5;break}return i.success(),e.abrupt("return");case 5:return o=this.getComponentStore(n),a=o.title,s=o.content,c=o.startAt,l=o.endAt,u=o.linkUrl,p=o.dateOnly,d=o.placesMap,h=o.repetition,g=o.notification,f=this._toPlainPlacesMapJSON(d),e.next=10,Gt.a.post(r,{data:{title:a,content:s,startAt:c,endAt:l,linkUrl:u,dateOnly:p,placesMap:f,repetition:h,notification:g},options:{headers:{"Content-Type":"application/json"}},success:function(e){o.scheduleId=e.scheduleId,i.success()},error:function(){i.error()}});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.updateSchedule=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s,c,l,u,p,d,h,g;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._api.updateSchedule){e.next=3;break}return e.abrupt("return");case 3:return i=this.getComponentStore(t),r=n+"/"+i.scheduleId,o=i.title,a=i.content,s=i.startAt,c=i.endAt,l=i.linkUrl,u=i.dateOnly,p=i.placesMap,d=i.repetition,h=i.notification,g=this._toPlainPlacesMapJSON(p),e.next=9,Gt.a.put(r,{data:{title:o,content:a,startAt:s,endAt:c,linkUrl:l,dateOnly:u,placesMap:g,repetition:d,notification:h},options:{headers:{"Content-Type":"application/json"}},success:function(e){i.scheduleId=e.scheduleId}});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t}(_.a),zm=n(470),Vm=["type","title","label","logId","labelVisible"],Gm=(cm=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"scheduleEdit:title":i,o=e.label,a=void 0===o?"scheduleEdit:label":o,s=e.logId,c=void 0===s?"edit":s,l=e.labelVisible,u=void 0===l||l,p=Me()(e,Vm);return D.b.createElement(th.a,oo()({type:n,title:r,label:a,logId:c,labelVisible:u},p,{onClick:this._handleClick}))},n._handleClick=function(e){this.props.useCase.editScheduleLayer(e)},t}(D.b.Component),k()(cm.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(cm.prototype,"_handleClick"),cm.prototype),cm),Hm=["type","title","logId"],qm=(lm=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"scheduleEditWithoutLabel:title":i,o=e.logId,a=void 0===o?"edit":o,s=Me()(e,Hm);return D.b.createElement(th.a,oo()({type:n,title:r,logId:a},s,{onClick:this._handleClick}))},n._handleClick=function(e){this.props.useCase.editScheduleLayer(e)},t}(D.b.Component),k()(lm.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(lm.prototype,"_handleClick"),lm.prototype),lm),Jm=function(){function e(){this._finderService=_.W.get("finderService"),this._scheduleLayerService=_.W.get("scheduleLayerService")}return e.prototype.editScheduleLayer=function(){var e=this._finderService.getSelectedComponents()[0];e&&this._scheduleLayerService.open(e)},e}(),Km={"schedule-edit-right-label":{view:Gm,useCase:Jm,styleName:"schedule-edit"},"schedule-edit":{view:qm,useCase:Jm,styleName:"schedule-edit"}},Xm={propertyToolbar:{align:Object(pt.a)("align-group"),"schedule-edit-right-label":Km["schedule-edit-right-label"],"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"cycle-align":Object(pt.a)("cycle-align"),"schedule-edit":Km["schedule-edit"],delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},Ym={propertyToolbar:function(e){var t=["align"];return 1===e.selectedComponents.length&&t.push("separator-bar","schedule-edit-right-label"),t},contextToolbar:Object(pt.b)(function(){return{buttons:["cycle-align","separator-bar","schedule-edit","separator-bar","delete"]}})},Qm=function(e){function t(){return e.call(this,{buttonSetMap:Xm,buttonResolver:Ym})||this}return S()(t,e),t}(_.l),Zm=_.q.extend({name:"ScheduleComponent",view:gh(function(){return n.e(65).then(n.bind(null,1363))}),useCase:Um.a,service:Fm,store:zm.a,toolbar:Qm}),$m=n(472),ey=n(473),ty=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.createFileComponent=function(e){var t={ctype:"file",fileName:e.name,fileSize:e.size};return this._componentFactory.createComponentWithCompData(t)},n.updateComponent=function(e,t){this.getComponentStore(e).updateFile(t)},n.updateProgress=function(e,t){var n=this.getComponentStore(e);if(n&&t.lengthComputable){var i=t.loaded,r=t.total;n.setState({count:Math.round(i/r*100),totalCount:100})}},t}(_.a),ny={propertyToolbar:{align:Object(pt.a)("align-group"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"cycle-align":Object(pt.a)("cycle-align"),delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},iy={propertyToolbar:function(){return["align","separator-bar"]},contextToolbar:Object(pt.b)(function(){return{buttons:["cycle-align","separator-bar","delete"]}})},ry=function(e){function t(){return e.call(this,{buttonSetMap:ny,buttonResolver:iy})||this}return S()(t,e),t}(_.l),oy=_.q.extend({name:"FileComponent",view:gh(function(){return n.e(66).then(n.bind(null,817))}),useCase:$m.a,service:ty,store:ey.a,toolbar:ry}),ay=n(483),sy=function(e){function t(){var t;return(t=e.call(this)||this)._componentListStore=_.W.get("componentListStore"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._componentFactory=_.W.get("componentFactory"),t._virtualEditable=_.W.get("virtualEditable"),t}S()(t,e);var n=t.prototype;return n.createComponent=function(){return this._componentFactory.createComponentByCtype("table")},n.mergeCells=function(){var e=this._selectionInfoStore.toValidJSON().focus,t=this._componentListStore.getComponentById(e.compId).mergeCells();this._selectionInfoStore.setRange(t),this._virtualEditable.refresh()},n.splitRowCells=function(){var e=this._selectionInfoStore.toValidJSON().focus;this._componentListStore.getComponentById(e.compId).splitRowCells(),this._virtualEditable.refresh()},n.splitColumnCells=function(){var e=this._selectionInfoStore.toValidJSON().focus;this._componentListStore.getComponentById(e.compId).splitColumnCells(),this._virtualEditable.refresh()},n.insertColumn=function(e){var t=this._selectionInfoStore.toValidJSON().focus,n=this._componentListStore.getComponentById(t.compId).insertColumnById(e);this._selectionInfoStore.setAnchorAndFocus(n),this._virtualEditable.refresh()},n.insertRow=function(e){var t=this._selectionInfoStore.toValidJSON().focus,n=this._componentListStore.getComponentById(t.compId).insertRowById(e);this._selectionInfoStore.setAnchorAndFocus(n),this._virtualEditable.refresh()},n.adjustToEqualWidth=function(){var e=this._selectionInfoStore.toValidJSON().focus;this._componentListStore.getComponentById(e.compId).adjustToEqualWidth(),this._virtualEditable.refresh()},n.selectRowByIds=function(e){var t=this._selectionInfoStore.toValidJSON().focus,n=this._componentListStore.getComponentById(t.compId).selectRowByIds(e);this._selectionInfoStore.setAnchorAndFocus(n)},n.selectColByIds=function(e){var t=this._selectionInfoStore.toValidJSON().focus,n=this._componentListStore.getComponentById(t.compId).selectColByIds(e);this._selectionInfoStore.setAnchorAndFocus(n)},n.selectAll=function(){var e=this._selectionInfoStore.toValidJSON().focus,t=this._componentListStore.getComponentById(e.compId).selectAll();this._selectionInfoStore.setAnchorAndFocus(t)},t}(_.a),cy=n(319),ly=n(322),uy=["type","title","label","useCurrentColor","useColorDetailFlag","option","value","defaultValue","logId"],py=(um=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.COLOR_PICKER:t,i=e.title,r=void 0===i?"cellBackgroundColor:label":i,o=e.label,a=void 0===o?"cellBackgroundColor:label":o,s=e.useCurrentColor,c=void 0!==s&&s,l=e.useColorDetailFlag,u=void 0===l||l,p=e.option,d=void 0===p?{recentColors:[]}:p,h=e.value,g=void 0===h?"":h,f=e.defaultValue,m=void 0===f?"#fff":f,y=e.logId,v=void 0===y?"cellcolor":y,_=Me()(e,uy);return D.b.createElement(ly.a,oo()({type:n,title:r,label:a,useCurrentColor:c,useColorDetailFlag:u,option:d,value:g,defaultValue:m,logId:v},_,{onChange:this._handleChange,recentColors:d.recentColors}))},n._handleChange=function(e){this.props.useCase.changeCellBackgroundColor(e),this.props.onClickSelector(e)},t}(D.b.Component),k()(um.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(um.prototype,"_handleChange"),um.prototype),um),dy=["type","title","label","groups","value"],hy=(pm=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"tableAlign:title":i,o=e.label,a=void 0===o?"tableAlign:label":o,s=e.groups,c=void 0===s?[{value:"left",title:"tableAlign:left_title",label:"tableAlign:left_label",logId:"cellleft"},{value:"center",title:"tableAlign:center_title",label:"tableAlign:center_label",logId:"cellcenter"},{value:"right",title:"tableAlign:right_title",label:"tableAlign:right_label",logId:"cellright"}]:s,l=e.value,u=void 0===l?"left":l,p=Me()(e,dy);return D.b.createElement(fg.a,oo()({type:n,title:r,label:a,groups:c,value:u},p,{onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeTableAlign(e)},t}(D.b.Component),k()(pm.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(pm.prototype,"_handleChange"),pm.prototype),pm),gy=n(432),fy=n(129),my=(dm=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.setState(this._mapStateFromProps(this.props))},n.UNSAFE_componentWillReceiveProps=function(e){var t=this;this.setState(function(){return t._mapStateFromProps(e)})},n.render=function(){var e,t=this.props,n=t.id,i=t.name,r=t.namespace,o=t.label,a=t.isActivated,s=t.moreViewButton,c=t.i18n,l=t.title,u=t.focused,p=t.logAreaId,d=t.logId,h=t.type,g=c(o),f=R()("se-"+r+"-toolbar-"+h+"-container"),m=R()("se-"+i+"-toolbar-button",((e={})["se-"+r+"-toolbar-"+h+"-button"]=!s,e["se-"+r+"-toolbar-"+h+"-more-button"]=s,e),{"se-is-activated":a}),y=this._rangeSlideOption();return D.b.createElement("div",{className:f},D.b.createElement(fy.a,{focused:u,namespace:r,type:h,dataName:n,logAreaId:p,logId:d,className:m,i18n:c,handleClick:this._handleClickButton,ariaExpanded:""+a,ariaHasPopup:"true"},D.b.createElement("span",{className:"se-toolbar-icon"}),D.b.createElement("span",{className:"se-blind","aria-hidden":"true"},g),D.b.createElement("span",{className:"se-toolbar-tooltip"},c(l))),a&&y)},n._rangeSlideOption=function(){var e=this.props,t=e.name,n=e.label,i=e.i18n,r=e.namespace,o=i(n),a=this.state,s=a.min,c=a.max,l=a.value,u=R()("se-range-slider-option",["se-range-slider-option-"+t],"__se-sentry"),p=Number(l).toFixed(0);return D.b.createElement("div",{className:u,"data-group":r+"Toolbar","data-name":"se-range-slider-option-"+t},D.b.createElement("div",{className:"se-range-slider-area"},D.b.createElement("strong",{className:"se-range-slider-label"},o),D.b.createElement("div",{className:"se-range-slider"},D.b.createElement(Wh.a,{value:Number(l),min:s,max:c,onChange:this._handleChangeSliderValue,onChangeComplete:this._handleChangeComplete})),D.b.createElement("div",{className:"se-range-slider-value"},D.b.createElement(gy.a,{className:"se-range-slider-value-input",min:s,max:c,value:Number(p),title:o,onChange:this._handleChangeInputValue,onConfirm:this._handleConfirmInputValue}),D.b.createElement("div",{className:"se-range-slider-value-unit"},"%"))))},n._mapStateFromProps=function(e){return{min:e.min,max:e.max,value:e.value}},n._handleChangeComplete=function(e){this._triggerChangeValue(e,!0)},n._handleClickButton=function(e){var t=this.props,n=t.type,i=t.label,r=t.id,o=t.name,a=t.title,s=t.action,c=t.isActivated;this.props.onClickSelector({event:e,type:n,label:i,id:r,name:o,action:s,title:a,isActivated:c})},n._handleChangeSliderValue=function(e){this.setState({value:e})},n._handleChangeInputValue=function(e){this.setState({value:e})},n._handleConfirmInputValue=function(e){this._triggerChangeValue(e)},n._triggerChangeValue=function(e,t){var n=this.props,i=n.type,r=n.label,o=n.id,a=n.name,s=n.action,c=n.isActivated,u=this._correctNumericalValue(this.state.value),p=Object(l.a)({event:e,type:i,label:r,id:o,name:a,action:s,isActivated:c,remainActive:t,value:u});this.props.onChange(p)},n._correctNumericalValue=function(e){var t=this.state,n=t.min,i=t.max;return e>i?(this.setState({value:i}),i):e<n?(this.setState({value:n}),n):e},t}(D.b.Component),k()(dm.prototype,"_handleChangeComplete",[te.autobind],Object.getOwnPropertyDescriptor(dm.prototype,"_handleChangeComplete"),dm.prototype),k()(dm.prototype,"_handleClickButton",[te.autobind],Object.getOwnPropertyDescriptor(dm.prototype,"_handleClickButton"),dm.prototype),k()(dm.prototype,"_handleChangeSliderValue",[te.autobind],Object.getOwnPropertyDescriptor(dm.prototype,"_handleChangeSliderValue"),dm.prototype),k()(dm.prototype,"_handleChangeInputValue",[te.autobind],Object.getOwnPropertyDescriptor(dm.prototype,"_handleChangeInputValue"),dm.prototype),k()(dm.prototype,"_handleConfirmInputValue",[te.autobind],Object.getOwnPropertyDescriptor(dm.prototype,"_handleConfirmInputValue"),dm.prototype),dm);my.defaultProps={label:"",id:"",name:"",namespace:"",title:"",value:1,isActivated:!1,focused:!1,moreViewButton:!1,onChange:function(){},onClickSelector:function(){},i18n:function(e){return e}},my.propTypes={type:D.a.oneOf([Ae.b.RANGE_SLIDER]).isRequired,id:D.a.string,name:D.a.string,namespace:D.a.string,label:D.a.string,action:D.a.string,title:D.a.string,value:D.a.number,min:D.a.number,max:D.a.number,isActivated:D.a.bool,moreViewButton:D.a.bool,focused:D.a.bool,onChange:D.a.func,onClickSelector:D.a.func,i18n:D.a.func,logAreaId:D.a.string,logId:D.a.string};var yy,vy=Object(N.b)(my),_y=["type","title","label","min","max","value","logId"],by=(yy=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.RANGE_SLIDER:t,i=e.title,r=void 0===i?"tableWidth:title":i,o=e.label,a=void 0===o?"tableWidth:label":o,s=e.min,c=void 0===s?10:s,l=e.max,u=void 0===l?100:l,p=e.value,d=void 0===p?100:p,h=e.logId,g=void 0===h?"tablesize":h,f=Me()(e,_y);return D.b.createElement(vy,oo()({type:n,title:r,label:a,min:c,max:u,value:d,logId:g},f,{onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeTableWidth(e)},t}(D.b.Component),k()(yy.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(yy.prototype,"_handleChange"),yy.prototype),yy),Sy=n(756),Cy=n(433),Iy=n(153),Oy=n(298);var Ty=function(){var e=function(e){switch(e){case Ae.b.BASIC:return th.a;case Ae.b.SEPARATOR_BAR:return Sy.a;case Ae.b.TOGGLE:return na.a;case Ae.b.GROUP_TOGGLE:return fg.a;case Ae.b.LABEL_SELECT:return Gu.a;case Ae.b.ICON_SELECT:return Cy.a;case Ae.b.COLOR_PICKER:return ly.a;case Ae.b.DROP_DOWN:return Iy.a;case Ae.b.CUSTOM_LAYER:return sa.a;case Ae.b.CYCLE_TOGGLE:return Oy.a;case Ae.b.RANGE_SLIDER:return vy}}(this.props.type);return D.b.createElement(e,this.props)};Ty.defaultProps={},Ty.propTypes={type:D.a.oneOf([Ae.b.BASIC,Ae.b.SEPARATOR_BAR,Ae.b.TOGGLE,Ae.b.GROUP_TOGGLE,Ae.b.LABEL_SELECT,Ae.b.ICON_SELECT,Ae.b.COLOR_PICKER,Ae.b.DROP_DOWN,Ae.b.CUSTOM_LAYER,Ae.b.CYCLE_TOGGLE,Ae.b.RANGE_SLIDER]).isRequired,value:D.a.oneOfType([D.a.object,D.a.string,D.a.number,D.a.bool])};var Ly,Ey=Object(N.b)(Ty),Py=n(755),wy=n(820),ky=n(296),xy=(Ly=function(e){function t(){var t;return(t=e.call(this)||this)._refLayer=D.b.createRef(),t._refColorPickerLayer=D.b.createRef(),t._domAccessor=_.W.get("domAccessor"),t}S()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.setState(this._mapStateFromProps(this.props)),this.setState({colorPickerReposition:!1})},n.UNSAFE_componentWillReceiveProps=function(e){this.setState(this._mapStateFromProps(e))},n.componentDidUpdate=function(){this._updateColorPickerLayerPositionState()},n.render=function(){var e=this.props,t=e.applyLabel,n=e.borderLabel,i=e.i18n,r=this._renderBorderStyle(),o=this._renderColorPicker();return D.b.createElement(ky.a,{forwardRef:this._refLayer,className:"se-custom-layer-option se-custom-layer-option-table-border"},D.b.createElement("strong",{className:"se-table-border-option-title"},i(n)),D.b.createElement("div",{className:"se-table-border-option"},r,o),D.b.createElement("div",{className:"se-table-border-option-button-container"},D.b.createElement("button",{type:"button","data-role":"confirm",className:"se-table-border-option-apply-button",onClick:this._handleConfirm},D.b.createElement("span",{className:"se-table-border-option-apply-label"},i(t)))))},n._updateColorPickerLayerPositionState=function(){var e=this._domAccessor.getCanvas().getBoundingClientRect().right,t=this._refColorPickerLayer.current._refLayer.current.getBoundingClientRect().right>e;if(!t)return null;this.setState({colorPickerRepositioned:t})},n._renderColorPicker=function(){var e=this.props,t=e.namespace,n=e.name,i=e.i18n,r=e.useColorDetailFlag,o=this.state,a=o.value,s=o.recentColors,c=o.openColorPicker,l=o.logAreaId,u=R()({"se-table-border-color-option":!0,"se-is-activated":c}),p=R()({"se-color-picker-option-reposition":this.state.colorPickerRepositioned}),d={backgroundColor:a.color},h=l+".cellbrcolor";return D.b.createElement("div",{className:u},D.b.createElement(uo.a,{type:"button","data-group":t+"Toolbar","data-name":n,className:"se-table-border-color-button",onClick:this._handleClickColorPicker,"data-log":h,style:d,"aria-expanded":c,"aria-haspopup":"true"},D.b.createElement("span",{className:"se-blind"},a.color)),D.b.createElement(wy.a,{color:a.color,className:p,ref:this._refColorPickerLayer,useDetail:r,recentColors:s,onChangeColor:this._handleChangeColor,i18n:i}))},n._renderBorderStyle=function(){var e=this.props,t=e.namespace,n=e.name,i=e.options,r=e.i18n,o=this.state,a=o.value,s=o.openOptionLayer,c=a.borderStyle,l=R()(["se-"+n+"-option",{"se-is-activated":s}]),u=R()(["se-"+n+"-button","se-"+n+"-"+c+"-button"]),p=i[c],d=p?r(p.label):"",h=this._renderOptionList();return D.b.createElement("div",{className:l},D.b.createElement(uo.a,{type:"button","data-group":t+"Toolbar","data-name":n,className:u,onClick:this._handleClickStyleOption,"aria-expanded":s,"aria-haspopup":"true"},D.b.createElement("span",{className:"se-table-border-style-option-label"},d)),D.b.createElement("ul",{className:"se-table-border-style-option-list",role:"listbox"},h))},n._renderOptionList=function(){var e=this,t=this.props,n=t.options,i=t.name,r=t.namespace,o=t.i18n,a=t.logAreaId,s=this.state.borderStyle;return Object.keys(n).map(function(t,c){var l=t+"_"+c;return D.b.createElement(Py.a,{optionId:t,options:n,optionType:Ae.c.TEXT,name:i,namespace:r,value:s,key:l,logAreaId:a,i18n:o,onClickOptionList:e._handleChangeBorder})})},n._isRepositionedLayer=function(){return!!this._refLayer.current.style.length},n._handleClickStyleOption=function(){this.setState(function(e){return{openOptionLayer:!e.openOptionLayer}}),this._isRepositionedLayer()&&this.setState({openColorPicker:!1})},n._handleClickColorPicker=function(){this.setState(function(e){return{openColorPicker:!e.openColorPicker}}),this._isRepositionedLayer()&&this.setState({openOptionLayer:!1})},n._handleChangeColor=function(e){var t=this.props.recentColors,n=t.indexOf(e.value);n>-1&&t.splice(n,1),t.unshift(e.value),t.length>this._RECENT_COLOR_LENGTH&&t.pop();var i={color:e.value,borderStyle:this.state.value.borderStyle};this.setState({value:i,openColorPicker:!1}),this.props.onConfirm({event:e.event,recentColors:t,value:i,remainActive:!0})},n._handleChangeBorder=function(e){var t=e.currentTarget.getAttribute("data-value"),n={color:this.state.value.color,borderStyle:t};this.setState({value:n,openOptionLayer:!1}),this.props.onConfirm({event:e,value:n,remainActive:!0}),e.preventDefault()},n._handleConfirm=function(){this.props.onClose()},n._mapStateFromProps=function(e){return{openOptionLayer:e.openOptionLayer,openColorPicker:e.openColorPicker,value:{color:e.value.color||e.defaultValue.color,borderStyle:e.value.style||e.defaultValue.style},recentColors:e.recentColors}},t}(D.b.Component),k()(Ly.prototype,"_handleClickStyleOption",[te.autobind],Object.getOwnPropertyDescriptor(Ly.prototype,"_handleClickStyleOption"),Ly.prototype),k()(Ly.prototype,"_handleClickColorPicker",[te.autobind],Object.getOwnPropertyDescriptor(Ly.prototype,"_handleClickColorPicker"),Ly.prototype),k()(Ly.prototype,"_handleChangeColor",[te.autobind],Object.getOwnPropertyDescriptor(Ly.prototype,"_handleChangeColor"),Ly.prototype),k()(Ly.prototype,"_handleChangeBorder",[te.autobind],Object.getOwnPropertyDescriptor(Ly.prototype,"_handleChangeBorder"),Ly.prototype),k()(Ly.prototype,"_handleConfirm",[te.autobind],Object.getOwnPropertyDescriptor(Ly.prototype,"_handleConfirm"),Ly.prototype),Ly);xy.defaultProps={options:{},openOptionLayer:!1,openColorPicker:!1,value:{},defaultValue:{color:"",style:""},name:"",namespace:"",recentColors:[],onConfirm:function(){},onClose:function(){},i18n:function(e){return e},borderLabel:"",applyLabel:""},xy.propTypes={options:D.a.oneOfType([D.a.array,D.a.object]),openOptionLayer:D.a.bool,openColorPicker:D.a.bool,defaultValue:D.a.object,value:D.a.object,name:D.a.string,namespace:D.a.string,recentColors:D.a.oneOfType([D.a.array,D.a.object]),onConfirm:D.a.func,onClose:D.a.func,i18n:D.a.func,borderLabel:D.a.string,applyLabel:D.a.string,logAreaId:D.a.string,useColorDetailFlag:D.a.bool};var Dy,Ay,jy,Ry=xy,Ny=["type","title","label","labelVisible","option","logId","custom"],My=(Dy=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.CUSTOM_LAYER:t,i=e.title,r=void 0===i?{inactive:"tableBorder:title_inactive",active:"tableBorder:title_active"}:i,o=e.label,a=void 0===o?"tableBorder:label":o,s=e.labelVisible,c=void 0!==s&&s,l=e.option,u=void 0===l?{recentColors:[]}:l,p=e.logId,d=void 0===p?"cellbr":p,h=e.custom,g=void 0===h?{CustomLayer:Ry,customProps:{name:"table-border-style",options:{thinLine:{label:"tableBorder:thinLine_label",logId:"cellbrtype0"},thickLine:{label:"tableBorder:thickLine_label",logId:"cellbrtype1"},dottedLine:{label:"tableBorder:dottedLine_label",logId:"cellbrtype2"},doubleLine:{label:"tableBorder:doubleLine_label",logId:"cellbrtype3"},thickDoubleLine:{label:"tableBorder:thickDoubleLine_label",logId:"cellbrtype4"},none:{label:"tableBorder:none_label",logId:"cellbrnone"}},defaultValue:{color:"#000",style:"none"},borderLabel:"tableBorder:border_label",applyLabel:"tableBorder:apply_label",useColorDetailFlag:this.props.useColorDetailFlag}}:h,f=Me()(e,Ny);return D.b.createElement(Ey,oo()({type:n,title:r,label:a,labelVisible:c,option:u,logId:d,custom:g},f,{onClick:this._handleClick,onChange:this._handleChange,recentColors:u.recentColors}))},n._handleClick=function(e){this.props.onClickSelector(e)},n._handleChange=function(e){this.props.useCase.changeTableBorder(e)},t}(D.b.Component),k()(Dy.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Dy.prototype,"_handleClick"),Dy.prototype),k()(Dy.prototype,"_handleChange",[te.autobind],Object.getOwnPropertyDescriptor(Dy.prototype,"_handleChange"),Dy.prototype),Dy),By=["type","title","label","value","logId","options"],Wy=(Ay=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.DROP_DOWN:t,i=e.title,r=void 0===i?{inactive:"tableStyle:title_inactive",active:"tableStyle:title_active"}:i,o=e.label,a=void 0===o?"tableStyle:label":o,s=e.value,c=void 0===s?"":s,l=e.logId,u=void 0===l?"tableskin":l,p=e.options,d=void 0===p?{default:{label:"tableStyle:default_title",logId:"tableskin0"},table_layout1:{label:"tableStyle:layout1_title",logId:"tableskin1"},table_layout2:{label:"tableStyle:layout2_title",logId:"tableskin2"},table_layout3:{label:"tableStyle:layout3_title",logId:"tableskin3"},table_layout4:{label:"tableStyle:layout4_title",logId:"tableskin4"},table_layout5:{label:"tableStyle:layout5_title",logId:"tableskin5"},table_layout6:{label:"tableStyle:layout6_title",logId:"tableskin6"},table_layout7:{label:"tableStyle:layout7_title",logId:"tableskin7"}}:p,h=Me()(e,By);return D.b.createElement(Iy.a,oo()({type:n,title:r,label:a,value:c,logId:u,options:d},h,{onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeLayout(e),this.props.onClickSelector(e)},t}(D.b.Component),k()(Ay.prototype,"_handleClickOption",[te.autobind],Object.getOwnPropertyDescriptor(Ay.prototype,"_handleClickOption"),Ay.prototype),Ay),Uy=(jy=function(e){function t(){var t;return(t=e.call(this)||this)._propertyChangeService=_.W.get("propertyChangeService"),t._storageService=_.W.get("storageService"),t}S()(t,e);var n=t.prototype;return n.changeTableWidth=function(e){var t=e.value;this._propertyChangeService.updateProperty({resizing:t})},n.changeTableAlign=function(e){this._propertyChangeService.updateStyle(e)},n.changeTableBorder=function(e){var t=e.value,n=e.storageKey,i=e.recentColors;this._propertyChangeService.updateProperty({tableBorder:t}),i&&this._storageService.setStorageData(n,i)},n.changeCellBackgroundColor=function(e){var t=e.value,n=e.recentColors,i=e.storageKey;this._propertyChangeService.updateProperty({cellBackgroundColor:t}),this._storageService.setStorageData(i,n)},n.changeLayout=function(e){var t=e.value;this._propertyChangeService.changeLayout(t)},t}(_.m),k()(jy.prototype,"changeTableWidth",[te.history,D.d],Object.getOwnPropertyDescriptor(jy.prototype,"changeTableWidth"),jy.prototype),k()(jy.prototype,"changeTableAlign",[te.history,D.d],Object.getOwnPropertyDescriptor(jy.prototype,"changeTableAlign"),jy.prototype),k()(jy.prototype,"changeTableBorder",[te.history,D.d],Object.getOwnPropertyDescriptor(jy.prototype,"changeTableBorder"),jy.prototype),k()(jy.prototype,"changeCellBackgroundColor",[te.history,D.d],Object.getOwnPropertyDescriptor(jy.prototype,"changeCellBackgroundColor"),jy.prototype),k()(jy.prototype,"changeLayout",[te.history,D.d],Object.getOwnPropertyDescriptor(jy.prototype,"changeLayout"),jy.prototype),jy),Fy={"table-align":{view:hy,useCase:Uy,propertyName:"tableAlign",styleName:"table-align"},"table-width":{view:by,useCase:Uy,propertyName:"tableWidth",styleName:"table-width"},"table-border":{view:My,useCase:Uy,propertyName:"border",styleName:"table-border",option:{storagePolicy:{key:"tableBorder",property:"recentColors"}}},"table-style":{view:Wy,useCase:Uy,propertyName:"layout",styleName:"table-style"},"cell-background-color":{view:py,useCase:Uy,propertyName:"cellBackgroundColor",styleName:"cell-background-color",option:{storagePolicy:{key:"cellBackgroundColor",property:"recentColors"}}}},zy={propertyToolbar:{"font-family":Object(pt.a)("font-family"),"font-size":Object(pt.a)("font-size"),bold:Object(pt.a)("bold"),italic:Object(pt.a)("italic"),underline:Object(pt.a)("underline"),strikethrough:Object(pt.a)("strikethrough"),"font-color":Object(pt.a)("font-color"),"background-color":Object(pt.a)("background-color"),"align-drop-down":Object(pt.a)("align-drop-down"),"line-height":Object(pt.a)("line-height"),"special-letter":Object(pt.a)("special-letter"),"text-link":Object(pt.a)("text-link"),list:Object(pt.a)("list"),"table-align":Fy["table-align"],"table-width":Fy["table-width"],"cell-background-color":Fy["cell-background-color"],"table-border":Fy["table-border"],"table-style":Fy["table-style"],"translation-right-label":Object(pt.a)("translation-right-label"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{delete:Object(pt.a)("delete")}};function Vy(e,t){var n=function(e){var t=e[0].getAllCellStores();return Object(tm.a)(t.map(function(e){return e.value.paragraphs.map(function(e){return{id:e.id,list:e.isListParagraph()}})}))}(e),i=function(e,t){var n=Object(we.a)(e,function(e){return e.id===t.start.paraId}),i=Object(we.a)(e,function(e){return e.id===t.end.paraId});return n<i?{lowIndex:n,highIndex:i}:{lowIndex:i,highIndex:n}}(n,t),r=i.lowIndex,o=i.highIndex,a=r===o,s=!1;if(!(r<0||o<0)){for(var c=r;c<=o;c++)!0===n[c].list&&(s=!0);return s&&a||!s}}var Gy,Hy,qy,Jy,Ky,Xy,Yy={propertyToolbar:function(e){var t=e.selectedComponents,n=e.selectionInfoStore,i=["font-family","font-size","separator-bar","bold","italic","underline","strikethrough","font-color","background-color","separator-bar","align-drop-down","line-height","list"];"cursor"!==n.mode&&"block"!==n.mode||(i.push("separator-bar","special-letter","text-link"),t.every(function(e){var i=e.translationEnabled,r=Vy(t,n);return i&&r})&&i.push("separator-bar","translation-right-label"));return i.push("separator-bar","table-align","table-width","separator-bar","cell-background-color","table-border","table-style","separator-bar"),i},contextToolbar:Object(pt.b)(function(){return{buttons:["delete"]}})},Qy=function(e){function t(){return e.call(this,{buttonSetMap:zy,buttonResolver:Yy})||this}return S()(t,e),t}(_.l),Zy=n(466),$y=_.q.extend({name:"TableComponent",view:gh(function(){return n.e(63).then(n.bind(null,1355))}),useCase:Zy.a,service:sy,store:cy.a,toolbar:Qy}),ev=n(474),tv={DEFAULT:"DEFAULT",INSERT:"INSERT",DELETE:"DELETE",UPDATE:"UPDATE"},nv=function(e){function t(){var t;return(t=e.call(this)||this)._componentListStore=_.W.get("componentListStore"),t._selectionInfoStore=_.W.get("selectionInfoStore"),t._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.activeCompData=function(){var e=this._selectionInfoStore.start.compId;return this.getComponentStore(e)},n.getFormulaCompList=function(){return this._getAllFormulaComponents().map(function(e){return{mode:tv.DEFAULT,id:e.id,fontSize:e.fontSizeCode.replace("fs",""),latex:e.latex,thumbnail:e.thumbnail}})},n._convertToFormulaEditorFormat=function(e){return e.map(function(e){return{mode:tv.DEFAULT,id:e.id,fontSize:e.fontSizeCode.replace("fs",""),latex:e.latex,thumbnail:e.thumbnail}})},n.getFormulaListWithNewFormula=function(){var e={mode:tv.INSERT},t=this._selectionInfoStore.start.compId,n=this._componentListStore.getNextComponentById(t),i=this._componentListStore.getComponentsByCtypeUntil(t,"formula"),r=n?this._componentListStore.getComponentsByCtypeFrom(n.id,"formula"):[];return{compList:[].concat(this._convertToFormulaEditorFormat(i),[e],this._convertToFormulaEditorFormat(r)),newFormula:e}},n._getAllFormulaComponents=function(){return this._componentListStore.getComponentsByCtype("formula")},n.createComponent=function(e){var t=e.thumbnail||{};return this._componentFactory.createComponentWithCompData({ctype:"formula",html:e.html,latex:e.latex,fontSizeCode:e.fontSizeCode,thumbnail:{ctype:"thumbnail",src:t.src,width:Number(t.width),height:Number(t.height)}})},n.updateComponent=function(e){this.getComponentStore(e.id).updateFormulaData(e)},t}(_.a),iv=n(475),rv=["type","title","label","labelVisible","logId"],ov=(Gy=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"formulaEdit:title":i,o=e.label,a=void 0===o?"formulaEdit:label":o,s=e.labelVisible,c=void 0===s||s,l=e.logId,u=void 0===l?"edit":l,p=Me()(e,rv);return D.b.createElement(th.a,oo()({type:n,title:r,label:a,logId:u,labelVisible:c},p,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editFormula()},t}(D.b.Component),k()(Gy.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Gy.prototype,"_handleClick"),Gy.prototype),Gy),av=["type","title","logId"],sv=(Hy=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"formulaEdit:title":i,o=e.logId,a=void 0===o?"edit":o,s=Me()(e,av);return D.b.createElement(th.a,oo()({type:n,title:r,logId:a},s,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editFormula()},t}(D.b.Component),k()(Hy.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Hy.prototype,"_handleClick"),Hy.prototype),Hy),cv=n(434),lv={"formula-edit-right-label":{view:ov,useCase:cv.a,propertyName:"",styleName:"formula-edit"},"formula-edit":{view:sv,useCase:cv.a,propertyName:"",styleName:"formula-edit"}},uv={propertyToolbar:{align:Object(pt.a)("align-group"),"formula-edit":lv["formula-edit-right-label"],"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"cycle-align":Object(pt.a)("cycle-align"),"formula-edit":lv["formula-edit"],delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},pv={propertyToolbar:function(){return["align","separator-bar","formula-edit"]},contextToolbar:Object(pt.b)(function(){return{buttons:["cycle-align","separator-bar","formula-edit","separator-bar","delete"]}})},dv=function(e){function t(){return e.call(this,{buttonSetMap:uv,buttonResolver:pv})||this}return S()(t,e),t}(_.l),hv=_.q.extend({name:"FormulaComponent",view:gh(function(){return n.e(67).then(n.bind(null,1337))}),useCase:ev.a,service:nv,store:iv.a,toolbar:dv}),gv=n(462),fv=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.createAudioComponent=function(e){var t={ctype:"audio",src:e.src,fileName:e.name,fileSize:e.size};return this._componentFactory.createComponentWithCompData(t)},n.updateComponent=function(e,t){var n=this.getComponentStore(e);n&&n.updateAudio(t)},n.updateProgress=function(e,t){var n=this.getComponentStore(e);if(n&&t.lengthComputable){var i=t.loaded,r=t.total;n.setState({count:Math.round(i/r*100),totalCount:100})}},t}(_.a),mv=n(463),yv={propertyToolbar:{align:Object(pt.a)("align-group"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{"cycle-align":Object(pt.a)("cycle-align"),delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar"),"additional-info":Object(pt.a)("additional-info")}},vv={propertyToolbar:function(){return["align","separator-bar"]},contextToolbar:Object(pt.b)(function(){return{buttons:["cycle-align","separator-bar","delete"]}})},_v=function(e){function t(){return e.call(this,{buttonSetMap:yv,buttonResolver:vv})||this}return S()(t,e),t}(_.l),bv=_.q.extend({name:"AudioComponent",view:gh(function(){return n.e(60).then(n.bind(null,1333))}),useCase:gv.a,service:fv,store:mv.a,toolbar:_v}),Sv=n(155),Cv={DEFAULT:"default"},Iv=D.f.toJS,Ov=(qy=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"layout",Jy,P()(n)),L()(n,"align",Ky,P()(n)),L()(n,"data",Xy,P()(n)),n.attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"};var i=t.state,r=void 0===i?{}:i;n.align=Object(x.a)(r,"align",n.align),n.layout=Object(x.a)(r,"layout",n.layout),n.subtype=Object(x.a)(r,"subtype",""),n.data=Object(x.a)(r,"data",n.data),n._configAgent=_.W.get("configAgent");var o=(n._configAgent.get("plugins.customComponents")||[]).find(function(e){return e.type===n.subtype});if(o&&(n._render=o.onRender,n._onLoad=o.onLoad,n._onDelete=o.onDelete),n.attributes.erasure=n._onDelete?"confirm":"self",n._onLoad){var a=!0===r.copied;delete r.copied,n._onLoad({data:D.f.toJS(n.data),copied:a,updateDataDidLoad:function(e){n.data=Object(l.a)(e,n.data)}})}return n}S()(t,e);var n=t.prototype;return n.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,align:this.align,subtype:this.subtype,layout:this.layout,data:Iv(this.data)}},n.toValidJSON=function(e){void 0===e&&(e={fromCopy:!1});var t={id:this.id,ctype:this.ctype,align:this.align,subtype:this.subtype,layout:this.layout,data:Iv(this.data)};return e.fromCopy&&(t.copied=!0),t},n.collectStyle=function(){return{layout:this.layout,align:this.align}},n.getSubType=function(){return this.subtype},n.getCustomData=function(){return Iv(this.data)},n.updateCustomData=function(e){e&&"object"==typeof e&&(this.data=e)},n.getComponentActiveRange=function(){return{start:this.getCompStartPoint(),end:this.getCompEndPoint()}},n.getCompStartRange=function(){return this.getComponentActiveRange()},n.getCompEndRange=function(){return this.getComponentActiveRange()},n.getCompStartPoint=function(){return this.getStartPoint()},n.getCompEndPoint=function(){return this.getEndPoint()},n.getEndCollapsedRange=function(){return this.getComponentActiveRange()},n.clone=function(){var e=this.toValidJSON();return this._componentFactory.createComponentWithCompData(e)},n.updateStyle=function(e){var t=e.align;t&&this.changeAlign(t)},n.queryCursor=function(){},n.queryDragAndDrop=function(){},n.confirmErasure=function(){var e=this;return new Promise(function(t){var n=e._onDelete(e.toPlainJSON());n&&n.then?n.then(function(e){return t(!1!==e)}).catch(function(e){return t(!1!==e)}):t(!1!==n)})},n.refineSelection=function(){},n.erase=function(){},n.getDomString=function(){return this._render?this._render({data:D.f.toJS(this.data),themeName:this.themeName}):null},B()(t,[{key:"themeName",get:function(){return _.W.get("themeStore").themeName}}]),t}(_.g),Jy=k()(qy.prototype,"layout",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Cv.DEFAULT}}),Ky=k()(qy.prototype,"align",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xy=k()(qy.prototype,"data",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),k()(qy.prototype,"themeName",[D.e],Object.getOwnPropertyDescriptor(qy.prototype,"themeName"),qy.prototype),qy);Ov.ctype="custom",Ov.schema={id:kl.a.string.isRequired,align:kl.a.string,ctype:kl.a.string.isRequired,layout:kl.a.string.isRequired,subtype:kl.a.string.isRequired,data:kl.a.object.isRequired};var Tv,Lv=Ov,Ev=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.c),Pv=(Tv=function(e){function t(){var t;return(t=e.call(this)||this).count=0,t}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.dragAndDrop,a=(t.data,this._getCustomElements());return t.themeName,D.b.createElement(Ll.a,{id:i,ctype:r,i18n:n},D.b.createElement(El.a,{compId:i,dragInfo:o},D.b.createElement(au.a,{blockWrapperProps:t,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext,draggable:"true"},D.b.createElement(md.a,{ctype:r},a))))},n._getCustomElements=function(){var e=this.props.store.getDomString();return e?D.b.createElement("div",{dangerouslySetInnerHTML:{__html:e}}):D.b.createElement("div",null,this.count++)},n._handleMoveToPrev=function(){this.props.useCase.moveToPrev(this.props.store.id)},n._handleMoveToNext=function(){this.props.useCase.moveToNext(this.props.store.id)},t}(D.b.Component),k()(Tv.prototype,"_handleMoveToPrev",[te.autobind],Object.getOwnPropertyDescriptor(Tv.prototype,"_handleMoveToPrev"),Tv.prototype),k()(Tv.prototype,"_handleMoveToNext",[te.autobind],Object.getOwnPropertyDescriptor(Tv.prototype,"_handleMoveToNext"),Tv.prototype),Tv);Pv.defaultProps={i18n:function(e){return e}},Pv.propTypes={store:D.a.instanceOf(Lv).isRequired,useCase:D.a.instanceOf(Ev).isRequired,i18n:D.a.func};var wv,kv=Object(N.b)(Pv),xv=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.a),Dv=["type","title","label","logId"],Av=(wv=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"customEditButton:title":i,o=e.label,a=void 0===o?"customEditButton:label":o,s=e.logId,c=void 0===s?"edit":s,l=Me()(e,Dv);return D.b.createElement(th.a,oo()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.onClick()},t}(D.b.Component),k()(wv.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(wv.prototype,"_handleClick"),wv.prototype),wv);Av.propTypes={useCase:D.a.object};var jv,Rv=Av,Nv=["type","title","label","logId","labelVisible"],Mv=(jv=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"customEditButton:title":i,o=e.label,a=void 0===o?"customEditButton:label":o,s=e.logId,c=void 0===s?"edit":s,l=e.labelVisible,u=void 0===l||l,p=Me()(e,Nv);return D.b.createElement(th.a,oo()({},p,{type:n,title:r,label:a,labelVisible:u,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.onClick()},t}(D.b.Component),k()(jv.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(jv.prototype,"_handleClick"),jv.prototype),jv);Mv.propTypes={useCase:D.a.object};var Bv,Wv,Uv,Fv,zv=Mv,Vv=(Bv=function(){function e(){this._selectionInfoStore=_.W.get("selectionInfoStore"),this._componentListStore=_.W.get("componentListStore"),this._customComponents=_.W.get("configAgent").get("plugins.customComponents"),this._editorStatusStore=_.W.get("editorStatusStore"),this._virtualEditable=_.W.get("virtualEditable"),this._dragAndDropService=_.W.get("dragAndDropService"),this._hotkeyBinder=_.W.get("hotkeyBinder"),this._eventDispatcherService=_.W.get("eventDispatcherService")}var t=e.prototype;return t._pauseDocumentEdit=function(){this._virtualEditable.disable(),this._hotkeyBinder.pause(),this._editorStatusStore.pause(),this._dragAndDropService.disable(),this._eventDispatcherService.emit(_.z.PAUSED)},t._unpauseDocumentEdit=function(){this._dragAndDropService.enable(),this._hotkeyBinder.unpause(),this._editorStatusStore.unpause(),this._virtualEditable.enable(),this._virtualEditable.refresh(),this._eventDispatcherService.emit(_.z.RESUMED)},t.onClick=function(){var e=this._selectionInfoStore.toValidJSON();if("single"===e.mode){var t=e.start.compId,n=this._componentListStore.getComponentById(t);if(n){var i=(this._customComponents||[]).find(function(e){return e.type===n.subtype});if(i){var r=i.onEdit;this._pauseDocumentEdit(),r&&r({compId:t,data:n.getCustomData()}),this._unpauseDocumentEdit()}}}},e}(),k()(Bv.prototype,"onClick",[te.preventOnComponentProcessing,te.history,D.d],Object.getOwnPropertyDescriptor(Bv.prototype,"onClick"),Bv.prototype),Bv),Gv={"custom-edit":{view:Rv,useCase:Vv,styleName:"custom-edit"},"custom-edit-right-label":{view:zv,useCase:Vv,styleName:"custom-edit"}},Hv={propertyToolbar:{align:Object(pt.a)("align-group"),edit:Gv["custom-edit-right-label"],"separator-bar":Object(pt.a)("separator-bar"),delete:Object(pt.a)("delete-with-selection")},contextToolbar:{align:Object(pt.a)("cycle-align"),edit:Gv["custom-edit"],"separator-bar":Object(pt.a)("separator-bar"),delete:Object(pt.a)("delete-with-selection"),"additional-info":Object(pt.a)("additional-info")}},qv={propertyToolbar:{desktop:["align"],mobile:["delete"]},contextToolbar:{desktop:[],mobile:[]}},Jv=function(e,t,n,i){void 0===t&&(t=[]),void 0===i&&(i=[]);var r=Object(wn.a)(Object(x.a)(t,"toolbar."+e+".exclude",[]),i);return Object(wn.a)(n,r)},Kv={propertyToolbar:function(e){var t=e.configAgent,n=e.selectedComponents;if(n&&0!==n.length){var i=t.get("productEnv.deviceType"),r=t.get("plugins.customComponents"),o=n[0].subtype,a=[],s=i!==_.t.MOBILE?{right:[]}:{right:["delete"]};return n.length>1?a.push("align"):a.push("align","separator-bar","edit"),function(e,t,n,i,r){void 0===r&&(r={});var o=n.find(function(t){return t.type===e}),a=Object(x.a)(qv,"propertyToolbar."+t,[]),s=Jv("propertyToolbar",o,i,a);return Array.isArray(r.right)&&(r.right=Jv("propertyToolbar",o,r.right,a)),Array.isArray(r.left)&&(r.left=Jv("propertyToolbar",o,r.left,a)),t===_.t.MOBILE?{buttonSet:s,fixedButtonSets:r}:s}(o,i,r,a,s)}},contextToolbar:Object(pt.b)(function(e){var t=e.configAgent,n=e.selectedComponents,i=t.get("productEnv.deviceType"),r=t.get("plugins.customComponents"),o=n[0].subtype,a=["align","separator-bar","edit","separator-bar","delete"];return{buttons:a=function(e,t,n,i){var r=n.find(function(t){return t.type===e});return Jv("contextToolbar",r,i,Object(x.a)(qv,"contextToolbar."+t,[]))}(o,i,r,a),payload:{subtype:o}}})},Xv=function(e){function t(){return e.call(this,{buttonSetMap:Hv,buttonResolver:Kv})||this}return S()(t,e),t}(_.l),Yv=_.q.extend({name:"CustomComponent",view:kv,useCase:Ev,service:xv,store:Lv,toolbar:Xv}),Qv=n(795),Zv=n(797),$v=["type","title","label","logId","labelVisible"],e_=(Wv=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"talktalkEdit:title":i,o=e.label,a=void 0===o?"talktalkEdit:label":o,s=e.logId,c=void 0===s?"edit":s,l=e.labelVisible,u=void 0===l||l,p=Me()(e,$v);return D.b.createElement(th.a,oo()({type:n,title:r,label:a,logId:c,labelVisible:u},p,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editTalktalk()},t}(D.b.Component),k()(Wv.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Wv.prototype,"_handleClick"),Wv.prototype),Wv),t_=["type","title","logId"],n_=(Uv=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Ae.b.BASIC:t,i=e.title,r=void 0===i?"talktalkEdit:title":i,o=e.logId,a=void 0===o?"edit":o,s=Me()(e,t_);return D.b.createElement(Ey,oo()({type:n,title:r,logId:a},s,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editTalktalk()},t}(D.b.Component),k()(Uv.prototype,"_handleClick",[te.autobind],Object.getOwnPropertyDescriptor(Uv.prototype,"_handleClick"),Uv.prototype),Uv),i_=(Fv=function(){function e(){this._talktalkEditLayerService=_.W.get("talktalkEditLayerService"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._componentListStore=_.W.get("componentListStore")}return e.prototype.editTalktalk=function(){var e=this._selectionInfoStore.toValidJSON(),t=this._componentListStore.getSelectedComponents(e),n=Object(At.a)(t).toValidJSON();this._talktalkEditLayerService.open({bannerType:n.layout,accountId:n.accountId,image:n.image})},e}(),k()(Fv.prototype,"editTalktalk",[D.d],Object.getOwnPropertyDescriptor(Fv.prototype,"editTalktalk"),Fv.prototype),Fv),r_={"talktalk-edit":{view:e_,useCase:i_,styleName:"talktalk-edit"},"talktalk-edit-without-label":{view:n_,useCase:i_,styleName:"talktalk-edit"}},o_={propertyToolbar:{align:Object(pt.a)("align-group"),talktalk:r_["talktalk-edit"],"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{align:Object(pt.a)("cycle-align"),talktalk:r_["talktalk-edit-without-label"],delete:Object(pt.a)("delete"),"separator-bar":Object(pt.a)("separator-bar")}},a_={propertyToolbar:function(){return["align","separator-bar","talktalk"]},contextToolbar:function(){return["align","separator-bar","talktalk","separator-bar","delete"]}},s_=function(e){function t(){return e.call(this,{buttonSetMap:o_,buttonResolver:a_})||this}return S()(t,e),t}(_.l),c_=_.q.extend({name:"TalktalkComponent",view:gh(function(){return n.e(68).then(n.bind(null,1338))}),store:Qv.a,useCase:Zv.a,toolbar:s_}),l_=n(798),u_={propertyToolbar:{align:Object(pt.a)("align-group"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{delete:Object(pt.a)("delete")}},p_={propertyToolbar:function(){return["align","separator-bar"]},contextToolbar:function(){return["delete"]}},d_=function(e){function t(){return e.call(this,{buttonSetMap:u_,buttonResolver:p_})||this}return S()(t,e),t}(_.l),h_=n(799),g_=_.q.extend({name:"AnniversarySectionComponent",view:gh(function(){return n.e(69).then(n.bind(null,1339))}),store:l_.a,useCase:h_.a,toolbar:d_}),f_=n(800),m_={propertyToolbar:{align:Object(pt.a)("align-group"),"separator-bar":Object(pt.a)("separator-bar")},contextToolbar:{delete:Object(pt.a)("delete")}},y_={propertyToolbar:function(){return["align","separator-bar"]},contextToolbar:function(){return["delete"]}},v_=function(e){function t(){return e.call(this,{buttonSetMap:m_,buttonResolver:y_})||this}return S()(t,e),t}(_.l),__=n(801),b_=_.q.extend({name:"MrBlogComponent",view:gh(function(){return n.e(70).then(n.bind(null,1340))}),store:f_.a,useCase:__.a,toolbar:v_}),S_=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"};var i=t.state,r=void 0===i?{}:i;if("unknown"===r.ctype)throw new Error("Occured critical issue about component data in unknown!");return n.ctype="unknown",n.unknownCompData=r,n.id!==n.unknownCompData.id&&Object.assign(n.unknownCompData,{id:n.id}),n}S()(t,e);var n=t.prototype;return n._cloneComponentData=function(){return JSON.parse(JSON.stringify(this.unknownCompData))},n.getRealCtype=function(){return this.unknownCompData.ctype},n.toPlainJSON=function(){return this._cloneComponentData()},n.toValidJSON=function(){return this._cloneComponentData()},n.collectStyle=function(){return{layout:"default"}},n.getComponentActiveRange=function(){return{start:this.getCompStartPoint(),end:this.getCompEndPoint()}},n.getCompStartRange=function(){return this.getComponentActiveRange()},n.getCompEndRange=function(){return this.getComponentActiveRange()},n.getCompStartPoint=function(){return this.getStartPoint()},n.getCompEndPoint=function(){return this.getEndPoint()},n.getEndCollapsedRange=function(){return this.getComponentActiveRange()},n.clone=function(){var e=this.toValidJSON();return this._componentFactory.createComponentWithCompData(e)},n.updateStyle=function(){},n.queryCursor=function(){},n.queryDragAndDrop=function(){},n.refineSelection=function(){},n.erase=function(){},t}(_.b);S_.ctype="unknown",S_.schema={id:kl.a.string.isRequired,layout:kl.a.string.isRequired,ctype:kl.a.string.isRequired,value:kl.a.textUnit.isRequired};var C_,I_=S_,O_=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.c),T_=(C_=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.dragAndDrop,a=t.getRealCtype(),s=this._getGuideDescription(n,a),c=this._resolveWrapperClassName();return D.b.createElement(Ll.a,{id:i,ctype:r,i18n:n},D.b.createElement(El.a,{compId:i,dragInfo:o},D.b.createElement(au.a,{blockWrapperProps:t,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext,draggable:"true"},D.b.createElement(md.a,{ctype:r,className:c},D.b.createElement("div",null,s)))))},n._getGuideDescription=function(e,t){return _.W.get("configAgent").get("productEnv.deviceType")===_.t.DESKTOP?e("unknownComponent:title")+" ("+t+")":e("unknownComponent:from_text",{ctype:e.getResource(e.language(),"unknownComponent")["ctype_"+t]||e("unknownComponent:ctype_unknown")})},n._resolveWrapperClassName=function(){return R()({"se-section":!0,"se-l-default":!0,"__se-unit":!0})},n._handleMoveToPrev=function(){this.props.useCase.moveToPrev(this.props.store.id)},n._handleMoveToNext=function(){this.props.useCase.moveToNext(this.props.store.id)},t}(D.b.Component),k()(C_.prototype,"_handleMoveToPrev",[te.autobind],Object.getOwnPropertyDescriptor(C_.prototype,"_handleMoveToPrev"),C_.prototype),k()(C_.prototype,"_handleMoveToNext",[te.autobind],Object.getOwnPropertyDescriptor(C_.prototype,"_handleMoveToNext"),C_.prototype),C_);T_.defaultProps={i18n:function(e){return e}},T_.propTypes={store:D.a.instanceOf(I_).isRequired,useCase:D.a.instanceOf(O_).isRequired,i18n:D.a.func};var L_,E_,P_,w_,k_,x_,D_,A_,j_,R_,N_,M_,B_,W_=Object(N.b)(T_),U_=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t}(_.a),F_={propertyToolbar:{delete:Object(pt.a)("delete-with-selection")}},z_={propertyToolbar:function(){var e=[];return _.W.get("configAgent").get("productEnv.deviceType")===_.t.MOBILE?{fixedButtonSets:{right:["delete"]}}:(e.push("delete"),e)}},V_=function(e){function t(){return e.call(this,{buttonSetMap:F_,buttonResolver:z_})||this}return S()(t,e),t}(_.l),G_=_.q.extend({name:"UnknownComponent",view:W_,useCase:O_,service:U_,store:I_,toolbar:V_}),H_={layouts:[ys,As,G,le,he,ye,Se,Le,bt.extend({setting:{config:{layoutType:"sidebar"}}}),pi,bn,Tn,ir,Dn.extend({setting:{config:{enableEscapeKey:!0}}}),Bn,Qn.extend({setting:{config:{usePreview:!0}}}),yi,Ii.extend({setting:{config:{enableEscapeKey:!0}}}),Zi.extend({setting:{config:{enableEscapeKey:!0}}}),cr.extend({setting:{config:{enableEscapeKey:!0}}}),rr.a.extend({setting:{config:{enableEscapeKey:!0}}}),zr.extend({setting:{config:{enableEscapeKey:!0}}}),qr.extend({setting:{config:{enableEscapeKey:!0}}}),Bs,zs.extend({setting:{config:{enableEscapeKey:!0}}}),qs.extend({setting:{config:{enableEscapeKey:!0}}}),tc,ac,De,uc.extend({setting:{config:{enableEscapeKey:!0}}}),Oc.extend({setting:{config:{enableEscapeKey:!0}}}),Po.extend({setting:{state:{panels:y.getDefinitions(["image","sticker","horizontalLine","quotation"])}}}),zo,ma,Ra,Ol.extend({setting:{config:{buttonSetMap:{buttonSet:[s.a.IMAGE,s.a.SOCIAL_IMAGE,s.a.STICKER,s.a.VIDEO,s.a.AUDIO,s.a.HORIZONTAL_LINE,s.a.QUOTATION,s.a.MAP,s.a.OGLINK,s.a.FILE,s.a.SCHEDULE,s.a.CODE,s.a.TABLE,s.a.FORMULA,s.a.SEPARATOR_BAR,s.a.SEARCH,s.a.LIBRARY,s.a.TEMPLATE]}}}}),gt.extend({setting:{state:{defaultButtonSet:["align"]}}}),Y.extend({setting:{config:{defaultLetterGroup:"used",letterGroupList:v.a.getDefinitions(["used","general","num","round","hangul","greece","japan"]),persistentPolicy:{used:{key:"special-letter/used-letter",property:"items"}},enableEscapeKey:!0}}}),Br.extend({setting:{config:{maxPageSize:5,maxItemsPerPage:7,maxItemsOfAutocomplete:8,enableEscapeKey:!0}}}),Js.a.extend({setting:{config:{maxGroupImageLength:10,dimColor:"transparent",enableEscapeKey:!0}}}),Bc,Qs,wc,jc.extend({setting:{config:{enableEscapeKey:!0}}}),zc,ol],components:[tp,Tl.a,ou.extend({setting:{config:{title:{filterTextStyle:{backgroundColor:"NOT_ALLOWED",strikeThrough:"NOT_ALLOWED",subscript:"NOT_ALLOWED",superscript:"NOT_ALLOWED",dropCap:"NOT_ALLOWED"}}}}}),np.a,Ig,Rg,Wm,Ng.a.extend({setting:{config:{source:{disable:!1,filterTextStyle:{bold:"NOT_ALLOWED",italic:"NOT_ALLOWED",underline:"NOT_ALLOWED",fontColor:"NOT_ALLOWED",lineHeight:"NOT_ALLOWED"}}}}}),fd,Kg,jf.extend({setting:{config:{standardImageSizeInfo:{width:480,height:270}}}}),ph,bv,Sh,fm,$y.extend({setting:{value:{filterTextStyle:{backgroundColor:"NOT_ALLOWED",subscript:"NOT_ALLOWED",superscript:"NOT_ALLOWED",dropCap:"NOT_ALLOWED"}}}}),Lm,Zm,oy,ay.a,pg,hv,Sv.a,c_,g_,b_,G_,Yv]},q_=function(){function e(){this._eventDispatcher=_.W.get("eventDispatcher")}var t=e.prototype;return t.dispatch=function(e,t,n){return void 0===n&&(n=!1),this._eventDispatcher.dispatch(e,t,n)},t.emit=function(e,t){this._eventDispatcher.emit(e,t)},t.on=function(e,t){this._eventDispatcher.on(e,t)},t.once=function(e,t){this._eventDispatcher.once(e,t)},t.off=function(e,t){this._eventDispatcher.removeListener(e,t)},e}(),J_=n(1135),K_=["selection","dragAndDrop"],X_=[_.O.DONE,_.O.LOADED],Y_=2e3,Q_=200,Z_={FORWARD:"forward",BACKWARD:"backward"},$_=function(e){return e.id},eb=(L_=function(){function e(e){var t=this;void 0===e&&(e={}),this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._componentFactory=_.W.get("componentFactory"),this._eventDispatcherService=_.W.get("eventDispatcherService"),this._history=new _.A(e.maxLength),this._recordingJobs=0,this._state={},this._changeFragments=[],this._incompleteCompIds=new Set,this._cachedComps={},this._inThrottling=!1,this._transaction=!1,this._disposer=Object(J_.a)(this._componentListStore.compList,function(e,n){var i=e.name;K_.includes(i)||t._inTransaction&&t._changeFragments.push({change:e,path:n})}),this._throttledPushState=Object(Go.a)(function(){t._pushState(),t._inThrottling=!1},Y_),this._moveHistoryByDirection=Object(Go.a)(function(e){e===Z_.BACKWARD?t._undo():t._redo()},Q_)}var t=e.prototype;return t.isUndoable=function(){var e=this._history,t=e.currentFrame,n=e.length;return t>0&&t<=n-1},t.isRedoable=function(){var e=this._history,t=e.currentFrame,n=e.length;return t>=0&&t<n-1},t.pushWholeState=function(){this._history.push({compList:this._componentListStore.toPlainJSON(),nextSelection:this._selectionInfoStore.toValidJSON()})},t.resetHistory=function(){this._history.reset()},t.startRecording=function(e){var t=void 0===e?{}:e,n=t.sync,i=void 0===n||n,r=t.throttle,o=void 0!==r&&r,a=t.transaction,s=void 0!==a&&a;this._inThrottling&&!o?this._throttledPushState.flush():this._inTransaction&&!i&&this._pushState(),s&&(this._transaction=!0),this._inThrottling=o,this._recordingJobs++},t.endRecording=function(e){var t=void 0===e?{}:e,n=t.sync,i=void 0===n||n,r=t.skipRecording,o=void 0!==r&&r,a=t.overwriteSelection,s=void 0!==a&&a,c=t.transaction,l=void 0!==c&&c;this._recordingJobs--,o?this._transaction=!1:!l&&this._transaction||(i?this._inThrottling?this._throttledPushState():this._pushState(s):(this._inThrottling&&(this._throttledPushState.cancel(),this._inThrottling=!1),this._pushState(s)),this._transaction=!1)},t._pushState=function(e){if(this._changeFragments.length){if(e)return this._history.currentState.nextSelection=this._selectionInfoStore.toValidJSON(),void(this._changeFragments=[]);this._state.nextSelection=this._selectionInfoStore.toValidJSON(),this._state.compList=this._refineToCompList(this._changeFragments),this._history.push(this._state),this._changeFragments=[],this._state={}}},t._refineToCompList=function(e){var t=this,n=this._history.currentState.compList;return e.reduce(function(e,n){var i=n.path,r=n.change,o=r.index,a=r.addedCount,s=r.removedCount;return""===i?t._mark(e,o,a,s):t._mark(e,i.split("/")[0],0,0),e},[].concat(n)).map(function(e,n){if(null===e){var i=t._componentListStore.compList[n].toPlainJSON(),r=i.id,o=i.phase;return o&&(X_.includes(o)?t._cachedComps[r]=i:t._incompleteCompIds.add(r)),i}return e})},t._mark=function(e,t,n,i){if(void 0===n&&(n=0),void 0===i&&(i=0),0!==n||0!==i){for(var r=[],o=0;o<n;o++)r.push(null);e.splice.apply(e,[t,i].concat(r))}else e[t]=null},t.undo=function(){this._moveHistoryByDirection(Z_.BACKWARD)},t.redo=function(){this._moveHistoryByDirection(Z_.FORWARD)},t._undo=function(){if(this.isUndoable()){this._inThrottling&&this._throttledPushState.flush();var e=this._history.currentState,t=this._history.back(),n=e.compList,i=t.compList,r=t.nextSelection;if(this._replaceIncompleteCompsWithCachedComps(i),tt.a.compareObjectArrayShallowly(n,i))return this._history.removeSpecificState(this._history.currentFrame),void this._undo();this._applyDiffToCompList(n,i),this._updateSelection(r)}},t._redo=function(){if(this.isRedoable()){var e=this._history.currentState,t=this._history.forward(),n=e.compList,i=t.nextSelection,r=t.compList;this._replaceIncompleteCompsWithCachedComps(r),this._applyDiffToCompList(n,r),this._updateSelection(i)}},t._replaceIncompleteCompsWithCachedComps=function(e){var t=this,n=e.reduce(function(e,n){var i=n.id,r=n;return t._incompleteCompIds.has(i)&&!X_.includes(n.phase)&&(r=t._cachedComps[i]),r&&e.push(r),e},[]);e.splice.apply(e,[0,e.length].concat(n))},t._applyDiffToCompList=function(e,t){for(var n=this,i=this._componentListStore.compList,r=t.length,o=0,a=0,s=0;s<r;s++,o++){var c=e[o];if(!c||$_(c)!==$_(t[s])){var l=tt.a.findIndexPairOfSameValue(e,t,o,s,$_),u=l[0],p=l[1],d=p-s,h=u-o,g=t.slice(s,p).map(function(e){return n._createStore(e)});i.splice.apply(i,[o+a,h].concat(g)),o=u,s=p,a+=d-h}e[o]!==t[s]&&(i[o+a]=this._createStore(t[s]))}e[o]&&i.splice(o+a,e.length-o),this._componentListStore.syncUp()},t._createStore=function(e){return this._componentFactory.createComponentWithCompData(e)},t._updateSelection=function(e){var t=e.start,n=e.end,i=e.mode,r=e.compIdMap;this._selectionInfoStore.setRange({start:t,end:n}),i===_.P.MULTI_COMP&&this._selectionInfoStore.setCompIdMap(r)},t.destroy=function(){this._disposer(),this._throttledPushState.cancel(),this._moveHistoryByDirection.cancel(),this._history=null,this._incompleteCompIds=null,this._cachedComps=null},B()(e,[{key:"_inTransaction",get:function(){return this._recordingJobs>0}}]),e}(),k()(L_.prototype,"_undo",[D.d],Object.getOwnPropertyDescriptor(L_.prototype,"_undo"),L_.prototype),k()(L_.prototype,"_redo",[D.d],Object.getOwnPropertyDescriptor(L_.prototype,"_redo"),L_.prototype),L_),tb=n(241),nb=n(115),ib=function(){function e(){this._store=_.W.get("toolbarStore"),this._editorStatusStore=_.W.get("editorStatusStore"),this._styleStore=_.W.get("styleStore"),this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._pluginButtonRegistry=_.W.get("pluginButtonRegistry"),this._configAgent=_.W.get("configAgent"),this._componentSettings=this._configAgent.get("plugins.componentSettings")||{},this._disposerToolbarStates=[]}var t=e.prototype;return t.initialize=function(e,t){this._buttonResolvers=e,this._pluginSettings=t,this._store.setToolbarTypes(this._getToolbarTypes()),this._initializeReaction()},t.destroy=function(){this._disposerReaction&&this._disposerReaction(),Object(c.a)(this._disposerToolbarStates,function(e){return e()}),this._buttonResolvers=null,this._store=null,this._disposerToolbarStates=[],this._disposerReaction=null},t.updateToolbar=function(e){var t=e.toolbarState,n=e.selectedUnitIds,i=e.selectedCompIds,r=Object(jt.a)(this._componentListStore.getSelectedComponents(this._selectionInfoStore));if(r.length>0){var o=this._resolveCtype(r),a=this._resolveButtonSets(this._selectionInfoStore,r,o);this._store.changeSelectedCtype(o),this._store.updateButtonSets(a),this._store.updateToolbarState(t,n,i)}},t.reactionOfToolbarState=function(e,t,n){var i=this,r=Re()({compareStructural:!0},n),o=D.f.reaction(function(){return{buttonSet:i._getButtonSet(t),toolbarState:i._getToolbarState()}},e,r);this._disposerToolbarStates.push(o)},t._initializeReaction=function(){var e=this,t={context:this,compareStructural:!0,delay:50};this._disposerReaction=D.f.reaction(function(){return e._genReactionData()},this.updateToolbar.bind(this),t)},t._getButtonSet=function(e){return this._store.buttonSets[e]},t._getToolbarState=function(){return Re()({componentType:this._store.selectedCtype},this._store.toolbarState)},t._validateButtonSets=function(e,t,n){var i=this,r=[];return Object(c.a)(e,function(e){i._pluginButtonRegistry.getButtonInfo({compType:t,toolbarName:n,buttonName:e})&&r.push(e)}),r},t._excludeButtonsSets=function(e,t,n,i){var r=this._configAgent.get("plugins.components")||[],o=this._configAgent.get("plugins.componentSettings")||{},a=Object(x.a)(t,i+".exclude",[]),s=Object(x.a)(o,n+".config.toolbar."+i+".exclude",[]);return Object(Ze.a)(a)&&Object(Ze.a)(s)||(a=Object(Ir.a)(a,s)),!Object(Ze.a)(a)&&Object(nb.a)(a)&&(e=Object(gr.a)(e,a,this._equalString)),Object(nb.a)(e)&&(e=this._excludeButtonByComponent(e,r),e=this._excludeButtonByFunction(e),e=tt.a.trimForArray(e,"separator-bar")),e},t._getDefaultButtonSetByConfig=function(e,t){return Object(x.a)(this._componentSettings,e+".config.toolbar."+t+".buttonSet")},t._resolveButtonSets=function(e,t,n){var i=this,r={},o=Object(x.a)(this._pluginSettings,n+".toolbar",{});return Object(c.a)(this._buttonResolvers[n],function(a,s){var c=i._getDefaultButtonSetByConfig(n,s),l=a({selectionInfoStore:e,selectedComponents:t,configAgent:i._configAgent,defaultButtonSet:c});l=i._excludeButtonsSets(l,o,n,s),l=i._validateButtonSets(l,n,s);var u=Object(x.a)(o,s+".hook");u&&(l=u(l)),r[s]=l}),r},t._excludeButtonByComponent=function(e,t){return void 0===e&&(e=[]),e.filter(function(e){return"separator-bar"===e||!t.some(function(t){return new RegExp(t,"i").test(e)})})},t._excludeButtonByFunction=function(e){void 0===e&&(e=[]);var t=[];return!1===this._configAgent.get("productConfig.textFormat.list")&&t.push("list"),Object(gr.a)(e,t)},t._equalString=function(e,t){return e===t},t._resolveCtype=function(e){if(this._selectionInfoStore.shouldBlur)return"none";var t=Object(x.a)(e,"[0].ctype",""),n=!0,i=!1,r=!1;return Object(c.a)(e,function(e){var o=e.ctype;"text"===o?i=!0:"sectionTitle"===o?r=!0:o!==t&&(n=!1)}),i?"text":r?"sectionTitle":n?t:"default"},t._getToolbarTypes=function(){var e=[];return Object(c.a)(this._buttonResolvers,function(t){t&&e.push.apply(e,Object.keys(t))}),Object(tb.a)(e)},t._genReactionData=function(){var e=this._selectionInfoStore,t=e.start,n=e.end;return{viewMode:this._editorStatusStore.viewMode,toolbarState:this._styleStore.currentSelectedStyle,selectedUnitIds:[t.unitId,n.unitId],selectedCompIds:[t.compId,n.compId]}},e}(),rb=function(){function e(){this._selectionInfoStore=_.W.get("selectionInfoStore"),this._documentService=_.W.get("documentService"),this._clipboard=_.W.get("clipboard"),this._configAgent=_.W.get("configAgent"),this._userId=this._configAgent.get("userInfo.userId"),this._convertedDocumentAPI=this._configAgent.get("apiInfo.fetchConvertedDocument"),this._convertedHtmlAPI=this._configAgent.get("apiInfo.fetchConvertedHtml"),this._documentWidth=this._configAgent.get("productConfig.documentWidth"),this._pasteWithoutStyle=this._configAgent.get("productConfig.pasteWithoutStyle"),this._convertLimitSize=this._configAgent.get("editorInfo.convertLimitSize")}var t=e.prototype;return t.copy=function(e,t){var n=void 0===t?{}:t,i=n.targets,r=n.html,o=n.text;if(!this._selectionInfoStore.collapsed){var a=i.map(function(e){return e.toValidJSON({fromCopy:!0})}),s=this._documentService.getDocumentId();return this._clipboard.set(e,{docId:s,copyData:a,html:r,text:o}),a}},t.parseResourceByEvent=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isCopiedEditorData&&!this._isCaptureImage){e.next=2;break}return e.abrupt("return",null);case 2:return n=this._clipboard.getClipboardData(),i=n.getHTMLClipboardData(t),e.next=6,this._getConvertedResources(i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.parseText=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!1),i=this._clipboard.getClipboardData(),r=i.getPlainTextClipboardData(t),o=wt.a.replaceSpecialChar(r),e.next=6,this._getConvertedText(o,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.parseTextByPastedData=function(){var e=Tt()(It.a.mark(function e(t,n){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!1),e.next=3,this._getConvertedText(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._getConvertedText=function(){var e=Tt()(It.a.mark(function e(t,n){var i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.replace(/ /g,"&nbsp;"),i=(i=bi.a.convertURL2Anchor(t)).replace(/\n|\r\n/g,"<br>"),e.next=5,this._getConvertedResources(i,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.parseResourceByPastedData=function(){var e=Tt()(It.a.mark(function e(t,n){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),!this._isCopiedEditorData&&!this._isCaptureImage){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,this._getConvertedResources(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._getConvertedResources=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o,a;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),""!==t.trim()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this._getConvertedHtml(t);case 5:if((i=e.sent)&&i.length&&(this._pasteWithoutStyle&&dp.a.dropProperty(i,["style","backgroundColor","borderInlineStyle"]),r=this._clipboard.convertJsonToComponent("",i,n)),r){e.next=9;break}return e.abrupt("return",null);case 9:return o=this._getUrlLinkValue(r),a=this._getDataURIImage(r),e.abrupt("return",{sourceComponents:r,url:o,dataURIImage:a});case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.checkClipboardData=function(e){var t=this._clipboard.checkClipboardData(e),n=t.isCaptureImage,i=t.isCopiedEditorData,r=t.isOldEditorData,o=t.isOnlyText;return this._isCaptureImage=n,this._isCopiedEditorData=i,{isCaptureImage:n,isCopiedEditorData:i,isOldEditorData:r,isOnlyText:o}},t.getHTMLClipboardData=function(e){return this._clipboard.getHTMLClipboardData(e)},t.isOldEditorData=function(e){return this._clipboard.isOldEditorData(e)},t.isCopiedEditorData=function(e){return this._clipboard.isCopiedEditorData(e)},t.isIECaptureImage=function(e){return/^<img src="data:image.+>$/g.test(e)},t.getOldEditorData=function(){var e=Tt()(It.a.mark(function e(t){var n,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._clipboard.extractOldEditorData(t),e.next=3,this._getConvertedDocument(n);case 3:if(!(i=e.sent)||!i.length){e.next=6;break}return e.abrupt("return",this._clipboard.convertJsonToComponent("",i,!0));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.getCopiedEditorData=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._clipboard.getCopiedEditorData();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getClipboardData=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._clipboard.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._getConvertedDocument=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:{components:t},options:{simpleRequestForced:!0},success:function(e){return e.document.components},error:function(){throw new Error(Ha)}},e.next=3,Gt.a.post(this._convertedDocumentAPI+"?userId="+this._userId,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._getConvertedHtml=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isValidSize(t)){e.next=2;break}throw new Error(Ga);case 2:return n={data:t,options:{headers:{"Content-Type":"text/plain"},simpleRequestForced:!0},success:function(e){return r._documentService.convertComponents(e)},error:function(){throw new Error(Ha)}},i=this._convertedHtmlAPI+"?documentWidth="+this._documentWidth+"&userId="+this._userId,e.next=6,Gt.a.post(i,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._getUrlLinkValue=function(e){var t=e.filter(function(e){return"text"===e.ctype&&e.isOnlyUrlLink()});if(1===t.length)return t[0].getText().getFirstParagraph().getFirstNode().getUrlValue()},t._getDataURIImage=function(e){if(1!==e.length)return[];var t=e[0];return"image"===t.ctype&&bi.a.isDataURIImage(t.src)?t.src:void 0},t._isValidSize=function(e){return new Blob([e]).size<=this._convertLimitSize},e}(),ob=n(726),ab=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._domAccessor=_.W.get("domAccessor")}var t=e.prototype;return t.execute=function(e){e.targetComp,e.targetStore,e.viewportProps},t._getObjectInsertDirection=function(e,t){var n=e.clientY,i=this._domAccessor.getComponentElement(t.id),r=i.getBoundingClientRect().top,o=i.offsetHeight/2+r,a=n<o,s=this._isOnGrayZone(i,o,n);if(a){var c=n<r;return{direction:_.x.TOP,grayZonePlaced:s,isOnEdge:c}}var l=n>r+i.offsetHeight;return{direction:_.x.BOTTOM,grayZonePlaced:s,isOnEdge:l}},t._isOnGrayZone=function(e,t,n){var i=.3*e.offsetHeight;return t-i<n&&t+i>n},t._isItemBottom=function(e,t){var n=this._componentListStore.getPrevComponent(e);return!!n&&t.some(function(t){return t===e.id||n&&t===n.id})},t._isItemTop=function(e,t){var n=this._componentListStore.getNextComponent(e);return t.some(function(t){return t===e.id||n&&t===n.id})},e}(),sb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.type,n=e.items,i=e.dropPoint,r=this._selectionInfoStore,o=r.start,a=r.end,s=["external-file","aside","template","library"].includes(t),c=this._componentListStore.isBackward(o,i),l=this._componentListStore.isBackward(i,a);return!s&&c&&l?null:{type:t,items:n,insertCommand:"text",insertPoint:i,direction:_.x.TEXT}},t}(ab),cb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.type,n=e.items,i=e.dropPoint,r=e.targetStore,o=!1,a=!1;return n.forEach(function(e){e.attributes&&"text"===e.attributes.drop&&(a=r.checkTextByFilter(e.getPlainTextWithEmoji()),o=!0)}),a||!o?null:Object($e.a)(this._selectionInfoStore.start,i)||Object($e.a)(this._selectionInfoStore.end,i)?null:{type:t,items:n,insertCommand:"only-text",insertPoint:i,direction:_.x.TEXT}},t}(ab),lb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.viewportProps,n=e.type,i=e.items,r=e.dropPoint,o=e.targetComp,a=e.isInsideType,s=this._getObjectInsertDirection(t,o).direction,c=a?Object.keys(this._selectionInfoStore.compIdMap):[];return s===_.x.TOP?this._componentListStore.isFirstComponent(i[0])?null:this._isItemBottom(o,c)?null:{type:n,items:i,insertPoint:r,insertCommand:"prepend",direction:s}:s===_.x.BOTTOM?this._isItemTop(o,c)?null:{type:n,items:i,insertPoint:r,insertCommand:"append",direction:s}:void 0},t}(ab),ub=["type","items","dropPoint","targetComp","viewportProps","isInsideType"],pb=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.execute=function(e){var t=e.type,n=e.items,i=e.dropPoint,r=e.targetComp,o=e.viewportProps,a=e.isInsideType,s=Me()(e,ub),c=this._getObjectInsertDirection(o,r),l=c.direction,u=c.isOnEdge,p=c.grayZonePlaced,d={type:t,items:n},h=a?Object.keys(this._selectionInfoStore.compIdMap):[],g=this._isComponentIncluded(r,h),f=l===_.x.TOP&&this._isItemBottom(r,h),m=l===_.x.BOTTOM&&this._isItemTop(r,h);if((f||m)&&!g&&!1===("image"===t&&p)&&!(1===n.length&&n[0].id!==h[0]))return null;var y=r.queryDragAndDrop(Re()({type:t,items:n,viewportProps:o,dropPoint:i,insertDirection:l,itemIds:h,focus:this._selectionInfoStore.focus,isOnEdge:u},s));return y?(d.insertPoint=y.insertPoint,d.insertCommand=y.insertCommand,d.direction=y.direction,d):null},n._isComponentIncluded=function(e,t){return t.some(function(t){return t===e.id})},t}(ab),db={},hb={getCommand:function(e){if(db[e])return db[e];var t=this._createInstance(e);return db[e]=t,t},destroy:function(){Object(c.a)(db,function(e,t){db[t]=null})},_createInstance:function(e){switch(e){case"text":return new sb;case"only-text":return new cb;case"query":return new pb;case"object":default:return new lb}}},gb=(E_=function(){function e(){this._i18n=_.W.get("i18n"),this._configAgent=_.W.get("configAgent"),this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._virtualEditable=_.W.get("virtualEditable"),this._domAccessor=_.W.get("domAccessor"),this._dragAndDropStore=_.W.get("dragAndDropStore"),this._themeStore=_.W.get("themeStore"),this._componentFactory=_.W.get("componentFactory"),this._prevDragOverPosition={},this._dragGhost=_.W.get("dragGhost"),this._dragEnterCount=0}var t=e.prototype;return t.destroy=function(){hb.destroy()},t.getBackgroundImageData=function(e){var t=this._configAgent.get("editorInfo"),n=this._configAgent.get("infraInfo.photoInfra.imageHost"),i=e.animatedCnt>1?"animated":"normal";return this._componentFactory.createComponentWithCompData({ctype:"image",src:""+n+e.url+"?type="+t.thumbnailType.normal,internalResource:!0,caption:null,domain:n,path:e.path+"/"+e.fileName,displayFormat:i,format:i,width:parseInt(e.width,10),height:parseInt(e.height,10),fileSize:parseInt(e.fileSize,10),allowVR360OrPanorama:!1})},t.reset=function(){this._dragEnterCount=0,this._dragAndDropStore.reset()},t.setItem=function(e,t){this._dragAndDropStore.setItem(e,t),this._dragAndDropStore.progress="dragging"},t.dragStart=function(e){var t=e.event,n=e.items,i=e.type,r=e.useNativeGhost,o=e.dropCallback,a=i||this._getDragType(n);this._dragAndDropStore.setItems(n,a,o),this._dragAndDropStore.progress="start",this._dragGhost.start({event:t,items:n,type:a,useNativeGhost:r,themeName:this._themeStore.themeName,isInsideType:this._dragAndDropStore.isInsideType,callback:this._dragGhostStartCallback})},t._dragGhostStartCallback=function(e){e.dataTransfer.setDragImage||this.hideIENativeDragGhost(e.target)},t.dragEnter=function(e){"none"===this._dragAndDropStore.progress&&(this._setExternalContents(e),this._dragAndDropStore.progress="start",this._virtualEditable.dragStart()),this._dragEnterCount++},t.dragLeave=function(){this._dragEnterCount--,0===this._dragEnterCount&&this._dragAndDropStore.isExternalType&&(this._virtualEditable.dragEnd(),this.reset())},t.dragOver=function(e,t){if(this._dragGhost.updatePosition(e),t)if("external-complex"!==this._dragAndDropStore.type){var n=this._getCommandParams(e);if(!this._isSamePosition(e)&&null!==n){var i=hb.getCommand(Object(x.a)(n.targetStore,"attributes.drop")).execute(n);i?this._drag(i):this._hideDropIndicator()}}else this._hideDropIndicator()},t._setExternalContents=function(e){e&&(Object(ob.a)(e.types,"Files")>-1?this._dragAndDropStore.setItem({ctype:"externalFile"},"external-file"):this._dragAndDropStore.setItem({ctype:"externalContents"},"external-complex"))},t._hideDropIndicator=function(){this._dragAndDropStore.progress="undroppable",this._virtualEditable.hideDropIndicator()},t._drag=function(e){var t=e.direction,n=e.insertPoint;this._dragAndDropStore.progress="dragging",this._dragAndDropStore.dropPosition=this._modulateDropPosition({direction:t,point:n}),t===_.x.TEXT?this._virtualEditable.showDropIndicator():this._virtualEditable.hideDropIndicator()},t._modulateDropPosition=function(e){var t=e.direction,n=e.point;if(t===_.x.DOCUMENT_BACKGROUND)return{direction:t,point:{compId:n.compId,unitId:n.compId}};if(t!==_.x.BOTTOM)return e;var i=this._componentListStore.getNextComponentById(n.compId);return i?(n.compId=i.id,n.unitId=i.id,{direction:_.x.TOP,point:n}):{direction:_.x.CANVAS_BOTTOM,point:null}},t._isSamePosition=function(e){var t={screenX:e.screenX,screenY:e.screenY};return!0===Object($e.a)(this._prevDragOverPosition,t)||(this._prevDragOverPosition=t,!1)},t.drop=function(e){this._dragGhost.end();var t=this._dragAndDropStore,n=t.type,i=t.items,r=t.dropCallback,o=this._getCommandParams(e);if(o){var a=["aside","library","template"].includes(n)?this._generateComponentStoreList(i):i;o.items=a,this.reset();var s=this._shouldSkipDrop(o,n);if(s.skipDrop)return s;var c=hb.getCommand(Object(x.a)(o.targetStore,"attributes.drop")).execute(o);if(c){var l=Re()({items:c.items||o.items,targetCtype:o.targetComp.ctype,targetCompId:o.targetComp.id},c);return r&&r(l),l}return null}},t.filterImageFiles=function(e){if("external-file"===this._dragAndDropStore.type){var t=this._filterExternalFiles(e);return this._updateImageFilesToItem(t.imageFiles),t}},t.dragClear=function(){this._dragGhost.end(),this.reset()},t._shouldSkipDrop=function(e,t){if(null===e||0===e.items.length)return{skipDrop:!0};var n=e.dropPoint,i=e.items;return"text"===t&&this._hasInlineImageOnly(i)&&this._hasDropCap(n)?{skipDrop:!0,errorMsg:this._i18n("textComponent:can_not_insert_point_in_dropcap")}:"external-complex"===t?{skipDrop:!0}:{skipDrop:!1}},t._hasInlineImageOnly=function(e){return e.filter(function(e){return"text"===e.attributes.insertion}).some(function(e){return e.hasInlineImageOnly()})},t._hasDropCap=function(e){var t=e.compId,n=e.paraId,i=this._componentListStore.getComponentById(t);return"text"===i.attributes.insertion&&i.hasDropCapInParagraph(n)},t._getCommandParams=function(e){var t=this._virtualEditable.getCurrentCursorPosition();if(!t)return null;var n=t.start,i=this._componentListStore.getComponentById(n.compId);if(!i)return null;var r=this._dragAndDropStore,o=r.items,a=r.type,s=r.dropPosition,c=r.isInsideType,l=["library","aside"].includes(a)&&o.length&&"image"===o[0].ctype,u="external-file"===a||l;return{viewportProps:e,items:o,type:a,dropPoint:n,targetComp:i,targetStore:"documentTitle"===i.ctype&&u||s.direction===_.x.CANVAS_BOTTOM?i:i.getStoreById(n.unitId),isInsideType:c}},t._generateComponentStoreList=function(e){var t=this;return e.map(function(e){return t._componentFactory.createComponentWithCompData(e)})},t._getDragType=function(e){var t=e&&e.length||0,n=["text","sectionTitle"],i=["oembed"],r=Object(up.a)(e,function(e){return!n.includes(e.ctype)}),o=Object(up.a)(e,function(e){return i.includes(e.ctype)});return r?o?"iframe":1===t?"image"===e[0].ctype?"image":"object":"complex":"text"},t._updateImageFilesToItem=function(e){this._dragAndDropStore.setItems(e,"external-file")},t._filterExternalFiles=function(e){var t=[],n=[],i=e.files,r=this._configAgent.get("infraConfig.image.acceptExt")||Ma.a.DEFAULT_IMAGE_ACCEPT_LIST;return Object(c.a)(i,function(e){Ma.a.isAcceptable(e,r)?n.push(e):t.push(e)}),{imageFiles:n,nonImageFiles:t}},t._trickyRefreshDOM=function(e){var t=e.cloneNode(!0);Array.from(t.querySelectorAll(".se-toolbar")).forEach(function(e){e.parentElement.removeChild(e)});var n=e.style.display;e.parentNode.insertBefore(t,e),e.style.display="none",window.setTimeout(function(){e.parentNode.removeChild(t),e.style.display=n},0)},t._getRefreshTargetFromSelection=function(){var e=Object.keys(this._selectionInfoStore.compIdMap);if(e.length>0){var t=this._domAccessor.getComponentElement(e[0]);return 1===e.length?t:t.parentNode}},t.hideIENativeDragGhost=function(e){var t=this._dragAndDropStore.isOutsideType?e:this._getRefreshTargetFromSelection();t&&this._trickyRefreshDOM(t)},t.isAleadyDragStart=function(){return"start"===this._dragAndDropStore.progress},t.isDragging=function(){return this._dragAndDropStore.isDragging},t.isUpdateReadySelection=function(){return this._dragAndDropStore.updateReadySelection},t.setUpdateReadySelection=function(e){this._dragAndDropStore.updateReadySelection=e},t.disable=function(){this._dragAndDropStore.disable()},t.enable=function(){this._dragAndDropStore.enable()},e}(),k()(E_.prototype,"_dragGhostStartCallback",[te.autobind],Object.getOwnPropertyDescriptor(E_.prototype,"_dragGhostStartCallback"),E_.prototype),E_),fb=n(24),mb=320,yb=function(){function e(){var e=this;this._getScrollBottomOffset=Object(fb.a)(function(){var t=e._domAccessor.querySelector(".se-canvas-bottom");if(t){var n=t.getBoundingClientRect().height;return void 0===n?mb:n}return mb}),this._configAgent=_.W.get("configAgent"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._componentListStore=_.W.get("componentListStore"),this._componentFactory=_.W.get("componentFactory"),this._virtualEditable=_.W.get("virtualEditable"),this._domAccessor=_.W.get("domAccessor"),this._isMobile="mobile"===this._configAgent.get("productEnv.deviceType");var t=this._configAgent.get("productConfig.scroll.targetElement");this._autoScroll=this._isMobile||t&&t===document.body?_.W.get("scrollBody"):_.W.get("scrollCanvas"),this._documentOverflows=[]}var t=e.prototype;return t.focusTitle=function(){var e=this._componentListStore.getComponentByCtype("documentTitle");if(e){var t=e.getFirstTextSelection();this._selectionInfoStore.setRange(t)}},t.focusFirstText=function(){var e=this._componentListStore.getComponentByCtype("text")||this._componentListStore.getComponentByCtype("sectionTitle");if(e){var t=e.getFirstTextSelection();this._selectionInfoStore.setRange(t)}},t.focusToInitialCursorIndex=function(){var e=this,t=Number(this._configAgent.get("productConfig.scroll.initialFocusIndex"));Number.isInteger(t)&&this._componentListStore.getComponentByIndex(t)?this.focusToCompByIndex(t):this.focusToFirstComp(),this._isMobile&&setTimeout(function(){e._virtualEditable.blur()},150)},t.focusToFirstComp=function(){var e=this._componentListStore.filter(function(e){return"documentTitle"!==e.ctype}),t=e[0];if(0===e.length){var n=this._componentFactory.createComponentByCtype("text");this._componentListStore.insertComponent(n),t=n}var i=t.getCompStartRange();this._selectionInfoStore.setRange(i)},t.focusToLastComp=function(){var e=this._componentListStore.getLastComponent().getEndPoint();this._selectionInfoStore.setRange({start:e,end:e})},t.focusToCompByIndex=function(e){var t=this._componentListStore.getComponentByIndex(e).getCompStartRange();this._selectionInfoStore.setRange(t)},t.moveToComponentById=function(e){var t=this._componentListStore.getComponentById(e);this._selectionInfoStore.setRange(t.getCompStartRange()),this.scrollToFocus(!0)},t.moveCursorTo=function(e,t){this._virtualEditable.moveCursor(e,t),this.scrollToFocus()},t.extendCursorTo=function(e,t){this._virtualEditable.extendCursor(e,t),this.scrollToFocus()},t.refreshCursorWithScroll=function(){this._virtualEditable.refresh(),this.scrollToFocus()},t.scrollToFocus=function(e){return this._virtualEditable.scrollToFocus(e)},t.scrollToClientRect=function(e,t){return this._virtualEditable.scrollToClientRect(e,t)},t.scrollToTop=function(){var e=this._domAccessor.getScrollTarget();Jr.a.setScrollTop(e,{top:0})},t.forceStopAutoScroll=function(){this._autoScroll&&this._autoScroll.forceStopAutoScroll()},t.scrollPage=function(e){this._autoScroll&&this._autoScroll.scrollPage(e)},t.scrollToAdjustedCursor=function(){var e=this._virtualEditable.getClientRects(),t=Object($r.a)(e),n=Object(At.a)(e),i=this._getScrollBottomOffset(),r=this._scrollHeight-i;return t.bottom-n.top>=r&&(n.top=t.bottom-r),this.scrollToClientRect({top:n.top,bottom:t.bottom},!0)},t.shouldPositionFixedPhotoEditor=function(){return this._shouldHideWindowScroll()},t._shouldHideWindowScroll=function(){var e=this._configAgent.get("productConfig.layoutType").toLowerCase()===_.I.EMBED,t=this._domAccessor.getScrollTarget(document.body)===document.body;return e||t},t.hideWindowScroll=function(){this._shouldHideWindowScroll()&&(this._documentOverflows.push(document.documentElement.style.overflow),document.documentElement.style.overflow="hidden")},t.restoreWindowScroll=function(){this._documentOverflows.length<1||(document.documentElement.style.overflow=this._documentOverflows.pop())},B()(e,[{key:"_scrollHeight",get:function(){var e=this._domAccessor.getWrapper();return e?e.getBoundingClientRect().height:document.documentElement.clientHeight}}]),e}(),vb=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this._domAccessor=_.W.get("domAccessor"),this._documentToolbarLayoutService=_.W.get("documentToolbarLayoutService")}var t=e.prototype;return t._getEditorWrapper=function(){return this._domAccessor.getBodyContainer()},t.isInsideEditorWrapper=function(e){return this._getEditorWrapper().contains(e)},t._getOutsideTabbable=function(){return this._outsideTabbable||(this._outsideTabbable=Jr.a.getTabbableNearby(this._getEditorWrapper())),this._outsideTabbable},t.focusToOutsidePrevTabbable=function(){this._virtualEditable.blur(),this._getOutsideTabbable().prev.focus()},t.focusToOutsideNextTabbable=function(){this._virtualEditable.blur(),this._getOutsideTabbable().next.focus()},t.focusToEditable=function(){this._virtualEditable.focus()},t.focusToToolbar=function(){this._virtualEditable.blur(),this._documentToolbarLayoutService.focusFirstButton()},e}(),_b=n(139),bb=n.n(_b),Sb=n(828),Cb=n(110),Ib=n(1056),Ob=(P_=D.g.ref,w_=D.g.ref,k_=function(e){function t(t){var n;return void 0===t&&(t={}),n=e.call(this,t)||this,L()(n,"start",x_,P()(n)),L()(n,"end",D_,P()(n)),L()(n,"shouldBlur",A_,P()(n)),L()(n,"compIdMap",j_,P()(n)),L()(n,"handle",R_,P()(n)),n.imeOffset=0,n._anchorRef="start",n._componentListStore=_.W.get("componentListStore"),n.start=Object(lp.a)(n.start,t.start),n.end=Object(lp.a)(n.end,t.end),n.compIdMap=Object(lp.a)(n.compIdMap,t.compIdMap),n.handle="boolean"==typeof t.handle?t.handle:n.handle,n.imeOffset=Object(lp.a)(n.imeOffset,t.imeOffset),n}S()(t,e);var n=t.prototype;return n.setRange=function(e,t){if(void 0===e&&(e={}),void 0===t&&(t=!1),"object"==typeof e&&(e.start||e.end)){this._setRange(e,t);var n=this._findSelectCompIdsFromRange(this.start,this.end);this._updateSelectedCompMap(n)}},n.setFocus=function(e){this._setFocus(e);var t=this._findSelectCompIdsFromRange(this.start,this.end);this._updateSelectedCompMap(t)},n.setAnchor=function(e){this._setAnchor(e);var t=this._findSelectCompIdsFromRange(this.start,this.end);this._updateSelectedCompMap(t)},n.setAnchorAndFocus=function(t){var n=void 0===t?{}:t,i=n.anchor,r=n.focus;e.prototype.setAnchorAndFocus.call(this,{anchor:i,focus:r});var o=this._findSelectCompIdsFromRange(this.start,this.end);this._updateSelectedCompMap(o)},n.select=function(e){this._select(e)},n.selectUnit=function(e){var t=e.compId,n=e.unitId;this.setRange({start:{compId:t,unitId:n,paraId:null,nodeId:null,offset:0},end:{compId:t,unitId:n,paraId:null,nodeId:null,offset:1}})},n.toggleSelect=function(e){if(!1===this.isComponentMode()){var t=[e];this._select(t)}else if(this.isSelected(e))this._deselect(e);else{var n=this._getSelectedIds().concat(e);this._select(n)}},n.isSelected=function(e){return this.compIdMap[e]},n.setShouldBlur=function(e){void 0===e&&(e=!1),this.shouldBlur=e},n._findSelectCompIdsFromRange=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=this._componentListStore.getComponentIds()||[],i=n.indexOf(e.compId),r=n.indexOf(t.compId);return n.slice(i,r+1)},n._updateSelectedCompMap=function(e){var t=this,n={};e.forEach(function(e){var i=t._componentListStore.getComponentById(e),r=i.ctype;n[e]={ctype:r,isComponentSelectable:i.isSelectable}}),this.compIdMap=n},n._select=function(e){this._updateSelectedCompMap(e);var t=this._findStartAndEnd(e),n=t.start,i=t.end;this.setStart(n),this.setEnd(i)},n._deselect=function(e){if(1!==Object.keys(this.compIdMap).length||!this.isSelected(e)){this._removeIdInCompIdMap(e);var t=this._findStartAndEnd(this._getSelectedIds()),n=t.start,i=t.end;this.setStart(n),this.setEnd(i)}},n._getSelectedIds=function(){return Object.keys(this.compIdMap)},n._removeIdInCompIdMap=function(e){this.compIdMap[e]=void 0,delete this.compIdMap[e]},n._findStartAndEnd=function(e){var t=this,n=this._componentListStore.getCompListLength(),i=0;e.forEach(function(e){t._componentListStore.forEach(function(t,r){e===t.id&&(n>r&&(n=r),i<r&&(i=r))})});var r=this._componentListStore.getComponentByIndex(n),o=this._componentListStore.getComponentByIndex(i);return{start:r?r.getStartPoint():o.getStartPoint(),end:o?o.getEndPoint():r.getEndPoint()}},n.toValidJSON=function(){return{start:D.f.toJS(this.start),end:D.f.toJS(this.end),compIdMap:this.compIdMap,imeOffset:this.imeOffset,collapsed:this.collapsed,mode:this.mode,anchor:D.f.toJS(this.anchor),focus:D.f.toJS(this.focus),isUnitSelected:this.isUnitSelected}},n.toPlainJSON=function(){return{start:D.f.toJS(this.start),end:D.f.toJS(this.end),compIdMap:this.compIdMap,imeOffset:this.imeOffset,collapsed:this.collapsed,mode:this.mode,anchor:D.f.toJS(this.anchor),focus:D.f.toJS(this.focus),isUnitSelected:this.isUnitSelected}},n.reaction=function(e,t){var n=this;D.f.reaction(function(){return{start:n.start,end:n.end}},e,t)},t}(Ib.a),x_=k()(k_.prototype,"start",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{compId:null,unitId:null,paraId:null,nodeId:null,offset:0}}}),D_=k()(k_.prototype,"end",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{compId:null,unitId:null,paraId:null,nodeId:null,offset:0}}}),A_=k()(k_.prototype,"shouldBlur",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j_=k()(k_.prototype,"compIdMap",[P_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),R_=k()(k_.prototype,"handle",[w_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k()(k_.prototype,"setRange",[D.d],Object.getOwnPropertyDescriptor(k_.prototype,"setRange"),k_.prototype),k()(k_.prototype,"setFocus",[D.d],Object.getOwnPropertyDescriptor(k_.prototype,"setFocus"),k_.prototype),k()(k_.prototype,"setAnchor",[D.d],Object.getOwnPropertyDescriptor(k_.prototype,"setAnchor"),k_.prototype),k()(k_.prototype,"setAnchorAndFocus",[D.d],Object.getOwnPropertyDescriptor(k_.prototype,"setAnchorAndFocus"),k_.prototype),k()(k_.prototype,"select",[D.d],Object.getOwnPropertyDescriptor(k_.prototype,"select"),k_.prototype),k()(k_.prototype,"selectUnit",[D.d],Object.getOwnPropertyDescriptor(k_.prototype,"selectUnit"),k_.prototype),k()(k_.prototype,"toggleSelect",[D.d],Object.getOwnPropertyDescriptor(k_.prototype,"toggleSelect"),k_.prototype),k_),Tb={},Lb=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore")}e.getInstance=function(){var e=Tb[this.name];return e||(e=new(Function.prototype.bind.apply(this)),Tb[this.name]=e,e)};var t=e.prototype;return t.execute=function(e,t){},t._getSourceComponentsRange=function(e){return{start:this._getSourceComponentsStartPoint(e),end:this._getSourceComponentsEndPoint(e)}},t._getSourceComponentsStartPoint=function(e){return Object(At.a)(e).getCompStartPoint()},t._getSourceComponentsEndPoint=function(e){return Object($r.a)(e).getCompEndPoint()},e}(),Eb="replace_empty_text",Pb="replace_empty_para",wb="prepend_to_text",kb="prepend_to_para",xb="split",Db="append_to_para",Ab="append_to_text",jb=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.execute=function(e){var t=e.sourceComponents,n=e.selectionInfo,i=e.disableMerge,r=void 0!==i&&i,o=n.start;this._hasDropCap(o)&&this._filterTextNodeInComp(t);var a=this._getSourceComponentsRange(t),s=this._splitTextComponent(o),c=s.frontTextComp,l=s.backTextComp,u=this._determineInsertionType(c,l),p=this._componentListStore.getComponentIndex(c.id),d=!1;switch(u){case Eb:this._componentListStore.replaceBetween(c,l,t);break;case Pb:this._componentListStore.insertComponentAfter(c,t),c.isEmpty()?this._componentListStore.deleteComponentById(c.id):c.removeLastParagraph(),l.isEmpty()?this._componentListStore.deleteComponentById(l.id):l.removeFirstParagraph();break;case wb:this._componentListStore.deleteComponentById(c.id);var h=this._prependSourcesToBackTextComp(l,t);Object.assign(a,h);break;case kb:c.removeLastParagraph();var g=this._prependSourcesToBackTextComp(l,t);Object.assign(a,g);break;case xb:d=this._isFirstListComp(t),a=this._splitInsertion(c,l,t);break;case Db:l.removeFirstParagraph(),d=this._isFirstListComp(t);var f=this._appendSourcesToFrontTextComp(c,t,r);Object.assign(a,f);break;case Ab:this._componentListStore.deleteComponentById(l.id),d=this._isFirstListComp(t);var m=this._appendSourcesToFrontTextComp(c,t,r);Object.assign(a,m)}return d&&(a.start=this._refineApppendPoint(p,a.start)),a},n._filterTextNodeInComp=function(e){e.forEach(function(e){"text"===e.attributes.insertion&&e.hasInlineImageInParagraph()&&e.stripOffNonTexts()})},n._hasDropCap=function(e){var t=e.compId,n=e.paraId,i=this._componentListStore.getComponentById(t);return"text"===i.attributes.insertion&&i.hasDropCapInParagraph(n)},n._splitTextComponent=function(e){var t=this._componentListStore.splitComponentByPoint(e);return{frontTextComp:t.front,backTextComp:t.back}},n._determineInsertionType=function(e,t){var n=t.isEmpty(),i="wrappingParagraph"===e.ctype;if(i&&n)return Ab;if(i)return xb;var r=e.isEmpty(),o=e.isLastParagraphEmpty(),a=t.isFirstParagraphEmpty(),s=e.getLastParagraph().isListParagraph(),c=o&&!s;return r&&n?Eb:c&&a?Pb:r?wb:n?Ab:c?kb:a?Db:xb},n._prependSourcesToBackTextComp=function(e,t){var n=e.prepend(t),i=n.components,r=n.point;return this._componentListStore.replace(e,i),1===i.length?{start:e.getCompStartPoint(),end:r}:{end:r}},n._splitInsertion=function(e,t,n){var i,r=e.getParagraphsLength(),o=t.getParagraphsLength(),a=e.append(n),s=a.components,c=a.point;if(1===s.length){i=e.getOffsetInParagraph(c);var l=t.getText().getFirstParagraph();l.isEmpty()&&l.isListParagraph()&&l.resetStyle();var u=e.append([t]).point;return this._componentListStore.replaceBetween(e,t,n),{start:c,end:u}}var p=t.prepend(s),d=p.components,h=p.point;if(this._componentListStore.replaceBetween(e,t,d),1===d.length){c.compId=h.compId,c.unitId=h.unitId;var g=d[0];if(r+o>g.getParagraphsLength()){c.paraId=h.paraId;var f=g.getNodeInfoAfterOffset(c,i),m=f.node,y=f.offset;c.nodeId=m.id,c.offset=y}}return{start:c,end:h}},n._isFirstListComp=function(e){var t=e&&e.length>0?e[0]:null,n=t&&"text"===t.ctype?t.getFirstParagraph():null;return!!n&&n.isListParagraph()},n._refineApppendPoint=function(e,t){var n=this._componentListStore.getComponentByIndex(e);if("text"!==n.ctype&&"wrappingParagraph"!==n.ctype)return t;var i=n.getText(),r=i.getParagraphById(t.paraId),o=i.getNextParagraph(t.paraId);return!1===r.isEmpty()?t:(i.removeParagraph(t.paraId),Object(wl.a)(t,o.getStartPoint()))},n._appendSourcesToFrontTextComp=function(e,t,n){var i=e.append(t,n),r=i.components,o=i.point;return this._componentListStore.replace(e,r),1===r.length?{start:o,end:e.getCompEndPoint()}:{start:o}},t}(Lb),Rb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.sourceComponents,n=e.selectionInfo.end,i=this._componentListStore.getComponentById(n.compId);return this._componentListStore.insertComponentAfter(i,t),this._getSourceComponentsRange(t)},t}(Lb),Nb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.sourceComponents,n=e.selectionInfo.start,i=this._componentListStore.getComponentById(n.compId);return this._componentListStore.insertComponentBefore(i,t),this._getSourceComponentsRange(t)},t}(Lb),Mb=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.execute=function(e){var t=e.sourceComponents,n=e.selectionInfo,i=n.start,r=n.end,o=i.compId,a=this._componentListStore.getComponentById(o).getStoreById(i.unitId),s=this._getOnlyTextFrom(t);if(!s||s.isEmpty())return{start:i,end:r};var c=a.mergeWith(s,{mergePoint:i,isAttach:!0});return c.start.compId=o,c.end.compId=o,c},n._getOnlyTextFrom=function(e){var t=null;return e.forEach(function(e){if("text"===e.attributes.insertion){var n=e.filterOnlyTexts();t?t.append(n):t=n}}),t},t}(Lb),Bb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.sourceComponents,n=e.selectionInfo,i=e.additionalInfo,r=n.start,o=this._componentListStore.getComponentById(r.compId),a=o.merge(t,r,i),s=a.components,c=a.range;if(this._componentListStore.replace(o,s),c)return c;if(1!==s.length)return this._getSourceComponentsRange(t);var l=s[0];return{start:l.getCompStartPoint(),end:l.getCompEndPoint()}},t}(Lb),Wb={},Ub={getCommand:function(e){if(Wb[e])return Wb[e];var t=this._createInstance(e);return Wb[e]=t,t},destroy:function(){Object(c.a)(Wb,function(e,t){Wb[t]=null})},_createInstance:function(e){switch(e){case"text":return new jb;case"only-text":return new Mb;case"query":return new Bb;case"prepend":return new Nb;case"append":case"inline-image-allowed-append":default:return new Rb}}},Fb=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._componentFactory=_.W.get("componentFactory"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._styleStore=_.W.get("styleStore"),this._configAgent=_.W.get("configAgent"),this._themeStore=_.W.get("themeStore")}var t=e.prototype;return t.execute=function(e,t){},t._insertEmptyTextComp=function(e){var t=this._componentFactory.createComponentByCtype("text");return this._inheritStyle(e,t),this._componentListStore.insertComponentAfter(e,t),t.getCompStartRange()},t._inheritStyle=function(e,t){this._inheritAlign(e,t),this._componentListStore.inheritTextStyle(e,t)},t._inheritAlign=function(e,t){var n=t.getCompStartRange();if("documentTitle"===e.ctype){var i=this._themeStore.getUserDefinedStyle(t.ctype);if(i&&i.align)return void t.changeAlign(i.align,n)}if(this._configAgent.get("productConfig.edit.followCurrentAlign")){var r=this._selectionInfoStore.toValidJSON(),o=this._componentListStore.getSelectedAlign(r).align;t.changeAlign(o,n)}},e}(),zb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e,t,n){var i=t.start,r=e.getComponentById(i.compId);if(r){var o=r.breakLine(t.start,{blockModeBefore:n}),a=Re()({},i,o);return{start:a,end:a}}},t}(Fb),Vb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e,t){var n=t.start,i=e.getComponentById(n.compId);if(i){var r=i.breakLine(t.start,{shiftEnter:!0}),o=Re()({},n,r);return{start:o,end:o}}},t}(Fb),Gb=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.execute=function(e,t){var n=t.start,i=e.getComponentById(n.compId);if(i){var r=i.getPositionByPoint(n),o=i.isEmpty();return r===xl.d.TEXT_END||o?this._selectToNextComp(e,i):this._softLineBreak(i,n)}},n._selectToNextComp=function(e,t){var n=e.getNextComponent(t);return n?n.getComponentActiveRange():this._insertEmptyTextComp(t)},n._softLineBreak=function(e,t){var n=e.breakLine(t),i=Re()({},t,n);return{start:i,end:i}},t}(Fb),Hb=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.execute=function(e,t){var n=t.start,i=e.getComponentById(n.compId);if(i){var r=i.getPositionByPoint(n),o=i.isEmpty();return r===xl.d.TEXT_END||o?this._moveToNextText(e,i):this._softLineBreak(i,n)}},n._moveToNextText=function(e,t){var n=e.getNextComponent(t);return n&&["text","sectionTitle"].includes(n.ctype)?n.getCompStartRange():this._insertEmptyTextComp(t)},n._softLineBreak=function(e,t){var n=e.breakLine(t),i=Re()({},t,n);return{start:i,end:i}},t}(Fb),qb=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.execute=function(e,t){var n=t.start,i=e.getComponentById(n.compId);if(i){var r=i.getPositionByPoint(n),o=i.isEmpty();return r===xl.d.TEXT_END||o?this._insertEmptyLine(e,i):this._hardLineBreak(e,n)}},n._insertEmptyLine=function(e,t){var n=e.getNextComponent(t);if(n&&"text"===n.ctype){var i=n.getFirstParagraph(),r=i.isListParagraph(),o=n.getStartPoint();if(n.breakLine(o),r){var a={start:{paraId:i.id},end:{paraId:i.id}};n.getText().updateStyle({list:"reset"},a)}return n.getCompStartRange()}return this._insertEmptyTextComp(t)},n._hardLineBreak=function(e,t){var n=e.splitComponentByPoint(t).back.getStartPoint(),i=Re()({},t,n);return{start:i,end:i}},t}(Fb),Jb=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t}return S()(t,e),t.prototype.execute=function(e,t){var n=t.end,i=e.getComponentById(n.compId),r=e.getNextComponent(i);return r&&["text","sectionTitle"].includes(r.ctype)?r.getCompStartRange():this._insertEmptyTextComp(i)},t}(Fb),Kb=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=_.W.get("componentFactory"),t}S()(t,e);var n=t.prototype;return n.execute=function(e,t){var n=t.start,i=e.getComponentById(n.compId);if(i){var r=i.getPositionByPoint(n),o=i.isEmpty();return r===xl.d.TEXT_END||o?this._insertEmptyLine(e,i):r===xl.d.TEXT_START?this._insertTextOnFront(e,i):this._splitToTextComp(e,n)}},n._insertEmptyLine=function(e,t){var n=e.getNextComponent(t);if(n&&"text"===n.ctype){var i=n.getStartPoint();return n.breakLine(i),n.getCompStartRange()}return this._insertEmptyTextComp(t)},n._insertTextOnFront=function(e,t){var n=this._componentFactory.createComponentByCtype("text");return e.insertComponentBefore(t,n),t.getCompStartRange()},n._splitToTextComp=function(e,t){var n=e.splitComponentByPoint(t).back,i=this._componentFactory.createComponentByCtype("text");return i.insert(n),i.removeFirstParagraph(),e.replace(n,i),i.getCompStartRange()},t}(Fb),Xb=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e,t){var n=t.start,i=e.getComponentById(n.compId);if(i){var r=i.getNextUnit().getStartPoint();return r.compId=i.id,{start:r,end:r}}},t}(Fb),Yb={},Qb={getCommand:function(e){if(Yb[e])return Yb[e];var t=this._createInstance(e);return Yb[e]=t,t},destroy:function(){Object(c.a)(Yb,function(e,t){Yb[t]=null})},_createInstance:function(e){switch(e){case"line-break-in-paragraph":return new zb;case"soft-line-break-in-paragraph":return new Vb;case"soft-and-select-to-next-at-end":return new Gb;case"soft-and-move-to-next-text-at-end":return new Hb;case"hard-and-insert-empty-line-at-end":return new qb;case"disabled":return new Kb;case"next-unit":return new Xb;case"move-to-next-text":default:return new Jb}}},Zb={},$b=function(){function e(){this._componentListStore=_.W.get("componentListStore")}e.getInstance=function(){var e=Zb[this.name];return e||(e=new(Function.prototype.bind.apply(this)),Zb[this.name]=e,e)};var t=e.prototype;return t.execute=function(e,t,n){throw new Error("You should override 'execute' method")},t._getCurrentRange=function(e){return{start:e.start,end:e.end}},t._findNextRange=function(e,t){if(t===_.u.LEFT){var n=this._componentListStore.getPrevComponent(e);if(!n||"unerasable"===n.attributes.erasure)return;return n.getCompEndRange()}var i=this._componentListStore.getNextComponent(e);if(i)return i.getCompStartRange()},e}(),eS="select_prev_comp",tS="prepend_prev_comp",nS="erase_part_text",iS="select_next_comp",rS="append_next_comp",oS="delete_prev_comp",aS="none",sS=function(e){function t(){var t;return(t=e.call(this)||this)._virtualEditable=_.W.get("virtualEditable"),t}S()(t,e);var n=t.prototype;return n.execute=function(e){var t=e.targetComp,n=e.selectionInfo,i=e.direction;switch(this._determineErasureType(t,n,i)){case eS:return this._selectPrevComp(t);case tS:return this._prependPrevComp(t);case oS:return this._deletePrevComp(t);case nS:return this._erasePartText(t,n,i);case iS:return this._selectNextComp(t);case rS:return this._appendNextComp(t);case aS:return this._getCurrentRange(n)}},n._determineErasureType=function(e,t,n){var i=t.start;if(!t.collapsed)return nS;var r=e.getPositionByPoint(i),o="LEFT"===n&&(e.isEmpty()||r===xl.d.TEXT_START),a="RIGHT"===n&&(e.isEmpty()||r===xl.d.TEXT_END),s=e.getText().isListParagraphByPoint(i);if(o){var c=this._componentListStore.getPrevComponent(e);if(!c||"documentTitle"===c.ctype||s)return nS;if("unerasable"===c.attributes.erasure)return aS;var l="text"===c.attributes.erasure;return l&&!c.isEmpty()?tS:l&&c.isEmpty()?oS:eS}if(a){var u=this._componentListStore.getNextComponent(e);return u?"text"===u.attributes.erasure?rS:iS:aS}return nS},n._selectPrevComp=function(e){var t=this._componentListStore.getPrevComponent(e);return e.isEmpty()?this._componentListStore.deleteComponentById(e.id):e.isFirstParagraphEmpty()&&e.removeFirstParagraph(),t.getComponentActiveRange()},n._prependPrevComp=function(e){var t=this._componentListStore.getPrevComponent(e),n=t.append([e]),i=n.components,r=n.point;return this._componentListStore.replaceBetween(t,e,i),{start:r,end:r}},n._deletePrevComp=function(e){var t=this._componentListStore.getPrevComponent(e);return this._componentListStore.deleteComponentById(t.id),{start:e.getStartPoint(),end:e.getStartPoint()}},n._erasePartText=function(e,t,n){return this._virtualEditable.appendAriaBufferOnErase(n),e.erase(t,n)},n._selectNextComp=function(e){var t=this._componentListStore.getNextComponent(e);return e.isEmpty()?this._componentListStore.deleteComponentById(e.id):e.isLastParagraphEmpty()&&e.removeLastParagraph(),t.getComponentActiveRange()},n._appendNextComp=function(e){var t=this._componentListStore.getNextComponent(e),n=e.append([t]),i=n.components,r=n.point;return this._componentListStore.replaceBetween(e,t,i),{start:r,end:r}},t}($b),cS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.targetComp,n=e.targetStore,i=e.selectionInfo,r=e.direction,o=i.start,a=i.collapsed,s="textUnit"===n.ctype?n:n.getText(),c=s.getFirstParagraph();if(n.isEmpty()&&!c.isListParagraph())return this._getCurrentRange(i);if(a){var l=n.getPositionByPoint(o),u=s.getFirstParagraph(),p=l===xl.d.TEXT_END&&"RIGHT"===r;if((l===xl.d.TEXT_START&&"LEFT"===r||p)&&!u.isListParagraph())return this._getCurrentRange(i)}var d=t.id,h=n.erase(i,r),g={start:{compId:d},end:{compId:d}};return Object(Ir.a)(h,g)},t}($b),lS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.targetComp,n=e.targetStore,i=e.selectionInfo,r=e.direction,o=i.start;if(i.collapsed){var a=n.getPositionByPoint(o),s=a===xl.d.TEXT_END&&"RIGHT"===r;if(a===xl.d.TEXT_START&&"LEFT"===r){var c=t.getPrevUnit().getEndPoint();return c.compId=t.id,{start:c,end:c}}if(s||n.isEmpty())return this._getCurrentRange(i)}var l=t.id,u=n.erase(i,r),p={start:{compId:l},end:{compId:l}};return Object(Ir.a)(u,p)},t}($b),uS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.targetComp,n=e.direction,i=this._findNextRange(t,n);if(!i)if(n===_.u.LEFT){var r=this._componentListStore.getNextComponent(t);r&&(i=r.getCompStartRange())}else{var o=this._componentListStore.getPrevComponent(t);o&&"unerasable"!==o.attributes.erasure&&(i=o.getCompEndRange())}return this._componentListStore.deleteComponentById(t.id),i},t}($b),pS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.targetComp,n=e.selectionInfo,i=e.direction,r=this._findNextRange(t,i),o=t.queryErasure(n,i,r),a=o.result,s=o.component,c=o.range,l=this._componentListStore.getNextComponent(t);if("merge-if-text"===a){if(!l)return{start:n.start,end:n.end};if(l&&"text"===l.ctype){var u=t.append([l]),p=u.components,d=u.point;return this._componentListStore.replaceBetween(t,l,p),{start:d,end:d}}}if("self"===a){if(i===_.u.RIGHT){var h=this._componentListStore.getNextComponent(t);h&&(r=h.getCompStartRange())}else{var g=this._componentListStore.getPrevComponent(t);g&&"unerasable"!==g.attributes.erasure&&(r=g.getCompEndRange())}return this._componentListStore.deleteComponentById(t.id),r}return"replace"===a?(this._componentListStore.replace(t,s),c):c},t}($b),dS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){return e.targetComp.getComponentActiveRange()},t}($b),hS={},gS={getCommand:function(e){if(hS[e])return hS[e];var t=this._createInstance(e);return hS[e]=t,t},destroy:function(){Object(c.a)(hS,function(e,t){hS[t]=null})},_createInstance:function(e){switch(e){case"text":return new sS;case"trapped-text":return new cS;case"backward-escapable-text":return new lS;case"query":return new pS;case"confirm":case"unerasable":return new dS;case"self":default:return new uS}}},fS=n(77),mS=["confirm","unerasurable"],yS=(N_=function(){function e(){var e=this;this._i18n=_.W.get("i18n"),this._configAgent=_.W.get("configAgent"),this._editorStatusStore=_.W.get("editorStatusStore"),this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._componentFactory=_.W.get("componentFactory"),this._virtualEditable=_.W.get("virtualEditable"),this._themeStore=_.W.get("themeStore"),this._notRefineWhenComponentsModified=this._configAgent.get("productConfig.edit.notRefineWhenComponentsModified"),this._deviceType=this._configAgent.get("productEnv.deviceType"),this._maxCountsByCategoryType=this._getCategoryTypesHasMaxCount().reduce(function(t,n){return t[n]=e._getMaxCountByType(n),t},{})}var t=e.prototype;return t.destroy=function(){gS.destroy(),Ub.destroy(),Qb.destroy()},t._setRangeWithScroll=function(e){this._selectionInfoStore.setRange(e),this._virtualEditable.scrollToFocus()},t.write=function(e){var t=this._checkTextByFilter(e);if(t)return this._selectionInfoStore.resetIMEOffset(),this._virtualEditable.clearInput(),t;if(this.eraseBlock(),!this.isCursorMode())return null;if(this._getCompAtStartPoint()){var n=[];if(wt.a.separateCallbacksWithEmoji(e,function(e){return n.push(e)}),n.length>0){var i=n[0];this._virtualEditable.clearInput(),this._writeEmoji(i)}else this._writeText(e);return null}},t.writeSpecialCharacter=function(e){var t=this._selectionInfoStore;t.resetIMEOffset(),this.write(e),t.resetIMEOffset()},t._writeEmoji=function(e){var t=this._getCompAtStartPoint(),n=this._getUnitAtStartPoint(t),i=this._selectionInfoStore.start,r=JSON.parse(JSON.stringify(i)),o=n.writeEmoji(e,r);n.isOverTextLimit&&this._virtualEditable.clearInput();var a=r.compId,s=Re()({compId:a},o),c={start:s,end:s};this._setRangeWithScroll(c)},t._writeText=function(e){var t=this._getCompAtStartPoint(),n=this._getUnitAtStartPoint(t),i=this._selectionInfoStore.start,r=n;if("textUnit"!==n.ctype&&(r=n.getText&&n.getText()||null),r&&r.isAiTextNode(i)){var o=r.releaseAiStyleByUser(this._selectionInfoStore);this._selectionInfoStore.setRange(o)}this._setWritePointToPlainTextNode(n);var a=this._selectionInfoStore,s=a.start,c=a.imeOffset,l=JSON.parse(JSON.stringify(s)),u=n.write(e,l,c),p=l.compId,d=Re()({compId:p},u),h={start:d,end:d};n.isOverTextLimit?(this._virtualEditable.clearInput(),this._setRangeWithScroll(h)):(this._selectionInfoStore.updateRange(h),this._virtualEditable.scrollToFocus()),this._virtualEditable.pauseAriaBufferOnWrite()},t.writeTextWithSoftLineBreak=function(e){var t=e.split(/\r?\n/).map(function(e){return{ctype:pu.a.PARAGRAPH,nodes:function(e){var t=[];return wt.a.separateCallbacksWithEmoji(e,function(e){return t.push({ctype:"emojiNode",value:e})},function(e){return t.push({ctype:pu.a.TEXT_NODE,value:e})}),t}(e)}}),n=this._selectionInfoStore.toValidJSON();if(!n.collapsed&&n.mode===_.P.BLOCK){var i=this._erase(n);Object.assign(n,i)}var r=this._getCompAtStartPoint(),o=this._getUnitAtStartPoint(r),a=o.ctype===pu.a.TEXT_UNIT?o:o.getText(),s=a.getTextStyle(n.start),c=this._componentFactory.createComponentWithCompData({ctype:pu.a.TEXT,value:t});if(s){c.getText().updateTheme(a.themeStyle),c.applyDerivedStyles(s);["align","superscript","subscript"].forEach(function(e){var t;return s[e]&&c.updateStyle(((t={})[e]=s[e],t),{start:c.getStartPoint(),end:c.getEndPoint()})})}var l=a.mergeWith(c.getText(),{isAttach:!0,mergePoint:n.start});this._selectionInfoStore.setRange({start:Re()({},l.end,{unitId:o.id,compId:r.id}),end:Re()({},l.end,{unitId:o.id,compId:r.id})})},t.isCursorMode=function(){return this._selectionInfoStore.mode===_.P.CURSOR},t.isBlockMode=function(){return this._selectionInfoStore.isBlockMode()||this._selectionInfoStore.isComponentBlock()},t._setWritePointToPlainTextNode=function(e){var t=this._selectionInfoStore,n=t.start,i=JSON.parse(JSON.stringify(n)),r=i.compId;if(e.shouldAdjustWritePoint(i)){var o=e.adjustWritePointOnEdge(i),a=Re()({compId:r},o),s={start:a,end:a};t.setRange(s)}},t.eraseBlock=function(){this.isBlockMode()&&this.erase()},t._getCompAtStartPoint=function(){var e=this._selectionInfoStore.start;return this._componentListStore.getComponentById(e.compId)},t._getUnitAtStartPoint=function(e){var t=this._selectionInfoStore.start;return e.getStoreById(t.unitId)},t.lineBreak=function(){var e=this._selectionInfoStore,t=this.isBlockMode();this.eraseBlock();var n=e.start,i=this._componentListStore.getComponentById(n.compId).getStoreById(n.unitId),r=Qb.getCommand(i.attributes.lineBreak.enter);this._breakLine(r,t),this._virtualEditable.clearAriaBufferOnLineBreak()},t.softLineBreak=function(){var e=this._selectionInfoStore;this.eraseBlock();var t=e.start,n=this._componentListStore.getComponentById(t.compId).getStoreById(t.unitId),i=Qb.getCommand(n.attributes.lineBreak.shiftEnter);this._breakLine(i)},t._breakLine=function(e,t){var n=this._selectionInfoStore,i=e.execute(this._componentListStore,n.toValidJSON(),t);this._setRangeWithScroll(i)},t.getComponentInfoList=function(){return this._componentListStore.getComponentList().map(function(e){return{compType:e.ctype,compId:e.id}})},t.insert=function(e){var t=e.followCurrentAlign,n=void 0===t||t,i=e.forceRefine,r=void 0!==i&&i,o=this._filterComponentsByMaxCount(e.sourceComponents),a=o.sourceComponents,s=o.errorInfos,c=this._makeErrorMsgComponentsByMaxCount(s);if(0===a.length)return{errorMsg:c};e.insertionType="insertion",n&&this._followCurrentAlign(a);var l=Object($r.a)(a),u=l.getRangeAfterInsert(),p=this._insert(e);this._refineAfterInsert({customRange:u,range:p,sourceComponent:l}),this._refineComponentList(r);var d=this._componentListStore.getPointByParaId(p.start.paraId)||p.start,h=this._componentListStore.getPointByParaId(p.end.paraId)||p.end;return{errorMsg:c,range:{start:Re()({},p.start,d),end:Re()({},p.end,h)}}},t.insertByInternalPaste=function(e){var t=this._filterComponentsByMaxCount(e.sourceComponents),n=t.sourceComponents,i=t.errorInfos,r=this._makeErrorMsgComponentsByMaxCount(i);if(0===n.length)return{errorMsg:r};var o=this._checkTextByFilter(n);if(o)return this._selectionInfoStore.resetIMEOffset(),this._virtualEditable.clearInput(),{errorMsg:o};if(e.sourceComponents=n,e.insertionType="paste",this._cantPaste({sourceComponents:n}))return{errorMsg:this._i18n("textComponent:can_not_insert_point_in_dropcap")};var a=Object($r.a)(n),s=this._insert(e);return this._refineAfterInsert({range:s,sourceComponent:a}),this._refineComponentList(),{errorMsg:r}},t._cantPaste=function(e){var t=e.sourceComponents,n=void 0===t?[]:t,i=e.selectionInfo,r=(void 0===i?this._selectionInfoStore.toValidJSON():i).start;return!(!this._hasInlineImageOnly(n)||!this._hasDropCap(r))},t._hasInlineImageOnly=function(e){return e.filter(function(e){return"text"===e.attributes.insertion}).some(function(e){return e.hasInlineImageOnly()})},t._hasDropCap=function(e){var t=e.compId,n=e.paraId,i=this._componentListStore.getComponentById(t);return"text"===i.attributes.insertion&&i.hasDropCapInParagraph(n)},t._getCategoryType=function(e){var t=e.ctype;if(0===t.indexOf("image"))return"image";if("wrappingParagraph"===t){if(-1!==Object(x.a)(e,"wrappedSection.ctype","").indexOf("image"))return"image"}else if("documentTitle"===t){if(Object(x.a)(e,"background.image",null))return"image"}return t},t._getMaxCountByType=function(e){return this._configAgent.get("infraConfig."+e+".maxUploadCount")||1/0},t._getCategoryTypesHasMaxCount=function(){var e=this._configAgent.get("infraConfig");return Object(Pt.a)(e,function(e,t,n){return Object(eo.a)(t,"maxUploadCount")&&e.push(n),e},[])},t._filterComponentsByMaxCount=function(e){var t=this;return Object(Pt.a)(e,function(e,n){var i=t._getCategoryType(n),r=t._maxCountsByCategoryType[i]||1/0;if(r!==1/0){e.counts[i]||(e.counts[i]=t._componentListStore.countByLikeType(i));var o=n.ctype,a=0;a="imageGroup"===o||"imageStrip"===o?Object(x.a)(n,"images",[]).reduce(function(e,t){return Object(x.a)(t,"internalResource",!1)&&e++,e},0):"image"===o?Object(x.a)(n,"internalResource",!1)?1:0:"wrappingParagraph"===o?Object(x.a)(n,"wrappedSection.internalResource",!1)?1:0:"documentTitle"===o?Object(x.a)(n,"background.image.internalResource",!1)?1:0:1,e.counts[i]+a<=r?(e.counts[i]+=a,e.sourceComponents.push(n)):!1===Object(eo.a)(e.errorInfos,i)&&(e.errorInfos[i]=r)}else e.sourceComponents.push(n);return e},{sourceComponents:[],errorInfos:{},counts:{}})},t._makeErrorMsgComponentsByMaxCount=function(e){var t=this,n=Object(Sb.a)(e);if(1===n){var i=Object(Cb.a)(e)[0],r=e[i];return this._i18n("documentToolbarLayout:"+i+"_upload_max_count_msg",{maxcount:r})}if(n>1&&Object(Sb.a)(this._maxCountsByCategoryType)>0){var o=["image","video","file","audio"].reduce(function(n,i){if(Object(Ft.a)(Object(Cb.a)(t._maxCountsByCategoryType),i)&&e[i]){var r=t._maxCountsByCategoryType[i];n+=n&&n.length>0?", ":"",n+=t._i18n("documentToolbarLayout:"+i+"_upload_max_count",{maxcount:r})}return n},"");return this._i18n("documentToolbarLayout:multi_upload_max_count_msg",{maxCountMsgs:o})}return null},t._getExceptComponentsBy=function(e){var t=e.sourceComponents,n=e.maxCount,i=e.ctype,r=this._componentListStore.countBy(i);return t.filter(function(e){return e.ctype===i}).slice(n-r)},t.insertByExternalPaste=function(e){var t=e.followCurrentAlign,n=void 0===t||t,i=this._filterComponentsByMaxCount(e.sourceComponents),r=i.sourceComponents,o=i.errorInfos,a=this._makeErrorMsgComponentsByMaxCount(o);if(0===r.length)return{errorMsg:a};var s=this._checkTextByFilter(r);if(s)return this._selectionInfoStore.resetIMEOffset(),this._virtualEditable.clearInput(),{errorMsg:s};e.insertionType="paste",n&&this._followCurrentAlign(r);var c=this._insert(e),l=Object($r.a)(r);return this._refineAfterInsert({range:c,sourceComponent:l}),this._refineComponentList(),{errorMsg:a}},t._refineAfterInsert=function(e){var t=e.customRange,n=e.range,i=e.sourceComponent,r=this._componentListStore.getNextComponent(i),o=this._configAgent.get("productConfig.edit.notInsertTextAtLast");if(t)this._setRangeWithScroll(t);else if("text"===i.attributes.insertion){var a=this._focusToEndComp(n);this._setRangeWithScroll(a)}else if(r&&"text"===r.attributes.insertion)this._setRangeWithScroll(r.getCompStartRange()),this._setShouldBlurAfterInsertComp();else if(r||o){var s=this._focusToEndComp(n);this._setRangeWithScroll(s),this._setShouldBlurAfterInsertComp()}else this.insertTextCompAtLast()},t._setShouldBlurAfterInsertComp=function(){this._deviceType===_.t.MOBILE&&this._selectionInfoStore.setShouldBlur(!0)},t._followCurrentAlign=function(e){var t=this._selectionInfoStore.toValidJSON(),n=this._componentListStore.getSelectedAlign(t).align,i=this._configAgent.get("productConfig.edit.followCurrentAlign");n&&i&&e.forEach(function(e){e.changeAlign(n,t)})},t._followInsertTargetAlign=function(e,t){var n={start:e,end:e},i=this._componentListStore.getComponentById(e.compId).getSelectedAlign(n).align;t.forEach(function(e){var t={start:e.getStartPoint(),end:e.getEndPoint()};e.changeAlign(i,t)})},t._insert=function(e){var t=e.sourceComponents,n=void 0===t?[]:t,i=e.selectionInfo,r=void 0===i?this._selectionInfoStore.toValidJSON():i,o=e.insertionType,a=e.commandType,s=e.disableMerge,c=void 0!==s&&s;if(this._virtualEditable.deactivateSelectionHandle(),0!==n.length){if(!r.collapsed&&r.mode===_.P.BLOCK){var l=this._erase(r);Object.assign(r,l)}var u=r.start,p=this._componentListStore.getComponentById(u.compId),d=this._componentListStore.getDerivedTextStyle(u);d&&n.forEach(function(e){"text"===e.ctype&&e.applyDerivedStyles(d)}),this._virtualEditable.clearInput();var h=p.getStoreById(u.unitId)||p;return Ub.getCommand(a||h.attributes[o]).execute({sourceComponents:n,selectionInfo:r,disableMerge:c})}},t.append=function(e){var t=e.sourceComponents,n=e.followCurrentAlign,i=void 0===n||n,r=this._selectionInfoStore.toValidJSON(),o=Object($r.a)(t);if(this._selectionInfoStore.isBlockMode()){var a=this._erase(r);Object.assign(r,a)}i&&this._followCurrentAlign(t),this._componentListStore.append({sourceComponents:t,point:r.end});var s=this._findLNextLandingRange(o);this._setRangeWithScroll(s),this._refineComponentList()},t._findLNextLandingRange=function(e){var t=this._componentListStore.getNextComponent(e);return this._isText(t)?t.getCompStartRange():this._focusToEndComp(e.getCompEndRange())},t._isText=function(e){return e&&"text"===e.attributes.insertion},t._focusToEndComp=function(e){return this._componentListStore.getComponentById(e.end.compId).getEndCollapsedRange(e)},t.insertByDrop=function(e){var t=e.insertCommand,n=e.insertPoint,i=e.items,r=e.followCurrentAlign,o=void 0===r||r;if(i.length){o&&this._followInsertTargetAlign(n,i),this._virtualEditable.clearInput();var a={start:n,end:n},s=Ub.getCommand(t).execute({sourceComponents:i,selectionInfo:a}),c=this._componentListStore.getComponentById(s.end.compId);return this._refineAfterInsert({range:s,sourceComponent:c}),this._refineComponentList(),s}},t.moveToPrev=function(e){this._componentListStore.moveComponentToPrev(e)},t.moveToNext=function(e){this._componentListStore.moveComponentToNext(e)},t.move=function(e){var t,n=e.insertCommand,i=e.insertPoint,r=e.items.map(function(e){return e}),o=this._selectionInfoStore.toValidJSON(),a=o.start,s=o.end,c=this._componentListStore.getComponentById(a.compId),l=this._componentListStore.getComponentById(s.compId),u=this._componentListStore.getComponentById(i.compId),p=c.getStoreById(a.unitId),d=l.getStoreById(s.unitId),h=u.getStoreById(i.unitId),g=["text","only-text"],f=g.includes(p.attributes.drop)&&g.includes(d.attributes.drop)&&g.includes(h.attributes.drop),m=this._componentListStore.isBackward(s,i),y=a.nodeId===s.nodeId&&s.nodeId===i.nodeId;f&&m&&(y?i.offset-=s.offset-a.offset:((t={}).startOffset=c.getOffsetInParagraph(a),t.endOffset=l.getOffsetInParagraph(s),t.insertOffset=u.getOffsetInParagraph(i)));var v=m?_.u.UP:_.u.DOWN,b=this._erase(o,v,!0).start;if(f&&m&&!y){var S,C;s.paraId===i.paraId?(S=this._componentListStore.getComponentById(b.compId),i.compId=b.compId,i.unitId=b.unitId,i.paraId=b.paraId,C=t.insertOffset-t.endOffset+t.startOffset):((S=this._componentListStore.getComponentById(i.compId))||(S=this._componentListStore.getComponentById(b.compId),i.compId=b.compId,i.unitId=b.unitId),C=t.insertOffset);var I=S.getNodeInfoAfterOffset(i,C);i.nodeId=I.node.id,i.offset=I.offset}else i.unitId===b.unitId&&(i.compId=b.compId);this._virtualEditable.clearInput();var O={start:i,end:i},T=Ub.getCommand(n),L={sourceComponents:r,selectionInfo:O};"query"===n&&(L.additionalInfo={targetCompOfInsertPoint:u});var E=T.execute(L);if(o.mode===_.P.BLOCK)this._setRangeWithScroll(E);else{var P=this._componentListStore.getComponentById(E.end.compId);this._refineAfterInsert({range:E,sourceComponent:P})}this._refineComponentList()},t.erase=function(e,t){void 0===e&&(e=this._selectionInfoStore.toValidJSON()),void 0===t&&(t=_.u.LEFT);var n=this._erase(e,t);this._setRangeWithScroll(n),this._refineComponentList()},t.eraseComponent=function(e){e||(e=this._selectionInfoStore.start.compId);var t=this._componentListStore.getComponentById(e).getComponentActiveRange();this._selectionInfoStore.setRange(t);var n=this._erase(void 0,_.u.RIGHT);this._setRangeWithScroll(n),this._refineComponentList()},t.eraseUnit=function(e){var t=this,n={};Object(c.a)(e,function(e){var i,r=new Ob({compIdMap:(i={},i[e.compId]={},i),start:Re()({paraId:null,nodeId:null,offset:0},e),end:Re()({paraId:null,nodeId:null,offset:1},e)}).toValidJSON();n=t._erase(r,_.u.RIGHT)}),this._setRangeWithScroll(n),this._refineComponentList()},t._confirmErasureComponents=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=bb()(t);case 1:if((r=i()).done){e.next=7;break}return o=r.value,e.next=5,this._confirmErasureComponent(o,n);case 5:e.next=1;break;case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._confirmErasureComponent=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._selectionInfoStore.setRange(t.getComponentActiveRange()),e.t0=t.confirmErasure,!e.t0){e.next=6;break}return e.next=5,t.confirmErasure();case 5:e.t0=e.sent;case 6:!0===e.t0&&(i=gS.getCommand("self"),r=i.execute({targetComp:t,direction:n})||this._insertEmptyTextComponent(),this._setRangeWithScroll(r),this._refineComponentList());case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._getErasureType=function(e,t){var n=e.attributes,i=(void 0===n?{}:n).erasure;return t&&mS.includes(i)?"self":i},t._erase=function(e,t,n){var i=this;void 0===e&&(e=this._selectionInfoStore.toValidJSON()),void 0===t&&(t=_.u.LEFT),void 0===n&&(n=!1),this._virtualEditable.deactivateSelectionHandle();var r=[],o=this._componentListStore,a=e,s=a.compIdMap,l=a.mode,u=Object.keys(s),p=o.getComponentsByIds(u),d=p.shift(),h=p.pop(),g=d&&o.getPrevComponent(d),f=h&&o.getNextComponent(h),m=e,y=m.start,v=m.end,b=d.getStoreById(y.unitId)||d,S=this._getErasureType(b,n);"confirm"===S&&r.push(d);var C=gS.getCommand(S).execute({targetComp:d,targetStore:b,selectionInfo:e,direction:t});if(e.collapsed||!h)return this._confirmErasureComponents(r,t),C||this._insertEmptyTextComponent();if(Object(c.a)(p,function(e){var t=i._getErasureType(e,n);"confirm"===t?r.push(e):"unerasable"!==t&&o.deleteComponentById(e.id)}),h){var I=h.getStoreById(v.unitId),O=this._getErasureType(I,n);"wrappingParagraph"===h.ctype&&(O="query"),"none"===I.selection&&(I=h),"confirm"===O&&r.push(h),C=gS.getCommand(O).execute({targetComp:h,targetStore:I,selectionInfo:e,direction:t});var T=l===_.P.MULTI_COMP&&t===_.u.LEFT,L=l===_.P.MULTI_COMP&&t===_.u.RIGHT,E=("textUnit"===b.ctype||"text"===S)&&"text"===O&&o.has(y.compId)&&o.has(v.compId);if(T)if(g&&"unerasable"!==g.attributes.erasure)C=g.getCompEndRange();else{var P=o.getFirstComponent();if(P&&"unerasable"!==P.attributes.erasure)C=P.getCompEndRange();else if(P&&"unerasable"===P.attributes.erasure){var w=o.getNextComponent(P);C=w?w.getCompStartRange():null}else C=null}else if(L)if(f)C=f.getCompStartRange();else{var k=o.getLastComponent();C=k&&"unerasable"!==k.attributes.erasure?k.getCompEndRange():null}else if(E&&d.isEmpty())this._componentListStore.deleteComponentById(d.id),C=h.getCompStartRange();else if(E&&r.length<1){var x=d.append([h]),D=x.components,A=x.point;o.replaceBetween(d,h,D),C={start:A,end:A}}}return this._confirmErasureComponents(r,t),C||this._insertEmptyTextComponent()},t.insertEmptyText=function(){var e=this._componentFactory.createComponentByCtype("text");return this.insert({sourceComponents:[e]})},t._insertEmptyTextComponent=function(){var e=this._componentFactory.createComponentByCtype("text");return this._componentListStore.insertComponent(e),e.getCompStartRange()},t.insertTextCompAtLast=function(){var e=this._componentFactory.createComponentByCtype("text"),t=this._componentListStore.getLastComponent();this._inheritStyle(t,e),this._componentListStore.insertComponent(e),this._setRangeWithScroll(e.getCompStartRange())},t.insertTextCompPositionById=function(e,t){this._virtualEditable.deactivateSelectionHandle();var n=this._componentListStore.getComponentById(t),i=this._componentFactory.createComponentByCtype("text"),r=this._findStyleAncestor(n);this._inheritStyle(r,i),n?e===_.x.TOP?this._componentListStore.insertComponentBefore(n,i):e===_.x.BOTTOM&&this._componentListStore.insertComponentAfter(n,i):this._componentListStore.insertComponent(i),this._setRangeWithScroll(i.getCompStartRange())},t.insertTextComponentBySelectionInfo=function(e){var t=this._componentFactory.createComponentByCtype("text");return this.insert({sourceComponents:[t],followCurrentAlign:!0,selectionInfo:e}),t},t.insertComponentsWithData=function(e,t){var n=this;void 0===e&&(e=[]),void 0===t&&(t={});var i=this._componentFactory.getAvailableCompType(),r=Object(jn.a)(e,function(e){return i.includes(e.ctype)}).map(function(e){return n._componentFactory.createComponentWithCompData(e)}),o=t,a=o.followCurrentAlign,s=void 0===a||a,c=o.commandType,l=o.disableMerge,u=o.forceRefine;if(r.length>0)return this.insert({sourceComponents:r,followCurrentAlign:s,commandType:c,disableMerge:l,forceRefine:u})},t.deleteComponents=function(e){var t=this;void 0===e&&(e=[]),e.forEach(function(e){t.eraseComponent(e)})},t._inheritStyle=function(e,t){this._inheritAlign(e,t),this._componentListStore.inheritTextStyle(e,t)},t._inheritAlign=function(e,t){var n=t.getCompStartRange();if(!e||e&&"documentTitle"===e.ctype){var i=this._themeStore.getUserDefinedStyle(t.ctype);i&&i.align&&t.changeAlign(i.align,n)}else{if(this._configAgent.get("productConfig.edit.followCurrentAlign"))if("wrappingParagraph"===e.ctype){var r=e.text,o=r.getSelectedAlign(r.getCompEndRange()).align;t.changeAlign(o,n)}else t.changeAlign(e.align,n)}},t._findStyleAncestor=function(e){return e?this._componentListStore.getPrevComponent(e):this._componentListStore.getLastComponent()},t._refineComponentList=function(e){if(void 0===e&&(e=!1),e||!this._notRefineWhenComponentsModified){var t=this._selectionInfoStore,n=this._componentListStore.refineComponentList(t.toValidJSON());n&&t.setRange(n)}},t._hasAdjacentEmptyTextNode=function(e){var t=e.compId,n=e.unitId,i=e.paraId,r=e.nodeId,o=this._componentListStore.getComponentById(t).getStoreById(n);if(o.isEmptyTextNode(e))return!0;var a=o.getParagraphById(i),s=a.getPrevNode(r);if(s&&s.isEmpty())return!0;var c=a.getNextNode(r);return!(!c||!c.isEmpty())},t.refineEmptyNodeInParagraph=function(e){var t=this._selectionInfoStore,n=t.start,i=t.mode,r=JSON.parse(JSON.stringify(n));if(i===_.P.CURSOR&&this._hasAdjacentEmptyTextNode(r)){var o=r.compId,a=r.unitId,s=r.paraId,c=this._componentListStore.getComponentById(o).getStoreById(a);if(s!==e.paraId)return c.refineParagraphWithPoint(r),!1;var l=c.refineParagraphWithPoint(e);return this._selectionInfoStore.setRange({start:l,end:l}),!0}return!1},t.isSelectedComponentsProcessing=function(){var e=this._selectionInfoStore,t=e.collapsed,n=e.mode;if(t)return!1;var i=this._componentListStore.getSelectedComponents(e);return(1!==i.length||n===_.P.SINGLE_COMP)&&this._hasProcessingComp(i)},t.isDocumentProcessing=function(){var e=this._componentListStore.getComponentList(),t=!0===this._editorStatusStore.isProcessing,n=this._hasProcessingComp(e);return t||n},t._hasProcessingComp=function(e){return Object(up.a)(e,function(e){return e.phase===_.O.PROCESSING})},t.cut=function(){this._virtualEditable.cut()},t.copy=function(){this._virtualEditable.copy()},t.paste=function(e){this._virtualEditable.paste(e)},t.insertCustomData=function(e,t){var n=this._componentFactory.createComponentWithCompData({ctype:"custom",align:t.align,subtype:e,data:t});this.insert({sourceComponents:[n]})},t.insertWithNewText=function(e){if(this.isCursorAtEndOfText()){var t=this._componentFactory.createComponentByCtype("text");e.sourceComponents.push(t)}return this.insert(e)},t.isCursorAtEndOfText=function(e){void 0===e&&(e=this._selectionInfoStore.toValidJSON());var t=e,n=t.end,i=t.collapsed,r=t.mode,o=n.compId;if(i&&r===_.P.CURSOR){var a=this._componentListStore.getComponentById(o),s=a.getEndPoint();if(a.getText())return s.compId===n.compId&&s.unitId===n.unitId&&s.paraId===n.paraId&&s.nodeId===n.nodeId&&s.offset===n.offset}return!1},t._checkTextByFilter=function(e){var t=this._getCompAtStartPoint(),n=t.getText?t.getText():null,i=!1;return n&&(i="string"==typeof e?n.checkTextByFilter(e):Object(up.a)(e,function(e){var t=e.getText?e.getText():null,i=t&&t.getPlainTextWithEmoji&&t.getPlainTextWithEmoji();return!!i&&n.checkTextByFilter(i)})),i?this._i18n("documentTitleComponent:warning_emoji_filter"):null},t.insertEmptyLineAtStartOfBody=function(){var e=this._componentListStore.firstBodyComponent;if(e.ctype===pu.a.TEXT)return e.breakLine(e.getStartPoint()),void this._selectionInfoStore.setRange(e.getCompStartRange());var t=this._componentFactory.createComponentByCtype(pu.a.TEXT);this._componentListStore.insertComponentBefore(e,t);var n=this._componentListStore.firstBodyComponent;this._selectionInfoStore.setRange(n.getCompStartRange())},t.moveNextLine=function(){var e=this;if(this._selectionInfoStore.mode===fS.d.BLOCK&&this._selectionInfoStore.collapse(),this.lineBreak(),!this._cursorAtParaEnd){var t=this._selectionInfoStore.toPlainJSON(),n=t.start,i=t.end;setTimeout(function(){e.lineBreak(),e._selectionInfoStore.setRange({start:n,end:i})},0)}},B()(e,[{key:"cursorAtEmptyPara",get:function(){var e=this._selectionInfoStore.toPlainJSON(),t=e.collapsed,n=e.end;if(!t)return!1;var i=this._componentListStore.getParagraphByPoint(n);return!!i&&i.isEmpty()}},{key:"_cursorAtParaEnd",get:function(){var e=this._selectionInfoStore.toPlainJSON(),t=e.collapsed,n=e.end;if(!t)return!1;var i=this._componentListStore.getParagraphByPoint(n);return!!i&&Object($e.a)(i.getEndPoint(),Object(Va.a)(n,["compId","unitId"]))}}]),e}(),k()(N_.prototype,"insert",[D.d],Object.getOwnPropertyDescriptor(N_.prototype,"insert"),N_.prototype),k()(N_.prototype,"insertByInternalPaste",[D.d],Object.getOwnPropertyDescriptor(N_.prototype,"insertByInternalPaste"),N_.prototype),k()(N_.prototype,"insertByExternalPaste",[D.d],Object.getOwnPropertyDescriptor(N_.prototype,"insertByExternalPaste"),N_.prototype),k()(N_.prototype,"_confirmErasureComponents",[te.history],Object.getOwnPropertyDescriptor(N_.prototype,"_confirmErasureComponents"),N_.prototype),k()(N_.prototype,"insertCustomData",[te.history,D.d],Object.getOwnPropertyDescriptor(N_.prototype,"insertCustomData"),N_.prototype),N_),vS=n(253),_S=n(458),bS="[문서 데이터] 서비스에서 받은 문서 데이터 오류",SS="[문서 데이터] 서비스에 전달할 문서 데이터 오류",CS="[문서 데이터] 컴포넌트 스토어 생성 오류 발생",IS="[문서 데이터] 컴포넌트 스토어 반환 오류 발생",OS="[크롤링 API] 사인 값 갱신 응답 데이터 오류",TS="[이미지] 내부 이미지(internalResource)일 때 필수 값인 path 누락",LS="[오지링크] 사인 값 누락",ES="[오임베드] 사인 값 누락",PS="[문서 데이터] 필수인 문서 제목이 존재하지 않아 생성",wS="[크롤링 API] 크롤링 API 응답 사인 값 누락",kS="[크롤링 API] 크롤링 API 오류로 텍스트 컴포넌트로 삽입",xS={SET_DATA:{image:function(e){if(!0===e.internalResource&&""===e.path)return TS},oglink:function(e){if(!e.oglinkSign)return LS},oembed:function(e){if(!e.oembedSign)return ES}},GET_DATA:{image:function(e){if(!0===e.internalResource&&""===e.path)return TS},oglink:function(e){if(!e.oglinkSign)return LS},oembed:function(e){if(!e.oembedSign)return ES}}},DS=(M_=function(){function e(){this._themeStore=_.W.get("themeStore"),this._componentListStore=_.W.get("componentListStore"),this._documentConverter=_.W.get("documentConverter"),this._documentDataStore=_.W.get("documentDataStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._sentryManager=_.W.get("sentryManager"),this._availableCompTypes=_.W.get("componentFactory").getAvailableCompType(),this._componentFactory=_.W.get("componentFactory"),this._i18n=_.W.get("i18n"),this._configAgent=_.W.get("configAgent"),this._notRefineWhenComponentsModified=this._configAgent.get("productConfig.edit.notRefineWhenComponentsModified"),this._RX={titleNumberRx:/ \(\d+\)+$/g,digitRx:/\d+/g},this._multiCrawlerRepository=new _S.a({url:this._configAgent.get("apiInfo.fetchMultiCrawler")}),this._editorStatusStore=_.W.get("editorStatusStore"),this._writingLogStore=_.W.get("writingLogStore"),this._eventDispatcher=_.W.get("eventDispatcher")}var t=e.prototype;return t._traceInfo=function(e,t,n){if(this._sentryManager){var i=_.ab.createInfo(e,t,n);this._sentryManager.info(i)}},t._verifyDocumentTitle=function(e){if(this._availableCompTypes.includes("documentTitle")){var t=e.getFirstComponent();return!!t&&"documentTitle"===t.ctype}return!0},t._prependDocumentTitle=function(e){var t=e.getFirstComponent(),n=this._componentFactory.createComponentWithCompData({ctype:"documentTitle"});e.insertComponentBefore(t,n)},t._verifyAndCorrectDocumentTitle=function(e,t){this._verifyDocumentTitle(e)||(this._prependDocumentTitle(e),this._traceInfo(t.title,PS,t.extras))},t.setDocumentData=function(e){var t=this;_.cb.flush();var n=Object(x.a)(e,"document.components",[]),i=Object(Ze.a)(n)?_.v.NORMAL:_.v.EDITING,r=dp.a.getObjectWithCircularRemoved(e.document);n.forEach(function(n){var r=xS.SET_DATA[n["@ctype"]],o=r&&r(n);o&&t._traceInfo(bS,o,{docId:e.documentId,documentStatus:i,data:n})});var o=Object(x.a)(e,"document.theme");o&&this._themeStore.changeThemeName(o);var a=this._documentConverter.convertDocument(r,this._availableCompTypes),s=a.components,c=Object(x.a)(e,"document.version","1.0.0");delete a.components,e.document=a,this.setComponentList(s),this._documentDataStore.setDocumentData(e),this._documentDataStore.setDocumentStatus(i),this._writingLogStore.setLogData(e.document.di),this._componentListStore.isEmpty()?this._insertDefaultComponents():(this._verifyAndCorrectDocumentTitle(this._componentListStore,{title:CS,extras:{docId:e.documentId,documentStatus:i}}),this._updateOglinkOembedSign(c))},t.resetDocumentData=function(){_.cb.flush(),this._setDocumentTheme(),this._insertDefaultComponents(),this._documentDataStore.setDocumentStatus()},t.getDocumentId=function(){return this._documentDataStore.getDocumentId()},t.getDocumentData=function(e){var t=this;if(void 0===e&&(e=!1),this._notRefineWhenComponentsModified){var n=this._selectionInfoStore,i=this._componentListStore.refineComponentList(n.toValidJSON());i&&n.setRange(i)}this._setDocumentTheme();var r=this._documentDataStore.toValidJSON(),o=this._documentDataStore.getDocumentStatus();this._verifyAndCorrectDocumentTitle(this._componentListStore,{title:IS,extras:{docId:r.documentId,documentStatus:o}});var a=this._componentListStore.toValidJSON().filter(function(e){return!!e.ctype});return r.documentId=r.documentId.includes("TEMP-")?"":r.documentId,r.document=this._documentConverter.revertDocument(r.document,a),r.document.di=this._writingLogStore.getLogData(e),a.forEach(function(e){var n=xS.GET_DATA[e.ctype],i=n&&n(e);i&&t._traceInfo(SS,i,{docId:r.documentId,documentStatus:o,data:e})}),r},t.getDocumentTitle=function(){var e=this._componentListStore.getComponentByCtype("documentTitle");return e?e.getDocumentTitle():""},t.setDocumentTitle=function(e){var t=this._componentListStore.getComponentByCtype("documentTitle");if(t){var n=t.isFocused;return t.title.setPlainTextWithEmoji(e),n&&this._selectionInfoStore.setRange(t.getCompEndRange()),{start:t.getStartPoint(),end:t.getEndPoint()}}},t.getContentText=function(){return this._componentListStore.getContentText()},t.getAiContentText=function(){return this._componentListStore.getAiContentText()},t.getDocumentStatus=function(){return this._documentDataStore.getDocumentStatus()},t.isEmptyDocumentContent=function(){var e=this._componentListStore.getComponentList();if(this._documentDataStore.getDefaultComponentData().length!==e.length)return!1;var t=this._componentListStore.getComponentByCtype("text");return!(!t||!t.isEmpty())},t.setComponentList=function(e){this._componentListStore.resetCompList(e)},t.convertComponent=function(e){return this._documentConverter.convert(e)},t.convertComponents=function(e){return this._documentConverter.convertComponents(e,this._availableCompTypes)},t.revertComponent=function(e){return this._documentConverter.revert(e)},t.revertComponents=function(e){return this._documentConverter.revertComponents(e)},t._insertDefaultComponents=function(){var e=this._documentDataStore.getDefaultComponentData();this.setComponentList(e)},t._setDocumentTheme=function(){var e=this._themeStore.themeName;e&&this._documentDataStore.setTheme(e)},t.normalizeDocumentData=function(){this._nomalizeVideoComponets()},t._getBaseVideoTitle=function(e){var t=this._configAgent.get("infraConfig.video.videoDefaultTitle");return this._validateTitle(t)?t:(t=this.getDocumentTitle(),this._validateTitle(t)?t:(t=this.getContentText().substring(0,e),this._validateTitle(t)?t:this._i18n("video:untitled")))},t._validateTitle=function(e){var t=Object(vS.a)(e);return!Object(Ze.a)(t)},t._analysisVideoCompList=function(e,t){var n=this;return Object(Pt.a)(e,function(e,i){var r=i.getMediaMeta().title,o=void 0===r?"":r;if((o?o.substring(0,t.length):"")===t){var a=o.match(n._RX.titleNumberRx);if(Array.isArray(a)&&a.length>0){var s=parseInt(a[0].match(n._RX.digitRx)[0]);e.numOfIndexedComp+=1,e.maxIndex=Math.max(s,e.maxIndex)}}return o&&0!==o.length||e.untitledList.push(i),e},{numOfIndexedComp:0,maxIndex:0,untitledList:[]})},t._nomalizeVideoComponets=function(){if(!1!==this._configAgent.get("infraConfig.video.videoDefaultTitle")){var e=this._componentListStore.getComponentsByCtype("video");if(0!==e.length){var t=this._getBaseVideoTitle(e[0].getMaxVideoTitleLength()),n=this._analysisVideoCompList(e,t),i=n.numOfIndexedComp,r=n.maxIndex,o=n.untitledList;if(0!==o.length){var a=r+1;if(!this._validateTitle(t))throw new Error("The default string for untitled video was empty.");0===i&&1===o.length?o[0].normalizeData(t):o.length>0&&Object(c.a)(o,function(e,n){e=o[n];var i=" ("+(a+n)+")",r=e.getMaxVideoTitleLength(),s=t.substring(0,r-i.length)+i;e.normalizeData(s)})}}}},t._getVersionWeight=function(e){var t=(e||"1.0.0").split(".");return 1e6*t[0]+1e3*t[1]+1*t[2]},t._updateOglinkOembedSign=function(e){var t=this,n=this._getVersionWeight(e)>this._getVersionWeight("2.5.1"),i=this._componentListStore.getComponentsByCtypes(["oglink","oembed"]),r=n?i.filter(function(e){return e.emptySign}):i;if(!(r.length<1)){var o=this._configAgent.get("userInfo.userId");r.forEach(function(n){var i=n.ctype,r=n.link,a=n.inputUrl,s=r||a;t._beforeCrawling(),t._multiCrawlerRepository.fetchByCtype(s,i).then(function(r){r?(i!==r.ctype?t._replaceToCrawledComponent(n,r):n.updateSign(r),r.oembedSign||r.oglinkSign||t._traceInfo(OS,wS,{version:e,userId:o,ctype:i,url:s,result:r})):(t._replaceToTextComponent(n,s),t._traceInfo(OS,kS,{version:e,userId:o,ctype:i,url:s}))}).catch(function(){t._replaceToTextComponent(n,s),t._traceInfo(OS,kS,{version:e,userId:o,ctype:i,url:s})}).finally(function(){t._afterCrawling()})})}},t._replaceToCrawledComponent=function(e,t){var n=this._componentFactory.createComponentWithCompData(t);this._componentListStore.replace(e,n)},t._replaceToTextComponent=function(e,t){var n=this._componentFactory.createComponentWithCompData({ctype:"text",value:[{ctype:"paragraph",nodes:[{ctype:"textNode",value:t}]}]});this._componentListStore.replace(e,n);var i=this._componentListStore.getPrevComponent(n)||n,r=this._componentListStore.getNextComponent(n)||n;this._componentListStore.refineComponentList({start:i.getStartPoint(),end:r.getEndPoint()})},t._beforeCrawling=function(){this._editorStatusStore.busy(),this._eventDispatcher.emit(_.z.IN_PROGRESS)},t._afterCrawling=function(){this._editorStatusStore.idle(),this._eventDispatcher.emit(_.z.PROGRESS_COMPLETED)},t.getComponentByCtype=function(e){return this._componentListStore.getComponentByCtype(e)},t.getComponentsByCtype=function(e){return void 0===e&&(e=[]),this._componentListStore.getComponentList().filter(function(t){return e.includes(t.ctype)}).map(function(e){var t=e.toPlainJSON();return e.getPlainText&&(t.plainText=e.getPlainText()),t})},t.getFocusedComponent=function(){var e=this._selectionInfoStore.focus.compId;return this._componentListStore.getComponentById(e)},e}(),k()(M_.prototype,"setDocumentData",[D.d],Object.getOwnPropertyDescriptor(M_.prototype,"setDocumentData"),M_.prototype),k()(M_.prototype,"setDocumentTitle",[D.d],Object.getOwnPropertyDescriptor(M_.prototype,"setDocumentTitle"),M_.prototype),M_),AS=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._virtualEditable=_.W.get("virtualEditable")}var t=e.prototype;return t.getSelectedComponents=function(){var e=this._selectionInfoStore.toValidJSON(),t=e.compIdMap,n=e.start,i=e.end;return e.mode===_.P.MULTI_COMP?this._componentListStore.getComponentsByIds(Object.keys(t)):this._componentListStore.getComponentsBetween(n.compId,i.compId)},t.getInternalResourceImagesOnDocument=function(){var e=[];return function t(n){Object(c.a)(n,function(n){var i=n.ctype;"image"===i&&n.internalResource?e.push(n):"imageStrip"===i?t(n.images):"wrappingParagraph"===i?t([n.wrappedSection]):"imageGroup"===i&&t(n.images)})}(this._componentListStore.getComponentList()),e},t.getDraggableCompStoresWithinSelection=function(){return this._adjustTableCompSelection(),this.getCompStoresWithinSelection()},t._adjustTableCompSelection=function(e){void 0===e&&(e=this._selectionInfoStore.toValidJSON());var t=e,n=t.start,i=t.end;if(n.compId===i.compId){var r=this._componentListStore.getComponentById(n.compId);if("table"===r.ctype&&!r.isSelectedComponent){var o=r.selectAll();this._selectionInfoStore.setAnchorAndFocus(o)}}},t.getCompStoresWithinSelection=function(e){return void 0===e&&(e=this._selectionInfoStore.toValidJSON()),e.collapsed?[]:this._componentListStore.getCompStoresWithinSelection(e)},t.getPlainTextWithinSelection=function(e){void 0===e&&(e=this._selectionInfoStore.toValidJSON());var t="";return this.getCompStoresWithinSelection(e).forEach(function(e){t+=e.getPlainText()}),t},t.getPlainTextWithEmojiOfWritingTargetWithinSelection=function(e){void 0===e&&(e=this._selectionInfoStore.toValidJSON());var t="";return this.getCompStoresWithinSelection(e).forEach(function(e){_.s.includes(e.ctype)&&(t+=e.getPlainTextWithEmoji())}),t},t.getPlainTextWithContext=function(e){void 0===e&&(e=this._selectionInfoStore.toValidJSON());var t=this._componentListStore.firstBodyComponent.getStartPoint(),n=this._componentListStore.getLastComponent().getEndPoint(),i=e,r={start:t,end:i.start},o={start:i.end,end:n},a=this.getPlainTextWithEmojiOfWritingTargetWithinSelection(Re()({},e,r)),s=this.getPlainTextWithEmojiOfWritingTargetWithinSelection(Re()({},e,o));return{previous:a,selected:this.getPlainTextWithEmojiOfWritingTargetWithinSelection(e),next:s}},t.getTextInfoOfSelectionEnd=function(e){void 0===e&&(e=this._selectionInfoStore.toValidJSON());var t=e.end,n=this._componentListStore.getDerivedTextStyle(t),i=this._componentListStore.getComponentById(t.compId).ctype;return{style:Object(pp.a)(n,function(e){return null===e}),sourceCtype:i}},e}(),jS=function(){function e(e,t){this._componentListStore=e,this._componentFactory=t,this._themeStore=_.W.get("themeStore")}var t=e.prototype;return t.execute=function(){throw new Error("You should override 'execute' method")},t._findTargetParaIdSplittingTextComp=function(e,t){var n=e.refineSelection(t),i=n.start,r=n.end,o=e.extendPointToParagraphEnd(r),a=this._componentListStore.splitComponentByPoint(o).back;return a.getText().isEmpty()?this._componentListStore.deleteComponentById(a.id):a.removeFirstParagraph(),{startParaId:i.paraId,endParaId:r.paraId}},t._setStyleToDefault=function(e,t){var n=this._themeStore.getUserDefinedStyle(e.ctype);if(n){var i=t.reduce(function(e,t){return e[t]=n[t]||null,e},{});Object(Ze.a)(i)||(e.updateWholeCharacterStyle(i),e.updateWholeParagraphStyle(i))}},e}(),RS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e,t,n){var i=this,r=[],o=Re()({ctype:"text"},n);return e.forEach(function(e){var t=i._componentFactory.createComponentWithCompData(o);e.forEach(function(e){if("quotation"===e.ctype){e.resetStyle();var n=t.getText();n.mergeWith(e.value),e.source.isEmpty()||n.mergeWith(e.source),i._setStyleToDefault(t,["fontFamily","fontSizeCode","align","fontColor","lineHeight"])}else t.insert(e),"sectionTitle"===e.ctype&&i._setStyleToDefault(t,["fontSizeCode"])}),t.removeFirstParagraph(),t.updateTheme();var n=Object(At.a)(e),a=Object($r.a)(e);i._componentListStore.replaceBetween(n,a,t),r.push(t)}),r},t}(jS),NS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e,t,n){var i=this,r=[];return e.forEach(function(e){e.forEach(function(e){var o=e.ctype,a=[],s=[];if("text"===o||"wrappingParagraph"===o){var c=i._findTargetParaIdSplittingTextComp(e,t),l=c.startParaId,u=c.endParaId;a=e.detachParagraphs(l,u),s=["fontSizeCode"]}else"quotation"===o&&(e.resetStyle(),a=e.detachAllParagraphs(),s=["fontFamily","fontSizeCode","align","fontColor","lineHeight"]);var p=Re()({ctype:"sectionTitle"},n),d=a.map(function(e){var t=i._componentFactory.createComponentWithCompData(p);return e.isListParagraph()&&e.updateParagraphStyle({listType:"reset"}),t.removeFirstParagraph(),t.getText().addParagraph(e),i._setStyleToDefault(t,s),t.updateTheme(),r.push(t),t});i._componentListStore.insertComponentAfter(e,d),e.getText().isEmpty()&&i._componentListStore.deleteComponentById(e.id)})}),r},t}(jS),MS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e,t,n){var i=this,r=[],o=Re()({ctype:"quotation"},n);return e.forEach(function(e){var n=i._componentFactory.createComponentWithCompData(o);e.forEach(function(e){var r,o,a=e.ctype;if("text"===a||"wrappingParagraph"===a){var s=i._findTargetParaIdSplittingTextComp(e,t);r=s.startParaId,o=s.endParaId}else"sectionTitle"===a&&(r=e.getStartPoint().paraId,o=e.getEndPoint().paraId);var c=e.detachParagraphs(r,o);c.forEach(function(e){return e.replaceImageToText()}),n.getText().addParagraph(c)}),n.removeFirstParagraph(),n.resetStyle(),n.updateTheme();var a=Object(At.a)(e);i._componentListStore.insertComponentAfter(a,n),e.forEach(function(e){e.getText().isEmpty()&&i._componentListStore.deleteComponentById(e.id)}),r.push(n)}),r},t}(jS),BS=["text","sectionTitle","quotation"],WS=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore");var e=_.W.get("componentFactory");this._toTextCommand=new RS(this._componentListStore,e),this._toSectionTitleCommand=new NS(this._componentListStore,e),this._toQuotationCommand=new MS(this._componentListStore,e)}var t=e.prototype;return t.change=function(e,t,n){if(BS.includes(e)){var i=this._selectionInfoStore.toValidJSON(),r=this._getExecutionInfo(e,i,n),o=r.compGroups,a=r.command.execute(o,i,t);return this._findResultRange(a,i)}},t._getExecutionInfo=function(e,t,n){var i,r;switch(void 0===n&&(n=[]),e){case"text":i=this._getCompGroupsByTypes(Object(wn.a)(["text","sectionTitle","quotation"],n),t),r=this._toTextCommand;break;case"sectionTitle":i=this._getCompGroupsByTypes(Object(wn.a)(["text","quotation","wrappingParagraph"],n),t),r=this._toSectionTitleCommand;break;case"quotation":i=this._getCompGroupsByTypes(Object(wn.a)(["text","sectionTitle","wrappingParagraph"],n),t),r=this._toQuotationCommand}return{compGroups:i,command:r}},t._getCompGroupsByTypes=function(e,t){var n=[],i=[];return this._componentListStore.getSelectedComponents(t).forEach(function(t){e.includes(t.ctype)?i.push(t):i.length&&(n.push(i),i=[])}),i.length&&n.push(i),n},t._findResultRange=function(e,t){var n=t.start,i=t.end;if(!e.length)return{start:n,end:i};var r=e.reduce(function(e,t){return t.hasParagraph(n.paraId)&&(e.start=Object.assign(n,{compId:t.id,unitId:t.getText().id}),t.isEmptyTextNode(n)&&(e.start.offset=0)),t.hasParagraph(i.paraId)&&(e.end=Object.assign(i,{compId:t.id,unitId:t.getText().id}),t.isEmptyTextNode(i)&&(e.end.offset=0)),e},{});if(!r.start){var o=Object(At.a)(e);r.start=o.getStartPoint()}if(!r.end){var a=Object($r.a)(e);r.end=a.getEndPoint()}return r},e}(),US=function(){function e(){this._styleStore=_.W.get("styleStore"),this._themeStore=_.W.get("themeStore"),this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._virtualEditable=_.W.get("virtualEditable"),this._toolbarStore=_.W.get("toolbarStore"),this._eventDispatcherService=_.W.get("eventDispatcherService"),this._changeTextFormatCommand=_.W.get("changeTextFormatCommand")||new WS,this._representativeImageService=_.W.get("representativeImageService")}var t=e.prototype;return t.changeTextFormat=function(e,t,n){void 0===n&&(n=[]);var i=this._changeTextFormatCommand.change(e,t,n);i&&this._selectionInfoStore.setRange(i),this._refineComponentList()},t.toggleStyle=function(e,t){var n=this._styleStore.currentSelectedStyle,i=n[e];if(!i&&n.caption&&(i=n.caption[e]),"boolean"==typeof i){var r={name:e,value:!i};this.updateStyle(r,t),this._virtualEditable.updateAriaTextStyle(r)}},t.updateStyle=function(e,t){var n=this._runMethodOfSelectedComponents({method:"updateStyle",value:this._adjustStyleInfo(e),selectionInfo:t});this._setRangeWithPointList(n),this._updateToolbarState(),this._virtualEditable.refresh()},t.changeAllComponentsAlign=function(e){var t=this._componentListStore.getComponentList(),n=Object(At.a)(t).getStartPoint(),i=Object($r.a)(t).getEndPoint();this._runMethodOfSelectedComponents({method:"updateStyle",value:this._adjustStyleInfo(e),selectionInfo:{start:n,end:i}}),this._updateToolbarState(),this._virtualEditable.refresh()},t.changeLayout=function(e,t){void 0===t&&(t=[]);var n=this._selectionInfoStore.toValidJSON();this.updateProperty({layout:e},n,t),this._updateTheme(n)},t.changeContentMode=function(e,t){this.updateProperty({contentMode:e},t)},t.changeLink=function(e,t){e.value=bi.a.getEncodeUrl(e.value),this.updateProperty({link:e},t)},t.isValidLink=function(e){var t=wt.a.getUrlDomain(e);return wt.a.validateMalformedUrlOnly(t)},t.changeSize=function(e,t){var n=this._componentListStore,i=this._selectionInfoStore;(e.isApplyAllChecked?n.getComponentsByCtype(t):n.getComponentsBetween(i.start.compId,i.end.compId)).forEach(function(t){t.updateProperty({resizing:e})}),this._updateToolbarState(),this._virtualEditable.refresh()},t.updateCustomData=function(e,t){var n=this._componentListStore.getComponentById(e);n&&n.updateCustomData&&n.updateCustomData(t)},t.updateServiceData=function(e,t){var n=this._componentListStore.getComponentById(e);n&&n.updateServiceData&&n.updateServiceData(t)},t.updateProperty=function(e,t,n){void 0===t&&(t=this._selectionInfoStore.toValidJSON()),void 0===n&&(n=[]);var i=this._runMethodOfSelectedComponents({method:"updateProperty",value:e,selectionInfo:t,exclusion:n});this._setRangeWithPointList(i),this._updateToolbarState(),this._virtualEditable.refresh()},t.updateConfigAllCompomnent=function(){var e=this._componentListStore.getComponentList();Object(c.a)(e,function(e){e.updateConfig&&e.updateConfig()}),this._libraryPanelLayoutService||(this._libraryPanelLayoutService=_.W.get("libraryPanelLayoutService")),this._eventDispatcherService.emit(_.z.DOCUMENT_CHANGED,e),this._representativeImageService.updateAllList(e)},t._updateTheme=function(e){var t=this;this._componentListStore.getSelectedComponents(e).forEach(function(e){var n=e.ctype,i=t._themeStore.getComponentThemeStyle(n);i&&e.updateTheme(i)})},t._refineComponentList=function(){var e=this._selectionInfoStore,t=this._componentListStore.refineComponentList(e.toValidJSON());t&&e.setRange(t)},t._runMethodOfSelectedComponents=function(e){var t=e.method,n=e.value,i=e.selectionInfo,r=e.exclusion,o=void 0===r?[]:r;!0===Object(Ze.a)(i)&&(i=this._selectionInfoStore.toValidJSON());var a=i,s=a.start,c=a.end,l=[];return this._componentListStore.getSelectedComponents(i).filter(function(e){var t=e.ctype;return!o.includes(t)}).forEach(function(e){var r=e[t](n,i);r?l.push.apply(l,r):(e.id===s.compId&&l.push(s),e.id===c.compId&&l.push(c))}),l},t._adjustStyleInfo=function(e){var t,n=this._toCamelCase(e.name);return"line-height"===e.name&&(e.value=this._toLineHeightUnit(e.value)),(t={})[n]=e.value,t},t._setRangeWithPointList=function(e){if(e.length>0){var t=Object(At.a)(e),n=Object($r.a)(e);this._selectionInfoStore.setRange({start:t,end:n})}},t._toCamelCase=function(e){return"strikethrough"===e?"strikeThrough":Object(et.a)(e)},t._toLineHeightUnit=function(e){return(e/100).toFixed(2)},t.toLineHeight=function(e){return(100*e).toFixed(0)},t._updateToolbarState=function(){var e=this._styleStore.currentSelectedStyle;this._toolbarStore.updateToolbarState(e)},t.canBeListBySpace=function(e){var t=this;void 0===e&&(e=this._selectionInfoStore.toValidJSON());var n=e.start.compId,i=this._componentListStore.getComponentById(n);return null==i&&Object.keys(e.compIdMap).some(function(e){if(i=t._componentListStore.getComponentById(e))return!0}),!!["text","table","wrappingParagraph"].includes(i.ctype)&&i.canBeListBySpace(e)},t.convertToList=function(e){return void 0===e&&(e=this._selectionInfoStore.toValidJSON()),this._componentListStore.getComponentById(e.start.compId).convertToList(e)},t.getStyleValues=function(e){var t=this._selectionInfoStore.toValidJSON(),n=this._componentListStore.getSelectedComponents(t),i=t.start,r=t.end;return n.reduce(function(t,n){var o=n.getText();if(o){var a=n.id===i.compId?i:o.getStartPoint(),s=n.id===r.compId?r:o.getEndPoint();o.getNodesByBetween(a,s).forEach(function(n){var i=n.computedStyleForToolbar[e];t.push(i)})}return t},[])},e}(),FS=n(4),zS=n(168),VS={IMAGE_GROUP:"imageGroup",IMAGE_STRIP:"imageStrip",TABLE:"table",WRAPPING_PARAGRAPH:"wrappingParagraph"},GS=function(){function e(){this._cache={}}var t=e.prototype;return t.destory=function(){this._cache=null},t.hasByKey=function(e){return!!this._cache[e]},t.pushByKey=function(e,t){this._cache[e]=t},t.getByKey=function(e){return this._cache[e]},t.deleteByKey=function(e){delete this._cache[e]},t.updateCache=function(e){this._cache=e},e}(),HS=function(){function e(e){this._documentConverter=e,this._shadowCache=new GS}var t=e.prototype;return t.destroy=function(){this._shadowCache.destory(),this._shadowCache=null},t._needRepresetativeShadow=function(e){var t=e.ctype,n=e.unknownCompData,i=void 0===n?{}:n;return"unknown"===t&&Object(Ft.a)(VS,i.ctype)},t._hasShadowStore=function(e){return this._shadowCache.hasByKey(e)},t._pushShadowStore=function(e){var t=e.id;this._shadowCache.pushByKey(t,e)},t._getShadowStoreById=function(e){return this._shadowCache.getByKey(e)},t._getShadowStore=function(e){var t=e.id;return this._hasShadowStore(t)||this._pushShadowStore(this._makeShadowStore(e)),this._shadowCache.getByKey(t)},t._deleteShadowStore=function(e){var t=e.id;this._hasShadowStore(t)&&this._shadowCache.deleteByKey(t)},t._makeShadowStore=function(e){var t=e.ctype,n=e.id,i={state:this._documentConverter.convertCtype(e)},r=null;switch(t){case VS.IMAGE_GROUP:r=new zS.a(i);break;case VS.IMAGE_STRIP:r=new bp(i);break;case VS.WRAPPING_PARAGRAPH:r=new Mf.a(i);break;case VS.TABLE:r=new cy.a(i);break;default:throw new Error("This unknown component does not support a representative image settings.")}return e.id=n,r.id=n,r},t._updateOriginCompData=function(e,t){e.unknownCompData=Object(l.a)(t,e.unknownCompData)},t.updateCache=function(e){var t=this;void 0===e&&(e=[]),this._shadowCache.updateCache(e.reduce(function(e,n){var i=n.id;return t._hasShadowStore(i)&&(e[i]=t._getShadowStoreById(i)||n),e},{}))},t.releaseRepresentativeImage=function(e,t){if(!this._needRepresetativeShadow(e))return e.releaseRepresentativeImage(t);var n=e.unknownCompData,i=this._getShadowStore(n);i.releaseRepresentativeImage(t),this._updateOriginCompData(e,i.toValidJSON())},t.setRepresentativeImage=function(e,t){if(!this._needRepresetativeShadow(e))return e.setRepresentativeImage(t);var n=e.unknownCompData,i=this._getShadowStore(n);i.setRepresentativeImage(t),this._updateOriginCompData(e,i.toValidJSON())},t.getRepresentativeId=function(e){if(!this._needRepresetativeShadow(e))return e.getRepresentativeId();var t=e.unknownCompData;return this._getShadowStore(t).getRepresentativeId()},t.isRepresentativeImage=function(e){if(!this._needRepresetativeShadow(e))return e.isRepresentativeImage();var t=e.unknownCompData;return this._getShadowStore(t).isRepresentativeImage()},t.getRepresentativeCompStore=function(e){return this._needRepresetativeShadow(e)?this._getShadowStore(e.unknownCompData):e},e}(),qS=function(){function e(){this._configAgent=_.W.get("configAgent"),this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._identifier=null,this._identifiersCount=0,this._representativeComponentHelper=new HS(_.W.get("documentConverter"))}var t=e.prototype;return t.__ON_LAZY__=function(){this.syncRepresentativeImage()},t.destroy=function(){this._disposer&&this._disposer(),this._disposer=null,this._identifier=null,this._identifiersCount=0,this._representativeComponentHelper.destroy(),this._representativeComponentHelper=null},t._getData=function(){var e=this._parseIdentifier(this._identifier);if(e&&e.compId){var t=this._componentListStore.getComponentById(e.compId);return this._representativeComponentHelper.getRepresentativeCompStore(t).getRepresentativeInnerData()}return null},t._getComponentData=function(){var e=this._parseIdentifier(this._identifier);return e&&e.compId?this._componentListStore.getComponentById(e.compId).toValidJSON():null},t.getRepresentative=function(){var e=this;return{getData:function(t){return e._getData(t)},getComponentData:function(t){return e._getComponentData(t)}}},t.releaseRepresentativeImage=function(e){var t;if(e?t=e:(t=this._parseIdentifier(this._identifier),this._identifier=null),t){var n=this._componentListStore.getComponentById(t.compId);n&&this._releaseRepresentativeImage(n,t)}},t.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId,i=e.paraId,r=e.nodeId;if(this.releaseRepresentativeImage(),!1!==this._representativeEnabled){var o=this._componentListStore.getComponentById(t);this._setRepresentativeImage(o,{compId:t,unitId:n,paraId:i,nodeId:r}),this._updateCurrentIdentifier(o)}},t.syncRepresentativeImage=function(){var e=this,t=this._componentListStore.getComponentList();this.updateAllList(t),this._disposer=D.f.reaction(function(){return e._makeIdentifiers(t)},function(n){e.updateAllList(t,n)})},t.updateAllList=function(e,t){t||(t=this._makeIdentifiers(e)),this.updateRepresentativeImage(t),this._representativeComponentHelper.updateCache(e)},t.updateRepresentativeImage=function(e){var t=this;if(!1!==this._representativeEnabled){var n=this._componentListStore.getComponentList(),i=this._getRepresentative(e),r=this._parseIdentifier(this._identifier);if(this._identifiersCount>e.length){var o=e.find(function(e){var n=t._parseIdentifier(e);return r&&r.src===n.src});if(o)return void this._setSameRepresetiveImage(o,e)}if(0===i.length){var a=Object(er.a)(n,function(e){return t._isRepresentativeImage(e)});a?(this._setRepresentativeImage(a,{}),this._updateCurrentIdentifier(a)):this._identifier=null}else i.length>1?Object(c.a)(i,function(e){var n=t._parseIdentifier(e);!n||r&&r.comparableKey===n.comparableKey||t.releaseRepresentativeImage(n)}):this._identifier=i[0];this._identifiersCount=e.length}else this.releaseRepresentativeImage()},t._setSameRepresetiveImage=function(e,t){var n=this._parseIdentifier(e),i=n.compId,r=n.paraId,o=n.unitId,a=n.nodeId,s=this._componentListStore.getComponentById(i);this._setRepresentativeImage(s,{compId:i,paraId:r,unitId:o,nodeId:a}),this._updateCurrentIdentifier(s),this._identifiersCount=t.length},t._updateCurrentIdentifier=function(e){var t=this._getRepresentativeId(e);this._identifier=Object(FS.a)(t)?this._getRepresentative(t)[0]:t},t._makeIdentifiers=function(e){var t=this,n=[];return Object(c.a)(e,function(e){var i=t._getRepresentativeId(e);Object(FS.a)(i)?n=[].concat(n,i):n.push(i)}),n},t._getRepresentative=function(e){return Object(jn.a)(e,function(e){return/:true:https?/.test(e)})},t._parseIdentifier=function(e){if(!e)return null;var t=e.split("|"),n=t[0],i=t[1],r=t[2],o=t[3];if(o){var a=o.split(":"),s=a[0];return{compId:n,unitId:i,paraId:r,nodeId:s,src:Object($r.a)(a),comparableKey:s}}if(i){if(r){var c=r.split(":"),l=c[0];return{compId:n,paraId:i,nodeId:l,src:Object($r.a)(c),comparableKey:l}}var u=i.split(":"),p=u[0];return{compId:n,unitId:p,src:Object($r.a)(u),comparableKey:p}}var d=n.split(":"),h=d[0];return{compId:h,src:Object($r.a)(d),comparableKey:h}},t._releaseRepresentativeImage=function(e,t){e&&this._representativeComponentHelper.releaseRepresentativeImage(e,t)},t._setRepresentativeImage=function(e,t){e&&this._representativeComponentHelper.setRepresentativeImage(e,t)},t._getRepresentativeId=function(e){if(e)return this._representativeComponentHelper.getRepresentativeId(e)},t._isRepresentativeImage=function(e){if(e)return this._representativeComponentHelper.isRepresentativeImage(e)},B()(e,[{key:"_representativeEnabled",get:function(){return this._configAgent.get("productConfig.representativeEnabled")}}]),e}(),JS=function(){function e(){this._componentListStore=_.W.get("componentListStore")}return e.prototype.togglePanoramaDisplay=function(e){this._componentListStore.getComponentById(e).togglePanoramaDisplay()},e}(),KS=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore")}return e.prototype.execute=function(){},e}(),XS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){e.fromPoint,e.toPoint,e.direction,e.isShrink,e.eventType},t}(KS),YS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.currentPoint,n=e.toPoint,i=e.direction,r=e.isShrink,o=i===_.u.UP||i===_.u.LEFT,a=this._componentListStore.getComponentById(n.compId);switch(a.attributes.selection){case"query":var s=a.querySelection(e);if(s)return this._selectionInfoStore.setAnchorAndFocus(s),!0;break;case"isolated":if(t.compId===n.compId)break;if(o){var c=this._componentListStore.getNextComponentById(n.compId);this._selectionInfoStore.setFocus(c.getStartPoint())}else{var l=this._componentListStore.getPrevComponentById(n.compId);this._selectionInfoStore.setFocus(l.getEndPoint())}return!0}switch(a.getStoreById(n.unitId).attributes.selection){case"object":case"trapped":case"selectable-unit":return r?this._selectionInfoStore.setFocus(o?a.getEndPoint():a.getStartPoint()):this._selectionInfoStore.setFocus(o?a.getStartPoint():a.getEndPoint()),!0}return!1},t}(XS),QS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.currentPoint,n=e.direction,i=this._componentListStore.getComponentById(t.compId),r=n===_.u.UP||n===_.u.LEFT;if(t.compId!==t.unitId){var o=i.getStoreById(t.unitId);return this._selectionInfoStore.setFocus(r?o.getStartPoint():o.getEndPoint()),!0}return!1},t}(XS),ZS=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.currentPoint,n=e.direction,i=this._componentListStore.getComponentById(t.compId);return n===_.u.UP||n===_.u.LEFT?this._selectionInfoStore.setFocus(i.getStartPoint()):this._selectionInfoStore.setFocus(i.getEndPoint()),!0},t}(XS),$S=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.currentPoint,n=e.toPoint,i=e.direction,r=e.isShrink,o=i===_.u.UP||i===_.u.LEFT,a=this._componentListStore.getComponentById(n.compId),s=a.attributes.selection;if("query"===s){var c=a.querySelection(e);if(c)return this._selectionInfoStore.setAnchorAndFocus(c),!0}if("isolated"===s){if(t.compId===n.compId)return!1;if(o){var l=this._componentListStore.getNextComponentById(n.compId);this._selectionInfoStore.setFocus(l.getStartPoint())}else{var u=this._componentListStore.getPrevComponentById(n.compId);this._selectionInfoStore.setFocus(u.getEndPoint())}return!0}return"object"===s&&(r?this._selectionInfoStore.setFocus(o?a.getEndPoint():a.getStartPoint()):this._selectionInfoStore.setFocus(o?a.getStartPoint():a.getEndPoint()),!0)},t}(XS),eC=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.execute=function(e){var t=this._componentListStore.getComponentById(e.currentPoint.compId).querySelection(e);return t?(this._selectionInfoStore.setAnchorAndFocus(t),!0):this._executeDefaultSelectionCommand(e)},n._executeDefaultSelectionCommand=function(e){var t=e.currentPoint,n=e.toPoint,i=e.direction,r=e.isShrink,o=i===_.u.UP||i===_.u.LEFT,a=this._componentListStore.getComponentById(n.compId);switch(a.attributes.selection){case"query":var s=a.querySelection(e);if(s)return this._selectionInfoStore.setAnchorAndFocus(s),!0;break;case"isolated":if(t.compId===n.compId)break;if(o){var c=this._componentListStore.getNextComponentById(n.compId);this._selectionInfoStore.setFocus(c.getStartPoint())}else{var l=this._componentListStore.getPrevComponentById(n.compId);this._selectionInfoStore.setFocus(l.getEndPoint())}return!0;default:return r?this._selectionInfoStore.setFocus(o?a.getEndPoint():a.getStartPoint()):this._selectionInfoStore.setFocus(o?a.getStartPoint():a.getEndPoint()),!0}},t}(XS),tC=n(53),nC=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.execute=function(e){var t=e.currentPoint,n=e.toPoint,i=e.direction,r=e.eventType,o=this._componentListStore.getComponentById(t.compId);if(tC.a.event.isKeyboardEvent(r))return this._selectComponent(o);var a=i===_.u.UP||i===_.u.LEFT;if(this._extendAnchorToComponent(o,a),t.compId===n.compId)return this._extendBlock(o,a);var s=this._componentListStore.getComponentById(n.compId);switch(s.attributes.selection){case"isolated":return this._extendBlockToIsolatedAdjacent(s,a);case"object":case"select":case"trapped":case"query":return this._extendBlock(s,a);default:return!1}},n._selectComponent=function(e){return this._selectionInfoStore.select([e.id]),!0},n._extendAnchorToComponent=function(e,t){this._selectionInfoStore.setAnchor(t?e.getEndPoint():e.getStartPoint())},n._extendFocusToStart=function(e){this._selectionInfoStore.setFocus(e.getStartPoint())},n._extendFocusToEnd=function(e){this._selectionInfoStore.setFocus(e.getEndPoint())},n._extendBlock=function(e,t){return t?this._extendFocusToStart(e):this._extendFocusToEnd(e),!0},n._extendBlockToIsolatedAdjacent=function(e,t){if(t){var n=this._componentListStore.getNextComponent(e);this._extendFocusToStart(n)}else{var i=this._componentListStore.getPrevComponent(e);this._extendFocusToEnd(i)}return!0},t}(XS),iC={},rC={getCommand:function(e){if(iC[e])return iC[e];var t=this._createInstance(e);return iC[e]=t,t},destroy:function(){Object(c.a)(iC,function(e,t){iC[t]=null})},_createInstance:function(e){switch(e){case"text":return new YS;case"trapped":return new QS;case"isolated":return new ZS;case"query":case"query-with-trapped":return new eC;case"selectable-unit":return new nC;default:return new $S}}},oC=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){e.toPoint,e.fromPoint,e.direction,e.eventType},t}(KS),aC=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.fromPoint,n=e.toPoint,i=this._componentListStore.getComponentById(n.compId);if(!i)return!1;if("query"===i.attributes.cursor){var r=i.queryCursor(e).range;if(r)return this._selectionInfoStore.setRange(r),!0}var o=i.getStoreById(n.unitId);if(!o)return!1;switch(o.attributes.cursor){case"selectable-unit":return t.compId===n.compId&&this._selectionInfoStore.isSingleCompMode()?this._selectionInfoStore.selectUnit(n):this._selectionInfoStore.select([n.compId]),!0;case"select":return this._selectionInfoStore.selectUnit(n),!0}return!1},t}(oC),sC={},cC={getCommand:function(e){if(sC[e])return sC[e];var t=this._createInstance(e);return sC[e]=t,t},destroy:function(){Object(c.a)(sC,function(e,t){sC[t]=null})},_createInstance:function(){return new aC}},lC={trap:function(e,t,n){if(e===_.u.UP){var i=Object.assign(t.getStartPoint(),{compId:n});return{start:i,end:i}}if(e===_.u.DOWN){var r=Object.assign(t.getEndPoint(),{compId:n});return{start:r,end:r}}},toPrev:function(e,t,n,i){var r=e.getPrevComponent(t);if(!r&&i)return this.trap(n,i,t.id);switch(r.attributes.cursor){case"select":case"selectable-unit":return r.getComponentActiveRange();case"left-and-right":return this.toUnit(e,n,{compId:r.id});default:return null}},toPrevComponent:function(e,t,n){var i=e.getPrevComponent(t);if(!i)return t.getCompStartRange();switch(i.attributes.cursor){case"left-and-right":return this.toUnit(e,n,{compId:i.id});default:return this._getNextRangeByDirection(!0,i)}},toNext:function(e,t,n,i){var r=e.getNextComponent(t);if(!r&&i)return this.trap(n,i,t.id);switch(r.attributes.cursor){case"select":case"selectable-unit":return r.getComponentActiveRange();case"left-and-right":return this.toUnit(e,n,{compId:r.id});default:return null}},toNextComponent:function(e,t,n){var i=e.getNextComponent(t);if(!i)return t.getCompEndRange();switch(i.attributes.cursor){case"left-and-right":return this.toUnit(e,n,{compId:i.id});default:return i.getComponentActiveRange()}},toUnit:function(e,t,n){var i=e.getComponentById(n.compId).getStoreById(n.unitId),r=t===_.u.UP||t===_.u.LEFT;return this._shouldTrapCursor(i)?this.trap(t,i,n.compId):r?this._findLeftRange(e,t,n):this._findRightRange(e,t,n)},_getPrevUnitRange:function(e){var t=e.getPrevUnit().getComponentActiveRange();return t.start.compId=e.id,t.end.compId=e.id,t},_getNextRangeByDirection:function(e,t){if(e){var n=t.getEndPoint();return{start:n,end:n}}var i=t.getStartPoint();return{start:i,end:i}},_getNextUnitRange:function(e,t){var n=e.getNextUnit(),i=t===_.u.UP||t===_.u.LEFT,r=this._getNextRangeByDirection(i,n);return r.start.compId=e.id,r.end.compId=e.id,r},_findLeftRange:function(e,t,n){var i=e.getComponentById(n.compId),r=i.getPrevUnit(),o=i.getNextUnit();return r.isFocused?this.toPrev(e,i,t,r):o.isFocused?this._getPrevUnitRange(i):this._getNextUnitRange(i,t)},_findRightRange:function(e,t,n){var i=e.getComponentById(n.compId),r=i.getPrevUnit(),o=i.getNextUnit();return r.isFocused?this._getNextUnitRange(i,t):o.isFocused?this.toNext(e,i,t,o):this._getPrevUnitRange(i)},_shouldTrapCursor:function(e){return e&&"trapped"===e.attributes.cursor}},uC=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.fromPoint,n=e.toPoint,i=e.direction,r=this._componentListStore,o=r.getComponentById(n.compId);switch(o.attributes.cursor){case"selectable-unit":return this._selectionInfoStore.select([o.id]),!0;case"select":if(t.compId!==n.compId)return this._selectionInfoStore.select([o.id]),!0;break;case"left-and-right":var a=lC.toUnit(r,i,n);return this._selectionInfoStore.setRange(a),!0;case"query":var s=o.queryCursor(e),c=s.type,l=s.range;if("next-component"===c&&(l=lC.toNextComponent(r,o,i)),l)return this._selectionInfoStore.setRange(l),!0}return!1},t}(oC),pC=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.direction,n=e.fromPoint,i=this._componentListStore.getComponentById(n.compId).getStoreById(n.unitId);if(t===_.u.UP){var r=i.getStartPoint();this._selectionInfoStore.setRange({start:r,end:r})}if(t===_.u.DOWN){var o=i.getEndPoint();this._selectionInfoStore.setRange({start:o,end:o})}return!0},t}(oC),dC=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.execute=function(e){var t=e.fromPoint,n=e.direction,i=this._componentListStore.getComponentById(t.compId),r=i.queryCursor(e),o=r.type,a=r.range;switch(o){case"next-component":return this._moveToLowerComponent(i,n),!0;case"prev-component":return this._moveToUpperComponent(i,n),!0;case"range":return a?(this._setRange(a),!0):(this._moveToNextComponentByDirection(i,n),!0)}},n._moveToUpperComponent=function(e,t){var n=this._componentListStore,i=lC.toPrevComponent(n,e,t);this._selectionInfoStore.setRange(i)},n._moveToLowerComponent=function(e,t){var n=this._componentListStore,i=lC.toNextComponent(n,e,t);this._selectionInfoStore.setRange(i)},n._setRange=function(e){this._selectionInfoStore.setRange(e)},n._moveToNextComponentByDirection=function(e,t){t===_.u.UP||t===_.u.LEFT?this._moveToUpperComponent(e,t):this._moveToLowerComponent(e,t)},t}(oC),hC=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(e){var t=e.direction,n=e.fromPoint,i=this._componentListStore,r=lC.toUnit(i,t,n);return!!r&&(this._selectionInfoStore.setRange(r),!0)},t}(oC),gC=function(e){function t(){return e.apply(this,arguments)||this}return S()(t,e),t.prototype.execute=function(){return!0},t}(oC),fC={},mC={getCommand:function(e){if(fC[e])return fC[e];var t=this._createInstance(e);return fC[e]=t,t},destroy:function(){Object(c.a)(fC,function(e,t){fC[t]=null})},_createInstance:function(e){switch(e){case"trapped":return new pC;case"left-and-right":return new hC;case"query":return new dC;case"selectable-unit":return new gC;default:return new uC}}},yC={getCommand:function(e,t){return tC.a.event.isKeyboardEvent(e)?mC.getCommand(t):cC.getCommand(t)},destroy:function(){cC.destroy(),mC.destroy()}},vC=function(){function e(){this._selectionInfoStore=_.W.get("selectionInfoStore"),this._componentListStore=_.W.get("componentListStore"),this._virtualEditable=_.W.get("virtualEditable"),this._contentsToolbarLayoutService=_.W.get("contentsToolbarLayoutService")}var t=e.prototype;return t.destroy=function(){yC.destroy(),rC.destroy()},t.moveCursor=function(e){var t=e.direction,n=e.toPoint,i=e.eventType,r=this._selectionInfoStore.focus;return this._getCursorCommand(i,r).execute({direction:t,toPoint:n,fromPoint:r,eventType:i})},t._getCursorCommand=function(e,t){var n=this._componentListStore.getComponentById(t.compId),i=n.getStoreById(t.unitId)||n,r=n.attributes.cursor;return"left-and-right"===r?yC.getCommand(e,r):yC.getCommand(e,i.attributes.cursor)},t.selectAsBlock=function(e){var t=e.direction,n=e.toPoint,i=e.isShrink,r=e.eventType;if(null===n.compId)return!1;var o=this._selectionInfoStore,a=o.focus,s=o.anchor,c=this._componentListStore.getComponentById(a.compId).getStoreById(a.unitId);return rC.getCommand(c.attributes.selection).execute({currentPoint:a,toPoint:n,focus:a,anchor:s,direction:t,isShrink:i,eventType:r})},t.isSelectAllable=function(){var e=this._selectionInfoStore.focus,t=this._componentListStore.getComponentById(e.compId).getStoreById(e.unitId),n=t.attributes.selection;if("trapped"===n||"query-with-trapped"===n)return!1===Object($e.a)(t.getStartPoint(),t.getEndPoint());var i=this.getComponentsRangeWithoutDocumentTitle();return!1===Object($e.a)(i.start,i.end)},t.selectAroundWord=function(){return this._virtualEditable.extendToAroundWordBySelectionInfo(),!this._selectionInfoStore.collapsed},t.selectAll=function(){var e=this,t=this._selectionInfoStore.focus,n=this._componentListStore.getComponentById(t.compId),i=n.getStoreById(t.unitId),r=i.attributes.selection;if("trapped"!==r&&"query-with-trapped"!==r){var o=this.getComponentsRangeWithoutDocumentTitle();this._selectionInfoStore.setRange(o),setTimeout(function(){if(e._contentsToolbarLayoutService){var t=e._virtualEditable.getClientRects();e._contentsToolbarLayoutService.updateContentsToolbarPosition({clientRects:t,range:{collapsed:!1}})}},100)}else{var a=Re()({compId:n.id},i.getStartPoint()),s=Re()({compId:n.id},i.getEndPoint());this._selectionInfoStore.setRange({start:a,end:s})}},t.getComponentsRangeWithoutDocumentTitle=function(){var e=this._componentListStore.filter(function(e){return"documentTitle"!==e.ctype});return{start:Object(At.a)(e).getStartPoint(),end:Object($r.a)(e).getEndPoint()}},t.isCurrentAnchorUnitId=function(e){return this._selectionInfoStore.anchor.unitId===e},t.selectCurrentParagraph=function(){var e=this._selectionInfoStore.toPlainJSON(),t=e.mode,n=e.end;if(t===fS.d.CURSOR){var i=this._componentListStore.getComponentById(n.compId).getText().getParagraphById(n.paraId),r=[i.getStartPoint(),i.getEndPoint()],o=r[0],a=r[1],s={start:Re()({},n,o),end:Re()({},n,a)};this._selectionInfoStore.setRange(s)}},t.selectPrevAllText=function(){var e=this._selectionInfoStore.toPlainJSON(),t=e.mode,n=e.end;if(t===fS.d.CURSOR){var i=this._componentListStore.firstBodyComponent.getStartPoint();this._selectionInfoStore.setRange({start:i,end:n})}},t.setRange=function(e){this._selectionInfoStore.setRange(e)},t.collapse=function(e){this._selectionInfoStore.mode===fS.d.BLOCK&&this._selectionInfoStore.collapse(e)},e}(),_C=function(){function e(){this._themeStore=_.W.get("themeStore"),this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore")}var t=e.prototype;return t.changeTheme=function(e){this._themeStore.changeThemeName(e)&&this._updateAllComponents()},t.refreshTheme=function(){this._updateAllComponents()},t.getComponentThemeStyle=function(e){return this._themeStore.getComponentThemeStyle(e)},t._updateAllComponents=function(){var e=this;this._componentListStore.forEach(function(t){var n=e.getComponentThemeStyle(t.ctype);n&&t.updateTheme(n)})},e}(),bC=(B_=function(){function e(){this._configAgent=_.W.get("configAgent"),this._tokenStore=_.W.get("tokenStore")}var t=e.prototype;return t.readyForAuthorization=function(e){this._setTokenAuthorizationInGlobalHeader(),this._setRefreshAuthTokenInterceptor(),this._setAppIdInGlobalHeader(e)},t._setTokenAuthorizationInGlobalHeader=function(){var e=this._configAgent.get("userInfo.token");void 0!==e&&null!==e&&(this._tokenStore.setAuthToken(e),Gt.a.setGlobalHeader("SE-Authorization",e))},t.invalidateAuthToken=function(){this._tokenStore.setAuthToken(null),Gt.a.setGlobalHeader("SE-Authorization",null)},t._setAppIdInGlobalHeader=function(e){Gt.a.setGlobalHeader("SE-App-Id",e)},t._setRefreshAuthTokenInterceptor=function(){var e=this;Gt.a.addResponseErrorInterceptor(function(t){var n=t.response;return e._isAuthTokenExpired(n)?e._refreshAuthToken(t.config).then(e._retryFailedRequest):Promise.reject(t)},Number.MAX_SAFE_INTEGER)},t._isAuthTokenExpired=function(e){if(!e||403!==e.status)return!1;var t=e.data||{},n=t.errorMessage,i=t.errorDetailMessage;return"Token Expired"===n||"Token Expired"===i},t._retryFailedRequest=function(e){var t=e.token,n=e.config;return this._tokenStore.setAuthToken(t),Gt.a.setGlobalHeader("SE-Authorization",t),n.headers&&(n.headers["SE-Authorization"]=t),Gt.a.retry(n)},t._refreshAuthToken=function(e){var t,n=this._configAgent.get("apiInfo.fetchAuthToken"),i="target_appcode="+this._configAgent.get("serviceInfo.appCode")+"&"+("user_id="+this._configAgent.get("userInfo.userId"))+"&"+("t="+Date.now());return Gt.a.get(n+"?"+i,{options:{headers:(t={},t["SE-Authorization"]=this._tokenStore.getAuthToken(),t),withCredentials:!0,simpleRequestForced:!0},success:function(t){return{token:t.token,config:e}}})},e}(),k()(B_.prototype,"_retryFailedRequest",[te.autobind],Object.getOwnPropertyDescriptor(B_.prototype,"_retryFailedRequest"),B_.prototype),B_),SC=function(){function e(){this._configAgent=_.W.get("configAgent"),this._componentFactory=_.W.get("componentFactory"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._componentListStore=_.W.get("componentListStore"),this._multiCrawlerRepository=new _S.a({url:this._configAgent.get("apiInfo.fetchMultiCrawler")})}var t=e.prototype;return t.crawlFrom=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._multiCrawlerRepository.fetch(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return this._exceptionHandler(n),e.abrupt("return",this._componentFactory.createComponentWithCompData(n));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.crawlFromReturnRaw=function(){var e=Tt()(It.a.mark(function e(t){var n;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._multiCrawlerRepository.fetch(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return this._exceptionHandler(n),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.getCrawlerInfo=function(){var e=this._selectionInfoStore.toValidJSON(),t=e.mode,n=e.start,i=this._componentListStore.getComponentById(n.compId).getStoreById(n.unitId),r="text"===i.attributes.insertion&&i.isLinkAllowed();if(t===_.P.CURSOR&&r){var o=i.getUrlInNode(n);if(!o)return null;var a=i.changeLink({type:"url",value:bi.a.prependProtocol(bi.a.getEncodeUrl(o.url))},o.range);return this._selectionInfoStore.setRange({start:Object($r.a)(a),end:Object($r.a)(a)}),o.url}return null},t._exceptionHandler=function(){},e}(),CC=function(){function e(){var e=_.W.get("componentFactory").getAvailableCompType().includes("documentTitle");this._validateRules=e?[_.db.titleContentsRequired,_.db.contentsRequired,_.db.titleRequired]:[_.db.contentsRequired]}var t=e.prototype;return t.validateAsync=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.eb.validate(this._validateRules,t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),t.validate=function(e){try{return _.eb.validate(this._validateRules,e)}catch(e){return e}},e}(),IC=function(){function e(){this._configAgent=_.W.get("configAgent"),this._componentFactory=_.W.get("componentFactory"),this._componentListStore=_.W.get("componentListStore")}var t=e.prototype;return t.openFileDialog=function(){return Ma.a.openFileDialog({multiple:!1,accept:""}).then(function(e){return e[0]})},t.openMyboxPopup=function(){return this._myboxPopup=ki.getInstance("mybox-file"),this._myboxPopup.open({mode:"all",maxCount:1})},t.closeMyboxPopup=function(){this._myboxPopup&&this._myboxPopup.close(),this._myboxPopup=null},t.uploadLocalFile=function(e,t,n){var i=this,r=this._configAgent.get("userInfo.userId"),o=this._configAgent.get("apiInfo.addFile");return this._updatePhase(t,_.O.PROCESSING),Gt.a.post(o,{data:this._createFormData(r,e),options:{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},withCredentials:!0,timeout:1/0,onUploadProgress:function(e){n.progress(e,t)}},success:function(e){var r=i._refineFileUploadResponse(e);n.success(r,t)},errorParser:function(e){return e},error:function(e){return n.error(e,t)}}).finally(function(){i._updatePhase(t,_.O.DONE)})},t.uploadCloudFile=function(e,t,n){var i=this,r=this._configAgent.configMap.apiInfo,o=(void 0===r?{}:r).addNCloudFile;return this._updatePhase(t,_.O.PROCESSING),Gt.a.post(o,{data:{fileUrl:e.downloadUrl,fileName:e.name,fileFileName:e.name},options:{headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},onUploadProgress:function(e){n.progress(e,t)}},success:function(e){var r=i._refineFileUploadResponse(e.result||e);n.success(r,t)},errorParser:function(e){return e},error:function(i){return n.error(i,t,e)}}).finally(function(){i._updatePhase(t,_.O.DONE)})},t._createFormData=function(e,t){var n=new FormData;return n.append("userId",e),n.append("file",t,t.name),n},t._refineFileUploadResponse=function(e){return{fileId:e.fileId||e.id,fileName:e.fileName,fileSize:e.fileSize}},t._updatePhase=function(e,t){var n=this._componentListStore.getComponentById(e);n&&n.updatePhase(t)},e}(),OC=n(315),TC=function(){function e(){var e=this;this._configAgent=_.W.get("configAgent"),this._componentListStore=_.W.get("componentListStore"),this._audioUploader=_.W.get("audioUploader"),this._audioUploader||n.e(71).then(n.bind(null,1371)).then(function(t){var n=t.default,i=e._configAgent.get("infraInfo.audioInfra")||{},r={audioSessionKeyAPI:e._configAgent.get("apiInfo.fetchAudioUploadSessionKey"),audioUploadAPI:i.uploadAPI};e._audioUploader=new n(r)})}var t=e.prototype;return t.openFileDialog=function(){var e=[".mp3",".m4a",".wav",".wma"].join(",");return Ma.a.openFileDialog({multiple:!1,accept:e}).then(function(t){return Object(OC.a)(t,function(t){return Ma.a.isAcceptable(t,e)})}).then(function(e){return{validFiles:e[0],invalidFiles:e[1]}})},t.uploadLocalFile=function(){var e=Tt()(It.a.mark(function e(t,n,i){var r=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,o){return r._audioUploader.warmUp().then(function(){return r._updatePhase(n,_.O.PROCESSING),r._audioUploader.upload(t,{progress:function(e){i.progress(e,n)}}).then(function(t){if("SUCCESS"===t.code){var n=r._refineResponse(t);return e(n)}return o(t)}).catch(function(e){return o(e)}).finally(function(){r._updatePhase(n,_.O.DONE)})}).catch(function(e){return o(e)})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}(),t._refineResponse=function(e){var t=e;return{audioId:t.audioId,fileName:t.fileName,fileSize:t.fileSize}},t._updatePhase=function(e,t){var n=this._componentListStore.getComponentById(e);n&&n.updatePhase(t)},e}(),LC=n(370),EC=n(186),PC=n(721),wC=function(){function e(e){var t=e.id,n=e.code,i=e.file,r=e.errorCodeMap,o=void 0===r?{}:r,a=e.errorDescriptionMap,s=void 0===a?{}:a;this.id=t,this.code=n||i.code,this.file=i,this.accept=i.accept||null,this.errorCodeMap=o,this.errorDescriptionMap=s}return B()(e,[{key:"fileName",get:function(){return this.file.name}},{key:"fileSize",get:function(){return this.file.size}},{key:"cause",get:function(){return this.errorCodeMap[this.code]}},{key:"description",get:function(){var e=this.errorDescriptionMap[this.code];return"UNSUPPORTED_IMAGE"===this.code&&(e=this.file.name+e),e}},{key:"descriptionWithoutFileName",get:function(){return this.errorDescriptionMap[this.code]}}]),e}();function kC(e,t){var n=Object(OC.a)(e,function(e){return Ma.a.isAcceptable(e,t)});return{validFiles:n[0],invalidFiles:n[1].map(function(e){return 0===e.size?e.code="NO_ORIGINAL_IMAGE":(e.code="UNSUPPORTED_EXTENSION",e.accept=t),e})}}var xC,DC=function(){function e(){var e=this;this._generateImageUploadError=function(t,n){var i=t.file;"string"==typeof i.url&&(i={name:t.fileName||e._i18n("imageUploader:unknown_filename",{extraInfo:n>=2?" ("+n+")":""}),size:t.fileSize||0});var r=i.id||t.id,o=i.code||t.code||"UNSUPPORTED_IMAGE";return new wC({id:r,code:o,file:i,errorCodeMap:e._errorCodeMap,errorDescriptionMap:e._errorDescriptionMap})},this._configAgent=_.W.get("configAgent"),this._sentryManager=_.W.get("sentryManager"),this.maxImageUploadSize=this._configAgent.get("infraConfig.image.maxImageUploadSize"),this.imageMaxUploadCount=this._configAgent.get("infraConfig.image.maxUploadCount")||1/0,this.componentFactory=_.W.get("componentFactory"),this.componentListStore=_.W.get("componentListStore"),this._imageUploader=_.W.get("imageUploader"),this._imageUploader||n.e(72).then(n.bind(null,1372)).then(function(t){var n=t.default,i=e._makePhotoInfraUploaderConfig();e._imageUploader=new n(i)}),this._i18n=_.W.get("i18n"),this._errorCodeMap={NO_ORIGINAL_IMAGE:this._i18n("errorCauseMap:check_original_image"),UNSUPPORTED_IMAGE:this._i18n("errorCauseMap:unsupported_image"),UNSUPPORTED_EXTENSION:this._i18n("errorCauseMap:unsupported_extension"),LIMITATION_BY_SESSION_COUNT:this._i18n("errorCauseMap:limitation_by_session_count"),LIMITATION_BY_SESSION_SIZE:this._i18n("errorCauseMap:limitation_by_session_size"),LIMITATION_BY_IMAGE:this._i18n("errorCauseMap:limitation_by_image"),INVALID_PARAMETER:this._i18n("errorCauseMap:invalid_parameter"),DENY_ANIMATED_IMAGE:this._i18n("errorCauseMap:deny_animated_image")};var t=this._configAgent.get("infraConfig.image.acceptExt")||Ma.a.DEFAULT_IMAGE_ACCEPT_LIST,i=Ma.a.toPrintUpperText(t),r=this._configAgent.isMobile()?"":" ";this._errorDescriptionMap={NO_ORIGINAL_IMAGE:this._i18n("errorDescriptionMap:check_original_image"),UNSUPPORTED_IMAGE:this._i18n("errorDescriptionMap:unsupported_image"),UNSUPPORTED_EXTENSION:this._i18n("errorDescriptionMap:unsupported_extension",{allowExtList:i}),LIMITATION_BY_SESSION_COUNT:this._i18n("errorDescriptionMap:limitation_by_session_count"),LIMITATION_BY_SESSION_SIZE:this._i18n("errorDescriptionMap:limitation_by_session_size",{maxImageUploadSize:Ma.a.convertToFileSizeUnit(this.maxImageUploadSize,r)}),LIMITATION_BY_IMAGE:this._i18n("errorDescriptionMap:limitation_by_image",{maxImageUploadSize:Ma.a.convertToFileSizeUnit(this.maxImageUploadSize,r)}),INVALID_PARAMETER:this._i18n("errorDescriptionMap:invalid_parameter"),DENY_ANIMATED_IMAGE:this._i18n("errorDescriptionMap:deny_animated_image")}}var t=e.prototype;return t._makePhotoInfraUploaderConfig=function(){var e=this._configAgent.get("infraInfo.photoInfra.domain"),t=this._configAgent.get("infraInfo.photoInfra.imageHost"),n=this._configAgent.get("userInfo.userId"),i=this._configAgent.get("apiInfo.fetchPhotoUploadSessionKey"),r=this._configAgent.get("editorInfo.resourcePath"),o=this._configAgent.get("editorInfo.sslEnabled"),a=this._configAgent.get("modules.photoUploader.config.useCustomQuery"),s=this._configAgent.get("modules.photoUploader.config.customQuery"),c=this._configAgent.get("modules.photoUploader.config.denyAnimatedImage"),l=this._configAgent.get("modules.photoUploader.config.skipXcamFiltering");return{domain:e,imageHost:t,userId:n,sessionUrl:i,resourcePath:r,sslEnabled:o,customQuery:Object(EC.a)(s)?s:void 0,useCustomQuery:!!Object(LC.a)(a)&&a,denyAnimatedImage:c,skipXcamFiltering:l}},t.validateImages=function(e,t){return void 0===t&&(t=Ma.a.DEFAULT_IMAGE_ACCEPT_LIST),kC(e,t)},t.openFileDialog=function(e){void 0===e&&(e={});var t=e.accept||this._configAgent.get("infraConfig.image.acceptExt")||Ma.a.DEFAULT_IMAGE_ACCEPT_LIST;return Ma.a.openFileDialog({accept:t,multiple:e.multiple||!1}).then(function(e){return kC(e,t)})},t.uploadImagesFromFiles=function(e){return this.uploadImages(e)},t.uploadImageFromUrls=function(e){return this.uploadImages(e)},t.uploadImages=function(e){var t=this;if("NAVER_PHOTO_INFRA"===this._imageUploader.PROVIDER){var n=this._makePhotoInfraUploaderConfig();this._imageUploader.setConfig(n)}return this._imageUploader.warmUp().then(function(){return e.map(function(e){var n=e.id,i=e.source,r=new PC.a;return t._imageUploader.upload(i).then(function(e){var o=Re()({},e);switch(o.id=n,o.file=i,o.code){case"SUCCESS":return r.resolve({code:"SUCCESS",response:o});default:var a=o.code;return"CLIENT"!==a&&"SERVER_ERROR"!==a||t._sentryManager.withScope(function(e){e.setLevel("error"),e.setTag("se-logger","ImageUploadService"),e.setExtra("Logger","ImageUploadService.uploadImages.then"),e.setExtra("Cause","SERVER_ERROR"===a?"포토 업로드 라이브러(phup.js) XHR 오류":"포토 플랫폼 오류"),e.setExtra("Error Data",o),e.setFingerprint([a]),t._sentryManager.captureMessage("[이미지] 이미지 업로드 오류")}),r.reject({code:"FAIL",response:o})}}).catch(function(e){var o=Re()({},e),a=o.code;return o.id=n,o.file=i,"CLIENT"!==a&&"SERVER_ERROR"!==a||t._sentryManager.withScope(function(e){e.setLevel("error"),e.setTag("se-logger","ImageUploadService"),e.setExtra("Logger","ImageUploadService.uploadImages.catch"),e.setExtra("Cause","SERVER_ERROR"===a?"포토 업로드 라이브러(phup.js) XHR 오류":"포토 플랫폼 오류"),e.setExtra("Error Data",o),e.setFingerprint([a]),t._sentryManager.captureMessage("[이미지] 이미지 업로드 오류")}),r.reject({code:"FAIL",response:o})}),r.promise})})},t.createSourceList=function(e,t){return e.map(function(e,n){return{id:e,source:t[n]}})},t.invalidImageErrors=function(e){return e.map(this._generateImageUploadError)},t.isExceededMaxCount=function(e){void 0===e&&(e=[]);var t=e.length,n=this.getExceededCountByMax(t);if(n>0){var i=t-n,r=n;return e.splice(i,r),!0}return!1},t.getExceededCountByMax=function(e){var t=this.componentListStore.countByIncludedImage("image")+e-this.imageMaxUploadCount;return t>0?t:0},t.isCustomUploader=function(){return"NAVER_PHOTO_INFRA"!==this._imageUploader.PROVIDER},e}(),AC=n(802),jC=n(1309),RC=n(1310),NC=function(){function e(){var e=this;this._configAgent=_.W.get("configAgent"),this._videoUploader=_.W.get("videoUploader"),this._simpleUploadMode="simple"===this._configAgent.get("modules.videoUploader.config.uploadMode"),this._uploadHandler={warmUp:function(t){return e._videoUploader.warmUp(t)},uploadForSimple:function(){var t=Tt()(It.a.mark(function t(n){var i,r,o,a,s;return It.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=bb()(n);case 1:if((r=i()).done){t.next=8;break}return o=r.value,a=o.file,s=o.events,t.next=6,e._upload(a,s);case 6:t.next=1;break;case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}var t=e.prototype;return t.getUploadHandler=function(){return Promise.resolve(this._uploadHandler)},t._upload=function(e,t){var n=this;return new Promise(function(i){t.onuploadstart({fileName:e.name}),n._videoUploader.upload(e).then(function(e){t.onuploadprogress(e),t.onthumbcomplete(e),i()}).catch(function(e){t.onerror(e),i()})})},B()(e,[{key:"avaliable",get:function(){return this._simpleUploadMode&&!!this._videoUploader}}]),e}(),MC=function(){function e(){this._events={},this._configAgent=_.W.get("configAgent"),this._imageUploadService=_.W.get("imageUploadService"),this._eventDispatcherService=_.W.get("eventDispatcherService"),this._i18n=_.W.get("i18n"),this._tokenStore=_.W.get("tokenStore"),this._sentryManager=_.W.get("sentryManager"),this._seVideoUploader=_.W.get("seVideoUploader"),this._editorStatusStore=_.W.get("editorStatusStore"),this._componentListStore=_.W.get("componentListStore"),this._videoUploadLimitCount=this._configAgent.get("infraConfig.video.videoUploadLimitCount"),this._uploaderEvents=this._bindUploaderEvents(),this._videoUploaderHandler=null,this._externalUploadManager=new NC;var e=this._configAgent.get("infraConfig.video.maxUploadCount");this.videoMaxUploadCount=Object(AC.a)(e)?e:1/0}var t=e.prototype;return t._nclick=function(e){var t=void 0===e?{event:{}}:e,n=t.event,i=t.clickCode;Be.a.log(n.nativeEvent,i)},t._error=function(e){var t=this;this._sentryManager.withScope(function(n){n.setLevel("error"),n.setTag("se-logger","VideoUploadService"),n.setExtra("Logger","VideoUploadService"),n.setExtra("Cause","동영상 업로드 오류"),e&&e instanceof Error&&(n.setExtra("Error Name",e.name),n.setExtra("Error Message",e.message)),t._sentryManager.captureMessage("[동영상] 동영상 업로드 오류")}),this._errorVideoUploader(e)},t._toast=function(e){this._events.toast&&this._events.toast(e)},t._bindUploaderEvents=function(){var e=this;return{close:function(){return e._closeVideoUploader()},complete:function(t){return e._completeVideoUploader(t)},nclick:function(t){return e._nclick(t)},error:function(t){return e._error(t)},toast:function(t){return e._toast(t)}}},t.getVideoUploaderHandlerForSimple=function(){return this._hasExternalUploader()?this.getExternalUploadHandler():this.getVideoUploaderHandler()},t.getVideoUploaderHandler=function(){var e=this;return this._videoUploaderHandler?Promise.resolve(this._videoUploaderHandler):this._initVideoUploader().then(function(t){return e._videoUploaderHandler=t,t})},t.getFileLimitInfo=function(){var e=Math.min(Object(AC.a)(this.videoMaxUploadCount)?this.videoMaxUploadCount:1/0,this._getRemainCount()),t=Object(AC.a)(this._videoUploadLimitCount)?this._videoUploadLimitCount:10;return{numFileLimit:Math.min(e,t),maxUploadCount:this.videoMaxUploadCount}},t._hasExternalUploader=function(){return this._externalUploadManager.avaliable},t.getExternalUploadHandler=function(){return this._externalUploadManager.getUploadHandler()},t._reqVideoToken=function(){var e=this;return new Promise(function(t,n){e._tokenStore.getAuthToken();var i=e._configAgent.get("apiInfo.fetchVideoUploaderToken").replace("v1","v2");return Gt.a.get(i,{success:function(e){t(e)},error:function(e){n(e)}})})},t._initVideoUploader=function(){var e=this,t=this._configAgent.get("userInfo.userId"),n=this._configAgent.get("infraInfo.videoInfra.serviceId"),i=this._configAgent.get("infraInfo.videoInfra.region"),r=(this._configAgent.get("productEnv.buildEnv"),this._configAgent.get("serviceInfo.appCode")),o=this._configAgent.get("apiInfo.fetchVideoTagAutoComplete"),a=this._configAgent.get("modules.videoUploader.config")||{},s=a.requireTitle,c=a.serviceData,l=a.onClickServiceDataButton,u=a.defaultThumbnailUrl,p=a.i18n,d=a.featureLocalVid,h=a.featureCloudVid,g=a.feature360Vid,f=a.featureMetaEdit,m=a.useBackgroundThumbnail,y=void 0===m||m,v=!this._hasExternalUploader()&&a.useUserThumbnail,_={appCode:r,userId:t,buildPhase:"real",reqAuthToken:function(){return e._tokenStore.getAuthToken()},reqVideoToken:function(){return e._reqVideoToken()},serviceId:n,requireTitle:s,maxVideoUploadSize:this._configAgent.get("infraConfig.video.maxVideoUploadSize"),maxVideoPlayTime:this._configAgent.get("infraConfig.video.maxVideoPlayTime"),serviceData:c,onClickServiceDataButton:l,defaultThumbnailUrl:u,maxDesclen:this._configAgent.get("infraConfig.video.maxVideoDescLength"),maxTitlelen:this._configAgent.get("infraConfig.video.maxVideoTitleLength"),i18n:this._i18n,locale:this._i18n.language(),i18nResource:p};return this._hasExternalUploader()&&this.getExternalUploadHandler().warmUp(Re()({},_)),this._seVideoUploader.warmUp(Re()({},_,{region:i,tagSuggestApi:o,useUserThumbnail:v,featureLocalVid:d,featureCloudVid:h,feature360Vid:g,featureMetaEdit:f,useBackgroundThumbnail:y,uploadImage:function(t,n){return e._uploadImage(t,n)}}))},t._closeVideoUploader=function(){this._events.close&&this._events.close()},t._completeVideoUploader=function(e){this._events.complete&&this._events.complete(e)},t._errorVideoUploader=function(e){this._events.error&&this._events.error(e)},t.bindEvents=function(e){this._events=e},t.unbindEvents=function(){this._events={}},t.mountPCUploader=function(e,t,n){var i=this;return this.getVideoUploaderHandler().then(function(r){i._target=e,r.mountPCUploader(e,{i18n:t,data:n},i._uploaderEvents)}).catch(function(e){return i._error(e),Promise.resolve()})},t.mountPCBGUploader=function(e,t){var n=this;return this.getVideoUploaderHandler().then(function(i){n._target=e,i.mountPCBGUploader(e,{i18n:t},n._uploaderEvents)}).catch(function(e){return n._error(e),Promise.resolve()})},t.mountMWUploader=function(e,t,n,i){var r=this;return this.getVideoUploaderHandler().then(function(o){r._target=e,o.mountMWUploader(e,{i18n:t,file:n,data:i},r._uploaderEvents)}).catch(function(e){return r._error(e),Promise.resolve()})},t.mountMWBGUploader=function(e,t){var n=this;return this.getVideoUploaderHandler().then(function(i){n._target=e,i.mountMWBGUploader(e,{i18n:t},n._uploaderEvents)}).catch(function(e){return n._error(e),Promise.resolve()})},t.unmountUploader=function(e){var t=this;return void 0===e&&(e=this._target),this.getVideoUploaderHandler().then(function(n){n.unmountUploader(e),t._target=null}).catch(function(e){return t._error(e),Promise.resolve()})},t.uploadForSimple=function(e){var t=this;return this.getVideoUploaderHandlerForSimple().then(function(t){return t.uploadForSimple(e)}).catch(function(e){return t._error(e),Promise.resolve()})},t.reset=function(){this.getVideoUploaderHandler().reset()},t._uploadImage=function(e,t){var n=this;return void 0===t&&(t=function(e){return e}),e?this._imageUploadService.uploadImages([{id:0,source:e}]).then(function(e){return e[0].then(function(e){var t=e.code,i=e.response;if("SUCCESS"===t&&i){var r=Object(jC.a)(RC.b.IMAGE,Re()({},i,{type:RC.a.USER_UPLOAD_VIDEO_THUMBNAIL}));return r&&n._eventDispatcherService.dispatch(_.z.RESOURCE_UPLOADED,r),{imageUrl:""+i.domain+i.url}}return{error:!0}}).catch(function(){return{error:!0}})}).catch(function(){return{error:!0}}):t({error:!0})},t.isExceededMaxCount=function(e){void 0===e&&(e=[]);var t=e.length,n=this._getExceededCountByMax(t);if(n>0){var i=t-n,r=n;return e.splice(i,r),!0}return!1},t._getExceededCountByMax=function(e){var t=this._componentListStore.countBy("video")+e-this.videoMaxUploadCount;return t>0?t:0},t._getRemainCount=function(){var e=this._componentListStore.countBy("video");return this.videoMaxUploadCount-e},t.openFileDialog=function(e){void 0===e&&(e={});var t=e.accept||Ma.a.DEFAULT_VIDEO_ACCEPT_LIST;return Ma.a.openFileDialog({accept:t,multiple:e.multiple||!1}).then(function(e){return Object(OC.a)(e,function(e){return Ma.a.isAcceptable(e,t)})}).then(function(e){return{validFiles:e[0],invalidFiles:e[1]}})},e}(),BC=(xC=function(){function e(){}var t=e.prototype;return t.__ON_LAZY__=function(){this._configAgent=_.W.get("configAgent"),this._photoEditor=_.W.get("photoEditor"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._componentListStore=_.W.get("componentListStore"),this._tokenStore=_.W.get("tokenStore"),this._hotkeyBinder=_.W.get("hotkeyBinder"),this._virtualEditable=_.W.get("virtualEditable"),this._canvasScrollingService=_.W.get("canvasScrollingService"),this._cbRegistry={},this._edited=!1,this._disabled=!1===this._configAgent.get("modules.photoEditor")},t.editImage=function(e){var t=this;return this._disabled?Promise.resolve(!1):new Promise(function(n,i){var r=t._createPhotoEditorOption(Re()({},e,{resolve:n,reject:i}));t._photoEditor.open(r)})},t.editImageGroupAtOrderLayer=function(e){if(this._disabled)return!1;var t=e.activeCompId,n=e.editableImages,i=e.callbacks,r=void 0===i?{}:i,o=this._configAgent.get("productConfig.redirectWhenInfraAuthFailed"),a=this._filterUploadedPhotoInfos(n),s=this._getActiveCompId(t,a),c={header:this._getHeader(),withCredentials:!0,initKey:s,editablePhotoInfos:a,authTokenAPI:this._authTokenAPI(),done:function(e){(r.onCompleteEdit||function(){})(e)},redirectLoginPage:o?this._onRedirectLoginPage:null};this._photoEditor.open(c)},t._createPhotoEditorOption=function(e){var t=e.activeCompId,n=e.editableImages,i=e.direct,r=e.callbacks,o=e.resolve,a=e.reject,s=this._configAgent.get("productConfig.redirectWhenInfraAuthFailed"),c=this._filterUploadedPhotoInfos(n,r),l=this._getActiveCompId(t,c);return{header:this._getHeader(),withCredentials:!0,initKey:l,editablePhotoInfos:c,authTokenAPI:this._authTokenAPI(),beforeOpen:this._onBeforeOpenPhotoEditor.bind(this),afterClose:this._onAfterClosePhotoEditor.bind(this,a),done:this._onCompleteEdit.bind(this,o),redirectLoginPage:s?this._onRedirectLoginPage:null,direct:i}},t._getHeader=function(){return{"SE-Authorization":this._tokenStore.getAuthToken()}},t._assignCallbacks=function(e,t){e&&(this._cbRegistry[t]={onCompleteEdit:e.onCompleteEdit||function(){}})},t._onBeforeOpenPhotoEditor=function(){this._canvasScrollingService.hideWindowScroll(),this._virtualEditable.disable(),this._hotkeyBinder.pause()},t._onAfterClosePhotoEditor=function(e){this._edited||e(),this._hotkeyBinder.unpause(),this._virtualEditable.enable(),this._virtualEditable.refresh(),this._canvasScrollingService.restoreWindowScroll(),this._edited=!1},t._onCompleteEdit=function(e,t,n){var i=this;this._reorderImageList(n,t),t.forEach(function(e){var t=i._componentListStore.getComponentById(e.key);t&&t.applyEditedImage&&t.applyEditedImage(e);var n=i._cbRegistry[e.key];n&&n.onCompleteEdit(e)}),this._cbRegistry={},this._edited=!0,e()},t._authTokenAPI=function(){var e=this._configAgent.get("apiInfo.fetchAuthToken");return e?e+"?"+("target_appcode="+this._configAgent.get("serviceInfo.appCode"))+"&"+("user_id="+this._configAgent.get("userInfo.userId")):""},t._onRedirectLoginPage=function(){try{var e=this._configAgent.get("serviceInfo.loginUrl");if(e){var t=window.parent.location.href;window.top.location.replace(""+e+t)}}catch(e){return!1}},t._getActiveCompId=function(e,t){var n=t.some(function(t){return t.photos.some(function(t){return t.id===e})});return e&&n?e:t[0]&&t[0].id},t._filterUploadedPhotoInfos=function(e,t){var n=this,i=!!e;return(i?e:this._componentListStore.toValidJSON()).filter(function(e){return n._assignCallbacks(t,e.id),e.photos=n._refinePhotoInfos(e,i),e.photos})},t._refinePhotoInfos=function(e,t){var n=this;void 0===t&&(t=!1);var i=e.id,r=e.ctype,o=e.images,a=e.wrappedSection,s=e.internalResource,c=e.background;if("image"===r&&s&&e.path)return[Re()({key:i},e)];if(["imageGroup","imageStrip"].includes(r)&&o){var l=o.reduce(function(e,t){return t.path?e.concat(n._refinePhotoInfos(t)).filter(function(e){return e}):e},[]);if(l.length)return l}else{if(a&&"image"===a.ctype&&a.path)return this._refinePhotoInfos(a);if(c&&c.image&&t&&c.image.path)return this._refinePhotoInfos(c.image)}},t._reorderImageList=function(e,t){var n=this;if(1!==t.length){var i=t.map(function(e){return n._componentListStore.getComponentById(e.key)});e.every(function(e,t){return e.id===i[t].id})||this._reorderBetweenList(e,i)}},t._reorderBetweenList=function(e,t){var n={};t.forEach(function(t,i){var r=e[i].id;t.id!==r&&(n[r]=t)});var i=e[0],r=e[e.length-1],o=this._componentListStore.getComponentsBetween(i.id,r.id).map(function(e){var t=n[e.id];return t||e});this._componentListStore.replaceBetween(i,r,o)},e}(),k()(xC.prototype,"_onRedirectLoginPage",[te.autobind],Object.getOwnPropertyDescriptor(xC.prototype,"_onRedirectLoginPage"),xC.prototype),xC),WC=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore")}var t=e.prototype;return t.updateShellImageNodeStore=function(e,t){var n=this._makeIdInfo(t.id);e.updateInlineImage(n,t)},t.deleteShellImageNodeById=function(e,t){if(e&&t){var n=this._makeIdInfo(t),i=e.deleteInlineImage(n);i&&this._selectionInfoStore.setRange({start:i,end:i})}},t._makeIdInfo=function(e){var t={};return e.split(",").forEach(function(e){var n=e.split(":"),i=n[0],r=n[1];t[i]=r}),t},t.createFileUploadData=function(e){var t=this._selectionInfoStore.toValidJSON().focus,n=this._componentListStore.getComponentById(t.compId),i=n.createShellInlineImages(t,e),r=i.uploadTarget,o=i.invalidImages,a=r.ids;if(a.length){var s=Object($r.a)(a),c=this._makeIdInfo(s),l=Object.assign(c,{offset:1});this._selectionInfoStore.setRange({start:l,end:l})}return{compStore:n,uploadTarget:r,invalidImages:o}},e}(),UC=n(1136),FC=wt.a.RX.EMOJI,zC=/(\s|^[.]?)#((_*)[_\d\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]+)/g,VC=function(){function e(){this._configAgent=_.W.get("configAgent"),this._componentListStore=_.W.get("componentListStore")}var t=e.prototype;return t.getTags=function(){var e=this._configAgent.get("productConfig.taggableComponents")||[];if(0===e.length)return[];var t=this._filterOnlyTextUnits(e),n=this._extractHashedKeywords(t);return this._normalizeHashedKeywords(n)},t._normalizeHashedKeywords=function(e){var t=Array.from(e).map(function(e){return e.replace("#","").trim()}),n=new Set(t);return Array.from(n)},t._extractHashedKeywords=function(e){return Object(UC.a)(e,function(e){var t=e.getPlainTextWithEmoji().replace(FC,"$");return zC.test(t)?t.match(zC):[]})},t._filterOnlyTextUnits=function(e){return this._componentListStore.filter(function(t){return e.includes(t.ctype)}).filter(function(e){return!!e.filterOnlyTexts}).reduce(function(e,t){return e.concat(t.filterOnlyTexts())},[])},e}(),GC=function(){function e(){this._storage=_.W.get("storagePolicy")}var t=e.prototype;return t.setStorageData=function(e,t){this._storage.set(e,t)},t.getStorageData=function(e){return this._storage.get(e)},e}(),HC=function(){function e(){var e=_.W.get("configAgent");this._wordCountUrl=e.get("apiInfo.fetchWordCount")}return e.prototype.fetchWordCountFrom=function(e){return Gt.a.post(this._wordCountUrl,{data:e,success:function(e){return e}})},e}(),qC=function(){function e(){var e=_.W.get("configAgent");this._configAgent=e,this._eventDispatcher=_.W.get("eventDispatcher"),this._useUserLocation=!!e.get("productConfig.userLocation"),this._getAgreement=e.get("productConfig.userLocation.getAgreement")||null}var t=e.prototype;return t._getAgreementStatus=function(){return!0===this._configAgent.get("productConfig.userLocation.agreementStatus")},t._requestAgreement=function(){var e=Tt()(It.a.mark(function e(){var t;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._getAgreement)||"function"!=typeof t){e.next=11;break}return e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}(),t._shouldRequestAgreement=function(){return this._useUserLocation&&!this._getAgreementStatus()},t.checkAllowedAccess=function(){var e=Tt()(It.a.mark(function e(){var t;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._shouldRequestAgreement()){e.next=6;break}return e.next=3,this._requestAgreement();case 3:return t=e.sent,this._configAgent.set("productConfig.userLocation.agreementStatus",t),e.abrupt("return",this._getAgreementStatus());case 6:return e.abrupt("return",this.isAllowedAccess());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.isAllowedAccess=function(){return!!this._useUserLocation&&this._getAgreementStatus()},t.writeUserLocation=function(){this._eventDispatcher.dispatch(_.z.USER_LOCATION)},e}(),JC=n(1137),KC=n.n(JC),XC=n(1138),YC=n.n(XC),QC=["lineHeight","align"],ZC=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=Object(Va.a)(t,_.L);return{"@ctype":"textNode",style:Re()({"@ctype":"nodeStyle",ai:!0},n),value:e}},$C=function(e,t){void 0===e&&(e=[ZC()]),void 0===t&&(t={});var n=Object(to.a)(t,QC);return{"@ctype":"paragraph",style:Re()({"@ctype":"paragraphStyle"},n),nodes:e}},eI=function(e){return void 0===e&&(e=[$C()]),{"@ctype":"text",value:e}},tI=function(e){return void 0===e&&(e=[$C()]),{"@ctype":"sectionTitle",title:e}},nI=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=t,i=n.style,r=void 0===i?{}:i,o=n.sourceCtype;return(void 0===o?pu.a.TEXT:o)===pu.a.SECTION_TITLE?tI([$C([ZC(e,r)],r)]):eI([$C([ZC(e,r)],r)])},iI=function(e){var t=e["@ctype"];return t!==pu.a.TEXT&&t!==pu.a.SECTION_TITLE?0:(t===pu.a.SECTION_TITLE?e.title:e.value).reduce(function(e,t){return e+function(e){return e["@ctype"]!==pu.a.PARAGRAPH?0:e.nodes.reduce(function(e,t){return e+t.value.length},0)}(t)},0)},rI=function(e){return(Array.isArray(e)?e:[e]).reduce(function(e,t){return e+iI(t)},0)},oI={PREVIOUS:300,NEXT:300};function aI(e){void 0===e&&(e={});var t=e,n=t.previous,i=t.next;return n&&(e.previous=n.substring(n.length-oI.PREVIOUS)),i&&(e.next=i.substring(0,oI.NEXT)),e}var sI,cI,lI,uI,pI,dI,hI,gI,fI,mI,yI,vI,_I,bI,SI,CI,II,OI,TI,LI,EI,PI,wI,kI,xI,DI,AI,jI,RI,NI,MI,BI,WI,UI,FI,zI,VI,GI,HI,qI,JI,KI,XI,YI,QI,ZI,$I,eO,tO,nO,iO,rO,oO,aO,sO,cO,lO,uO,pO,dO,hO,gO,fO,mO,yO,vO,_O,bO,SO,CO,IO,OO,TO,LO,EO,PO,wO,kO=function(){function e(e){var t,n=this,i=e.configAgent,r=e.documentDataStore;this._fetch=((t={})[Xr.j.ARTICLE]=function(){return n._article.apply(n,arguments)},t[Xr.j.REWRITE]=function(){return n._rewrite.apply(n,arguments)},t[Xr.j.CONTINUE]=function(){return n._continue.apply(n,arguments)},t[Xr.j.SUMMARIZE]=function(){return n._summarize.apply(n,arguments)},t[Xr.j.INTRO]=function(){return n._intro.apply(n,arguments)},t[Xr.j.OUTRO]=function(){return n._outro.apply(n,arguments)},t[Xr.j.SUMMARIZE_ALL]=function(){return n._summarize.apply(n,arguments)},t[Xr.j.TITLE]=function(){return n._title.apply(n,arguments)},t[Xr.j.TAG]=function(){return n._tags.apply(n,arguments)},t),this._configAgent=i,this._documentDataStore=r}var t=e.prototype;return t._article=function(e,t){var n=e.purpose,i=e.writingMaterials;void 0===t&&(t={});var r=this._configAgent.get("apiInfo.streamArticle"),o={purpose:n,writing_materials:i.map(function(e){return{text:e}})};return this._fetchEventSource(r,o,t)},t._title=function(e,t){var n=e.article,i=e.writingMaterials,r=void 0===i?[]:i;void 0===t&&(t={});var o=this._configAgent.get("apiInfo.streamTitle"),a={article:{text:n},writing_materials:r.map(function(e){return{text:e}})};return this._fetchEventSource(o,a,t)},t._tags=function(e,t){var n=e.article,i=e.writingMaterials,r=void 0===i?[]:i;void 0===t&&(t={});var o=this._configAgent.get("apiInfo.streamTags"),a={article:{text:n},writing_materials:r.map(function(e){return{text:e}})};return this._fetchEventSource(o,a,t)},t._intro=function(e,t){var n=e.article,i=e.title,r=void 0===i?"":i;void 0===t&&(t={});var o=this._configAgent.get("apiInfo.streamIntro"),a={article:{text:n},title:r};return this._fetchEventSource(o,a,t)},t._outro=function(e,t){var n=e.article,i=e.title,r=void 0===i?"":i;void 0===t&&(t={});var o=this._configAgent.get("apiInfo.streamOutro"),a={article:{text:n},title:r};return this._fetchEventSource(o,a,t)},t._summarize=function(e,t){void 0===t&&(t={});var n=this._configAgent.get("apiInfo.streamSummarize"),i={paragraph:aI(e)};return this._fetchEventSource(n,i,t)},t._rewrite=function(e,t){void 0===t&&(t={});var n=this._configAgent.get("apiInfo.streamRewrite"),i={paragraph:aI(e)};return this._fetchEventSource(n,i,t)},t._continue=function(e,t){void 0===t&&(t={});var n=this._configAgent.get("apiInfo.streamContinue"),i={paragraph:aI(e)};return this._fetchEventSource(n,i,t)},t.fetch=function(e,t,n){return void 0===n&&(n={}),this._fetch[e](t,n)},t._fetchEventSource=function(e,t,n){var i=this._documentDataStore.seDocumentId;return Gt.b.stream(e+"?se_doc_id="+i,Re()({data:Re()({},t,{se_doc_id:i})},n))},t.abort=function(){Gt.b.abort()},e}(),xO=n(804),DO=n(805),AO=n(282),jO=function(e){function t(){return e.call(this,"Stream aborted")||this}return S()(t,e),B()(t,[{key:"aborted",get:function(){return!0}}]),t}(n.n(AO)()(Error)),RO=function(e,t){var n=e.value;return n.length>t?[Re()({},e,{value:n.substring(0,t)}),Re()({},e,{value:n.substring(t)})]:[e]},NO=function(e,t){var n=e.value;return n.flatMap(function(e,i){if(function(e){var t=e.nodes;return 1===t.length&&""===t[0].value}(e))return[e];var r=function(e,t){for(var n=[],i=[].concat(e.nodes),r=i.shift();r;){for(var o=t,a=[];o>0&&r;){var s=r.value.length;if(s<=o)o-=s,a.push(r),r=i.shift();else{var c=RO(r,o),l=c[0],u=c[1];a.push(l),r=u,o=0}}a.length&&n.push(a)}return n}(e,t).map(function(t){return Re()({},e,{nodes:t})});return i===n.length-1?r:[].concat(r,[$C()])}).map(function(e){return eI([e])})},MO=function(e,t){var n=t.style,i=void 0===n?{}:n,r=t.sourceCtype,o=void 0===r?pu.a.TEXT:r;if("\n"===e)return[nI("",t)];var a=e.split("\n").map(function(e){return $C([ZC(e,i)],i)});return o===pu.a.SECTION_TITLE?[tI(a)]:[eI(a)]},BO=function(){function e(){this._queue=new xO.a,this._aiStreamStore=_.W.get("aiStreamStore"),this._aiStreamProvider=new kO({configAgent:_.W.get("configAgent"),documentDataStore:_.W.get("documentDataStore")})}var t=e.prototype;return t._enqueue=function(e){var t=this;(function(e,t){return void 0===t&&(t=5),(Array.isArray(e)?e:[e]).flatMap(function(e){return e["@ctype"]===pu.a.TEXT?NO(e,t):e})})(e.text?nI(e.text):e).forEach(function(e){t._queue.enqueue(e)})},t.stop=function(){this._queue.clear(),this._aiStreamStore.abort(),this._aiStreamProvider.abort()},t.stream=function(e,t,n){var i=this;return void 0===n&&(n={}),YC()(It.a.mark(function r(){var o;return It.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i._loadData(e,t,n).catch(function(e){o=e});case 1:if(i._completed){r.next=10;break}if(i._queue.empty){r.next=5;break}return r.next=5,i._queue.dequeue();case 5:if(!(i._queue.size<10)){r.next=8;break}return r.next=8,KC()(Object(DO.a)(50));case 8:r.next=1;break;case 10:if(!i.aborted){r.next=12;break}throw new jO;case 12:if(!o){r.next=14;break}throw o;case 14:if(!i.failed){r.next=16;break}throw new Error;case 16:case"end":return r.stop()}},r)}))()},t._loadData=function(e,t,n){var i=this,r=n.maxLength,o=void 0===r?Number.POSITIVE_INFINITY:r,a=n.textFormat,s=void 0===a?{}:a;return this._aiStreamStore.loadStart(),this._aiStreamProvider.fetch(e,t,{message:function(e){if(i._aiStreamStore.loading){var t=e.event;if(t===Xr.f.ERROR)return i._aiStreamProvider.abort(),void i._aiStreamStore.loadFailedOnStream();if(t===Xr.f.CONTENT){var n;try{var r=JSON.parse(e.data);n=r.text?MO(r.text,s):function(e,t){var n=function(e){var t=[],n=e.value;return(void 0===n?[]:n).forEach(function(e,n,i){var r=e.nodes;(void 0===r?[]:r).forEach(function(e){t.push(e.value)}),n<i.length-1&&t.push("\n")}),t.join("")}(e);return MO(n,t)}(r,s)}catch(t){n=MO(e.data,s)}var a=rI(n),c=i._aiStreamStore.loadedTextLength+a;if(o<c)return i._aiStreamProvider.abort(),void i._aiStreamStore.loadComplete();i._enqueue(n),i._aiStreamStore.addLoadedTextLength(a)}if(t===Xr.f.META){var l=JSON.parse(e.data).process;l.length>0&&i._aiStreamStore.setProcessInfo(l)}t===Xr.f.END_SIGNAL&&(i._aiStreamProvider.abort(),i._aiStreamStore.loadComplete())}},close:function(){i._aiStreamStore.loadComplete()},error:function(){i._aiStreamStore.loadFailed()}})},B()(e,[{key:"_completed",get:function(){return!this._aiStreamStore.loading&&this._queue.empty}},{key:"failed",get:function(){return this._aiStreamStore.failed}},{key:"aborted",get:function(){return this._aiStreamStore.aborted}},{key:"streamFailed",get:function(){return this._aiStreamStore.streamFailed}},{key:"processInfo",get:function(){return this._aiStreamStore.processInfo.slice()}}]),e}(),WO=function(){function e(){this._configAgent=_.W.get("configAgent"),this._writingLogStore=_.W.get("writingLogStore")}var t=e.prototype;return t.updateTextWritingTime=function(){this._writingLogStore.updateTextWritingTime()},t.updateInsertedTextLength=function(e){this._writingLogStore.updateInsertedTextLength(e)},e}(),UO=(sI=function(){function e(e){void 0===e&&(e={}),this.userDefinedStyle={},this.themes={},L()(this,"themeName",cI,this);var t=_.W.get("configAgent"),n=t.get("productConfig.defaultDocument")||{},i=t.get("productConfig.themes")||{},r=t.get("productConfig.userDefinedStyle")||{};this._configAgent=t,this.themeName=n.theme||e.defaultTheme||this.themeName,this.themes=Object(Ir.a)(e.themes,i),this.userDefinedStyle=Object.assign(e.userDefinedStyle||{},r)}var t=e.prototype;return t._getComponentThemeStyle=function(e){var t=this.themeName+"."+e;return Object(x.a)(this.themes,t,null)},t.getComponentThemeStyle=function(e){var t=this;if("wrappingParagraph"!==e){var n=this._configAgent.get("plugins.componentSettings."+e+".config.themeStyle"),i=this._getComponentThemeStyle(e);return this._normalizeThemeStyle(i,n)}var r=["text","image","quotation"].map(function(e){return t.getComponentThemeStyle(e)}),o=r[0],a=r[1],s=r[2];return o||a||s?{textThemeStyle:o,imageThemeStyle:a,quotationThemeStyle:s}:null},t._normalizeThemeStyle=function(e,t){if(!t)return e;if(e){var n=Object(x.a)(t,"@all",{});Object.keys(e).forEach(function(i){var r=e[i],o=Object(x.a)(t,""+i,{}),a=Object(Ir.a)(r,n,o);e[i]=a})}return e},t.changeThemeName=function(e){return this.themeName!==e&&(this.themeName=e,!0)},t.getUserDefinedStyle=function(e){return Object(x.a)(this.userDefinedStyle,e,null)},e}(),cI=k()(sI.prototype,"themeName",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),sI),FO=(lI=function(){function e(){this._componentListStore=_.W.get("componentListStore"),this._selectionInfoStore=_.W.get("selectionInfoStore")}return B()(e,[{key:"currentSelectedStyle",get:function(){return this._componentListStore.collectStyle(this._selectionInfoStore)}}]),e}(),k()(lI.prototype,"currentSelectedStyle",[D.e],Object.getOwnPropertyDescriptor(lI.prototype,"currentSelectedStyle"),lI.prototype),lI),zO=(uI=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this)._toolbarTypes=[],L()(n,"toolbarState",pI,P()(n)),L()(n,"selectedCtype",dI,P()(n)),L()(n,"buttonSets",hI,P()(n));var i=t.state,r=void 0===i?{}:i;return n.toolbarState=Object(x.a)(r,"toolbarState",n.toolbarState),n.buttonSets=Object(x.a)(r,"buttonSets",n.buttonSets),n._reset(),n}S()(t,e);var n=t.prototype;return n.updateButtonSets=function(e){Object(Ze.a)(e)&&this._reset(),this.buttonSets=e},n.updateToolbarState=function(e,t,n){var i=this.toolbarState;e.selectedUnitIds=t||i.selectedUnitIds,e.selectedCompIds=n||i.selectedCompIds,this.toolbarState=e},n.changeSelectedCtype=function(e){this.selectedCtype=e},n.setToolbarTypes=function(e){this._toolbarTypes=e,this._reset()},n._reset=function(){var e=this;this._toolbarTypes.forEach(function(t){e.buttonSets[t]=[]})},t}(_.w),pI=k()(uI.prototype,"toolbarState",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),dI=k()(uI.prototype,"selectedCtype",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),hI=k()(uI.prototype,"buttonSets",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),uI),VO=(gI=function(){function e(e){void 0===e&&(e={}),L()(this,"documentId",fI,this),L()(this,"document",mI,this),this._seDocumentId="";var t=_.W.get("configAgent"),n=t.get("productConfig.defaultDocument"),i=e.state,r=void 0===i?{}:i;this.documentId=Object(x.a)(r,"documentId","TEMP-"+_.cb.generate()),this._seDocumentId=t.get("editorInfo.id"),this.document=this._extractDocumentMeta(n),this.documentStatus=_.v.NORMAL}var t=e.prototype;return t._extractDocumentMeta=function(e){var t=Re()({},this.document,e);return delete t.components,t},t.setDocumentData=function(e){var t=e.documentId,n=e.document,i=n.id;Object(Ze.a)(t)||(this.documentId=t),Object(Ze.a)(i)&&(n.id=this._seDocumentId),delete n.version,Object.assign(this.document,n),delete this.document.components},t.setTheme=function(e){this.document.theme=e},t.getDocumentId=function(){return this.documentId},t.getDocumentData=function(){return this.toValidJSON()},t.setDocumentStatus=function(e){this.documentStatus=e||_.v.NORMAL},t.getDocumentStatus=function(){return this.documentStatus},t.toValidJSON=function(){return{document:D.f.toJS(this.document),documentId:D.f.toJS(this.documentId)}},t.getDefaultComponentData=function(){var e=_.W.get("configAgent").get("productConfig.defaultDocument");if(e.components)return e.components.map(function(e){return{ctype:e}})},B()(e,[{key:"seDocumentId",get:function(){return this.document.id||this._seDocumentId}}]),e}(),fI=k()(gI.prototype,"documentId",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),mI=k()(gI.prototype,"document",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),gI),GO=n(1315),HO=function(){function e(){this._authToken=null,this._infraToken=null}var t=e.prototype;return t.setAuthToken=function(e){this._authToken=e},t.getAuthToken=function(){return this._authToken},t.hasAuthToken=function(){return!!this._authToken},e}(),qO=(yI=function(){function e(){L()(this,"_loading",vI,this),L()(this,"_failed",_I,this),L()(this,"_aborted",bI,this),L()(this,"_streamFailed",SI,this),this._processInfo=[],this._loadedTextLength=0}var t=e.prototype;return t.loadStart=function(){this._loading=!0,this._aborted=!1,this._failed=!1,this._streamFailed=!1,this._processInfo=[],this._loadedTextLength=0},t.loadComplete=function(){this._loading=!1},t.loadFailed=function(){this._loading=!1,this._failed=!0},t.loadFailedOnStream=function(){this._loading=!1,this._failed=!0,this._streamFailed=!0},t.abort=function(){this._loading=!1,this._aborted=!0},t.reset=function(){this._loading=!1,this._failed=!1,this._aborted=!1,this._streamFailed=!1,this._processInfo=[],this._loadedTextLength=0},t.addLoadedTextLength=function(e){this._loadedTextLength+=e},t.setProcessInfo=function(e){this._processInfo=e},B()(e,[{key:"loading",get:function(){return this._loading}},{key:"failed",get:function(){return this._failed}},{key:"aborted",get:function(){return this._aborted}},{key:"processInfo",get:function(){return this._processInfo}},{key:"streamFailed",get:function(){return this._streamFailed}},{key:"loadedTextLength",get:function(){return this._loadedTextLength}}]),e}(),vI=k()(yI.prototype,"_loading",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_I=k()(yI.prototype,"_failed",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bI=k()(yI.prototype,"_aborted",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),SI=k()(yI.prototype,"_streamFailed",[D.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k()(yI.prototype,"loading",[D.e],Object.getOwnPropertyDescriptor(yI.prototype,"loading"),yI.prototype),k()(yI.prototype,"failed",[D.e],Object.getOwnPropertyDescriptor(yI.prototype,"failed"),yI.prototype),k()(yI.prototype,"aborted",[D.e],Object.getOwnPropertyDescriptor(yI.prototype,"aborted"),yI.prototype),k()(yI.prototype,"streamFailed",[D.e],Object.getOwnPropertyDescriptor(yI.prototype,"streamFailed"),yI.prototype),yI),JO=n(162),KO="Y",XO="N",YO={dis:XO,dia:{t:0,p:0,st:0,sk:0}},QO=function(){function e(){this._dif=!1,this._dio=[],this._editorReadyTime=0,this._insertedTextLength=0,this._writingLastTimestamp=0,this._writingTotalTimestamp=0,this._storedDio=[],this._componentListStore=_.W.get("componentListStore"),this._configAgent=_.W.get("configAgent")}var t=e.prototype;return t.getLogData=function(e){void 0===e&&(e=!1);var t=this._dioTargetItem;if(t.dis=this._insertedTextLength>0?KO:XO,t.dia.p=this._insertedTextLength,t.dia.t=this._calcAiContentTextLength(),1===this._dio.length)t.dia.sk=this._storedDio[0].dia.sk+this._textWritingTime,t.dia.st=this._storedDio[0].dia.st+this._editorRuntime,e&&this._dio.push(Object(JO.a)(t));else if(2===this._dio.length){if(!e)return{dif:this._dif,dio:this._storedDio};t.dia.sk=this._textWritingTime,t.dia.st=this._editorRuntime}return{dif:this._dif,dio:this._dio}},t.setLogData=function(e){void 0===e&&(e={}),this._dif=!!this._configAgent.get("productConfig.aiAssistant"),this._dio=[],this._editorReadyTime=this._currentTime(),this._insertedTextLength=0,this._writingLastTimestamp=0,this._writingTotalTimestamp=0,this._setDefaultDio(Object(x.a)(e,"dio",[]))},t._setDefaultDio=function(e){switch(this._storedDio=Object(JO.a)(e),e.length){case 1:this._dio.push(e[0]),this._insertedTextLength=e[0].dia.p;break;case 2:this._dio.push(e[0]),this._dio.push(this._cloneDioDefaultValue());break;default:this._storedDio=[this._cloneDioDefaultValue()],this._dio.push(this._cloneDioDefaultValue())}},t._cloneDioDefaultValue=function(){return Object(JO.a)(YO)},t.updateInsertedTextLength=function(e){this._insertedTextLength+=e},t.updateTextWritingTime=function(){this._calcTextWritingTime()},t._currentTime=function(){return(new Date).getTime()},t._calcAiContentTextLength=function(){var e=this._componentListStore.getComponentByCtype(pu.a.DOCUMENT_TITLE),t=this._componentListStore.getAiContentText().length,n=0;return e&&(n=e.getPlainTextOnlyAi().length),Math.max(0,t+n)},t._calcTextWritingTime=function(){var e=this._currentTime();e-this._writingLastTimestamp>6e4?this._writingLastTimestamp=e:(this._writingTotalTimestamp=this._writingTotalTimestamp+e-this._writingLastTimestamp,this._writingLastTimestamp=e)},B()(e,[{key:"_textWritingTime",get:function(){return Math.ceil(this._writingTotalTimestamp/1e3)}},{key:"_editorRuntime",get:function(){return Math.ceil((this._currentTime()-this._editorReadyTime)/1e3)}},{key:"_dioTargetIndex",get:function(){return 0===this._dio.length?0:this._dio.length-1}},{key:"_dioTargetItem",get:function(){return this._dio[this._dioTargetIndex]}}]),e}(),ZO=function(){function e(e){this._config=e.configMap}var t=e.prototype;return t.request=function(e){Gt.b.abort();var t={url:this._config.apiInfo.fetchErratas,query:{query:e}};return this._request(t)},t._request=function(e){return Gt.b.post(e.url,{data:e.query,options:{headers:{"Content-Type":"application/json"},useAbort:!0},success:function(e){return e},error:function(e){return e}})},e}(),$O={image:"PHOTO_IMAGE",wrappingParagraph:"PHOTO_IMAGE",imageStrip:"PHOTO_APPOSE",imageGroup:"PHOTO_GROUP"},eT={functions:{useFilter:!0,useCrop:!0,useResize:!0,useAdjust:!0,useMosaic:!0,useSignature:!0,useSticker:!0,useText:!0,usePhotoFrame:!0,useClip:!0},photoSave:{useSave:!0,use:{local:!0,cloud:!0}},sticker:{useGrafolio:!0,use:{auto:!0,svgSticker:!0,svgTypo:!0,pack:!0}},lang:{useSelect:!0},signature:{use:{image:!0,text:!0,template:!0}},resize:{minSize:100},text:{use:{text:!0,artypo:!0,bubble:!0}},font:{useWebFont:!0,fonts:[]},backgroundColor:"000000",nclicks:{use:!0},theme:"green",photoInfra:{autorotate:!0,extractAnimatedCnt:!0,extractExif:!0},filter:{useFavorite:!0}},tT=(CI=function(){function e(e){void 0===e&&(e={}),this._moduleConfig=e,this._configAgent=_.W.get("configAgent"),this._i18n=_.W.get("i18n"),this._domAccessor=_.W.get("domAccessor"),this._infraConfig=this._configAgent.get("infraConfig"),this._toastLayerService=_.W.get("toastLayerService"),this._canvasScrollingService=_.W.get("canvasScrollingService"),this._imageUploadService=_.W.get("imageUploadService"),this._eventDispatcherService=_.W.get("eventDispatcherService"),this.thumbnailTypeMap=this._configAgent.get("editorInfo.thumbnailType")||{},this.useThumbnail=Object(x.a)(this._infraConfig,"image.useThumbnail",!0);var t=this._configAgent.get("modules.photoEditor.config");this._moduleOption=Object(l.a)({},t,e.option,eT),this._config={userId:this._configAgent.get("userInfo.userId"),serviceDomain:this._configAgent.get("serviceInfo.domain"),buildProperty:this._configAgent.get("editorInfo.buildProperty"),userNickName:this._configAgent.get("userInfo.nickName")},this._classLoaded=!1,this._photoEditorInitialized=!1}var t=e.prototype;return t.__ON_LAZY__=function(){var e=this;setTimeout(function(){var t=e._domAccessor.getCanvas(),n=function(){var i=Tt()(It.a.mark(function i(){return It.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.removeEventListener("mouseover",n),i.next=3,e.lazyLoad();case 3:case"end":return i.stop()}},i)}));return function(){return i.apply(this,arguments)}}();t.addEventListener("mouseover",n)},2e3)},t.lazyLoad=function(){var e=Tt()(It.a.mark(function e(){var t;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._classLoaded){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._getPhotoEditorAppClass();case 4:t=e.sent,this._photoEditor=new t,this._mapPhotoEditorConsts(t),this._classLoaded=!0;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._mapPhotoEditorConsts=function(e){this._config.editorType=e.RABBIT;var t={};Object.keys($O).forEach(function(n){t[n]=e[$O[n]]}),this._config.imageType=t},t._getPhotoEditorAppClass=function(){var e=Tt()(It.a.mark(function e(){var t;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._moduleConfig.PhotoEditorApp)){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,n.e(82).then(n.t.bind(null,1341,7));case 5:return e.abrupt("return",e.sent.default);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.open=function(){var e=Tt()(It.a.mark(function e(t){var n,i=this;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||0!==t.editablePhotoInfos.length){e.next=3;break}return this._showWarning(this._i18n("imageEdit:alert_unavailable_edit")),e.abrupt("return");case 3:if(this._classLoaded){e.next=6;break}return e.next=6,this.lazyLoad();case 6:if((n=this._refineToPhotoEditorOption(t))&&0!==n.photos.length){e.next=11;break}return this._showWarning(this._i18n("imageEdit:alert_excluded_image")),setTimeout(function(){i._showWarning(i._i18n("imageEdit:alert_unavailable_edit"))},1e3),e.abrupt("return");case 11:if(this._originalImages=n.photos,t.editablePhotoInfos.length===this._originalImages.length){e.next=16;break}return this._showWarning(this._i18n("imageEdit:alert_excluded_image")),setTimeout(function(){i._open(t,n)},1e3),e.abrupt("return");case 16:this._open(t,n);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._open=function(e,t){this._initPhotoEditor(e),t&&this._photoEditor.open(t)},t._initPhotoEditor=function(e){var t=this._config,n=t.userId,i=t.serviceDomain,r=t.buildProperty,o=t.editorType,a=this._i18n.language(),s=Object(x.a)(this._moduleOption,"lang.useSelect",!0),c={lang:{default:a,useSelect:s,languages:s?this._languages():[]},setting:{env:["stage","real"].includes(r)?"real":"dev",lang:{language:a},userId:n,editorType:o,minSize:{width:this._editorRootContainerMinWidth()},positionFixed:this._canvasScrollingService.shouldPositionFixedPhotoEditor()},container:document.body,cors:!0,webglFilterEnable:!0,header:e.header,withCredentials:e.withCredentials,photoInfra:{sslEnabled:this._configAgent.get("editorInfo.sslEnabled"),domain:this._configAgent.get("infraInfo.photoInfra.domain"),imageDomain:this._configAgent.get("infraInfo.photoInfra.imageHost"),sessionKey:this._configAgent.get("apiInfo.fetchPhotoUploadSessionKey")},logInUrl:e.logInUrl,authTokenAPI:e.authTokenAPI,sticker:{grafolioAPI:{packList:this._configAgent.get("apiInfo.fetchStickers"),list:this._configAgent.get("apiInfo.fetchStickers"),multipleValidation:this._configAgent.get("apiInfo.queryAvailableSticker")}},filter:{favoriteAPI:{list:this._configAgent.get("apiInfo.fetchFavoriteFilters"),add:this._configAgent.get("apiInfo.updateFavoriteFilter"),remove:this._configAgent.get("apiInfo.deleteFavoriteFilter"),modify:this._configAgent.get("apiInfo.updateFavoriteFilter")}},useHistoryState:!1,beforeOpen:e.beforeOpen,afterClose:e.afterClose,done:this._onCompleteEdit.bind(this,e.done),loginPopupOpts:{isClose:!0},redirectLoginPage:e.redirectLoginPage},u=Object(l.a)(c,this._moduleOption,{signature:{defaultText:"https://"+i+"/"+n,nickName:this._config.userNickName},resize:{preset:Object(x.a)(this._moduleOption,"resizePreset",[400,600,700,900,1e3,1200]),custom:Object(x.a)(this._moduleOption,"resizeCustom",!0)},crop:{default:Object(x.a)(this._moduleOption,"cropDefault","free"),preset:Object(x.a)(this._moduleOption,"cropPreset",["original","free","16:9","3:2","4:3","1:1","3:4","2:3","9:16"])}});this._imageUploadService.isCustomUploader()&&(u.photoInfra=!1,u.upload=this._onUpload.bind(this)),!1===this._photoEditorInitialized?(this._photoEditor.init(u),this._photoEditorInitialized=!0):this._photoEditor.setup(u)},t._onUpload=function(e,t){var n=this,i=[{id:e.key,source:t}];this._imageUploadService.uploadImages(i).then(function(e){return e[0]}).then(function(t){var i=t.code,r=t.response;"FAIL"===i?n._photoEditor.uploadFailed():n._photoEditor.updatePhotos([{key:e.key,width:r.width,height:r.height,domain:r.domain,path:r.url,fileSize:r.fileSize,animationGIF:r.animationGIF}])})},t._onCompleteEdit=function(e,t){var n=Object(jC.a)(RC.b.IMAGE,t);n&&this._eventDispatcherService.dispatch(_.z.RESOURCE_UPLOADED,n),e&&e(t,this._originalImages)},t._findItem=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.photos){var r=this._findItem(i.photos,t);if(r)return r}else if(i.key===t)return i}return null},t._firstItem=function(e){return e[0].photos?this._firstItem(e[0].photos):e[0]},t._refineToPhotoEditorOption=function(e){var t=this,n=e.initKey,i=e.editablePhotoInfos,r=e.direct,o=i.reduce(function(e,n){var i=t._convertCompDataToPhotoData(n);return i&&e.push(i),e},[]);if(0!==o.length){var a=this._findItem(o,n);return{initKey:n=a?a.key:this._firstItem(o).key,direct:r,photos:o}}},t._editorRootContainerMinWidth=function(){var e=this._domAccessor.getRootContainer(),t=parseInt(getComputedStyle(e).minWidth);return 1080>=t?null:t},t._convertCompDataToPhotoData=function(e){var t=this,n=this._config.imageType,i=e.id,r=e.ctype,o=e.photos,a=this._imageUploadService.isCustomUploader(),s=o&&o.reduce(function(e,n){return!0===a&&(n.originalWidth>3e3||n.originalHeight>3e3)?e:e.concat(t._generatePhotoInfo(n))},[]);if(!Object(Ze.a)(s))return{type:n[r]||n.image,key:i,id:i,photos:s}},t._generatePhotoInfo=function(e){var t=""+e.domain+e.path,n=this.thumbnailTypeMap.small?this.thumbnailTypeMap.small:this.thumbnailTypeMap.normal,i=!1===this.useThumbnail?t:t+"?type="+n;return{key:e.id,originalFileName:e.fileName,width:e.originalWidth,height:e.originalHeight,domain:e.domain,path:e.path,fileSize:e.fileSize,thumbnail:i,generationFormat:e.displayFormat,dominantColor:e.dominantColor||""}},t._showWarning=function(e){this._toastLayerService.warningMessage(e)},t._languages=function(){return[{language:"ko-KR"},{language:"en-US"},{language:"ja-JP"},{language:"zh-CN"},{language:"zh-TW"},{language:"es-ES"},{language:"fr-FR"},{language:"vi-VN"},{language:"id-ID"}]},e}(),k()(CI.prototype,"_convertCompDataToPhotoData",[te.autobind],Object.getOwnPropertyDescriptor(CI.prototype,"_convertCompDataToPhotoData"),CI.prototype),k()(CI.prototype,"_generatePhotoInfo",[te.autobind],Object.getOwnPropertyDescriptor(CI.prototype,"_generatePhotoInfo"),CI.prototype),CI),nT=n(398),iT=function(){function e(){this._configAgent=_.W.get("configAgent"),this._i18n=_.W.get("i18n")}var t=e.prototype;return t._fetchMathEditorApp=function(){var e=Tt()(It.a.mark(function e(){var t,i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cache){e.next=6;break}return e.next=3,n.e(81).then(n.t.bind(null,1342,7));case 3:t=e.sent,i=t.default,this._cache=i;case 6:return e.abrupt("return",this._cache);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.open=function(){var e=Tt()(It.a.mark(function e(t,n,i){var r,o,a;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i={}),e.prev=1,e.next=4,this._fetchMathEditorApp();case 4:r=e.sent,o=r.EVENT,(a=r.getInstance()).clear(),a.on(o.CANCEL,i.close),a.on(o.SUBMIT,i.submit),a.start(Re()({el:t},n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),this._handleErrorLazy(i);case 16:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t,n,i){return e.apply(this,arguments)}}(),t.close=function(){var e=Tt()(It.a.mark(function e(){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchMathEditorApp();case 2:e.sent.getInstance().clear();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._handleErrorLazy=function(e){var t=e.close,n=void 0===t?nT.a:t,i=_.W.get("alertLayerService");n(),i.open({type:"alert",title:this._i18n("errorLazy:title"),description:this._i18n("errorLazy:description")})},e}(),rT=function(){function e(e){this._moduleOption=null,this._videoUploaderModule=null,this._moduleOption=e,this._videoUploaderModule=null}var t=e.prototype;return t._fetchVideoUploader=function(){var e=this;return this._videoUploaderModule?Promise.resolve(this._videoUploaderModule):n.e(79).then(n.t.bind(null,1343,7)).then(function(t){var n=t.default;return e._videoUploaderModule=n,e._videoUploaderModule})},t.warmUp=function(e,t){return Object(Ze.a)(this._moduleOption)||(e=Object(l.a)({},e,this._moduleOption)),u.a.UNDER_IE11&&(e.featureCloudVid=!1),this._fetchVideoUploader().then(function(n){return n.warmUp(e,t)})},e}(),oT=4,aT=4,sT=(II=function(){function e(){this._isNotSupportNativeDragEvent="undefined"==typeof DragEvent,this._domAccessor=_.W.get("domAccessor")}var t=e.prototype;return t.start=function(e){var t=e.event,n=e.items,i=e.type,r=e.useNativeGhost,o=e.themeName,a=e.isInsideType,s=e.callback;this._shouldUseNativeGhost=t.dataTransfer.setDragImage&&(!0===r||this._isNotSupportNativeDragEvent),this._themeName=o||"default",this._dragStartCallback=s||function(){},this._dragGhostWrapper=this._getDragGhost(),this._dragTarget=this._getDragTarget(t,i,n),this._initDragGhost(t,i,n),this._setDragTargetClassName(a)},t.end=function(){this._resetDragTarget(),this._resetDragGhost()},t._getDragGhost=function(){var e=this._domAccessor.getContentContainer();return this._cachedDragGhost||(this._cachedDragGhost=document.createElement("div")),this._cachedDragGhost.parentNode!==e&&e.insertBefore(this._cachedDragGhost,e.firstChild),this._cachedDragGhost},t._getDragTarget=function(e,t,n){switch(t){case"object":case"image":case"iframe":var i=Object(At.a)(n);return this._domAccessor.querySelector("#"+i.id);case"aside":case"library":case"template":return e.target;case"groupLayer":var r='.se-imageGroup-item[data-image-id="'+e.target.dataset.id+'"]';return this._domAccessor.querySelector(".se-popup-image-group-order").querySelector(r);default:return null}},t._resolveDragGhost=function(e,t,n){switch(t){case"text":return this._textGhost(e,n);case"iframe":return"";case"object":case"image":case"aside":case"template":case"library":return this._dragTarget.cloneNode(!0);case"groupLayer":var i=this._dragTarget.cloneNode(!0);return i.removeAttribute("style"),i;default:return""}},t._textGhost=function(e,t){var n=this._isSingleInlineImage(t)?e.target.parentNode.cloneNode(!0):tC.a.selection.getRange().cloneContents(),i=this._refineTextGhost(n);return this._resolveTextGhostWrapper(i)},t._isSingleInlineImage=function(e){if(!e||1!==e.length)return!1;var t=e[0].value;if(!t||!t.paragraphs||1!==t.paragraphs.length)return!1;var n=t.paragraphs[0].nodes;return!(!n||1!==n.length)&&"imageNode"===n[0].ctype},t._refineTextGhost=function(e){var t=e.querySelectorAll(".se-blind");Object(c.a)(t,function(e){e.parentElement.removeChild(e)});var n=e.querySelectorAll(".se-set-rep-image-button");return Object(c.a)(n,function(e){e.parentElement.removeChild(e)}),e},t._resolveTextGhostWrapper=function(e){var t=document.createElement("div"),n=e.querySelectorAll(".se-inline-image-resource"),i=e.childNodes.length>0&&0===n.length,r=1===e.childNodes.length&&1===n.length;if(0===e.childNodes.length)t.classList.add("se-text-ghost-complex");else if(i){var o=document.createElement("div");o.classList.add("se-text-ghost-contents"),o.textContent=e.textContent,t.classList.add("se-text-ghost"),t.appendChild(o)}else r?(t.classList.add("se-inline-image-ghost"),t.appendChild(e)):t.classList.add("se-text-ghost-complex");return t},t._initDragGhost=function(e,t,n){var i=this._resolveDragGhost(e,t,n),r=i?i.outerHTML:"",o=this._resolveDragGhostWrapperClassName(e,t),a=this._tempGhostElement(r);this._dragGhostWrapper.innerHTML=a.innerHTML,this._dragGhostWrapper.className=o,this._shouldUseNativeGhost&&e.dataTransfer.setDragImage(this._dragGhostWrapper,oT,aT),this.updatePosition(e),this._dragStartCallback(e),this._addDocumentDragEndEvent()},t._tempGhostElement=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelector(".se-toolbar");n&&n.parentElement.removeChild(n);var i=t.querySelectorAll("*");return t.removeAttribute("id"),Object(c.a)(i,function(e){e.removeAttribute("id")}),t},t._handleDocumentDragEnd=function(){this._resetDragTarget(),this._resetDragGhost()},t._addDocumentDragEndEvent=function(){document.addEventListener("dragend",this._handleDocumentDragEnd)},t._removeDocumentDragEndEvent=function(){document.removeEventListener("dragend",this._handleDocumentDragEnd)},t._setDragTargetClassName=function(e){e&&this._dragTarget&&this._dragTarget.classList.add("se-component-drag-source")},t._resetDragTarget=function(){this._dragTarget&&this._dragTarget.classList&&(this._dragTarget.classList.remove("se-component-drag-source"),this._dragTarget=null)},t.updatePosition=function(e){this._shouldUseNativeGhost||this._dragGhostWrapper&&(this._dragGhostWrapper.style.top=e.clientY+aT+"px",this._dragGhostWrapper.style.left=e.clientX+oT+"px")},t._resetDragGhost=function(){this._dragGhostWrapper&&(this._dragGhostWrapper.className="",this._dragGhostWrapper.innerHTML="",this._dragGhostWrapper.removeAttribute("style"),this._dragGhostWrapper=null),this._removeDocumentDragEndEvent()},t._resolveDragGhostWrapperClassName=function(e,t){var n="se-dragging-ghost-single";return["aside","library","template"].includes(t)?n="se-dragging-ghost-custom":"text"===t?n="se-dragging-ghost-text":"complex"===t?n="se-dragging-ghost-multiple":"iframe"===t&&(n="se-dragging-ghost-iframe"),R()(["se-dragging-ghost","se-theme-"+this._themeName,n,{"se-dragging-ghost-native":this._shouldUseNativeGhost}])},e}(),k()(II.prototype,"_handleDocumentDragEnd",[te.autobind],Object.getOwnPropertyDescriptor(II.prototype,"_handleDocumentDragEnd"),II.prototype),II),cT=150,lT=50,uT=function(){function e(){this._configAgent=_.W.get("configAgent");var e=this._configAgent.get("productConfig.scroll.thresholdPixel"),t=this._configAgent.get("productConfig.scroll.maxAutoScrollOffset");this._isMobile="mobile"===this._configAgent.get("productEnv.deviceType"),this._domAccessor=_.W.get("domAccessor"),this._thresholdPixel=e||cT,this._maxAutoScrollOffset=t||lT,this._readied=!1,this._timer=null}var t=e.prototype;return t.forceStopAutoScroll=function(){this._stopScroll()},t.scrollPage=function(e){this._readied||this._beforeScrollPage(),this._triggerInfo=this._validateTriggerArea(e)},t._beforeScrollPage=function(){var e=this._getContentAndScrollTarget(),t=e.contentTarget,n=e.scrollTarget,i=t.getBoundingClientRect().top;this._readied=!0,this._contentOffsetTop=i+Jr.a.getScrollTop(n),this._contentOffsetHeight=t.offsetHeight,this._scrollHeight=n===window?document.body.scrollHeight:n.scrollHeight,this._screenHeight=n===window?window.innerHeight:n.offsetHeight,this._scrollTarget=n,this._threshold=Math.min(this._thresholdPixel,this._screenHeight/3|0),this._triggerInfo={isTop:!1,isBottom:!1,clientY:0},this._startAutoScrolling()},t._stopScroll=function(){cancelAnimationFrame(this._timer),this._readied=!1,this._timer=null},t._startAutoScrolling=function(){var e=this;this._timer=requestAnimationFrame(function t(){e._readied&&(e._scroll(),e._timer=requestAnimationFrame(t))})},t._validateTriggerArea=function(e){var t=e.clientY;return{isTop:this._isTopArea(t),isBottom:this._isBottomArea(t),clientY:t}},t._getContentAndScrollTarget=function(){throw new Error("Implement the '_getContentAndScrollTarget()' method.")},t._isTopArea=function(e){throw new Error("Implement the '_isTopArea()' method.")},t._isBottomArea=function(e){throw new Error("Implement the '_isBottomArea()' method.")},t._scroll=function(){throw new Error("Implement the '_scroll()' method.")},e}(),pT=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n._getContentAndScrollTarget=function(){var e=this._domAccessor.getScrollTarget();return{contentTarget:this._domAccessor.getBodyContainer(),scrollTarget:this._isMobile||e===document.body?window:e}},n._isTopArea=function(e){return e<this._headerTop()+this._threshold},n._isBottomArea=function(e){return e>this._screenHeight-this._threshold},n._headerTop=function(){var e=this._domAccessor.getHeader();return e.getBoundingClientRect().top+e.offsetHeight},n._scroll=function(){var e=this._triggerInfo,t=e.isTop,n=e.isBottom,i=e.clientY,r=this._scrollTarget,o=this._contentOffsetTop,a=this._contentOffsetHeight,s=this._screenHeight,c=Jr.a.getScrollTop(r),l=o-this._headerTop();if(t&&c-l>0){var u=i-l;Jr.a.setScrollTop(r,c+this._resolveSpeedY(u,!0))}n&&o+a>c+s&&Jr.a.setScrollTop(r,c+this._resolveSpeedY(i,!1))},n._resolveSpeedY=function(e,t){var n=this._threshold,i=this._screenHeight,r=Math.max(-1,Math.min(1,((t?-n:n-i)+e)/n));return this._maxAutoScrollOffset*r|0},t}(uT),dT=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n._getContentAndScrollTarget=function(){return{contentTarget:this._domAccessor.getCanvas(),scrollTarget:this._domAccessor.getScrollTarget()}},n._isTopArea=function(e){var t=this._contentOffsetTop;return t<e&&t+this._threshold>e},n._isBottomArea=function(e){return e>this._contentOffsetTop+this._screenHeight-this._threshold},n._scroll=function(){var e=this._triggerInfo,t=e.isTop,n=e.isBottom,i=e.clientY,r=this._scrollTarget,o=this._scrollHeight,a=this._screenHeight,s=Jr.a.getScrollTop(r);if(t&&s&&Jr.a.setScrollTop(r,s+this._resolveSpeedY(i,t)),n)if(o>s+a)Jr.a.setScrollTop(r,s+this._resolveSpeedY(i,t));else{var c=this._scrollTarget.scrollHeight;this._scrollHeight!==c&&(this._scrollHeight=c)}},n._resolveSpeedY=function(e,t){var n=this._threshold,i=this._contentOffsetTop,r=this._screenHeight,o=0;return o=t?(-(i+n)+e)/n:(n-r-i+e)/n,this._maxAutoScrollOffset*Math.max(-1,Math.min(1,o))},t}(uT),hT=function(){function e(){this._subscribers=[],this._componentListStore=null,this._componentListStore=_.W.get("componentListStore")}var t=e.prototype;return t._initializeAutorun=function(){var e=this;this._depostAutorunAsync=D.f.reaction(function(){return e._componentListStore.toValidJSON()},function(t){e._subscribers.forEach(function(n){n.call(e,t)})},{delay:500})},t.subscribeAsync=function(e){0===this._subscribers.length&&this._initializeAutorun(),this._subscribers.push(e)},t.destroy=function(){this._depostAutorunAsync&&this._depostAutorunAsync(),this._componentListStore=null,this._subscribers=[],this._depostAutorunAsync=null},e}(),gT={FONT_FAMILY:"fontFamily",FONT_SIZE_CODE:"fontSizeCode",LINE_HEIGHT:"lineHeight"},fT=Object.values(gT),mT=function(){function e(){this._fontManager=_.W.get("fontManager"),this._allowedFontNames=Object(Pn.a)(this._fontManager.getCurrentFontSpec(),function(e){return e.value}),this._allowedFontSizes=["fs11","fs13","fs15","fs16","fs19","fs24","fs28","fs30","fs34","fs38","fs45"]}var t=e.prototype;return t._getValidStyle=function(e,t){switch(e){case gT.FONT_FAMILY:return this._allowedFontNames.includes(t)?t:"system";case gT.FONT_SIZE_CODE:return this._allowedFontSizes.includes(t)?t:"fs16";case gT.LINE_HEIGHT:return function(e){return"number"==typeof e&&!Number.isInteger(e)}(t)&&function(e){return"number"==typeof e&&e>=0}(t)?t:Number.isInteger(t)?t.toFixed(1):1.6;default:return t}},t._validStyles=function(e){var t=this;Object(c.a)(e,function(n,i){fT.includes(i)?e[i]=t._getValidStyle(i,n):"object"==typeof n&&t._validStyles(n)})},t.validateThemeStyle=function(e){void 0===e&&(e={}),this._validStyles(e)},e}(),yT=n(788),vT=n(789),_T=function(){function e(){this._i18n=_.W.get("i18n"),this._toastLayerService=_.W.get("toastLayerService"),this._eventDispatcher=_.W.get("eventDispatcher"),this._eventDispatcher.on(_.C.UNSUPPORTED_CTYPE,this._toastUnsupportedCtype.bind(this))}return e.prototype._toastUnsupportedCtype=function(){this._toastLayerService.warningMessage(this._i18n("documentValidate:unsupported_ctype"))},e}(),bT={defaultTheme:"default",themes:{default:{documentTitle:{default:{title:{fontFamily:"nanumgothic",fontSizeCode:"fs32",align:"left"}}},sectionTitle:{default:{title:{fontFamily:"nanumgothic",fontSizeCode:"fs30",lineHeight:1.5,align:"left",fontColor:"#000"}}},text:{default:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.8,align:"left",fontColor:"#000"}}},image:{default:{caption:{fontFamily:"nanumgothic",fontSizeCode:"fs13",lineHeight:1.5,align:"center",fontColor:"#555"}}},imageGroup:{slide:{caption:{fontFamily:"nanumgothic",fontSizeCode:"fs13",lineHeight:1.5,align:"center",fontColor:"#555"}},collage:{caption:{fontFamily:"nanumgothic",fontSizeCode:"fs13",lineHeight:1.5,align:"center",fontColor:"#555"}}},imageStrip:{default:{caption:{fontFamily:"nanumgothic",fontSizeCode:"fs13",lineHeight:1.5,align:"center",fontColor:"#555"}}},video:{default:{caption:{fontFamily:"nanumgothic",fontSizeCode:"fs13",lineHeight:1.5,align:"center",fontColor:"#555"}}},formula:{default:{fontSizeCode:"fs15"}},quotation:{default:{value:{fontSizeCode:"fs19",lineHeight:1.8,fontFamily:"nanummyeongjo",align:"center",fontColor:"#000",italic:!0,bold:!1},source:{fontSizeCode:"fs13",lineHeight:1.5,fontFamily:"nanumgothic",fontColor:"#777",align:"center"}},quotation_line:{value:{fontSizeCode:"fs19",lineHeight:1.8,fontFamily:"nanumbarungothic",align:"left",fontColor:"#000",italic:!1,bold:!1},source:{fontSizeCode:"fs13",lineHeight:1.5,fontFamily:"nanumgothic",fontColor:"#777",align:"left"}},quotation_bubble:{value:{fontSizeCode:"fs19",lineHeight:1.8,fontFamily:"nanummyeongjo",align:"center",fontColor:"#000",italic:!1,bold:!0},source:{fontSizeCode:"fs13",lineHeight:1.5,fontFamily:"nanumgothic",fontColor:"#777",align:"center"}},quotation_underline:{value:{fontSizeCode:"fs19",lineHeight:1.8,fontFamily:"nanummyeongjo",align:"left",fontColor:"#000",italic:!1,bold:!1},source:{fontSizeCode:"fs13",lineHeight:1.5,fontFamily:"nanumgothic",fontColor:"#777",align:"left"}},quotation_postit:{value:{fontSizeCode:"fs19",lineHeight:1.8,fontFamily:"nanumbarungothic",align:"center",fontColor:"#000",italic:!1,bold:!1},source:{fontSizeCode:"fs13",lineHeight:1.5,fontFamily:"nanumgothic",fontColor:"#777",align:"center"}},quotation_corner:{value:{fontSizeCode:"fs19",lineHeight:1.8,fontFamily:"nanumbarungothic",align:"center",fontColor:"#000",italic:!1,bold:!1},source:{fontSizeCode:"fs13",lineHeight:1.5,fontFamily:"nanumgothic",fontColor:"#777",align:"center"}}},table:{default:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.6,fontColor:"#000",align:"left"}},table_layout1:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.6,fontColor:"#000",align:"left"}},table_layout2:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.6,fontColor:"#000",align:"left"}},table_layout3:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.6,fontColor:"#000",align:"left"}},table_layout4:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.6,fontColor:"#000",align:"left"}},table_layout5:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.6,fontColor:"#000",align:"left"}},table_layout6:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.6,fontColor:"#000",align:"left"}},table_layout7:{value:{fontFamily:"nanumgothic",fontSizeCode:"fs15",lineHeight:1.6,fontColor:"#000",align:"left"}}}}},userDefinedStyle:{text:{},sectionTitle:{}}},ST=function(){function e(e){this._uploadProgressLayerService=_.W.get("uploadProgressLayerService"),this._i18n=e,this._totalCount=0}var t=e.prototype;return t.start=function(e){this._totalCount+=e;var t={title:this._i18n("imageBehavior:ready"),description:this._i18n("imageBehavior:file_count",{fileCount:this._totalCount}),totalCount:this._totalCount};this._uploadProgressLayerService.start(t)},t.end=function(e){this._totalCount-=e,this._totalCount<=0&&(this._uploadProgressLayerService.end(),this._totalCount=0)},t.update=function(e,t){var n=this;this._uploadProgressLayerService.update({title:e,description:""+Ma.a.fileSizeSI(t),doneStateResolver:function(){return{title:n._i18n("imageBehavior:completed"),description:n._i18n("imageBehavior:image_inserted")}}})},e}(),CT=function(){function e(e){this._alertLayerService=_.W.get("alertLayerService"),this._i18n=e}var t=e.prototype;return t.open=function(e){var t=this;return this._resolveErrorList(e).reduce(function(n,i){return n.then(function(){return new Promise(function(n){t._alertLayerService.open(Re()({onClickConfirm:function(){return n(e)}},i))})})},Promise.resolve())},t._resolveErrorList=function(e){return e.filter(function(e){return"SERVER_ERROR"===e.code}).length?[{type:"alert",title:this._i18n("imageBehavior:upload_failed"),description:this._i18n("imageBehavior:server_fall_over_error")}]:this._resolveErrorWithXcam(e)},t._resolveErrorWithXcam=function(e){var t=[],n=0,i=0,r=e.filter(function(e){var t=e.code;switch(t){case"XCAM_FAIL":n++;break;case"XCAM_FILTERED":i++}return"XCAM_FAIL"!==t&&"XCAM_FILTERED"!==t}),o=r.length;return o&&t.push({type:"file",title:this._i18n("imageBehavior:upload_failed"),description:this._i18n("imageBehavior:upload_failed_desc",{failUploadCount:o}),errorList:r}),n?t.push({type:"alert",description:this._i18n("imageBehavior:xcam_fail",{failUploadCount:i+n}),title:this._i18n("imageBehavior:xcam_title")}):i&&t.push({type:"alert",description:this._i18n("imageBehavior:xcam_filtered",{failUploadCount:i}),title:this._i18n("imageBehavior:xcam_title")}),t},e}(),IT=/\n|\r/g,OT=(OI=function(){function e(){var e=this;this._repaintCursor=Object(Go.a)(function(){e._virtualEditable.repaintCursor()},500),this._imageTypeLayerService=_.W.get("imageTypeLayerService"),this._configAgent=_.W.get("configAgent"),this._i18n=_.W.get("i18n"),this._editingService=_.W.get("editingService"),this._imageUploadService=_.W.get("imageUploadService"),this._imageComponentService=_.W.get("imageComponentService"),this._imageGroupComponentService=_.W.get("imageGroupComponentService"),this._inlineImageService=_.W.get("inlineImageService"),this._canvasScrollingService=_.W.get("canvasScrollingService"),this._documentTitleComponentService=_.W.get("documentTitleComponentService"),this._complexImageLayoutsEnabled=this._configAgent.get("productConfig.complexImageLayoutsEnabled"),this._componentFactory=_.W.get("componentFactory"),this._virtualEditable=_.W.get("virtualEditable"),this._alertLayerService=_.W.get("alertLayerService"),this._locationPrivacyService=_.W.get("locationPrivacyService"),this._componentListStore=_.W.get("componentListStore"),this._editorStatusStore=_.W.get("editorStatusStore"),this._imageUploader=wT.getInstance({progressLayer:new ST(this._i18n),errorAlert:new CT(this._i18n),editingService:this._editingService,eventDispatcherService:_.W.get("eventDispatcherService"),imageUploadService:this._imageUploadService,componentListStore:_.W.get("componentListStore"),sentryManager:_.W.get("sentryManager"),i18n:this._i18n})}var t=e.prototype;return t.destroy=function(){wT.destroy()},t.openFileDialog=function(e){return void 0===e&&(e={}),this._imageUploadService.openFileDialog(e)},t.insertImageFromUrls=function(e,t){var n=this,i=function(e){var t=e.invalidImageErrors;return n.cleanUpImage(t),n._scrollToFocus(),{res:e}};return this._preprocForMaxCountCheck(e).then(function(){return n._imageUploader.insert({validFiles:e,invalidFiles:[]},{makeComponent:function(e){return n._makeImageComponentByUrl(e,t)},onEachUpload:n._onEachUploadedImage}).then(i).then(n._checkUserLocation)})},t.insertInlineImageFromUrls=function(e,t){var n=this,i=null,r=function(e){var t=e.invalidImageErrors;return n._cleanUpInline(i,t),e};return this._preprocForMaxCountCheck(e).then(function(){return n._imageUploader.insert({validFiles:e,invalidFiles:[]},{makeComponent:function(){var e=Tt()(It.a.mark(function e(r){var o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._makeInlineImageComponentByUrl(r,t);case 2:return o=e.sent,i=o.compStore,e.abrupt("return",o);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onEachUpload:function(e){var t=e.code,r=e.response;"SUCCESS"===t&&n._inlineImageService.updateShellImageNodeStore(i,r)}}).then(r)})},t.insertExternalImage=function(e,t){var n=this;return this._canUseComplexLayouts(e)?this._preprocForMaxCountCheck(e).then(function(){return n._imageTypeLayerService.open({type:"file",payload:{validFiles:e,invalidFiles:[],length:e.length},insertInterceptor:t})}):this.insertImage({validFiles:e,invalidFiles:[]},t)},t.insertBackground=function(e,t,n){var i=this,r=t.validFiles,o=t.invalidFiles,a=void 0===o?[]:o,s=function(e){var t=e.succeededImages;return i._cleanUpBackground(t,n),i._editorStatusStore.idle(),e};return this._preprocForMaxCountCheck(r).then(function(){return i._editorStatusStore.busy(),i._imageUploader.insert({validFiles:r,invalidFiles:a},{makeComponent:i._validate}).then(s)})},t.insertBackgroundFromUrls=function(e,t,n){var i=this,r=function(e){var t=e.succeededImages;return i._cleanUpBackground(t),i._editorStatusStore.idle(),e};return this._preprocForMaxCountCheck(t).then(function(){return i._editorStatusStore.busy(),i._imageUploader.insert({validFiles:t,invalidFiles:[],materialFiles:n},{makeComponent:i._validateUrl}).then(r)})},t.insertExternalBackground=function(e,t,n){return this.insertBackground(e,{validFiles:t,invalidFiles:[]},n)},t.insertGroupImage=function(e,t,n){var i=this,r=null,o=function(e){return i._cleanUpImageGroup(r),{res:e,target:r}};return this._preprocForMaxCountCheck(t.validFiles).then(function(){return i._imageUploader.insert(t,{makeComponent:function(){var t=Tt()(It.a.mark(function t(o){var a;return It.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i._makeGroupComponent(o,e,n);case 2:return a=t.sent,r=a.groupImageCompStore,t.abrupt("return",a);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),onEachUpload:function(e){i._onEachUploadedImageGroup(e,r)}}).then(o).then(i._checkUserLocation)})},t.insertImageGroupFromUrls=function(e,t,n){var i=this,r=null,o=function(e){return i._cleanUpImageGroup(r),{res:e,target:r}};return this._preprocForMaxCountCheck(t).then(function(){return i._imageUploader.insert({validFiles:t,invalidFiles:[]},{makeComponent:function(){var t=Tt()(It.a.mark(function t(o){var a;return It.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i._makeUrlGroupComponentByUrl(o,e,n);case 2:return a=t.sent,r=a.groupImageCompStore,t.abrupt("return",a);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),onEachUpload:function(e){i._onEachUploadedImageGroup(e,r)}}).then(o).then(i._checkUserLocation)})},t.insertInlineImage=function(e){var t=this,n=e.validFiles,i=e.invalidFiles,r=null,o=function(e){var n=e.invalidImageErrors;return t._cleanUpInline(r,n),t._editorStatusStore.idle(),e};return this._preprocForMaxCountCheck(n).then(function(){return t._editorStatusStore.busy(),t._imageUploader.insert({validFiles:n,invalidFiles:i},{makeComponent:function(){var e=Tt()(It.a.mark(function e(n){var i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._makeInlineComponent(n);case 2:return i=e.sent,r=i.compStore,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onEachUpload:function(e){var n=e.code,i=e.response;"SUCCESS"===n&&t._inlineImageService.updateShellImageNodeStore(r,i)}}).then(o)})},t.dropImageFromAside=function(e,t){var n=this;return this._preprocForMaxCountCheck(e).then(function(){return n._imageUploader.insert({validFiles:e,invalidFiles:[],materialFiles:e},{makeComponent:function(e){return n._makeDropImageFromAside(e,t)},onEachUpload:n._onEachUploadedImage})})},t._canUseComplexLayouts=function(e){return this._complexImageLayoutsEnabled&&e.length>1},t._validateUrl=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageComponentService.createShellsFromUrl(t,n);case 2:return i=e.sent,r=i.imageCompStores,o=i.ids,e.abrupt("return",{shellImageCompIds:o,validImages:t,invalidImages:[],shellImageComps:r});case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._makeGroupComponent=function(){var e=Tt()(It.a.mark(function e(t,n,i){var r,o,a,s,c,l;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._validate(t);case 2:return r=e.sent,o=r.shellImageComps,a=r.shellImageCompIds,s=r.validImages,c=r.invalidImages,l=this._imageGroupComponentService.convertToGroupImage(n,o),this._insertComponents([l],i),e.abrupt("return",{validImages:s,invalidImages:c,shellImageComps:o,shellImageCompIds:a,groupImageCompStore:l});case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}(),t._makeInlineComponent=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s,c;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageComponentService.validateImageFiles(t);case 2:return n=e.sent,e.next=5,this._inlineImageService.createFileUploadData(n);case 5:return i=e.sent,r=i.compStore,o=i.uploadTarget,a=o.ids,s=o.files,c=i.invalidImages,e.abrupt("return",{compStore:r,shellImageCompIds:a,validImages:s,invalidImages:c});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._makeInlineImageComponentByUrl=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageComponentService.validateUrl(t,n);case 2:return i=e.sent,e.next=5,this._inlineImageService.createFileUploadData(i);case 5:return r=e.sent,o=r.compStore,a=r.uploadTarget.ids,s=r.invalidImages,e.abrupt("return",{compStore:o,shellImageCompIds:a,validImages:t,invalidImages:s});case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._makeBackgroundImage=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._validate(t);case 2:return n=e.sent,i=n.shellImageComps,r=n.shellImageCompIds,o=n.validImages,a=n.invalidImages,e.abrupt("return",{validImages:o,invalidImages:a,shellImageComps:i,shellImageCompIds:r});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._makeImageComponentByUrl=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._validateUrl(t,n);case 2:return i=e.sent,r=i.shellImageComps,o=i.shellImageCompIds,a=i.validImages,s=i.invalidImages,this._insertComponents(r),e.abrupt("return",{shellImageCompIds:o,validImages:a,invalidImages:s,shellImageComps:r});case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._makeUrlGroupComponentByUrl=function(){var e=Tt()(It.a.mark(function e(t,n,i){var r,o,a,s,c,l;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._validateUrl(t,i);case 2:return r=e.sent,o=r.shellImageComps,a=r.shellImageCompIds,s=r.validImages,c=r.invalidImages,l=this._imageGroupComponentService.convertToGroupImage(n,o),this._insertComponents([l]),e.abrupt("return",{validImages:s,invalidImages:c,shellImageComps:o,shellImageCompIds:a,groupImageCompStore:l});case 10:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}(),t._makeDropImageFromAside=function(e,t){var n=e.map(function(e){return e.id});return this._insertComponents(e,t),{validImages:e.map(function(e){return{url:encodeURIComponent(e.src)}}),invalidImages:[],shellImageComps:e,shellImageCompIds:n}},t._scrollToFocus=function(){this._canvasScrollingService.scrollToFocus()},t.cleanUpImage=function(e){this._deleteUploadFailedImageComp(e)},t._deleteUploadFailedImageComp=function(e){var t=this;e.forEach(function(e){var n=e.id;if(n){var i=t._imageComponentService.getComponentStore(n);i&&t._editingService.eraseComponent(i.id)}})},t.changeImage=function(e,t){var n=this,i=e.targetStore,r=e.selectedImages,o=r.validFiles,a=r.invalidFiles;void 0===t&&(t={});var s=i.id,c=i.contentMode,l=Re()({makeComponent:function(){var e=Tt()(It.a.mark(function e(t){var i;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._validate(t);case 2:return(i=e.sent).shellImageComps[0].changeContentMode&&i.shellImageComps[0].changeContentMode(c),e.abrupt("return",Re()({},i,{shellImageCompIds:[s]}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),onEachUpload:this._onEachUploadedImage},t);return this._imageUploader.insert({validFiles:o,invalidFiles:a},l).then(function(e){var t=e.invalidImageErrors;return n.cleanUpImage(t),n._scrollToFocus(),{res:e,target:i}}).then(this._checkUserLocation)},t._onEachUploadedImageGroup=function(e,t){var n=e.code,i=e.response;if("SUCCESS"===n){var r=i.id,o=this._imageGroupComponentService.getImageComponent(t,r);i.displayFormat=_.D.NORMAL,this._imageComponentService.changeImage(o,i)}},t._cleanUpImageGroup=function(e){var t=this._imageGroupComponentService.getPhaseInfoOfImages(e),n=t.completedCount;if(0!==n&&t)if(1===n){var i=t.completedImages[0];i.resetWidthPercentage();var r=i.toValidJSON(),o=this._componentFactory.createComponentWithCompData(r);this._editingService.insert({sourceComponents:[o]}),this._editingService.eraseComponent(e.id)}else this._imageGroupComponentService.completeAll(e);else this._editingService.eraseComponent(e.id)},t._cleanUpInline=function(e,t){var n=this;this._componentListStore.getComponentById(e.id)&&t.forEach(function(t){var i=t.id;i&&n._inlineImageService.deleteShellImageNodeById(e,i)})},t._cleanUpBackground=function(e,t){if(e.length>0){var n=e[0].response;t?t(n):this._documentTitleComponentService.updateBackgroundImage(n)}else this._documentTitleComponentService.reset()},t._preprocForMaxCountCheck=function(e){var t=this;return new Promise(function(n,i){if(t._imageUploadService.isExceededMaxCount(e)){var r=t._imageUploadService.imageMaxUploadCount;t._alertLayerService.open({type:"alert",title:t._i18n("limits:title_exceeded_count_by_max"),description:t._i18n("limits:image_description_exceeded_count_by_max",{maxCount:r}),isDimUse:!1,onClickConfirm:function(){return n(!0)},onClickCancel:function(){return i()}})}else n(!0)})},t._checkUserLocation=function(e){var t=this,n=e.res,i=e.target,r=(n.succeededImages||[]).filter(function(e){return!!Object(x.a)(e,"response.exif",null)});return r.length>0?this._locationPrivacyService.isAllowedAccess()&&(this._locationPrivacyService.writeUserLocation(),r.forEach(function(e){var n=Object(x.a)(e,"response.id",null),r=Object(x.a)(e,"response.exif",null),o=wt.a.restoreSpecialChar(r);try{var a=JSON.parse(o),s=t._extractLocationFromExif(a),c=null;(c=i&&i.getStoreById?i.getStoreById(n):t._componentListStore.getComponentById(n))&&c.changeUserLocation&&c.changeUserLocation(s)}catch(e){}})):i&&i.changeUserLocation&&i.changeUserLocation(null),n},t._extractLocationFromExif=function(e){var t=e.GPSLatitude,n=e.GPSLongitude;return t&&n?{ctype:"position",latitude:this._calcGPSToDegree(t),longitude:this._calcGPSToDegree(n)}:null},t._calcGPSToDegree=function(e){var t=this,n=e.split(",").map(function(e){return t._calcStringFraction(e)});return n[0]+n[1]/60+n[2]/3600},t._calcStringFraction=function(e){var t=e.split("/").map(function(e){return Number(e)}),n=t[0],i=t[1],r=n/(void 0===i?1:i);return isFinite(r)?r:0},e}(),k()(OI.prototype,"_validateUrl",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_validateUrl"),OI.prototype),k()(OI.prototype,"_makeGroupComponent",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_makeGroupComponent"),OI.prototype),k()(OI.prototype,"_makeInlineComponent",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_makeInlineComponent"),OI.prototype),k()(OI.prototype,"_makeInlineImageComponentByUrl",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_makeInlineImageComponentByUrl"),OI.prototype),k()(OI.prototype,"_makeBackgroundImage",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_makeBackgroundImage"),OI.prototype),k()(OI.prototype,"_makeImageComponentByUrl",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_makeImageComponentByUrl"),OI.prototype),k()(OI.prototype,"_makeUrlGroupComponentByUrl",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_makeUrlGroupComponentByUrl"),OI.prototype),k()(OI.prototype,"_makeDropImageFromAside",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_makeDropImageFromAside"),OI.prototype),k()(OI.prototype,"_onEachUploadedImageGroup",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_onEachUploadedImageGroup"),OI.prototype),k()(OI.prototype,"_checkUserLocation",[te.autobind],Object.getOwnPropertyDescriptor(OI.prototype,"_checkUserLocation"),OI.prototype),OI),TT={onEachUpload:Xf.a},LT=[Promise.resolve({succeededImages:[],failedImages:[],invalidImageErrors:[]})],ET=new(function(){function e(){this._uploadPromises=LT}var t=e.prototype;return t.uploading=function(e){return this._uploadPromises===e},t.add=function(e){return this._uploadPromises=[].concat(this._uploadPromises,[e])},t.reset=function(){this._uploadPromises=LT},e}()),PT=null,wT=function(){function e(e){var t=e.progressLayer,n=e.errorAlert,i=e.editingService,r=e.eventDispatcherService,o=e.imageUploadService,a=e.componentListStore,s=e.sentryManager,c=e.i18n;this._errorAlert=n,this._progressLayer=t,this._editingService=i,this._eventDispatcherService=r,this._imageUploadService=o,this._componentListStore=a,this._sentryManager=s,this._i18n=c}e.getInstance=function(t){return PT||(PT=new e(t))},e.destroy=function(){PT=null};var t=e.prototype;return t.insert=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o,a,s,c,l,u,p,d,h,g;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.validFiles,r=t.invalidFiles,o=t.materialFiles,a=void 0===o?[]:o,ET.uploading(LT)||this._eventDispatcherService.emit(_.z.IN_PROGRESS),s=null,c=this._insert({validFiles:i,invalidFiles:r},n).then(function(e){return s=e}),l=ET.add(c),e.next=7,Promise.all(l);case 7:if(u=e.sent,!ET.uploading(l)){e.next=16;break}if(p=u.reduce(function(e,t){var n,i,r=t.invalidImageErrors,o=t.succeededImages;return(n=e.uploadErrors).push.apply(n,r),(i=e.uploadSuccess).push.apply(i,o),e},{uploadErrors:[],uploadSuccess:[]}),d=p.uploadErrors,h=p.uploadSuccess,!(d.length>0)){e.next=13;break}return e.next=13,this._errorAlert.open(d);case 13:h.length>0&&!a.length>0&&this._eventDispatcherService.dispatch(_.C.ADD_XCAM_CONTENTS,{ctype:"image"}),ET.reset(),this._eventDispatcherService.emit(_.z.PROGRESS_COMPLETED);case 16:return(g=Object(jC.a)(RC.b.IMAGE,s))&&this._eventDispatcherService.dispatch(_.z.RESOURCE_UPLOADED,g),e.abrupt("return",s);case 19:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._insert=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o,a,s,c,l,u,p,d,h,g;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.validFiles,r=t.invalidFiles,o=this._imageUploadService.invalidImageErrors(r.map(function(e){return{file:e,code:e.code}})),a={succeededImages:[],failedImages:[]},0===i.length){e.next=29;break}return s=Re()({},TT,n),c=s.makeComponent,l=s.onEachUpload,e.next=7,c(i);case 7:if(u=e.sent,p=u.validImages,d=u.invalidImages,h=u.shellImageCompIds,g=p.length,o.push.apply(o,this._imageUploadService.invalidImageErrors(d)),0===g){e.next=29;break}return this._updateImageCompPhases(h,_.O.PROCESSING),this._progressLayer.start(g),e.prev=16,e.next=19,this._uploadImages(h,p,l);case 19:a=e.sent,e.next=26;break;case 22:return e.prev=22,e.t0=e.catch(16),a.invalidImageErrors=[].concat(o,this._imageUploadService.invalidImageErrors(i.map(function(e,t){return{id:h[t],code:"SERVER_ERROR",file:e}}))),e.abrupt("return",a);case 26:return e.prev=26,this._progressLayer.end(g),e.finish(26);case 29:return o.push.apply(o,this._imageUploadService.invalidImageErrors(a.failedImages.map(function(e){return e.response}))),a.invalidImageErrors=o,e.abrupt("return",a);case 32:case"end":return e.stop()}},e,this,[[16,22,26,29]])}));return function(t,n){return e.apply(this,arguments)}}(),t._uploadImages=function(e,t,n){var i=this;return(Ma.a.isFile(t[0])?this._imageUploadService.uploadImagesFromFiles(this._imageUploadService.createSourceList(e,t)):this._imageUploadService.uploadImageFromUrls(this._imageUploadService.createSourceList(e,t))).then(function(e){return Promise.all(e.map(function(e){return e.then(Xf.a,Xf.a).then(function(e){var t=e.response,r=t.file,o=void 0===r?{}:r,a=t.fileName||o.name,s=t.fileSize||o.size;i._progressLayer.update(a,s),n(e);var c="SUCCESS"===e.code,l=e.response,u=l.path;return c&&""===u&&i._sentryManager.withScope(function(e){e.setLevel("info"),e.setTag("se-logger","ImageBehavior"),e.setExtra("Logger","ImageUploadService._onCompleteEach.SUCCESS"),e.setExtra("Cause","포토 플랫폼 업로드 응답으로 필수 값인 path 누락"),e.setExtra("Error Data",l),i._sentryManager.captureMessage("[이미지] 이미지 업로드 응답 데이터 오류")}),c&&u&&u.match(IT)&&(l.path=u.replace(IT,""),i._sentryManager.withScope(function(e){e.setLevel("info"),e.setTag("se-logger","ImageBehavior"),e.setExtra("Logger","ImageUploadService._onCompleteEach.SUCCESS"),e.setExtra("Cause","포토 플랫폼 업로드 응답으로 path 값에 CR/LF 문자 키 값이 포함되어 예외 처리"),e.setExtra("Error Data",l),i._sentryManager.captureMessage("[이미지] 이미지 업로드 응답 데이터 오류")})),e})}))}).then(function(e){var t=Object(OC.a)(e,function(e){return"FAIL"===e.code}),n=t[0];return{succeededImages:t[1],failedImages:n}})},t._updateImageCompPhases=function(e,t){var n=this;e.map(function(e){var i=n._componentListStore.getComponentById(e);i&&i.updatePhase(t)})},e}(),kT=(TI=function(e){function t(){return e.apply(this,arguments)||this}S()(t,e);var n=t.prototype;return n.insertImage=function(e,t){var n=this,i=e.validFiles,r=e.invalidFiles,o=void 0===r?[]:r,a=function(e){var t=e.invalidImageErrors;return n.cleanUpImage(t),n._scrollToFocus(),{res:e}};return this._preprocForMaxCountCheck(i).then(function(){return n._imageUploader.insert({validFiles:i,invalidFiles:o},{makeComponent:function(e){return n._makeImageComponent(e,t)},onEachUpload:n._onEachUploadedImage}).then(a).then(n._checkUserLocation)})},n.insertImageFromCompData=function(e,t){var n=this,i=function(e){var t=e.invalidImageErrors;return n.cleanUpImage(t),n._scrollToFocus(),e};return this._preprocForMaxCountCheck(e).then(function(){return n._imageUploader.insert({validFiles:e,invalidFiles:[],materialFiles:e.filter(function(e){return e.origin.externalId})},{makeComponent:function(e){return n._makeImageFromCompData(e,t)},onEachUpload:n._onEachUploadedImage}).then(i)})},n.insert=function(e,t){var n=this,i=e.validFiles,r=e.invalidFiles,o=e.materialFiles;return this._preprocForMaxCountCheck(i).then(function(){return n._imageUploader.insert({validFiles:i,invalidFiles:r,materialFiles:o},t)})},n._makeImageComponent=function(){var e=Tt()(It.a.mark(function e(t,n){var i,r,o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._validate(t);case 2:return i=e.sent,r=i.shellImageComps,o=i.shellImageCompIds,a=i.validImages,s=i.invalidImages,this._insertComponents(r,n),e.abrupt("return",{validImages:a,invalidImages:s,shellImageComps:r,shellImageCompIds:o});case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n._makeImageFromCompData=function(e,t){var n=this._imageComponentService.createShellsFromCompData(e),i=n.imageCompStores,r=n.ids;return this._insertComponents(i,t),{validImages:e.map(function(e){return{url:encodeURIComponent(e.src)}}),invalidImages:[],shellImageComps:i,shellImageCompIds:r}},n._onEachUploadedImage=function(e){var t=e.code,n=e.response;"SUCCESS"===t&&(this._imageComponentService.updateShellImageCompStore(n.id,n),this._repaintCursor())},n._validate=function(){var e=Tt()(It.a.mark(function e(t){var n,i,r,o,a,s;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageComponentService.createFileUploadData(t);case 2:return n=e.sent,i=n.imageCompStores,r=n.uploadTarget,o=r.ids,a=r.files,s=n.invalidImages,e.abrupt("return",{shellImageComps:i,shellImageCompIds:o,validImages:a,invalidImages:s});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._insertComponents=function(e,t){t?t([].concat(e)):this._editingService.insert({sourceComponents:[].concat(e)})},t}(OT),k()(TI.prototype,"_makeImageComponent",[te.autobind],Object.getOwnPropertyDescriptor(TI.prototype,"_makeImageComponent"),TI.prototype),k()(TI.prototype,"_makeImageFromCompData",[te.autobind],Object.getOwnPropertyDescriptor(TI.prototype,"_makeImageFromCompData"),TI.prototype),k()(TI.prototype,"_onEachUploadedImage",[te.autobind],Object.getOwnPropertyDescriptor(TI.prototype,"_onEachUploadedImage"),TI.prototype),k()(TI.prototype,"_validate",[te.autobind],Object.getOwnPropertyDescriptor(TI.prototype,"_validate"),TI.prototype),TI),xT={storagePolicy:{value:Gc.a},spellChecker:{klass:ZO,args:[{ref:"configAgent"}]},photoEditor:{klass:tT},mathEditor:{klass:iT},seVideoUploader:{klass:rT,args:[{value:{option:{featureLocalVid:!0,featureCloudVid:!0,featureLinkVid:!1,feature360Vid:!0,featureMetaEdit:!0}}}]},eventDispatcherService:{klass:q_},historyService:{klass:eb},toolbarService:{klass:ib},copyPasteService:{klass:rb},dragAndDropService:{klass:gb},dragGhost:{klass:sT},scrollBody:{klass:pT},scrollCanvas:{klass:dT},canvasScrollingService:{klass:yb},a11yService:{klass:vb},aiHistoryService:{klass:eb,args:[{value:{maxLength:10}}]},editingService:{klass:yS},documentService:{klass:DS},finderService:{klass:AS},propertyChangeService:{klass:US},representativeImageService:{klass:qS},panoramaImageService:{klass:JS},selectionService:{klass:vC},themeService:{klass:_C},authService:{klass:bC},crawlerService:{klass:SC},documentValidateService:{klass:CC},fileUploadService:{klass:IC},audioUploadService:{klass:TC},imageUploadService:{klass:DC},videoUploadService:{klass:MC},imageEditService:{klass:BC},inlineImageService:{klass:WC},tagService:{klass:VC},themeStore:{klass:UO,args:[{value:bT}]},themeStyleValidator:{klass:mT},storageService:{klass:GC},styleStore:{klass:FO},toolbarStore:{klass:zO},documentDataStore:{klass:VO},editorStatusStore:{klass:GO.a},componentListStore:{klass:es},dragAndDropStore:{klass:Ja.a},selectionInfoStore:{klass:Ob},tokenStore:{klass:HO},stateUpdateBroadcaster:{klass:hT},dragAndDropUseCase:{klass:Fa.a},errorRecoveryUseCase:{klass:yT.a},a11yFocusUseCase:{klass:vT.a},validateUseCase:{klass:_T},imageBehavior:{klass:kT},wordCountService:{klass:HC},locationPrivacyService:{klass:qC},aiStreamStore:{klass:qO},aiStreamService:{klass:BO},writingLogStore:{klass:QO,args:[{ref:"componentListStore"}]},writingLogService:{klass:WO}},DT=(LI=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="extend-block-word-left"}return e.prototype.execute=function(e){return this._virtualEditable.extendToEdgeOfWord(_.u.LEFT,e),!1},e}(),k()(LI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(LI.prototype,"execute"),LI.prototype),LI),AT=(EI=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="extend-block-word-right"}return e.prototype.execute=function(e){return this._virtualEditable.extendToEdgeOfWord(_.u.RIGHT,e),!1},e}(),k()(EI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(EI.prototype,"execute"),EI.prototype),EI),jT=(PI=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="bold"}return e.prototype.execute=function(){return this._propertyChangeService.toggleStyle("bold"),!1},e}(),k()(PI.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(PI.prototype,"execute"),PI.prototype),PI),RT=(wI=Object(te.history)({throttle:!0}),kI=function(){function e(){this._editingService=_.W.get("editingService"),this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="backspace"}return e.prototype.execute=function(){return this._editingService.erase(void 0,_.u.LEFT),this._canvasScrollingService.refreshCursorWithScroll(),!1},e}(),k()(kI.prototype,"execute",[te.preventOnComponentProcessing,wI,D.d],Object.getOwnPropertyDescriptor(kI.prototype,"execute"),kI.prototype),kI),NT=(xI=Object(te.history)({throttle:!0}),DI=function(){function e(){this._editingService=_.W.get("editingService"),this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="del"}return e.prototype.execute=function(){return this._editingService.erase(void 0,_.u.RIGHT),this._canvasScrollingService.refreshCursorWithScroll(),!1},e}(),k()(DI.prototype,"execute",[te.preventOnComponentProcessing,xI,D.d],Object.getOwnPropertyDescriptor(DI.prototype,"execute"),DI.prototype),DI),MT=(AI=Object(te.history)({throttle:!0}),jI=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this._editingService=_.W.get("editingService"),this._canvasScrollingService=_.W.get("canvasScrollingService")}var t=e.prototype;return t.execute=function(e){var t=this;return this._virtualEditable.extendToEdgeOfWord(_.u.LEFT,e).then(function(){t._erase()}),!1},t._erase=function(){this._editingService.erase(void 0,_.u.LEFT),this._canvasScrollingService.refreshCursorWithScroll()},e}(),k()(jI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(jI.prototype,"execute"),jI.prototype),k()(jI.prototype,"_erase",[AI,D.d],Object.getOwnPropertyDescriptor(jI.prototype,"_erase"),jI.prototype),jI),BT=(RI=Object(te.history)({throttle:!0}),NI=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this._editingService=_.W.get("editingService"),this._canvasScrollingService=_.W.get("canvasScrollingService")}var t=e.prototype;return t.execute=function(e){var t=this;return this._virtualEditable.extendToEdgeOfWord(_.u.RIGHT,e).then(function(){t._erase()}),!1},t._erase=function(){this._editingService.erase(void 0,_.u.RIGHT),this._canvasScrollingService.refreshCursorWithScroll()},e}(),k()(NI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(NI.prototype,"execute"),NI.prototype),k()(NI.prototype,"_erase",[RI,D.d],Object.getOwnPropertyDescriptor(NI.prototype,"_erase"),NI.prototype),NI),WT=(MI=function(){function e(){this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="extend-block-down"}return e.prototype.execute=function(e){return this._canvasScrollingService.extendCursorTo(_.u.DOWN,e),!1},e}(),k()(MI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(MI.prototype,"execute"),MI.prototype),MI),UT=(BI=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="extend-block-line-end"}return e.prototype.execute=function(e){return this._virtualEditable.extendToEdgeOfLine(_.u.RIGHT,e),!1},e}(),k()(BI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(BI.prototype,"execute"),BI.prototype),BI),FT=(WI=function(){function e(){this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="extend-block-left"}return e.prototype.execute=function(e){return this._canvasScrollingService.extendCursorTo(_.u.LEFT,e),!1},e}(),k()(WI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(WI.prototype,"execute"),WI.prototype),WI),zT=(UI=function(){function e(){this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="extend-block-right"}return e.prototype.execute=function(e){return this._canvasScrollingService.extendCursorTo(_.u.RIGHT,e),!1},e}(),k()(UI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(UI.prototype,"execute"),UI.prototype),UI),VT=(FI=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="extend-block-line-start"}return e.prototype.execute=function(e){return this._virtualEditable.extendToEdgeOfLine(_.u.LEFT,e),!1},e}(),k()(FI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(FI.prototype,"execute"),FI.prototype),FI),GT=(zI=function(){function e(){this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="extend-block-up"}return e.prototype.execute=function(e){return this._canvasScrollingService.extendCursorTo(_.u.UP,e),!1},e}(),k()(zI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(zI.prototype,"execute"),zI.prototype),zI),HT=(VI=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="italic"}return e.prototype.execute=function(){return this._propertyChangeService.toggleStyle("italic"),!1},e}(),k()(VI.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(VI.prototype,"execute"),VI.prototype),VI),qT=(GI=Object(te.history)({sync:!1}),HI=function(){function e(){this._editingService=_.W.get("editingService"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._crawlerBehavior=new Ua,this._crawlerService=_.W.get("crawlerService"),this._canvasLayoutService=_.W.get("canvasLayoutService"),this.actLabel="linebreak"}var t=e.prototype;return t.execute=function(){var e=Tt()(It.a.mark(function e(){var t;return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._crawlerService.getCrawlerInfo())){e.next=6;break}return e.next=4,this._insertContentsFromUrl(t);case 4:e.next=7;break;case 6:this._lineBreak();case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._insertContentsFromUrl=function(){var e=Tt()(It.a.mark(function e(t){return It.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._crawlerBehavior.insertContentsFromUrl(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._lineBreak=function(){if(this._canvasLayoutService.shouldUpdateContentLength()){var e=this._selectionInfoStore.focus.compId;this._canvasLayoutService.setAvailableContentLength(e)}this._editingService.lineBreak()},e}(),k()(HI.prototype,"execute",[te.sentryCatch,te.preventOnComponentProcessing,D.d],Object.getOwnPropertyDescriptor(HI.prototype,"execute"),HI.prototype),k()(HI.prototype,"_insertContentsFromUrl",[te.sentryCatch,GI],Object.getOwnPropertyDescriptor(HI.prototype,"_insertContentsFromUrl"),HI.prototype),k()(HI.prototype,"_lineBreak",[te.history],Object.getOwnPropertyDescriptor(HI.prototype,"_lineBreak"),HI.prototype),HI),JT=(qI=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="indent"}return e.prototype.execute=function(){return this._propertyChangeService.updateStyle({name:"indent",value:_.B.INCREASE}),!1},e}(),k()(qI.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(qI.prototype,"execute"),qI.prototype),qI),KT=(JI=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="outdent"}return e.prototype.execute=function(){return this._propertyChangeService.updateStyle({name:"indent",value:_.B.DECREASE}),!1},e}(),k()(JI.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(JI.prototype,"execute"),JI.prototype),JI),XT=(KI=function(){function e(){this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="move-cursor-down"}return e.prototype.execute=function(e){return this._canvasScrollingService.moveCursorTo(_.u.DOWN,e),!1},e}(),k()(KI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(KI.prototype,"execute"),KI.prototype),KI),YT=(XI=function(){function e(){this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="move-cursor-left"}return e.prototype.execute=function(e){return this._canvasScrollingService.moveCursorTo(_.u.LEFT,e),!1},e}(),k()(XI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(XI.prototype,"execute"),XI.prototype),XI),QT=(YI=function(){function e(){this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="move-cursor-right"}return e.prototype.execute=function(e){return this._canvasScrollingService.moveCursorTo(_.u.RIGHT,e),!1},e}(),k()(YI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(YI.prototype,"execute"),YI.prototype),YI),ZT=(QI=function(){function e(){this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="move-cursor-up"}return e.prototype.execute=function(e){return this._canvasScrollingService.moveCursorTo(_.u.UP,e),!1},e}(),k()(QI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(QI.prototype,"execute"),QI.prototype),QI),$T=(ZI=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="move-cursor-line-end"}return e.prototype.execute=function(e){return this._virtualEditable.moveToEdgeOfLine(_.u.RIGHT,e),!1},e}(),k()(ZI.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(ZI.prototype,"execute"),ZI.prototype),ZI),eL=($I=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="move-cursor-word-left"}return e.prototype.execute=function(e){var t=this;return this._virtualEditable.moveToEdgeOfWord(_.u.LEFT,e).then(function(){t._virtualEditable.appendAriaWithWord()}),!1},e}(),k()($I.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor($I.prototype,"execute"),$I.prototype),$I),tL=(eO=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="move-cursor-word-right"}return e.prototype.execute=function(e){var t=this;return this._virtualEditable.moveToEdgeOfWord(_.u.RIGHT,e).then(function(){t._virtualEditable.appendAriaWithWord()}),!1},e}(),k()(eO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(eO.prototype,"execute"),eO.prototype),eO),nL=(tO=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="move-cursor-line-start"}return e.prototype.execute=function(e){return this._virtualEditable.moveToEdgeOfLine(_.u.LEFT,e),!1},e}(),k()(tO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(tO.prototype,"execute"),tO.prototype),tO),iL=(nO=function(){function e(){this._eventDispatcherService=_.W.get("eventDispatcherService"),this._a11yService=_.W.get("a11yService"),this.actLabel="move-forward-to-service"}return e.prototype.execute=function(e){if(this._a11yService){if(!this._a11yService.isInsideEditorWrapper(e.target))return;this._eventDispatcherService.dispatch(_.z.A11Y_FOCUS_OUT,{forward:!0},!0)&&this._a11yService.focusToOutsideNextTabbable()}},e}(),k()(nO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(nO.prototype,"execute"),nO.prototype),nO),rL=(iO=function(){function e(){this._eventDispatcherService=_.W.get("eventDispatcherService"),this._a11yService=_.W.get("a11yService"),this.actLabel="move-forward-to-reserve"}return e.prototype.execute=function(e){if(this._a11yService){if(!this._a11yService.isInsideEditorWrapper(e.target))return;this._eventDispatcherService.dispatch(_.z.A11Y_FOCUS_OUT,{forward:!1},!0)&&this._a11yService.focusToOutsidePrevTabbable()}},e}(),k()(iO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(iO.prototype,"execute"),iO.prototype),iO),oL=(rO=function(){function e(){this._a11yService=_.W.get("a11yService"),this.actLabel="focus-toolbar"}return e.prototype.execute=function(){this._a11yService.focusToToolbar()},e}(),k()(rO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(rO.prototype,"execute"),rO.prototype),rO),aL=(oO=function(){function e(){this._historyService=_.W.get("historyService"),this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="redo"}return e.prototype.execute=function(){return this._historyService.redo(),this._canvasScrollingService.scrollToFocus(),!1},e}(),k()(oO.prototype,"execute",[te.preventOnDocumentProcessing,D.d],Object.getOwnPropertyDescriptor(oO.prototype,"execute"),oO.prototype),oO),sL=(aO=function(){function e(){this._selectionService=_.W.get("selectionService"),this.actLabel="select-all"}return e.prototype.execute=function(){this._selectionService.selectAll()},e}(),k()(aO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(aO.prototype,"execute"),aO.prototype),aO),cL=(sO=Object(te.history)({throttle:!0}),cO=function(){function e(){this._editingService=_.W.get("editingService"),this._selectionInfoStore=_.W.get("selectionInfoStore"),this._canvasLayoutService=_.W.get("canvasLayoutService"),this.actLabel="soft-linebreak"}return e.prototype.execute=function(){if(this._canvasLayoutService.shouldUpdateContentLength()){var e=this._selectionInfoStore.focus.compId;this._canvasLayoutService.setAvailableContentLength(e)}return this._editingService.softLineBreak(),!1},e}(),k()(cO.prototype,"execute",[sO,D.d],Object.getOwnPropertyDescriptor(cO.prototype,"execute"),cO.prototype),cO),lL=(lO=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="strike"}return e.prototype.execute=function(){return this._propertyChangeService.toggleStyle("strikeThrough"),!1},e}(),k()(lO.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(lO.prototype,"execute"),lO.prototype),lO),uL=(uO=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="underline"}return e.prototype.execute=function(){return this._propertyChangeService.toggleStyle("underline"),!1},e}(),k()(uO.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(uO.prototype,"execute"),uO.prototype),uO),pL=(pO=function(){function e(){this._historyService=_.W.get("historyService"),this._canvasScrollingService=_.W.get("canvasScrollingService"),this.actLabel="undo"}return e.prototype.execute=function(){return this._historyService.undo(),this._canvasScrollingService.scrollToFocus(),!1},e}(),k()(pO.prototype,"execute",[te.preventOnDocumentProcessing,D.d],Object.getOwnPropertyDescriptor(pO.prototype,"execute"),pO.prototype),pO),dL=(dO=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="superscript"}return e.prototype.execute=function(){return this._propertyChangeService.toggleStyle("superscript"),!1},e}(),k()(dO.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(dO.prototype,"execute"),dO.prototype),dO),hL=(hO=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="subscript"}return e.prototype.execute=function(){return this._propertyChangeService.toggleStyle("subscript"),!1},e}(),k()(hO.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(hO.prototype,"execute"),hO.prototype),hO),gL=(gO=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).actLabel="template",t}return S()(t,e),t.prototype.execute=function(){return this.toggle(),!1},t}(n(766).a),k()(gO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(gO.prototype,"execute"),gO.prototype),gO),fL=(fO=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).actLabel="search",t}return S()(t,e),t.prototype.execute=function(){return this.toggle(),!1},t}(n(774).a),k()(fO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(fO.prototype,"execute"),fO.prototype),fO),mL=(mO=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).actLabel="sticker",t}return S()(t,e),t.prototype.execute=function(){return this.toggle(),!1},t}(n(765).a),k()(mO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(mO.prototype,"execute"),mO.prototype),mO),yL=(yO=function(){function e(){this._a11yhelpLayerService=_.W.get("a11yHelpLayerService"),this.actLabel="a11y-hlep-layer"}return e.prototype.execute=function(){return this._a11yhelpLayerService.toggleLayer(),!1},e}(),k()(yO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(yO.prototype,"execute"),yO.prototype),yO),vL=(vO=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).actLabel="insert-image",t}return S()(t,e),t.prototype.execute=function(){return this.insertImage(),!1},t}(n(772).a),k()(vO.prototype,"execute",[te.preventOnDocumentProcessing,D.d],Object.getOwnPropertyDescriptor(vO.prototype,"execute"),vO.prototype),vO),_L=(_O=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).actLabel="insert-video",t}return S()(t,e),t.prototype.execute=function(){return this.openVideoUploader(),!1},t}(n(833).a),k()(_O.prototype,"execute",[te.preventOnDocumentProcessing,D.d],Object.getOwnPropertyDescriptor(_O.prototype,"execute"),_O.prototype),_O),bL=(bO=function(e){function t(){var t;return(t=e.call(this)||this)._finderService=_.W.get("finderService"),t.actLabel="insert-quotation",t}return S()(t,e),t.prototype.execute=function(){var e=this._finderService.getSelectedComponents()[0];return"quotation"===e.ctype?e.rotationLayout():this.insertQuotation("default"),!1},t}(n(773).a),k()(bO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(bO.prototype,"execute"),bO.prototype),bO),SL=(SO=function(e){function t(){var t;return(t=e.call(this)||this)._finderService=_.W.get("finderService"),t.actLabel="insert-horizontal-line",t}return S()(t,e),t.prototype.execute=function(){var e=this._finderService.getSelectedComponents()[0];return"horizontalLine"===e.ctype?e.rotationLayout():this.insertHorizontalLine("default"),!1},t}(n(770).a),k()(SO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(SO.prototype,"execute"),SO.prototype),SO),CL=[{keySet:["mod+b"],useCase:jT,nClickCode:"hotk.bold"},{keySet:["mod+i"],useCase:HT,nClickCode:"hotk.italic"},{keySet:["mod+u"],useCase:uL,nClickCode:"hotk.underline"},{keySet:["command+option+s"],useCase:lL,targetOs:"Mac OS X",nClickCode:"hotk.strike"},{keySet:["ctrl+shift+s"],useCase:lL,targetOs:"!Mac OS X",nClickCode:"hotk.strike"},{keySet:["mod+a"],useCase:sL,nClickCode:"hotk.selectall"},{keySet:["mod+z"],useCase:pL,nClickCode:"hotk.undo"},{keySet:["command+shift+z"],useCase:aL,targetOs:"Mac OS X",nClickCode:"hotk.redo"},{keySet:["ctrl+y"],useCase:aL,targetOs:"!Mac OS X",nClickCode:"hotk.redo"},{keySet:["del"],useCase:NT,scopes:["canvas"]},{keySet:["backspace"],useCase:RT,scopes:["canvas"]},{keySet:["shift+enter"],useCase:cL},{keySet:["enter"],useCase:qT,scopes:["canvas"]},{keySet:["shift+tab"],useCase:KT,scopes:["canvas"],nClickCode:"hotk.outdent"},{keySet:["tab"],useCase:JT,scopes:["canvas"],nClickCode:"hotk.indent"},{keySet:["left"],useCase:YT,scopes:["canvas"]},{keySet:["right"],useCase:QT,scopes:["canvas"]},{keySet:["up"],useCase:ZT,scopes:["canvas"]},{keySet:["down"],useCase:XT,scopes:["canvas"]},{keySet:["shift+left"],useCase:FT,scopes:["canvas"]},{keySet:["shift+right"],useCase:zT,scopes:["canvas"]},{keySet:["shift+up"],useCase:GT,scopes:["canvas"]},{keySet:["shift+down"],useCase:WT,scopes:["canvas"]},{keySet:["home","meta+left"],useCase:nL,scopes:["canvas"]},{keySet:["end","meta+right"],useCase:$T,scopes:["canvas"]},{keySet:["shift+home","shift+meta+left"],useCase:VT,scopes:["canvas"]},{keySet:["shift+end","shift+meta+right"],useCase:UT,scopes:["canvas"]},{keySet:["option+backspace"],useCase:MT,targetOs:"Mac OS X",scopes:["canvas"]},{keySet:["option+del"],useCase:BT,targetOs:"Mac OS X",scopes:["canvas"]},{keySet:["option+left"],useCase:eL,targetOs:"Mac OS X",scopes:["canvas"]},{keySet:["option+right"],useCase:tL,targetOs:"Mac OS X",scopes:["canvas"]},{keySet:["shift+option+left"],useCase:DT,targetOs:"Mac OS X",scopes:["canvas"]},{keySet:["shift+option+right"],useCase:AT,targetOs:"Mac OS X",scopes:["canvas"]},{keySet:["ctrl+left"],useCase:eL,targetOs:"!Mac OS X",scopes:["canvas"]},{keySet:["ctrl+right"],useCase:tL,targetOs:"!Mac OS X",scopes:["canvas"]},{keySet:["ctrl+backspace"],useCase:MT,targetOs:"!Mac OS X",scopes:["canvas"]},{keySet:["ctrl+del"],useCase:BT,targetOs:"!Mac OS X",scopes:["canvas"]},{keySet:["shift+ctrl+left"],useCase:DT,targetOs:"!Mac OS X",scopes:["canvas"]},{keySet:["shift+ctrl+right"],useCase:AT,targetOs:"!Mac OS X",scopes:["canvas"]},{keySet:["mod+shift+u"],useCase:dL,nClickCode:"hotk.supsct"},{keySet:["mod+shift+y"],useCase:hL,nClickCode:"hotk.subct"},{keySet:["pageup"],useCase:(CO=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="pageup"}return e.prototype.execute=function(){return this._virtualEditable.pageUp(),!1},e}(),k()(CO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(CO.prototype,"execute"),CO.prototype),CO)},{keySet:["pagedown"],useCase:(IO=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="pagedown"}return e.prototype.execute=function(){return this._virtualEditable.pageDown(),!1},e}(),k()(IO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(IO.prototype,"execute"),IO.prototype),IO)},{keySet:["ctrl+alt+i"],useCase:vL,nClickCode:"hotk.img"},{keySet:["ctrl+alt+k"],useCase:mL,nClickCode:"hotk.sticker"},{keySet:["ctrl+alt+h"],useCase:SL,nClickCode:"hotk.horizt"},{keySet:["ctrl+alt+q"],useCase:bL,nClickCode:"hotk.quota"},{keySet:["ctrl+alt+m"],useCase:_L,nClickCode:"hotk.video"},{keySet:["ctrl+alt+s"],useCase:fL,nClickCode:"hotk.search"},{keySet:["ctrl+alt+t"],useCase:gL,nClickCode:"hotk.template"},{keySet:["mod+shift+s"],useCase:(OO=function(){function e(){this._eventDispatcherService=_.W.get("eventDispatcherService"),this.actLabel="temporary-save"}return e.prototype.execute=function(){return this._eventDispatcherService.emit("temporarySaveTriggered"),!1},e}(),k()(OO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(OO.prototype,"execute"),OO.prototype),OO),nClickCode:"hotk.save"},{keySet:["escape"],useCase:(TO=function(){function e(){this._a11yService=_.W.get("a11yService"),this.actLabel="close-layer"}return e.prototype.execute=function(){return _.W.filterWithName(function(e){return e.endsWith("LayerService")}).forEach(function(e){e.enableEscapeKey&&e.enableEscapeKey()&&e.close()}),_.W.filterWithName(function(e){return e.endsWith("ToolbarLayoutService")}).forEach(function(e){e.hideAllLayers()}),this._a11yService&&this._a11yService.focusToEditable(),!1},e}(),k()(TO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(TO.prototype,"execute"),TO.prototype),TO)},{keySet:["ctrl+alt+l"],useCase:(LO=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="align-left"}return e.prototype.execute=function(){return this._propertyChangeService.updateStyle({name:"align",value:"left"}),!1},e}(),k()(LO.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(LO.prototype,"execute"),LO.prototype),LO),nClickCode:"hotk.left"},{keySet:["ctrl+alt+c"],useCase:(EO=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="align-center"}return e.prototype.execute=function(){return this._propertyChangeService.updateStyle({name:"align",value:"center"}),!1},e}(),k()(EO.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(EO.prototype,"execute"),EO.prototype),EO),nClickCode:"hotk.center"},{keySet:["ctrl+alt+r"],useCase:(PO=function(){function e(){this._propertyChangeService=_.W.get("propertyChangeService"),this.actLabel="align-right"}return e.prototype.execute=function(){return this._propertyChangeService.updateStyle({name:"align",value:"right"}),!1},e}(),k()(PO.prototype,"execute",[te.history,D.d],Object.getOwnPropertyDescriptor(PO.prototype,"execute"),PO.prototype),PO),nClickCode:"hotk.right"},{keySet:["mod+alt+z"],useCase:(wO=function(){function e(){this._virtualEditable=_.W.get("virtualEditable"),this.actLabel="arive-live"}return e.prototype.execute=function(){this._virtualEditable.toggleAriaLive()},e}(),k()(wO.prototype,"execute",[D.d],Object.getOwnPropertyDescriptor(wO.prototype,"execute"),wO.prototype),wO),nClickCode:"hotk.toggleAriaLive"},{keySet:["alt+."],useCase:iL,nClickCode:"hotk.moveForwardService"},{keySet:["alt+,"],useCase:rL,nClickCode:"hotk.moveReverseService"},{keySet:["alt+f10"],useCase:oL,nClickCode:"hotk.focusToolbar"},{keySet:["alt+0"],useCase:yL,nClickCode:"hotk.toggleA11yHelpLayer"}];t.default={plugins:H_,moduleSpecs:xT,themesDefinition:bT,hotkey:CL}},1365:function(e,t,n){"use strict";var i,r,o=n(17),a=n.n(o),s=n(56),c=n.n(s),l=n(60),u=n.n(l),p=n(1),d=n.n(p),h=n(58),g=n.n(h),f=n(0),m=n.n(f),y=n(50),v=n.n(y),_=(n(61),n(106)),b=n(16),S=n(4),C=n(71),I=n(66),O=n(84),T=n(109),L=n(171),E=n(69),P=n(119),w=n(75),k=n(162),x=n(1285),D=n(782),A=n(99),j=n(134),R=n(122),N=n(172),M=n(49),B=n(51),W=n(711),U=n(712),F=n(563),z=n(555),V=n(320),G=n(837),H=n(126),q={BOTH:Symbol("both"),TOP:Symbol("top"),BOTTOM:Symbol("bottom"),NONE:Symbol("none")},J=function(e){var t=[],n=[];if(e.forEach(function(e){if(e.isListParagraph())n.push(e);else{if(n.length){var i=new G.a({paragraphs:n});t.push(i),n=[]}t.push(e)}}),n.length){var i=new G.a({paragraphs:n});t.push(i)}return t},K=(i=function(e){function t(t){var n;return n=e.call(this)||this,u()(n,"paragraphs",r,g()(n)),n.paragraphs=J(t),n}m()(t,e);var n=t.prototype;return n.changeTreeToNormal=function(e){var t=this._trimParagraphs(e);if(t.length){var n=this._indexOf(t[0]),i=n[0],r=n[1],o=this._indexOf(t[t.length-1]),a=o[0],s=o[1];if(i===a){var c,l=this._getParaAt(i).split(s+1),u=l[0],p=l[1],d=[u.split(r)[0]].concat(t,[p]).filter(H.a);(c=this.paragraphs).splice.apply(c,[i,1].concat(d))}else{var h,g=this._getParaAt(i),f=this._getParaAt(a),m=g.split(r)[0],y=f.split(s+1)[1],v=[m].concat(t,[y]).filter(H.a);(h=this.paragraphs).splice.apply(h,[i,a-i+1].concat(v))}}},n._indexOf=function(e){if(!e)return[-1];var t=this.paragraphs.findIndex(function(t){return t.id===e.id});if(t>-1)return[t];var n=this._findTreeOf(e);return n?[this.paragraphs.indexOf(n),n.indexOf(e)]:[-1]},n._trimParagraphs=function(e){var t,n=e.length,i=1/0,r=1/0;for(t=0;t<n;t++)if(this._isInTree(e[t])){i=t;break}for(var o=n-1;o>=t;o--)if(this._isInTree(e[o])){r=o;break}return e.slice(i,r+1)},n._isInTree=function(e){return this._indexOf(e).length>1},n._findTreeOf=function(e){return this.paragraphs.find(function(t){return t instanceof G.a&&t.hasParagraph(e)})},n.indexOfParaInItsListItem=function(e){return e.isListParagraph()?this.getParagraphsInSameListItem(e).indexOf(e):-1},n.getParagraphsWithSiblings=function(e){var t=this;return e.reduce(function(e,n){if(e.some(function(e){return e.id===n.id}))return e;if(t.paragraphs.some(function(e){return e.id===n.id}))return e.push(n),e;var i=t._findTreeOf(n);return e.push.apply(e,i.getSiblings(n)),e},[])},n.getTreeNodesInSameListItem=function(e){var t=this._findTreeOf(e);return t?t.getNodesInSameListItem(e):[]},n.getParagraphsInSameListItem=function(e){return this.getTreeNodesInSameListItem(e).map(function(e){return e.paragraph})},n.getListTypeOfParagraph=function(e){return this._findTreeOf(e).getSiblingType(e)},n.updateListType=function(e){var t=this._findTreeOf(e);if(t)t.updateListType(e);else{var n=this.paragraphs.findIndex(function(t){return t.id===e.id}),i=new G.a({paragraphs:[e]});this.paragraphs.splice(n,1,i),this._mergeWithAdjacentTree(n)}},n.updateIndent=function(e){var t=this._findTreeOf(e);t&&t.updateListLevel(e)},n._getAdjacentSideToTree=function(e){var t=this._getParaAt(e),n=this._getParaAt(e-1),i=this._getParaAt(e+1);return t instanceof G.a?n instanceof G.a&&i instanceof G.a?q.BOTH:n instanceof G.a?q.TOP:i instanceof G.a?q.BOTTOM:q.NONE:q.NONE},n._getParaAt=function(e){return 0<=e&&e<this.paragraphs.length?this.paragraphs[e]:null},n._mergeWithAdjacentTree=function(e){var t=this._getAdjacentSideToTree(e),n=this._getParaAt(e),i=this._getParaAt(e-1),r=this._getParaAt(e+1);if(t===q.BOTH){var o=i.mergeWith(n);o=o.mergeWith(r),this.paragraphs.splice(e-1,3,o)}else if(t===q.TOP){var a=i.mergeWith(n);this.paragraphs.splice(e-1,2,a)}else if(t===q.BOTTOM){var s=n.mergeWith(r);this.paragraphs.splice(e,2,s)}},n.addParagraph=function(e,t){var n;void 0===t&&(t=Object(w.a)(this.paragraphs));var i=this._indexOf(t),r=i[0],o=i[1];if(o>=0){var a=this._getParaAt(r).split(o+1)[1];a&&this.paragraphs.splice(r+1,0,a)}var s=J(e);(n=this.paragraphs).splice.apply(n,[r+1,0].concat(s)),this._mergeWithAdjacentTree(r+1),this._mergeWithAdjacentTree(r+s.length)},n.removeParagraph=function(e){if(e.isListParagraph()){var t=this._findTreeOf(e),n=this._indexOf(e)[0];t.removeParagraph(e),0===t.root.size&&this._removeParagraphList(n)}else{var i=this.paragraphs.findIndex(function(t){return t.id===e.id});this._removeParagraphList(i)}},n._removeParagraphList=function(e){e>=0&&(this.paragraphs.splice(e,1),this._mergeWithAdjacentTree(e-1))},n.removeParagraphBetween=function(e,t){var n=this._indexOf(e),i=n[0],r=n[1],o=i;if(r>-1){var a=this._getParaAt(i),s=r>0&&r<a.paragraphs.length;a.split(r),s&&o++}var c=this._indexOf(t),l=c[0],u=c[1],p=l;if(u>-1){var d=this._getParaAt(l).split(u+1)[1];d&&this.paragraphs.splice(l+1,0,d)}this.paragraphs.splice(o,p+1-o),this._mergeWithAdjacentTree(i)},n.moveParagraphsAfter=function(e,t){this._findTreeOf(e).moveParagraphsAfter(e,t)},n.clear=function(){this.paragraphs=[]},t}(B.w),r=v()(i.prototype,"paragraphs",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i),X=n(214);n.d(t,"a",function(){return oe});var Y,Q,Z,$,ee=["nodes"],te=["value"],ne=B.F.NONE,ie=9,re=Math.max.apply(null,Object(L.a)(B.R).map(function(e){return e.length})),oe=(Y=Object(M.e)({keepAlive:!0}),Q=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).ctype="textUnit",n.maxLength=null,n.minLevel=0,n.maxLevel=ie,n.disable=!1,n.attributes={cursor:null,selection:"text",lineBreak:{enter:"line-break-in-paragraph",shiftEnter:"line-break-in-paragraph"},insertion:"text",paste:"text",drop:"text",erasure:"text"},n._styleFilter={},u()(n,"isOverTextLimit",Z,g()(n)),u()(n,"paragraphs",$,g()(n));var i=t,r=i.state,o=void 0===r?[]:r,a=i.config,s=void 0===a?{}:a;n.attributes=Object(_.a)(n.attributes,s.attributes),n.maxLength=Object(b.a)(s,"maxLength",n.maxLength),n.maxLevel=Object(b.a)(s,"indent.maxLevel",n.maxLevel),n.minLevel=Object(b.a)(s,"indent.minLevel",n.minLevel),n.insertion=Object(b.a)(s,"insertion",n.insertion),n.erasure=Object(b.a)(s,"erasure",n.erasure),n.disable=Object(b.a)(s,"disable",n.disable);var c=n._extractParagraphs(o),l=n._refineOriginalParaByMaxLength(c);return n.paragraphs=n._createParagraphStores(l),n._hashArray=new W.a(n.paragraphs),n._styleFilter=n._applyFilterByConfig(s.filterTextStyle),n._styleFilterPayload=Object(b.a)(s,"styleFilterPayload"),n._filterTextStyle(n.paragraphs),n.structuredParagraphStore=new K(n.paragraphs),!1===n.isLineBreakable()&&n._filterLineBreak(),n}m()(t,e);var n=t.prototype;return n._applyFilterByConfig=function(e){var t=B.W.get("configAgent"),n=Object(_.a)(this._styleFilter,e);return!1===t.get("productConfig.textFormat.list")&&(n.list=X.b.NOT_ALLOWED),n},n._extractParagraphs=function(e){return e&&e.length?e:e instanceof Array==!1&&e&&e.paragraphs?e.paragraphs:[new V.a]},n.isLineBreakable=function(){var e=["line-break-in-paragraph","soft-and-move-to-next-text-at-end","hard-and-insert-empty-line-at-end"],t=e.includes(this.attributes.lineBreak.enter),n=e.includes(this.attributes.lineBreak.shiftEnter);return t||n},n._filterLineBreak=function(){var e=this.paragraphs;if(!(e.length<=1))for(var t=this.getFirstParagraph(),n=e.length,i=1;i<n;i++)t.mergeWithSpace(e[1]),this.removeParagraph(e[1].id)},n._filterTextStyle=function(e){var t=this;Object(C.a)(e,function(e){Object(I.a)(t._styleFilter)||e.filterTextStyle(t._styleFilter,t._styleFilterPayload),t.themeStyle&&e.updateTheme(t.themeStyle)})},n.addParagraph=function(e,t){var n=Object(S.a)(e)||M.f.isObservableArray(e)?e:[e];this._filterTextStyle(n),this._hashArray.add(n,t);var i=this.getParagraphByIndex(t-1);this.structuredParagraphStore.addParagraph(n,i)},n.addParagraphAfter=function(e,t){var n=this.getParagraphIndex(e.id)+1;this.addParagraph(t,n)},n.removeParagraph=function(e){var t=this.getParagraphById(e),n=this.getPrevParagraph(e),i=this.structuredParagraphStore.getParagraphsInSameListItem(t);this._hashArray.remove(e),this.structuredParagraphStore.removeParagraph(t),i.shift(),t.isListParagraph()&&t.listType!==ne&&i.length&&(n&&n.isListParagraph()?(this._updateListLevel(i,n.listLevel),this.structuredParagraphStore.moveParagraphsAfter(n,i)):this._updateListType(i,"reset"))},n.removeParagraphsBetween=function(e,t){var n=this.getParagraphById(e)||this.getFirstParagraph(),i=this.getParagraphById(t)||this.getLastParagraph();this._hashArray.removeBetween(e,t),this.structuredParagraphStore.removeParagraphBetween(n,i)},n.shouldAdjustWritePoint=function(e){var t=this.getNodeByPoint(e);return this.isLinkNodeEdge(e)||!t.isTextNode()},n.adjustWritePointOnEdge=function(e){var t=this.getParagraphById(e.paraId).adjustWritePointOnEdge(e);return c()({},e,t)},n.write=function(e,t,n){var i=this._writeText(e,t,n),r=this.maxLength;if(null!==r&&this.textLength>r){this.turnOnOverTextLimit();var o=this.textLength-this.maxLength,a=e.substr(0,e.length-o);return t.offset=n+e.length,this._writeText(a,t,n)}return i},n.breakLine=function(e,t){var n=void 0===t?{}:t,i=n.shiftEnter,r=n.blockModeBefore;if(this.isFullText)return this.turnOnOverTextLimit(),e;if(!r&&!i){var o=this.getParagraphById(e.paraId);if(o.isListParagraph()&&o.isEmpty()&&1===this.structuredParagraphStore.getTreeNodesInSameListItem(o).length)return 0===o.listLevel?this._changeTreeToNormal([o]):this._updateListLevelByDiff([o],-1),e}return this.splitParagraph(e,i).back.getStartPoint()},n.turnOnOverTextLimit=function(){this.isOverTextLimit=!0},n.turnOffOverTextLimit=function(){this.isOverTextLimit=!1},n.setAvailableContentLength=function(e){this.maxLength=e},n.resetAvailableContentLength=function(){this.maxLength=null},n.split=function(e){var n=new t({config:this._textUnitStoreConfig});n.clear();var i=this.splitParagraph(e).back,r=this.getLastParagraph(),o=this.detachParagraphs(i.id,r.id),a=n.getParagraphsLength();return n.addParagraph(o,a),{front:this,back:n}},n.splitParagraph=function(e,t){var n=this.getParagraphById(e.paraId),i=n.split(e),r=i.front,o=i.back;if(n.isListParagraph()&&o.listType===ne&&!t){var a=this.structuredParagraphStore.getListTypeOfParagraph(n);o.updateParagraphStyle({listType:a})}else n.isListParagraph()&&t&&o.updateParagraphStyle({listType:ne});var s=this.getParagraphIndex(r.id)+1;return this.addParagraph(o,s),{front:r,back:o}},n.slice=function(e,t){var n=this._getPointByOffset(e,t);n&&this.split(n)},n.detachParagraphs=function(e,t){var n=this.getParagraphById(e)||this.getFirstParagraph(),i=this.getParagraphById(t)||this.getLastParagraph();return this.structuredParagraphStore.removeParagraphBetween(n,i),this._hashArray.detachData(e,t)},n.isEmptyTextNode=function(e){var t=this.getTextNodeByPoint(e);return t&&t.isEmpty()},n.refineParagraphWithPoint=function(e){var t=e.paraId,n=this.getParagraphById(t),i=this.getOffsetInParagraph(e);n.refine();var r=n.getNodeInfoAfterOffset(i);return Object.assign(e,{nodeId:r.node.id,offset:r.offset})},n.refineParagraphs=function(){this.paragraphs.forEach(function(e){e.refine()})},n.collectStyle=function(e){var t=this,n=e.start,i=e.end,r=this.getParagraphsBetween(n.paraId,i.paraId),o=Object(T.a)(r);if(0===o.length)return{};var a=o.map(function(n){var i=n.collectStyle(e);return n.listType===ne&&(i.list=t.structuredParagraphStore.getListTypeOfParagraph(n)),i});return U.a.mergeStyles(a)},n.getTextStyle=function(e){var t=this.getParagraphById(e.paraId);return t&&t.getTextStyle(e)},n.getSelectedAlign=function(e){var t=e.start,n=e.end,i=this.getParagraphsBetween(t.paraId,n.paraId),r=Object(T.a)(i);if(0===r.length)return{};var o=r.map(function(e){return e.getSelectedAlign()});return U.a.mergeStyles(o)},n.updateStyleFilterPayload=function(e){this._styleFilterPayload=e,this._filterTextStyle(this.paragraphs)},n.updateStyleFilter=function(e){this._styleFilter=e},n.updateTheme=function(e){e&&(this.themeStyle=e),this.paragraphs.forEach(function(t){t.updateTheme(e)})},n.updateStyle=function(e,t){var n=Object.keys(e)[0];return B.L.includes(n)?this.updateParagraphStyle(e,t):this.updateCharacterStyle(e,t)},n.updateParagraphStyle=function(e,t){void 0===t&&(t={});var n=Object.keys(e)[0],i=this._styleFilter[n];if(!this._notAllowedStyle(i,e[n])){var r=t,o=r.start,a=void 0===o?{}:o,s=r.end,c=void 0===s?{}:s,l=this.getParagraphsBetween(a.paraId,c.paraId),u=e[n];if("list"===n){var p=null===u?"reset":u;this._updateListType(l,p)}else if("dropCap"===n)this._updateDropCap(l,u);else if("indent"===n){var d=this._getAdjacentParas(l);this._updateListLevelByDiff(d,u===B.B.INCREASE?1:-1)}else l.forEach(function(t){t.updateParagraphStyle(e)})}return t},n._updateListType=function(e,t){var n=this;"reset"===t?this._changeTreeToNormal(e):(e=this.structuredParagraphStore.getParagraphsWithSiblings(e)).forEach(function(e){e.listType!==B.F.NONE&&(e.updateParagraphStyle({listType:t,dropCap:!1}),n.structuredParagraphStore.updateListType(e))})},n._changeTreeToNormal=function(e){(e=this._getAdjacentParas(e)).forEach(function(e){e.updateParagraphStyle({listType:"reset"})}),this.structuredParagraphStore.changeTreeToNormal(e)},n.changeAllTreeToNormal=function(){this._changeTreeToNormal(this.paragraphs)},n._updateDropCap=function(e,t){e.forEach(function(e){e.updateParagraphStyle({dropCap:t,listType:"reset"})}),this.structuredParagraphStore.changeTreeToNormal(e)},n._updateListLevel=function(e,t){var n=this;t=this._clampLevel(t),e.forEach(function(e){e.updateParagraphStyle({listLevel:t}),n.structuredParagraphStore.updateIndent(e)})},n._updateListLevelByDiff=function(e,t){var n=this;e.forEach(function(e){var i;i=e.isListParagraph()?e.listLevel:0;var r=n._clampLevel(i+t);e.updateParagraphStyle({listLevel:r}),n.structuredParagraphStore.updateIndent(e)})},n._getAdjacentParas=function(e){var t=this;return Array.from(new Set(e.reduce(function(e,n){return n.isListParagraph()?e.push.apply(e,t.structuredParagraphStore.getParagraphsInSameListItem(n)):e.push(n),e},[])))},n._clampLevel=function(e){return Math.min(Math.max(e,this.minLevel),this.maxLevel)},n._notAllowedStyle=function(e,t){if(null===t)return!1;switch(typeof e){case"boolean":return!e;case"function":return!1===e(t,this._styleFilterPayload);default:return e===X.b.NOT_ALLOWED}},n.updateCharacterStyle=function(e,t){var n=Object.keys(e)[0],i=this._styleFilter[n];if(this._notAllowedStyle(i,e[n]))return t;var r=t.start,o=t.end,a=t.collapsed,s=this.getParagraphsBetween(r.paraId,o.paraId),c=this.getOffsetInParagraph(r),l=this.getOffsetInParagraph(o),u={},p=this._getHeadTailNodesByPoint(r,o),d=p.headNode,h=p.tailNode;s.forEach(function(t){t.updateCharacterStyle(e,{startNode:d,endNode:h}),t.refine([d.id,h.id])});var g=this.getNodeInfoAfterOffset(r,c),f=Object(E.a)({nodeId:g.node.id,offset:g.offset},r);if(u.start=f,a)u.end=f;else if(!a){var m=this.getNodeInfoBeforeOffset(o,l),y=Object(E.a)({nodeId:m.node.id,offset:m.offset},o);u.end=y}return u},n.updateWholeParagraphStyle=function(e){var t=this;Object.keys(e).forEach(function(n){if(B.L.includes(n)){var i,r=e[n];t.updateParagraphStyle(((i={})[n]=r,i))}})},n.updateWholeCharacterStyle=function(e){(e=this._filterStyleTypes(e))&&this.paragraphs.forEach(function(t){t.updateWholeCharacterStyle(e)})},n.resetStyle=function(){this.paragraphs.forEach(function(e){return e.resetStyle()}),this.structuredParagraphStore.changeTreeToNormal(this.paragraphs)},n.applyDerivedStyles=function(e){var t=Object(R.a)(e,["dropCap","align","subscript","superscript","list","indent"]),n=Object(N.a)(t,function(e){return null===e}),i=this._filterStyleTypes(n),r=Object(j.a)(i,B.L),o=Object(R.a)(i,B.L);this.paragraphs.forEach(function(e){e.applyDerivedParagraphStyle(r),e.applyDerivedStylesToWholeCharacter(o)})},n._writeAndLink=function(e,t){var n=this.getParagraphById(t.paraId).writeAndLink(e,t);return[Object.assign(n,{unitId:this.id})]},n._justLink=function(e,t){var n=t.start,i=t.end,r=this._getNodesToApplyLinkChange(e,n,i),o=r.startNode,a=r.endNode,s=this.getOffsetInParagraph(n),c=this.getOffsetInParagraph(i);return this.getParagraphsBetween(n.paraId,i.paraId).forEach(function(t){t.changeLink(e,{startNode:o,endNode:a}),t.refine([o.id,a.id])}),this._resolveRangeByOffset({startParaOffset:s,endParaOffset:c,selectionInfoStore:t})},n._getNodesToApplyLinkChange=function(e,t,n){if(e.value){var i=this._getHeadTailNodesByPoint(t,n);return{startNode:i.headNode,endNode:i.tailNode}}return{startNode:this.getTextNodeByPoint(t),endNode:this.getTextNodeByPoint(n)}},n.getTextNodeByPoint=function(e){return this.getParagraphById(e.paraId).getNodeById(e.nodeId)},n.changeLink=function(e,t){var n=t.start;if(t.collapsed){var i=t.start,r=this.getNodeByPoint(i);if(r.hasUrlLink()&&r.getUrlValue().length>0){var o=this.getEdgePointsOnLinkByPoint(i),a=o.start,s=o.end;return this._justLink(e,{start:a,end:s})}return this._writeAndLink(e,n)}return this._justLink(e,t)},n.attachParagraphAtEnd=function(e){var t=this.getLastParagraph(),n=this._convertParagraphStyle(t);!1===t.isListParagraph()&&(n.list=null),e.updateParagraphStyle(n),this.addParagraphAfter(t,e);var i=t.merge(e);return this.removeParagraph(e.id),this._filterTextStyle(this.paragraphs),i},n.attachParagraphAtStart=function(e){var t=this.detachFirstParagraph(),n=this._convertParagraphStyle(t);!1===t.isListParagraph()&&(n.list=null),e.updateParagraphStyle(n),e.merge(t),this.addParagraph(e,0)},n.detachFirstParagraph=function(){var e=this.getFirstParagraph().id;return this.detachParagraphs(e,e)[0]},n.detachLastParagraph=function(){var e=this.getLastParagraph().id;return this.detachParagraphs(e,e)[0]},n.detachAllParagraphs=function(){var e=this.getFirstParagraph().id,t=this.getLastParagraph().id;return this.detachParagraphs(e,t)},n.removeFirstParagraph=function(){var e=this.getFirstParagraph(),t=this.getNextParagraph(e.id),n=e.isEmpty()&&e.isListParagraph(),i=t&&t.listType===B.F.NONE;n&&i&&(t.updateParagraphStyle({listType:e.listType}),this.structuredParagraphStore.updateListType(t)),this.removeParagraph(e.id)},n.removeLastParagraph=function(){var e=this.getLastParagraph();this.removeParagraph(e.id)},n.erase=function(e,t){this.turnOffOverTextLimit();var n=this.refineSelection(e);return this._eraseText(n,t)},n.append=function(e,t){void 0===t&&(t=!1),!1===this.isLineBreakable()&&e._filterLineBreak(),this._sliceSourceText(e),this._filterSourceText(e,this.getStartPoint());var n=this.getEndPoint(),i=e.detachParagraphs(),r=this.getParagraphsLength(),o={};if(!t&&!i[0].isListParagraph()){var a=this.getLastParagraph(),s=i.shift();o=a.merge(s)}return this.addParagraph(i,r),Object.assign(n,o)},n.prepend=function(e){!1===this.isLineBreakable()&&e._filterLineBreak(),this._sliceSourceText(e),this._filterSourceText(e,this.getEndPoint());var t=e.getEndPoint(),n=e.detachParagraphs(),i=Object(w.a)(n),r={};if(!i.isListParagraph()){var o=this.detachFirstParagraph();r=i.merge(o)}return this.addParagraph(n,0),Object.assign(t,r,{unitId:this.id})},n.mergeWith=function(e,t){void 0===t&&(t={});var n=t.isAttach,i=t.mergePoint;!1===this.isLineBreakable()&&e._filterLineBreak(),this._sliceSourceText(e),this._filterSourceText(e,i);var r=e.getFirstParagraph(),o=e.getLastParagraph(),a=null,s=null;if(i){var l=this.splitParagraph(i);a=l.front,s=l.back}else a=this.getLastParagraph();n&&this._updateParagraphListStyle(a,r);var u=e.detachParagraphs();if(this.addParagraphAfter(a,u),n){var p=r===o?a:o,d=!1===r.isListParagraph(),h=s&&!1===p.isListParagraph(),g=d?this.mergeParagraph(a,r):0,f=null;if(h){var m=this._convertParagraphStyle(s);p.updateParagraphStyle(m),f=this.mergeParagraph(p,s)}else{var y=p.getEndPoint();f=p.getOffsetInParagraph(y),s&&s.isEmpty()&&this.removeParagraph(s.id)}var v=a.getNodeInfoAfterOffset(g),_=p.getNodeInfoBeforeOffset(f);return{start:{unitId:this.id,paraId:a.id,nodeId:v.node.id,offset:v.offset},end:{unitId:this.id,paraId:p.id,nodeId:_.node.id,offset:_.offset}}}return{start:c()({unitId:this.id},r.getStartPoint()),end:c()({unitId:this.id},o.getEndPoint())}},n._updateParagraphListStyle=function(e,t){if(e&&!this._notAllowedStyle(this._styleFilter.list)&&!1===e.isListParagraph()&&!0===e.isEmpty()&&!0===t.isListParagraph()){var n=this._convertParagraphStyle(t),i=n.listType,r=n.listLevel;e.updateParagraphStyle({listType:i,listLevel:r,dropCap:!1}),this.structuredParagraphStore.updateListType(e)}},n._convertParagraphStyle=function(e){var t=Object(k.a)(e.style);return t.list&&(t.listType=t.list.type,t.listLevel=t.list.level),delete t.list,t},n.mergeParagraph=function(e,t){var n=e.getEndPoint(),i=e.getOffsetInParagraph(n);return e.merge(t),this.removeParagraph(t.id),i},n.clone=function(e){void 0===e&&(e={});var n=e,i=n.start,r=void 0===i?this.getStartPoint():i,o=n.end,a=void 0===o?this.getEndPoint():o;if(Object(O.a)(r,a))return new t({config:this._textUnitStoreConfig});a.paraId||(a=this.getStartPoint());var s=new t({state:this.toValidJSON()});s.removeListStyle({start:r,end:a});var c=s.splitParagraph(a).back,l=s.getLastParagraph();s.removeParagraphsBetween(c.id,l.id);var u=s.getFirstParagraph(),p=s.splitParagraph(r).front;s.removeParagraphsBetween(u.id,p.id);var d=new t({state:F.a.dropProperty(s.toValidJSON(),"id")});return d.updateTheme(this.themeStyle),d},n.removeListStyle=function(e){var t=e.start,n=e.end,i=this.getParagraphsBetween(t.paraId,n.paraId);this._isPartOfSingleList(i,e)&&this.updateParagraphStyle({list:"reset"},e)},n._isPartOfSingleList=function(e,t){var n=Object(P.a)(e),i=Object(w.a)(e);if(!e.every(function(e,t){return 0===t?e.isListParagraph():e.listType===B.F.NONE}))return!1;var r=this.structuredParagraphStore.getTreeNodesInSameListItem(n).length;return e.length!==r||!(n.isWholeParagraph(t)&&i.isWholeParagraph(t))},n._sliceSourceText=function(e){var t=this.maxLength;if(t){var n=t-this.textLength;n<e.textLength&&(e.slice(n,{plainTextMode:!0}),this.turnOnOverTextLimit())}},n._filterSourceText=function(e,t){if(t){var n=this.getStyleFilter(),i=this.getParagraphById(t.paraId),r=this.getNodeByPoint(t),o=i.style||{},a=r.style||{};Object(C.a)(n,function(t,n){var i;t===X.b.FOLLOW_CURRENT_STYLE&&e.updateStyle(((i={})[n]=a[n]||o[n],i),{start:e.getStartPoint(),end:e.getEndPoint()})})}},n.writeEmoji=function(e,t){var n=this.maxLength;if(n){var i=e.length;if(this.textLength===n||n-this.textLength<i)return this.turnOnOverTextLimit(),t}var r=t.paraId,o=t.nodeId;if(r&&o){var a=this.getParagraphById(r).insertEmoji(e,t);return c()({unitId:this.id},a)}},n._writeText=function(e,t,n){var i=t.paraId,r=t.nodeId,o=t.offset;if(i&&r){var a={nodeId:r,offset:o,imeOffset:n,value:e},s=this.getParagraphById(i).writeValue(a);return c()({unitId:this.id},s)}},n._eraseText=function(e,t){var n=e.start,i=e.end,r=e.collapsed,o=this.getParagraphById(n.paraId),a=this._determineEraseType({direction:t,isCollapsed:r,start:n,end:i}),s=null,c=n&&i&&n.nodeId===i.nodeId&&i.offset<=re&&!e.collapsed?o.getPlainTextWithEmoji():"";switch(a){case X.a.ERASE_PREV_BR:s=this._eraseBRbyBackspace(o,n);break;case X.a.ERASE_NEXT_BR:s=this._eraseBRbyDeleteKey(o,n);break;case X.a.ERASE_PREV_NON_TEXT_NODE:var l=o.getPrevNode(n.nodeId);s=this._eraseNonTextNode(o,l);break;case X.a.ERASE_NEXT_NON_TEXT_NODE:var u=o.getNextNode(n.nodeId);s=this._eraseNonTextNode(o,u);break;case X.a.ERASE_NON_TEXT_NODE:var p=o.getNodeById(n.nodeId);s=this._eraseNonTextNode(o,p);break;case X.a.ERASE_PREV_NODE_CHARACTER:s=this._eraseTextOnPrevNode(e);break;case X.a.ERASE_NEXT_NODE_CHARACTER:s=this._eraseTextOnNextNode(e);break;case X.a.DECREASE_INDENT:return 0===o.listLevel?this._changeTreeToNormal([o]):this._updateListLevelByDiff(this._getAdjacentParas([o]),-1),{start:n,end:i};default:s=this._eraseTextOnNode(e,t)}if(t!==B.u.UP&&t!==B.u.DOWN||!this._isForceChangetNormalParagraphByErase(r,o,c)||this._changeTreeToNormal([o]),s)return{start:s,end:s}},n._isForceChangetNormalParagraphByErase=function(e,t,n){return!e&&t.isListParagraph()&&t.isEmpty()&&!Object(L.a)(B.R).includes(n)},n._eraseNonTextNode=function(e,t){var n=t.id,i=e.getPrevNode(n),r=e.getNextNode(n),o=e.createSameStyleNode(t),a=this._determineMergeType({targetNode:o,prevNode:i,nextNode:r}),s={unitId:this.id,paraId:e.id};if(a===X.c.MERGE_ONLY_PREV_NODE)return e.removeNode(n),Object.assign(s,i.getEndPoint());if(a===X.c.MERGE_ONLY_NEXT_NODE)return e.removeNode(n),Object.assign(s,r.getStartPoint());e.replaceNodesBetween(t.id,t.id,o);var c=Object.assign(s,o.getStartPoint());return a===X.c.MERGE_BOTH_SIDE_NODE?this.refineParagraphWithPoint(c):c},n._determineMergeType=function(e){var t=e.targetNode,n=e.prevNode,i=e.nextNode,r=t.isMergeable(n),o=t.isMergeable(i);return r&&!o?X.c.MERGE_ONLY_PREV_NODE:!r&&o?X.c.MERGE_ONLY_NEXT_NODE:r&&o?X.c.MERGE_BOTH_SIDE_NODE:X.c.UNMERGEABLE},n._getPointByOffset=function(e,t){var n=this,i=(void 0===t?{}:t).plainTextMode,r=void 0!==i&&i,o=0,a=null;return Object(C.a)(this.paragraphs,function(t){var i=t.getPlainTextWithEmoji().length,s=o+i+1;if(s>e){var c=e-o,l=r?t.getNodeInfoBeforeOffsetByPlainTextLength(c):t.getNodeInfoBeforeOffset(c),u=l.node,p=l.offset;return a={unitId:n.id,paraId:t.id,nodeId:u.id,offset:p},!1}o=s}),a},n.getNodeByPoint=function(e){var t=e.paraId,n=e.nodeId;return this.getParagraphById(t).getNodeById(n)},n.getParagraphById=function(e){return this._hashArray.getDataById(e)},n.getParagraphByIndex=function(e){return this._hashArray.getDataByIndex(e)},n.getParagraphIndex=function(e){return this._hashArray.getIndex(e)},n.getFirstParagraph=function(){return this._hashArray.getFirst()},n.getLastParagraph=function(){return this._hashArray.getLast()},n.getPrevParagraph=function(e){return this._hashArray.getPrev(e)},n.getNextParagraph=function(e){return this._hashArray.getNext(e)},n.getParagraphsBetween=function(e,t){return this._hashArray.getBetween(e,t)},n.getParagraphsLength=function(){return this._hashArray.getLength()},n.has=function(e){return this._hashArray.has(e)},n.isCenterOrRightAlign=function(e){var t=e.start,n=e.end;return this.getParagraphsBetween(t.paraId,n.paraId).some(function(e){return e.isCenterOrRightAlign()})},n.isOnlyUrlLink=function(){return 1===this.getParagraphsLength()&&this.getFirstParagraph().isOnlyUrlLink()},n.isLinkAllowed=function(){return!1===this._notAllowedStyle(this._styleFilter.link)},n.isListParagraphByPoint=function(e){var t=e.paraId,n=void 0===t?"":t,i=this.getParagraphById(n);return!!i&&i.isListParagraph()},n.isLinkNodeEdge=function(e){return this.getParagraphById(e.paraId).isLinkNodeEdge(e)},n.isNonTextNode=function(e){var t=this.getNodeByPoint(e);return t&&!t.isTextNode()},n.isAiTextNode=function(e){var t=this.getTextNodeByPoint(e);return t&&t.isAiTextNode()},n.createImageNodes=function(e,t){return this.getParagraphById(e.paraId).createImageNodes(e,t)},n.updateImageNode=function(e,t){var n=this._getParagraphByNodeId(e);n&&n.updateImageNodeById(e,t)},n._getParagraphByNodeId=function(e){return this.paragraphs.find(function(t){return!!t.getNodeById(e)})},n.deleteImageNode=function(e){var t=e.unitId,n=e.nodeId,i=this._getParagraphByNodeId(n);if(i){if(i.hasInlineImage()&&1===i.getNodesLength()){var r=i.getNodeById(n),o=i.createSameStyleNode(r);return i.replaceNodesBetween(r.id,r.id,o),{unitId:t,paraId:i.id,nodeId:o.id}}var a=i.getPrevNode(n);return i.removeNode(n),{unitId:t,paraId:i.id,nodeId:a&&a.id||this.refineParagraphWithPoint(e).nodeId}}},n.clear=function(){this.structuredParagraphStore.clear(),this._hashArray.clear()},n.forEach=function(e){this._hashArray.forEach(e)},n.isEmpty=function(){var e=this.getParagraphsLength();return 0===e||1===e&&this.isFirstParagraphEmpty()},n.isFirstParagraph=function(e){return e.paraId===this.getFirstParagraph().id},n.isFirstParagraphEmpty=function(){return this.getFirstParagraph().isEmpty()},n.isLastParagraphEmpty=function(){return this.getLastParagraph().isEmpty()},n.hasTextInListParagraph=function(){return this.paragraphs.some(function(e){return e.isListParagraph()})},n.getStartPoint=function(){var e=this.getFirstParagraph();return c()({unitId:this.id},e.getStartPoint())},n.getEndPoint=function(){var e=this.getLastParagraph();return c()({unitId:this.id},e.getEndPoint())},n.getOffsetInParagraph=function(e){var t=e.paraId;return this.getParagraphById(t).getOffsetInParagraph(e)},n.getNodeInfoBeforeOffset=function(e,t){return this.getParagraphById(e.paraId).getNodeInfoBeforeOffset(t)},n.getNodeInfoAfterOffset=function(e,t){return this.getParagraphById(e.paraId).getNodeInfoAfterOffset(t)},n.getPositionByPoint=function(e){var t=e.paraId,n=this.getParagraphById(t);if(n)return this.isTextStart(e)?X.d.TEXT_START:this.isTextEnd(e)?X.d.TEXT_END:n.getPositionByPoint(e)},n.isTextStart=function(e){var t=e.paraId,n=this.getParagraphById(t);if(!n)return!1;var i=n.getPositionByPoint(e);return this.getFirstParagraph()===n&&(n.isEmpty()||i===X.d.PARA_START)},n.isTextEnd=function(e){var t=e.paraId,n=this.getParagraphById(t);if(!n)return!1;var i=n.getPositionByPoint(e);return this.getLastParagraph()===n&&(n.isEmpty()||i===X.d.PARA_END)},n.extendPointToParagraphEnd=function(e){var t=this.getParagraphById(e.paraId).getLastNode();return c()({},e,{nodeId:t.id,offset:t.getNodeLength()})},n.refineSelection=function(e){var t=Object(k.a)(e),n=t.start,i=t.end;return this.has(n.paraId)||(n=Object.assign(n,this.getStartPoint())),this.has(i.paraId)||(i=Object.assign(i,this.getEndPoint())),t},n._refinePointToPrevNode=function(e,t,n){e.refine(t);var i=e.getNodeInfoBeforeOffset(n);return{unitId:this.id,paraId:e.id,nodeId:i.node.id,offset:i.offset}},n._refinePointToNextNode=function(e,t,n){e.refine(t);var i=e.getNodeInfoAfterOffset(n);return{unitId:this.id,paraId:e.id,nodeId:i.node.id,offset:i.offset}},n._eraseBRbyDeleteKey=function(e,t){var n=this.getNextParagraph(e.id);if(n){var i=n.id,r=e,o=t.nodeId,a=e.getOffsetInParagraph(t),s=!e.isEmpty()&&!n.isEmpty(),c=e.isEmpty()&&!n.isEmpty();return s?e.merge(n):c&&(i=e.id,r=n,o=n.getFirstNode().id),this.removeParagraph(i),this._refinePointToPrevNode(r,o,a)}},n._eraseBRbyBackspace=function(e,t){var n=this.getPrevParagraph(e.id);if(!n)return t;if(n.isEmpty()&&!n.isListParagraph())return this.removeParagraph(n.id),t;var i=n.getLastNode(),r={nodeId:i.id,offset:i.getNodeLength()},o=n.getOffsetInParagraph(r);return e.isEmpty()&&i.isEmpty()||n.merge(e),this.removeParagraph(e.id),this._refinePointToPrevNode(n,t.nodeId,o)},n._eraseTextOnPrevNode=function(e){var t=e.start,n=e.collapsed,i=this.getParagraphById(t.paraId),r=i.getPrevNode(t.nodeId);if(r){if(i.shouldUnwrapDropCapByErase(B.u.LEFT,r.id,r.getNodeLength(),n))return i.unwrapDropCap(),this._refinePointToPrevNode(i,r.id,1);var o=this._eraseOneCharacter(r,r.getNodeLength(),B.u.LEFT);t.nodeId=r.id,t.offset=o;var a=i.getOffsetInParagraph(t);return r.isEmpty()&&i.removeNode(r.id),this._refinePointToPrevNode(i,t.nodeId,a)}},n._eraseTextOnNextNode=function(e){var t=e.start,n=this.getParagraphById(t.paraId),i=n.getNextNode(t.nodeId);if(i){var r=this._eraseOneCharacter(i,0,B.u.RIGHT);t.nodeId=i.id,t.offset=r;var o=n.getOffsetInParagraph(t);return i.isEmpty()&&n.removeNode(i.id),this._refinePointToNextNode(n,t.nodeId,o)}},n._eraseTextOnNode=function(e,t){var n=e.start,i=e.end,r=e.collapsed,o=this.isNonTextNode(n)?this.adjustWritePointOnEdge(n):n,a=this.getParagraphById(o.paraId),s=o.nodeId,c=a.getNodeById(s);if(!a.shouldUnwrapDropCapByErase(t,o.nodeId,o.offset,r)||(a.unwrapDropCap(),!r)){if(r){var l=this._eraseOneCharacter(c,o.offset,t);o.offset=l}else this._eraseBySelection({start:o,end:i});c.isEmpty()&&this._postprocessLinkText(a,o,s);var u=this.getOffsetInParagraph(o),p=a.getNodeValueLength(o.nodeId);if(a.refine(o.nodeId),p===a.getNodeValueLength(o.nodeId))return o;var d=this.getNodeInfoAfterOffset(o,u);return Object(E.a)({nodeId:d.node.id,offset:d.offset},o)}},n._postprocessLinkText=function(e,t,n){var i=e.getNodeById(n),r=e.getPrevNode(n),o=e.getNextNode(n);e.isLinkNodeEdge(t)&&(r||o)?(r?(t.nodeId=r.id,t.offset=r.getNodeLength()):(t.nodeId=o.id,t.offset=0),e.removeNode(n)):i.changeLink()},n._eraseOneCharacter=function(e,t,n){var i=Object(x.a)(e.value),r=0,o=0;i.some(function(e,n){return t===o||(r=n+1,o+=e.length,!1)}),n===B.u.LEFT&&(r-=1),i.splice(r,1),e.value=i.join("");var a=0;return i.some(function(e,t){return t===r||(a+=e.length,!1)}),a},n._eraseBySelection=function(e){var t=this,n=e.start,i=e.end,r=this.getParagraphsBetween(n.paraId,i.paraId);r.shift(),r.pop(),Object(C.a)(r,function(e){t.removeParagraph(e.id)});var o=null;if(n.paraId===i.paraId)o=this.getParagraphById(n.paraId);else{var a=this.getParagraphById(n.paraId),s=this.getParagraphById(i.paraId).nodes;a.addNode(s.splice(0,s.length)),o=a,this.removeParagraph(i.paraId)}o.removeNodesWithSelection({start:n,end:i})},n._createParagraphStore=function(e,t){return void 0===t&&(t=!1),t&&delete e.id,e instanceof V.a?(e.id=e.id||B.cb.generate(),e):new V.a({state:e})},n._createParagraphStores=function(e){var t=this,n=[];return e.map(function(e){var i=n.includes(e.id),r=t._createParagraphStore(e,i);return n.push(r.id),r})},n._isSelectingOnlyNonTextNode=function(e,t){if(e.nodeId===t.nodeId){var n=this.getNodeByPoint(e);return n&&!n.isTextNode()}return!1},n._determineEraseType=function(e){var t=e.direction,n=e.isCollapsed,i=e.start,r=e.end,o=!1===n;if(o&&this._isSelectingOnlyNonTextNode(i,r))return X.a.ERASE_NON_TEXT_NODE;if(o)return X.a.ERASE_CHARACTER;var a=i.paraId,s=i.nodeId,c=this.getParagraphById(a),l=this.getPrevParagraph(a),u=c.getNodeById(s),p=c.isEmpty(),d=u.isEmpty(),h=c.getPositionByPoint(i);switch(t){case B.u.LEFT:if(h===X.d.PARA_START&&0===this.structuredParagraphStore.indexOfParaInItsListItem(c)&&(!l||l.listLevel!==c.listLevel))return X.a.DECREASE_INDENT;if(p||h===X.d.PARA_START)return X.a.ERASE_PREV_BR;var g=c.getNodeById(s);if(g&&!g.isTextNode()&&[X.d.NODE_END,X.d.PARA_END].includes(h))return X.a.ERASE_NON_TEXT_NODE;var f=c.getPrevNode(s);if(f&&!f.isTextNode()&&(d||h===X.d.NODE_START))return X.a.ERASE_PREV_NON_TEXT_NODE;if(d||h===X.d.NODE_START)return X.a.ERASE_PREV_NODE_CHARACTER;break;case B.u.RIGHT:if(p||h===X.d.PARA_END)return X.a.ERASE_NEXT_BR;var m=c.getNodeById(s);if(m&&!m.isTextNode()&&[X.d.NODE_START,X.d.PARA_START].includes(h))return X.a.ERASE_NON_TEXT_NODE;var y=c.getNextNode(s);if(y&&!y.isTextNode()&&(d||h===X.d.NODE_END))return X.a.ERASE_NEXT_NON_TEXT_NODE;if(d||h===X.d.NODE_END)return X.a.ERASE_NEXT_NODE_CHARACTER}return X.a.ERASE_CHARACTER},n._getHeadTailNodesByPoint=function(e,t){var n=this.getParagraphById(e.paraId),i=this.getParagraphById(t.paraId),r=i.getNodeById(t.nodeId);t.offset!==r.getNodeLength()&&(r=i.splitNode(t).front);var o=n.getNodeById(e.nodeId);return 0!==e.offset&&(o=n.splitNode(e).back,e.nodeId===t.nodeId&&(r=o)),{headNode:o,tailNode:r}},n.splitNodeByPoint=function(e){return this.getParagraphById(e.paraId).splitNode(e)},n._resolveRangeByOffset=function(e){var t=e.startParaOffset,n=e.endParaOffset,i=e.selectionInfoStore,r=i.start,o=i.end,a=i.collapsed,s=[];if("number"==typeof t){var c=this.getNodeInfoAfterOffset(r,t),l=Object(E.a)({nodeId:c.node.id,offset:c.offset},r);s.push(l)}if(!a&&"number"==typeof n){var u=this.getNodeInfoBeforeOffset(o,n),p=Object(E.a)({nodeId:u.node.id,offset:u.offset},o);s.push(p)}return s},n.getPlainText=function(){var e=[];return this.paragraphs.forEach(function(t,n,i){e.push(t.getPlainText()),n<i.length-1&&e.push("\n")}),e.join("")},n.getPlainTextWithEmoji=function(){var e=[];return this.paragraphs.forEach(function(t,n,i){e.push(t.getPlainTextWithEmoji()),n<i.length-1&&e.push("\n")}),e.join("")},n.getPlainTextOnlyAi=function(){var e=[];return this.paragraphs.forEach(function(t){t.hasAiTextNode()&&e.push(t.getPlainTextOnlyAi())}),e.join("")},n.releaseAiStyleByUser=function(e){return this.updateStyle({ai:null},e)},n.setPlainTextWithEmoji=function(e){var t=this,n=(e||"").split("\n"),i=this.getFirstParagraph(),r=i.computedStyle,o=i.firstNodeComputedStyle;this.clear(),this.addParagraph(new V.a),this.updateWholeParagraphStyle(r),this.updateWholeCharacterStyle(o),n.reduce(function(e,n,i){i>0&&(e=t.breakLine(e));var r=[];return z.a.separateCallbacksWithEmoji(n,function(e){return r.push({value:e,emoji:!0})},function(e){return r.push({value:e,emoji:!1})}),r.reduce(function(e,n){return n.emoji?t.writeEmoji(n.value,e):t.write(n.value,e,0)},e)},this.getStartPoint())},n.getLinkedPlainTextByPoint=function(e){var t="",n=this.getTextNodeByPoint(e);if(n&&n.hasUrlLink()){var i=n.getUrlValue();if(i&&i.length>0){var r=this.getEdgePointsOnLinkByPoint(e),o=r.start,a=r.end;t=this.clone({start:o,end:a}).getPlainTextWithEmoji()}}return t},n.filterOnlyTexts=function(){var e=new t({state:this.toValidJSON()});return e.stripOffNonTexts(),e},n.isBackward=function(e,t){var n=this.getParagraphIndex(e.paraId),i=this.getParagraphIndex(t.paraId);return-1!==i&&-1!==n&&(!(i<n)&&(i!==n||this.getParagraphById(t.paraId).isBackward(e,t)))},n.filterTextBy=function(e){var t=!1;return Object(C.a)(this.paragraphs,function(n){n.filterTextBy(e)&&(t=!0)}),t},n.getStyleFilter=function(){return this._styleFilter},n._filterStyleTypes=function(e){var t=this,n=Object(D.a)(e,!0);return delete n.ai,Object.keys(e).forEach(function(i){t._notAllowedStyle(t._styleFilter[i],e[i])&&delete n[i]}),Object(I.a)(n)?null:n},n.getUrlInNode=function(e){return this.getParagraphById(e.paraId).getUrlInNode(e)},n.getLibraryItemData=function(e){var t=this,n=e.compId,i=e.unitId,r=[];return this.paragraphs.forEach(function(e){r.push.apply(r,e.getLibraryItemData({compId:n,unitId:i||t.id}))}),r},n.setDefaultRepresentativeImage=function(){this.paragraphs.some(function(e){return!(!e.hasInlineImage()||e.hasRepresentativeImage())&&(e.setRepresentativeImage(),!0)})},n.hasParagraphStartsWithEmoji=function(e){var t=e.start,n=e.end,i=e.mode;if(i===B.P.CURSOR){var r=this.getParagraphById(t.paraId);return r&&r.isStartWithEmoji()}return i===B.P.BLOCK&&this.getParagraphsBetween(t.paraId,n.paraId).some(function(e){return e.isStartWithEmoji()})},n.hasInlineImageInParagraph=function(e){if(void 0===e&&(e={}),Object(I.a)(e))return this.paragraphs.some(function(e){return e.hasInlineImage()});var t=e,n=t.start,i=t.end,r=t.mode;if("cursor"===r){var o=this.getParagraphById(n.paraId);return o&&o.hasInlineImage()}return"block"===r?this.getParagraphsBetween(n.paraId,i.paraId).some(function(e){return e.hasInlineImage()}):void 0},n.isLibraryComponent=function(){return this.paragraphs.some(function(e){return e.isLibraryComponent()})},n.setRepresentativeImage=function(e,t){e?this.getParagraphById(e).setRepresentativeImage(t):this.setDefaultRepresentativeImage()},n.releaseRepresentativeImage=function(e){var t=e.paraId,n=e.nodeId;this.getParagraphById(t).releaseRepresentativeImage(n)},n.hasRepresentativeImage=function(){return this.paragraphs.some(function(e){return e.hasRepresentativeImage()})},n.isRepresentativeImage=function(){return this.paragraphs.some(function(e){return e.isRepresentativeImage()})},n.updateConfig=function(){this.paragraphs.forEach(function(e){e.updateConfig&&e.updateConfig()})},n.canBeListBySpace=function(e){var t=e.start.paraId;return!!e.collapsed&&this.getParagraphById(t).canBeListBySpace()},n.getRepresentativeId=function(){var e=[];return this.paragraphs.forEach(function(t){if(t.isRepresentativeImage()){var n=t.getRepresentativeId();Object(S.a)(n)?e=[].concat(e,n):e.push(n)}}),e},n.getRepresentativeInnerData=function(){var e=Object(A.a)(this.paragraphs,function(e){return e.hasRepresentativeImage()});return e?e.getRepresentativeInnerData():null},n.hasDropCapInParagraph=function(e){var t=this.getParagraphById(e);return t&&t.hasDropCapInParagraph()},n.hasInlineImageOnly=function(){return this.paragraphs.some(function(e){return e.hasInlineImage()&&!e.hasTextNode()})},n.toValidJSON=function(){var e=this.paragraphs.map(function(e){return e.toValidJSON()});if(0===e.length){var t=new V.a;this.addParagraph(t),e=[t.toValidJSON()]}return e.id=this.id,e},n.toPlainJSON=function(e,t){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),c()({},this._toPlainJSON,{paragraphs:this.getParagraphsBetween(e.paraId,t.paraId).map(function(n,i,r){return n.toPlainJSON(0===i?e:void 0,i===r.length-1?t:void 0)})})},n.stripOffNonTexts=function(){this.paragraphs.forEach(function(e){return e.stripOffNonTexts()})},n.isEqualStore=function(e){return this.$mobx.name===e.$mobx.name},n.getEdgePointsOnLinkByPoint=function(e){if(!e||e.unitId!==this.id)throw new Error("Invalid Parameters!");var t,n,i,r=this.getParagraphById(e.paraId),o=r.getNodeById(e.nodeId),a=o.getUrlValue();if(!o.hasUrlLink()||0===a.length)throw new Error("Invalid Parameters!");for(t=r,n=o,i=!1;!i;){var s=t.getPrevNode(n.id);if(null==s){var c=this.getPrevParagraph(t.id);c&&(s=c.getLastNode()).hasUrlLink()&&s.getUrlValue()===a?(t=c,n=s):i=!0}else s.hasUrlLink()&&s.getUrlValue()===a?n=s:i=!0}var l={compId:e.compId,unitId:this.id,paraId:t.id,nodeId:n.id,offset:n.getStartPoint().offset};for(t=r,n=o,i=!1;!i;){var u=t.getNextNode(n.id);if(null==u){var p=this.getNextParagraph(t.id);p&&(u=p.getFirstNode()).hasUrlLink()&&u.getUrlValue()===a?(t=p,n=u):i=!0}else u.hasUrlLink()&&u.getUrlValue()===a?n=u:i=!0}return{start:l,end:{compId:e.compId,unitId:this.id,paraId:t.id,nodeId:n.id,offset:n.getEndPoint().offset}}},n.convertToList=function(e){var t=this.getParagraphById(e.start.paraId).getPlainTextWithEmoji()===B.R.BULLET+" "?B.F.BULLET:B.F.DECIMAL;return this.updateParagraphStyle({list:t},e),t},n.getNodesByBetween=function(e,t,n){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),this.getParagraphsBetween(e.paraId,t.paraId).reduce(function(i,r){var o=r.id===e.paraId?e.nodeId:r.getFirstNode().id,a=r.id===t.paraId?t.nodeId:r.getLastNode().id,s=r.getNodesBetween(o,a);return i.concat(s.filter(function(e){return!n||e.ctype===n}))},[])},n.traverseNodes=function(e,t){this.paragraphs.forEach(function(n){n.nodes.forEach(function(n){t?n.ctype===t&&e&&e(n):e&&e(n)})})},n._refineOriginalParaByMaxLength=function(e){var t=[],n=this.maxLength;if(null===n||n===1/0)return e;for(var i=0;i<e.length;i++){for(var r=e[i],o=r.nodes,s=a()(r,ee),l=c()({},s,{nodes:[]}),u=0;u<o.length;u++){var p=o[u],d=p.value,h=a()(p,te),g=d.length,f=g>=n;if(l.nodes.push(c()({},h,{value:f?d.substr(0,n):d})),n-=g,f)break}if(t.push(l),n<=0)break}return t},d()(t,[{key:"isFocused",get:function(){return"child"===this.selection||"cursor"===this.selection}},{key:"textLength",get:function(){return this.getPlainTextWithEmoji().length}},{key:"isFullText",get:function(){var e=this.maxLength;return null!==e&&this.textLength===e}},{key:"_textUnitStoreConfig",get:function(){return{disable:this.disable,filterTextStyle:this._styleFilter,styleFilterPayload:this._styleFilterPayload,maxLength:this.maxLength,attributes:this.attributes,themeStyle:this.themeStyle}}},{key:"empty",get:function(){return this.isEmpty()}},{key:"unchangedFirstNodeStyle",get:function(){if(!this.themeStyle)return!0;var e=this.getFirstParagraph().firstNodeComputedStyle,t=e.fontFamily,n=e.fontSizeCode;return this.themeStyle.fontFamily===t&&this.themeStyle.fontSizeCode===n}},{key:"existTextInListParagraph",get:function(){return this.hasTextInListParagraph()}},{key:"_toPlainJSON",get:function(){return{id:this.id,ctype:this.ctype,isOverTextLimit:this.isOverTextLimit,paragraphs:this.paragraphs.map(function(e){return e.toPlainJSON()})}}}]),t}(B.k),Z=v()(Q.prototype,"isOverTextLimit",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$=v()(Q.prototype,"paragraphs",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v()(Q.prototype,"isFocused",[M.e],Object.getOwnPropertyDescriptor(Q.prototype,"isFocused"),Q.prototype),v()(Q.prototype,"textLength",[M.e],Object.getOwnPropertyDescriptor(Q.prototype,"textLength"),Q.prototype),v()(Q.prototype,"isFullText",[M.e],Object.getOwnPropertyDescriptor(Q.prototype,"isFullText"),Q.prototype),v()(Q.prototype,"empty",[M.e],Object.getOwnPropertyDescriptor(Q.prototype,"empty"),Q.prototype),v()(Q.prototype,"unchangedFirstNodeStyle",[M.e],Object.getOwnPropertyDescriptor(Q.prototype,"unchangedFirstNodeStyle"),Q.prototype),v()(Q.prototype,"_toPlainJSON",[Y],Object.getOwnPropertyDescriptor(Q.prototype,"_toPlainJSON"),Q.prototype),Q)},152:function(e,t,n){"use strict";var i;n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return s});var r={KEY_CODE:{DELETE:46,BACK_SPACE:8,ENTER:13,PAGE_UP:33,PAGE_DOWN:34,TAB:9}},o={OVERSEAS_COUNTRY:"overseas_country",OVERSEAS_CITY:"overseas_city",OVERSEAS_POI:"overseas_poi",OVERSEAS_HOTEL:"overseas_hotel",DOMESTIC_GEO:"domestic_geo"},a=((i={})[o.OVERSEAS_COUNTRY]={label:"대륙",labelName:"continent"},i[o.OVERSEAS_CITY]={label:"국가",labelName:"country"},i[o.OVERSEAS_POI]={label:"위치",labelName:"location"},i[o.OVERSEAS_HOTEL]={label:"위치",labelName:"location"},i[o.DOMESTIC_GEO]={label:"태그",labelName:"tag"},i),s={OGQ_COMMERCIAL:"ogqCommercial",OGQ:"ogq"}},153:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(54),l=n.n(c),u=n(49),p=n(376),d=n(251),h=n(52),g=n(1311),f=n(431),m=n(59),y=n(129),v=(i=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e="click.se-toolbar-drop-down-"+this.props.name;g.a.on(e,this._handleClickButtonOutside)},n.componentWillUnmount=function(){var e="click.se-toolbar-drop-down-"+this.props.name;g.a.off(e)},n.render=function(){var e,t=this.props,n=t.id,i=t.label,r=t.name,o=t.title,a=t.type,s=t.namespace,c=t.isActivated,p=t.useHighlight,d=t.value,h=t.action,g=t.options,m=t.optionType,v=t.onClickOption,_=t.disabled,b=t.useIconUpdate,S=t.i18n,C=t.logAreaId,I=t.focused,O=t.logId,T=n,L=S(i),E=l()("se-"+s+"-toolbar-"+a+"-container","__select-container"),P=!!g&&Object.keys(g)[0]||"",w=d||P,k=l()("se-"+s+"-toolbar-"+a+"-button",((e={})["se-"+r+"-toolbar-button"]=!b,e["se-"+r+"-"+w+"-toolbar-button"]=b,e["se-is-activated"]=c,e["se-is-selected"]=!!d&&p,e)),x=S(o[c?"active":"inactive"]);return u.b.createElement("div",{className:E,"data-type":a,"data-name":r},u.b.createElement(y.a,{focused:I,namespace:s,logAreaId:C,logId:O,type:a,dataName:T,className:k,handleClick:this.handleClick,disabled:_,i18n:S,ariaExpanded:""+c,ariaHasPopup:"true"},u.b.createElement("span",{className:"se-toolbar-icon"}),u.b.createElement("span",{className:"se-blind","aria-hidden":"true"},L),u.b.createElement("span",{className:"se-toolbar-tooltip"},x)),c&&u.b.createElement(f.a,{id:n,name:r,options:g,value:d,action:h,namespace:s,type:a,logAreaId:C,optionType:m,onClickOption:v,i18n:S}))},n.handleClick=function(e){var t=this.props,n=t.onClickSelector,i=t.type,r=t.id,o=t.name,a=t.title,s=t.label,c=t.isActivated;n.apply(this,[{event:e,type:i,id:r,name:o,title:a,label:s,isActivated:c}])},n._handleClickButtonOutside=function(e){var t=e.target;this.props.isActivated&&d.a.isOutsideElementbySelector(t,".__select-container")&&this.handleClick({})},t}(u.b.Component),s()(i.prototype,"handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleClick"),i.prototype),s()(i.prototype,"_handleClickButtonOutside",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickButtonOutside"),i.prototype),i);v.defaultProps={name:"",id:"",label:"",title:{inactive:"",active:""},isActivated:!1,value:"",namespace:"",disabled:!1,focused:!1,options:{},optionType:m.c.ICON,useHighlight:!1,selectedIcon:!1,onClickOption:function(){},onClickSelector:function(){},i18n:function(e){return e}},v.propTypes={type:u.a.oneOf([m.b.DROP_DOWN]).isRequired,id:u.a.string,name:u.a.string,label:u.a.string,action:u.a.string,title:u.a.shape({inactive:u.a.string,active:u.a.string}),namespace:u.a.string,isActivated:u.a.bool,disabled:u.a.bool,focused:u.a.bool,useHighlight:u.a.bool,useIconUpdate:u.a.bool,value:u.a.string,options:u.a.object,optionType:u.a.string,onClickOption:u.a.func,onClickSelector:u.a.func,i18n:u.a.func,logAreaId:u.a.string,logId:u.a.string},t.a=Object(p.b)(v)},155:function(e,t,n){"use strict";var i,r,o,a,s=n(51),c=n(55),l=n.n(c),u=n(0),p=n.n(u),d=n(50),h=n.n(d),g=n(49),f=n(376),m=n(52),y=n(86),v=n(87),_=n(213),b=n(192),S=n(450),C=n(88),I=n(309),O=n(790),T=n(132),L=n(119),E=n(75),P=n(794),w=n(12),k=n.n(w),x=n(18),D=n.n(x),A=(i=function(e){function t(){var t;t=e.call(this)||this;var n=s.W.get("configAgent");return t._maxLength=n.get("plugins.componentSettings.imageGroup.config.caption.maxLength"),t._imageGroupComponentService=s.W.get("imageGroupComponentService"),t._editingService=s.W.get("editingService"),t._propertyChangeService=s.W.get("propertyChangeService"),t._imageGroupOrderLayerService=s.W.get("imageGroupOrderLayerService"),t._eventDispatcherService=s.W.get("eventDispatcherService"),t._imageComponentService=s.W.get("imageComponentService"),t._libraryPanelLayoutService=s.W.get("libraryPanelLayoutService")||{updateMediaList:function(){}},t._imageLocationEditLayerService=s.W.get("imageLocationEditLayerService"),t._placeLayerService=s.W.get("placeLayerService"),t._toastLayerService=s.W.get("toastLayerService"),t._i18n=s.W.get("i18n"),t}p()(t,e);var n=t.prototype;return n.delete=function(){this._editingService.eraseComponent()},n.changeContentMode=function(e){this._propertyChangeService.changeContentMode(e)},n.editGroupImage=function(){var e=this._imageGroupComponentService.cloneWithSelection();this._imageGroupOrderLayerService.open(e)},n.exceedTextMaxLength=function(){this._toastLayerService.warningMessage(this._i18n("imageGroupComponent:exceed_text_max_length",{maxLength:this._maxLength}))},n.addResizeViewModeListener=function(e){this._eventDispatcherService.on(s.z.DOCUMENT_VIEWPORT_RESIZED,e)},n.removeResizeViewModeListener=function(e){this._eventDispatcherService.off(s.z.DOCUMENT_VIEWPORT_RESIZED,e)},n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId;s.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n}),this._libraryPanelLayoutService.updateMediaList()},n.deleteImageUnit=function(e,t){this._imageGroupComponentService.selectImageUnit(e,t),this._editingService.erase()},n.updateShellImage=function(e){this._imageGroupComponentService.updateShellImage(e)},n.updatePhase=function(e,t){this._imageGroupComponentService.updatePhase(e,t)},n.updateImageSize=function(e,t,n){this._imageGroupComponentService.updateImageSize(e,t,n)},n.updateImageGroupRatio=function(e){this._imageGroupComponentService.updateImageGroupRatio(e)},n.openLocationEditLayer=function(e){var t=this;this._imageLocationEditLayerService.open({onClickRemove:function(){t._imageGroupComponentService.updatePlace(e,null)},onClickChange:function(){var n=D()(k.a.mark(function n(){var i;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._placeLayerService.editPlaces({isUpdateMode:!0,maxPlaceCount:1,initialPlaces:[e.place]});case 2:(i=n.sent)&&t._imageGroupComponentService.updatePlace(e,i.places[0]);case 4:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}()})},n.attachLocation=function(){var e=D()(k.a.mark(function e(t){var n,i,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={isUpdateMode:!0,maxPlaceCount:1},t.place?n.initialPlaces=[t.place]:(i=t.images.find(function(e){return!!e.location}))&&(n.initialPlaces=[{latlng:{latitude:i.location.latitude,longitude:i.location.longitude}}]),e.next=4,this._placeLayerService.editPlaces(n);case 4:r=e.sent,this._imageGroupComponentService.updatePlace(t,r.places[0]);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t}(Object(s.Y)(s.c)),h()(i.prototype,"delete",[m.preventOnComponentProcessing,m.history,g.d],Object.getOwnPropertyDescriptor(i.prototype,"delete"),i.prototype),h()(i.prototype,"changeContentMode",[m.preventOnComponentProcessing,g.d],Object.getOwnPropertyDescriptor(i.prototype,"changeContentMode"),i.prototype),h()(i.prototype,"editGroupImage",[m.preventOnComponentProcessing,g.d],Object.getOwnPropertyDescriptor(i.prototype,"editGroupImage"),i.prototype),h()(i.prototype,"exceedTextMaxLength",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"exceedTextMaxLength"),i.prototype),h()(i.prototype,"setRepresentativeImage",[m.history,g.d],Object.getOwnPropertyDescriptor(i.prototype,"setRepresentativeImage"),i.prototype),h()(i.prototype,"deleteImageUnit",[m.preventOnComponentProcessing,m.history,g.d],Object.getOwnPropertyDescriptor(i.prototype,"deleteImageUnit"),i.prototype),h()(i.prototype,"openLocationEditLayer",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"openLocationEditLayer"),i.prototype),h()(i.prototype,"attachLocation",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"attachLocation"),i.prototype),i),j=n(168),R=n(60),N=n.n(R),M=n(58),B=n.n(M),W=(n(61),n(54)),U=n.n(W),F=n(76),z=n(216),V=n(85),G=n(718),H=n(719),q=n(444),J=n(252),K=((a=function(e){function t(t){var n;return n=e.call(this,t)||this,N()(n,"_canShowBtnRepresentative",o,B()(n)),n._elRef=g.b.createRef(),n}p()(t,e);var n=t.prototype;return n.componentDidUpdate=function(){this._resolveBtnRepresentative()},n.render=function(){var e=this.props.image.id,t=this._resolveWrapperClassName(),n=this._renderImagePlaceholder(),i=this._renderImage(),r=this._resolveWidthRatio(),o=this._renderBtnRepresentative(),a=this._renderDeleteBtn();return g.b.createElement(F.a,{store:this.props.image,forwardRef:this._elRef,ctype:"image",id:e,className:t,style:r},i,n,o,a)},n._renderDeleteBtn=function(){if(this.props.image.isLoaded)return g.b.createElement("button",{type:"button",className:"se-image-delete-button",onClick:this._handleDeleteImageUnit},g.b.createElement("span",{className:"se-blind"},this.props.i18n("imageGroupComponent:delete_image")))},n._renderBtnRepresentative=function(){var e=this.props,t=e.image,n=e.groupStore,i=e.i18n,r=!!n.representativeEnabled&&(this._canShowBtnRepresentative&&t.isRepresentativeImage());if(t.isLoaded&&r){var o=U()({"se-set-rep-image-button":!0,"se-is-selected":t.represent});return g.b.createElement("button",{type:"button",className:o,onClick:this._handleClickBtnRepresentative},g.b.createElement("span",{className:"se-set-rep-image-button-text"},i("imageGroupComponent:representative")))}},n._resolveWidthRatio=function(){var e=this.props,t=e.image,n=e.groupStore.layout===_.b.COLLAGE;if(!n&&!t.isUploaded)return{width:this._resolveImageWidth(t)};var i=t.widthPercentage;return n?{width:i+"%"}:null},n._resolveWrapperClassName=function(){var e=this.props,t=e.groupStore,n=e.image,i=t.layout===_.b.COLLAGE;return U()({"se-is-progress":!n.isUploaded,"se-imageGroup-item":!i})},n._renderImagePlaceholder=function(){var e=this.props.image;if(e.isUploaded)return null;var t=e.width,n=e.height,i={paddingTop:n/t*100+"%"};return g.b.createElement(z.a,{inlineStyle:i,message:this.props.i18n("imageUnit:uploading"),width:t,height:n})},n._renderImage=function(){var e=this.props,t=e.image,n=e.groupStore,i=t.src,r=t.alt,o=t.height,a=t.width,c=t.fileName,l=n.selection;return t.isUploaded?g.b.createElement(V.b,{className:"se-image-resource",type:"none"!==l||this.context.readOnly?V.a.normal:G.a.isGIF(c)?V.a.autoReplace:V.a.lazyLoad,onLoad:this._handleLoadImage,onError:this._handleErrorImage,forceTriggerOnloadEvent:t.phase===s.O.DONE,src:i,alt:r,originalWidth:a,originalHeight:o,"data-width":a,"data-height":o}):null},n._resolveImageWidth=function(e){var t=this.props,n=t.documentWidth,i=t.slideViewHeight;return e.width*i/e.height/n*100+"%"},n._handleLoadImage=function(e){var t=e.width,n=e.height,i=this.props,r=i.image,o=i.useCase,a=i.groupStore;o.updatePhase(r,s.O.LOADED),a.layout===_.b.COLLAGE&&(o.updateImageSize(r,t,n),o.updateImageGroupRatio(a),o.repaintCursor())},n._resolveBtnRepresentative=function(){var e=this.props.image,t=this._elRef.current.getBoundingClientRect(),n=t.width,i=t.height;this._canShowBtnRepresentative=!e.isSmallerThanMinimumSize(n,i)},n._handleErrorImage=function(){this.props.useCase.repaintCursor()},n._handleClickBtnRepresentative=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.image,i=t.useCase,r=t.groupStore;i.setRepresentativeImage({compId:r.id,unitId:n.id}),H.a.log(e.nativeEvent,"imgct.rep")},n._handleDeleteImageUnit=function(e){e.stopPropagation();var t=this.props,n=t.useCase,i=t.groupStore,r=t.image;n.deleteImageUnit(i,r),H.a.log(e.nativeEvent,"imgct.x")},t}(g.b.Component)).contextType=J.a,r=a,o=h()(r.prototype,"_canShowBtnRepresentative",[g.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),h()(r.prototype,"_renderBtnRepresentative",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(r.prototype,"_renderBtnRepresentative"),r.prototype),h()(r.prototype,"_handleLoadImage",[m.autobind],Object.getOwnPropertyDescriptor(r.prototype,"_handleLoadImage"),r.prototype),h()(r.prototype,"_handleErrorImage",[m.autobind],Object.getOwnPropertyDescriptor(r.prototype,"_handleErrorImage"),r.prototype),h()(r.prototype,"_handleClickBtnRepresentative",[m.autobind],Object.getOwnPropertyDescriptor(r.prototype,"_handleClickBtnRepresentative"),r.prototype),h()(r.prototype,"_handleDeleteImageUnit",[m.autobind],Object.getOwnPropertyDescriptor(r.prototype,"_handleDeleteImageUnit"),r.prototype),r);K.defaultProps={rowIndex:0,colIndex:0,i18n:function(e){return e},documentWidth:700,slideViewHeight:420},K.propTypes={image:g.a.instanceOf(q.a).isRequired,i18n:g.a.func,rowIndex:g.a.number,colIndex:g.a.number,useCase:g.a.instanceOf(A),groupStore:g.a.instanceOf(j.a).isRequired,documentWidth:g.a.number,slideViewHeight:g.a.number};var X,Y=Object(f.b)(K),Q=(X=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={activateScrollbar:!1,activateNavigator:!0,prevDisabled:!0,nextDisabled:!1},n._throttledHandleScroll=Object(T.a)(n._handleScroll,500),n}p()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.useCase;window.addEventListener("resize",this._handleWindowResize),e.addResizeViewModeListener(this._handleImagePanelResize)},n.componentDidUpdate=function(){this.props.useCase.repaintCursor()},n.componentWillUnmount=function(){var e=this.props.useCase;window.removeEventListener("resize",this._handleWindowResize),e.removeResizeViewModeListener(this._handleImagePanelResize)},n.render=function(){var e=this.props,t=e.children,n=e.groupStore,i=e.contentMode,r=n.images,o=this._renderNavigators(),a=this._renderProgressBar(),s=r.map(this._renderImageUnitWrapper);return r.forEach(function(e){return e.phase}),g.b.createElement(g.b.Fragment,null,g.b.createElement(P.a,{ref:this._refImagePanel,className:"se-imageGroup-slide",contentMode:i,viewer:".se-imageGroup-viewer",progress:".se-imageGroup-progress",thumb:".se-imageGroup-thumb",onHideBar:this._handleHideBar,onShowBar:this._handleShowBar,onResize:this._handleResize,onScroll:this._throttledHandleScroll,onReset:this._handleReset,right:!1,drag:!1,images:r},g.b.createElement("div",{className:"se-imageGroup-viewer"},g.b.createElement("div",{className:"se-imageGroup-container"},s)),o,a),t)},n._renderNavigators=function(){if(!this.state.activateNavigator)return null;var e=this.props.i18n;return g.b.createElement("div",{className:"se-imageGroup-navigation",onClick:this._handleClick},g.b.createElement("button",{type:"button",ref:this._refPrevButton,className:"se-imageGroup-navigation-button se-imageGroup-navigation-button-prev",disabled:this.state.prevDisabled,"data-direction":"prev"},g.b.createElement("span",{className:"se-blind"},e("imageGroupComponent:prev_image")," ")),g.b.createElement("button",{type:"button",ref:this._refNextButton,className:"se-imageGroup-navigation-button se-imageGroup-navigation-button-next",disabled:this.state.nextDisabled,"data-direction":"next"},g.b.createElement("span",{className:"se-blind"},e("imageGroupComponent:next_image"))))},n._renderProgressBar=function(){return g.b.createElement("div",{className:"se-imageGroup-progress",style:{display:this.state.activateNavigator?"":"none"}},g.b.createElement("div",{className:"se-imageGroup-thumb"}))},n._renderImageUnitWrapper=function(e,t){var n=this.props,i=n.i18n,r=n.documentWidth,o=n.slideViewHeight,a=n.useCase,s=n.groupStore,c="image-group-slide-view-"+e.id+"-"+t;return g.b.createElement(Y,{key:c,i18n:i,useCase:a,groupStore:s,rowIndex:t,colIndex:0,image:e,index:t,documentWidth:r,slideViewHeight:o})},n._handleImagePanelResize=function(){this._imagePanel&&this._imagePanel.resizeWithDebounced()},n._handleWindowResize=function(){this._handleImagePanelResize()},n._handleShowBar=function(){this.state.activateNavigator||this.setState({activateNavigator:!0})},n._handleHideBar=function(){this.state.activateNavigator&&this.setState({activateNavigator:!1})},n._handleResize=function(e){var t=e.pos,n=e.range;!this.state.activateScrollbar&&this._isMiddleSlide(t,n)&&this.setState({activateScrollbar:!0,prevDisabled:!1,nextDisabled:!1})},n._handleScroll=function(e){var t=e.pos,n=e.range;!this.state.prevDisabled&&this._isFirstSlide(t,n)?this.setState({prevDisabled:!0,nextDisabled:!1}):!this.state.nextDisabled&&this._isLastSlide(t,n)?this.setState({prevDisabled:!1,nextDisabled:!0,activateScrollbar:!1}):(this.state.prevDisabled||this.state.nextDisabled)&&this._isMiddleSlide(t,n)&&this.setState({prevDisabled:!1,nextDisabled:!1})},n._isFirstSlide=function(e,t){return e===Object(L.a)(t)},n._isLastSlide=function(e,t){return e===Object(E.a)(t)},n._isMiddleSlide=function(e,t){return e>Object(L.a)(t)&&e<Object(E.a)(t)},n._handleClick=function(e){"prev"===e.target.getAttribute("data-direction")?this._imagePanel.prev(400):this._imagePanel.next(400)},n._refImagePanel=function(e){this._imagePanel=e},n._refPrevButton=function(e){this._prevButton=e},n._refNextButton=function(e){this._nextButton=e},n._handleReset=function(){this.setState({prevDisabled:!0,nextDisabled:!1})},t}(g.b.Component),h()(X.prototype,"_renderNavigators",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(X.prototype,"_renderNavigators"),X.prototype),h()(X.prototype,"_renderProgressBar",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(X.prototype,"_renderProgressBar"),X.prototype),h()(X.prototype,"_renderImageUnitWrapper",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_renderImageUnitWrapper"),X.prototype),h()(X.prototype,"_handleImagePanelResize",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_handleImagePanelResize"),X.prototype),h()(X.prototype,"_handleWindowResize",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_handleWindowResize"),X.prototype),h()(X.prototype,"_handleShowBar",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_handleShowBar"),X.prototype),h()(X.prototype,"_handleHideBar",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_handleHideBar"),X.prototype),h()(X.prototype,"_handleResize",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_handleResize"),X.prototype),h()(X.prototype,"_handleScroll",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_handleScroll"),X.prototype),h()(X.prototype,"_handleClick",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_handleClick"),X.prototype),h()(X.prototype,"_refImagePanel",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_refImagePanel"),X.prototype),h()(X.prototype,"_refPrevButton",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_refPrevButton"),X.prototype),h()(X.prototype,"_refNextButton",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_refNextButton"),X.prototype),h()(X.prototype,"_handleReset",[m.autobind],Object.getOwnPropertyDescriptor(X.prototype,"_handleReset"),X.prototype),X);Q.propTypes={children:g.a.oneOfType([g.a.element,g.a.array]),i18n:g.a.func,documentWidth:g.a.number,slideViewHeight:g.a.number,useCase:g.a.instanceOf(A),groupStore:g.a.instanceOf(j.a).isRequired,contentMode:g.a.string},Q.defaultProps={children:null,i18n:function(e){return e},documentWidth:700,slideViewHeight:420};var Z=Object(f.b)(Q),$=function(e){function t(){return e.apply(this,arguments)||this}p()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.groupStore,n=e.children,i=t.images,r=this._convertToCollageData(i),o=this._renderCollageImages(r);return g.b.createElement("div",{className:"se-imageGroup-viewer"},o,n)},n._renderCollageImages=function(e){var t=this,n=0;return e.map(function(e,i){var r=e.images.map(function(e,r){return t._renderImage(e,i,r,n++)});return t._renderWrapper(r,i)})},n._renderWrapper=function(e,t){var n="image-group-collage-view-item-"+t;return g.b.createElement("div",{key:n,className:"se-imageGroup-item"},e)},n._renderImage=function(e,t,n){var i=this.props,r=i.i18n,o=i.useCase,a=i.groupStore,s="image-group-collage-view-"+e.id+"-"+t+"-"+n;return g.b.createElement(Y,{key:s,i18n:r,rowIndex:t,colIndex:n,useCase:o,groupStore:a,image:e})},n._convertToCollageData=function(e){return e.reduce(function(e,t){e.length||e.push({total:0,images:[]});var n=e[e.length-1];return n.total>=100?e.push({total:t.widthPercentage,images:[t]}):(n.images.push(t),n.total+=t.widthPercentage),e},[])},t}(g.b.Component);$.propTypes={children:g.a.oneOfType([g.a.element,g.a.array]),i18n:g.a.func,useCase:g.a.instanceOf(A),groupStore:g.a.instanceOf(j.a).isRequired},$.defaultProps={children:null};var ee,te=Object(f.b)($),ne=n(215),ie=(ee=function(e){function t(){return e.apply(this,arguments)||this}p()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=e.useCase,r=this._renderImageView();return g.b.createElement(C.a,{blockWrapperProps:t,onDoubleClick:this._handleDoubleClick},Object(ne.a)({}),r,g.b.createElement(I.a,{store:t,useCase:i,i18n:n,onLimitTextLength:this._handleLimitTextLength}),this._renderBtnLocation())},n._getAdditionalOption=function(){return{placeholder:(0,this.props.i18n)("imageGroupComponent:caption_placeholder")}},n._renderImageView=function(){var e=this.props,t=e.store,n=e.children,i=e.i18n,r=e.useCase,o=t.layout,a=t.place,s=t.contentMode,c=o===_.b.COLLAGE,l=this._resolveImageView(c),u={place:a,i18n:i,useCase:r,groupStore:t,contentMode:s};return c||(u.documentWidth=t.documentWidth,u.slideViewHeight=t.slideViewHeight),g.b.createElement(l,u,n)},n._resolveImageView=function(e){return e?te:Z},n._renderBtnLocation=function(){var e=this.props,t=e.additionalOption.showLocationButton,n=e.store.place,i=n&&t;return g.b.createElement(O.a,{enabled:i,locationInfo:n,onMouseDown:this._handleMouseDownLocation,onClick:this._handleClickLocation})},n._handleDoubleClick=function(e){"BUTTON"!==e.target.tagName&&this.props.useCase.editGroupImage()},n._handleMouseDownLocation=function(e){e.nativeEvent.stopImmediatePropagation()},n._handleClickLocation=function(){(0,this.props.onClickLocation)()},t}(S.a),h()(ee.prototype,"_renderBtnLocation",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ee.prototype,"_renderBtnLocation"),ee.prototype),h()(ee.prototype,"_handleDoubleClick",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ee.prototype,"_handleDoubleClick"),ee.prototype),h()(ee.prototype,"_handleMouseDownLocation",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ee.prototype,"_handleMouseDownLocation"),ee.prototype),h()(ee.prototype,"_handleClickLocation",[m.autobind],Object.getOwnPropertyDescriptor(ee.prototype,"_handleClickLocation"),ee.prototype),ee);ie.defaultProps={config:{},additionalOption:{}},ie.propTypes={store:g.a.instanceOf(j.a).isRequired,useCase:g.a.instanceOf(A).isRequired,children:g.a.oneOfType([g.a.element,g.a.array]),i18n:g.a.func,placeholder:g.a.string,config:g.a.object,onDblClickImage:g.a.func,onLimitTextLength:g.a.func,additionalOption:g.a.object};var re,oe=Object(f.b)(ie),ae=(re=function(e){function t(){return e.apply(this,arguments)||this}p()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.layout||_.b.DEFAULT,a=t.contentMode||b.a.NORMAL,s=this._renderGroupImageSection();return g.b.createElement(y.a,{store:t,id:i,ctype:r,layout:o,contentMode:a,i18n:n},g.b.createElement(v.a,{compId:i,compStore:t},s))},n._renderGroupImageSection=function(){var e=this.props,t=e.i18n,n=e.children,i={showLocationButton:e.store.showLocationButton};return g.b.createElement(oe,l()({},this.props,{placeholder:t("imageGroupComponent:caption_placeholder"),onLimitTextLength:this._handleLimitTextLength,onClickLocation:this._handleClickLocation,additionalOption:i}),n)},n._handleLimitTextLength=function(){this.props.useCase.exceedTextMaxLength()},n._handleClickLocation=function(){var e=this.props,t=e.store;e.useCase.openLocationEditLayer(t)},t}(g.b.Component),h()(re.prototype,"_handleLimitTextLength",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(re.prototype,"_handleLimitTextLength"),re.prototype),h()(re.prototype,"_handleClickLocation",[m.autobind],Object.getOwnPropertyDescriptor(re.prototype,"_handleClickLocation"),re.prototype),re);ae.defaultProps={children:null,i18n:function(e){return e}},ae.propTypes={shouldForceRefresh:g.a.bool,store:g.a.instanceOf(j.a).isRequired,useCase:g.a.instanceOf(A).isRequired,i18n:g.a.func,children:g.a.oneOfType([g.a.element,g.a.array])};var se,ce,le,ue,pe,de,he,ge,fe,me,ye=Object(f.b)(ae),ve=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=s.W.get("componentFactory"),t._selectionInfoStore=s.W.get("selectionInfoStore"),t._componentListStore=s.W.get("componentListStore"),t}p()(t,e);var n=t.prototype;return n.selectImageUnit=function(e,t){var n=t.getComponentActiveRange();n.start.compId=e.id,n.end.compId=e.id,this._selectionInfoStore.setRange(n)},n.selectImageGroupCompAsSingle=function(e){var t=this.getCompStoreByCompId(e).getComponentActiveRange();this._selectionInfoStore.setRange(t)},n.changeLayout=function(e,t){e.changeLayout(t)},n.insertData=function(e){this.getComponentStore(e.compId).insertData(e)},n.updateData=function(e){this.getComponentStore(e.compId).updateData(e)},n.updatePlace=function(e,t){e.updatePlace(t)},n.convertToGroupImage=function(e,t){var n=this._componentFactory.createComponentWithCompData({ctype:"imageGroup",layout:e,images:t});return n.updatePhase(s.O.PROCESSING),n},n.completeAll=function(e){e.stripUncompletedImage(),e.updatePhase(s.O.DONE)},n.getImageComponent=function(e,t){return e.getStoreById(t)},n.getPhaseInfoOfImages=function(e){return void 0===e&&(e={}),e.phaseInfoOfImages},n.getSelectedCompStore=function(){var e=this._selectionInfoStore.start.compId;return this._componentListStore.getComponentById(e)},n.cloneWithSelection=function(){var e=this._selectionInfoStore.start.compId,t=this._componentListStore.getComponentById(e),n=t.cloneComponent();return n.selection=t.selection,t.images.forEach(function(e,t){n.images[t].selection=e.selection}),n},n.getCompStoreByCompId=function(e){return this._componentListStore.getComponentById(e)},n.getSelectedImage=function(){var e=this.getSelectedCompStore(),t=this._selectionInfoStore.toValidJSON().start;return this.getImageComponent(e,t.unitId)},n.isComponentActivated=function(){var e=this._selectionInfoStore.toValidJSON().start;return e.compId===e.unitId},n.changeImageToShell=function(){this.getSelectedImage().setState({phase:s.O.PROCESSING})},n.updateShellImage=function(e,t){var n=this.getCompStoreByCompId(t),i=this.getImageComponent(n,e.id);this._updateShellImageBy(e,i),this.updateImageGroupRatio(n)},n._updateShellImageBy=function(e,t){t.setState({alt:e.fileName,height:parseInt(e.height,10),width:parseInt(e.width,10),originalWidth:parseInt(e.width,10),originalHeight:parseInt(e.height,10),domain:e.domain,path:e.path+"/"+e.fileName,fileSize:Number(e.fileSize),format:e.animatedCnt>1?s.D.ANIMATED:s.D.NORMAL,fileName:e.fileName,internalResource:!0,phase:s.O.DONE})},n.updatePhase=function(e,t){var n=e.format,i={phase:t};n!==s.D.PANORAMA&&n!==s.D.VR360||(i.displayFormat=s.D.NORMAL),e.setState(i)},n.updateComponentPhase=function(e,t){this.getComponentStore(t).updatePhase(e)},n.updateImageSize=function(e,t,n){e.updateImageSize(t,n)},n.updateImageGroupRatio=function(e){e.adjustImageGroupRatio(e.images)},t}(s.a),_e=n(64),be=n(246),Se=n(300),Ce=n(301),Ie=n(302),Oe=n(303),Te=n(17),Le=n.n(Te),Ee=n(63),Pe=n(59),we=["type","title","label","labelVisible","logId"],ke=(se=function(e){function t(){return e.apply(this,arguments)||this}p()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Pe.b.BASIC:t,i=e.title,r=void 0===i?"imageGroupEdit:title":i,o=e.label,a=void 0===o?"imageGroupEdit:label":o,s=e.labelVisible,c=void 0===s||s,u=e.logId,p=void 0===u?"gimed":u,d=Le()(e,we);return g.b.createElement(Ee.a,l()({type:n,title:r,label:a,logId:p,labelVisible:c},d,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editGroupImage()},t}(g.b.Component),h()(se.prototype,"_handleClick",[m.autobind],Object.getOwnPropertyDescriptor(se.prototype,"_handleClick"),se.prototype),se),xe=["type","title","logId"],De=(ce=function(e){function t(){return e.apply(this,arguments)||this}p()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Pe.b.BASIC:t,i=e.title,r=void 0===i?"imageGroupEditWithoutLabel:title":i,o=e.logId,a=void 0===o?"gimed":o,s=Le()(e,xe);return g.b.createElement(Ee.a,l()({type:n,title:r,logId:a},s,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editGroupImage()},t}(g.b.Component),h()(ce.prototype,"_handleClick",[m.autobind],Object.getOwnPropertyDescriptor(ce.prototype,"_handleClick"),ce.prototype),ce),Ae=n(104),je=["type","title","label","groups"],Re=(le=function(e){function t(){return e.apply(this,arguments)||this}p()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Pe.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"imageGroupTypeChange:title":i,o=e.label,a=void 0===o?"imageGroupTypeChange:label":o,s=e.groups,c=void 0===s?[{value:"collage",title:"imageGroupTypeChange:collage_title",label:"imageGroupTypeChange:collage_label",logId:"gimcol"},{value:"slide",title:"imageGroupTypeChange:slide_title",label:"imageGroupTypeChange:slide_label",logId:"gimsl"}]:s,u=Le()(e,je);return g.b.createElement(Ae.a,l()({type:n,title:r,label:a,groups:c},u,{onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeType(e)},t}(g.b.Component),h()(le.prototype,"_handleChange",[m.autobind],Object.getOwnPropertyDescriptor(le.prototype,"_handleChange"),le.prototype),le),Ne=n(791),Me=n(778),Be=(ue=Object(m.history)({sync:!1}),pe=Object(m.history)({sync:!1}),de=Object(m.history)({sync:!1}),he=Object(m.history)({sync:!1}),ge=Object(m.history)({sync:!1}),fe=Object(m.history)({sync:!1}),me=function(e){function t(){var t;return(t=e.call(this)||this)._imageGroupComponentService=s.W.get("imageGroupComponentService"),t._imageGroupOrderLayerService=s.W.get("imageGroupOrderLayerService"),t._imageUploadService=s.W.get("imageUploadService"),t._editingService=s.W.get("editingService"),t._imageEditService=s.W.get("imageEditService"),t._imageBehavior=s.W.get("imageBehavior"),t._selectionInfoStore=s.W.get("selectionInfoStore"),t._canvasScrollingService=s.W.get("canvasScrollingService"),t._placeLayerService=s.W.get("placeLayerService"),t}p()(t,e);var n=t.prototype;return n.changeType=function(e){var t=e.value,n=this._imageGroupComponentService.getSelectedCompStore();n&&n.layout!==t&&(this._imageGroupComponentService.changeLayout(n,t),this._selectionInfoStore.setRange(n.getCompStartRange()),this._canvasScrollingService.scrollToFocus())},n.editGroupImage=function(){var e=this._imageGroupComponentService.getSelectedCompStore().cloneComponent();this._imageGroupOrderLayerService.open(e)},n.changeImage=function(){var e=D()(k.a.mark(function e(){var t,n,i,r,o,a=this;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._imageGroupComponentService.getSelectedCompStore(),n=this._imageGroupComponentService.getSelectedImage(),e.next=4,this._imageUploadService.openFileDialog();case 4:return i=e.sent,r=t.id,o=this._selectionInfoStore.toValidJSON(),this._imageGroupComponentService.updateComponentPhase(s.O.PROCESSING,r),this._imageGroupComponentService.changeImageToShell(),e.next=11,this._imageBehavior.changeImage({targetStore:n,selectedImages:i}).then(function(e){var t=e.succeededImages,n=e.invalidImageErrors;t.forEach(function(e){var t=e.response;a._imageGroupComponentService.updateShellImage(t,r)}),n.length&&a._editingService.erase(o),a._imageGroupComponentService.getCompStoreByCompId(r)&&a._imageGroupComponentService.updateComponentPhase(s.O.DONE,r)});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._openPhotoEditor=function(){var e=D()(k.a.mark(function e(t){var n,i,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._imageGroupComponentService.isComponentActivated(),i=this._imageGroupComponentService.getSelectedImage(),r=n?i.images[0].id:i.id,e.next=5,this._imageEditService.editImage({activeCompId:r,direct:t});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.editImage=function(){var e=D()(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.adjustImage=function(){var e=D()(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("adjust");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.cropImage=function(){var e=D()(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("crop");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.filterImage=function(){var e=D()(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("filter");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.editLocation=function(){var e=D()(k.a.mark(function e(){var t,n,i;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._imageGroupComponentService.getSelectedCompStore(),n=t.place,e.next=4,this._placeLayerService.editPlaces({isUpdateMode:!0,maxPlaceCount:1,initialPlaces:n?[n]:[]});case 4:(i=e.sent)&&this._imageGroupComponentService.updatePlace(t,i.places[0]);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(s.m),h()(me.prototype,"changeType",[m.preventOnComponentProcessing,m.history,g.d],Object.getOwnPropertyDescriptor(me.prototype,"changeType"),me.prototype),h()(me.prototype,"editGroupImage",[m.preventOnComponentProcessing,g.d],Object.getOwnPropertyDescriptor(me.prototype,"editGroupImage"),me.prototype),h()(me.prototype,"changeImage",[m.sentryCatch,m.preventOnComponentProcessing,ue,g.d],Object.getOwnPropertyDescriptor(me.prototype,"changeImage"),me.prototype),h()(me.prototype,"editImage",[m.sentryCatch,m.preventOnDocumentProcessing,pe,g.d],Object.getOwnPropertyDescriptor(me.prototype,"editImage"),me.prototype),h()(me.prototype,"adjustImage",[m.sentryCatch,m.preventOnDocumentProcessing,de,g.d],Object.getOwnPropertyDescriptor(me.prototype,"adjustImage"),me.prototype),h()(me.prototype,"cropImage",[m.sentryCatch,m.preventOnDocumentProcessing,he,g.d],Object.getOwnPropertyDescriptor(me.prototype,"cropImage"),me.prototype),h()(me.prototype,"filterImage",[m.sentryCatch,m.preventOnDocumentProcessing,ge,g.d],Object.getOwnPropertyDescriptor(me.prototype,"filterImage"),me.prototype),h()(me.prototype,"editLocation",[m.preventOnComponentProcessing,fe,g.d],Object.getOwnPropertyDescriptor(me.prototype,"editLocation"),me.prototype),me),We={"image-edit-right-label":{view:be.a,useCase:Be,styleName:"image-edit"},"image-edit":{view:Se.a,useCase:Be,styleName:"image-edit"},"image-adjust":{view:Ce.a,useCase:Be,styleName:"image-adjust"},"image-crop":{view:Ie.a,useCase:Be,styleName:"image-crop"},"image-filter":{view:Oe.a,useCase:Be,styleName:"image-filter"},"image-group-edit-right-label":{view:ke,useCase:Be,styleName:"image-group-edit"},"image-group-edit":{view:De,useCase:Be,styleName:"image-group-edit"},"image-group-type-change":{view:Re,useCase:Be,styleName:"image-group",propertyName:"layout"},"image-replacement":{view:Ne.a,useCase:Be,styleName:"image-replacement"},"image-location":{view:Me.a,useCase:Be,styleName:"image-location"}},Ue={propertyToolbar:{align:Object(_e.a)("align-group"),"caption-align":Object(_e.a)("caption-align-group"),"image-edit-right-label":We["image-edit-right-label"],"image-group-edit-right-label":We["image-group-edit-right-label"],"image-group-type-change":We["image-group-type-change"],"content-mode":Object(_e.a)("content-mode-group-fit-and-extend"),"separator-bar":Object(_e.a)("separator-bar")},contextToolbar:{"caption-bold":Object(_e.a)("caption-bold"),"special-letter":Object(_e.a)("special-letter"),"caption-link":Object(_e.a)("caption-link"),"caption-align":Object(_e.a)("caption-align"),"image-replacement":We["image-replacement"],"image-edit":We["image-edit"],"image-group-edit":We["image-group-edit"],"image-group-type-change":We["image-group-type-change"],"content-mode":Object(_e.a)("content-mode-group-fit-and-extend"),delete:Object(_e.a)("delete"),"separator-bar":Object(_e.a)("separator-bar"),translation:Object(_e.a)("translation"),"image-filter":We["image-filter"],"image-adjust":We["image-adjust"],"image-location":We["image-location"],"additional-info":Object(_e.a)("additional-info")}},Fe=n(99),ze=Object(_e.b)(function(e){var t=e.selectedComponents,n=e.selectionInfoStore,i=[],r=Object(L.a)(t),o=n.start.unitId===r.id,a=Ve(r,n),s=!!a,c=r.isCaptionFocused(),l=r.images,u=l.every(Ge),p=l.some(He),d=Ge(a),h=He(a),g={captionFocused:c,groupSelected:o,activatedImage:a,imageSelected:s,imagesUploaded:u,editableIncluded:p,selectedUpladed:d,selectedEditable:h};return c?i=["caption-align","separator-bar","caption-bold","special-letter","caption-link","separator-bar","translation"]:o?(u&&(p&&(i.push("image-edit"),i.push("separator-bar")),i.push("image-group-edit")),i=[].concat(i,["separator-bar","image-group-type-change","separator-bar","content-mode","separator-bar","delete"])):s&&d&&(i.push("image-replacement"),h&&i.push("image-edit")),{buttons:i,payload:g}}),Ve=function(e,t){var n=t.start.unitId;return Object(Fe.a)(e.images,function(e){return e.id===n})},Ge=function(e){return void 0===e&&(e={}),e.isUploaded},He=function(e){return void 0===e&&(e={}),e.editable},qe={propertyToolbar:function(e){var t=e.selectedComponents,n=[],i=Object(L.a)(t).images.some(He);return t[0].isCaptionFocused()?n.push("caption-align"):n.push("align"),i&&n.push("separator-bar","image-edit-right-label"),n.push("separator-bar","image-group-edit-right-label","separator-bar","image-group-type-change","separator-bar","content-mode"),n},contextToolbar:ze},Je=function(e){function t(){return e.call(this,{buttonSetMap:Ue,buttonResolver:qe})||this}return p()(t,e),t}(s.l),Ke=s.q.extend({name:"ImageGroupComponent",view:ye,useCase:A,service:ve,store:j.a,toolbar:Je});t.a=Ke},156:function(e,t,n){"use strict";var i,r,o,a,s=n(51),c=n(55),l=n.n(c),u=n(0),p=n.n(u),d=n(50),h=n.n(d),g=n(52),f=n(49),m=n(376),y=n(86),v=n(87),_=n(450),b=n(719),S=n(192),C=n(444),I=n(12),O=n.n(I),T=n(18),L=n.n(T),E=(i=Object(g.history)({sync:!1}),r=Object(g.history)({sync:!1}),o=function(e){function t(){var t;t=e.call(this)||this;var n=s.W.get("configAgent");return t._maxLength=n.get("plugins.componentSettings.image.config.caption.maxLength"),t._imageEditService=s.W.get("imageEditService"),t._imageUploadService=s.W.get("imageUploadService"),t._imageComponentService=s.W.get("imageComponentService"),t._panoramaImageService=s.W.get("panoramaImageService"),t._imageLocationEditLayerService=s.W.get("imageLocationEditLayerService"),t._alertLayerService=s.W.get("alertLayerService"),t._propertyChangeService=s.W.get("propertyChangeService"),t._toastLayerService=s.W.get("toastLayerService"),t._libraryPanelLayoutService=s.W.get("libraryPanelLayoutService")||{updateMediaList:function(){}},t._propertyToolbarLayoutService=s.W.get("propertyToolbarLayoutService"),t._imageBehavior=s.W.get("imageBehavior"),t._i18n=s.W.get("i18n"),t._placeLayerService=s.W.get("placeLayerService"),t}p()(t,e);var n=t.prototype;return n.togglePanoramaDisplay=function(e){var t=this;this._imageComponentService.isTaggedImage(e)?this._alertLayerService.open({type:"confirm",title:this._i18n("imageTag:confirm_added_tag_title"),description:this._i18n("imageTag:confirm_convert_to_vr360_description"),onClickConfirm:function(){return t._confirmPanoramaDisplay(e)},onClickCancel:function(){return t._alertLayerService.close()}}):this._panoramaImageService.togglePanoramaDisplay(e)},n._confirmPanoramaDisplay=function(e){this._imageComponentService.removeMediaTag(e),this._panoramaImageService.togglePanoramaDisplay(e)},n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId;s.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n}),this._libraryPanelLayoutService.updateMediaList()},n.changeImage=function(){var e=L()(O.a.mark(function e(t){var n,i=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog();case 2:return n=e.sent,e.next=5,this._imageBehavior.changeImage({targetStore:t,selectedImages:n}).then(function(e){var t=e.invalidImageErrors;return i._imageBehavior.cleanUpImage(t),e});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.editImage=function(){var e=L()(O.a.mark(function e(t){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageEditService.editImage({activeCompId:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.openLocationEditLayer=function(e,t){var n=this;this._imageLocationEditLayerService.open({onClickRemove:function(){n._imageComponentService.updatePlace(e,null)},onClickChange:function(){var i=L()(O.a.mark(function i(){var r;return O.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n._placeLayerService.editPlaces({isUpdateMode:!0,maxPlaceCount:1,initialPlaces:[t]});case 2:(r=i.sent)&&n._imageComponentService.updatePlace(e,r.places[0]);case 4:case"end":return i.stop()}},i)}));return function(){return i.apply(this,arguments)}}()})},n.attachLocation=function(){var e=L()(O.a.mark(function e(t,n,i){var r,o;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={isUpdateMode:!0,maxPlaceCount:1},n?r.initialPlaces=[n]:i&&(r.initialPlaces=[{latlng:{latitude:i.latitude,longitude:i.longitude}}]),e.next=4,this._placeLayerService.editPlaces(r);case 4:o=e.sent,this._imageComponentService.updatePlace(t,o.places[0]);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}(),n.exceedTextMaxLength=function(){this._toastLayerService.warningMessage(this._i18n("imageComponent:exceed_text_max_length",{maxLength:this._maxLength}))},n.handleMouseUpOnResizer=function(e,t,n){this._imageComponentService.updateImageSize(e.id,t,n)},n.completeImageLoad=function(e){this._imageComponentService.completeImageLoad(e)},n.changeLink=function(e){var t=e.value.trim();if(this._propertyChangeService.isValidLink(t))this._imageComponentService.removeMediaTag(),this._propertyChangeService.changeLink({type:"url",value:t});else{var n=this._i18n("textComponent:is_valid_link");this._toastLayerService.warningMessage(n)}},n.toggleButton=function(e){var t=this,n=e.id;e.showConfirm&&"image-link"===n&&this._imageComponentService.isTaggedImage()?this._alertLayerService.open({type:"confirm",title:this._i18n("imageTag:confirm_added_tag_title"),description:this._i18n("imageTag:confirm_convert_to_link_description"),onClickConfirm:function(){return t._confirmToggle(n)},onClickCancel:function(){return t._alertLayerService.close()}}):this._propertyToolbarLayoutService.toggleButton(n)},n._confirmToggle=function(e){this._propertyToolbarLayoutService.toggleButton(e)},t}(Object(s.Y)(s.c)),h()(o.prototype,"togglePanoramaDisplay",[g.history,f.d],Object.getOwnPropertyDescriptor(o.prototype,"togglePanoramaDisplay"),o.prototype),h()(o.prototype,"_confirmPanoramaDisplay",[g.history,f.d],Object.getOwnPropertyDescriptor(o.prototype,"_confirmPanoramaDisplay"),o.prototype),h()(o.prototype,"setRepresentativeImage",[g.history,f.d],Object.getOwnPropertyDescriptor(o.prototype,"setRepresentativeImage"),o.prototype),h()(o.prototype,"changeImage",[i,f.d],Object.getOwnPropertyDescriptor(o.prototype,"changeImage"),o.prototype),h()(o.prototype,"editImage",[g.preventOnDocumentProcessing,r,f.d],Object.getOwnPropertyDescriptor(o.prototype,"editImage"),o.prototype),h()(o.prototype,"openLocationEditLayer",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"openLocationEditLayer"),o.prototype),h()(o.prototype,"attachLocation",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"attachLocation"),o.prototype),h()(o.prototype,"exceedTextMaxLength",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"exceedTextMaxLength"),o.prototype),h()(o.prototype,"handleMouseUpOnResizer",[g.history,f.d],Object.getOwnPropertyDescriptor(o.prototype,"handleMouseUpOnResizer"),o.prototype),h()(o.prototype,"completeImageLoad",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"completeImageLoad"),o.prototype),h()(o.prototype,"changeLink",[g.preventOnComponentProcessing,g.history,f.d],Object.getOwnPropertyDescriptor(o.prototype,"changeLink"),o.prototype),h()(o.prototype,"toggleButton",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"toggleButton"),o.prototype),o),P=(a=function(e){function t(t){var n;return(n=e.call(this,t)||this)._editorStatusStore=s.W.get("editorStatusStore"),n._deviceType=s.W.get("configAgent").get("productEnv.deviceType"),n}p()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.showLocationButton,a=t.layout||S.b.DEFAULT,s=t.contentMode||S.a.NORMAL,c={showLocationButton:o};return f.b.createElement(y.a,{id:i,ctype:r,layout:a,contentMode:s,i18n:n},f.b.createElement(v.a,{compId:i,compStore:t},f.b.createElement(_.a,l()({},this.props,{useMediaTag:!0,onDblClickImage:this._handleDblClickImage,onClickPanoramaDisplay:this._handleToggleVR360Display,onClickRepresentative:this._handleClickRepresentative,onClickLocation:this._handleClickLocation,onCompleteImage:this._handleCompleteImage,additionalOption:c,onLimitTextLength:this._handleLimitTextLength,onMoveToNext:this._handleMoveToNext,onMoveToPrev:this._handleMoveToPrev,resizable:this._isResizable()}),this.props.children)))},n._isResizable=function(){var e=this.props.store,t=e.displayFormat,n=e.phase;return[s.D.NORMAL,s.D.ANIMATED].includes(t)&&this._deviceType!==s.t.MOBILE&&this._editorStatusStore.viewMode===s.U.VIEW_MODE_PC&&n===s.O.DONE},n._handleDblClickImage=function(){var e=this.props,t=e.useCase,n=e.store,i=n.id;n.editable?t.editImage(i):t.changeImage(n)},n._handleToggleVR360Display=function(){var e=this.props,t=e.useCase,n=e.store;t.togglePanoramaDisplay(n.id)},n._handleClickRepresentative=function(e){var t=this.props,n=t.store;t.useCase.setRepresentativeImage({compId:n.id,unitId:n.id}),b.a.log(e.nativeEvent,"imect.rep")},n._handleClickLocation=function(){var e=this.props,t=e.store;e.useCase.openLocationEditLayer(t.id,t.place)},n._handleCompleteImage=function(){var e=this.props,t=e.store,n=e.useCase;n.completeImageLoad(t.id),n.repaintCursor()},n._handleLimitTextLength=function(){this.props.useCase.exceedTextMaxLength()},n._handleMoveToPrev=function(){this.props.useCase.moveToPrev(this.props.store.id)},n._handleMoveToNext=function(){this.props.useCase.moveToNext(this.props.store.id)},t}(f.b.Component),h()(a.prototype,"_handleDblClickImage",[g.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_handleDblClickImage"),a.prototype),h()(a.prototype,"_handleToggleVR360Display",[g.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_handleToggleVR360Display"),a.prototype),h()(a.prototype,"_handleClickRepresentative",[g.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_handleClickRepresentative"),a.prototype),h()(a.prototype,"_handleClickLocation",[g.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_handleClickLocation"),a.prototype),h()(a.prototype,"_handleCompleteImage",[g.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_handleCompleteImage"),a.prototype),h()(a.prototype,"_handleLimitTextLength",[g.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_handleLimitTextLength"),a.prototype),h()(a.prototype,"_handleMoveToPrev",[g.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_handleMoveToPrev"),a.prototype),h()(a.prototype,"_handleMoveToNext",[g.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_handleMoveToNext"),a.prototype),a);P.defaultProps={i18n:function(e){return e}},P.propTypes={shouldForceRefresh:f.a.bool,store:f.a.instanceOf(C.a).isRequired,useCase:f.a.instanceOf(E).isRequired,i18n:f.a.func,children:f.a.oneOfType([f.a.element,f.a.array])};var w,k=Object(m.b)(P),x=n(56),D=n.n(x),A=n(78),j=n(119),R=n(75),N=n(66),M=n(16),B=n(1286),W="blob",U="data-uri",F=function(){function e(e){this._source=e,this._sourceType=this._resolveSourceType(e),this._imageInfo=this._getBaseInfoFrom(e),null===this._sourceType&&console.debug("[DEBUG] 처리할 수 없는 데이터 형식입니다.")}var t=e.prototype;return t._getBaseInfoFrom=function(e){var t={};if(this._sourceType===W){var n=e.type,i=Object(B.a)(e.name,"match",/.(heic|heif)/);!e.type&&i&&(n="image/"+i[1]);var r=Object(R.a)(n.split("/"));t={name:e.name,type:n,ext:r}}else if(this._sourceType===U){var o=e.match(/data:(.+);/),a=Object(R.a)(o),s=Object(R.a)(a.split("/"));t={name:this._generateNewImageName()+"."+s,type:a,ext:s}}return t},t._generateNewImageName=function(){return"SE_IMAGE_"+((new Date).getTime()+"_"+Math.ceil(1e4*Math.random()))},t._resolveSourceType=function(e){var t=Object(M.a)(e,"name","");return Object(M.a)(e,"type")||Object(B.a)(t,"match",/.heic|.heif/)?W:Object(B.a)(e,"match",/^data:/)?U:null},t.getInfo=function(){var e=L()(O.a.mark(function e(){var t,n,i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._source,n=this._resolveImageSource(t),e.next=5,this._getImageInfo(n);case 5:return i=e.sent,URL.revokeObjectURL(n),e.abrupt("return",D()({},this._imageInfo,{width:i.width,height:i.height}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),t._resolveImageSource=function(e){var t=e;return this._sourceType===U&&(t=this._dataURItoBlob(e)),URL.createObjectURL(t)},t._getImageInfo=function(e){var t=this;return new Promise(function(n,i){var r=new Image;r.onload=function(e){var i=e.currentTarget;n({width:i.width,height:i.height}),t._fixForIE10GarbageCollectingError(i)},r.onerror=i,r.src=e})},t._fixForIE10GarbageCollectingError=function(e){e.style.display="none",document.body.appendChild(e),document.body.removeChild(e)},t._dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([i],{type:n})},e}(),z=n(718),V=n(557),G=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=s.W.get("configAgent"),t._selectionInfoStore=s.W.get("selectionInfoStore"),t._componentListStore=s.W.get("componentListStore"),t._componentFactory=s.W.get("componentFactory"),t._maxImageUploadSize=t._configAgent.get("infraConfig.image.maxImageUploadSize")||Number.MAX_SAFE_INTEGER,t._maximumImagesPerUpload=t._configAgent.get("infraConfig.image.maximumImagesPerUpload")||Number.MAX_SAFE_INTEGER,t._documentWidth=t._configAgent.get("productConfig.documentWidth"),t}p()(t,e);var n=t.prototype;return n.validateImageFiles=function(){var e=L()(O.a.mark(function e(t){var n,i,r=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=1,e.next=3,Promise.all(Object(A.a)(t,function(){var e=L()(O.a.mark(function e(t){var i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>r._maximumImagesPerUpload)){e.next=4;break}return e.abrupt("return",{isValid:!1,fileInfo:null,file:t,code:"LIMITATION_BY_SESSION_COUNT"});case 4:if(!(t.size>r._maxImageUploadSize)){e.next=8;break}return e.abrupt("return",{isValid:!1,fileInfo:null,file:t,code:"LIMITATION_BY_SESSION_SIZE"});case 8:if(0!==t.size){e.next=12;break}return e.abrupt("return",{isValid:!1,fileInfo:null,file:t,code:"INVALID_PARAMETER"});case 12:n++;case 13:return e.next=15,r._getSourceInfoFromFile(t);case 15:if(!(i=e.sent)){e.next=20;break}return e.abrupt("return",{isValid:!0,fileInfo:i,file:t});case 20:return e.abrupt("return",{isValid:!1,fileInfo:null,file:t});case 21:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.validateUrl=function(){var e=L()(O.a.mark(function e(t,n){var i,r=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object(A.a)(t,function(){var e=L()(O.a.mark(function e(t){var i,o,a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.url,o=t.downloaderType,e.next=3,r._getSourceInfoFromUrl(i,n);case 3:if(!(a=e.sent)){e.next=8;break}return e.abrupt("return",{isValid:!0,fileInfo:a,downloaderType:o,file:{}});case 8:return e.abrupt("return",{isValid:!1,fileInfo:null,downloaderType:o,file:{}});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.createFileUploadData=function(){var e=L()(O.a.mark(function e(t){var n,i,r,o,a=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],i=[],r=[],e.next=5,this.validateImageFiles(t);case 5:return e.sent.forEach(function(e){var t,o=e.isValid,s=e.file,c=e.fileInfo,l=e.code;if(o)t=a._createShellWithImage(c),n.push({id:t.id,file:s});else{var u={id:(t=a._createDefaultRatioShell()).id,file:s};l&&(u.code=l),i.push(u)}r.push(t)}),o=this._getUploadTarget(n),e.abrupt("return",{imageCompStores:r,uploadTarget:o,invalidImages:i});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._getUploadTarget=function(e){var t=[],n=[];return e.forEach(function(e){t.push(e.id),n.push(e.file)}),{ids:t,files:n}},n._createDefaultRatioShell=function(e){var t=this._documentWidth;return this._componentFactory.createComponentWithCompData({width:t,height:t*(9/16),phase:s.O.PROCESSING,ctype:"image",internalResource:!0,origin:e||{ctype:"imageOrigin",srcFrom:"local"}})},n._createShellWithImage=function(e){return this._componentFactory.createComponentWithCompData({name:e.name,alt:e.name,height:e.height,width:e.width,phase:s.O.PROCESSING,ctype:"image",internalResource:!0,origin:e.origin||{ctype:"imageOrigin",srcFrom:"local"}})},n.createShellsFromUrl=function(){var e=L()(O.a.mark(function e(t,n){var i,r,o,a=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validateUrl(t);case 2:return i=e.sent,r=Object(A.a)(i,function(e){var t=e.fileInfo;if(t)return a._createShellWithImage(t);var i={ctype:"imageOrigin",srcFrom:n};return a._createDefaultRatioShell(i)}),o=this._getCompIdList(r),e.abrupt("return",{imageCompStores:r,ids:o});case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.createShellsFromCompData=function(e){var t=this,n=Object(A.a)(e,function(e){var n=D()({},e,{src:"",phase:s.O.PROCESSING});return t._componentFactory.createComponentWithCompData(n)});return{imageCompStores:n,ids:this._getCompIdList(n)}},n._getCompIdList=function(e){return e.map(function(e){return e.id})},n._getUpdateShellComp=function(){var e=L()(O.a.mark(function e(t){var n;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!z.a.isFile(t)&&!z.a.isBlob(t)){e.next=8;break}return e.next=4,this._getLocalFileInfo(t);case 4:return n=e.sent,e.abrupt("return",this._adjustImageInfo(n));case 8:if(!V.a.isValidURL(t)&&!V.a.isDataURIImage(t)){e.next=13;break}return e.next=11,this._getFileInfoFromUrl(t);case 11:return n=e.sent,e.abrupt("return",n);case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",e.t0);case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t){return e.apply(this,arguments)}}(),n._getSourceInfoFromFile=function(){var e=L()(O.a.mark(function e(t){var n,i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(z.a.isFile(t)||z.a.isBlob(t)||V.a.isDataURIImage(t))){e.next=11;break}return e.next=3,new F(t).getInfo();case 3:if(!(n=e.sent)){e.next=10;break}return(i=this._adjustImageInfo(n)).origin=t.origin,e.abrupt("return",i);case 10:return e.abrupt("return",D()({},t,{width:this._documentWidth,height:this._documentWidth/4*3}));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._getSourceInfoFromUrl=function(){var e=L()(O.a.mark(function e(t,n){var i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!V.a.isValidURL(t)&&!V.a.isDataURIImage(t)){e.next=7;break}return e.next=4,this._getFileInfoFromUrl(t);case 4:return i=e.sent,n&&(i.origin={ctype:"imageOrigin",srcFrom:n}),e.abrupt("return",i);case 7:return e.abrupt("return",null);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t,n){return e.apply(this,arguments)}}(),n._getFileInfoFromUrl=function(e){return new Promise(function(t,n){var i=new Image;i.onload=function(e){var n=e.currentTarget;t({width:n.width,height:n.height,originalWidth:n.width,originalHeight:n.height})},i.onerror=function(){n(e)},i.src=e})},n._getLocalFileInfo=function(){var e=L()(O.a.mark(function e(t){var n,i;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new F(t),e.next=3,n.getInfo();case 3:return i=e.sent,n=null,e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n._adjustImageInfo=function(e){return{name:e.name,width:e.width,height:e.height}},n._getAllImageComponents=function(){return this._componentListStore.getComponentsByCtype("image")},n.checkLimitedSize=function(e){var t=e.value,n=t.width,i=t.height,r=!1,o=!1,a=!1;return(t.isApplyAllChecked?this._getAllImageComponents():this.getSelectedImageCompList()).forEach(function(e){!r&&e.isLonggerThanDocumentWidth(n,i)?r=!0:!a&&e.isSmallerThanMinimumWidth(n,i)&&(a=!0),!o&&e.isSmallerThanMinimumHeight(n,i)&&(o=!0)}),{hasBiggerThanContentWidth:r,hasSmallerThanMinHeight:o,hasSmallerThanMinWidth:a}},n.getSelectedImageCompList=function(){var e=["image","wrappingParagraph"],t=this._selectionInfoStore.toValidJSON().compIdMap,n=Object.keys(t);return this._componentListStore.compList.filter(function(e){return n.includes(e.id)}).filter(function(t){return e.includes(t.ctype)}).map(function(e){return"wrappingParagraph"===e.ctype?e.wrappedSection:e})},n.getSelectedSingleImageCompList=function(){var e=["image"],t=this._selectionInfoStore.toValidJSON().compIdMap,n=Object.keys(t);return this._componentListStore.compList.filter(function(e){return n.includes(e.id)}).filter(function(t){return e.includes(t.ctype)}).map(function(e){return e})},n.getFirstSelectedImageComp=function(){return Object(j.a)(this.getSelectedImageCompList())},n._getFirstTaggableSelectedImageComp=function(){return Object(j.a)(this._getTaggableSelectedImageComps())},n._getTaggableSelectedImageComps=function(){var e=["image","wrappingParagraph","imageStrip"],t=this._selectionInfoStore.toValidJSON(),n=t.compIdMap,i=t.start,r=t.end,o=Object.keys(n);return this._componentListStore.compList.filter(function(e){return o.includes(e.id)}).filter(function(t){return e.includes(t.ctype)}).map(function(e){if("wrappingParagraph"===e.ctype){var t=e.wrappedSection;return"image"===t.ctype?t:null}return"imageStrip"===e.ctype?e.images.find(function(e){return i.unitId===e.id||r.unitId===e.id}):e}).filter(Boolean)},n.updateShellImageCompStore=function(e,t){var n=this.getComponentStore(e);n&&this.changeImage(n,t)},n.updateImageSize=function(e,t,n){this.getComponentStore(e).updateImageSize(t,n)},n.changeImage=function(e,t){var n=this._configAgent.get("infraInfo.photoInfra.imageHost"),i=t.animatedCnt>1,r=t.path,o=t.fileName,a=t.fileSize,c=t.width,l=t.height,u=t.domain||e.domain||n,p=e.contentMode,d={alt:o,height:parseInt(l,10),width:parseInt(c,10),originalWidth:parseInt(c,10),originalHeight:parseInt(l,10),path:V.a.getEncodeUrl(r+"/"+o),fileSize:parseInt(a,10),format:i?s.D.ANIMATED:s.D.NORMAL,fileName:o,internalResource:!0,phase:s.O.DONE,domain:u};t.displayFormat&&!i&&(d.displayFormat=t.displayFormat),e.setState(d),e.changeContentMode(p)},n.changeImageByState=function(e,t){e.setState(t)},n.updatePlace=function(e,t){this.getComponentStore(e).updatePlace(t)},n.completeImageLoad=function(e){this.getComponentStore(e).completeImageLoad()},n.convertImageToNode=function(){var e=this.getSelectedSingleImageCompList();this._toTextCompFrom(e);var t=this._selectionInfoStore.toValidJSON(),n=this._componentListStore.refineComponentList(t);this._selectionInfoStore.setRange(n)},n._toTextCompFrom=function(e){var t=this,n=[];e.forEach(function(e){var i=t._createTextCompFrom(e);n.push(i.getEndPoint()),t._componentListStore.replace(e,i),t._mergeFrom(i)});var i=Object(R.a)(n);this._selectionInfoStore.setRange({start:i,end:i})},n._createTextCompFrom=function(e){return this._componentFactory.createComponentWithCompData({ctype:"text",value:[{ctype:"paragraph",style:{align:e.align},nodes:[{ctype:"imageNode",id:e.id,src:e.src,internalResource:e.internalResource,represent:e.represent,path:e.path,domain:e.domain,width:e.width,height:e.height,fileSize:e.fileSize,fileName:e.fileName}]}]})},n._isEqualParagraphAlign=function(e,t){var n=e.getLastParagraph().computedStyle,i=t.getFirstParagraph().computedStyle;return n.align===i.align},n._mergeFrom=function(e){var t=this._componentListStore.getNextComponent(e);t&&"text"===t.attributes.insertion&&this._isEqualParagraphAlign(e,t)&&(e.append([t]),this._componentListStore.deleteComponentById(t.id))},n.activateUnit=function(e){var t=e.compId,n=e.unitId;this._selectionInfoStore.setRange({start:{compId:t,unitId:n,paraId:null,nodeId:null,offset:0},end:{compId:t,unitId:n,paraId:null,nodeId:null,offset:1}})},n.isLinkedImage=function(e){var t=this.getComponentStore(e);return!Object(N.a)(t.link)},n.removeLink=function(e){this.getComponentStore(e).removeImageLink()},n.isTaggedImage=function(e){var t=e?this.getComponentStore(e):this._getFirstTaggableSelectedImageComp();return!(![s.D.NORMAL,s.D.ANIMATED].includes(t.displayFormat)||Object(N.a)(t.mediaTags))},n.getMediaTagData=function(e){var t=this.getComponentStore(e);return{mediaTags:t.getMediaTagData(),src:t.src,width:t.width,height:t.height}},n.updateMediaTag=function(e,t){this.getComponentStore(e).updateMediaTag(t)},n.removeMediaTag=function(e){var t=e?[this.getComponentStore(e)]:this._getTaggableSelectedImageComps();t.length&&t.forEach(function(e){return e.removeMediaTag()})},t}(s.a),H=n(64),q=n(17),J=n.n(q),K=n(555),X=n(210),Y=n(59),Q=n(430),Z=["type","value","title","label","labelVisible","selectIfHasValue","onValidateValue","custom","logId"],$={"image-link":{view:(w=function(e){function t(){return e.apply(this,arguments)||this}p()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?Y.b.CUSTOM_LAYER:t,i=e.value,r=void 0===i?"":i,o=e.title,a=void 0===o?{inactive:"link:title_inactive",active:"link:title_active"}:o,s=e.label,c=void 0===s?"link:label":s,u=e.labelVisible,p=void 0!==u&&u,d=e.selectIfHasValue,h=void 0===d||d,g=e.onValidateValue,m=void 0===g?K.a.hasValue:g,y=e.custom,v=void 0===y?{CustomLayer:Q.a,customProps:{placeholder:"link:custom_placeholder",applyLabel:"link:apply_label"}}:y,_=e.logId,b=void 0===_?"urllink":_,S=J()(e,Z);return f.b.createElement(X.a,l()({},S,{type:n,title:a,label:c,labelVisible:p,selectIfHasValue:h,onValidateValue:m,logId:b,custom:v,onClick:this._handleClick,onChange:this._handleChange,value:r||""}))},n._handleClick=function(e){this.props.useCase.toggleButton(e)},n._handleChange=function(e){this.props.useCase.changeLink(e),this.props.onClickSelector(e)},t}(f.b.Component),h()(w.prototype,"_handleClick",[g.autobind],Object.getOwnPropertyDescriptor(w.prototype,"_handleClick"),w.prototype),h()(w.prototype,"_handleChange",[g.autobind],Object.getOwnPropertyDescriptor(w.prototype,"_handleChange"),w.prototype),w),useCase:E,propertyName:"link.value",styleName:"link"}},ee={propertyToolbar:{"image-replacement":Object(H.a)("image-replacement"),"image-edit-right-label":Object(H.a)("image-edit-right-label"),"image-resizing":Object(H.a)("image-resizing"),align:Object(H.a)("align-group"),"caption-align":Object(H.a)("caption-align-group"),"content-mode":Object(H.a)("content-mode-group"),"content-mode-without-default":Object(H.a)("content-mode-group-without-default"),"content-mode-fit-and-extend":Object(H.a)("content-mode-group-fit-and-extend"),"content-mode-without-pagefull":Object(H.a)("content-mode-group-without-pagefull"),"wrapping-layout":Object(H.a)("wrapping-layout-drop-down"),"image-link":$["image-link"],"inline-image":Object(H.a)("inline-image"),"separator-bar":Object(H.a)("separator-bar"),"image-tag":Object(H.a)("image-tag")},contextToolbar:{"caption-bold":Object(H.a)("caption-bold"),"special-letter":Object(H.a)("special-letter"),"caption-link":Object(H.a)("caption-link"),"caption-align":Object(H.a)("caption-align"),"cycle-align":Object(H.a)("cycle-align"),"image-edit":Object(H.a)("image-edit"),"content-mode":Object(H.a)("content-mode-group"),"content-mode-without-default":Object(H.a)("content-mode-group-without-default"),"content-mode-fit-and-extend":Object(H.a)("content-mode-group-fit-and-extend"),"content-mode-without-pagefull":Object(H.a)("content-mode-group-without-pagefull"),delete:Object(H.a)("delete"),"separator-bar":Object(H.a)("separator-bar"),"image-tag":Object(H.a)("image-tag"),translation:Object(H.a)("translation"),"image-crop":Object(H.a)("image-crop"),"image-filter":Object(H.a)("image-filter"),"image-adjust":Object(H.a)("image-adjust"),"image-location":Object(H.a)("image-location"),"additional-info":Object(H.a)("additional-info")}},te=n(113),ne=n(1283);function ie(e){return["vr360","panorama"].includes(e.displayFormat)}function re(e){return e.editable}var oe={propertyToolbar:function(e){var t=e.selectedComponents,n=[],i=t.length,r=Object(te.a)(t,function(e){return["normal","animated"].includes(e.displayFormat)}),o=Object(te.a)(t,ie),a=Object(ne.a)(t,re),s=Object(te.a)(t,function(e){return e.imageTagEnabled});return t[0].isCaptionFocused()?n.push("caption-align"):n.push("align"),1===i&&n.push("separator-bar","image-replacement"),o?(n.push("separator-bar","content-mode-fit-and-extend"),n):(a&&n.push("separator-bar","image-edit-right-label"),r?(n.push("separator-bar","image-resizing"),n.push("separator-bar","content-mode-without-pagefull"),1===i?n.push("separator-bar","wrapping-layout"):n.push("separator-bar"),n.push("inline-image"),1===i&&s?n.push("separator-bar","image-tag","image-link"):n.push("separator-bar","image-link")):n.push("separator-bar","content-mode-fit-and-extend"),n)},contextToolbar:Object(H.b)(function(e){var t=e.selectedComponents,n=[],i=(void 0===t?[]:t)[0],r=i.contentMode,o=i.imageTagEnabled,a=ie(i),s=re(i),c=i.isCaptionFocused();return c?n=["caption-align","separator-bar","caption-bold","special-letter","caption-link","separator-bar","translation"]:(r===S.a.NORMAL&&n.push("cycle-align","separator-bar"),s&&n.push("image-edit","separator-bar"),a?n.push("content-mode-fit-and-extend"):(n.push("content-mode-without-pagefull"),o&&n.push("separator-bar","image-tag")),n.push("separator-bar","delete")),{buttons:n,payload:{captionFocused:c,panoramaType:a,editableImage:s,imageTagEnabled:o}}})},ae=function(e){function t(){return e.call(this,{buttonSetMap:ee,buttonResolver:oe})||this}return p()(t,e),t}(s.l),se=s.q.extend({name:"ImageComponent",view:k,useCase:E,service:G,store:C.a,toolbar:ae});t.a=se},164:function(e,t,n){"use strict";var i,r=n(50),o=n.n(r),a=n(51),s=n(49),c=n(52),l=(i=function(){function e(){this._chatLayerService=a.W.get("chatLayerService"),this._chatComponentService=a.W.get("chatComponentService"),this._alertLayerService=a.W.get("alertLayerService"),this._toastLayerService=a.W.get("toastLayerService"),this._documentService=a.W.get("documentService"),this._storageService=a.W.get("storageService"),this._editingService=a.W.get("editingService"),this._i18n=a.W.get("i18n")}var t=e.prototype;return t.close=function(){this._chatLayerService.close()},t.addMessage=function(e){this._chatLayerService.addMessage(e)},t.addWriter=function(){this._chatLayerService.addWriter()},t.toggleDragging=function(e){this._chatLayerService.toggleDragging(e)},t.editMessage=function(e){this._chatLayerService.editMessage(e)},t.editWriter=function(e){this._chatLayerService.editWriter(e)},t.completeMessageEditing=function(){this._chatLayerService.completeMessageEditing()},t.completeWriterEditing=function(e,t){this._chatLayerService.completeWriterEditing(e,t)},t.deleteMessage=function(e){this._chatLayerService.deleteMessage(e)},t.changeOrder=function(e,t){this._chatLayerService.changeOrder(e,t)},t.changeEditingText=function(e){this._chatLayerService.changeEditingText(e)},t.selectWriter=function(e){this._chatLayerService.selectWriter(e)},t.completeWritersEditing=function(){this._chatLayerService.completeWritersEditing()},t.complete=function(e){var t=e.writers.map(function(e){return e.name});this._setLastWriters(t);var n=this._chatLayerService.refineToCompData(e);if(this._chatLayerService.isUpdateMode())this._chatComponentService.updateComponent(n);else{var i=this._chatComponentService.createComponent(n);this._editingService.insert({sourceComponents:[i]})}this._chatLayerService.close()},t.showWriterPopup=function(){this._chatLayerService.showWriterPopup()},t.hideWriterPopup=function(){this._chatLayerService.hideWriterPopup()},t.checkDeleteWriter=function(e,t){var n=this;this._alertLayerService.open({type:"confirm",title:this._i18n("chatLayer:confirm_to_delete_message",{name:t}),dimColor:"black",className:"se-popup-writer-delete-alert",onClickConfirm:function(){return n._chatLayerService.deleteWriter(e)},onClickCancel:function(){return n._alertLayerService.close()}})},t.showAlert=function(e){var t=this;this._alertLayerService.open({type:"alert",title:e,dimColor:"black",className:"se-popup-message-count-exceed-alert",onClickConfirm:function(){return t._alertLayerService.close()}})},t._setLastWriters=function(e){var t=this._documentService.getDocumentId();this._storageService.setStorageData("chat-layer-last-writers",{docId:t,writers:e})},e}(),o()(i.prototype,"close",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),o()(i.prototype,"addMessage",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"addMessage"),i.prototype),o()(i.prototype,"addWriter",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"addWriter"),i.prototype),o()(i.prototype,"toggleDragging",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleDragging"),i.prototype),o()(i.prototype,"editMessage",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"editMessage"),i.prototype),o()(i.prototype,"editWriter",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"editWriter"),i.prototype),o()(i.prototype,"completeMessageEditing",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"completeMessageEditing"),i.prototype),o()(i.prototype,"completeWriterEditing",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"completeWriterEditing"),i.prototype),o()(i.prototype,"deleteMessage",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"deleteMessage"),i.prototype),o()(i.prototype,"changeOrder",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeOrder"),i.prototype),o()(i.prototype,"changeEditingText",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeEditingText"),i.prototype),o()(i.prototype,"selectWriter",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"selectWriter"),i.prototype),o()(i.prototype,"completeWritersEditing",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"completeWritersEditing"),i.prototype),o()(i.prototype,"complete",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"complete"),i.prototype),o()(i.prototype,"showWriterPopup",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"showWriterPopup"),i.prototype),o()(i.prototype,"hideWriterPopup",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"hideWriterPopup"),i.prototype),i);t.a=l},165:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={HORIZONTAL:"horizontal",VERTICAL:"vertical"},r={LEFT_TO_RIGHT:"ltr",RIGHT_TO_LEFT:"rtl"}},166:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(119),h=n(51),g=n(49),f=n(52),m=n(213),y=(i=function(e){function t(){var t;return(t=e.call(this)||this)._imageGroupOrderLayerService=h.W.get("imageGroupOrderLayerService"),t._imageGroupService=h.W.get("imageGroupComponentService"),t._editingService=h.W.get("editingService"),t._imageUploadService=h.W.get("imageUploadService"),t._dragAndDropService=h.W.get("dragAndDropService"),t._canvasLayoutService=h.W.get("canvasLayoutService"),t._imageBehavior=h.W.get("imageBehavior"),t._imageEditService=h.W.get("imageEditService"),t._dragGhost=h.W.get("dragGhost"),t._componentFactory=h.W.get("componentFactory"),t}l()(t,e);var n=t.prototype;return n.close=function(){this._imageGroupOrderLayerService.close()},n.reorderImages=function(e){this._imageGroupOrderLayerService.reorderImages(e)},n.confirm=function(e,t){var n=this;if(e===m.b.INDIVIDUAL){this._imageGroupService.selectImageGroupCompAsSingle(t);var i=this._imageGroupOrderLayerService.getUnitsAsImageCompStores();setTimeout(function(){n._convertToIndividualImages(i,t)},0)}else this._updateImageGroup(e,t);this._imageGroupOrderLayerService.close()},n._updateImageGroup=function(e,t){var n={images:this._imageGroupOrderLayerService.getImages(),layout:e,compId:t};this._imageGroupService.insertData(n)},n._convertToIndividualImages=function(e,t){this._editingService.insert({sourceComponents:e}),this._editingService.eraseComponent(t)},n.changeLayout=function(e){this._imageGroupOrderLayerService.changeLayout(e)},n.replaceImage=function(){var e=s()(o.a.mark(function e(t){var n,i,r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._imageGroupOrderLayerService.getCurrentOrderLayerStore(),e.next=3,this._imageUploadService.openFileDialog();case 3:return i=e.sent,r=this._imageGroupOrderLayerService.getImages().find(function(e){return e.id===t}),a=this._cloneImage(r),this._imageGroupOrderLayerService.changeImageUnitToShell(t),e.next=9,this._changeImage(a,n,i);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._cloneImage=function(e){var t=e.toValidJSON();return this._componentFactory.createComponentWithCompData(t,{attributes:{cursor:"selectable-unit",selection:"selectable-unit",erasure:"query",drop:"object"}})},n._changeImage=function(e,t,n){var i=this;return this._imageBehavior.changeImage({targetStore:e,selectedImages:n}).then(function(t){var n=t.succeededImages;return n.length>0?i._imageGroupOrderLayerService.replaceImageFromData(n[0].response):i._imageGroupOrderLayerService.replaceImage(e),t})},n.editImage=function(e){var t=this,n=this._imageGroupOrderLayerService.getImages(),i=e||Object(d.a)(n).id;this._imageEditService.editImageGroupAtOrderLayer({activeCompId:i,editableImages:n,callbacks:{onCompleteEdit:function(e){Object(g.h)(function(){t._imageGroupOrderLayerService.applyEditedImages(e)})}}})},n.deleteImage=function(e){this._imageGroupOrderLayerService.deleteImage(e)},n.dragStart=function(e,t,n){var i=t.toValidJSON();this._dragAndDropService.dragStart({event:e,items:[i],type:"groupLayer",useNativeGhost:n})},n.dragOver=function(e){this._dragGhost.updatePosition(e)},n.drop=function(){this._dragGhost.end(),this._dragAndDropService.reset(),this._canvasLayoutService.refreshVirtualEditable()},n.updateImageGroupRatio=function(e){this._imageGroupOrderLayerService.adjustImageGroupRatio(e.images)},n.updatePhase=function(e,t){this._imageGroupOrderLayerService.updatePhase(e,t)},n.updateImageSize=function(e,t,n){this._imageGroupOrderLayerService.updateImageSize(e,t,n)},t}(h.m),p()(i.prototype,"confirm",[f.preventOnDocumentProcessing,g.d],Object.getOwnPropertyDescriptor(i.prototype,"confirm"),i.prototype),p()(i.prototype,"_updateImageGroup",[f.history,g.d],Object.getOwnPropertyDescriptor(i.prototype,"_updateImageGroup"),i.prototype),p()(i.prototype,"_convertToIndividualImages",[f.history,g.d],Object.getOwnPropertyDescriptor(i.prototype,"_convertToIndividualImages"),i.prototype),p()(i.prototype,"_changeImage",[f.documentProcessing],Object.getOwnPropertyDescriptor(i.prototype,"_changeImage"),i.prototype),p()(i.prototype,"editImage",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"editImage"),i.prototype),i);t.a=y},167:function(e,t,n){"use strict";var i,r,o,a,s,c=n(56),l=n.n(c),u=n(60),p=n.n(u),d=n(58),h=n.n(d),g=n(0),f=n.n(g),m=n(50),y=n.n(m),v=(n(61),n(16)),_=n(51),b=n(49),S=n(1079),C=n(213),I=n(444),O=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,p()(n,"opened",r,h()(n)),p()(n,"layout",o,h()(n)),p()(n,"images",a,h()(n)),p()(n,"compId",s,h()(n)),n.availableReplace=!0;var i=t.state,c=void 0===i?{}:i;return n.opened=Object(v.a)(c,"opened",n.opened),n.layout=Object(v.a)(c,"layout",n.layout),n.images=Object(v.a)(c,"images",n.images),n.compId=Object(v.a)(c,"compId",n.compId),n._componentFactory=_.W.get("componentFactory"),n.availableReplace=n._getAvailableReplaceConfig(),n}f()(t,e);var n=t.prototype;return n._getAvailableReplaceConfig=function(){var e=_.W.get("configAgent").get("plugins.componentSettings.imageGroup.config");return!Object(v.a)(e,"toolbar.contextToolbar.exclude",[]).includes("image-replacement")},n.open=function(e){var t=e.layout,n=e.images,i=e.id;this.opened=!0,this.layout=t,this.images=n,this.compId=i},n.close=function(){this.opened=!1,this.layout=C.b.DEFAULT,this.images=[],this.compId=""},n.changeLayout=function(e){this.layout=e},n.isIndividualLayout=function(){return this.layout===C.b.INDIVIDUAL},n.updateImages=function(e){this.images=e},n.reorderImages=function(e){this.images.replace(this._getReorderedImages(e))},n.changeImage=function(e,t){var n=this.images.findIndex(function(t){return t.id===e});this.images[n].setState(t)},n.deleteImage=function(e){var t=this.images.findIndex(function(t){return t.id===e});~t&&this.images.splice(t,1)},n.getImages=function(){return this.images},n.getUnitsAsImageCompStores=function(){var e=this;return this.images.map(function(t){return t.resetWidthPercentage(),e._componentFactory.createComponentWithCompData(l()({ctype:"image"},t))})},n._getReorderedImages=function(e){var t=this;return Array.from(e).reduce(function(e,n){var i=t.images[n.dataset.order];return i&&e.push(i),e},[])},n.adjustImageGroupRatio=function(e){this.layout===C.b.COLLAGE&&this._resolveWidthRatio(e)},n._resolveWidthRatio=function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n],r=void 0;if(++n<t){r=e[n];var o=i.width/i.height,a=o+r.width/r.height;i.widthPercentage=o/a*100,r.widthPercentage=100-i.widthPercentage}else i.widthPercentage=100}},t}(_.e),r=y()(i.prototype,"opened",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=y()(i.prototype,"layout",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.b.DEFAULT}}),a=y()(i.prototype,"images",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=y()(i.prototype,"compId",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y()(i.prototype,"open",[b.d],Object.getOwnPropertyDescriptor(i.prototype,"open"),i.prototype),y()(i.prototype,"close",[b.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),y()(i.prototype,"changeLayout",[b.d],Object.getOwnPropertyDescriptor(i.prototype,"changeLayout"),i.prototype),i);O.schema={opened:S.a.bool,compId:S.a.string,layout:S.a.string,images:S.a.arrayOf(S.a.shape(I.a.schema))},t.a=O},168:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h=n(56),g=n.n(h),f=n(17),m=n.n(f),y=n(60),v=n.n(y),_=n(1),b=n.n(_),S=n(58),C=n.n(S),I=n(0),O=n.n(I),T=n(50),L=n.n(T),E=(n(61),n(16)),P=n(70),w=n(106),k=n(172),x=n(99),D=n(113),A=n(69),j=n(78),R=n(109),N=n(102),M=n(20),B=n(112),W=n(1079),U=n(1313),F=n(51),z=n(49),V=n(444),G=n(214),H=n(1365),q=n(1080),J=n(213),K=["contentMode","link"],X=Object(F.bb)(F.h),Y=(i=function(e){O()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"query"},n.documentWidth=null,n.thumbnailTypeMap={},v()(n,"layout",r,C()(n)),v()(n,"align",o,C()(n)),v()(n,"caption",a,C()(n)),v()(n,"contentMode",s,C()(n)),v()(n,"place",c,C()(n)),v()(n,"images",l,C()(n)),v()(n,"phase",u,C()(n)),v()(n,"mediaMeta",p,C()(n)),v()(n,"representativeEnabled",d,C()(n));var i=t,h=i.state,g=void 0===h?{}:h,f=i.config,m=void 0===f?{}:f;return n._configAgent=F.W.get("configAgent"),n._infraConfig=n._configAgent.get("infraConfig"),n._componentFactory=F.W.get("componentFactory"),n.documentWidth=n._configAgent.get("productConfig.documentWidth"),n.thumbnailTypeMap=n._configAgent.get("editorInfo.thumbnailType")||n.thumbnailTypeMap,n.useThumbnail=Object(E.a)(n._infraConfig,"image.useThumbnail",!0),n.layout=Object(E.a)(g,"layout",n.layout),n.align=Object(E.a)(g,"align",n.align),n.caption=n._createCaptionTextUnitStore(g.caption,m.caption),n.contentMode=Object(E.a)(g,"contentMode",n._getDefaultContentMode(m)),n.place=Object(E.a)(g,"place",n.place),n.images=n._createImageStores(g.images),n.phase=n._resolveComponentPhase(),n.slideViewHeight=m.slideViewHeight,n.mediaMeta=Object(E.a)(g,"mediaMeta",n.mediaMeta),n.attributes=Object(P.a)(n.attributes,m.attributes),n.enableLocation=Object(E.a)(m,"enableLocation",!1),n.updateConfig(),n}return t.toPlainJSON=function(e,t){if(void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),this._isOnCaption(e,t))return{ctype:q.a.TEXT,value:this.caption.toPlainJSON(e,t)};var n=this.images.find(function(n){return e.unitId===n.id||t.unitId===n.id});return n?n.toPlainJSON():{id:this.id,ctype:this.ctype,layout:this.layout,align:this.align,caption:this.caption,contentMode:this.contentMode,place:z.f.toJS(this.place),images:this.images.map(function(e){return e.toPlainJSON()}),phase:this.phase,mediaMeta:z.f.toJS(this.mediaMeta)}},t.updateConfig=function(){e.prototype.updateConfig.call(this),this.images.forEach(function(e){e.updateConfig&&e.updateConfig()}),this.representativeEnabled=!1!==this._configAgent.get("productConfig.representativeEnabled")},t.updateProperty=function(e,t){var n=e.contentMode,i=e.link,r=m()(e,K);if(n&&this.changeContentMode(n),Object(N.a)(this,r),i)return this.changeLink(i,t)},t.changeContentMode=function(e){this.contentMode=e},t.changeLayout=function(e){this.layout=e,this.adjustImageGroupRatio()},t.insertData=function(e){this.images=e.images,this.changeLayout(e.layout)},t.updateData=function(e){var t=this;e.images.forEach(function(e){var n=t.images.find(function(t){return t.id===e.id});Object(w.a)(n,e)})},t.stripUncompletedImage=function(){var e=this.phaseInfoOfImages;if(e.uncompletedCount>0){var t=e.completedImages;this.images.replace(t),this.layout===J.b.COLLAGE&&this._resolveWidthRatio(t)}},t.updatePlace=function(e){this.place=e},t.applyEditedImage=function(e){var t=this,n=e.photos.map(function(e){return e.modified?t._refineIntoImageData(e):e});this.updateData({compId:e.key,images:n})},t._refineIntoImageData=function(e){var t=e.key,n=e.fileSize,i=e.height,r=e.width,o=e.domain,a=e.path,s=""+o+a;return{fileSize:n,height:i,width:r,originalWidth:r,originalHeight:i,path:a,id:t,src:!1===this.useThumbnail?s:s+"?type="+this.thumbnailTypeMap.normal}},t.adjustImageGroupRatio=function(e){void 0===e&&(e=this.images),this.layout===J.b.COLLAGE&&this._resolveWidthRatio(e)},t._resolveWidthRatio=function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n],r=void 0;if(++n<t){r=e[n];var o=i.width/i.height,a=o+r.width/r.height;i.widthPercentage=o/a*100,r.widthPercentage=100-i.widthPercentage}else i.widthPercentage=100}},t._resolveComponentPhase=function(){return this.images.some(function(e){return e&&e.src})?F.O.DONE:F.O.PROCESSING},t._getDefaultContentMode=function(e){var t=e.contentMode,n=Object(M.a)(t)?t():t;if(this._validateContentMode(n))return n;var i=this.getLayoutThemeStyle(this.themeStyle)||{},r=Object(E.a)(i,"component.contentMode");return r||J.a.EXTEND},t._validateContentMode=function(e){return e&&Object(B.a)(J.a,e)},t.collectStyle=function(e){var t="justify"===this.align||null===this.align?"left":this.align,n={layout:this.layout,contentMode:this.contentMode,align:t};if(e&&this.caption.isFocused){var i=this.caption.collectStyle(e),r=Object(k.a)(i,function(e){return""===e||null===e});n.caption=r}if(this._isImageUnitSelected(e)){var o=Object(x.a)(this.images,{id:e.start.unitId});n.format=o.format,n.displayFormat=o.displayFormat,n.phase=o.phase}else n.phase=this.phase;return n},t.clone=function(e){if(this.caption.isFocused)return this.caption.clone(e);if(this.isUnitFocused){var t=this.getStoreById(e.start.unitId).clone();return t.resetWidthPercentage(),t}return this._componentFactory.createComponentWithCompData(this.toValidJSON())},t.isLibraryComponent=function(){return Object(D.a)(this.images,function(e){return!0===e.isLibraryComponent()})},t.getLibraryItemData=function(){var e=this;return Object(R.a)(Object(j.a)(this.images,function(t){if(t.isLibraryComponent())return Object.assign(t.getLibraryItemData(),{id:e.id})}))},t._isImageUnitSelected=function(e){var t=e.start.unitId;return Object(D.a)(this.images,function(e){return e.id===t})},t._isSelectedComponent=function(){return"single"===this.selection||"multi"===this.selection||"block"===this.selection},t._createCaptionTextUnitStore=function(e,t){var n={state:e,config:Object(A.a)({},t,{attributes:{cursor:"trapped",selection:"trapped",insertion:"append",drop:"only-text",paste:"only-text",lineBreak:{enter:"move-to-next-text",shiftEnter:"line-break-in-paragraph"},erasure:"trapped-text"},maxLength:1/0,filterTextStyle:{fontFamily:G.b.NOT_ALLOWED,fontSizeCode:G.b.NOT_ALLOWED,fontColor:G.b.NOT_ALLOWED,backgroundColor:G.b.NOT_ALLOWED,italic:G.b.NOT_ALLOWED,underline:G.b.NOT_ALLOWED,strikeThrough:G.b.NOT_ALLOWED,subscript:G.b.NOT_ALLOWED,superscript:G.b.NOT_ALLOWED,dropCap:G.b.NOT_ALLOWED,list:G.b.NOT_ALLOWED}})},i=Object(E.a)(t,"textStyle",{}),r=n.config.filterTextStyle;return n.config.filterTextStyle=Object(P.a)(r,i),new H.a(n)},t._createImageStores=function(e){var t=this;void 0===e&&(e=[]);var n=e.map(function(e){return t._componentFactory.createComponentWithCompData(g()({ctype:"image"},e),{attributes:{cursor:"selectable-unit",selection:"selectable-unit",erasure:"query",drop:"object"}})});return this.adjustImageGroupRatio(n),n},t.getStoreById=function(e){if(e===this.id)return this;if(e===this.caption.id)return this.caption;var t=this.images.find(function(t){return t.id===e});return t||null},t.isRepresentativeImage=function(){return Object(D.a)(this.images,function(e){return e.isRepresentativeImage()})},t.hasRepresentativeImage=function(){return Object(D.a)(this.images,function(e){return e.hasRepresentativeImage()})},t.releaseRepresentativeImage=function(e){var t=e.unitId,n=this.getStoreById(t);n&&n.releaseRepresentativeImage()},t.setRepresentativeImage=function(e){var t=e.unitId,n=this.getStoreById(t);n||(n=Object(x.a)(this.images,function(e){return e.isRepresentativeImage()})),n&&n.setRepresentativeImage()},t.getRepresentativeId=function(){var e=this;return Object(j.a)(this.images,function(t){return e.id+"|"+t.getRepresentativeId()})},t.getRepresentativeInnerData=function(){var e=Object(x.a)(this.images,function(e){return e.hasRepresentativeImage()});return e?e.getRepresentativeInnerData():null},t.queryErasure=function(e){if(this._isImageUnitSelected(e)){if(this._removeImageUnit(e),1===this.images.length){var t=this.images[0].toValidJSON(),n=this._componentFactory.createComponentWithCompData(t);return this.enableLocation&&this.place&&n.updatePlace(this.place),{result:"replace",component:n,range:n.getComponentActiveRange()}}return{result:"replace",component:this,range:this.getComponentActiveRange()}}if(this._isSelectedComponent())return{result:"self",component:null,range:null}},t._removeImageUnit=function(e){var t=this.images.filter(function(t){return t.id!==e.start.unitId});this.images.replace(t),this.adjustImageGroupRatio()},t.deselect=function(){this.images.forEach(function(e){return e.deselect()}),this.caption.deselect(),this._changeSelectionToNone()},b()(n,[{key:"showLocationButton",get:function(){return this.enableLocation}},{key:"isUnitFocused",get:function(){return Object(D.a)(this.images,function(e){return"single"===e.selection})}},{key:"isFocused",get:function(){return this.caption.isFocused||this.isUnitFocused||"none"!==this.selection}},{key:"phaseInfoOfImages",get:function(){var e=this.images.filter(function(e){return e.isUploaded}),t=e.length;return{completedImages:e,completedCount:t,uncompletedCount:this.images.length-t}}},{key:"translationEnabled",get:function(){return"none"!==this.caption.selection}}]),n}(Object(F.Z)(X)),r=L()(i.prototype,"layout",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.b.DEFAULT}}),o=L()(i.prototype,"align",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=L()(i.prototype,"caption",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=L()(i.prototype,"contentMode",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.a.EXTEND}}),c=L()(i.prototype,"place",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=L()(i.prototype,"images",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=L()(i.prototype,"phase",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"empty"}}),p=L()(i.prototype,"mediaMeta",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=L()(i.prototype,"representativeEnabled",[z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L()(i.prototype,"showLocationButton",[z.e],Object.getOwnPropertyDescriptor(i.prototype,"showLocationButton"),i.prototype),L()(i.prototype,"isUnitFocused",[z.e],Object.getOwnPropertyDescriptor(i.prototype,"isUnitFocused"),i.prototype),L()(i.prototype,"isFocused",[z.e],Object.getOwnPropertyDescriptor(i.prototype,"isFocused"),i.prototype),L()(i.prototype,"phaseInfoOfImages",[z.e],Object.getOwnPropertyDescriptor(i.prototype,"phaseInfoOfImages"),i.prototype),i);Y.ctype="imageGroup",Y.schema={id:W.a.string.isRequired,layout:W.a.string.isRequired,ctype:W.a.string.isRequired,contentMode:W.a.string.isRequired,caption:W.a.captionTextUnit,place:W.a.shape(U.e),images:W.a.arrayOf(W.a.shape(V.a.schema)).isRequired,mediaMeta:W.a.shape(U.c)},t.a=Y},169:function(e,t,n){"use strict";var i,r=n(1),o=n.n(r),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(49),p=n(376),d=n(54),h=n.n(d),g=n(76),f=n(51),m=n(96),y=n(157),v=n(238),_=n(52),b={bold:"b",underline:"u",italic:"i",strikeThrough:"strike",subscript:"sub",superscript:"sup"},S="urlLink",C=n(85),I=n(719),O=n(193),T=(i=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).STATUS={LOADING:"loading",COMPLETE:"complete",ERROR:"error"},t.state={status:t.STATUS.LOADING,minimized:!1},t._src="",t._imgRef=u.b.createRef(),t._resizeObserver,t}s()(t,e);var n=t.prototype;return n.UNSAFE_componentWillUpdate=function(e){this._src&&this._src!==e.node.src&&this._resetComponent()},n.componentDidUpdate=function(){var e=this;this._shouldRepresentiveBtn()&&this._imgRef.current&&!this._resizeObserver&&(this._resizeObserver=new v.default(function(t){var n=t[0].contentRect,i=n.width,r=n.height,o=e.props.node.isSmallerThanMinimumSize(i,r);e.setState({minimized:o})}),this._resizeObserver.observe(this._imgRef.current))},n.componentWillUnmount=function(){this._resizeObserver&&this._resizeObserver.disconnect()},n.render=function(){var e=this.props.node,t=e.id,n=e.computedStyle,i=e.link,r=this.state.status,o=this._getInlineStyle(n),a=this._getClassNames(n),s=this._renderRepresentiveBtn(),c=this._renderImagePlaceholder(),l=this._renderImage(),p=this._renderErrorImage();return this._hasBackgroundColor(n)?u.b.createElement("span",{id:t,className:a,style:o},c,r===this.STATUS.ERROR?p:l,s):u.b.createElement("span",{id:t,className:a,style:o,"data-href":i&&i.url},c,r===this.STATUS.ERROR?p:l,s)},n._renderImagePlaceholder=function(){var e=this._resolveImageAreaStyle();return this._isProgressing()?u.b.createElement(u.b.Fragment,null,u.b.createElement("span",{className:"se-inline-image-prepareing-inner",style:e}),u.b.createElement("span",{className:"se-blind"},this.props.uploadProgressTitle)):null},n._renderErrorImage=function(){var e=this.props.notFoundImageTitle;return u.b.createElement("span",{className:"se-state-error"},u.b.createElement("span",{className:"se-state-error-detail"},u.b.createElement("span",{className:"se-state-error-text"},e)))},n._resolveImageAreaStyle=function(){var e=this.props.node,t=e.width;return{paddingTop:""+e.height/t*100+"%"}},n._renderImage=function(){var e=this.props.node,t=e.src,n=e.phase;return this._src=t,n===u.a.PROCESSING?null:u.b.createElement(C.b,{className:"se-inline-image-resource",src:this._src,elementRef:this._imgRef,onLoad:this._handleLoadImage,onError:this._handleErrorImage})},n._renderRepresentiveBtn=function(){var e=h()({"se-set-rep-image-button":!0,"se-is-selected":this.props.node.represent});if(this._shouldRepresentiveBtn()&&!1===this.state.minimized)return u.b.createElement("button",{type:"button",className:e,onClick:this._handleClickRepresentative},u.b.createElement("span",{className:"se-set-rep-image-button-text"},this.props.representativeTitle))},n._shouldRepresentiveBtn=function(){var e=this.props.node,t=e.representativeEnabled,n=void 0===t||t,i=e.internalResource;return this.state.status===this.STATUS.COMPLETE&&i&&!!n&&e.isRepresentativeImage()},n._isProgressing=function(){var e=this.props.node,t=e.path,n=e.src,i=e.phase,r=e.internalResource&&""===t&&""!==n;return this.state.status===this.STATUS.LOADING||i===f.O.PROCESSING||r},n._hasBackgroundColor=function(e){return!(!e||!e.backgroundColor)},n._getInlineStyle=function(e){return{maxWidth:this.props.node.width,color:e.fontColor,backgroundColor:e.backgroundColor}},n._getClassNames=function(e){var t,n=e.fontFamily,i=e.fontSizeCode,r=this.props.node,o=r.link,a=r.width,s=r.height,c=r.selection;return h()(((t={})["se-ff-"+n]=!!n,t["se-"+i]=!!i,t["se-highlight"]=this._hasBackgroundColor(e),t["se-link"]=o&&o.ctype===S,t["se-inline-image"]=!0,t["se-inline-image-prepareing"]=this._isProgressing(),t["se-inline-image-prepareing-mini"]=this._isProgressing()&&(a<=60||s<=30),t["se-is-inline-image-block-selected"]=c===f.P.BLOCK,t["__se-node"]=!0,t))},n._resetComponent=function(){this.state.status!==this.STATUS.LOADING&&this.setState({status:this.STATUS.LOADING})},n._handleLoadImage=function(){this.setState({status:this.STATUS.COMPLETE});var e=this.props.useCase;e&&e.refreshAfterLazy()},n._handleErrorImage=function(){this.setState({status:this.STATUS.ERROR});var e=this.props.useCase;e&&e.refreshAfterLazy()},n._handleClickRepresentative=function(e){var t=this.props,n=t.compId,i=t.unitId,r=t.paraId,o=t.node;(0,t.onClickRepresentative)({compId:n,unitId:i,paraId:r,nodeId:o.id}),I.a.log(e.nativeEvent,"tetct.rep")},t}(u.b.Component),l()(i.prototype,"_renderRepresentiveBtn",[_.muteIfReadOnly],Object.getOwnPropertyDescriptor(i.prototype,"_renderRepresentiveBtn"),i.prototype),l()(i.prototype,"_handleLoadImage",[_.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleLoadImage"),i.prototype),l()(i.prototype,"_handleErrorImage",[_.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleErrorImage"),i.prototype),l()(i.prototype,"_handleClickRepresentative",[_.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickRepresentative"),i.prototype),i);T.propTypes={useCase:u.a.instanceOf(f.c),node:u.a.instanceOf(O.a),uploadProgressTitle:u.a.string,representativeTitle:u.a.string,notFoundImageTitle:u.a.string,linkTitle:u.a.string,unitId:u.a.string,compId:u.a.string,paraId:u.a.string,onClickRepresentative:u.a.func,additionalOption:u.a.object};var L=Object(p.b)(T),E=n(58),P=n.n(E),w=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).handleClick=t.handleClick.bind(P()(t)),t}s()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){},n.render=function(){var e=this.props.node,t=e.id,n=e.value,i=e.computedStyle,r=e.link,o=this._getInlineStyle(i),a=this._getClassNames(i),s=this._getStyleTags(n,i);return this._hasBackgroundColor(i)?u.b.createElement("span",{id:t,className:a,style:o,"data-href":r&&r.url},u.b.createElement("mark",{dangerouslySetInnerHTML:{__html:s}})):u.b.createElement("span",{id:t,className:a,style:o,"data-href":r&&r.url,dangerouslySetInnerHTML:{__html:s}})},n._hasBackgroundColor=function(e){return!(!e||!e.backgroundColor)},n._getInlineStyle=function(e){return{color:e.fontColor,backgroundColor:e.backgroundColor}},n._getClassNames=function(e){var t,n=e.fontFamily,i=e.fontSizeCode,r=this.props.node.link;return h()(((t={"se-emoji":!0})["se-ff-"+n]=!!n,t["se-"+i]=!!i,t["se-highlight"]=this._hasBackgroundColor(e),t["se-link"]=r&&r.ctype===S,t["__se-node"]=!0,t))},n._getStyleTags=function(e,t){var n=e;return Object.keys(t).forEach(function(e){if(t[e])switch(e){case"bold":case"italic":case"strikeThrough":case"underline":case"superscript":case"subscript":n="<"+b[e]+">"+n+"</"+b[e]+">"}}),n},n.handleClick=function(e){e.preventDefault()},t}(u.b.Component);w.defaultProps={},w.propTypes={node:u.a.instanceOf(O.a)};var k,x=Object(p.b)(w),D=n(781);function A(e,t){return Object.keys(t).forEach(function(n){if(t[n])switch(n){case"bold":case"italic":case"strikeThrough":case"underline":case"superscript":case"subscript":e="<"+b[n]+">"+e+"</"+b[n]+">"}}),e}var j=function(e){return!(!e||!e.backgroundColor)},R=function(e,t,n){var i="";n?i='<span class="se-drop-cap">'+N(e.slice(0,1))+"</span>"+N(e.slice(1)):i=N(e);return A(i,t)},N=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/[\f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\ufeff]/g,"&#32;")},M=(k=function(e){function t(t){var n;n=e.call(this,t)||this;var i=t.node,r=t.hasDropCap;return n._disposer=null,n._el=null,n._value=i.value,n._hasDropCap=r,n}s()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._register(this.props.node)},n.componentDidUpdate=function(e){var t=e.node,n=this.props,i=n.node,r=n.hasDropCap;this._hasDropCap=r,i!==t&&this._register(i)},n.componentWillUnmount=function(){this._disposer&&this._disposer(),this._disposer=null,this._el=null},n.render=function(){var e=this.props,t=e.node,n=e.hasDropCap,i=t.id,r=t.computedStyle,o=t.link,a=this._getInlineStyle(r),s=function(e,t){var n,i=e.fontFamily,r=e.fontSizeCode;return h()(((n={})["se-ff-"+i]=!!i,n["se-"+r]=!!r,n["se-highlight"]=j(e),n["se-link"]=t&&t.ctype===S,n["__se-node"]=!0,n))}(r,o),c=R(this._value,r,n);return j(r)?u.b.createElement(u.b.Fragment,null,u.b.createElement("span",{id:i,className:s,style:a,"data-href":o&&o.url},u.b.createElement("mark",{ref:this._ref,dangerouslySetInnerHTML:{__html:c}}))):u.b.createElement(u.b.Fragment,null,u.b.createElement("span",{id:i,ref:this._ref,className:s,style:a,"data-href":o&&o.url,dangerouslySetInnerHTML:{__html:c}}))},n._ref=function(e){this._el=e},n._getInlineStyle=function(e){return{color:e.fontColor,backgroundColor:e.backgroundColor}},n._register=function(e){var t=this,n=e.computedStyle;this._disposer&&this._disposer(),this._disposer=u.f.observe(e,"value",function(e){t._value!==e.newValue&&(t._value=e.newValue,t._el&&function(e,t,n,i){if(i)e.innerHTML=R(t,n,i);else{for(var r=e;1===r.nodeType&&r.firstChild;)r=r.firstChild;r.textContent=t}}(t._el,e.newValue,n,t._hasDropCap))},!0)},t}(u.b.Component),l()(k.prototype,"_ref",[_.autobind],Object.getOwnPropertyDescriptor(k.prototype,"_ref"),k.prototype),l()(k.prototype,"_getInlineStyle",[_.muteIfReadOnly],Object.getOwnPropertyDescriptor(k.prototype,"_getInlineStyle"),k.prototype),k);M.defaultProps={hasDropCap:!1},M.propTypes={node:u.a.instanceOf(D.a),hasDropCap:u.a.bool};var B=Object(p.b)(M);Node.defaultProps={placeholder:""},Node.propTypes={node:u.a.instanceOf(O.a),uploadProgressTitle:u.a.string,representativeTitle:u.a.string,notFoundImageTitle:u.a.string,onClickRepresentative:u.a.func,useCase:u.a.instanceOf(f.c),unitId:u.a.string,paraId:u.a.string,compId:u.a.string,key:u.a.string};var W=n(320),U=n(71),F=function(e){function t(){return e.apply(this,arguments)||this}s()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.spellCheckInfo,n=e.selectedId,i=t.id,r=t.corrected,o=this._getLargestFontSize(),a=h()("se-grammar","se-"+o,{"se-grammar-emended":r},{"se-grammar-error":!r},{"se-is-selected":n===i});return u.b.createElement("a",{id:i,className:a,"data-grammarid":i},this._renderNodeList())},n._renderNodeList=function(){var e=[];return this.props.nodes.forEach(function(t){var n="spellCheck_"+t.id;e.push(u.b.createElement(B,{key:n,node:t}))}),e},n._getLargestFontSize=function(){var e=this.props.nodes,t="fs0";return Object(U.a)(e,function(e){var n=e.computedStyle.fontSizeCode;t=t>n?t:n}),t},t}(u.b.Component);F.propTypes={nodes:u.a.arrayOf(u.a.object),spellCheckInfo:u.a.object,selectedId:u.a.string};var z=Object(p.b)(F),V=n(785),G=function(e){function t(){return e.apply(this,arguments)||this}return s()(t,e),t.prototype.render=function(){var e=this.context,t=e.spellCheckMap,n=e.selectedId,i=this.props,r=i.paragraph,o=i.uploadProgressTitle,a=i.representativeTitle,s=i.notFoundImageTitle,c=i.compId,l=i.unitId,p=i.useCase,d=i.onClickRepresentative,h=r.nodes,g=r.computedStyle,f=r.id,v=r.firstTextNodeIndex,_=-1,b=t[c],S=Object(y.a)(b,function(e,t){return e[t.position.startNodeId]=t,e},{});return h.map(function(e,t){var i=S[e.id],r=v===t&&!!g.dropCap;if(-1!==_&&t<=_)return!1;if(i&&!1===i.excluded){var y=Object(m.a)(h,function(e){return e.id===i.position.endNodeId});return _=t===y?-1:y,u.b.createElement(z,{key:t,nodes:h.slice(t,y+1),selectedId:n,spellCheckInfo:i})}return function(e){var t=e.node,n=e.hasDropCap,i=e.uploadProgressTitle,r=e.representativeTitle,o=e.notFoundImageTitle,a=e.onClickRepresentative,s=e.useCase,c=e.unitId,l=e.paraId,p=e.compId,d=e.key;switch(t.ctype){case"imageNode":return u.b.createElement(L,{key:d,useCase:s,unitId:c,paraId:l,compId:p,hasDropCap:n,uploadProgressTitle:i,representativeTitle:r,notFoundImageTitle:o,onClickRepresentative:a,node:t});case"emojiNode":return u.b.createElement(x,{key:d,node:t});default:return u.b.createElement(B,{key:d,hasDropCap:n,node:t})}}({key:e.id,node:e,hasDropCap:r,uploadProgressTitle:o,representativeTitle:a,notFoundImageTitle:s,onClickRepresentative:d,useCase:p,unitId:l,paraId:f,compId:c})})},t}(u.b.Component);G.contextType=V.a,G.propTypes={useCase:u.a.instanceOf(f.c),compId:u.a.string,unitId:u.a.string,paragraph:u.a.instanceOf(W.a),placeholder:u.a.string,uploadProgressTitle:u.a.string,representativeTitle:u.a.string,notFoundImageTitle:u.a.string,onClickRepresentative:u.a.func};var H,q=Object(p.b)(G),J=(H=function(e){function t(){return e.apply(this,arguments)||this}s()(t,e);var n=t.prototype;return n.render=function(){var e=this.props.paragraph,t=e.firstNodeComputedStyle,n=h()(["se-placeholder","__se_placeholder","se-ff-"+t.fontFamily,"se-"+t.fontSizeCode,{"se-placeholder-focused":e.selection===f.P.CURSOR}]),i=this._getStyledPlaceHolder();return u.b.createElement("span",{key:"placeholder",className:n,dangerouslySetInnerHTML:{__html:i}})},n._getStyledPlaceHolder=function(){var e=this.props,t=e.paragraph;return A(e.placeholder,t.firstNodeComputedStyle)},t}(u.b.Component),l()(H.prototype,"_getStyledPlaceHolder",[_.muteIfReadOnly],Object.getOwnPropertyDescriptor(H.prototype,"_getStyledPlaceHolder"),H.prototype),H);J.propTypes={paragraph:u.a.instanceOf(W.a),placeholder:u.a.string};var K=Object(p.b)(J),X=function(e){var t,n=e.unitId,i=e.compId,r=e.paragraph,o=e.useCase,a=e.placeholder,s=e.uploadProgressTitle,c=e.representativeTitle,l=e.notFoundImageTitle,p=e.onClickRepresentative,d=r.id,g=r.computedStyle,m={lineHeight:g.lineHeight},y=h()(((t={"se-text-paragraph":!0})["se-text-paragraph-align-"+(g.align||"left")]=!0,t["se-text-paragraph-drop-cap"]=g.dropCap,t["se-is-text-paragraph-block-selected"]=r.selection===f.P.BLOCK,t));return u.b.createElement("p",{id:d,style:m,className:y},u.b.createElement(q,{useCase:o,unitId:n,paraId:d,compId:i,paragraph:r,uploadProgressTitle:s,representativeTitle:c,notFoundImageTitle:l,onClickRepresentative:p}),a?u.b.createElement(K,{paragraph:r,placeholder:a}):null)};X.defaultProps={placeholder:""},X.propTypes={useCase:u.a.instanceOf(f.c),compId:u.a.string,unitId:u.a.string,paragraph:u.a.instanceOf(W.a),placeholder:u.a.string,uploadProgressTitle:u.a.string,representativeTitle:u.a.string,notFoundImageTitle:u.a.string,onClickRepresentative:u.a.func,isSingleParagraphFocused:u.a.bool};var Y=Object(p.b)(X),Q=n(55),Z=n.n(Q),$=f.E.DISC,ee=f.E.CIRCLE,te=f.E.SQUARE,ne=f.E.DECIMAL,ie=f.E.WRAPPER,re=f.E.ITEM,oe=f.E.NESTED,ae={0:$,1:ee,2:te},se=null,ce=Object(p.b)(function(e){var t=e.node.level,n=h()(ie,ae[t%3]);return u.b.createElement("ul",{className:n},e.node.children.map(se))}),le=Object(p.b)(function(e){var t=h()(ie,ne);return u.b.createElement("ol",{className:t},e.node.children.map(se))}),ue=Object(p.b)(function(e){var t,n=e.node,i=n.type,r=n.paragraph,o=n.children,a=n.filler,s=h()(re,((t={})[oe]=i===f.F.NONE||a,t));return u.b.createElement("li",{className:s},!a&&u.b.createElement(Y,Z()({paragraph:r},e.paraProps)),o.map(se))}),pe=Object(p.b)(function(e){var t=e.tree.root,n=e.paraProps;return se=function(e){return function(e,t){var n=e.type,i=e.key;switch(n){case f.F.UL:return u.b.createElement(ce,{node:e,key:i});case f.F.OL:return u.b.createElement(le,{node:e,key:i});case f.F.NONE:case f.F.DECIMAL:case f.F.BULLET:return u.b.createElement(ue,{node:e,paraProps:t,key:i})}}(e,n)},u.b.createElement(u.b.Fragment,null,t.children.map(se))}),de=n(837),he=n(740),ge=function(e){var t=e.text,n=e.useCase,i=e.unitId,r=e.compId,o=e.uploadProgressTitle,a=e.representativeTitle,s=e.placeholder,c=e.notFoundImageTitle,l=e.onClickRepresentative,p=t.structuredParagraphStore.paragraphs,d={unitId:i,compId:r,useCase:n,onClickRepresentative:l,uploadProgressTitle:o,representativeTitle:a,notFoundImageTitle:c,placeholder:s};return u.b.createElement(u.b.Fragment,null,p.map(function(e){return e instanceof de.a?u.b.createElement(pe,{key:e.id,paraProps:d,tree:e}):u.b.createElement(Y,Z()({key:e.id,paragraph:e},d))}))};ge.propTypes={useCase:u.a.instanceOf(f.c),compId:u.a.string,unitId:u.a.string,text:u.a.object,placeholder:u.a.string,uploadProgressTitle:u.a.string,representativeTitle:u.a.string,notFoundImageTitle:u.a.string,onClickRepresentative:u.a.func,isSingleParagraphFocused:u.a.bool};var fe,me=Object(he.a)(Object(he.c)(Object(p.b)(ge),{path:"text.structuredParagraphStore.paragraphs",output:"text.structuredParagraphStore.paragraphs",getKey:function(e){return e.id}}),{path:["text.structuredParagraphStore.paragraphs","text.paragraphs"],output:"text.structuredParagraphStore.paragraphs"}),ye=(fe=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}s()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._bindReaction()},t.getDerivedStateFromProps=function(e){return{useReaction:{maxLength:!!e.onLimitTextLength,filterText:!!e.onFilteredText}}},n.componentDidUpdate=function(e){!1===e.text.isEqualStore(this.props.text)&&(this._unbindReaction(),this._bindReaction()),this._hideLinkTooltip()},n.componentWillUnmount=function(){this._unbindReaction(),this._hideLinkTooltip()},n.render=function(){var e=this.props,t=e.text,n=e.className,i=e.additionalOption,r=e.options,o=e.compId,a=e.unitId,s=e.onClickRepresentative,c=e.useCase,l=e.forwardRef,p=r.isUnitSelector,d=r.useToolbarSlot,f=i.placeholder,m=i.uploadProgressTitle,y=i.representativeTitle,v=i.notFoundImageTitle,_=t.id,b=h()({"se-is-empty":this._empty},n),S=this._empty?f:"";return u.b.createElement(g.a,{id:_,ctype:"text",forwardRef:l,className:b,onMouseOver:this._handleMouseOver,onMouseOut:this._handleMouseOut,isUnitSelector:p,useToolbarSlot:d},u.b.createElement(me,{text:t,useCase:c,unitId:a||t.id,compId:o,uploadProgressTitle:m,representativeTitle:y,notFoundImageTitle:v,placeholder:S,onClickRepresentative:s}))},n._bindReaction=function(){var e=this.props.text;this.state.useReaction.maxLength&&(this._disposerIsOverTextLimit=u.f.reaction(function(){return e.isOverTextLimit},this._handleLimitTextLength))},n._unbindReaction=function(){this._disposerIsOverTextLimit&&this._disposerIsOverTextLimit()},n._handleLimitTextLength=function(e){var t=this.props.text;e&&(this.props.onLimitTextLength(),t.turnOffOverTextLimit())},n._handleMouseOver=function(e){var t=e.target.closest(".se-link");if(t){var n=this.props.useCase,i=void 0===n?{}:n;if(i.showLinkTooltip){var r=t.getClientRects(),o=t.dataset.href;i.showLinkTooltip({clientRects:r,link:o})}}},n._handleMouseOut=function(e){e.target.closest(".se-link")&&this._hideLinkTooltip()},n._hideLinkTooltip=function(){var e=this.props.useCase,t=void 0===e?{}:e;t.hideLinkTooltip&&t.hideLinkTooltip()},o()(t,[{key:"_empty",get:function(){var e=this.props.text;return e.empty&&!e.existTextInListParagraph}}]),t}(u.b.Component),l()(fe.prototype,"_empty",[u.e],Object.getOwnPropertyDescriptor(fe.prototype,"_empty"),fe.prototype),l()(fe.prototype,"_handleLimitTextLength",[_.autobind,_.muteIfReadOnly],Object.getOwnPropertyDescriptor(fe.prototype,"_handleLimitTextLength"),fe.prototype),l()(fe.prototype,"_handleMouseOver",[_.autobind],Object.getOwnPropertyDescriptor(fe.prototype,"_handleMouseOver"),fe.prototype),l()(fe.prototype,"_handleMouseOut",[_.autobind],Object.getOwnPropertyDescriptor(fe.prototype,"_handleMouseOut"),fe.prototype),fe);ye.defaultProps={id:"",ctype:"textUnit",text:{id:"",paragraphs:[Y.defaultProps],isOverTextLimit:!1},additionalOption:{placeholder:"",uploadProgressTitle:"",representativeTitle:"",notFoundImageTitle:""},placeholder:"",className:"",options:{isUnitSelector:!0,useToolbarSlot:!0}},ye.propTypes={useCase:u.a.instanceOf(f.c),text:u.a.object,forwardRef:u.a.oneOfType([u.a.func,u.a.shape({current:u.a.instanceOf(Element)})]),id:u.a.string.isRequired,unitId:u.a.string,compId:u.a.string,ctype:u.a.oneOf(["textUnit"]).isRequired,placeholder:u.a.string,additionalOption:u.a.object,className:u.a.string,options:u.a.shape({isUnitSelector:u.a.bool,useToolbarSlot:u.a.bool}),onClickRepresentative:u.a.func,onLimitTextLength:u.a.func};t.a=Object(p.b)(ye)},191:function(e,t,n){"use strict";n.d(t,"j",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"i",function(){return a}),n.d(t,"e",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"f",function(){return p}),n.d(t,"c",function(){return d}),n.d(t,"h",function(){return h});var i=n(1080),r={ARTICLE:"article",REWRITE:"rewrite",CONTINUE:"continue",SUMMARIZE:"summarize",OUTRO:"outro",INTRO:"intro",SUMMARIZE_ALL:"summarize-all",TAG:"tag",TITLE:"title"},o=[r.REWRITE,r.CONTINUE,r.SUMMARIZE],a=[i.a.TEXT,i.a.SECTION_TITLE,i.a.WRAPPING_PARAGRAPH],s={NO_REQUIRED_FAILED:"AE01",UNSUPPORTED_DATA:"AE02",FILTERED_DATA:"AE10",IO_VALIDATION_FAILED:"AE11",TIMEOUT:"AE52",HCX_UNAVAILABLE:"AE55",UNEXPECTED_ERROR_AX:"AE99",INVALID_REQUEST:"SE01",UNAUTHORIZED_USER:"SE11",INVALID_REQUEST_URI:"SE12",SERVER_TEMPORARY_ERROR:"SE21",UNEXPECTED_ERROR_SE:"SE99"},c=[s.NO_REQUIRED_FAILED,s.UNSUPPORTED_DATA,s.FILTERED_DATA,s.IO_VALIDATION_FAILED,s.TIMEOUT,s.HCX_UNAVAILABLE,s.UNEXPECTED_ERROR_AX],l={INPUT_TRUNCATED:"INPUT_TRUNCATED"},u={SUBJECT:"subject",KEYWORD:"keyword",PERSONA:"persona",WRITING:"writing",TOOLBOX:"toolbox"},p={START_SIGNAL:"start_signal",CONTENT:"content",META:"meta",END_SIGNAL:"end_signal",ERROR:"error"},d=5,h="AI_TUTORIAL_STEP"},192:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={DEFAULT:"default"},r={NORMAL:"normal",FIT:"fit",EXTEND:"extend",PAGEFULL:"pagefull"}},193:function(e,t,n){"use strict";var i,r,o,a,s,c,l=n(56),u=n.n(l),p=n(60),d=n.n(p),h=n(1),g=n.n(h),f=n(58),m=n.n(f),y=n(0),v=n.n(y),_=n(50),b=n.n(_),S=(n(61),n(16)),C=n(106),I=n(230),O=n(71),T=n(84),L=n(172),E=n(51),P=n(49),w=n(214),k=(i=Object(P.e)({keepAlive:!0}),r=Object(P.e)({keepAlive:!0}),o=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,d()(n,"link",a,m()(n)),d()(n,"style",s,m()(n)),d()(n,"themeStyle",c,m()(n));var i=t.state,r=void 0===i?{}:i;return n.link=Object(S.a)(r,"link",n.link),n.style=Object(C.a)(n.style,r.style),r.themeStyle&&n.themeStyle.replace(Object.entries(r.themeStyle)),n}v()(t,e);var n=t.prototype;return n.removeAiStyle=function(){this.style.ai=null},n.changeLink=function(e){void 0===e&&(e={}),e.value?this.link={ctype:"urlLink",url:e.value}:this.link=null},n.collectStyle=function(){var e=u()({link:this.link},this.computedStyleForToolbar);return delete e.ctype,e},n.updateTheme=function(e){this.themeStyle.replace(Object.entries(e))},n.updateCharacterStyle=function(e){var t=this,n=this._filterSuperSubScript(e);Object(I.a)(this.style,n,function(e,n,i){return n===t.themeStyle.get(i)||""===n?null:n})},n.resetStyle=function(){this.style={ctype:"nodeStyle",fontColor:null,fontFamily:null,fontSizeCode:null,backgroundColor:null,bold:null,italic:null,underline:null,strikeThrough:null,subscript:null,superscript:null,ai:this.style.ai}},n.applyDerivedCharacterStyle=function(e){var t=this,n=Object(L.a)(e,function(e,n){return null!==t.style[n]});this.updateCharacterStyle(n)},n.filterCharStyle=function(e,t){var n=this;e&&Object(O.a)(e,function(e,i){var r=e===w.b.NOT_ALLOWED;if("link"===i&&r)n.link=null;else if(!1!==n.style.hasOwnProperty(i)){var o="function"==typeof e&&!e(n.style[i],t);(r||o)&&(n.style[i]=null)}})},n._filterSuperSubScript=function(e){return!0===e.subscript?e.superscript=!1:!0===e.superscript&&(e.subscript=!1),e},n.is=function(e){return this.id===e},n.hasSameStyle=function(e){return!!e&&Object(T.a)(this.style,e.style)},n.hasSameLink=function(e){return!!e&&Object(T.a)(this.link,e.link)},n.hasUrlLink=function(){return!(!this.link||"urlLink"!==this.link.ctype)},n.getUrlValue=function(){return this.hasUrlLink()?this.link.url:""},n.isTextNode=function(){return!1},n.isImageNode=function(){return!1},n.isEmojiNode=function(){return!1},n.isAiTextNode=function(){return!1},n.isEmpty=function(){throw new Error("Implement the 'isEmpty()' method.")},n.isMergeable=function(){throw new Error("Implement the 'isMergeable()' method.")},n.getStartPoint=function(){throw new Error("Implement the 'getStartPoint()' method.")},n.getEndPoint=function(){throw new Error("Implement the 'getEndPoint()' method.")},n.getPositionByOffset=function(e){throw new Error("Implement the 'getPositionByOffset()' method.")},n.getNodeLength=function(){throw new Error("Implement the 'getNodeLength()' method.")},n.cloneNode=function(){throw new Error("Implement the 'cloneNode()' method.")},n.deselect=function(){this.selection="none"},n.updateConfig=function(){},n.isLibraryComponent=function(){return!1},g()(t,[{key:"computedStyle",get:function(){var e=this.themeStyle.toJSON();return Object(I.a)(e,this.style,function(e,t,n){return null!==t?t:void 0!==e?e:!!["fontColor","fontFamily","fontSizeCode","backgroundColor"].includes(n)&&""})}},{key:"computedStyleForToolbar",get:function(){var e=this.themeStyle.toJSON();return Object(I.a)(e,this.style,function(e,t,n){return null!==t?t:"ai"===n?null:["fontColor","backgroundColor"].includes(n)?"":void 0!==e?e:!!["fontFamily","fontSizeCode"].includes(n)&&""})}}]),t}(E.w),a=b()(o.prototype,"link",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=b()(o.prototype,"style",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{ctype:"nodeStyle",fontColor:null,fontFamily:null,fontSizeCode:null,backgroundColor:null,bold:null,italic:null,underline:null,strikeThrough:null,subscript:null,superscript:null,ai:null}}}),c=b()(o.prototype,"themeStyle",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),b()(o.prototype,"computedStyle",[i],Object.getOwnPropertyDescriptor(o.prototype,"computedStyle"),o.prototype),b()(o.prototype,"computedStyleForToolbar",[r],Object.getOwnPropertyDescriptor(o.prototype,"computedStyleForToolbar"),o.prototype),o);t.a=k},209:function(e,t,n){"use strict";var i,r,o,a,s;n.d(t,"f",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return h}),n.d(t,"h",function(){return f}),n.d(t,"j",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return g});var c={EVERY_WEEK:"everyWeek",EVERY_OTHER_WEEK:"everyOtherWeek",EVERY_MONTH:"everyMonth"},l={RECRUITING:"recruiting",ACCEPTING:"accepting",AVAILABLE:"available",SALE:"sale"},u={REPETITION:"repetition",NOTIFICATION:"notification",WEEK_DAY_GROUP:"weekDayGroup",DATE_GROUP:"dateGroup"},p=((i={})[c.EVERY_WEEK]="every_week",i[c.EVERY_OTHER_WEEK]="every_other_week",i[c.EVERY_MONTH]="every_month",i[u.DATE_GROUP]="date_group",i[u.WEEK_DAY_GROUP]="week_day_group",i),d=((s={})[u.REPETITION]={ctype:u.REPETITION,repetitionType:null,time:"00:00"},s[u.NOTIFICATION]={ctype:u.NOTIFICATION,type:l.RECRUITING,startDate:null,endDate:null,expired:!1},s[c.EVERY_WEEK]={ctype:c.EVERY_WEEK,daysOfWeek:[]},s[c.EVERY_OTHER_WEEK]={ctype:c.EVERY_OTHER_WEEK,daysOfWeek:[]},s[c.EVERY_MONTH]=((a={})[u.DATE_GROUP]=((r={ctype:c.EVERY_MONTH})[u.DATE_GROUP]={ctype:u.DATE_GROUP,startDay:0,endDay:0},r),a[u.WEEK_DAY_GROUP]=((o={ctype:c.EVERY_MONTH})[u.WEEK_DAY_GROUP]={ctype:u.WEEK_DAY_GROUP,selectedWeeks:[],daysOfWeek:[]},o),a),s);d[u.REPETITION].repetitionType=d[c.EVERY_WEEK];var h="YYYY-MM-DD",g="YYYY.MM.DD",f="HH:mm:ss",m="scheduleLayer",y={RepetitionType:c,NotificationType:l,SubComponentType:u,DefaultData:d,DateFormat:h,TimeFormat:f,i18nKey:m,MessageKeyOfType:p,DisplayDateFormat:g};t.i=y},210:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(69),p=n(54),d=n.n(p),h=n(49),g=n(376),f=n(251),m=n(52),y=n(1311),v=n(59),_=n(129),b=(i=function(e){function t(){return e.apply(this,arguments)||this}s()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e="click.se-toolbar-custom-layer-"+this.props.name;y.a.on(e,this._handleClickButtonOutside)},n.componentWillUnmount=function(){var e="click.se-toolbar-custom-layer-"+this.props.name;y.a.off(e)},n.render=function(){var e=this.props,t=e.id,n=e.type,i=e.name,r=e.namespace,a=e.documentToolbarIconType,s=e.value,c=e.label,l=e.labelVisible,u=e.recentColors,p=e.custom,g=e.isActivated,f=e.i18n,m=e.logAreaId,y=e.logId,b=e.onValidateValue,S=e.focused,C=p.CustomLayer,I=p.customProps,O="link"===i&&b(s),T=f(c),L=a===v.d.TEXT_ICON||l,E=d()("se-"+r+"-toolbar-"+n+"-container","__select-container"),P=d()("se-"+i+"-toolbar-button","se-"+r+"-toolbar-"+n+"-button",{"se-is-activated":g,"se-is-has-value":O}),w=L?"se-toolbar-label":"se-blind",k=m+"."+y,x=this._currentTitle();return h.b.createElement("div",{className:E,"data-type":n,"data-log":k,"data-name":i},h.b.createElement(_.a,{focused:S,namespace:r,type:n,dataName:t,className:P,handleClick:this._handleClickButton,i18n:f,ariaExpanded:""+g,ariaHasPopup:"true"},h.b.createElement("span",{className:"se-toolbar-icon"}),h.b.createElement("span",{className:w,"aria-hidden":"true"},T),h.b.createElement("span",{className:"se-toolbar-tooltip"},x)),g&&h.b.createElement(C,o()({className:"__custom_layer"},I,{namespace:r,recentColors:u,value:s,i18n:f,logAreaId:m,onInput:this._handleInput,onConfirm:this._handleConfirm,onClose:this._handleClose})))},n._currentTitle=function(){var e=this._titleKey();return(0,this.props.i18n)(e)},n._titleKey=function(){var e=this.props,t=e.isActivated,n=e.title;return t?n.active:n.inactive},n._handleInput=function(e){var t=this.props,n=t.type,i=t.label,r=t.id,o=t.name,a=t.isActivated,s=Object(u.a)({type:n,label:i,id:r,name:o,isActivated:a,title:this._currentTitle()},e);this.props.onInput(s)},n._handleConfirm=function(e){var t=this.props,n=t.type,i=t.label,r=t.id,o=t.name,a=t.action,s=t.isActivated,c=t.storageKey,l=Object(u.a)({type:n,label:i,id:r,name:o,action:a,isActivated:s,storageKey:c,title:this._currentTitle()},e);this.props.onChange(l)},n._handleClose=function(){this._handleClickButton({})},n._handleClickButton=function(e){this._triggerClickHandler({event:e,showConfirm:!0})},n._handleClickButtonOutside=function(e){var t=e.target;this.props.isActivated&&f.a.isOutsideElementbySelector(t,".__select-container")&&this._triggerClickHandler({event:e})},n._triggerClickHandler=function(e){var t=e.event,n=e.showConfirm,i=this.props,r=i.type,o=i.label,a=i.id,s=i.name,c=i.title,l=i.action,u=i.isActivated;this.props.onClick({event:t,type:r,label:o,id:a,name:s,action:l,title:c,isActivated:u,showConfirm:n})},t}(h.b.Component),l()(i.prototype,"_handleInput",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleInput"),i.prototype),l()(i.prototype,"_handleConfirm",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleConfirm"),i.prototype),l()(i.prototype,"_handleClose",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClose"),i.prototype),l()(i.prototype,"_handleClickButton",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickButton"),i.prototype),l()(i.prototype,"_handleClickButtonOutside",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickButtonOutside"),i.prototype),i);b.defaultProps={label:"",id:"",name:"",namespace:"",title:{active:"",inactive:""},labelVisible:!1,isActivated:!1,moreViewButton:!1,focused:!1,selectIfHasValue:!1,custom:{CustomLayer:function(){return h.b.createElement("div",null)},customProps:{}},recentColors:[],onClickSelector:function(){},onChange:function(){},onInput:function(){},onConfirm:function(){},onValidateValue:function(){return!1},i18n:function(e){return e}},b.propTypes={type:h.a.oneOf([v.b.CUSTOM_LAYER]).isRequired,id:h.a.string,name:h.a.string,namespace:h.a.string,documentToolbarIconType:h.a.string,labelVisible:h.a.bool,label:h.a.string,action:h.a.string,title:h.a.shape({active:h.a.string,inactive:h.a.string}),value:h.a.oneOfType([h.a.string,h.a.array,h.a.bool,h.a.number,h.a.object,h.a.bool]),isActivated:h.a.bool,focused:h.a.bool,selectIfHasValue:h.a.bool,custom:h.a.shape({CustomLayer:h.a.oneOfType([h.a.func,h.a.element]),customProps:h.a.object}),recentColors:h.a.oneOfType([h.a.array,h.a.object]),onClickSelector:h.a.func,onChange:h.a.func,onInput:h.a.func,onConfirm:h.a.func,onValidateValue:h.a.func,i18n:h.a.func,logAreaId:h.a.string,logId:h.a.string,storageKey:h.a.string},t.a=Object(g.b)(b)},211:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(54),l=n.n(c),u=n(49),p=n(376),d=n(251),h=n(1311),g=n(52),f=n(59),m=n(431),y=n(129),v=n(51);var _=(i=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e="click.se-toolbar-label-select-"+this.props.name;h.a.on(e,this._handleClickButtonOutside)},n.componentWillUnmount=function(){var e="click.se-toolbar-label-select-"+this.props.name;h.a.off(e)},n.render=function(){var e=this.props,t=e.type,n=e.isActivated,i=e.id,r=e.name,o=e.value,a=e.label,s=e.title,c=e.hasIcon,p=e.action,d=e.namespace,h=e.deviceType,g=e.options,_=e.onClickOption,b=e.i18n,S=e.logAreaId,C=e.focused,I=e.logId,O=e.highlight,T=i,L=h===v.t.DESKTOP,E=l()("se-"+d+"-toolbar-"+t+"-container","__select-container"),P=l()("se-"+r+"-toolbar-button",["se-"+d+"-toolbar-"+t+"-button"],n&&"se-is-activated"),w=b((g[o]||{}).label)||b(a),k=function(e,t){if(void 0===t&&(t={}),!t)return e;var n=Object.keys(e),i=t.optionsBadge||[];return n.reduce(function(t,n){var r=e[n],o=i.includes(n);return t[n]=r&&o?Object.assign(r,{badge:o}):r,t},{})}(g,O);return u.b.createElement("div",{className:E,"data-type":t,"data-name":r},u.b.createElement(y.a,{focused:C,namespace:d,type:t,dataName:T,className:P,i18n:b,logId:I,logAreaId:S,highlight:O,handleClick:this.handleClickSelector,ariaExpanded:""+n,ariaHasPopup:"true"},c&&u.b.createElement("span",{className:"se-toolbar-icon","data-role":"icon"}),u.b.createElement("span",{className:"se-toolbar-label","data-role":"label","aria-hidden":L},w),L&&u.b.createElement("span",{className:"se-toolbar-tooltip"},b(s))),n&&u.b.createElement(m.a,{id:i,name:r,options:k,value:o,action:p,namespace:d,type:t,logAreaId:S,optionType:f.c.TEXT,i18n:b,onClickOption:_}))},n.handleClickSelector=function(e){var t=this.props,n=t.type,i=t.id,r=t.name,o=t.label,a=t.title,s=t.value,c=t.options;t.onClickSelector.apply(this,[{event:e,type:n,id:i,name:r,label:o,title:a,value:s,options:c}])},n._handleClickButtonOutside=function(e){var t=e.target;this.props.isActivated&&d.a.isOutsideElementbySelector(t,".__select-container")&&this.handleClickSelector({})},t}(u.b.Component),s()(i.prototype,"handleClickSelector",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleClickSelector"),i.prototype),s()(i.prototype,"_handleClickButtonOutside",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickButtonOutside"),i.prototype),i);_.defaultProps={id:"",name:"",value:"",label:"",title:"",namespace:"",hasIcon:!0,focused:!1,options:{},highlight:{},optionType:f.c.TEXT,onClickSelector:function(){},onClickOption:function(){},isActivated:!1,i18n:function(e){return e}},_.propTypes={type:u.a.oneOf([f.b.LABEL_SELECT]).isRequired,id:u.a.string,name:u.a.string,label:u.a.string,title:u.a.string,action:u.a.string,namespace:u.a.string,deviceType:u.a.string,hasIcon:u.a.bool,focused:u.a.bool,value:u.a.string,options:u.a.oneOfType([u.a.array,u.a.object]).isRequired,highlight:u.a.object,optionType:u.a.string,onClickSelector:u.a.func,onClickOption:u.a.func,i18n:u.a.func,isActivated:u.a.bool,logAreaId:u.a.string,logId:u.a.string},t.a=Object(p.b)(_)},212:function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var i={NO_RESULT:"no_result",NO_SELECTED_LOCATION:"no_selected_location",NO_PLACE_NAME:"no_place_name",EXCEEDED_MAX_LIMIT:"exceeded_max_limit",EXCEEDED_MAX_LIMIT_OF_IMAGE:"exceeded_max_limit_of_image",ALREADY_ADDED:"already_added",EXCEEDED_MAX_PLACE_NAME:"exceeded_max_place_name"},r={DOMESTIC:"domestic",OVERSEAS:"overseas"},o={NAVER:"naver",GOOGLE:"google"},a=n(41).a.REGION_TYPE,s={domestic:17,overseas:17},c={"ko-KR":"ko","en-US":"en","zh-TW":"zh-TW","zh-CN":"zh-CN","es-ES":"es","id-ID":"id","ja-JP":"ja","vi-VN":"vi","fr-FR":"fr"}},213:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={DEFAULT:"collage",COLLAGE:"collage",SLIDE:"slide",INDIVIDUAL:"individual"},r={FIT:"fit",EXTEND:"extend"}},214:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return a});var i={TEXT_START:"textunit_start",PARA_START:"paragraph_start",NODE_START:"node_start",NODE_BODY:"node_body",NODE_END:"node_end",PARA_END:"paragraph_end",TEXT_END:"textunit_end"},r={ERASE_PREV_BR:"erase_prev_br",ERASE_NEXT_BR:"erase_next_br",ERASE_PREV_NODE_CHARACTER:"erase_prev_node_character",ERASE_NEXT_NODE_CHARACTER:"erase_next_node_character",ERASE_CHARACTER:"erase_character",ERASE_NON_TEXT_NODE:"erase_non_text_node",ERASE_PREV_NON_TEXT_NODE:"erase_prev_non_text_node",ERASE_NEXT_NON_TEXT_NODE:"erase_next_non_text_node",DECREASE_INDENT:"decrease_indent"},o={MERGE_ONLY_PREV_NODE:"merge_only_prev_node",MERGE_ONLY_NEXT_NODE:"merge_only_next_node",MERGE_BOTH_SIDE_NODE:"merge_both_side_node",UNMERGEABLE:"unmergeable"},a={ALLOWED:"ALLOWED",NOT_ALLOWED:"NOT_ALLOWED",FOLLOW_CURRENT_STYLE:"FOLLOW_CURRENT_STYLE",conditionalAllowed:function(e){return function(t){return e.includes(t)}}}},215:function(e,t,n){"use strict";var i=n(54),r=n.n(i),o=n(49),a=function(e){var t=e.className,n=r()("__se-toolbar-slot","__se-cursor-unrelated",t);return o.b.createElement("div",{className:n,style:{display:"none"}})};a.defaultProps={className:""},a.propTypes={className:o.a.string},t.a=a},216:function(e,t,n){"use strict";var i=n(49),r=n(54),o=n.n(r);var a=function(e){var t=e.message,n=e.inlineStyle,r=function(e,t){var n=e&&e<=300&&e>100||t&&t<=150&&t>40,i=e&&e<=100||t&&t<=40;return o()({"se-state-error":!0,"se-state-error-small":n,"se-state-error-tiny":i})}(e.width,e.height);return i.b.createElement("div",{className:r,style:n},i.b.createElement("div",{className:"se-state-error-detail"},i.b.createElement("div",{className:"se-state-error-text"},t)))};a.defaultProps={message:"",inlineStyle:{}},a.propTypes={width:i.a.number,height:i.a.number,message:i.a.string,inlineStyle:i.a.object},t.a=a},217:function(e,t,n){"use strict";var i,r,o,a,s,c=n(56),l=n.n(c),u=n(17),p=n.n(u),d=n(60),h=n.n(d),g=n(1),f=n.n(g),m=n(58),y=n.n(m),v=n(0),_=n.n(v),b=n(50),S=n.n(b),C=(n(61),n(70)),I=n(16),O=n(69),T=n(134),L=n(122),E=n(102),P=n(51),w=n(1079),k=n(49),x=n(214),D=n(1365),A=n(1080),j=n(311),R=["layout"],N=(i=function(e){_()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"query",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},h()(n,"layout",r,y()(n)),h()(n,"value",o,y()(n)),h()(n,"source",a,y()(n)),h()(n,"align",s,y()(n)),n._componentFactory=P.W.get("componentFactory");var i=t,c=i.state,l=void 0===c?{}:c,u=i.config,p=void 0===u?{}:u,d=P.W.get("configAgent").get("productConfig.quotation.layouts");return n.attributes=Object(C.a)(n.attributes,p.attributes),n.layout=Object(I.a)(l,"layout",d&&d[0]||n.layout),n.value=n._makeTextUnitStore(l.value,Object(O.a)({},p.value,{attributes:{selection:"trapped",insertion:"append",drop:"only-text",paste:"only-text",lineBreak:{enter:"line-break-in-paragraph",shiftEnter:"line-break-in-paragraph"},erasure:"trapped-text"},filterTextStyle:{fontSizeCode:x.b.conditionalAllowed(["fs11","fs13","fs15","fs16","fs19","fs24","fs28","fs30","fs34","fs38"]),fontFamily:x.b.NOT_ALLOWED,backgroundColor:x.b.NOT_ALLOWED,strikeThrough:x.b.NOT_ALLOWED,subscript:x.b.NOT_ALLOWED,superscript:x.b.NOT_ALLOWED,dropCap:x.b.NOT_ALLOWED,link:x.b.NOT_ALLOWED,list:x.b.NOT_ALLOWED},styleFilterPayload:{layout:n.layout}}),Object(I.a)(p,"value.textStyle",{})),n.source=n._makeTextUnitStore(l.source,Object(O.a)({},p.source,{disable:!1===p.source,attributes:{selection:"trapped",insertion:"append",drop:"only-text",paste:"only-text",lineBreak:{enter:"line-break-in-paragraph",shiftEnter:"line-break-in-paragraph"},erasure:"trapped-text"},filterTextStyle:{fontSizeCode:x.b.conditionalAllowed(["fs12"]),backgroundColor:x.b.NOT_ALLOWED,fontFamily:x.b.NOT_ALLOWED,strikeThrough:x.b.NOT_ALLOWED,subscript:x.b.NOT_ALLOWED,superscript:x.b.NOT_ALLOWED,dropCap:x.b.NOT_ALLOWED,link:x.b.NOT_ALLOWED,list:x.b.NOT_ALLOWED},styleFilterPayload:{layout:n.layout}}),Object(I.a)(p,"source.textStyle",{})),n.align=Object(I.a)(l,"align",n.align),n}return t.toPlainJSON=function(e,t){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),e.unitId===this.value.id||t.unitId===this.value.id?{ctype:A.a.TEXT,value:this.value.toPlainJSON(e,t)}:e.unitId===this.source.id||t.unitId===this.source.id?{ctype:A.a.TEXT,value:this.source.toPlainJSON(e,t)}:{id:this.id,ctype:this.ctype,layout:this.layout,value:this.value.toPlainJSON(),source:this.source.toPlainJSON(),align:this.align}},t.breakLine=function(e){return this.getText().breakLine(e)},t.erase=function(e,t){return this.getText().erase(e,t)},t.queryCursor=function(e){return this._shouldSelectComponent(e)?{type:"range",range:this.getComponentActiveRange()}:{type:"range",range:null}},t._shouldSelectComponent=function(e){return this._isToComponent(e)||this._isFromExternalByKeyInput(e)||this._isInternalShift(e)},t._isInternalShift=function(e){var t=e.fromPoint,n=e.toPoint,i=e.eventType,r=t.compId===this.id&&t.unitId===this.id,o=this._isTriggeredByKeyInput(i),a=n.compId===this.id;return r&&o&&a},t._isFromExternalByKeyInput=function(e){var t=e.fromPoint,n=e.eventType,i=t.compId!==this.id,r=this._isTriggeredByKeyInput(n);return i&&r},t._isTriggeredByKeyInput=function(e){return"keydown"===e},t._isToComponent=function(e){return e.toPoint.unitId===this.id},t.updateStyle=function(e,t){var n=this.refineSelection(t),i=this._isFocusedOnText(),r=[],o=Object(T.a)(e,["fontSizeCode","fontColor","bold","italic","underline","lineHeight"]),a=e.align;a&&this.changeAlign(a);var s=this.getText().updateStyle(o,n);return i?r.push(s.start,s.end):r.push(t.start,t.end),r},t.changeLayout=function(e){this.layout=e,this.getText().updateStyleFilterPayload({layout:e}),this.updateTheme()},t.updateProperty=function(e){var t=e.layout,n=p()(e,R);t&&this.changeLayout(t),Object(E.a)(this,n)},t.filterStyle=function(e){var t=e.value,n=this._getParaAndCharStyle(t),i=n.paraStyle,r=n.charStyle;if(this.value.updateWholeParagraphStyle(i),this.value.updateWholeCharacterStyle(r),this.source){var o=e.source,a=this._getParaAndCharStyle(o);i=a.paraStyle,r=a.charStyle,this.source.updateWholeParagraphStyle(i),this.source.updateWholeCharacterStyle(r)}},t.rotationLayout=function(){var e=Object.keys(j.b).map(function(e){return e.toLowerCase()}),t=e[e.indexOf(this.layout)+1];t?this.changeLayout(t):this.changeLayout(e[0])},t.refineSelection=function(e){var t=this.getText().refineSelection(e);return t.start.compId=this.id,t.end.compId=this.id,t},t.removeFirstParagraph=function(){this.getText().removeFirstParagraph()},t.clone=function(e){if(this._isFocusedOnText(e))return this.getText().clone(e);var t=this.toValidJSON();return this._componentFactory.createComponentWithCompData(t)},t.getPlainTextWithEmoji=function(){return""+this.value.getPlainTextWithEmoji()+this.source.getPlainTextWithEmoji()},t.getPlainTextOnlyAi=function(){return""+this.value.getPlainTextOnlyAi()+this.source.getPlainTextOnlyAi()},t.getStoreById=function(e){return e===this.id?this:e===this.value.id?this.value:e===this.source.id?this.source:null},t._isFocusedOnText=function(){return"none"!==this.value.selection||"none"!==this.source.selection},t.isFocusedOnSourceText=function(){return"none"!==this.source.selection},t.getText=function(e){return e?this[e]:this.isFocusedOnSourceText()?this.source:this.value},t.getTextStyle=function(e){return this.getText().getTextStyle(e)},t.getTextUnits=function(){return this.source.disable?[this.value]:[this.value,this.source]},t.hasUnit=function(e){return this.getTextUnits().some(function(t){return t.id===e})},t.hasParagraph=function(e){return this.getTextUnits().some(function(t){return t.has(e)})},t.collectStyle=function(e){var t="cursor"===e.mode,n=this.getText().collectStyle(e);delete n.strikeThrough;var i={layout:this.layout,textFormat:"quotation",contentMode:"fit"};return t||(i.align=void 0),l()({},n,i)},t.getUnitStartPoint=function(){return l()({compId:this.id},this.getText().getStartPoint())},t.getUnitEndPoint=function(){return l()({compId:this.id},this.getText().getEndPoint())},t.getEndCollapsedRange=function(e){if(this._isFocusedOnText()){var t=e.end;return{start:t,end:t}}return this.getComponentActiveRange()},t.isEmpty=function(){return this.getText().isEmpty()},t.isEmptyTextNode=function(e){return this.getText().isEmptyTextNode(e)},t.resetStyle=function(){this.getTextUnits().forEach(function(e){e.resetStyle()})},t._makeTextUnitStore=function(e,t,n){var i=t.filterTextStyle;return t.filterTextStyle=Object(C.a)(i,n),new D.a({state:e,config:t})},t._getParaAndCharStyle=function(e){return{paraStyle:Object(T.a)(e,P.L),charStyle:Object(L.a)(e,P.L)}},t.detachParagraphs=function(e,t){return this.getText().detachParagraphs(e,t)},t.detachAllParagraphs=function(){var e=this.value.detachAllParagraphs();if(!this.source.disable&&!this.source.isEmpty()){var t=this.source.detachAllParagraphs();e=e.concat(t)}return e},t.getRangeAfterInsert=function(){return{start:this.getUnitStartPoint(),end:this.getUnitStartPoint()}},t.getOffsetInParagraph=function(e){return this.getStoreById(e.unitId).getOffsetInParagraph(e)},t.getNodeInfoAfterOffset=function(e,t){return this.getStoreById(e.unitId).getNodeInfoAfterOffset(e,t)},t.deselect=function(){this._changeSelectionToNone(),this.value.deselect(),this.source.deselect()},t.putCursor=function(e){var t=e.unitId,n=this.getStoreById(t);this.deselect(),this._changeSelectionToChild(),n.putCursor(e)},t.selectAsBlock=function(e,t){this.deselect(),e.unitId===this.value.id?(this.value.selectAsBlock(e,t),this._changeSelectionToChild()):e.unitId===this.source.id?(this.source.selectAsBlock(e,t),this._changeSelectionToChild()):this._changeSelectionToBlock()},t.selectAsSingle=function(){this.deselect(),this._changeSelectionToSingle()},t.setAvailableContentLength=function(e){this.getText().setAvailableContentLength(e)},t.resetAvailableContentLength=function(){this.getText().resetAvailableContentLength()},t.sliceContentText=function(e){if(this.value.textLength>e)this.value.slice(e),this.source.slice(0);else{var t=e-this.value.textLength;this.source.slice(t)}},f()(n,[{key:"isSourceTextOn",get:function(){return this._isFocusedOnText()||!this.source.isEmpty()||this.isActivated}},{key:"isActivated",get:function(){var e=this.selection;return"single"===e||"multi"===e}},{key:"textLength",get:function(){return this.getTextUnits().map(function(e){return e.textLength}).reduce(function(e,t){return e+t})}},{key:"translationEnabled",get:function(){return this._isFocusedOnText()}}]),n}(P.g),r=S()(i.prototype,"layout",[k.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.a}}),o=S()(i.prototype,"value",[k.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=S()(i.prototype,"source",[k.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=S()(i.prototype,"align",[k.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S()(i.prototype,"isSourceTextOn",[k.e],Object.getOwnPropertyDescriptor(i.prototype,"isSourceTextOn"),i.prototype),S()(i.prototype,"isActivated",[k.e],Object.getOwnPropertyDescriptor(i.prototype,"isActivated"),i.prototype),S()(i.prototype,"textLength",[k.e],Object.getOwnPropertyDescriptor(i.prototype,"textLength"),i.prototype),i);N.ctype="quotation",N.schema={id:w.a.string.isRequired,ctype:w.a.string.isRequired,layout:w.a.string.isRequired,value:w.a.textUnit,source:w.a.textUnit,align:w.a.string},t.a=N},239:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return g});var i=n(71),r=n(1107),o="highlight-",a={BADGE:"badge",TOOLTIP:"tooltip",BANNER:"banner"},s="start-date",c=7,l=1440*c,u="";function p(){if(u)return u;var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)}function d(e){return void 0===e&&(e=""),o+e+"-"+p()}function h(){var e=r.a.get(d(s)),t=(new Date).getTime();return l<=(t-e)/1e3/60}var g={init:function(e){e&&(u=e.release&&"undefined"!==e.release?e.release:p(),e.period&&(c=e.period))},get:function(e,t){g.init(e);var n=e.id===t,o=e.badge||[],s=e.tooltip||{},c=n?e.badge:o.includes(t),l=n?e.tooltip:s[t],u=a.BADGE+"-"+t,p=a.TOOLTIP+"-"+t,f=r.a.get(d(u)),m=r.a.get(d(p)),y={badge:!h()&&"shown"!==f&&c,tooltip:"shown"!==m&&l};if(n)return y;var v=[];return Object(i.a)(o,function(e){if(e.indexOf(":")>-1){var n=e.split(":"),i=n[0],o=n[1],s=a.BADGE+"-"+t+":"+o;"shown"!==r.a.get(d(s))&&i===t&&v.push(o)}}),y.optionsBadge=v.length>0&&v,!!(y.badge||y.tooltip||y.optionsBadge)&&y},hide:function(e,t,n){var o=this;t!==a.BADGE||r.a.get(d(s))||r.a.set(d(s),(new Date).getTime());var c=t+"-"+e;r.a.set(d(c),"shown"),n&&t===a.BADGE&&setTimeout(function(){n.classList.remove("se-highlight-toolbar-button"),n.classList.remove("__se-highlight-button");var t=n.querySelector(".__se-highlight-tooltip");t&&o.hide(e,a.TOOLTIP,t);var r=document.querySelectorAll(".se-toolbar")||[];Object(i.a)(r,function(t){var n=t.querySelector(".__se-highlight-button");(function(e,t){if(!e)return!1;var n=e.dataset,i=n.name,r=n.value,o=void 0===r?"":r;if(!i)return!1;var a=t.split(":"),s=a[0],c=a[1];return i===s&&o===(void 0===c?"":c)})(n,e)&&(n.classList.remove("se-highlight-toolbar-button"),n.classList.remove("__se-highlight-button"))})},300),n&&t===a.TOOLTIP&&(n.style.display="none")},shown:function(e,t){var n=t+"-"+e,i=r.a.get(d(n)),o=h();return t===a.BADGE&&o||"shown"===i},remove:function(e){var t=a.BADGE+"-"+e,n=a.TOOLTIP+"-"+e;r.a.remove(d(t)),r.a.remove(d(n))}}},240:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g=n(60),f=n.n(g),m=n(1),y=n.n(m),v=n(58),_=n.n(v),b=n(0),S=n.n(b),C=n(50),I=n.n(C),O=(n(61),n(16)),T=n(51),L=n(49),E=n(99),P=n(162),w=n(96),k=n(324),x=n(749),D=(i=Object(L.e)({keepAlive:!0}),r=Object(L.e)({keepAlive:!0}),o=Object(L.e)({keepAlive:!0}),a=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,f()(n,"opened",s,_()(n)),f()(n,"isVisibleWriterPopup",c,_()(n)),f()(n,"editingText",l,_()(n)),f()(n,"messages",u,_()(n)),f()(n,"writers",p,_()(n)),f()(n,"editedWriters",d,_()(n)),f()(n,"selectedWriter",h,_()(n)),n.defaultWriters=[],n.baseName="",n.compId=null;var i=t.state,r=void 0===i?{}:i;return n._configAgent=T.W.get("configAgent"),n.userNickName=n._configAgent.get("userInfo.nickName"),n.opened=Object(O.a)(r,"opened",n.opened),n.editingText=Object(O.a)(r,"editingText",n.editingText),n.writers=Object(O.a)(r,"writers",n.writers),n.editedWriters=Object(O.a)(r,"editedWriters",n.editedWriters),n.messages=Object(O.a)(r,"messages",n.messages),n.selectedWriter=Object(O.a)(r,"selectedWriter",n.selectedWriter),n.isVisibleWriterPopup=Object(O.a)(r,"isVisibleWriterPopup",n.isVisibleWriterPopup),n.baseName=Object(O.a)(r,"baseName",n.baseName),n}S()(t,e);var n=t.prototype;return n.addMessage=function(){var e=this._findWriterByKey(this.selectedWriter).name,t={key:T.cb.generate(),name:e,text:this.editingText,writer:this.selectedWriter,owner:this._isOwner(this.selectedWriter),editing:!1,dragging:!1};this.messages.push(t),this.editingText=""},n.addWriter=function(){if(!(this.editedWriters.length>=5)){var e={key:T.cb.generate(),name:"",placeholder:this._getNewName({writers:this.editedWriters}),editing:!0};this.editedWriters.push(e)}},n.changeOrder=function(e,t){if(e){var n=this._findMessageByKey(t),i=this._findMessageIndexByKey(e);Object(k.a)(this.messages,function(e){return e.key===t}),this.messages.splice(i,0,n)}},n.toggleDragging=function(e){this._cancelEditing();var t=this._findMessageByKey(e);t.dragging=!t.dragging},n.editMessage=function(e){this._cancelEditing();var t=this._findMessageByKey(e);t.editing=!0,this.selectedWriter=t.writer,this.editingText=t.text},n.editWriter=function(e){var t=this._findEditedWriterByKey(e);t.placeholder=this._checkDefaultName(t.name)?t.name:this._getNewName({writers:this.editedWriters,exceptionName:t.name}),t.editing=!0,t.placeholder===t.name&&(t.name="")},n._checkDefaultName=function(e){return new RegExp("^"+this.baseName+"[1-5]$").test(e)},n._cancelEditing=function(){this.isEditMode&&(this.editingText="",this.messages.forEach(function(e){e.editing=!1}))},n.completeMessageEditing=function(){var e=Object(E.a)(this.messages,function(e){return e.editing});e.editing=!1,e.text=this.editingText,this.editingText=""},n.completeWriterEditing=function(e,t){var n=this,i=this._findEditedWriterByKey(e),r=t?this._getNewName({writers:this.editedWriters,predicate:function(e,t){return 1===t?e:n._resizeLength(e,e+"("+t+")")},baseName:t}):t;i.name=r||i.placeholder,i.editing=!1},n.changeEditingText=function(e){this.editingText=e},n.selectWriter=function(e){this.selectedWriter=e,this._cancelEditing()},n.deleteMessage=function(e){Object(k.a)(this.messages,function(t){return t.key===e}),this.isEditMode||(this.editingText="")},n.deleteWriter=function(e){this._isOwner(e)||Object(k.a)(this.editedWriters,function(t){return t.key===e})},n.completeWritersEditing=function(){var e=this;this.writers.forEach(function(t){var n=e._findEditedWriterByKey(t.key);n?t.name!==n.name&&e.messages.filter(function(e){return e.writer===t.key}).forEach(function(e){e.name=n.name}):e.messages=e.messages.filter(function(e){return e.writer!==t.key})}),this.writers=this.editedWriters.slice(),this.writers.every(function(t){return t.key!==e.selectedWriter})&&(this.selectedWriter=this.writers[0].key),this.hideWriterPopup()},n._findMessageIndexByKey=function(e){return Object(w.a)(this.messages,function(t){return t.key===e})},n._findMessageByKey=function(e){return Object(E.a)(this.messages,function(t){return t.key===e})},n._findWriterByKey=function(e){return Object(E.a)(this.writers,function(t){return t.key===e})},n._findEditedWriterByKey=function(e){return Object(E.a)(this.editedWriters,function(t){return t.key===e})},n._resizeLength=function(e,t){if(t.length<=x.a||e===t)return t;var n=/\(\d\)$/,i=n.exec(t)[0];return t.split(n)[0].substring(0,x.a-i.length)+i},n._getNewName=function(e){var t=e.writers,n=e.suffixNumber,i=void 0===n?1:n,r=e.exceptionName,o=e.baseName,a=void 0===o?this.baseName:o,s=e.predicate,c=void 0===s?function(e,t){return e+t}:s;if(!(i>5)){var l=t.some(function(e){return!(e.editing||r===e.name)&&e.name===c(a,i)}),u={writers:t,suffixNumber:i+1,exceptionName:r,predicate:c,baseName:a};return l?this._getNewName(u):c(a,i)}},n.open=function(e){this.opened=!0,this._init(e)},n.close=function(){this.opened=!1},n._init=function(e){if(e){var t=e.messages,n=e.writers,i=e.compId,r=e.baseName;this.defaultWriters.length||(this.baseName=r,this.defaultWriters=[{name:this.userNickName||r,key:T.cb.generate(),editing:!1},{name:this._getNewName({writers:this.writers,baseName:r}),key:T.cb.generate(),editing:!1}]),this.writers=[].concat(this.defaultWriters),t&&t.length&&(this.messages=t),n&&n.length&&(this.writers=n),i&&(this.compId=i),this.selectedWriter=this.writers[0].key}},n.reset=function(){this.writers=[].concat(this.defaultWriters),this.messages=[],this.compId=null,this.selectedWriter="",this.editingText=""},n.showWriterPopup=function(){this.isVisibleWriterPopup=!0,this.editedWriters=Object(P.a)(this.writers.slice())},n.hideWriterPopup=function(){this.isVisibleWriterPopup=!1,this.editedWriters=[]},n._isOwner=function(e){return this.writers[0].key===e},y()(t,[{key:"isValidMessages",get:function(){return this.messages.every(function(e){return!e.dragging})&&this.messages.some(function(e){return""!==e.text.trim()})}},{key:"isEditMode",get:function(){return this.messages.some(function(e){return e.editing})}},{key:"messageCount",get:function(){return this.messages.length}}]),t}(T.e),s=I()(a.prototype,"opened",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=I()(a.prototype,"isVisibleWriterPopup",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=I()(a.prototype,"editingText",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=I()(a.prototype,"messages",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=I()(a.prototype,"writers",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=I()(a.prototype,"editedWriters",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=I()(a.prototype,"selectedWriter",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I()(a.prototype,"isValidMessages",[i],Object.getOwnPropertyDescriptor(a.prototype,"isValidMessages"),a.prototype),I()(a.prototype,"isEditMode",[r],Object.getOwnPropertyDescriptor(a.prototype,"isEditMode"),a.prototype),I()(a.prototype,"messageCount",[o],Object.getOwnPropertyDescriptor(a.prototype,"messageCount"),a.prototype),a);t.a=D},242:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={MY:"my",PART:"part",RECOMMEND:"recommend"}},243:function(e,t,n){"use strict";var i,r,o=n(12),a=n.n(o),s=n(18),c=n.n(s),l=n(60),u=n.n(l),p=n(58),d=n.n(p),h=n(0),g=n.n(h),f=(n(61),n(50)),m=n.n(f),y=n(51),v=n(49),_=n(52),b=n(718),S=(i=function(e){function t(){var t;t=e.call(this)||this,u()(t,"_onEachUpload",r,d()(t)),t._makeImageComponent=function(){var e=c()(a.a.mark(function e(n){var i,r,o,s,c,l,u,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._imageComponentService.createFileUploadData(n);case 2:return i=e.sent,r=i.imageCompStores,o=i.uploadTarget,s=o.ids,c=o.files,l=i.invalidImages,u=l.map(function(e){return e.id}),p=r.filter(function(e){var t=e.id;return!u.includes(t)}),t._insertImage(p),e.abrupt("return",{shellImageComps:r,shellImageCompIds:s,validImages:c,invalidImages:l});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),t._configAgent=y.W.get("configAgent"),t._webtoonLayerService=y.W.get("webtoonLayerService"),t._webtoonComponentService=y.W.get("webtoonComponentService"),t._imageUploadService=y.W.get("imageUploadService"),t._uploadProgressLayerService=y.W.get("uploadProgressLayerService"),t._imageComponentService=y.W.get("imageComponentService"),t._editingService=y.W.get("editingService"),t._imageBehavior=y.W.get("imageBehavior");var n=t._configAgent.get("infraConfig.image.acceptExt")||b.a.DEFAULT_IMAGE_ACCEPT_LIST;return t._refinedExt=b.a.exceptFileExt(n,b.a.DEFAULT_ANIMATED_IMAGE_LIST),t}g()(t,e);var n=t.prototype;return n.close=function(){var e=this;this._webtoonLayerService.close(),setTimeout(function(){e._uploadProgressLayerService.end()},500)},n.openLoadingLayer=function(){this._webtoonLayerService.openLoadingLayer()},n.closeLoadingLayer=function(){this._webtoonLayerService.closeLoadingLayer()},n.uploadImage=function(){var e=c()(a.a.mark(function e(){var t,n=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog({multiple:!0,accept:this._refinedExt});case 2:return t=e.sent,this.openLoadingLayer(),e.next=6,this._imageBehavior.insert(t,{makeComponent:this._makeImageComponent,onEachUpload:this._onEachUpload}).then(function(e){var t=e.invalidImageErrors,i=void 0===t?[]:t,r=e.succeededImages,o=(void 0===r?[]:r).map(function(e){return e.response.id}),a=n._webtoonLayerService.isOpen(),s=o.every(function(e){return n._webtoonLayerService.getImageStore(e)});a&&s&&(i.forEach(function(e){var t=e.id;n._webtoonLayerService.deleteImage(t)}),n.uploadStatus(!0),n.closeLoadingLayer())});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._insertImage=function(e){this._webtoonLayerService.isOpen()&&this._webtoonLayerService.insertShellImage(e)},n.changeImageOrder=function(e,t){this._webtoonLayerService.changeImageOrder(e,t)},n.updateCurrentPage=function(e){this._webtoonLayerService.updateCurrentPage(e)},n.changeLayout=function(e){this._webtoonLayerService.changeLayout(e)},n.insertWebtoon=function(){var e=this._webtoonLayerService.createComponentData(),t=this._webtoonComponentService.getSelectedWebtoonStore().id;this._editingService.insert({sourceComponents:[e]}),this._webtoonLayerService.isEditMode()&&this._editingService.eraseComponent(t),this._webtoonLayerService.close()},n.deleteImage=function(e){this._webtoonLayerService.deleteImage(e)},n.uploadStatus=function(e){this._webtoonLayerService.uploadStatus(e)},t}(y.m),m()(i.prototype,"openLoadingLayer",[v.d],Object.getOwnPropertyDescriptor(i.prototype,"openLoadingLayer"),i.prototype),m()(i.prototype,"closeLoadingLayer",[v.d],Object.getOwnPropertyDescriptor(i.prototype,"closeLoadingLayer"),i.prototype),r=m()(i.prototype,"_onEachUpload",[v.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=t.code,i=t.response;if("SUCCESS"===n){var r=i.id,o=e._webtoonLayerService.getImageStore(r);if(!e._webtoonLayerService.isOpen()||!o)return;e._imageComponentService.changeImage(o,i)}}}}),m()(i.prototype,"_insertImage",[v.d],Object.getOwnPropertyDescriptor(i.prototype,"_insertImage"),i.prototype),m()(i.prototype,"changeImageOrder",[v.d],Object.getOwnPropertyDescriptor(i.prototype,"changeImageOrder"),i.prototype),m()(i.prototype,"updateCurrentPage",[v.d],Object.getOwnPropertyDescriptor(i.prototype,"updateCurrentPage"),i.prototype),m()(i.prototype,"changeLayout",[v.d],Object.getOwnPropertyDescriptor(i.prototype,"changeLayout"),i.prototype),m()(i.prototype,"insertWebtoon",[_.history,v.d],Object.getOwnPropertyDescriptor(i.prototype,"insertWebtoon"),i.prototype),m()(i.prototype,"deleteImage",[v.d],Object.getOwnPropertyDescriptor(i.prototype,"deleteImage"),i.prototype),m()(i.prototype,"uploadStatus",[v.d],Object.getOwnPropertyDescriptor(i.prototype,"uploadStatus"),i.prototype),i);t.a=S},244:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d=n(60),h=n.n(d),g=n(1),f=n.n(g),m=n(58),y=n.n(m),v=n(0),_=n.n(v),b=n(50),S=n.n(b),C=(n(61),n(16)),I=n(51),O=n(49),T=n(165),L=(i=O.g.shallow,r=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,h()(n,"opened",o,y()(n)),h()(n,"images",a,y()(n)),h()(n,"layout",s,y()(n)),h()(n,"horizontalDirection",c,y()(n)),h()(n,"currentPageIndex",l,y()(n)),h()(n,"isLoading",u,y()(n)),h()(n,"uploadCompleted",p,y()(n));var i=t.state,r=void 0===i?{}:i;return n.opened=Object(C.a)(r,"opened",n.opened),n.images=Object(C.a)(r,"images",n.images),n.layout=Object(C.a)(r,"layout",n.layout),n.horizontalDirection=Object(C.a)(r,"horizontalDirection",n.horizontalDirection),n}_()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.editWebtoon=function(e){var t=e.images,n=void 0===t?[]:t,i=e.layout,r=e.horizontalDirection,o=e.currentPageIndex;this.currentPageIndex=o,this.images=n,this.layout=i||this.layout,this.horizontalDirection=r||this.horizontalDirection,this.open()},n.close=function(){this.opened=!1,this._reset()},n.openLoadingLayer=function(){this.isLoading=!0},n.closeLoadingLayer=function(){this.isLoading=!1},n.insertShellImage=function(e){var t=this.pageMaxCount;this._insertShellImage(e,t)},n._insertShellImage=function(e,t){var n=this;e.forEach(function(e,i){n.images.splice(i+t+1,0,e)})},n.deleteImage=function(e){this.layout===T.b.HORIZONTAL&&(e<this.currentPageIndex||e===this.pageMaxCount-1)&&this.updateCurrentPage(this.currentPageIndex-1),this.images.splice(e,1)},n.updateCurrentPage=function(e){this.currentPageIndex=e},n.changeLayout=function(e){e!==this.layout&&(this.layout=e)},n.changeImageOrder=function(e,t){var n=this.images.splice(e,1)[0];this.images.splice(t,0,n)},n.uploadStatus=function(e){this.uploadCompleted=e},n._reset=function(){this.images=[],this.layout=T.b.HORIZONTAL,this.currentPageIndex=0},f()(t,[{key:"pageMaxCount",get:function(){return this.images.length}},{key:"imageExist",get:function(){return!!this.images.length}},{key:"readyToUpload",get:function(){return this.images.length>=2&&this.images.every(function(e){var t=e.path,n=e.src,i=e.phase;return!(e.internalResource&&""===t&&""!==n)&&i!==I.O.PROCESSING})}},{key:"isDraggableStatus",get:function(){return this.images.length>1}}]),t}(I.e),o=S()(r.prototype,"opened",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=S()(r.prototype,"images",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=S()(r.prototype,"layout",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.b.HORIZONTAL}}),c=S()(r.prototype,"horizontalDirection",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.a.RIGHT_TO_LEFT}}),l=S()(r.prototype,"currentPageIndex",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=S()(r.prototype,"isLoading",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=S()(r.prototype,"uploadCompleted",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S()(r.prototype,"pageMaxCount",[O.e],Object.getOwnPropertyDescriptor(r.prototype,"pageMaxCount"),r.prototype),S()(r.prototype,"imageExist",[O.e],Object.getOwnPropertyDescriptor(r.prototype,"imageExist"),r.prototype),S()(r.prototype,"readyToUpload",[O.e],Object.getOwnPropertyDescriptor(r.prototype,"readyToUpload"),r.prototype),S()(r.prototype,"isDraggableStatus",[O.e],Object.getOwnPropertyDescriptor(r.prototype,"isDraggableStatus"),r.prototype),r);t.a=L},245:function(e,t,n){"use strict";var i,r,o,a=n(56),s=n.n(a),c=n(60),l=n.n(c),u=n(58),p=n.n(u),d=n(0),h=n.n(d),g=n(50),f=n.n(g),m=(n(61),n(49)),y=n(376),v=n(54),_=n.n(v),b=n(1107),S=n(191),C=n(111),I={displayCount:1,displayDuration:3e3,roundedShape:!1,tutorialNext:""};function O(e,t){return"tooltip_"+e.replace(/-/g,"_")+"_"+t}var T=((o=function(e){function t(t){var n;return(n=e.call(this,t)||this)._tooltipRef=m.b.createRef(),n._timeoutId=null,l()(n,"_opened",r,p()(n)),n._handleOpen=Object(m.d)(function(){var e=n._tooltipInfo,t=e.displayCount,i=e.displayDuration,r=e.className,o=e.layoutName,a=(b.a.get(O(r,o))||{}).count,s=void 0===a?0:a;s<t&&(b.a.set(O(r,o),'{"count": '+(s+1)+"}"),n._timeoutId=setTimeout(function(){n._opened=!1},i),n._opened=!0)}),n._handleClose=Object(m.d)(function(){n._opened=!1}),n._saveTutorialNext=function(){var e=n._tooltipInfo.tutorialNext;e&&b.a.set(S.h,e)},n._handleClickOutside=function(e){var t=n._tooltipRef.current;t&&!t.contains(e.target)&&n._handleClose()},m.f.when(function(){return n._opened},function(){setTimeout(function(){n._saveTutorialNext()},0)}),n}h()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.type;this._tooltipInfo=s()({},I,C.n[e]),this._handleOpen(),document.addEventListener("click",this._handleClickOutside)},n.componentWillUnmount=function(){clearTimeout(this._timeoutId),document.removeEventListener("click",this._handleClickOutside)},n.render=function(){var e;if(!this._opened)return null;var t=this._tooltipInfo,n=t.text,i=t.position,r=t.className,o=t.roundedShape,a=_()(r,((e={})[r+"-position-"+i]=!!i,e["se-ai-highlight-tooltip-rounded"]=!i&&o,e));return m.b.createElement("div",{className:a,ref:this._tooltipRef},m.b.createElement("p",{className:r+"-text"},n))},t}(m.b.Component)).propTypes={type:m.a.string.isRequired},i=o,r=f()(i.prototype,"_opened",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=Object(y.b)(T)},246:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","label","labelVisible","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"imageEdit:title":i,a=e.label,c=void 0===a?"imageEdit:label":a,l=e.labelVisible,u=void 0===l||l,p=e.logId,h=void 0===p?"imgedt":p,y=s()(e,m);return d.b.createElement(g.a,o()({},y,{type:n,title:r,label:c,logId:h,labelVisible:u,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editImage()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},247:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return a});var i={VIDEO:"video",RICH:"rich"},r={DEFAULT:"default"},o={NORMAL:"normal",FIT:"fit",EXTEND:"extend",PAGEFULL:"pagefull"},a=["facebook","twitter","instagram"]},248:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a});var i={DEFAULT:"default",LAYOUT1:"table_layout1",LAYOUT2:"table_layout2",LAYOUT3:"table_layout3",LAYOUT4:"table_layout4",LAYOUT5:"table_layout5",LAYOUT6:"table_layout6",LAYOUT7:"table_layout7"},r={TABLET:6,MOBILE:3},o={TABLET:640,MOBILE:360},a={thinLine:{tableStyle:"border-style: solid; border-width: 1px 0px 0px 1px;",columnStyle:"border-style: solid; border-width: 0px 1px 1px 0px;"},thickLine:{tableStyle:"border-style: solid; border-width: 2px 0px 0px 2px;",columnStyle:"border-style: solid; border-width: 0px 2px 2px 0px;"},dottedLine:{tableStyle:"border-style: dashed; border-width: 1px 0px 0px 1px;",columnStyle:"border-style: dashed; border-width: 0px 1px 1px 0px;"},doubleLine:{tableStyle:"border-style: solid; border-width: 1px; border-spacing: 1px;",columnStyle:"border-style: solid; border-width: 1px;"},thickDoubleLine:{tableStyle:"border-style: solid; border-width: 1px 2px 2px 1px; border-spacing: 1px;",columnStyle:"border-style: solid; border-width: 2px 1px 1px 2px;"},none:{tableStyle:"border-style: none; border-width: 0px;",columnStyle:"border-style: none; border-width: 0px;"}}},287:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=n(1308),p=(i=function(e){function t(){var t;return(t=e.call(this)||this)._videoThumbnailLayerService=c.W.get("videoThumbnailLayerService"),t._editingService=c.W.get("editingService"),t._videoUploadService=c.W.get("videoUploadService"),t._videoUploadLayerService=c.W.get("videoUploadLayerService"),t._videoComponentService=c.W.get("videoComponentService"),t._libraryPanelLayoutService=c.W.get("libraryPanelLayoutService"),t._virtualEditable=c.W.get("virtualEditable"),t._toastLayerService=c.W.get("toastLayerService"),t._events={complete:function(e){return t.complete(e)},error:function(e){return t.error(e)},toast:function(e){return t._showWarning(e)}},t}o()(t,e);var n=t.prototype;return n.mountPCBGUploader=function(e,t){this._target=e,this._videoUploadService.bindEvents(this._events),this._videoUploadService.mountPCBGUploader(e,t)},n.unmountUploader=function(e){void 0===e&&(e=this._target),this._videoUploadService.unmountUploader(e),this._videoUploadService.unbindEvents(),this._target=null},n.close=function(e){this._videoThumbnailLayerService.close(e),this._videoUploadService.unbindEvents()},n._updateCompletedVideo=function(e){void 0===e&&(e=[]),e.forEach(function(e){var t=e.targetComponent,n=e.videoData,i=n.fileSize,r=n.playTime,o=n.thumbnail,a=n.width,s=n.height;t.fileSize=i,t.playTime=r,t.updateThumbnail(o.src,a,s)})},n._updateErrorPhase=function(e){void 0===e&&(e=[]),e.forEach(function(e){e.targetComponent.updatePhase(c.O.ERROR)})},n._groupByStatus=function(e){var t=this._videoComponentService.getVideoIdsByProcessing();return e.reduce(function(e,n){var i=t[n.vid];if(!i)return e;var r={videoData:n,targetComponent:i};return"complete"===n.status?e.completes.push(r):e.errors.push(r),e},{completes:[],errors:[]})},n._completeEach=function(e){void 0===e&&(e=[]);var t=this._groupByStatus(e),n=t.completes,i=void 0===n?[]:n,r=t.errors,o=void 0===r?[]:r;this._updateCompletedVideo(i),this._updateErrorPhase(o),this._libraryPanelLayoutService.updateMediaList()},n._completeForSuccess=function(){this.close()},n.complete=function(e){var t=e.mode,n=e.videos;t===u.a.EACH_VIDEO_PROCESSED?this._completeEach(n):t===u.a.BACKGROUND_UPLOAD_FINISHED?this._completeForSuccess():t===u.a.UPLOADER_REOPENED&&this.close(!1)},n.error=function(){this.close(!1)},n._showWarning=function(e){e&&this._toastLayerService.warningMessage(e)},t}(c.m),s()(i.prototype,"_showWarning",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"_showWarning"),i.prototype),i);t.a=p},288:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(16)),g=n(51),f=n(49),m=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this,a()(n,"opened",r,c()(n));var i=t.state,o=void 0===i?{}:i;return n.opened=Object(h.a)(o,"opened",n.opened),n}u()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},t}(g.e),r=d()(i.prototype,"opened",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=m},289:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i={TEXT:"text",IMAGE:"image"},r={WHITE:"white",BLACK:"black"}},290:function(e,t,n){"use strict";var i,r,o,a,s,c=n(60),l=n.n(c),u=n(58),p=n.n(u),d=n(0),h=n.n(d),g=n(50),f=n.n(g),m=(n(61),n(16)),y=n(51),v=n(49),_=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,l()(n,"opened",r,p()(n)),l()(n,"preview",o,p()(n)),l()(n,"isLoading",a,p()(n)),l()(n,"copiedUrl",s,p()(n)),n.dimColor="transparent";var i=t,c=i.state,u=void 0===c?{}:c,d=i.config,h=void 0===d?{}:d;return n._configAgent=y.W.get("configAgent"),n.dimColor=Object(m.a)(h,"dimColor",n.dimColor),n.opened=Object(m.a)(u,"opened",n.opened),n.preview=Object(m.a)(u,"preview",n.preview),n.isLoading=Object(m.a)(u,"isLoading",n.isLoading),n}h()(t,e);var n=t.prototype;return n.open=function(e){this.updatePreview(void 0),this.copiedUrl=e,this.opened=!0},n.close=function(){this.opened=!1,this.isLoading=!1,this.copiedUrl=""},n.reset=function(){this.copiedUrl="",this.updatePreview(void 0)},n.updatePreview=function(e){!this.isLoading&&e||(this.preview=e)},n.setLoading=function(e){this.isLoading=e},n.changeToTextLayout=function(){this.preview.changeToTextLayout()},t}(y.e),r=f()(i.prototype,"opened",[v.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=f()(i.prototype,"preview",[v.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),a=f()(i.prototype,"isLoading",[v.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=f()(i.prototype,"copiedUrl",[v.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i);t.a=_},291:function(e,t,n){"use strict";var i,r,o,a,s,c=n(60),l=n.n(c),u=n(1),p=n.n(u),d=n(58),h=n.n(d),g=n(0),f=n.n(g),m=n(50),y=n.n(m),v=(n(61),n(16)),_=n(99),b=n(194),S=n(96),C=n(1123),I=n(75),O=n(157),T=n(51),L=n(49),E=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,l()(n,"opened",r,h()(n)),l()(n,"spellCheckDocument",o,h()(n)),l()(n,"spellCheckList",a,h()(n)),l()(n,"selectedId",s,h()(n));var i=t.state,c=void 0===i?{}:i;return n.opened=Object(v.a)(c,"opened",n.opened),n.spellCheckDocument=Object(v.a)(c,"spellCheckDocument",n.spellCheckDocument),n.spellCheckList=Object(v.a)(c,"spellCheckList",n.spellCheckList),n.selectedId=Object(v.a)(c,"selectedId",n.selectedId),n}f()(t,e);var n=t.prototype;return n.enterSpellCheck=function(e){var t=e.spellCheckDocument,n=e.spellCheckList;this._splitErrataPosition(t,n),this._setStoreStates(t,n),this._openLayout(),this.checkTargetList.length>0&&this.selectFirstErrata()},n.selectFirstErrata=function(){this.selectedId=this.checkTargetList[0].id},n.selectFirstCorrected=function(){this.selectedId=this.correctedList[0].id},n.movePrev=function(e){void 0===e&&(e=!1);var t=this.spellCheckList,n=this.currentCheckInfo,i=Object(S.a)(t,n);if(0!==i){var r={corrected:e,excluded:!1},o=Object(C.a)(t,r,i-1);o<0||(this.selectedId=t[o].id)}},n.moveNext=function(e){void 0===e&&(e=!1);var t=this.spellCheckList,n=this.currentCheckInfo,i=Object(S.a)(t,n);if(i!==n.length-1){var r={corrected:e,excluded:!1},o=Object(S.a)(t,r,i+1);o<0||(this.selectedId=t[o].id)}},n.correctTargetErrata=function(e){this._correctErrata(this.currentCheckInfo,e)},n.correctSameErrata=function(e){var t=this;this.sameConditionList.forEach(function(n){t._correctErrata(n,e)})},n.correctAll=function(){var e=this;this.checkTargetList.forEach(function(t){var n=t.suggests;n.length&&e._correctErrata(t,n[0].term)})},n.excludeTargetErrata=function(){this._excludeErrata(this.currentCheckInfo)},n.excludeSameErrata=function(){var e=this;this.sameConditionList.forEach(function(t){e._excludeErrata(t)})},n.cancelCorrected=function(){this._cancelCorrected(this.currentCheckInfo)},n.cancelSameCorrected=function(){var e=this;this.sameConditionList.forEach(function(t){e._cancelCorrected(t)})},n.closeSpellCheck=function(){this._setStoreStates(),this._closeLayout()},n.togglePopup=function(e){this.selectedId=e||""},n._findParagraph=function(e,t){var n=t.compId,i=t.unitId,r=t.paraId,o=Object(_.a)(e,{id:n}).getTextUnits();return Object(_.a)(o,{id:i}).getParagraphById(r)},n._setStoreStates=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.spellCheckDocument.replace(e),this.spellCheckList.replace(t)},n._openLayout=function(){this.opened=!0},n._closeLayout=function(){this.opened=!1},n._splitErrataPosition=function(e,t){var n=this;t.forEach(function(t){var i=t.position,r=n._findParagraph(e,i),o=r.getNodeInfoAfterOffset(i.startOffset),a=o.node,s=o.offset;if(0===s)i.startNodeId=a.id;else{var c={nodeId:a.id,offset:s},l=r.splitNode(c).back;i.startNodeId=l.id}var u=r.getNodeInfoBeforeOffset(i.endOffset),p=u.node,d=u.offset;if(d===p.value.length)i.endNodeId=p.id;else{var h={nodeId:p.id,offset:d},g=r.splitNode(h).front;i.endNodeId=g.id}})},n._correctErrata=function(e,t){if(!e.corrected){var n=e.position,i=n.startNodeId,r=n.endNodeId,o=this._findParagraph(this.spellCheckDocument,e.position),a=o.getNodesBetween(i,r);e.correctInfo={},e.correctInfo.originalNodes=a.map(function(e){return e.cloneNode()});var s=a[0];if(s.value=t,o.replaceNodesBetween(i,r,s),e.position.endNodeId=i,e.corrected=!0,e.suggests.length){var c=Object(_.a)(e.suggests,{term:t});Object.assign(e.correctInfo,c)}else e.correctInfo.term=t}},n._excludeErrata=function(e){e.excluded||(e.excluded=!0)},n._cancelCorrected=function(e){if(e.corrected){var t=this._findParagraph(this.spellCheckDocument,e.position),n=e.position.startNodeId,i=e.correctInfo.originalNodes.map(function(e){return e});t.replaceNodesBetween(n,n,i),delete e.correctInfo,e.position.endNodeId=Object(I.a)(i).id,e.corrected=!1}},p()(t,[{key:"spellCheckMap",get:function(){return Object(O.a)(this.spellCheckList,function(e,t){return e[t.position.compId]?e[t.position.compId].push(t):e[t.position.compId]=[t],e},{})}},{key:"currentCheckInfo",get:function(){return Object(_.a)(this.spellCheckList,{id:this.selectedId})}},{key:"checkTargetList",get:function(){return Object(b.a)(this.spellCheckList,{corrected:!1,excluded:!1})}},{key:"correctedList",get:function(){return Object(b.a)(this.spellCheckList,{corrected:!0})}},{key:"excludedList",get:function(){return Object(b.a)(this.spellCheckList,{excluded:!0})}},{key:"sameConditionList",get:function(){var e=this.currentCheckInfo||{},t=e.errata,n=e.correctInfo,i=e.corrected,r=e.excluded,o=i?{errata:t,correctInfo:{term:n.term},corrected:i,excluded:r}:{errata:t,corrected:i,excluded:r};return Object(b.a)(this.spellCheckList,o)}}]),t}(T.w),r=y()(i.prototype,"opened",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=y()(i.prototype,"spellCheckDocument",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=y()(i.prototype,"spellCheckList",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=y()(i.prototype,"selectedId",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y()(i.prototype,"spellCheckMap",[L.e],Object.getOwnPropertyDescriptor(i.prototype,"spellCheckMap"),i.prototype),y()(i.prototype,"currentCheckInfo",[L.e],Object.getOwnPropertyDescriptor(i.prototype,"currentCheckInfo"),i.prototype),y()(i.prototype,"checkTargetList",[L.e],Object.getOwnPropertyDescriptor(i.prototype,"checkTargetList"),i.prototype),y()(i.prototype,"correctedList",[L.e],Object.getOwnPropertyDescriptor(i.prototype,"correctedList"),i.prototype),y()(i.prototype,"excludedList",[L.e],Object.getOwnPropertyDescriptor(i.prototype,"excludedList"),i.prototype),y()(i.prototype,"sameConditionList",[L.e],Object.getOwnPropertyDescriptor(i.prototype,"sameConditionList"),i.prototype),i);t.a=E},292:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(56),l=n.n(c),u=n(0),p=n.n(u),d=n(50),h=n.n(d),g=n(51),f=n(49),m=n(52),y=n(1309),v=n(1308),_=n(1310),b=(i=function(e){function t(){var t;return(t=e.call(this)||this)._videoUploadLayerService=g.W.get("videoUploadLayerService"),t._videoUploadService=g.W.get("videoUploadService"),t._videoComponentService=g.W.get("videoComponentService"),t._videoThumbnailLayerService=g.W.get("videoThumbnailLayerService"),t._editingService=g.W.get("editingService"),t._alertLayerService=g.W.get("alertLayerService"),t._libraryPanelLayoutService=g.W.get("libraryPanelLayoutService"),t._eventDispatcherService=g.W.get("eventDispatcherService"),t._i18n=g.W.get("i18n"),t._toastLayerService=g.W.get("toastLayerService"),t._events={close:function(){t._flushAllVideos(),t.close({completed:!1})},complete:function(e){t.complete(e),t._onUploadSuccess(e)},error:function(e){return t.errorHandling(e)},toast:function(e){return t._showWarning(e)}},t}p()(t,e);var n=t.prototype;return n.mountUploader=function(e,t){var n=this,i=this._videoUploadService.getFileLimitInfo(),r=i.numFileLimit,o=i.maxUploadCount,a=this._videoUploadLayerService.getShowUploadButton(),s=t.mediaMeta,c=t.thumbnail,u=t.serviceData;if(!(s&&c&&u)&&r<=0)return this._handleErrorUploadCount({close:function(){return n.close({completed:!1})}},{maxUploadCount:o});this._videoUploadService.bindEvents(this._events),this._videoUploadService.mountPCUploader(e,this._i18n,l()({},t,{numFileLimit:r,showUploadButton:a}))},n.unmountUploader=function(e){this._videoUploadService.unmountUploader(e)},n.close=function(e){this._videoUploadService.unbindEvents(),this._videoUploadLayerService.close(e)},n._getProcessingVideos=function(e){var t=e.map(function(e){return e.vid});return this._videoComponentService.getCompsByProcessing().reduce(function(e,n){return t.includes(n.vid)?e.needUpdate.push(n):e.needRemove.push(n),e},{needRemove:[],needUpdate:[]})},n._flushVideos=function(e){var t=e.map(function(e){return e.id});Array.isArray(t)&&this._editingService.deleteComponents(t)},n._flushAllVideos=function(){var e=this._videoComponentService.getCompsByProcessing().map(function(e){return e.id});Array.isArray(e)&&this._editingService.deleteComponents(e)},n._updateVideoComp=function(e,t){e.setState(t)},n._insertVideoComp=function(e){var t=this._videoComponentService.createVideoComponent(e);this._editingService.insert({sourceComponents:[t]})},n._updateVideoData=function(e,t){var n=this;void 0===t&&(t=[]);var i=t.reduce(function(e,t){return e[t.vid]=t,e},{});e.forEach(function(e){var t=i[e.vid];t&&n._updateVideoComp(t,e)}),this._libraryPanelLayoutService&&this._libraryPanelLayoutService.updateMediaList()},n._onUploadSuccess=function(e){var t=e.videos;if(e.mode!==v.a.EDIT_COMPLETED){var n=Object(y.a)(_.b.VIDEO,t);n&&this._eventDispatcherService.dispatch(g.z.RESOURCE_UPLOADED,n)}},n._insertVideoData=function(e){var t=this;this._preprocForMaxCountCheck(e,function(e){e.forEach(function(e){t._insertVideoComp(e)})}),this._libraryPanelLayoutService&&this._libraryPanelLayoutService.updateMediaList()},n._updateMediaMeta=function(e){var t=e.serviceData,n=e.mediaMeta;this._videoComponentService.updateServiceData(t),this._videoComponentService.updateMediaMeta(n)},n._completeForMediaMeta=function(e){var t=this;Array.isArray(e)&&e.forEach(function(e){var n=e.thumbnail;n&&t._videoComponentService.updateThumbanil({src:n}),t._updateMediaMeta(e)}),this.close({completed:!0})},n._changeBackgroundMode=function(){var e=s()(o.a.mark(function e(t){var n,i=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._getProcessingVideos(t),this.close({completed:!1}),this._flushVideos(n.needRemove),this._insertVideoData(t),e.next=6,this._videoThumbnailLayerService.open().then(function(e){if(!1===e)return i._videoUploadLayerService.openVideoUploader({showUploadButton:!1})});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._completeForSuccess=function(e){var t=this._getProcessingVideos(e),n=t.needRemove,i=t.needUpdate;this.close({completed:!0}),this._flushVideos(n),this._insertVideoData(e,i)},n._updateForSuccess=function(e){var t=this._getProcessingVideos(e),n=t.needRemove,i=t.needUpdate;this.close({completed:!0}),this._flushVideos(n),this._updateVideoData(e,i)},n.complete=function(e){var t=e.mode,n=e.videos;t===v.a.BACKGROUND_UPLOAD_STARTED?this._changeBackgroundMode(n):t===v.a.EDIT_COMPLETED?this._completeForMediaMeta(n):t===v.a.EVERY_VIDEO_PROCESSED?this._completeForSuccess(n):t===v.a.USER_THUMBNAIL_UPLOADED?this._updateForSuccess(n):this.close({completed:!1})},n.errorHandling=function(){this._flushAllVideos(),this.close({completed:!1}),this._alertLayerService.open({type:"alert",title:this._i18n("errorLazy:title"),description:this._i18n("errorLazy:description")})},n._preprocForMaxCountCheck=function(e,t){if(this._videoUploadService.isExceededMaxCount(e)){var n=this._videoUploadService.videoMaxUploadCount;this._alertLayerService.open({type:"alert",title:this._i18n("limits:title_exceeded_count_by_max"),description:this._i18n("limits:video_description_exceeded_count_by_max",{maxCount:n}),isDimUse:!1,onClickConfirm:function(){t(e)},onClickCancel:function(){t(e)}})}else t&&t(e)},n._handleErrorUploadCount=function(e,t){var n=e.close,i=t.maxUploadCount,r=this._i18n("naverVideoUploader:UP_TO_N_CAN_BE_ADDED").replace("%s",i);n&&n(),this._alertLayerService.open({type:"alert",title:this._i18n("naverVideoUploader:EXCEED_POSSIBLE_NUMBER"),description:r})},n._showWarning=function(e){e&&this._toastLayerService.warningMessage(e)},t}(g.m),h()(i.prototype,"close",[f.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),h()(i.prototype,"_insertVideoData",[f.d],Object.getOwnPropertyDescriptor(i.prototype,"_insertVideoData"),i.prototype),h()(i.prototype,"_updateMediaMeta",[m.history],Object.getOwnPropertyDescriptor(i.prototype,"_updateMediaMeta"),i.prototype),h()(i.prototype,"_changeBackgroundMode",[m.history,f.d],Object.getOwnPropertyDescriptor(i.prototype,"_changeBackgroundMode"),i.prototype),h()(i.prototype,"_completeForSuccess",[m.history,f.d],Object.getOwnPropertyDescriptor(i.prototype,"_completeForSuccess"),i.prototype),h()(i.prototype,"_updateForSuccess",[f.d],Object.getOwnPropertyDescriptor(i.prototype,"_updateForSuccess"),i.prototype),h()(i.prototype,"_showWarning",[f.d],Object.getOwnPropertyDescriptor(i.prototype,"_showWarning"),i.prototype),i);t.a=b},293:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u=n(60),p=n.n(u),d=n(58),h=n.n(d),g=n(0),f=n.n(g),m=n(50),y=n.n(m),v=(n(61),n(16)),_=n(51),b=n(49),S=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,p()(n,"opened",r,h()(n)),p()(n,"vid",o,h()(n)),p()(n,"mediaMeta",a,h()(n)),p()(n,"thumbnail",s,h()(n)),p()(n,"serviceData",c,h()(n)),p()(n,"showUploadButton",l,h()(n));var i=t.state,u=void 0===i?{}:i;return n.opened=Object(v.a)(u,"opened",n.opened),n}f()(t,e);var n=t.prototype;return n.open=function(e){var t=void 0===e?{}:e,n=t.vid,i=t.mediaMeta,r=t.thumbnail,o=t.serviceData,a=t.showUploadButton,s=void 0===a||a;this.vid=n,this.mediaMeta=i,this.thumbnail=r,this.serviceData=o,this.showUploadButton=s,this.opened=!0},n.close=function(){this.opened=!1},t}(_.e),r=y()(i.prototype,"opened",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=y()(i.prototype,"vid",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=y()(i.prototype,"mediaMeta",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=y()(i.prototype,"thumbnail",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=y()(i.prototype,"serviceData",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=y()(i.prototype,"showUploadButton",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i);t.a=S},294:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(51),g=n(52),f=["elementRef","onClick","children","type"],m=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this)._eventDispatcherService=h.W.get("eventDispatcherService"),n}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.elementRef,n=(e.onClick,e.children),i=e.type,r=void 0===i?"button":i,a=s()(e,f);return d.b.createElement("button",o()({type:r},a,{ref:t,onClick:this._handleClick}),n)},n._handleClick=function(e){var t=this,n={dataset:e.currentTarget.dataset,next:function(){t.props.onClick(e)}};!this._eventDispatcherService.dispatch(h.z.CLICK,n,!0)||this.props.onClick(e)},t}(d.b.Component),p()(i.prototype,"_handleClick",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);m.defaultProps={elementRef:d.b.createRef(),"data-group":"unknown","data-name":"unknown",onClick:function(){}},m.propTypes={elementRef:d.a.oneOfType([d.a.func,d.a.shape({current:d.a.instanceOf(Element)})]),"data-group":d.a.string.isRequired,"data-name":d.a.string.isRequired,onClick:d.a.func},t.a=m},295:function(e,t,n){"use strict";var i,r=n(50),o=n.n(r),a=n(51),s=n(49),c=n(52),l=(i=function(){function e(){this._configAgent=a.W.get("configAgent"),this._propertyChangeService=a.W.get("propertyChangeService"),this._storageService=a.W.get("storageService"),this._toastLayerService=a.W.get("toastLayerService"),this._i18n=a.W.get("i18n")}var t=e.prototype;return t.compareStyle=function(e,t){var n=e.styleName,i=e.warningMessage;void 0===t&&(t=function(){return!0});var r=t(this._propertyChangeService.getStyleValues(n));return!(!(!1!==this._configAgent.get("productConfig.allowSameFontAndBackgroundColor"))&&r)||(this._toastLayerService.warningMessage(i),!1)},t.changeBackgroundColor=function(e){var t=e.storageKey,n=e.recentColors;this._propertyChangeService.updateStyle(e),this._storageService.setStorageData(t,n)},t.changeFontColor=function(e){var t=e.storageKey,n=e.recentColors;this._propertyChangeService.updateStyle(e),this._storageService.setStorageData(t,n)},t.changeFontFamily=function(e){this._propertyChangeService.updateStyle(e)},t.changeFontSize=function(e){this._propertyChangeService.updateStyle(e)},t.changeLineHeight=function(e){var t=e.value;!t||parseInt(t)<50?this._toastLayerService.warningMessage(this._i18n("editingButtonUseCase:inputAtLeast50")):this._propertyChangeService.updateStyle(e)},t.changeListType=function(e){this._propertyChangeService.updateStyle(e)},t.toggleStrikeThrough=function(){this._propertyChangeService.toggleStyle("strikeThrough")},t.toggleSubscript=function(){this._propertyChangeService.toggleStyle("subscript")},t.toggleSuperscript=function(){this._propertyChangeService.toggleStyle("superscript")},t.toggleUnderline=function(){this._propertyChangeService.toggleStyle("underline")},t.toggleBold=function(){this._propertyChangeService.toggleStyle("bold")},t.toggleItalic=function(){this._propertyChangeService.toggleStyle("italic")},t.toggleDropCap=function(){this._propertyChangeService.toggleStyle("dropCap")},e}(),o()(i.prototype,"changeBackgroundColor",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeBackgroundColor"),i.prototype),o()(i.prototype,"changeFontColor",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeFontColor"),i.prototype),o()(i.prototype,"changeFontFamily",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeFontFamily"),i.prototype),o()(i.prototype,"changeFontSize",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeFontSize"),i.prototype),o()(i.prototype,"changeLineHeight",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeLineHeight"),i.prototype),o()(i.prototype,"changeListType",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeListType"),i.prototype),o()(i.prototype,"toggleStrikeThrough",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleStrikeThrough"),i.prototype),o()(i.prototype,"toggleSubscript",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleSubscript"),i.prototype),o()(i.prototype,"toggleSuperscript",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleSuperscript"),i.prototype),o()(i.prototype,"toggleUnderline",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleUnderline"),i.prototype),o()(i.prototype,"toggleBold",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleBold"),i.prototype),o()(i.prototype,"toggleItalic",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleItalic"),i.prototype),o()(i.prototype,"toggleDropCap",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleDropCap"),i.prototype),i);t.a=l},296:function(e,t,n){"use strict";var i=n(55),r=n.n(i),o=n(17),a=n.n(o),s=n(0),c=n.n(s),l=n(49),u=n(376),p=n(51),d=n(54),h=n.n(d),g=["forwardRef","className","children"],f=function(e){function t(){var t;return(t=e.call(this)||this)._domAccessor=p.W.get("domAccessor"),t.state={overLayerPosition:!1},t}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateLayerPositionState()},n.render=function(){var e=this.props,t=e.forwardRef,n=e.className,i=e.children,o=a()(e,g),s=this.state.overLayerPosition?this._adjustLayerPosition():{},c=h()(n);return l.b.createElement("div",r()({ref:t,className:c,style:s},o),i)},n._propertyToolbarPosRight=function(){var e=this._domAccessor.getPropertyToolbar();return e?e.getBoundingClientRect().right:0},n._updateLayerPositionState=function(){var e=this._propertyToolbarPosRight(),t=this.props.forwardRef.current,n=t.getBoundingClientRect().right,i=n>e;if(!i)return null;this._layer=t,this._layerRight=n,this._toolbarRight=e,this._layerDefaultLeft=parseInt(window.getComputedStyle(this._layer).left)||0,this.setState({overLayerPosition:i})},n._adjustLayerPosition=function(){var e=this._domAccessor.getCanvas().getBoundingClientRect().right,t=this._toolbarRight-e,n=this._layerRight-this._toolbarRight+t;return{left:this._layerDefaultLeft-n+"px"}},t}(l.b.Component);f.defaultProps={children:null},f.propTypes={children:l.a.oneOfType([l.a.element,l.a.array]),forwardRef:l.a.oneOfType([l.a.func,l.a.shape({current:l.a.instanceOf(Element)})]),className:l.a.string},t.a=Object(u.b)(f)},298:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(54),l=n.n(c),u=n(49),p=n(376),d=n(52),h=n(59),g=n(129),f=n(51),m=n(99),y=(i=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.setState(this._mapStateFromProps(this.props))},n.UNSAFE_componentWillReceiveProps=function(e){this.setState(this._mapStateFromProps(e))},n.render=function(){var e=this,t=this.props,n=t.id,i=t.name,r=t.namespace,o=t.deviceType,a=t.groups,s=t.type,c=t.i18n,p=t.logAreaId,d=t.focused,m=this.state.selected,y=a.length,v=o===f.t.DESKTOP,_=l()("se-"+r+"-toolbar-cycle-toggle-container"),b=a.map(function(t,o){var f,_=t.value,b=t.logId,S=m===_,C=0===o?a[y-1]:a[o-1],I=m===C.value,O=l()("se-"+r+"-toolbar-"+s+"-button","se-"+i+"-"+_+"-toolbar-button",((f={})["se-"+s+"-button-current"]=S,f["se-"+s+"-button-next"]=I,f));return u.b.createElement(g.a,{logAreaId:p,logId:b,focused:S&&d,namespace:r,type:h.b.CYCLE_TOGGLE,dataName:n,className:O,i18n:c,handleClick:e.handleChange,key:_,dataValue:_},u.b.createElement("span",{className:"se-toolbar-icon"}),u.b.createElement("span",{className:"se-blind","aria-hidden":v},c(C.label)),v&&u.b.createElement("span",{className:"se-toolbar-tooltip"},c(C.label)))});return u.b.createElement("div",{className:_,"data-type":h.b.CYCLE_TOGGLE,"data-name":i},b)},n._mapStateFromProps=function(e){return{selected:this.decideSelectedValue(e)}},n._doNotContainsValueInGroups=function(e,t){return!Object(m.a)(e,function(e){return e.value===t})},n.decideSelectedValue=function(e){void 0===e&&(e={});var t=e,n=t.value,i=t.groups;return this._doNotContainsValueInGroups(i,n)?(i[0]||{}).value:n},n.handleChange=function(e){var t=e.currentTarget.dataset.value,n={event:e,id:this.props.id,name:this.props.name,title:this.props.title,label:this.props.label,value:t};this.setState({selected:t}),this.props.onChange(n)},t}(u.b.Component),s()(i.prototype,"handleChange",[d.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleChange"),i.prototype),i);y.defaultProps={label:"",id:"",name:"",title:"",focused:!1,namespace:"",value:null,onChange:function(){},i18n:function(e){return e}},y.propTypes={id:u.a.string,name:u.a.string,label:u.a.string,title:u.a.string,focused:u.a.bool,namespace:u.a.string,deviceType:u.a.string,type:u.a.string,groups:u.a.oneOfType([u.a.object,u.a.array]).isRequired,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool]),onChange:u.a.func,i18n:u.a.func,logAreaId:u.a.string,logId:u.a.string},t.a=Object(p.b)(y)},299:function(e,t,n){"use strict";var i,r=n(50),o=n.n(r),a=n(51),s=n(49),c=n(52),l=(i=function(){function e(){this._propertyChangeService=a.W.get("propertyChangeService")}var t=e.prototype;return t.changeLayout=function(e){var t=e.value;this._propertyChangeService.changeLayout(t)},t.changeQuotationLayout=function(e){var t=e.value;this._propertyChangeService.changeLayout(t)},t.changeContentMode=function(e){var t=e.value;this._propertyChangeService.changeContentMode(t)},e}(),o()(i.prototype,"changeLayout",[c.preventOnComponentProcessing,c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeLayout"),i.prototype),o()(i.prototype,"changeQuotationLayout",[c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeQuotationLayout"),i.prototype),o()(i.prototype,"changeContentMode",[c.preventOnComponentProcessing,c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeContentMode"),i.prototype),i);t.a=l},300:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"imageEditWithoutLabel:title":i,a=e.logId,c=void 0===a?"edit":a,l=s()(e,m);return d.b.createElement(g.a,o()({},l,{type:n,title:r,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editImage()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},301:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"imageAdjustWithoutLabel:title":i,a=e.logId,c=void 0===a?"adjust":a,l=s()(e,m);return d.b.createElement(g.a,o()({},l,{type:n,title:r,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.adjustImage()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},302:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"imageCropWithoutLabel:title":i,a=e.logId,c=void 0===a?"edit":a,l=s()(e,m);return d.b.createElement(g.a,o()({},l,{type:n,title:r,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.cropImage()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},303:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"imageFilterWithoutLabel:title":i,a=e.logId,c=void 0===a?"edit":a,l=s()(e,m);return d.b.createElement(g.a,o()({},l,{type:n,title:r,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.filterImage()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},304:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","label","labelVisible","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"imageReplacement:title":i,a=e.label,c=void 0===a?"imageReplacement:label":a,l=e.labelVisible,u=void 0===l||l,p=e.logId,h=void 0===p?"imgchg":p,y=s()(e,m);return d.b.createElement(g.a,o()({},y,{type:n,title:r,label:c,labelVisible:u,logId:h,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.changeImage()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},305:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DEFAULT:"default",MAP_TEXT:"map_text"}},307:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(51),h=n(49),g=n(52),f=(i=function(e){function t(){var t;return(t=e.call(this)||this)._talktalkEditLayerService=d.W.get("talktalkEditLayerService"),t._imageUploadService=d.W.get("imageUploadService"),t._alertLayerService=d.W.get("alertLayerService"),t._editingService=d.W.get("editingService"),t._imageBehavior=d.W.get("imageBehavior"),t}l()(t,e);var n=t.prototype;return n.changeTalktalkAccount=function(e){this._talktalkEditLayerService.changeAccountId(e)},n.changeBannerType=function(e){this._talktalkEditLayerService.changeBannerType(e)},n.loadImage=function(){var e=s()(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog();case 2:t=e.sent,this._talktalkEditLayerService.changeImage({}),this._imageBehavior.changeImage({targetStore:{id:"talktalkEditLayer"},selectedImages:t}).then(function(e){var t=e.succeededImages;t.length>0&&n._talktalkEditLayerService.changeImage(t[0].response)});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.close=function(){this._talktalkEditLayerService.close()},n.insertTalktalk=function(){var e=this._talktalkEditLayerService.createTalktalkComponent();this._editingService.insert({sourceComponents:[e]}),this._talktalkEditLayerService.close()},n.editTalktalk=function(){this._talktalkEditLayerService.editTalktalkComponent(),this._talktalkEditLayerService.close()},t}(d.m),p()(i.prototype,"changeTalktalkAccount",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"changeTalktalkAccount"),i.prototype),p()(i.prototype,"changeBannerType",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"changeBannerType"),i.prototype),p()(i.prototype,"loadImage",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"loadImage"),i.prototype),p()(i.prototype,"close",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),p()(i.prototype,"insertTalktalk",[g.history,h.d],Object.getOwnPropertyDescriptor(i.prototype,"insertTalktalk"),i.prototype),p()(i.prototype,"editTalktalk",[g.history,h.d],Object.getOwnPropertyDescriptor(i.prototype,"editTalktalk"),i.prototype),i);t.a=f},308:function(e,t,n){"use strict";var i,r,o,a,s,c,l=n(60),u=n.n(l),p=n(1),d=n.n(p),h=n(58),g=n.n(h),f=n(0),m=n.n(f),y=n(50),v=n.n(y),_=(n(61),n(16)),b=n(66),S=n(99),C=n(51),I=n(49),O=n(447),T=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,u()(n,"opened",r,g()(n)),u()(n,"talktalkAccountList",o,g()(n)),u()(n,"selectedAccountId",a,g()(n)),u()(n,"bannerType",s,g()(n)),u()(n,"image",c,g()(n));var i=t.state,l=void 0===i?{}:i;return n.opened=Object(_.a)(l,"opened",n.opened),n.editingMode=O.b.INSERT,n._configAgent=C.W.get("configAgent"),n}m()(t,e);var n=t.prototype;return n.open=function(e){var t=void 0===e?{}:e,n=t.accountId,i=t.bannerType,r=void 0===i?O.a.DEFAULT:i,o=t.image,a=this._configAgent.get("plugins.componentSettings.talktalk.config"),s=Object(_.a)(a,"talkTalkAccountList");Object(b.a)(s)||(this.talktalkAccountList.replace(s),this.selectedAccountId=Object(S.a)(s,{accountId:n})?n:s[0].accountId,this.bannerType=r,this.editingMode=n?O.b.EDIT:O.b.INSERT,this.bannerType===O.a.CUSTOM&&(this.image=o),this.opened=!0)},n.close=function(){this.talktalkAccountList.replace([]),this.selectedAccountId="",this.bannerType=O.a.DEFAULT,this.image={},this.opened=!1},n.changeAccountId=function(e){this.selectedAccountId=e},n.changeBannerType=function(e){this.bannerType=e},n.changeImage=function(e){this.image=e},d()(t,[{key:"selectedAccountInfo",get:function(){var e=this;return 0===this.talktalkAccountList.length?null:Object(S.a)(this.talktalkAccountList,function(t){return t.accountId===e.selectedAccountId})}}]),t}(C.e),r=v()(i.prototype,"opened",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=v()(i.prototype,"talktalkAccountList",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=v()(i.prototype,"selectedAccountId",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=v()(i.prototype,"bannerType",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.a.DEFAULT}}),c=v()(i.prototype,"image",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i);t.a=T},309:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(54),a=n.n(o),s=n(49),c=n(376),l=n(51),u=n(169),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._elementRef=s.b.createRef(),n.captionEnabled=t.store.captionEnabled,n}r()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this._applyCaptionClassNamesReaction()},n.componentDidMount=function(){this._changeCaptionClassNames()},n.componentWillUnmount=function(){this._disposeReaction()},n.render=function(){if(!this.captionEnabled)return null;var e=this.props,t=e.store,n=e.i18n,i=e.onLimitTextLength,r=e.useCase,o=e.additionalOption||{placeholder:n("imageComponent:placeholder_caption")},a=this._resolveClassName();return s.b.createElement(u.a,{forwardRef:this._elementRef,compId:t.id,useCase:r,text:t.caption,additionalOption:o,className:a,onLimitTextLength:i})},n._resolveClassName=function(){var e={"se-caption":!0};if(this._elementRef.current){var t=this._elementRef.current.classList;e["se-is-on"]=t.contains("se-is-on"),e["se-is-focused"]=t.contains("se-is-focused")}return a()([e])},n._applyCaptionClassNamesReaction=function(){var e=this;this.captionEnabled&&(this._disposeClassNames=s.f.reaction(function(){return{isCaptionOn:e.props.store.isCaptionOn,isCaptionFocused:e.props.store.isCaptionFocused()}},function(t){var n=t.isCaptionOn,i=t.isCaptionFocused;n?e._elementRef.current.classList.add("se-is-on"):e._elementRef.current.classList.remove("se-is-on"),i?e._elementRef.current.classList.add("se-is-focused"):e._elementRef.current.classList.remove("se-is-focused")}))},n._disposeReaction=function(){this._disposeClassNames&&this._disposeClassNames()},n._changeCaptionClassNames=function(){this.captionEnabled&&(this.props.store.isCaptionOn?this._elementRef.current.classList.add("se-is-on"):this._elementRef.current.classList.remove("se-is-on"),this.props.store.isCaptionFocused()?this._elementRef.current.classList.add("se-is-focused"):this._elementRef.current.classList.remove("se-is-focused"))},t}(s.b.Component);p.defaultProps={},p.propTypes={store:s.a.object.isRequired,useCase:s.a.instanceOf(l.c),children:s.a.oneOfType([s.a.element,s.a.array]),i18n:s.a.func,additionalOption:s.a.object,onLimitTextLength:s.a.func},t.a=Object(c.b)(p)},310:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DEFAULT:"default",LINE1:"line1",LINE2:"line2",LINE3:"line3",LINE4:"line4",LINE5:"line5",LINE6:"line6",LINE7:"line7"}},311:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={DEFAULT:"default",QUOTATION_LINE:"quotation_line",QUOTATION_BUBBLE:"quotation_bubble",QUOTATION_UNDERLINE:"quotation_underline",QUOTATION_POSTIT:"quotation_postit",QUOTATION_CORNER:"quotation_corner"},r="default"},312:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DEFAULT:"default"}},313:function(e,t,n){"use strict";var i,r,o,a,s,c=n(56),l=n.n(c),u=n(60),p=n.n(u),d=n(1),h=n.n(d),g=n(58),f=n.n(g),m=n(0),y=n.n(m),v=n(50),_=n.n(v),b=(n(61),n(70)),S=n(16),C=n(106),I=n(383),O=n(69),T=n(78),L=n(51),E=n(274),P=n(49),w=n(214),k=n(448),x=n(1080),D={lineBreak:{enter:"next-unit",shiftEnter:"next-unit"},erasure:"query",insertion:"append",drop:"object"},A={erasure:"query",insertion:"text",paste:"text",drop:"text"},j=(i=function(e){y()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"left-and-right",selection:"query",insertion:"append",erasure:"text",drop:"object"},p()(n,"layout",r,f()(n)),p()(n,"phase",o,f()(n)),p()(n,"wrappedSection",a,f()(n)),p()(n,"text",s,f()(n)),n.thumbnailTypeMap={};var i=t,c=i.state,l=void 0===c?{}:c,u=i.config,d=void 0===u?{}:u;n._componentFactory=L.W.get("componentFactory"),n._configAgent=L.W.get("configAgent"),n._infraConfig=n._configAgent.get("infraConfig"),n.attributes=Object(b.a)(n.attributes,d.attributes),n.layout=Object(S.a)(l,"layout",n.layout);var h=Object(S.a)(l,"wrappedSection",{});if(n.thumbnailTypeMap=n._configAgent.get("editorInfo.thumbnailType")||n.thumbnailTypeMap,n.useThumbnail=Object(S.a)(n._infraConfig,"image.useThumbnail",!0),n.wrappedSection=n._componentFactory.createComponentWithCompData(h),n._wrappedSectionOriginAttr=n.wrappedSection.attributes,"image"===n.wrappedSection.ctype){var g=n.wrappedSection.caption.attributes;n._wrappedSectionCaptionOriginAttr=g,n.wrappedSection.caption.attributes=Object(C.a)({},g,{lineBreak:{enter:"next-unit",shiftEnter:"line-break-in-paragraph"}})}return n.wrappedSection.attributes=Object(C.a)({},n.wrappedSection.attributes,D),n.text=n._createTextStore(l),n._textOriginAttr=n.text.attributes,n._textValueOriginAttr=n.text.value.attributes,n.text.attributes=Object(C.a)({},n.text.attributes,A),n.text.value.attributes=Object(C.a)({},n.text.value.attributes,A),n}return t.toPlainJSON=function(e,t){if(void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),e.unitId===t.unitId)return this._getUnit(e.unitId).toPlainJSON(e,t);var n=this._getUnit(e.unitId),i=this._getUnit(t.unitId);return{id:this.id,ctype:this.ctype,vid:this.vid,layout:this.layout,phase:this.phase,wrappedSection:this.wrappedSection.toPlainJSON(n===this.wrappedSection?e:void 0,i===this.wrappedSection?t:void 0),text:this.text.toPlainJSON(n===this.text?e:void 0,i===this.text?t:void 0)}},t._getUnit=function(e){return e===this.wrappedSection.id||this.wrappedSection.hasUnit(e)?this.wrappedSection:this.text},t._createTextStore=function(e){var t=Object(S.a)(e,"text");return"text"===Object(S.a)(t,"ctype")?new k.a({state:t}):new k.a({state:{value:t}})},t.breakLine=function(e){return this.findSelectedSlot().breakLine(e)},t.insert=function(e,t){void 0===t&&(t={});var n=this.findSelectedSlot().insert(e,t);return this._changeToWrappingRange(n)},t._isGoingDown=function(e){return e===L.u.DOWN||e===L.u.RIGHT},t._isGoingUp=function(e){return!1===this._isGoingDown(e)},t.querySelection=function(e){var t=e.anchor,n=e.focus,i=e.toPoint,r=e.direction,o=e.isShrink,a=e.eventType;return i.unitId===this.id?this._isGoingDown(r)?{anchor:t,focus:this.getCompEndPoint()}:{anchor:t,focus:this.getCompStartPoint()}:E.a.isKeyboardEvent(a)&&this._isGoingDown(r)&&n.unitId===this.wrappedSection.id?{anchor:t,focus:l()({},this.text.getStartPoint(),{compId:this.id})}:i.unitId===this.text.getText().id?{anchor:t,focus:i}:!1===o&&this._isGoingDown(r)||!0===o&&this._isGoingUp(r)?{anchor:t,focus:l()({},this.wrappedSection.getEndPoint(),{compId:this.id})}:{anchor:t,focus:this.getStartPoint()}},t.getParagraphsLength=function(){return this.text.getParagraphsLength()},t.getPlainTextWithEmoji=function(){var e=this.text.getPlainTextWithEmoji();return this.wrappedSection.ctype!==x.a.QUOTATION?e:""+this.wrappedSection.getPlainTextWithEmoji()+e},t.getPlainTextOnlyAi=function(){var e=this.text.getPlainTextOnlyAi();return this.wrappedSection.ctype!==x.a.QUOTATION?e:""+this.wrappedSection.getPlainTextOnlyAi()+e},t.getNodeInfoAfterOffset=function(e,t){var n=e.unitId;return this.getStoreById(n).getNodeInfoAfterOffset(e,t)},t.queryErasure=function(e,t,n){if(this.isSelectingWrappedSection()&&!this._isSelectingTextSlot())return this.text.attributes.erasure="text",this.text.getText().attributes.erasure="text",{result:"replace",component:this.text,range:this.text.getCompStartRange()};var i=e.start,r=e.collapsed,o=this.getText().existTextInListParagraph;if(r){var a=this.text.getPositionByPoint(i),s=this.text.isEmpty();if(!o&&a===w.d.TEXT_START&&t===L.u.LEFT)return{result:"replace",component:this,range:this._getWrappedSectionSelectRange()};if((s||a===w.d.TEXT_END)&&t===L.u.RIGHT)return{result:"merge-if-text",range:n}}if(this.isAllSelected()){this.text.erase(e,t);var c=this.text.clone();return c.attributes.erasure="text",c.getText().attributes.erasure="text",{result:c.isEmpty()?"self":"replace",component:c,range:c.getCompStartRange()}}var l=this.text.erase(e,t);return{result:"replace",component:this,range:this._changeToWrappingRange(l)}},t.isAllSelected=function(){return"block"===this.selection||this.isSelectingWrappedSection()&&this._isSelectingTextSlot()},t.decomposeWrapped=function(){return"image"===this.wrappedSection.ctype&&(this.wrappedSection.caption.attributes=this._wrappedSectionCaptionOriginAttr),this.wrappedSection.attributes=this._wrappedSectionOriginAttr,this.text.attributes=this._textOriginAttr,this.text.value.attributes=this._textValueOriginAttr,[this.wrappedSection,this.text]},t.removeFirstParagraph=function(){this.text.removeFirstParagraph()},t.removeLastParagraph=function(){this.text.removeLastParagraph()},t.isEmpty=function(){return!1},t.isFirstParagraph=function(e){return this.text.isFirstParagraph(e)},t.isFirstParagraphEmpty=function(){return this.text.isFirstParagraphEmpty()},t.isLastParagraphEmpty=function(){return this.text.isLastParagraphEmpty()},t.collectStyle=function(e){var t,n;if(this.isSelectingWrappedSection()){var i=this.wrappedSection.collectStyle(e);t=i,n={wrappingLayout:this.layout,layout:i.layout}}else t=this.text.collectStyle(e),n={layout:this.layout};return l()({},t,n)},t.getTextStyle=function(e){return this.text.getTextStyle(e)},t.updateStyle=function(e,t){var n=this,i=this.findSelectedSlot().updateStyle(e,t);if("block"===this.selection){var r=this.getComponentActiveRange();return[r.start,r.end]}if(i)return i.map(function(e){return e.compId=n.id,e})},t.updateProperty=function(e,t){var n=this;if(e.layout)return this._changeLayout(e);var i=e.wrappedSection;e.link&&(i=e);var r=this.findSelectedSlot().updateProperty(i,t);if("block"===this.selection){var o=this.getComponentActiveRange();return[o.start,o.end]}return r?r.map(function(e){return e.compId=n.id,e}):void 0},t.refineSelection=function(e){var t=this.findSelectedSlot().refineSelection(e);return this._changeToWrappingRange(t)},t.splitComponent=function(e){var t=this.text.splitComponent(e).back;return t.getText().attributes.erasure="text",{front:this,back:t}},t.isRepresentativeImage=function(){return this.wrappedSection.isRepresentativeImage()||this.text.isRepresentativeImage()},t.setRepresentativeImage=function(e){e.paraId?this.text.setRepresentativeImage(e):this.wrappedSection.setRepresentativeImage()},t.releaseRepresentativeImage=function(e){e.paraId?this.text.releaseRepresentativeImage(e):this.wrappedSection.releaseRepresentativeImage()},t.hasRepresentativeImage=function(){return this.wrappedSection.hasRepresentativeImage()||this.text.hasRepresentativeImage()},t.getRepresentativeId=function(){var e=this,t=this.text.getRepresentativeId(),n=this.wrappedSection.getRepresentativeId();return Object(T.a)([].concat(t,[""+n]),function(t){return e.id+"|"+t})},t.getRepresentativeInnerData=function(){return this.text.hasRepresentativeImage()?this.text.getRepresentativeInnerData():this.wrappedSection.hasRepresentativeImage()?this.wrappedSection.getRepresentativeInnerData():null},t.changeAlign=function(){},t.getStoreById=function(e){if(e===this.id)return this;var t=this.text.getStoreById(e);return t||((t=this.wrappedSection.getStoreById(e))||null)},t.hasUnit=function(e){return this.getTextUnits().some(function(t){return t.id===e})},t.getNextUnit=function(){return this.text},t.getPrevUnit=function(){return this.wrappedSection},t.getSelectedAlign=function(e){return this.isSelectingWrappedSection()?this.wrappedSection.getSelectedAlign():this.getText().getSelectedAlign(e)},t.getText=function(){return this.findSelectedSlot()===this.wrappedSection?this.wrappedSection.getText():this.text.getText()},t.getOffsetInParagraph=function(e){return this.getStoreById(e.unitId).getOffsetInParagraph(e)},t.getTextUnits=function(){var e=this.wrappedSection.getTextUnits(),t=this.text.getTextUnits();return Object(I.a)([e,t])},t.updateConfig=function(){this.wrappedSection.updateConfig(),this.getText().updateConfig()},t.clone=function(e){var t=e.start,n=e.end;return t.unitId!==n.unitId?this._cloneWithinSelection(e):(this._isSelectingTextSlot()?this.text:this.wrappedSection).clone(e)},t.getCompStartRange=function(){var e=this.wrappedSection.getCompStartRange();return this._changeToWrappingRange(e)},t.getCompEndRange=function(){var e=this.text.getCompEndRange();return this._changeToWrappingRange(e)},t.getCompStartPoint=function(){return this._getWrappedSectionStartPoint()},t.getCompEndPoint=function(){return this._getTextEndPoint()},t.getTextStartRange=function(){var e=this._getTextStartPoint();return{start:e,end:e}},t.getStartPoint=function(){return this._getWrappedSectionStartPoint()},t.getEndPoint=function(){return this._getTextEndPoint()},t.getComponentActiveRange=function(){return{start:this._getWrappedSectionStartPoint(),end:this._getTextEndPoint()}},t.getEndCollapsedRange=function(e){var t=this.findSelectedSlot().getEndCollapsedRange(e);return this._changeToWrappingRange(t)},t._getWrappedSectionSelectRange=function(){return{start:this._getWrappedSectionStartPoint(),end:this._getWrappedSectionEndPoint()}},t._getTextStartPoint=function(){var e=this.text.getStartPoint();return e.compId=this.id,e},t._getTextEndPoint=function(){var e=this.text.getEndPoint();return e.compId=this.id,e},t._getWrappedSectionStartPoint=function(){var e=this.wrappedSection.getCompStartPoint();return e.compId=this.id,e},t._getWrappedSectionEndPoint=function(){var e=this.wrappedSection.getCompEndPoint();return e.compId=this.id,e},t.findSelectedSlot=function(){return this.isSelectingWrappedSection()?this.wrappedSection:this.text},t._isSelectingTextSlot=function(){return"none"!==this.text.getText().selection},t.isSelectingWrappedSection=function(){var e=this.wrappedSection;return"none"!==e.getText().selection||"none"!==e.selection},t._changeToWrappingRange=function(e){return Object(O.a)({start:{compId:this.id},end:{compId:this.id}},e)},t._changeLayout=function(e){return this.layout=e.layout,this._getWrappedSectionSelectRange()},t._cloneWithinSelection=function(e){var t=new n({state:this.toValidJSON()}),i=t.wrappedSection.attributes;return t.text=this.text.clone(e),t.wrappedSection=this.wrappedSection.clone(e),t.wrappedSection.attributes=i,t},t.isLibraryComponent=function(){return this.wrappedSection.isLibraryComponent()||this.text.isLibraryComponent()},t.getLibraryItemData=function(){var e=this,t=[];return this.wrappedSection.isLibraryComponent()&&t.push(Object.assign(this.wrappedSection.getLibraryItemData(),{id:this.id})),this.text.isLibraryComponent()&&t.push.apply(t,this.text.getLibraryItemData().map(function(t){return Object.assign(t,{id:e.id})})),t},t.updateTheme=function(t,n){if(e.prototype.updateTheme.call(this,t,n),this.themeStyle){var i=this.themeStyle,r=i.textThemeStyle,o=i.imageThemeStyle,a=i.quotationThemeStyle;r&&this.text.updateTheme(r);var s=this.wrappedSection&&this.wrappedSection.ctype;"image"===s&&this.wrappedSection.updateTheme(o),"quotation"===s&&this.wrappedSection.updateTheme(a)}},t.updateImage=function(e){this.wrappedSection=Object(C.a)(this.wrappedSection,e)},t.filterOnlyTexts=function(){return this.text.filterOnlyTexts()},t.applyEditedImage=function(e){var t=e.photos[0];if(t.modified){var n=this._refineIntoImageData(t);this.updateImage(n)}},t._refineIntoImageData=function(e){var t=e.key,n=e.fileSize,i=e.height,r=e.width,o=e.domain,a=e.path,s=""+o+a;return{fileSize:n,height:i,width:r,originalWidth:r,originalHeight:i,path:a,id:t,src:!1===this.useThumbnail?s:s+"?type="+this.thumbnailTypeMap.normal}},t.toValidJSON=function(){return{id:this.id,layout:this.layout,ctype:this.ctype,wrappedSection:this.wrappedSection.toValidJSON(),text:this.text.getText().toValidJSON()}},t.deselect=function(){this._changeSelectionToNone(),this.text.deselect(),this.wrappedSection.deselect()},t._shouldSelectAllAsBlock=function(e,t){if(e.compId!==this.id&&t.compId!==this.id)return!0;var n=this.text.getEndPoint(),i=this.text.hasUnit(t.unitId)&&n.nodeId===t.nodeId&&n.offset===t.offset;return e.unitId===this.wrappedSection.id?i||t.compId!==this.id:!!i&&(e.unitId===this.wrappedSection.id||e.compId!==this.id)},t.putCursor=function(e){var t=e.unitId;this._changeSelectionToChild(),this.text.hasUnit(t)?("none"!==this.wrappedSection.selection&&this.wrappedSection.deselect(),this.text.putCursor(e),this.wrappedSection.deselect()):("none"!==this.text.selection&&this.text.deselect(),this.wrappedSection.putCursor(e),this.text.deselect())},t.selectAsBlock=function(e,t){this.deselect(),this._shouldSelectAllAsBlock(e,t)?this._selectAllAsBlock(e,t):this._selectPartAsBlock(e,t)},t.selectAsSingle=function(e){this._changeSelectionToChild(),this.wrappedSection.selectAsSingle(e),this.text.deselect()},t._selectAllAsBlock=function(){this._changeSelectionToBlock()},t._selectPartAsBlock=function(e,t){this._changeSelectionToChild(),this.text.hasUnit(e.unitId)?this.text.selectAsBlock(e,t):null!==this.wrappedSection.getStoreById(t.unitId)?this.wrappedSection.selectAsBlock(e,t):(this.text.selectAsBlock(e,t),this.wrappedSection.selectAsBlock(e,t))},t.setAvailableContentLength=function(e){var t=this.findSelectedSlot();t===this.wrappedSection&&"quotation"!==t.ctype||this.getText().setAvailableContentLength(e)},t.resetAvailableContentLength=function(){var e=this.findSelectedSlot();e===this.wrappedSection&&"quotation"!==e.ctype||this.getText().resetAvailableContentLength()},t.sliceContentText=function(e){if("image"!==this.wrappedSection.ctype){var t=this.wrappedSection.textLength;if(t>e)this.wrappedSection.sliceContentText(e),this.text.sliceContentText(0);else{var n=e-t;this.text.sliceContentText(n)}}else this.text.sliceContentText(e)},t.canBeListBySpace=function(e){return this.findSelectedSlot()!==this.wrappedSection&&this.getText().canBeListBySpace(e)},t.convertToList=function(e){this.getText().convertToList(e)},t.isCaptionFocused=function(){return this.wrappedSection&&this.wrappedSection.isCaptionFocused&&this.wrappedSection.isCaptionFocused()},t.checkNoWrappedCompSelected=function(){return!this.getPrevUnit().isFocused},t.checkFocusedOnQuot=function(){var e=this.getPrevUnit(),t="quotation"===e.ctype,n=e.isFocused;return t&&n},t.isAvailableForDropcap=function(e){var t=this.getText();return!t.isCenterOrRightAlign(e)&&!t.hasParagraphStartsWithEmoji(e)&&!t.hasInlineImageInParagraph(e)},h()(n,[{key:"textLength",get:function(){return"quotation"===this.wrappedSection.ctype?this.text.textLength+this.wrappedSection.textLength:this.text.textLength}},{key:"isBlockSelected",get:function(){return"block"===this.selection}},{key:"translationEnabled",get:function(){return"none"!==this.text.selection||this.wrappedSection&&this.wrappedSection.translationEnabled}}]),n}(Object(L.X)(Object(L.bb)(L.j))),r=_()(i.prototype,"layout",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),o=_()(i.prototype,"phase",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.O.DONE}}),a=_()(i.prototype,"wrappedSection",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=_()(i.prototype,"text",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_()(i.prototype,"textLength",[P.e],Object.getOwnPropertyDescriptor(i.prototype,"textLength"),i.prototype),_()(i.prototype,"isBlockSelected",[P.e],Object.getOwnPropertyDescriptor(i.prototype,"isBlockSelected"),i.prototype),i);j.ctype="wrappingParagraph",t.a=j},314:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DEFAULT:"default"}},319:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h=n(56),g=n.n(h),f=n(17),m=n.n(f),y=n(60),v=n.n(y),_=n(1),b=n.n(_),S=n(58),C=n.n(S),I=n(0),O=n.n(I),T=n(50),L=n.n(T),E=(n(61),n(70)),P=n(16),w=n(828),k=n(71),x=n(1129),D=n(119),A=n(75),j=n(1128),R=n(742),N=n(112),M=n(106),B=n(194),W=n(78),U=n(69),F=n(171),z=n(826),V=n(99),G=n(102),H=n(190),q=n(84),J=n(51),K=n(1079),X=n(1365),Y=n(712),Q=n(711),Z=n(49),$=n(248),ee=n(1127),te=n(241),ne={createIndexMap:function(e){var t=[];return Object(ee.a)(e.length,function(){t.push([])}),e.map(function(e,n){e.cells.map(function(e,i){for(var r=e.colSpan,o=e.rowSpan,a=0;a<r;a++)for(var s=0;s<o;s++){for(var c=i+a,l=n+s;t[l]&&t[l][c];)i++,c++;t[l]&&!t[l][c]&&(t[l][c]=e.id)}})}),t},getCellIdsByRowIndex:function(e,t){return Object(te.a)(e[t])||[]},getCellIdsByColumnIndex:function(e,t){var n=e.map(function(e){return e[t]});return Object(te.a)(n)},getCellIdsByColumnIndexList:function(e,t){var n=this,i=[];return Object(k.a)(t,function(t){i=i.concat(n.getCellIdsByColumnIndex(e,t))}),i},getSelectedIndex:function(e,t){var n=[],i=[];return Object(k.a)(e,function(e,r){Object(k.a)(e,function(e,o){t===e&&(n.push(r),i.push(o))})}),{rowIndexList:Object(te.a)(n),colIndexList:Object(te.a)(i)}},getFirstSelectedId:function(e,t){var n=this.getSelectedAllIndex(e,t),i=n.rowIndexList,r=n.colIndexList;return e[Object(D.a)(i)][Object(D.a)(r)]},getSelectedAllIndex:function(e,t){var n=this,i=[],r=[];return Object(k.a)(t,function(t){var o=n.getSelectedIndex(e,t);i=i.concat(o.rowIndexList),r=r.concat(o.colIndexList)}),i=this._sortAscending(Object(te.a)(i)),r=this._sortAscending(Object(te.a)(r)),{rowIndexList:i,colIndexList:r}},getSelectedIds:function(e,t){var n,i,r=this.getSelectedAllIndex(e,t),o=r.rowIndexList,a=r.colIndexList,s=[];for(n=Object(D.a)(o);n<=Object(A.a)(o);n++)for(i=Object(D.a)(a);i<=Object(A.a)(a);i++)s.push(e[n][i]);var c=Object(te.a)(s);return t.length!==c.length&&(s=this.getSelectedIds(e,c)),Object(te.a)(s)},getIndexByCellId:function(e,t){var n=[],i=[];return Object(k.a)(e,function(e,r){var o=e.indexOf(t);Object(k.a)(e,function(e,n){t===e&&i.push(n)}),o>-1&&n.push(r)}),{rowIndexList:Object(te.a)(n),colIndexList:Object(te.a)(i)}},getCellIdDiffRowWithDown:function(e,t){var n=t+1;if(n===e.length)return this.getCellIdsByRowIndex(e,t);var i=e[t],r=e[n],o=[];return Object(k.a)(r,function(e,t){var n=i[t];e!==n&&o.push(n)}),Object(te.a)(o)},getCellIdDiffColWithRight:function(e,t){var n=t+1;if(n===e[0].length)return this.getCellIdsByColumnIndex(e,t);var i=this.getCellIdsByColumnIndex(e,t),r=this.getCellIdsByColumnIndex(e,n),o=[];return Object(k.a)(i,function(e){r.indexOf(e)<0&&o.push(e)}),Object(te.a)(o)},getCellIdsDiffColWithBothSides:function(e,t){var n=e.reduce(function(e,n){var i=n[t],r=n[t-1],o=n[t+1];return i!==r&&i!==o&&e.push(i),e},[]);return Object(te.a)(n)},_sortAscending:function(e){return e.sort(function(e,t){return e-t})}},ie=n(96),re=n(214),oe=n(1080),ae=(i=function(e){O()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).ctype="tableCell",n.attributes={cursor:"query",selection:"query-with-trapped",insertion:"inline-image-allowed-append",drop:"object",paste:"query",lineBreak:{enter:"line-break-in-paragraph",shiftEnter:"line-break-in-paragraph"},erasure:"query"},n.defaultValueTextConfig={filterTextStyle:{subscript:re.b.NOT_ALLOWED,superscript:re.b.NOT_ALLOWED,dropCap:re.b.NOT_ALLOWED}},v()(n,"value",r,C()(n)),v()(n,"backgroundColor",o,C()(n)),v()(n,"colSpan",a,C()(n)),v()(n,"rowSpan",s,C()(n)),v()(n,"width",c,C()(n)),v()(n,"height",l,C()(n)),v()(n,"borderInlineStyle",u,C()(n)),v()(n,"textAlign",p,C()(n)),v()(n,"selection",d,C()(n));var i=t,h=i.state,g=void 0===h?{}:h,f=i.config,m=void 0===f?{}:f;n._configAgent=J.W.get("configAgent");var y=n._configAgent.get("plugins.componentSettings.table.config");n.value=n._createTextUnitStore(g.value,Object(U.a)({},n.defaultValueTextConfig,m.value),Object(P.a)(y,"value.textStyle",{})),n.backgroundColor=Object(P.a)(g,"backgroundColor",n.backgroundColor),n.colSpan=Object(P.a)(g,"colSpan",n.colSpan),n.rowSpan=Object(P.a)(g,"rowSpan",n.rowSpan),n.width=n.adjustCellWidth(Object(P.a)(g,"width",n.width)),n.height=Object(P.a)(g,"height",n.height);var _=Object(P.a)(g,"borderInlineStyle",n.borderInlineStyle);return n.borderInlineStyle=n._refineBorderStyle(_),n.textAlign=Object(P.a)(g,"textAlign",n.textAlign),n}return t.toPlainJSON=function(e,t){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),Object(q.a)(e,this.getStartPoint())&&Object(q.a)(t,this.getEndPoint())?{id:this.id,ctype:this.ctype,value:this.value.toPlainJSON(),backgroundColor:this.backgroundColor,colSpan:this.colSpan,rowSpan:this.rowSpan,width:this.width,height:this.height,borderInlineStyle:this.borderInlineStyle,textAlign:this.textAlign}:{ctype:oe.a.TEXT,value:this.value.toPlainJSON(e,t)}},t.clone=function(e){return this.getText().clone(e)},t.getParagraphById=function(e){return this.getText().getParagraphById(e)},t.isLinkNodeEdge=function(e){return this.getText().isLinkNodeEdge(e)},t.isImageNode=function(e){var t=this.getText().getNodeByPoint(e);return t&&t.isImageNode()},t.shouldAdjustWritePoint=function(e){return this.getText().shouldAdjustWritePoint(e)},t.adjustWritePointOnEdge=function(e){return this.getText().adjustWritePointOnEdge(e)},t.write=function(e,t,n){var i=this.getText().write(e,t,n);return this._refinePointUnitId(i)},t.writeEmoji=function(e,t){var n=this.getText().writeEmoji(e,t);return this._refinePointUnitId(n)},t.changeLink=function(e,t){var n=this,i=this.getText();return t.start.unitId=i.id,i.changeLink(this.checkProtocol(e),t).map(function(e){return e.unitId=n.id,e})},t.breakLine=function(e,t){return this.getText().breakLine(e,t)},t.erase=function(e,t){var n=this.getText().erase(e,t);return this._refineRangeUnitId(n)},t.refineSelection=function(e){var t=this.getText().refineSelection(e);return this._refineRangeUnitId(t)},t.updateWidth=function(e){this.width=this.adjustCellWidth(e)},t.updateHeight=function(e){this.height=e},t.updateStyle=function(e,t){var n=this.refineSelection(t),i=[];if(this._isParagraphStyle(e)){var r=this.getText().updateParagraphStyle(e,n);i.push(r.start,r.end)}else{var o=this.getText().updateCharacterStyle(e,n);i.push(o.start,o.end)}return i},t.updateWholeStyle=function(e){this._isParagraphStyle(e)?this.getText().updateWholeParagraphStyle(e):this.getText().updateWholeCharacterStyle(e)},t.createShellInlineImages=function(e,t){return this.getText().createImageNodes(e,t)},t.updateInlineImage=function(e,t){this.getText().updateImageNode(e,t)},t.deleteInlineImage=function(e){return this.getText().deleteImageNode(e)},t.updateBackgroundColor=function(e){this.backgroundColor=e},t.updateInlineStyle=function(e){this.borderInlineStyle=e},t.select=function(){this.selection="single"},t.selectAsBlock=function(e,t){this.selection="child",this.getText().selectAsBlock(e,t)},t.deselect=function(){this.selection="none",this.getText().deselect()},t.replaceValue=function(e){var t=this._createTextUnitStore(e.value,this.defaultValueTextConfig);this.value=t},t._createTextUnitStore=function(e,t,n){var i=t.filterTextStyle;return t.filterTextStyle=Object(E.a)(i,n),new X.a({state:e,config:t})},t._refineRangeUnitId=function(e){return e.start=this._refinePointUnitId(e.start),e.end=this._refinePointUnitId(e.end),e},t._refinePointUnitId=function(e){return e.unitId=this.id,e},t._isParagraphStyle=function(e){var t=Object.keys(e)[0];return J.L.includes(t)},t._refineBorderStyle=function(e){var t=Y.a.convertInlineStyleToObject(e),n=Y.a.adjustMinBorderWidth(t,"1px");return Y.a.convertObjectToInlineStyle(n)},t.getText=function(){return this.value},t.getTextStyle=function(e){return this.getText().getTextStyle(e)},t.getStartPoint=function(){return Object.assign(this.getText().getStartPoint(),{unitId:this.id})},t.getEndPoint=function(){return Object.assign(this.getText().getEndPoint(),{unitId:this.id})},t.getPositionByPoint=function(e){return this.getText().getPositionByPoint(e)},t.collectStyle=function(e){return this.getText().collectStyle(e)},t.isEmpty=function(){return this.getText().isEmpty()},t.mergeWith=function(e,t){var n=this.getText().mergeWith(e,{mergePoint:t,isAttach:!0});return n.start.unitId=this.id,n.end.unitId=this.id,n},t.isEmptyTextNode=function(e){return this.getText().isEmptyTextNode(e)},t.isLibraryComponent=function(){return this.getText().isLibraryComponent()},t.getLibraryItemData=function(e){var t=e.compId;return this.getText().getLibraryItemData({compId:t,unitId:this.id})},t.refineParagraphWithPoint=function(e){return this.getText().refineParagraphWithPoint(e)},t.isRepresentativeImage=function(){return this.getText().isRepresentativeImage()},t.hasRepresentativeImage=function(){return this.getText().hasRepresentativeImage()},t.setRepresentativeImage=function(e,t){return this.getText().setRepresentativeImage(e,t)},t.setDefaultRepresentativeImage=function(){return this.getText().setDefaultRepresentativeImage()},t.getRepresentativeId=function(){var e=this,t=this.getText().getRepresentativeId();return Object(W.a)(t,function(t){return""+e.id+t})},t.getRepresentativeInnerData=function(){return this.getText().getRepresentativeInnerData()},t.releaseRepresentativeImage=function(e){this.getText().releaseRepresentativeImage(e)},t.putCursor=function(e){this.selection="child",this.getText().putCursor(e)},t.adjustCellWidth=function(e){return e>100?100:e<=0?1:e},b()(n,[{key:"isSelected",get:function(){return"single"===this.selection}}]),n}(Object(J.Z)(J.w)),r=L()(i.prototype,"value",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=L()(i.prototype,"backgroundColor",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=L()(i.prototype,"colSpan",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),s=L()(i.prototype,"rowSpan",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),c=L()(i.prototype,"width",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 33.33}}),l=L()(i.prototype,"height",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 43}}),u=L()(i.prototype,"borderInlineStyle",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=L()(i.prototype,"textAlign",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"left"}}),d=L()(i.prototype,"selection",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),L()(i.prototype,"isSelected",[Z.e],Object.getOwnPropertyDescriptor(i.prototype,"isSelected"),i.prototype),i);ae.schema={id:K.a.string.isRequired,ctype:K.a.string.isRequired,borderInlineStyle:K.a.string,colSpan:K.a.number.isRequired,rowSpan:K.a.number.isRequired,width:K.a.number.isRequired,height:K.a.number.isRequired,backgroundColor:K.a.string,value:K.a.textUnit};var se,ce,le=ae,ue=(se=function(e){O()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).ctype="tableRow",n.defaultFilterTextStyle={},v()(n,"cells",ce,C()(n));var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;return n._styleFilter=Object(M.a)(n.defaultFilterTextStyle,s.filterTextStyle),n.cells=n._createCells(o.cells,s),n}return t.toPlainJSON=function(e,t){return e||t?{id:this.id,ctype:this.ctype,cells:this.cells.filter(function(e){return e.isSelected}).map(function(e){return e.toPlainJSON()})}:{id:this.id,ctype:this.ctype,cells:this.cells.map(function(e){return e.toPlainJSON()})}},t.cloneWithSelectedCell=function(){var e=Object(B.a)(this.cells,function(e){return e.isSelected}),t=[];return e.length&&e.forEach(function(e){t.push(e.toValidJSON())}),{ctype:"tableRow",cells:t}},t.pasteCells=function(e,t){for(var n=this.cells.length,i=0;i<n;i++){var r=t.cells[i];if(!r||!(e+i<n))break;this.cells[e+i].replaceValue(r)}},t.removeCellBy=function(e){return this.cells.remove(e)},t.insertCellToIndex=function(e,t){var n=g()({},t),i=new le({state:n});return this.cells.splice(e,0,i),i.id},t.getAllCelIdInRow=function(){return Object(W.a)(this.cells,function(e){return e.id})},t.getAllSortedRowSpanAndCellIds=function(){return Object(W.a)(this.cells,function(e){return{id:e.id,rowSpan:e.rowSpan}}).sort(function(e,t){return e.rowSpan-t.rowSpan})},t.getCellIdsSelectedSingleRow=function(){var e=[];return this.cells.forEach(function(t){t.isSelected&&1===t.rowSpan&&e.push(t.id)}),e},t.getCellIdsSelectedMultiRow=function(){var e=[];return this.cells.forEach(function(t){t.isSelected&&t.rowSpan>1&&e.push(t.id)}),e},t.getCellIdsSelectedSingleCol=function(){var e=[];return this.cells.forEach(function(t){t.isSelected&&1===t.colSpan&&e.push(t.id)}),e},t.getCellIdsSelectedMultiCol=function(){var e=[];return this.cells.forEach(function(t){t.isSelected&&t.colSpan>1&&e.push(t.id)}),e},t.getSelectedCellIds=function(){var e=[];return this.cells.forEach(function(t){t.isSelected&&e.push(t.id)}),e},t.refreshWidthAllBy=function(e){this.cells.forEach(function(t){t.width=t.adjustCellWidth(parseFloat((t.width/e*100).toFixed(2)))})},t.getColIndexOf=function(e){var t=[].concat(e);return Object(ie.a)(this.cells,function(e){return t.indexOf(e.id)>-1})},t._createCells=function(e,t){return e?e.map(function(e){return new le({state:e,config:t})}):[new le({config:t}),new le({config:t}),new le({config:t})]},n}(J.w),ce=L()(se.prototype,"cells",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se);ue.schema={ctype:K.a.string.isRequired,cells:K.a.arrayOf(K.a.shape(le.schema)).isRequired};var pe,de,he,ge,fe,me,ye,ve,_e=ue,be=["layout","resizing","tableBorder","link","cellBackgroundColor","cellWidth","cellHeight"],Se=(pe=function(e){O()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"query",selection:"query",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"query"},v()(n,"layout",de,C()(n)),v()(n,"width",he,C()(n)),v()(n,"columnCount",ge,C()(n)),v()(n,"rows",fe,C()(n)),v()(n,"align",me,C()(n)),v()(n,"borderStyleName",ye,C()(n)),v()(n,"borderInlineStyle",ve,C()(n));var i=t,r=i.state,o=void 0===r?{}:r,a=i.config,s=void 0===a?{}:a;n.attributes=Object(E.a)(n.attributes,s.attributes),n.layout=Object(P.a)(o,"layout",n.layout),n.borderStyleName=Object(P.a)(o,"borderStyleName",n.borderStyleName);var c=Object(P.a)(o,"width",n.width);n.width=n._resolveWidth(c),n.columnCount=Object(P.a)(o,"columnCount",n.columnCount),n._configAgent=J.W.get("configAgent");var l=Object(P.a)(o,"borderInlineStyle",n.borderInlineStyle);return n.borderInlineStyle=n._refineBorderStyle(l),n.rows=Object(P.a)(o,"rows",n.rows),n.align=Object(P.a)(o,"align",n.align),o.rows&&0!==o.rows.length?n.rows=n._createRowStores(o.rows):n.rows=[new _e,new _e,new _e],n._updateTableMap(),n._refreshCellWidthAll(),n}return t.toPlainJSON=function(e,t){var n=this;if(void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),Object(q.a)(e,this.getStartPoint())&&Object(q.a)(t,this.getEndPoint()))return{id:this.id,ctype:this.ctype,layout:this.layout,width:this.width,columnCount:this.columnCount,rows:this.rows.map(function(e){return e.toPlainJSON()}),align:this.align,borderStyleName:this.borderStyleName,borderInlineStyle:this.borderInlineStyle};if(this.hasUnit(e.unitId)&&!!e.paraId)return this.getCellById(e.unitId).toPlainJSON(e,t);var i=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).rowIndexList.map(function(e){return n.rows[e]});return{id:this.id,ctype:this.ctype,layout:this.layout,width:this.width,columnCount:this.columnCount,rows:i.map(function(n){return n.toPlainJSON(e,t)}),align:this.align,borderStyleName:this.borderStyleName,borderInlineStyle:this.borderInlineStyle}},t.breakLine=function(e,t){var n=this.getCurrentTargetCell({focus:e});return n.getParagraphById(e.paraId)?n.breakLine(e,t):e},t.queryErasure=function(e,t){var n=this.selectedState,i=n.isRowSelectedAll,r=n.isColSelectedAll,o=i&&r;return!o&&(i||r)?{result:"replace",range:this.deleteCell(),component:this}:!o&&this._isFocusedOnText(e)?{result:"replace",range:this.getCurrentTargetCell(e).erase(e,t),component:this}:o||this.isSelectedComponent?{result:"self",range:null,component:null}:{result:null,range:{start:e.start,end:e.end},component:this}},t.querySelection=function(e){var t=e.direction,n=e.toPoint,i=e.anchor,r=e.focus,o=e.isShrink,a=void 0!==o&&o,s=e.eventType,c=[J.u.UP,J.u.LEFT].includes(t),l=[J.u.UP,J.u.DOWN].includes(t)&&"keydown"===s,u=[J.u.LEFT,J.u.RIGHT].includes(t)&&"keydown"===s,p=n.compId,d=n.unitId;if(this.isFocused&&this.hasUnit(r.unitId)){if(p===d||this.id!==p)return this._extendCellSelectionToEdge(c,i.unitId);if(this.id===p&&this.hasUnit(d)){var h=d;return l?h=this._getUpDownDestCellBy(t,r):u&&(h=this._getLeftRightDestCellBy(t,r)),this._resolveFocusAndAnchor(i.unitId,h)}return null}return this.id===p?a?{focus:c?this.getEndPoint():this.getStartPoint()}:{focus:c?this.getStartPoint():this.getEndPoint()}:null},t.queryCursor=function(e){var t,n=e.direction,i=e.toPoint,r=e.fromPoint,o="keydown"===e.eventType,a=[J.u.UP,J.u.LEFT].includes(n),s=this.selectedCellIds.length>0,c=this.hasUnit(r.unitId);if(o&&s){var l=Object(D.a)(this.selectedCellIds),u=Object(A.a)(this.selectedCellIds);return(t=a?this.getCellById(l):this.getCellById(u))?(i=a?this._getCellStartPonit(t):this._getCellEndPonit(t),this._deselectCells(),{type:"range",range:{start:i,end:i}}):{type:"range",range:null}}this._deselectCells();var p=[J.u.LEFT,J.u.RIGHT].includes(n);if(o&&p){var d=n===J.u.LEFT;return(t=d?this.getPrevCell(r):this.getNextCell(r))?{type:"range",range:{start:i=d?this._getCellEndPonit(t):this._getCellStartPonit(t),end:i}}:{type:"range",range:null}}if(this.id===i.unitId&&!o)return{type:"range",range:{start:this.getStartPoint(),end:this.getEndPoint()}};if(c&&o){if(n===J.u.UP)return this._getUpCell(r);if(n===J.u.DOWN)return this._getDownCell(r)}return{type:"range",range:null}},t.updateTheme=function(t,n){if(e.prototype.updateTheme.call(this,t,n),this.themeStyle&&this.themeStyle[this.layout]){var i=this.themeStyle[this.layout].value;this.getTextUnits().forEach(function(e){e.updateTheme(i)})}},t.updateProperty=function(e,t){var n=e.layout,i=e.resizing,r=e.tableBorder,o=e.link,a=e.cellBackgroundColor,s=e.cellWidth,c=e.cellHeight,l=m()(e,be);if(!(Object(w.a)(e)<1)){if(n&&this.changeLayout(n),i&&this.changeTableWidth(i),r&&this.changeTableBorderStyle(r),"string"==typeof a&&this.changeCellsBackgroundColor(a,t),s&&this.changeCellWidth(s.id,s.widthToAdd),c&&this.changeCellHeight(c.id,c.heightToAdd),Object(G.a)(this,l),o)return this.changeLink(o,t);if(this.selectedCellCount>0)return[this._collapsedToStart()]}},t.updateStyle=function(e,t){var n=e.tableAlign,i=e.align,r=this.selectedCellCount>0,o="block"===this.selection&&!1===this._isFocusedOnText(t);if(n)return this.changeAlign(n);if(r)return this.changeCellsTextStyle(this.selectedCellIds,e),[];if(o)return i&&this.changeAlign(i),this.changeCellsTextStyle(this.getAllCellIds(),e),Object(F.a)(this.getComponentActiveRange());if(this.isSelectedComponent)return this.changeCellsTextStyle(this.getAllCellIds(),e),[this.getCompEndRange()];var a=this.getCurrentTargetCell(t);return a&&a.updateStyle(e,t)},t.changeLink=function(e,t){return this.getCurrentTargetCell(t).changeLink(e,t)},t.changeTableWidth=function(e){this.width=this._resolveWidth(e)},t.changeAlign=function(e){if(this.align=e,this.selectedCellCount>0)return[this._collapsedToStart()]},t.changeCellsTextStyle=function(e,t){var n=this;Object(k.a)(e,function(e){n.getCellById(e).updateWholeStyle(t)})},t.changeLayout=function(e){this.layout=e,this.updateTheme(),this._removeBorderStyle()},t.changeTableBorderStyle=function(e){var t=e.borderStyle,n=" border-color: "+(e.color||"rgb(210, 210, 210)")+";",i=$.c[t].tableStyle||"",r=$.c[t].columnStyle||"";this.borderStyleName=t,this.borderInlineStyle=i+n,this._updateCellsStyle(r+n)},t.changeCellsBackgroundColor=function(e,t){var n=this,i=this.selectedCellIds.length>0;if(!i&&!this.isSelectedComponent)return this.getCurrentTargetCell(t).updateBackgroundColor(e);var r=i?this.selectedCellIds:this.getAllCellIds();Object(k.a)(r,function(t){n.getCellById(t).updateBackgroundColor(e)})},t.changeViewMode=function(){this._deselectCells()},t.selectCells=function(e){var t=ne.getSelectedIds(this._indexMap,e);this._selectCells(t)},t.selectAll=function(){var e=this.getAllCellIds();return this.selectCells(e),this._resolveFocusAndAnchor(Object(D.a)(e),Object(A.a)(e))},t.selectRowByIds=function(e){var t=ne.getSelectedAllIndex(this._indexMap,e).rowIndexList,n=ne.getCellIdsByRowIndex(this._indexMap,t[0]);return this._deselectCells(),this.selectCells(n),this._resolveFocusAndAnchor(Object(D.a)(n),Object(A.a)(n))},t.insertRowById=function(e){var t=ne.getIndexByCellId(this._indexMap,e).rowIndexList,n=Object(A.a)(t),i=ne.getCellIdDiffRowWithDown(this._indexMap,n),r=this._insertRow(i,n);return this.updateTheme(),r},t.insertColumnById=function(e){var t=ne.getIndexByCellId(this._indexMap,e).colIndexList,n=Object(A.a)(t),i=ne.getCellIdDiffColWithRight(this._indexMap,n),r=this._insertColumn(i,n);return this.updateTheme(),r},t.selectColByIds=function(e){var t=ne.getSelectedAllIndex(this._indexMap,e).colIndexList,n=ne.getCellIdsByColumnIndexList(this._indexMap,t);return this._deselectCells(),this.selectCells(n),this._resolveFocusAndAnchor(Object(D.a)(n),Object(A.a)(n))},t.mergeCells=function(){var e=this.selectedCellIds,t=e[0],n=this.getCellById(t),i=Object(j.a)(e),r=ne.getSelectedAllIndex(this._indexMap,e),o=r.rowIndexList,a=r.colIndexList,s=this._getCellSizeByIndex(o[0],a[0]),c=s.width,l=s.height;n.colSpan=a.length,n.rowSpan=o.length,n.height=l,n.width=c;var u=this._mergeText(n,i);return this._deselectCells(),this._removeCells(i),this._updateTableMap(),this.selectCells([t]),u},t.splitRowCells=function(){var e=this._addRowSingleCells();this._updateTableMap();var t=this._splitMultiRowCells();this._updateTableMap();var n=e.concat(t);this.selectCells(n),this.updateTheme()},t.splitColumnCells=function(){var e=this,t=[];ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).rowIndexList.forEach(function(n){var i=e.rows[n].getCellIdsSelectedSingleCol(),r=e.rows[n].getCellIdsSelectedMultiCol(),o=e._splitSingleColumnCells(n,i);e._updateTableMap();var a=e._splitMultiColumnCells(n,r);e._updateTableMap(),t=t.concat(o,a)}),this.selectCells(t),this.updateTheme()},t.deleteCell=function(){return this.selectedState.isRowSelectedAll?this._removeSelectedRows():this._removeCells(this.selectedCellIds),this._deselectCells(),this._updateTableMap(),this._refreshCellWidthAll(),{start:this.getStartPoint(),end:this.getEndPoint()}},t.changeCellWidth=function(e,t){var n=ne.getIndexByCellId(this._indexMap,e).colIndexList,i=Object(A.a)(n),r=this._indexMap[0].length===i+1;if(t=this._parseFloatToFixedSecondDecimal(t),r){var o=this.width+this.width*(t/100);o>0&&(this.changeTableWidth(o),this._refreshCellWidthAll())}else{var a=ne.getCellIdsByColumnIndex(this._indexMap,i+1),s=ne.getCellIdsDiffColWithBothSides(this._indexMap,i+1),c=s.length>0?this.getCellById(s[0]):this.getCellById(a[0]);if(!c)return!1;var l=ne.getCellIdsByColumnIndex(this._indexMap,i),u=ne.getCellIdsDiffColWithBothSides(this._indexMap,i),p=u.length>0?this.getCellById(u[0]):this.getCellById(l[0]),d=c.width-t<=0,h=p&&p.width+t<0;if(d||h)return!1;this._updateCellsWidth(Object(H.a)(l,a),t),this._updateCellsWidth(Object(H.a)(a,l),-1*t)}},t.changeCellHeight=function(e,t){var n=this,i=ne.getIndexByCellId(this._indexMap,e).rowIndexList,r=Object(A.a)(i),o=ne.getCellIdDiffRowWithDown(this._indexMap,r),a=this.getCellById(o[0]);a&&a.height+t<0||Object(k.a)(o,function(e){var i=n.getCellById(e);i&&i.updateHeight(i.height+t)})},t.adjustToEqualWidth=function(){var e=this;this.selectColByIds(this.selectedCellIds);var t=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).colIndexList,n=this._getTotalWidthBy(0,!0);Object(k.a)(this.selectedCellIds,function(i){var r=e.getCellById(i),o=e._parseFloatToFixedSecondDecimal(r.colSpan/t.length*n);r.updateWidth(o)}),this._refreshCellWidthAll()},t.merge=function(e,t){var n=this,i=Object(D.a)(e);if(1===e.length&&"table"===i.ctype){var r=this.cellIdOfTopLeftInSelected||this.getCurrentTargetCell({focus:t}).id,o=ne.getIndexByCellId(this._indexMap,r),a=o.rowIndexList,s=o.colIndexList,c=Object(D.a)(s),l=Object(D.a)(a),u=Object(R.a)(this.rows,l),p=i.toValidJSON(),d=this._filterRowsWithValue(p.rows);return Object(k.a)(u,function(e,t){var i=l+t,r=Object(R.a)(n._indexMap[i],c),o=e.getColIndexOf(r);if(o>-1){var a=d.shift();a&&e.pasteCells(o,a)}}),this.updateTheme(),{components:[this]}}return this._mergeOnlyText(e,t)},t.mergeWith=function(e){var t=this,n=this.cellIdOfTopLeftInSelected||this.getCurrentTargetCell().id,i=ne.getIndexByCellId(this._indexMap,n),r=i.rowIndexList,o=i.colIndexList,a=Object(D.a)(o),s=Object(D.a)(r),c=Object(R.a)(this.rows,s),l=e.toValidJSON(),u=this._filterRowsWithValue(l.rows);Object(k.a)(c,function(e,n){var i=s+n,r=Object(R.a)(t._indexMap[i],a),o=e.getColIndexOf(r);if(o>-1){var c=u.shift();c&&e.pasteCells(o,c)}})},t.clone=function(e){var t,n=this,i=this.selectedCellIds.length!==this._hashArray.getLength();if(this._isFocusedOnText(e)){var r=e.start;return this.getCellById(r.unitId).clone(e)}if(this.isCellSelected&&i){var o=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).rowIndexList,a=this.toValidJSON(),s=[];Object(k.a)(o,function(e){var t=n.rows[e].cloneWithSelectedCell();t&&s.push(t)}),t=Object(M.a)(a,{rows:s})}else t=this.toValidJSON();return this._componentFactory.createComponentWithCompData(t)},t.getStoreById=function(e){if(e===this.id)return this;if(this.hasUnit(e)){var t=this.getCellById(e);return"block"===t.selection?this:t}return null},t.canBeListBySpace=function(e){return this._getTextUnit(e.start.unitId).canBeListBySpace(e)},t.convertToList=function(e){return this._getTextUnit(e.start.unitId).convertToList(e)},t._getTextUnit=function(e){return this.getCellById(e).value},t.getTextUnits=function(){var e=[];return this._hashArray.forEach(function(t){e.push(t.getText())}),e},t.getTextStyle=function(e){var t=this.getCellById(e.unitId);return t&&t.getTextStyle(e)},t.filterOnlyTexts=function(){return this.getTextUnits().map(function(e){return e.filterOnlyTexts()})},t.updateConfig=function(){this.getTextUnits().forEach(function(e){e.updateConfig&&e.updateConfig()})},t.collectStyle=function(e){var t="justify"===this.align||null===this.align?"left":this.align,n=this.borderInlineStyle,i=this.cellsCollectStyle(e),r=Y.a.convertInlineStyleToObject(n,!0);return Object(U.a)({tableWidth:this.width,layout:this.layout,border:{style:this.borderStyleName||"thinLine",color:r.borderColor||"#d2d2d2"},tableAlign:t},i)},t.cellsCollectStyle=function(e){var t=this.selectedCellCount>0,n=this.getCurrentTargetCell(e),i={};return t?i=this._getCellsStyle(e,this.selectedCellIds):this.isSelectedComponent?i=this._getCellsStyle(e,this.getAllCellIds()):n&&(i=n.collectStyle(e)),i},t.getCellIdsOfMultiRowCells=function(){var e=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).rowIndexList,t=this.rows.toJS(),n=[];return Object(k.a)(e,function(e){var i=t[e].getCellIdsSelectedMultiRow();n=Object(x.a)(n,i)}),n},t.createShellInlineImages=function(e,t){return this.getCellById(e.unitId).createShellInlineImages(e,t)},t.updateInlineImage=function(e,t){var n=this.getCellById(e.unitId);n&&n.updateInlineImage(e.nodeId,t)},t.deleteInlineImage=function(e){var t=this.getCellById(e.unitId),n=t&&t.deleteInlineImage(e);if(n)return g()({compId:this.id},n)},t.getEndCollapsedRange=function(e){var t=e.end;return this.hasUnit(t.unitId)?{start:t,end:t}:e},t.getSelectedCellIdsInFirstRow=function(){var e=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).rowIndexList;return 0===e.length?[]:this.rows[Object(D.a)(e)].getSelectedCellIds()},t.getSelectedCellIdsInLastRow=function(){var e=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).rowIndexList;return 0===e.length?[]:this.rows[Object(A.a)(e)].getSelectedCellIds()},t.refineSelection=function(e){var t=this.getCurrentTargetCell(e).refineSelection(e);return t.start.compId=this.id,t.end.compId=this.id,t},t.hasUnit=function(e){return this._hashArray.has(e)},t.getUnitStartPoint=function(){var e=this._hashArray.getDataByIndex(0);return this._getCellStartPonit(e)},t.getCurrentTargetCell=function(e){return this.getCellById(e.focus.unitId)},t.getAllCellIds=function(){return this._hashArray.getKeys()},t.getAllCellStores=function(){return this._hashArray.getDataList()},t.getFirstCell=function(){return this._hashArray.getFirst()},t.getLastCell=function(){return this._hashArray.getLast()},t.getCellById=function(e){return this._hashArray.getDataById(e)},t.getNextCellById=function(e){return this._hashArray.getNext(e)},t.getNextCell=function(e){return this._hashArray.getNext(e.unitId)},t.getPrevCell=function(e){return this._hashArray.getPrev(e.unitId)},t.getPositionByPoint=function(e){return this.getCellById(e.unitId).getPositionByPoint(e)},t.getRangeAfterInsert=function(){var e=this.getFirstCell(),t=Object.assign(e.getStartPoint(),{compId:this.id});return{start:t,end:t}},t.isLibraryComponent=function(){return this.getAllCellStores().some(function(e){return e.isLibraryComponent()})},t.getLibraryItemData=function(){var e=this,t=[];return this.getAllCellStores().forEach(function(n){t.push.apply(t,n.getLibraryItemData({compId:e.id}))}),t},t.isRepresentativeImage=function(){return this.getAllCellStores().some(function(e){return e.isRepresentativeImage()})},t.hasRepresentativeImage=function(){return this.getAllCellStores().some(function(e){return e.hasRepresentativeImage()})},t.releaseRepresentativeImage=function(e){this.getCellById(e.unitId).releaseRepresentativeImage(e)},t.setRepresentativeImage=function(e){var t=e.unitId,n=e.paraId,i=e.nodeId;t?this.getCellById(t).setRepresentativeImage(n,i):this.setDefaultRepresentativeImage()},t.getRepresentativeId=function(){var e=this,t=[];return this.getAllCellStores().forEach(function(n){n.getRepresentativeId().forEach(function(n){t.push(e.id+"|"+n)})}),t},t.getRepresentativeInnerData=function(){var e=Object(V.a)(this.getAllCellStores(),function(e){return e.hasRepresentativeImage()});return e?e.getRepresentativeInnerData():null},t.setDefaultRepresentativeImage=function(){this.getAllCellStores().some(function(e){return!!e.isRepresentativeImage()&&(e.setDefaultRepresentativeImage(),!0)})},t.deselect=function(){this._deselect()},t.putCursor=function(e){this._changeSelectionToChild(),this.getCellById(e.unitId).putCursor(e)},t.selectAsSingle=function(e,t){e.unitId===this.id&&0===this.selectedCellIds.length?this._changeSelectionToSingle():(this._changeSelectionToChild(),this._changeCellSelection(e.unitId,t.unitId))},t.selectAsBlock=function(e,t){this._deselect(),this.getCellById(e.unitId)?(this._changeSelectionToChild(),this._selectCellsAsBlock(e,t)):this._changeSelectionToBlock()},t._selectCellsAsBlock=function(e,t){var n=this,i=ne.getSelectedIds(this._indexMap,[e.unitId,t.unitId]);Object(k.a)(i,function(i){n.getCellById(i).selectAsBlock(e,t)})},t._filterRowsWithValue=function(e){return Object(B.a)(e,function(e){return e.cells.length>0})},t._updateCellsWidth=function(e,t){var n=this;Object(k.a)(e,function(e){var i=n.getCellById(e);i&&i.updateWidth(i.width+t)})},t._getCellSizeByIndex=function(e,t){var n=this._getTotalHeightBy(t,!0),i=this._getTotalWidthBy(e,!0);return{width:this._adjustCellWidth(i),height:n}},t._getTotalHeightBy=function(e,t){var n=this,i=ne.getCellIdsByColumnIndex(this._indexMap,e),r=0;return Object(k.a)(i,function(e){var i=n.getCellById(e);(i&&i.isSelected||!t)&&(r=n._parseFloatToFixedSecondDecimal(r+i.height))}),r},t._getTotalWidthBy=function(e,t){var n=this,i=ne.getCellIdsByRowIndex(this._indexMap,e),r=0;return Object(k.a)(i,function(e){var i=n.getCellById(e);!i.isSelected&&t||(r=n._parseFloatToFixedSecondDecimal(r+i.width))}),r},t._adjustCellWidth=function(e){return e>100?100:e<=0?1:e},t._insertRow=function(e,t){var n=t+1;this._deselectCells();var i=this._createRowBySingleCell(e);this.rows.splice(n,0,i);var r=i.getAllCelIdInRow();return this._updateTableMap(),this._updateUnSelectedAfterSplitRow(n,r),this._updateTableMap(),this.selectCells(r),this._resolveFocusAndAnchor(Object(D.a)(r),Object(A.a)(r))},t._insertColumn=function(e,t){var n=this;this._deselectCells();var i=this._getMinWidthByIds(e),r=Object(W.a)(e,function(e){return n._insertSingleColumnCell(e,i)});return this._widenColSpanByIndex(t,e,i),this._updateTableMap(),this.selectCells(r),this._refreshCellWidthAll(),this._resolveFocusAndAnchor(Object(D.a)(r),Object(A.a)(r))},t._splitSingleColumnCells=function(e,t){var n=this;return Object(W.a)(t,function(t){var i=n._splitSingleColumnCell(e,t);return n._updateColSpan(t),i})},t._splitMultiColumnCells=function(e,t){var n=this;return Object(W.a)(t,function(t){return n._splitMultiColumnCell(e,t)})},t._insertSingleColumnCell=function(e,t){if(e){var n=ne.getIndexByCellId(this._indexMap,e).rowIndexList,i=Object(D.a)(n),r=this.getCellById(e),o=r.rowSpan,a=r.height,s=r.backgroundColor,c=r.textAlign,l=r.borderInlineStyle,u=this.rows[i].getColIndexOf(e)+1,p={rowSpan:o,width:t,height:a,backgroundColor:s,textAlign:c,borderInlineStyle:l};return this.rows[i].insertCellToIndex(u,p)}},t._splitSingleColumnCell=function(e,t){var n=this.getCellById(t),i=this.rows[e].getColIndexOf(t)+1,r=n.rowSpan,o=n.colSpan,a=n.width,s=n.height,c=n.backgroundColor,l=n.textAlign,u=n.borderInlineStyle,p=this._parseFloatToFixedSecondDecimal(n.width/2),d={width:p,rowSpan:r,colSpan:o,height:s,backgroundColor:c,textAlign:l,borderInlineStyle:u};return n.width=a-p,this.rows[e].insertCellToIndex(i,d)},t._splitMultiColumnCell=function(e,t){var n=this.getCellById(t),i=Math.ceil(n.colSpan/2),r=this.rows[e].getColIndexOf(t)+1,o=n.rowSpan,a=n.colSpan,s=n.width,c=n.height,l=n.backgroundColor,u=n.textAlign,p=n.borderInlineStyle,d=a-i,h=this._parseFloatToFixedSecondDecimal(s*(d/a)),g={width:h,colSpan:d,rowSpan:o,height:c,backgroundColor:l,textAlign:u,borderInlineStyle:p};return n.width=n.width-h,n.colSpan=i,this.rows[e].insertCellToIndex(r,g)},t._updateColSpan=function(e){var t=this;ne.getSelectedIndex(this._indexMap,e).colIndexList.forEach(function(n){t._widenColSpanByIndex(n,[e])})},t._widenColSpanByIndex=function(e,t,n){var i=this;void 0===n&&(n=0);var r=ne.getCellIdsByColumnIndex(this._indexMap,e);r.length<1||r.forEach(function(e){if(!(t.indexOf(e)>-1)&&e){var r=i.getCellById(e);r.colSpan=r.colSpan+1,r.width=r.width+n}})},t._updateTableMap=function(){this._hashArray=this._createCellHashArray(),this._indexMap=ne.createIndexMap(this.rows),this._updateColumnCount()},t._updateColumnCount=function(){this.columnCount=this.rows.reduce(function(e,t){var n=t.cells.reduce(function(e,t){return e+(t.colSpan||1)},0);return n>e?n:e},1)},t._createCellHashArray=function(){var e=[];return this.rows.forEach(function(t){t.cells.forEach(function(t){e.push(t)})}),new Q.a(e)},t._mergeText=function(e,t){var n=this,i={start:this._getRangeOfSingleSelectedCell(e.getStartPoint(),0),end:this._getRangeOfSingleSelectedCell(e.getEndPoint(),1)};return t.forEach(function(t){var i=n.getCellById(t).getText();i.isEmpty()||e.getText().mergeWith(i)}),i},t._mergeOnlyText=function(e,t){var n=new X.a;e.forEach(function(e){"text"===e.attributes.insertion&&n.mergeWith(e.getText())}),n.isEmpty()||n.removeFirstParagraph();var i=this.getCurrentTargetCell({focus:t}).mergeWith(n,t);return i.start.compId=this.id,i.end.compId=this.id,{components:[this],range:i}},t._getRangeOfSingleSelectedCell=function(e,t){var n={paraId:null,nodeId:null,offset:t};return g()({},e,n)},t._deselectCells=function(){this._hashArray.forEach(function(e){e.deselect()})},t._selectCells=function(e){var t=this;Object(k.a)(e,function(e){var n=t.getCellById(e);n&&n.select()})},t._getUpCell=function(e){for(var t=e.unitId,n=ne.getIndexByCellId(this._indexMap,t),i=n.rowIndexList,r=n.colIndexList[0],o=i[0],a=t;a===t;)o-=1,a=this._indexMap[o]&&this._indexMap[o][r];if(a){var s=this.getCellById(a),c=this._getCellEndPonit(s);return{type:"range",range:{start:c,end:c}}}return{type:"prev-component",range:null}},t._getDownCell=function(e){for(var t=e.unitId,n=ne.getIndexByCellId(this._indexMap,t),i=n.rowIndexList,r=n.colIndexList[0],o=i[0],a=t;a===t;)o+=1,a=this._indexMap[o]&&this._indexMap[o][r];if(a){var s=this.getCellById(a),c=this._getCellStartPonit(s);return{type:"range",range:{start:c,end:c}}}return{type:"next-component",range:null}},t._getLeftCell=function(e){for(var t=e.unitId,n=ne.getIndexByCellId(this._indexMap,t),i=n.rowIndexList,r=n.colIndexList[0],o=i[0],a=t;a===t;)r-=1,a=this._indexMap[r]&&this._indexMap[o][r];if(a){var s=this.getCellById(a),c=this._getCellEndPonit(s);return{type:"range",range:{start:c,end:c}}}return{type:"prev-component",range:null}},t._getRightCell=function(e){for(var t=e.unitId,n=ne.getIndexByCellId(this._indexMap,t),i=n.rowIndexList,r=n.colIndexList[0],o=i[0],a=t;a===t;)r+=1,a=this._indexMap[o]&&this._indexMap[o][r];if(a){var s=this.getCellById(a),c=this._getCellStartPonit(s);return{type:"range",range:{start:c,end:c}}}return{type:"next-component",range:null}},t._getUpDownDestCellBy=function(e,t){var n;if(e===J.u.UP){var i=this._getUpCell(t),r=i.type,o=i.range;n="range"===r?o.start.unitId:t.unitId}if(e===J.u.DOWN){var a=this._getDownCell(t),s=a.type,c=a.range;n="range"===s?c.start.unitId:t.unitId}return n},t._getLeftRightDestCellBy=function(e,t){var n;if(e===J.u.LEFT){var i=this._getLeftCell(t),r=i.type,o=i.range;n="range"===r?o.start.unitId:t.unitId}if(e===J.u.RIGHT){var a=this._getRightCell(t),s=a.type,c=a.range;n="range"===s?c.start.unitId:t.unitId}return n},t._collapsedToStart=function(){var e=Object(D.a)(this.selectedCellIds),t=this.getCellById(e);return this._deselectCells(),this._getCellStartPonit(t)},t._getCellStartPonit=function(e){return Object.assign(e.getStartPoint(),{compId:this.id})},t._getCellEndPonit=function(e){return Object.assign(e.getEndPoint(),{compId:this.id})},t._changeCellSelection=function(e,t){var n=[];e===t?n.push(t):n.push(e,t),this.selectCells(n)},t._extendCellSelectionToEdge=function(e,t){var n=e?this.getFirstCell().id:this.getLastCell().id;return this._deselectCells(),this.selectCells([t,n]),this._resolveFocusAndAnchor(t,n)},t._resolveFocusAndAnchor=function(e,t){var n=ne.getIndexByCellId(this._indexMap,e),i=n.rowIndexList,r=n.colIndexList,o=ne.getIndexByCellId(this._indexMap,t),a=o.rowIndexList,s=o.colIndexList,c=i[0]>a[0],l=i[0]===a[0]&&r[0]>s[0],u=c||l?1:0,p=c||l?0:1;return{anchor:{compId:this.id,unitId:e,paraId:null,nodeId:null,offset:u},focus:{compId:this.id,unitId:t,paraId:null,nodeId:null,offset:p}}},t._getCellsStyle=function(e,t){var n=this,i=t.map(function(t){return n.getCellById(t).collectStyle(e)});return Y.a.mergeStyles(i)},t._createRowStores=function(e){return e.map(function(e){return new _e({state:e})})},t._addRowSingleCells=function(){var e=this,t=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).rowIndexList,n=this.rows.toJS(),i=0,r=[];return Object(k.a)(t,function(t){var o=t+i+1,a=e._insertSingleRow(t,o,n);a&&(r=r.concat(a.getAllCelIdInRow()),e._updateUnSelectedAfterSplitRow(t,r),i++)}),r},t._insertSingleRow=function(e,t,n){var i=this._createRowBySelectedCell(n[e]);if(i)return this.rows.splice(t,0,i),i},t._refreshCellWidthAll=function(){var e=this._getTotalWidthBy(0,!1);Object(k.a)(this.rows,function(t){t.refreshWidthAllBy(e)})},t._getMinWidthByIds=function(e){var t,n=this;return Object(k.a)(e,function(e){if(e){var i=n.getCellById(e).width;(!t||t>i)&&(t=i)}}),t},t._splitMultiRowCells=function(){var e=this,t=this.getCellIdsOfMultiRowCells();return t.length<1?[]:Object(W.a)(t,function(t){var n=ne.getSelectedIndex(e._indexMap,t).rowIndexList,i=e.getCellById(t),r=i.rowSpan,o=i.colSpan,a=i.width,s=i.height,c=i.backgroundColor,l=i.textAlign,u=i.borderInlineStyle,p=Math.ceil(r/2),d=e._parseFloatToFixedSecondDecimal(s*(p/r)),h={rowSpan:r-p,height:s-d,width:a,colSpan:o,backgroundColor:c,textAlign:l,borderInlineStyle:u};i.rowSpan=p,i.height=d;var g=Object(D.a)(n)+p,f=ne.getCellIdsByRowIndex(e._indexMap,g).indexOf(t);return e.rows[g].insertCellToIndex(f,h)})},t._createRowBySingleCell=function(e,t){var n=this;if(e.length<1)return null;var i=[];return Object(k.a)(e,function(e){var r=n.getCellById(e),o=r.colSpan,a=r.width,s=r.height,c={colSpan:o,width:a,backgroundColor:r.backgroundColor,borderInlineStyle:r.borderInlineStyle,textAlign:r.textAlign};if(t){var l=n._parseFloatToFixedSecondDecimal(s/2);r.height=l,c.height=s-l}i.push(c)}),new _e({state:{cells:i}})},t._createRowBySelectedCell=function(e){var t=e.getCellIdsSelectedSingleRow();return this._createRowBySingleCell(t,!0)},t._updateUnSelectedAfterSplitRow=function(e,t){var n=this;ne.getCellIdsByRowIndex(this._indexMap,e).map(function(e){var i=n.getCellById(e);(!i.isSelected&&!t.includes(i.id)||i.rowSpan>1)&&(i.rowSpan=i.rowSpan+1)})},t._removeSelectedRows=function(){var e=this,t=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).rowIndexList,n=this.rows.toJS();Object(k.a)(t,function(t){e.rows.remove(n[t])})},t._removeCells=function(e){var t,n,i=this,r=0;return Object(z.a)(this.rows,function(o){for(var a=!0;a;)n||(t=e.pop(),n=i.getCellById(t)),(a=o.cells.remove(n))&&(n=null);0===o.getAllCelIdInRow().length&&(i.rows.remove(o),r++)}),r>0&&this._refreshCellRowSpanAll(),r},t._updateCellsStyle=function(e){this._hashArray.forEach(function(t){t.updateInlineStyle(e)})},t._removeBorderStyle=function(){this.borderStyleName="",this.borderInlineStyle="",this._updateCellsStyle("")},t._isFocusedOnText=function(e){return this.hasUnit(e.focus.unitId)&&!!e.focus.paraId},t._parseFloatToFixedSecondDecimal=function(e){return parseFloat(e.toFixed(2))},t._deselect=function(){this._changeSelectionToNone(),this._deselectCells()},t._refreshCellRowSpanAll=function(){var e=this;this._updateColumnCount();var t=this.columnCount;this.rows.reduceRight(function(n,i){var r=i.getAllSortedRowSpanAndCellIds(),o=t-r.length,a=1,s=r[0].rowSpan;if(r.forEach(function(t){s!==t.rowSpan&&(a=n.pop()||1,s=t.rowSpan),e.getCellById(t.id).rowSpan=a}),o)for(var c=0;c<o;c++){var l=n[c]||1;n[c]=l+1}else n=[];return n},[])},t._refineBorderStyle=function(e){var t=Y.a.convertInlineStyleToObject(e),n=Y.a.adjustMinBorderWidth(t,"1px");return Y.a.convertObjectToInlineStyle(n)},t._resolveWidth=function(e){return Math.min(Math.max(Math.floor(e),10),100)},b()(n,[{key:"isSelectedComponent",get:function(){return Object(N.a)(["single","multi","block"],this.selection)}},{key:"isCellSelected",get:function(){return this.selectedCellIds.length>0||"child"===this.selection}},{key:"selectedCellIds",get:function(){var e=[];return this.rows.forEach(function(t){var n=t.getSelectedCellIds();e.push.apply(e,n)}),e}},{key:"selectedCellCount",get:function(){return this.isFocused&&this.selectedCellIds.length}},{key:"selectedState",get:function(){var e=ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds),t=e.rowIndexList,n=e.colIndexList;return{isRowSelectedAll:this._indexMap[0].length===n.length,isColSelectedAll:this._indexMap.length===t.length}}},{key:"isSelectedSingleColumnCell",get:function(){return 1===ne.getSelectedAllIndex(this._indexMap,this.selectedCellIds).colIndexList.length}},{key:"cellIdOfTopRightInSelected",get:function(){return Object(A.a)(this.getSelectedCellIdsInFirstRow())}},{key:"cellIdOfTopLeftInSelected",get:function(){return Object(D.a)(this.getSelectedCellIdsInFirstRow())}},{key:"cellIdOfBottomRightInSelected",get:function(){return Object(A.a)(this.getSelectedCellIdsInLastRow())}},{key:"translationEnabled",get:function(){return!0}}]),n}(J.g),de=L()(pe.prototype,"layout",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.d.DEFAULT}}),he=L()(pe.prototype,"width",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),ge=L()(pe.prototype,"columnCount",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),fe=L()(pe.prototype,"rows",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=L()(pe.prototype,"align",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=L()(pe.prototype,"borderStyleName",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ve=L()(pe.prototype,"borderInlineStyle",[Z.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L()(pe.prototype,"isSelectedComponent",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"isSelectedComponent"),pe.prototype),L()(pe.prototype,"isCellSelected",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"isCellSelected"),pe.prototype),L()(pe.prototype,"selectedCellIds",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"selectedCellIds"),pe.prototype),L()(pe.prototype,"selectedCellCount",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"selectedCellCount"),pe.prototype),L()(pe.prototype,"selectedState",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"selectedState"),pe.prototype),L()(pe.prototype,"isSelectedSingleColumnCell",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"isSelectedSingleColumnCell"),pe.prototype),L()(pe.prototype,"cellIdOfTopRightInSelected",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"cellIdOfTopRightInSelected"),pe.prototype),L()(pe.prototype,"cellIdOfTopLeftInSelected",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"cellIdOfTopLeftInSelected"),pe.prototype),L()(pe.prototype,"cellIdOfBottomRightInSelected",[Z.e],Object.getOwnPropertyDescriptor(pe.prototype,"cellIdOfBottomRightInSelected"),pe.prototype),pe);Se.ctype="table",Se.schema={id:K.a.string.isRequired,ctype:K.a.string.isRequired,layout:K.a.string.isRequired,align:K.a.string,width:K.a.number.isRequired,rows:K.a.arrayOf(K.a.shape(_e.schema)).isRequired,columnCount:K.a.number.isRequired,borderStyleName:K.a.string,borderInlineStyle:K.a.string};t.a=Se},320:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m=n(17),y=n.n(m),v=n(56),_=n.n(v),b=n(60),S=n.n(b),C=n(1),I=n.n(C),O=n(58),T=n.n(O),L=n(0),E=n.n(L),P=n(50),w=n.n(P),k=(n(61),n(16)),x=n(106),D=n(162),A=n(230),j=n(134),R=n(122),N=n(826),M=n(71),B=n(109),W=n(119),U=n(172),F=n(110),z=n(171),V=n(99),G=n(711),H=n(555),q=n(712),J=n(51),K=n(49),X=n(193),Y=n(781),Q=n(70),Z=n(1079),$=n(214),ee=n(557),te=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).ctype="imageNode",S()(n,"src",r,T()(n)),S()(n,"internalResource",o,T()(n)),S()(n,"represent",a,T()(n)),S()(n,"domain",s,T()(n)),S()(n,"path",c,T()(n)),S()(n,"phase",l,T()(n)),S()(n,"width",u,T()(n)),S()(n,"height",p,T()(n)),S()(n,"fileSize",d,T()(n)),S()(n,"fileName",h,T()(n)),S()(n,"selection",g,T()(n)),S()(n,"representativeEnabled",f,T()(n)),n.thumbnailTypeMap={};var i=t,m=i.state,y=void 0===m?{}:m,v=i.config,_=void 0===v?{}:v,b=Object(k.a)(y,"path",n.path);return n.path=ee.a.getEncodeUrl(b),n._configAgent=J.W.get("configAgent"),n._infraConfig=n._configAgent.get("infraConfig"),n.attributes=Object(Q.a)(n.attributes,_.attributes),n.thumbnailTypeMap=n._configAgent.get("editorInfo.thumbnailType")||n.thumbnailTypeMap,n.useThumbnail=Object(k.a)(n._infraConfig,"image.useThumbnail",!0),n.documentWidth=n._configAgent.get("productConfig.documentWidth"),n.domain=Object(k.a)(y,"domain",n._configAgent.get("infraInfo.photoInfra.imageHost")),n.imageMinimumHeight=n._configAgent.get("editorInfo.imageMinimumHeight"),n.imageMinimumWidth=n._configAgent.get("editorInfo.imageMinimumWidth"),n.src=null===Object(k.a)(y,"src",n.src)?null:n._getValidSrc(Object(k.a)(y,"src",n.src)),n.internalResource=Object(k.a)(y,"internalResource",n.internalResource),n.updateConfig(),n._updateImageScale(y),n.fileSize=Object(k.a)(y,"fileSize",n.fileSize),n.fileName=Object(k.a)(y,"fileName",n.fileName),n.phase=n._resolveComponentPhase(y),n.selection=Object(k.a)(y,"selection",n.selection),n.represent=Object(k.a)(y,"represent",n.represent),n._resolveSrc(),n}E()(t,e);var n=t.prototype;return n._getValidSrc=function(e){var t=ee.a.isImageTag(e)?ee.a.getSrcFromImageTag(e):e;return/^data:image\/[a-zA-Z]*;base64,/.test(t)?t:ee.a.prependProtocol(ee.a.getEncodeUrl(t))},n._asyncLoadImage=function(e,t){var n=new Image;n.onload=function(){t(n.width,n.height)},n.src=e},n._updateImageScale=function(e){var t=this,n=Object(k.a)(e,"width",this.width||0),i=Object(k.a)(e,"height",this.height||0);n&&i?this._resolveWidthAndHeight(n,i):this._asyncLoadImage(this.src,function(e,n){t._resolveWidthAndHeight(e,n)})},n._resolveWidthAndHeight=function(e,t){void 0===e&&(e=this.width),void 0===t&&(t=this.height);var n=e,i=t;if(n>this.documentWidth){var r=this.documentWidth/e;n=this.documentWidth,i=Math.floor(t*r)}this._updateSize(n,i)},n._updateSize=function(e,t){this.width=Math.floor(e),this.height=Math.floor(t)},n.updateImageNode=function(e){this.domain=Object(k.a)(e,"domain",this.domain),this.src=Object(k.a)(e,"src",this.src),this.path=Object(k.a)(e,"path",this.path),this.phase=Object(k.a)(e,"phase",this.phase),this.fileSize=Object(k.a)(e,"fileSize",this.fileSize),this.fileName=Object(k.a)(e,"fileName",this.fileName),this._updateImageScale(e),this._resolveSrc()},n.getRepresentativeImageURL=function(){return""+this.domain+this.path},n.getRepresentativeInnerData=function(){return this.toValidJSON()},n.updateConfig=function(){e.prototype.updateConfig.call(this),this.representativeEnabled=!1!==this._configAgent.get("productConfig.representativeEnabled")},n.isRepresentativeImage=function(){return e.prototype.isRepresentativeImage.call(this)&&!this.isSmallerThanMinimumSize(this.width,this.height)},n.isSmallerThanMinimumSize=function(e,t){var n=e<this.imageMinimumWidth,i=t<this.imageMinimumHeight;return n||i},n._resolveSrc=function(){var e=this.domain,t=this.path,n=this.internalResource;if(!t||!1===n)return this;var i=""+e+t,r=!1===this.useThumbnail?i:i+"?type="+this.thumbnailTypeMap.normal;this.src=r},n._resolveComponentPhase=function(e){if(!Object(k.a)(e,"internalResource"))return J.O.DONE;var t=Object(k.a)(e,"src"),n=Object(k.a)(e,"width"),i=Object(k.a)(e,"height"),r=Object(k.a)(e,"phase",J.O.EMPTY);return t&&n&&i?J.O.DONE:r},n._shouldUploadImage=function(){return this.src&&!this.path},n.isLibraryComponent=function(){return!1===this._shouldUploadImage()&&!0===this.internalResource},n.getLibraryItemData=function(e){var t=e.compId,n=e.unitId,i=e.paraId,r=this.toValidJSON(),o=Object.assign(r,{id:n,paraId:i,nodeId:this.id,link:Object(k.a)(this.link,"url","")});return{id:t,key:""+this.domain+this.path,thumbnail:this.src,data:o}},n.isImageNode=function(){return!0},n.isEmpty=function(){return""===this.src},n.isMergeable=function(){return!1},n.getStartPoint=function(){return{nodeId:this.id,offset:0}},n.getEndPoint=function(){return{nodeId:this.id,offset:1}},n.getPositionByOffset=function(e){return 0===e?$.d.NODE_START:$.d.NODE_END},n.getUrlInNode=function(){return null},n.getNodeLength=function(){return 1},n.cloneNode=function(){var e=this.toValidJSON();return e.themeStyle=this.themeStyle.toJSON(),new t({state:e})},n.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,src:this.src,style:K.f.toJS(this.style),link:K.f.toJS(this.link),internalResource:this.internalResource,represent:this.represent,path:this.path,domain:this.domain,width:this.width,height:this.height,fileName:this.fileName,fileSize:this.fileSize,phase:this.phase,themeStyle:K.f.toJS(this.themeStyle)}},t}(Object(J.bb)(X.a)),r=w()(i.prototype,"src",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=w()(i.prototype,"internalResource",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a=w()(i.prototype,"represent",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=w()(i.prototype,"domain",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=w()(i.prototype,"path",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=w()(i.prototype,"phase",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.O.EMPTY}}),u=w()(i.prototype,"width",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=w()(i.prototype,"height",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=w()(i.prototype,"fileSize",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=w()(i.prototype,"fileName",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=w()(i.prototype,"selection",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),f=w()(i.prototype,"representativeEnabled",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i);te.schema={id:Z.a.string,ctype:Z.a.string.isRequired,src:Z.a.string.isRequired,style:Z.a.shape({ctype:Z.a.string.isRequired,fontColor:Z.a.string,fontFamily:Z.a.string,fontSizeCode:Z.a.string,backgroundColor:Z.a.string,bold:Z.a.bool,italic:Z.a.bool,underline:Z.a.bool,strikeThrough:Z.a.bool,subscript:Z.a.bool,superscript:Z.a.bool}),link:Z.a.shape({ctype:Z.a.string.isRequired,url:Z.a.string.isRequired}),internalResource:Z.a.bool.isRequired,represent:Z.a.bool.isRequired,path:Z.a.string,domain:Z.a.string,width:Z.a.number.isRequired,height:Z.a.number.isRequired,fileName:Z.a.string,fileSize:Z.a.number};var ne,ie,re=te,oe=(ne=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).ctype="emojiNode",S()(n,"value",ie,T()(n));var i=t.state,r=void 0===i?{}:i;return n.value=Object(k.a)(r,"value",n.value),n}E()(t,e);var n=t.prototype;return n.isEmojiNode=function(){return!0},n.isEmpty=function(){return""===this.value},n.isMergeable=function(){return!1},n.getStartPoint=function(){return{nodeId:this.id,offset:0}},n.getEndPoint=function(){return{nodeId:this.id,offset:1}},n.getPositionByOffset=function(e){return 0===e?$.d.NODE_START:$.d.NODE_END},n.getUrlInNode=function(){return null},n.getNodeLength=function(){return 1},n.getPlainTextLength=function(){return this.value.length},n.cloneNode=function(){return new t({state:this.toValidJSON(),themeStyle:K.f.toJS(this.themeStyle)})},n.toPlainJSON=function(e,t){void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint());var n=e.nodeId===this.id?e.offset:0,i=t.nodeId===this.id?t.offset:this.value.length,r=[].concat(this.value).slice(n,i).join("");return{id:this.id,ctype:this.ctype,value:r,style:K.f.toJS(this.style),link:K.f.toJS(this.link),themeStyle:K.f.toJS(this.themeStyle)}},t}(X.a),ie=w()(ne.prototype,"value",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ne);oe.schema={id:Z.a.string,ctype:Z.a.string.isRequired,value:Z.a.string.isRequired,style:Z.a.shape({ctype:Z.a.string.isRequired,fontColor:Z.a.string,fontFamily:Z.a.string,fontSizeCode:Z.a.string,backgroundColor:Z.a.string,bold:Z.a.bool,italic:Z.a.bool,underline:Z.a.bool,strikeThrough:Z.a.bool,subscript:Z.a.bool,superscript:Z.a.bool}),link:Z.a.shape({ctype:Z.a.string.isRequired,url:Z.a.string.isRequired})};var ae,se,ce,le,ue,pe,de,he=oe,ge=["listType","listLevel"],fe=(ae=Object(K.e)({keepAlive:!0}),se=Object(K.e)({keepAlive:!0}),ce=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).ctype="paragraph",S()(n,"selection",le,T()(n)),S()(n,"nodes",ue,T()(n)),S()(n,"style",pe,T()(n)),S()(n,"themeStyle",de,T()(n)),n._configAgent=J.W.get("configAgent");var i=t.state,r=void 0===i?{}:i;return n.nodes=n._createNodeStores(Object(k.a)(r,"nodes",n.nodes)),n.style=Object(x.a)(n.style,r.style),r.themeStyle&&n.themeStyle.replace(Object.entries(r.themeStyle)),n.selection=Object(k.a)(r,"selection",n.selection),n._hashArray=new G.a(n.nodes),n}E()(t,e);var n=t.prototype;return n.isListParagraph=function(){return!!this.style.list},n.updateConfig=function(){this.nodes.forEach(function(e){e.updateConfig&&e.updateConfig()})},n.addNode=function(e,t){this._hashArray.add(e,t)},n.removeNode=function(e){this._hashArray.remove(e)},n.removeNodesBetween=function(e,t){this._hashArray.removeBetween(e,t)},n.removeNodesWithSelection=function(e){var t=e.start,n=e.end,i=this.splitNode(n),r=this.splitNode(t),o=i.front,a=r.back;t.nodeId===n.nodeId&&(o=a),this.removeNodesBetween(a.id,o.id),this.refine(r.front.id)},n.adjustWritePointOnEdge=function(e){var t=this.getNodeById(e.nodeId),n=this.createSameStyleNode(t),i=this.getPositionByPoint(e);if(i===$.d.NODE_START){var r=this.getPrevNode(e.nodeId);if(r&&r.isMergeable(n))return r.getEndPoint()}else if(i===$.d.NODE_END){var o=this.getNextNode(e.nodeId);if(o&&o.isMergeable(n))return o.getStartPoint()}return this._addNewNodeByPoint(e,n),n.getStartPoint()},n.isWholeParagraph=function(e){var t=e.start,n=e.end,i=t,r=n;this.has(t.nodeId)||(i=this.getStartPoint()),this.has(n.nodeId)||(r=this.getEndPoint());var o=this.getPositionByPoint(i),a=this.getPositionByPoint(r);return o===$.d.PARA_START&&a===$.d.PARA_END},n._addNewNodeByPoint=function(e,t){var n=this.getPositionByPoint(e);if(n===$.d.PARA_START||n===$.d.NODE_START){var i=this.getNodeIndex(e.nodeId);this.addNode(t,i)}else if(n===$.d.PARA_END||n===$.d.NODE_END){var r=this.getNodeIndex(e.nodeId)+1;this.addNode(t,r)}},n._splitNonTextNode=function(e){var t=this.getNodeById(e.nodeId),n=this.createSameStyleNode(t),i=this.getPositionByPoint(e);return this._addNewNodeByPoint(e,n),i===$.d.PARA_START||i===$.d.NODE_START?{front:n,back:t}:i===$.d.PARA_END||i===$.d.NODE_END?{front:t,back:n}:void 0},n.createSameStyleNode=function(e){return new Y.a({state:{style:e.style,themeStyle:K.f.toJS(e.themeStyle)}})},n.insertEmoji=function(e,t,n){void 0===n&&(n=null);var i=this.splitNode(t),r=i.front,o=i.back,a=this.getNodeIndex(r.id)+1,s=this._createSameStyleEmojiNode(r,e);n&&s.changeLink(n),this.addNode(s,a),r.isEmpty()&&this.removeNode(r.id);var c={nodeId:o.id,offset:o.getStartPoint().offset};return _()({},t,c)},n.insertPlainText=function(e,t,n){void 0===n&&(n=null);var i=this.splitNode(e),r=i.front,o=i.back,a=(r.isTextNode()?r.split(r.getNodeLength()):o.split(0)).back;return n&&a.changeLink(n),a.writeValue({offset:0,value:t}),this.addNode(a,this.getNodeIndex(r.id)+1),{paraId:this.id,nodeId:o.id,offset:0}},n._createSameStyleEmojiNode=function(e,t){return new he({state:{value:t,style:e.style,themeStyle:K.f.toJS(e.themeStyle)}})},n._getFirstNodeWithValue=function(){var e=this.getFirstNode();return e.isEmpty()?this.getNextNode(e.id):e},n.isStartWithEmoji=function(){var e=this._getFirstNodeWithValue();return e&&e.isEmojiNode()||!1},n.writeValue=function(e){var t=this.getNodeById(e.nodeId).writeValue(e);return _()({paraId:this.id},t)},n.merge=function(e){e.refine();var t=e.getFirstNode(),n=this.getLastNode(),i=n.isMergeable(t),r={paraId:this.id,nodeId:n.id};!this.isEmpty()||t.isEmpty()||i||(r=Object.assign(r,{nodeId:t.id}));var o=e.detachNodes();return this.addNode(o),this.refine(),r},n.mergeWithSpace=function(e){var t=this.getLastNode(),n={value:" "};t.isMergeable(n)&&t.mergeValue(n),this.merge(e)},n.replaceNodesBetween=function(e,t,n){this._hashArray.replaceBetween(n,e,t)},n.replaceAllNodes=function(e){this.nodes.replace(e),this._hashArray.syncUpWithDataList()},n.detachNodes=function(e,t){return this._hashArray.detachData(e,t)},n.split=function(e){var n=this._cloneStyle(),i=$.d.PARA_START,r=$.d.TEXT_START,o=this.getPositionByPoint(e);[i,r].includes(o)?this.style.dropCap=null:n.dropCap=null;var a=this.splitNode(e),s=a.front,c=a.back,l=this.getLastNode(),u=this.detachNodes(c.id,l.id),p=new t({state:{style:n,themeStyle:K.f.toJS(this.themeStyle),nodes:u}});return s.isEmpty()&&(s.changeLink(),s.removeAiStyle(),this.getNodesLength()>1&&this.removeNode(s.id)),c.isEmpty()&&(c.changeLink(),c.removeAiStyle()),{front:this,back:p}},n.splitNode=function(e){var t=e.nodeId,n=e.offset,i=this.getNodeById(t);if(i.isTextNode()){var r=i.split(n),o=r.front,a=r.back,s=this.getNodeIndex(o.id)+1;return this.addNode(a,s),{front:o,back:a}}return this._splitNonTextNode(e)},n.updateTheme=function(e){var t=["lineHeight","align","dropCap"],n=Object(j.a)(e,t);this.themeStyle.replace(Object.entries(n));var i=Object(R.a)(e,t);this.nodes.forEach(function(e){e.updateTheme(i)})},n.updateParagraphStyle=function(e){var t=this,n=e.listType,i=e.listLevel,r=y()(e,ge),o=r.align,a=r.lineHeight;o&&o!==J.o.LEFT&&o!==J.o.JUSTIFY&&(r.dropCap=null),a&&(r.lineHeight=Number(a)),n&&(r.list="reset"===n?null:{ctype:"paragraphListStyle",type:n,level:this.listLevel||0}),Number.isInteger(i)&&(n||this.isListParagraph())&&(r.list={ctype:"paragraphListStyle",type:n||this.listType,level:i}),Object(A.a)(this.style,r,function(e,n,i){return n===t.themeStyle.get(i)?null:n})},n.updateWholeCharacterStyle=function(e){var t=this.getFirstNode(),n=this.getLastNode();this.updateCharacterStyle(e,{startNode:t,endNode:n})},n.updateCharacterStyle=function(e,t){var n=t.startNode,i=t.endNode;this.getNodesBetween(n.id,i.id).forEach(function(t){t.updateCharacterStyle(e)})},n.resetStyle=function(){this.style={ctype:"paragraphStyle",align:null,lineHeight:null,dropCap:null,list:null},this.nodes.forEach(function(e){return e.resetStyle()})},n.applyDerivedParagraphStyle=function(e){var t=this,n=Object(U.a)(e,function(e,n){return null!==t.style[n]});this.updateParagraphStyle(n)},n.applyDerivedStylesToWholeCharacter=function(e){this.nodes.forEach(function(t){t.applyDerivedCharacterStyle(e)})},n.changeLink=function(e,t){var n=t.startNode,i=t.endNode;this.getNodesBetween(n.id,i.id).forEach(function(t){t.changeLink(e)})},n.writeAndLink=function(e,t){var n=this,i=this.getNodeById(t.nodeId),r=t;if(i.link)i.changeLink(e);else{var o=e.description,a=e.value;o&&o.length>0?H.a.separateCallbacksWithEmoji(o,function(t){r=n.insertEmoji(t,r,e)},function(t){r=n.insertPlainText(r,t,e)}):r=this.insertPlainText(r,a,e)}return r},n.refine=function(e){this.getNodesLength()<=1||this._mergeMergeableNode(e)},n._removeEmptyNode=function(e){var t=this;void 0===e&&(e=[]);var n=this.nodes,i=[].concat(e);Object(N.a)(n,function(e){var r=e.id;e.isEmpty()&&i.indexOf(r)<0&&n.length>1&&t.removeNode(r)})},n._mergeMergeableNode=function(e){var t=this.nodes,n=this.getFirstNode();Object(M.a)(t,function(e,t){0!==t&&(n.isMergeable(e)?(n.mergeValue(e),e.value=""):n=e)}),this._removeEmptyNode(e)},n.unwrapDropCap=function(){this.updateParagraphStyle({dropCap:null})},n.filterTextStyle=function(e,t){var n=this;e&&(Object(M.a)(e,function(e,i){if(!1!==n.style.hasOwnProperty(i)){var r=e===$.b.NOT_ALLOWED,o="function"==typeof e&&!e(n.style[i],t);(r||o)&&(n.style[i]=null)}}),this.nodes.forEach(function(n){n.filterCharStyle(e,t)}))},n.getNodeById=function(e){return this._hashArray.getDataById(e)},n.getNodeByIndex=function(e){return this._hashArray.getDataByIndex(e)},n.getNodeIndex=function(e){return this._hashArray.getIndex(e)},n.getFirstNode=function(){return this._hashArray.getFirst()},n.getLastNode=function(){return this._hashArray.getLast()},n.getPrevNode=function(e){return this._hashArray.getPrev(e)},n.getNextNode=function(e){return this._hashArray.getNext(e)},n.getNodesBetween=function(e,t){return this._hashArray.getBetween(e,t)},n.getNodesLength=function(){return this._hashArray.getLength()},n.has=function(e){return this._hashArray.has(e)},n.isOnlyUrlLink=function(){return 1===this.getNodesLength()&&this.getFirstNode().hasUrlLink()},n.isLinkNodeEdge=function(e){if(!1===this.getNodeById(e.nodeId).hasUrlLink())return!1;var t=this.getPositionByPoint(e);return t===$.d.PARA_START||t===$.d.NODE_START||t===$.d.NODE_END||t===$.d.PARA_END},n.isFirstTextNode=function(e){return this.getFirstNode().id===e},n.shouldUnwrapDropCapByErase=function(e,t,n,i){return!!this.style.dropCap&&(!1!==this.isFirstTextNode(t)&&!!(i&&e===J.u.LEFT&&1===n||i&&e===J.u.RIGHT&&0===n||!i&&0===n))},n.clear=function(){this._hashArray.clear()},n.toString=function(){return this.nodes.map(function(e){return e.value}).join("")},n.isEmpty=function(){var e=this.getNodesLength();return 0===e||1===e&&this.getFirstNode().isEmpty()},n.getStartPoint=function(){var e=this.getFirstNode();return{paraId:this.id,nodeId:e.id,offset:0}},n.getEndPoint=function(){var e=this.getLastNode(),t=e.getEndPoint();return{paraId:this.id,nodeId:e.id,offset:t.offset}},n.getPositionByPoint=function(e){var t=e.nodeId,n=e.offset,i=this.getNodeById(t),r=i.getPositionByOffset(n),o=this.getFirstNode()===i&&(i.isEmpty()||r===$.d.NODE_START),a=this.getLastNode()===i&&(i.isEmpty()||r===$.d.NODE_END);return o?$.d.PARA_START:a?$.d.PARA_END:r},n.is=function(e){return this.id===e},n.collectStyle=function(e){var t=e.start,n=e.end,i=this.getNodesBetween(t.nodeId,n.nodeId),r=Object(B.a)(i);if(0===r.length)return{};r.length>1&&(r[0].getNodeLength()===t.offset&&r.shift());var o=r.map(function(e){return e.collectStyle()}),a=q.a.mergeStyles(o),s=_()({},this.computedStyle,a);return delete s.ctype,s},n.getTextStyle=function(e){var t=this.getNodeById(e.nodeId)||this.getFirstNode(),n=_()({},this.style,t.style);return delete n.ctype,n.ai=null,n},n.getSelectedAlign=function(){return{align:this.style.align}},n.getOffsetInParagraph=function(e){for(var t=e.nodeId,n=e.offset,i=this.nodes,r=this.getNodeIndex(t),o=0,a=0;a<=r;a++)o+=a===r?n:i[a].getNodeLength();return o},n.getNodeValueLength=function(e){return this.getNodeById(e).getNodeLength()},n.getNodeInfoBeforeOffsetByPlainTextLength=function(e){var t=this.nodes,n=e,i=null,r=n;return t.some(function(e){if(i)return!0;if(!e.getPlainTextLength)return!1;var t=e.getPlainTextLength();n<=t&&(i=e,e.isTextNode()?r=n:e.isEmojiNode()&&(r=n===t?e.getEndPoint().offset:e.getStartPoint().offset)),n-=t}),{node:i,offset:r}},n.getNodeInfoBeforeOffset=function(e){var t=this.nodes,n=e,i=null,r=n;return t.some(function(e){if(i)return!0;var t=e.getNodeLength();(n===t||n<t)&&(i=e,r=n),n-=t}),{node:i,offset:r}},n.getNodeInfoAfterOffset=function(e){var t=this.nodes,n=e,i=null,r=n;return t.some(function(e){if(i)return!0;var t=e.getNodeLength();(0===n||n<t)&&(i=e,r=n),n-=t}),i||(i=this.getLastNode(),r=i.getNodeLength()),{node:i,offset:r}},n.getPlainText=function(){var e=[];return this.nodes.forEach(function(t){t.isTextNode()&&e.push(t.value)}),e.join("")},n.getPlainTextWithEmoji=function(){var e=[];return this.nodes.forEach(function(t){(t.isTextNode()||t.isEmojiNode())&&e.push(t.value)}),e.join("")},n.getPlainTextOnlyAi=function(){var e=[];return this.nodes.forEach(function(t){t.isAiTextNode()&&e.push(t.value)}),e.join("")},n.stripOffNonTexts=function(){this.replaceImageToText(),this.refine()},n.replaceImageToText=function(){var e=this;this.getAllImageNode().forEach(function(t){var n=e.createSameStyleNode(t);n.id=t.id,e.replaceNodesBetween(t.id,t.id,n)})},n.getAllImageNode=function(){return this.nodes.filter(function(e){return e.isImageNode()})},n.isBackward=function(e,t){var n=this.getNodeIndex(e.nodeId),i=this.getNodeIndex(t.nodeId);return!(i<n)&&(i!==n||e.offset<=t.offset)},n.isCenterOrRightAlign=function(){return["center","right"].includes(this.style.align)},n.createImageNodes=function(e,t){var n=this,i=[],r=[],o=[],a=this.getNodeById(e.nodeId),s=t.map(function(t){var s,c=t.isValid,l=t.file,u=t.fileInfo,p=t.code,d=e.unitId,h=e.paraId;if(c)s=new re({state:{internalResource:!0,width:parseInt(u.width,10),height:parseInt(u.height,10),phase:J.O.PROCESSING,fileName:l.name,fileSize:parseInt(l.size,10),themeStyle:K.f.toJS(a.themeStyle)}}),i.push("unitId:"+d+",paraId:"+h+",nodeId:"+s.id),r.push(l);else{var g=n._configAgent.get("productConfig.documentWidth");s=new re({state:{internalResource:!0,width:g,height:g*(9/16),phase:J.O.PROCESSING,fileName:l.name,fileSize:parseInt(l.size,10),themeStyle:K.f.toJS(a.themeStyle)}}),o.push({id:"unitId:"+d+",paraId:"+h+",nodeId:"+s.id,file:l,code:p})}return s}),c=this.splitNode(e).front,l=this.getNodeIndex(c.id);return this.addNode(s,l+1),{uploadTarget:{ids:i,files:r},invalidImages:o}},n.updateImageNodeById=function(e,t){var n=this.getNodeById(e);n&&n.updateImageNode({domain:t.domain,path:t.path+"/"+t.fileName,width:parseInt(t.width,10),height:parseInt(t.height,10),fileName:t.fileName,fileSize:parseInt(t.fileSize,10),internalResource:!0,phase:"DONE"})},n._getFirstImageNode=function(){return Object(W.a)(this.nodes.filter(function(e){return e.isImageNode()}))},n._cloneStyle=function(){return Object(D.a)(this.style)},n._createNodeStores=function(e){return 0===e.length?[new Y.a]:e.map(function(e){return e instanceof X.a?e:"imageNode"===e.ctype?new re({state:e}):"emojiNode"===e.ctype?new he({state:e}):new Y.a({state:e})})},n.getUrlInNode=function(e){return this.getNodeById(e.nodeId).getUrlInNode(e)},n.toValidJSON=function(){var e=Object(U.a)(this.style,function(e){return null===e}),t={id:this.id,ctype:this.ctype,nodes:this.nodes.map(function(e){return e.toValidJSON()})};return Object(F.a)(e).length>1&&(t.style=e),t},n.isLibraryComponent=function(){return this.nodes.some(function(e){return e.isLibraryComponent()})},n.getLibraryItemData=function(e){var t=this,n=e.compId,i=e.unitId,r=[];return this.nodes.forEach(function(e){e.isLibraryComponent()&&r.push(e.getLibraryItemData({compId:n,unitId:i,paraId:t.id}))}),r},n.setRepresentativeImage=function(e){var t=e?this.getNodeById(e):this._getFirstImageNode();t&&t.setRepresentativeImage()},n.releaseRepresentativeImage=function(e){this.getNodeById(e).releaseRepresentativeImage()},n.hasRepresentativeImage=function(){return this.nodes.some(function(e){return e.isImageNode()&&e.hasRepresentativeImage()})},n.isRepresentativeImage=function(){return this.nodes.some(function(e){return e.isImageNode()&&e.isRepresentativeImage()})},n.getRepresentativeId=function(){var e=this,t=[];return this.nodes.forEach(function(n){if(n.isImageNode()){var i=n.hasRepresentativeImage(),r=n.isRepresentativeImage(),o=n.getRepresentativeImageURL(),a="|"+e.id+"|"+n.id+":"+r+":"+i;o?t.push(a+":"+o):t.push(""+a)}}),t},n.getRepresentativeInnerData=function(){var e=Object(V.a)(this.nodes,function(e){return e.isImageNode()&&e.hasRepresentativeImage()});return e?e.getRepresentativeInnerData():null},n.hasInlineImage=function(){return this.nodes.some(function(e){return e.isImageNode()})},n.hasTextNode=function(){return this.nodes.some(function(e){return!e.isImageNode()})},n.hasDropCapInParagraph=function(){return this.style.dropCap},n.hasAiTextNode=function(){return this.nodes.some(function(e){return e.isAiTextNode()})},n.canBeListBySpace=function(){if(this.isListParagraph())return!1;var e=this.getPlainTextWithEmoji();return Object(z.a)(J.R).includes(e)},n.deselect=function(){this.selection="none",this.nodes.forEach(function(e){return e.deselect()})},n.toPlainJSON=function(e,t){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),_()({},this._toPlainJSON,{nodes:this.getNodesBetween(e.nodeId,t.nodeId).map(function(n,i,r){return n.toPlainJSON(0===i?e:void 0,i===r.length-1?t:void 0)})})},I()(t,[{key:"computedStyle",get:function(){var e=K.f.toJS(this.themeStyle);return Object(A.a)(e,this.style,function(e,t,n){return null!==t?"lineHeight"===n?t.toString():"list"===n?t.type:t:void 0!==e?"lineHeight"===n?e.toString():e:!!["align","lineHeight","list"].includes(n)&&null})}},{key:"firstNodeComputedStyle",get:function(){return this.getFirstNode().computedStyle}},{key:"isFocused",get:function(){return"none"!==this.selection}},{key:"firstTextNodeIndex",get:function(){return this.nodes.findIndex(function(e){return!e.empty})||0}},{key:"listType",get:function(){return this.style.list&&this.style.list.type}},{key:"listLevel",get:function(){return this.style.list&&this.style.list.level}},{key:"_toPlainJSON",get:function(){return{id:this.id,ctype:this.ctype,nodes:this.nodes.map(function(e){return e.toPlainJSON()}),style:K.f.toJS(this.style),themeStyle:K.f.toJS(this.themeStyle)}}}]),t}(J.w),le=w()(ce.prototype,"selection",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),ue=w()(ce.prototype,"nodes",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=w()(ce.prototype,"style",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{ctype:"paragraphStyle",align:null,lineHeight:null,dropCap:null,list:null}}}),de=w()(ce.prototype,"themeStyle",[K.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),w()(ce.prototype,"computedStyle",[ae],Object.getOwnPropertyDescriptor(ce.prototype,"computedStyle"),ce.prototype),w()(ce.prototype,"firstNodeComputedStyle",[K.e],Object.getOwnPropertyDescriptor(ce.prototype,"firstNodeComputedStyle"),ce.prototype),w()(ce.prototype,"isFocused",[K.e],Object.getOwnPropertyDescriptor(ce.prototype,"isFocused"),ce.prototype),w()(ce.prototype,"firstTextNodeIndex",[K.e],Object.getOwnPropertyDescriptor(ce.prototype,"firstTextNodeIndex"),ce.prototype),w()(ce.prototype,"_toPlainJSON",[se],Object.getOwnPropertyDescriptor(ce.prototype,"_toPlainJSON"),ce.prototype),ce);t.a=fe},322:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(50),a=n.n(o),s=n(69),c=n(54),l=n.n(c),u=n(49),p=n(376),d=n(251),h=n(52),g=n(59),f=n(1311),m=function(e){var t,n=e.name,i=e.value,r=e.defaultValue,o=e.invertIcon,a=!e.multipleValue&&(i||r),s=l()("se-toolbar-icon-"+n,{"se-is-inverted":o}),c="#fff"===a||"#ffffff"===a,p=l()(((t={})["se-"+n+"-indicator"]=!0,t["se-is-white-color"]=c,t["se-is-multiple-color"]=null===i,t));return u.b.createElement("span",{className:"se-toolbar-color-picker-icon"},u.b.createElement("span",{"data-role":"color",className:p,style:{backgroundColor:a}}),u.b.createElement("span",{"data-role":"icon",className:s}))};m.defaultProps={name:"",value:"",defaultValue:"#fff"},m.propTypes={name:u.a.string,value:u.a.string,defaultValue:u.a.string,invertIcon:u.a.bool,multipleValue:u.a.bool};var y=m,v=function(e){var t,n=e.name,i=e.value,r=e.defaultValue,o=e.multipleValue,a=!o&&(i||r),s="#fff"===a||"#ffffff"===a,c=l()(((t={})["se-"+n+"-indicator"]=!0,t["se-is-white-color"]=s,t["se-is-multiple-color"]=o,t));return u.b.createElement("span",{className:"se-toolbar-color-picker-icon"},u.b.createElement("span",{className:"se-toolbar-icon-"+n}),u.b.createElement("span",{"data-role":"color",className:c,style:{backgroundColor:a}}))};v.defaultProps={name:"",value:"",defaultValue:"#000"},v.propTypes={name:u.a.string,value:u.a.string,defaultValue:u.a.string,multipleValue:u.a.bool};var _,b=v,S=n(820),C=n(129),I=n(51),O=(_=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._isHexColor=function(e){return/^#([a-f\d]{3,6})$/i.test(e)},t._splitHexCode=function(e){var t=/^#([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(e);return 4===e.length&&(t[1]+=t[1],t[2]+=t[2],t[3]+=t[3]),t},t._isDarknessnessColor=function(e){if(!t._isHexColor(e))return!1;var n=t._splitHexCode(e),i=parseInt(n[1],16)/255,r=parseInt(n[2],16)/255,o=parseInt(n[3],16)/255;return(Math.max(i,r,o)+Math.min(i,r,o))/2<.5},t}r()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._RECENT_COLOR_LENGTH=12;var e="click.se-toolbar-color-picker-"+this.props.name;f.a.on(e,this._handleClickButtonOutside)},n.componentWillUnmount=function(){var e="click.se-toolbar-color-picker-"+this.props.name;f.a.off(e)},n.render=function(){var e=this.props,t=e.namespace,n=e.name,i=e.type,r=e.label,o=e.value,a=e.isActivated,s=e.recentColors,c=e.i18n,p=e.useColorDetailFlag,d=c(r),h=l()(["se-"+t+"-"+i+"-container","__select-container"]),g=this._renderCurrentColor();return u.b.createElement("div",{className:h,"data-type":i,"data-name":n},g,a&&u.b.createElement(S.a,{color:o,recentColors:s,useDetail:p,onChangeColor:this._handleChangeColor,label:d,i18n:c}))},n._renderCurrentColor=function(){var e=this.props,t=e.id,n=e.namespace,i=e.useBackground,r=e.label,o=e.useCurrentColor,a=e.value,s=e.defaultValue,c=e.deviceType,p=e.name,d=e.i18n,h=e.type,g=e.title,f=e.focused,m=e.isActivated,v=e.logAreaId,_=e.logId,S=c===I.t.DESKTOP,O=i?y:b,T={value:a,multipleValue:null===a,name:p,defaultValue:s,invertIcon:!!i&&this._isDarknessnessColor(a||s)},L=d(r),E=d(g),P=l()("se-"+n+"-toolbar-"+h+"-button","se-"+p+"-toolbar-button",{"se-is-activated":m});return!1===o?u.b.createElement(C.a,{focused:f,namespace:n,type:h,dataName:t,className:P,i18n:d,handleClick:this._handleClickSelector,ariaExpanded:""+m,ariaHasPopup:"true"},u.b.createElement("span",{className:"se-toolbar-icon"}),u.b.createElement("span",{className:"se-toolbar-label","aria-hidden":S},L),S&&u.b.createElement("span",{className:"se-toolbar-tooltip"},E)):u.b.createElement(C.a,{focused:f,namespace:n,type:h,dataName:t,logAreaId:v,logId:_,className:P,i18n:d,handleClick:this._handleClickSelector,ariaExpanded:""+m,ariaHasPopup:"true"},u.b.createElement(O,T),u.b.createElement("span",{className:"se-toolbar-label","aria-hidden":S},L),S&&u.b.createElement("span",{className:"se-toolbar-tooltip"},E))},n._handleClickButtonOutside=function(e){var t=e.target;this.props.isActivated&&d.a.isOutsideElementbySelector(t,".__select-container")&&this._handleClickSelector({})},n._handleClickSelector=function(e){var t=this.props,n=t.onClickSelector,i=t.type,r=t.id,o=t.name,a=t.label;n.apply(this,[{event:e,id:r,type:i,name:o,label:a}])},n._handleChangeColor=function(e){var t=this.props,n=t.onChange,i=t.id,r=t.type,o=t.name,a=t.label,c=t.title,l=t.storageKey,u=t.recentColors,p=u.indexOf(e.value);p>-1&&u.splice(p,1),u.unshift(e.value),u.length>this._RECENT_COLOR_LENGTH&&u.pop(),n(Object(s.a)({id:i,type:r,label:a,name:o,title:c,storageKey:l,recentColors:u},e))},t}(u.b.Component),a()(_.prototype,"_handleClickButtonOutside",[h.autobind],Object.getOwnPropertyDescriptor(_.prototype,"_handleClickButtonOutside"),_.prototype),a()(_.prototype,"_handleClickSelector",[h.autobind],Object.getOwnPropertyDescriptor(_.prototype,"_handleClickSelector"),_.prototype),a()(_.prototype,"_handleChangeColor",[h.autobind],Object.getOwnPropertyDescriptor(_.prototype,"_handleChangeColor"),_.prototype),_);O.defaultProps={label:"",id:"",name:"",namespace:"",focused:!1,title:"",storageKey:"",value:"",recentColors:[],onClickSelector:function(){},onChange:function(){},i18n:function(e){return e}},O.propTypes={type:u.a.oneOf([g.b.COLOR_PICKER]).isRequired,id:u.a.string,name:u.a.string,namespace:u.a.string,focused:u.a.bool,label:u.a.string,title:u.a.string,storageKey:u.a.string,value:u.a.string,defaultValue:u.a.string,useBackground:u.a.bool,useCurrentColor:u.a.bool,useColorDetailFlag:u.a.bool,deviceType:u.a.string,isActivated:u.a.bool,onClickSelector:u.a.func,onChange:u.a.func,i18n:u.a.func,recentColors:u.a.oneOfType([u.a.array,u.a.object]),logAreaId:u.a.string,logId:u.a.string};t.a=Object(p.b)(O)},323:function(e,t,n){"use strict";var i=n(51),r=n(1307),o=n(440),a=n(0),s=n.n(a),c=function(e){function t(){return e.apply(this,arguments)||this}s()(t,e);var n=t.prototype;return n.open=function(e){this._pauseDocumentEdit(),this._store.open(e)},n.close=function(){this._store.close(),this._unpauseDocumentEdit()},t}(i.d),l=n(441),u=i.G.extend({name:"ImageTypeLayer",view:Object(r.a)({Loader:function(){return n.e(50).then(n.bind(null,1327))}}),useCase:o.a,service:c,store:l.a});t.a=u},34:function(e,t,n){"use strict";n.d(t,"a",function(){return M}),n.d(t,"b",function(){return W});var i=n(1),r=n.n(i),o=n(0),a=n.n(o),s=n(23),c=n(16),l=function(){function e(){}return e.setConfig=function(e){this.config=e},e.getConfig=function(){return this.config},e.help=function(){return"스마트에디터 Web SDK 레퍼런스 북 - https://pages.oss.navercorp.com/SE3/SE-Guide/web-reference-book/"},e.set=function(e,t){Object(s.a)(this.config,e,t)},e.get=function(e,t){Object(c.a)(this.config,e,t)},e}();l.config={};var u=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"appCode",get:function(){return"애플리케이션 고유 코드"},set:function(e){this.set("appCode",e)}},{key:"containerElement",get:function(){return"HTMLElement 를 전달하시면 해당 영역에 에디터가 초기화 됩니다."},set:function(e){this.set("containerElement",e)}},{key:"token",get:function(){return"에디터 플랫폼을 활용하여 에디터가 작동하기 위해서는 스마트에디터 인증 토큰 연동이 필요합니다."},set:function(e){this.set("token",e)}},{key:"document",get:function(){return"초기에 불러올 문서 모델 데이터를 전달 할 수 있습니다."},set:function(e){this.set("document",e)}},{key:"cssResource",get:function(){return"에디터에 내장된 CSS 리소스에 대한 세부 설정을 지정할 수 있습니다."}},{key:"productConfig",get:function(){return p}},{key:"infraConfig",get:function(){return d}},{key:"modules",get:function(){return"에디터에 포함된 개별 모듈(이미지 업로더, 포토에디터, 동영상 업로더 등)의 기능을 제어 할 수 있습니다."}},{key:"plugins",get:function(){return T}},{key:"interceptor",get:function(){return L}}]),t}(l),p=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"language",get:function(){return x},set:function(e){this.set("productConfig.language",e)}},{key:"panelType",get:function(){return D},set:function(e){this.set("productConfig.panelType",e)}},{key:"captionEnabledComponents",get:function(){return N},set:function(e){this.set("productConfig.captionEnabledComponents",e)}},{key:"captionEnabled",get:function(){return"캡션 기능 사용 여부 지정"},set:function(e){this.set("productConfig.captionEnabled",e)}},{key:"defaultDocument",get:function(){return h}},{key:"domains",get:function(){return g}},{key:"font",get:function(){return m}},{key:"quotation",get:function(){return y}},{key:"horizontalLine",get:function(){return v}},{key:"documentToolbar",get:function(){return f}},{key:"insertMenu",get:function(){return"인서트 메뉴 기능 사용 여부를 선택 할 수 있습니다."},set:function(e){this.set("productConfig.insertMenu",e)}},{key:"contextToolbar",get:function(){return"컨텍스트 도구막대 기능 사용 여부를 선택 할 수 있습니다."},set:function(e){this.set("productConfig.contextToolbar",e)}},{key:"propertyToolbar",get:function(){return"속성 도구막대 기능 사용 여부를 선택 할 수 있습니다."},set:function(e){this.set("productConfig.propertyToolbar",e)}},{key:"textToolbar",get:function(){return"텍스트 도구막대 기능 사용 여부를 선택 할 수 있습니다."},set:function(e){this.set("productConfig.textToolbar",e)}},{key:"contextMenu",get:function(){return _}},{key:"searchPanel",get:function(){return b}},{key:"templatePanel",get:function(){return S}},{key:"libraryPanel",get:function(){return I}},{key:"documentWidth",get:function(){return"글쓰기 영역의 넓이를 조절 할 수 있습니다. 넓이에 따라 각 기능이 동적으로 계산되어 작동 됩니다."},set:function(e){this.set("productConfig.documentWidth",e)}},{key:"representativeEnabled",get:function(){return"문서 내 이미지/동영상의 대표이미지 기능 이용 여부를 선택 할 수 있습니다."},set:function(e){this.set("productConfig.representativeEnabled",e)}},{key:"messageBundle",get:function(){return"에디터의 UI 텍스트를 원하는 다른 텍스트로 변경 할 수 있습니다."}},{key:"userDefinedStyle",get:function(){return"사용자지정스타일을 설정할 수 있습니다."}},{key:"allowSameFontAndBackgroundColor",get:function(){return"본문 글자색과 배경색이 동일한 값을 가지도록 허용하거나 막을 수 있습니다."},set:function(e){this.set("productConfig.allowSameFontAndBackgroundColor",e)}},{key:"aiAssistant",get:function(){return"AI 글쓰기 관련 기능을 설정할 수 있습니다."},set:function(e){this.set("productConfig.aiAssistant",e)}}]),t}(l),d=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"image",get:function(){return"이미지 업로드와 관련된 설정을 조절 할 수 있습니다."}},{key:"video",get:function(){return"동영상 업로드와 관련된 설정을 조절 할 수 있습니다."}}]),t}(l),h=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"components",get:function(){return R},set:function(e){this.set("productConfig.defaultDocument.components",e)}}]),t}(l),g=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"editor",get:function(){return"에디터플랫폼API 도메인"},set:function(e){this.set("productConfig.domains.editor",e)}},{key:"dthumb",get:function(){return"동적썸네일생성API 도메인"},set:function(e){this.set("productConfig.domains.dthumb",e)}}]),t}(l),f=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"documentToolbar",get:function(){return M},set:function(e){this.set("productConfig.documentToolbar.buttonSet",e)}}]),t}(l),m=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"fontFamilySet",get:function(){return U},set:function(e){this.set("productConfig.font.fontFamilySet",e)}},{key:"additionalFontFamily",get:function(){return""},set:function(e){this.set("productConfig.font.additionalFontFamily",e)}}]),t}(l),y=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"layouts",get:function(){return A},set:function(e){this.set("productConfig.quotation.layouts",e)}},{key:"useDefault",set:function(e){this.set("productConfig.quotation.useBasicButton",e)}}]),t}(l),v=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"layouts",get:function(){return j},set:function(e){this.set("productConfig.horizontalLine.layouts",e)}},{key:"useDefault",set:function(e){this.set("productConfig.quotation.useBasicButton",e)}}]),t}(l),_=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"exclude",get:function(){return F},set:function(e){this.set("productConfig.contextMenu.exclude",e)}}]),t}(l),b=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"activate",get:function(){return B},set:function(e){this.set("productConfig.searchPanel.activate",e)}},{key:"photo",get:function(){return C}},{key:"travel",get:function(){return"여행 글감 사용 여부"},set:function(e){this.set("productConfig.searchPanel.travel",e)}},{key:"book",get:function(){return"책 글감 사용 여부"},set:function(e){this.set("productConfig.searchPanel.book",e)}},{key:"movie",get:function(){return"영화 글감 사용 여부"},set:function(e){this.set("productConfig.searchPanel.movie",e)}},{key:"broadcast",get:function(){return"방송 글감 사용 여부"},set:function(e){this.set("productConfig.searchPanel.broadcast",e)}},{key:"music",get:function(){return"음악 글감 사용 여부"},set:function(e){this.set("productConfig.searchPanel.music",e)}},{key:"show",get:function(){return"공연/전시 글감 사용 여부"},set:function(e){this.set("productConfig.searchPanel.show",e)}},{key:"shopping",get:function(){return"쇼핑 글감 사용 여부"},set:function(e){this.set("productConfig.searchPanel.shopping",e)}},{key:"news",get:function(){return"뉴스 글감 사용 여부"},set:function(e){this.set("productConfig.searchPanel.news",e)}}]),t}(l),S=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"recommend",get:function(){return"추천 템플릿 사용 여부"},set:function(e){this.set("productConfig.templatePanel.recommend",e)}},{key:"part",get:function(){return"부분 템플릿 사용 여부"},set:function(e){this.set("productConfig.templatePanel.part",e)}},{key:"my",get:function(){return"내 템플릿 사용 여부"},set:function(e){this.set("productConfig.templatePanel.my",e)}}]),t}(l),C=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"CCLBanner",get:function(){return"저작권 표시 관련 배너 표시 여부"},set:function(e){this.set("productConfig.searchPanel.photo.CCLBanner",e)}},{key:"OGQBanner",get:function(){return"OGQ 홍보 배너 표시 여부"},set:function(e){this.set("productConfig.searchPanel.photo.OGQBanner",e)}}]),t}(l),I=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"purchase",get:function(){return O},set:function(e){this.set("productConfig.libraryPanel.purchase",e)}},{key:"autoPopup",get:function(){return W},set:function(e){this.set("productConfig.libraryPanel.autoPopup",e)}}]),t}(l),O=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"banner",get:function(){return"구매목록 탭 배너 표시 여부"},set:function(e){this.set("productConfig.libraryPanel.purchase.banner",e)}}]),t}(l),T=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"componentSettings",get:function(){return w}},{key:"excludeComponents",get:function(){return k},set:function(e){this.set("plugins.excludeComponents",e)}},{key:"customComponents",get:function(){return""}}]),t}(l),L=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"before",get:function(){return"AJAX 호출직전에 실행할 함수"},set:function(e){this.set("interceptor.before",e)}},{key:"after",get:function(){return"AJAX 응답직후에 실행할 함수"},set:function(e){this.set("interceptor.after",e)}}]),t}(l),E=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"contentMode",get:function(){return z}},{key:"config",set:function(e){this.set("plugin.componentSettings.image.config.contentMode",e)}}]),t}(l),P=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"config",get:function(){return E},set:function(e){this.set("plugin.componentSettings.image.config",e)}}]),t}(l),w=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),r()(t,null,[{key:"image",get:function(){return P},set:function(e){this.set("plugin.componentSettings.image",e)}}]),t}(l),k=Object.freeze({AUDIO:"audio",CODE:"code",DOCUMENT_TITLE:"documentTitle",FILE:"file",FORMULA:"formula",HORIZONTAL_LINE:"horizontalLine",IMAGE:"image",IMAGE_GROUP:"imageGroup",IMAGE_STRIP:"imageStrip",MAP:"placesMap",MATERIAL:"material",OEMBED:"oembed",OGLINK:"oglink",QUOTATION:"quotation",SCHEDULE:"schedule",SECTION_TITLE:"sectionTitle",STICKER:"sticker",TABLE:"table",TEXT:"text",VIDEO:"video",WRAPPING_PARAGRAPH:"wrappingParagraph"}),x=(Object.freeze({IMAGE_RESIZING:"image-resizing",IMAGE_EDIT:"image-edit",ALIGN:"align",CONTENT_MODE:"content-mode",WRAPPING_LAYOUT:"wrapping-layout",IMAGE_LINK:"image-link",INLINE_IMAGE:"inline-image",SEPARATOR_BAR:"separator-bar"}),Object.freeze({TEXT_FORMAT:"text-format",FONT_SIZE:"font-size",BOLD:"bold",ITALIC:"italic",UNDERLINE:"underline",FONT_COLOR:"font-color",SEPARATOR_BAR:"separator-bar"}),Object.freeze({TEXT_FORMAT:"text-format",FONT_FAMILY:"font-family",FONT_SIZE:"font-size",BOLD:"bold",ITALIC:"italic",UNDERLINE:"underline",STRIKETHROUGH:"strikethrough",FONT_COLOR:"font-color",BACKGROUND_COLOR:"background-color",ALIGN_DROP_DOWN_WITH_JUSTIFY:"align-drop-down-with-justify",LINE_HEIGHT:"line-height",DROP_CAP:"drop-cap",SUPERSCRIPT:"superscript",SUBSCRIPT:"subscript",SPECIAL_LETTER:"special-letter",TEXT_LINK:"text-link",SPELLER:"speller",SEPARATOR_BAR:"separator-bar"}),Object.freeze({ALLOWED:"ALLOWED",NOT_ALLOWED:"NOT_ALLOWED"}),Object.freeze({KO_KR:"ko-KR",EN_US:"en-US",ID_ID:"id-ID",FR_FR:"fr-FR",ES_ES:"es-ES",VI_VN:"vi-VN",ZH_CN:"zh-CN",ZH_TW:"zh-TW",JA_JP:"ja-JP"})),D=(Object.freeze({FULL_SCREEN:"fullscreen",EMBED:"embed"}),Object.freeze({POPUP:"popup",SIDEBAR:"sidebar"})),A=Object.freeze({DEFAULT:"default",LINE:"quotation_line",BUBBLE:"quotation_bubble",UNDERLINE:"quotation_underline",POSTIT:"quotation_postit",CORNER:"quotation_corner"}),j=Object.freeze({DEFAULT:"default",LINE1:"line1",LINE2:"line2",LINE3:"line3",LINE4:"line4",LINE5:"line5",LINE6:"line6",LINE7:"line7"}),R=Object.freeze({DOCUMENT_TITLE:"documentTitle",TEXT:"text"}),N=Object.freeze({IMGAE:"image",IMAGE_STRIP:"imageStrip",IMAGE_GROUP:"imageGroup",VIDEO:"video"}),M=Object.freeze({TEXT_FORMAT:"text-format-drop-down",IMAGE:"image",SOCIAL_IMAGE:"social-media-image",VIDEO:"video",AUDIO:"audio",QUOTATION:"quotation",HORIZONTAL_LINE:"horizontal-line",MAP:"map",FILE:"file",OGLINK:"oglink",TABLE:"table",SEARCH:"search",LIBRARY:"library",MOMENT:"moment",TEMPLATE:"template",SCHEDULE:"schedule",CODE:"code",STICKER:"sticker",FORMULA:"formula",SEPARATOR_BAR:"separator-bar",TEXT:"text-toolbar",ALIGN:"align",TALKTALK:"talktalk",WEBTOON:"webtoon",CHAT:"chat",AI_WRITE:"ai-write"}),B=Object.freeze({PHOTO:"photo",BOOK:"book",MOVIE:"movie",BROADCAST:"broadcast",SHOW:"show",MUSIC:"music",SHOPPING:"shopping",NEWS:"news"}),W=Object.freeze({DEFAULT:"default",ACTIVE:"active",INACTIVE:"inactive"}),U=Object.freeze({SYSTEM:"system",NANUMGOTHIC:"nanumgothic",NANUMMYEONGJO:"nanummyeongjo",NANUMBARUNGOTHIC:"nanumbarungothic",NANUMSQURE:"nanumsquare"}),F=Object.freeze({CUT:"cut",COPY:"copy",PASTE:"paste",SELECT_ALL:"selectAll",SAVE_AS:"saveAs",DELETE:"delete",UNDO:"undo",REDO:"redo"}),z=Object.freeze({NORMAL:"normal",FIT:"fit",EXTEND:"extend",PAGEFULL:"pagefull"});t.c=u},389:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(51),a=function(e){function t(){var t;return(t=e.call(this)||this)._uploadProgressLayerService=o.W.get("uploadProgressLayerService"),t}r()(t,e);var n=t.prototype;return n.confirm=function(){this._uploadProgressLayerService.confirm()},n.close=function(){this._uploadProgressLayerService.end()},t}(o.m);t.a=a},39:function(e,t,n){"use strict";var i={COMMON:{INSERT_COMPONENTS:"insertComponents",PREPEND_COMPONENTS:"prependComponents",APPEND_COMPONENTS:"appendComponents",DELETE_COMPONENTS:"deleteComponents"},IMAGE:{INSERT_IMAGES:"insertImages",INSERT_IMAGE_FILES:"insertImagesByFile",INSERT_IMAGE_URLS:"insertImagesByUrl"}};t.a=i},390:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i,r,o,a,s,c,l,u=n(60),p=n.n(u),d=n(58),h=n.n(d),g=n(0),f=n.n(g),m=n(50),y=n.n(m),v=(n(61),n(16)),_=n(51),b=n(49),S={PROGRESSING:"progressing",DONE:"done",CLOSE:"close"},C=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this,p()(n,"opened",r,h()(n)),p()(n,"title",o,h()(n)),p()(n,"description",a,h()(n)),p()(n,"count",s,h()(n)),p()(n,"totalCount",c,h()(n)),p()(n,"phase",l,h()(n));var i=t.state,u=void 0===i?{}:i;return n.opened=Object(v.a)(u,"opened",n.opened),n.title=Object(v.a)(u,"title",n.title),n.description=Object(v.a)(u,"description",n.description),n.count=Object(v.a)(u,"count",n.count),n.totalCount=Object(v.a)(u,"totalCount",n.totalCount),n.phase=Object(v.a)(u,"phase",n.phase),n}f()(t,e);var n=t.prototype;return n.start=function(e){this.opened=!0,this.title=e.title||"",this.description=e.description||"",this.totalCount=e.totalCount||0,this.phase=S.PROGRESSING},n.updateProgress=function(e){this.title=e.title,this.description=e.description,this.phase=S.PROGRESSING},n.update=function(e){this.title=e.title,this.description=e.description,this.count+=1;var t=e.doneStateResolver||this._defaultDoneStateResolver;this._checkAllDone(t)},n.end=function(){this.title="",this.description="",this.count=0,this.totalCount=0,this.phase=S.CLOSE,this.opened=!1},n.confirmProgress=function(){this.phase=S.CLOSE},n._checkAllDone=function(e){if(this.count===this.totalCount){var t=e({count:this.count,totalCount:this.totalCount}),n=t.title,i=t.description;this.title=n,this.description=i,this.count=0,this.totalCount=0,this.phase=S.DONE}},n._defaultDoneStateResolver=function(){return{title:"",description:""}},t}(_.e),r=y()(i.prototype,"opened",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=y()(i.prototype,"title",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=y()(i.prototype,"description",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=y()(i.prototype,"count",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=y()(i.prototype,"totalCount",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=y()(i.prototype,"phase",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.PROGRESSING}}),i);t.b=C},391:function(e,t,n){"use strict";var i=n(58),r=n.n(i),o=n(0),a=n.n(o),s=n(51),c=function(e){function t(){var t;return(t=e.call(this)||this)._highlightBannerLayerService=s.W.get("highlightBannerLayerService"),s.W.get("configAgent").get("productEnv.deviceType")===s.t.MOBILE?t._highlightBannerLayerService.open():s.W.get("eventDispatcherService").once(s.z.SELECTION_CHANGE,t.open.bind(r()(t))),t}a()(t,e);var n=t.prototype;return n.open=function(){this._highlightBannerLayerService.open()},n.close=function(){this._highlightBannerLayerService.close()},t}(s.m);t.a=c},392:function(e,t,n){"use strict";var i,r,o,a=n(60),s=n.n(a),c=n(58),l=n.n(c),u=n(0),p=n.n(u),d=n(50),h=n.n(d),g=(n(61),n(16)),f=n(51),m=n(49),y=n(239),v=n(289),_=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this,s()(n,"opened",r,l()(n)),s()(n,"type",o,l()(n)),n.release="",n.fontColor=v.b.BLACK,n.dimmedColor="transparent",n.bgColor="",n.title="",n.description="",n.buttonText="",n.buttonTextColor="",n.buttonColor="",n.link="",n.src="";var i=t.state,a=void 0===i?{}:i;n._configAgent=f.W.get("configAgent");var c=n._configAgent.get("productConfig.highlight"),u=c&&c.banner;if(y.b.init(c),c&&c.banner){var p=c.banner;n.type=Object(g.a)(a,"type",p.type||n.type),n.release=p.release||n._displayVersion(),n.fontColor=Object(g.a)(a,"fontColor",p.fontColor||n.fontColor),n.dimmedColor=Object(g.a)(a,"dimmedColor",p.dimmedColor||n.dimmedColor),n.title=p.title,n.description=p.description,n.bgColor=p.bgColor,n.buttonText=p.buttonText,n.buttonTextColor=p.buttonTextColor,n.buttonColor=p.buttonColor,n.link=p.link,n.src=p.src}return n.shown=!c||!u||y.b.shown(n.type,y.a.BANNER),n.opened=Object(g.a)(a,"opened",n.opened),n}p()(t,e);var n=t.prototype;return n._displayVersion=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)},n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},t}(f.e),r=h()(i.prototype,"opened",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=h()(i.prototype,"type",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.a.IMAGE}}),i);t.a=_},393:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=(i=function(e){function t(){var t;return(t=e.call(this)||this)._alertLayerService=c.W.get("alertLayerService"),t}o()(t,e);var n=t.prototype;return n.open=function(e){this._alertLayerService.open(e)},n.close=function(){this._alertLayerService.close()},n.confirm=function(){this._alertLayerService.confirm()},n.cancel=function(){this._alertLayerService.cancel()},t}(c.m),s()(i.prototype,"open",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"open"),i.prototype),s()(i.prototype,"close",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),s()(i.prototype,"confirm",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"confirm"),i.prototype),s()(i.prototype,"cancel",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"cancel"),i.prototype),i);t.a=u},394:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=n(51).n},395:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d=n(60),h=n.n(d),g=n(58),f=n.n(g),m=n(0),y=n.n(m),v=n(50),_=n.n(v),b=(n(61),n(394)),S=n(51),C=n(49),I={white:"white",black:"black"},O=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this,h()(n,"type",r,f()(n)),h()(n,"fileType",o,f()(n)),h()(n,"opened",a,f()(n)),h()(n,"title",s,f()(n)),h()(n,"description",c,f()(n)),h()(n,"errorList",l,f()(n)),h()(n,"isDimUse",u,f()(n)),h()(n,"dimColor",p,f()(n)),n.buttons=[],n.custom=null,n.className="";var i=t,d=i.config,g=void 0===d?{}:d,m=i.state,y=void 0===m?{}:m;return n.type=y.type||n.type,n.fileType=y.fileType,n.opened=y.opened||n.opened,n.title=y.title||n.title,n.description=y.description||n.description,n.errorList=y.errorList||n.errorList,n.showErrorInfo=g.showErrorInfo,n.custom=y.custom||n.custom,n}y()(t,e);var n=t.prototype;return n.open=function(e){if(!e)return!1;this.type=e.type,this.fileType=e.fileType,this.title=e.title,this.description=e.description,this.errorList=e.errorList||[],this.buttons=e.buttons||[],this.isDimUse=!1!==e.isDimUse&&this.isDimUse,this.dimColor=I[e.dimColor]||I.white,this.custom=e.custom||this.custom,this.className=e.className||this.className,this.opened=!0},n.close=function(){this.opened=!1,this.errorList.clear()},t}(S.e),r=_()(i.prototype,"type",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.a.ALERT}}),o=_()(i.prototype,"fileType",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=_()(i.prototype,"opened",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=_()(i.prototype,"title",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=_()(i.prototype,"description",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=_()(i.prototype,"errorList",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=_()(i.prototype,"isDimUse",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=_()(i.prototype,"dimColor",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.white}}),i);t.a=O},396:function(e,t,n){"use strict";var i,r,o=n(56),a=n.n(o),s=n(12),c=n.n(s),l=n(18),u=n.n(l),p=n(0),d=n.n(p),h=n(50),g=n.n(h),f=n(51),m=n(52),y=n(49),v=n(69),_=n(121),b=n(152),S=(i=Object(m.history)({sync:!1}),r=function(e){function t(){var t;return(t=e.call(this)||this)._i18n=f.W.get("i18n"),t._searchPanelLayoutService=f.W.get("searchPanelLayoutService"),t._editingService=f.W.get("editingService"),t._toastLayerService=f.W.get("toastLayerService"),t._imageDetailLayerService=f.W.get("imageDetailLayerService"),t._imageBehavior=f.W.get("imageBehavior"),t._dragAndDropService=f.W.get("dragAndDropService"),t._paidPhotoNotificationLayerService=f.W.get("paidPhotoNotificationLayerService"),t._hotkeyBinder=f.W.get("hotkeyBinder"),t}d()(t,e);var n=t.prototype;return n.search=function(){var e=u()(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._searchPanelLayoutService.search(t,n);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),n.recommendData=function(){var e=u()(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.resetAll(),e.prev=1,e.next=4,this._searchPanelLayoutService.recommendData(t,n);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.failed&&this._triggerServerError();case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(t,n){return e.apply(this,arguments)}}(),n.keywordSearch=function(){var e=u()(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._searchPanelLayoutService.keywordSearch(t,n);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),n.changeSearchOption=function(){var e=u()(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._searchPanelLayoutService.changeSearchOption(t,n);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),n.changeSearchType=function(){var e=u()(c.a.mark(function e(t,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._searchPanelLayoutService.changeSearchType(t,n);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),n.open=function(){this._searchPanelLayoutService.open()},n.close=function(){this._paidPhotoNotificationLayerService.close(),this._searchPanelLayoutService.close()},n.resetAll=function(){this._searchPanelLayoutService.resetAll()},n.insertItem=function(){var e=u()(c.a.mark(function e(t,n){var i,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("photo"!==this._searchPanelLayoutService.getSearchType()){e.next=14;break}return e.next=4,this._isAuthorizedImage(t);case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this._searchPanelLayoutService.itemDataToCompData(t);case 9:return i=e.sent,e.next=12,this._imageBehavior.insertImageFromCompData([i]);case 12:e.next=18;break;case 14:return e.next=16,this._searchPanelLayoutService.itemDataToStore(t);case 16:r=e.sent,this._insertComponent(a()({sourceComponents:[r]},n));case 18:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n._insertComponent=function(e){return this._editingService.insert(e)},n.dragStart=function(){var e=u()(c.a.mark(function e(t,n){var i,r,o,a,s,l,u,p,d=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isUnboughtPhoto(n)){e.next=5;break}return t.preventDefault(),this._dragAndDropService.dragStart({event:t,items:[],type:"aside"}),setTimeout(function(){return d._dragAndDropService.drop(null)}),e.abrupt("return");case 5:if(i=this._searchPanelLayoutService.getSearchType(),r=n.provider,o=n.purchased,a=n.free,s=this._searchPanelLayoutService.convertToDragItem(n),this._dragAndDropService.dragStart({event:t,items:[s],type:"aside"}),"photo"!==i){e.next=23;break}if(!o&&r===b.a.OGQ_COMMERCIAL&&!a){e.next=21;break}return e.next=13,this._isAuthorizedImage(n);case 13:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:return l=Object(v.a)({},{fromText:this._i18n("searchPanelLayout:from_text",{username:n.username,providerdisplayname:n.providerDisplayName})},n),e.next=19,this._searchPanelLayoutService.itemDataToCompData(l);case 19:u=e.sent,this._dragAndDropService.setItem(u,"aside");case 21:e.next=28;break;case 23:if("news"===i){e.next=28;break}return e.next=26,this._searchPanelLayoutService.itemDataToStore(n);case 26:p=e.sent,this._dragAndDropService.setItem(p,"aside");case 28:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n._isUnboughtPhoto=function(e){var t=this._searchPanelLayoutService.getSearchType(),n=e.purchased,i=e.provider;return"photo"===t&&!1===n&&i===b.a.OGQ_COMMERCIAL},n.nextPage=function(){var e=u()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._searchPanelLayoutService.nextPage();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}(),n.reset=function(){this._searchPanelLayoutService.reset()},n.openDetailLayer=function(e){this._imageDetailLayerService.open(e)},n.openPaidPhotoNotificationLayer=function(){this._paidPhotoNotificationLayerService.open()},n.removeItemById=function(e){this._searchPanelLayoutService.removeItemById(e)},n.showWarning=function(e){this._toastLayerService.warningMessage(e)},n._isAuthorizedImage=function(){var e=u()(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.provider!==b.a.OGQ_COMMERCIAL){e.next=7;break}return e.next=4,this._searchPanelLayoutService.authorizedImage(t.id);case 4:if(e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.focusInput=function(){this._hotkeyBinder.pause()},n.blurInput=function(){this._hotkeyBinder.unpause()},n.makeDThumbUrl=function(e){return _.a.makeDthumbHttpsUrl(e)},n.refresh=function(){var e=u()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._searchPanelLayoutService.updateErrorStatus(!1),e.prev=1,e.next=4,this._searchPanelLayoutService.requestData(this._searchPanelLayoutService.getSearchType(),this._searchPanelLayoutService.getSearchOption());case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.failed&&this._triggerServerError();case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),n._triggerServerError=function(){this._searchPanelLayoutService.updateErrorStatus(!0),this.showWarning(this._i18n("searchPanelLayout:error_server_data_load"))},n.setSearchedState=function(e){this._searchPanelLayoutService.setSearchedState(e)},t}(f.m),g()(r.prototype,"search",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"search"),r.prototype),g()(r.prototype,"recommendData",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"recommendData"),r.prototype),g()(r.prototype,"keywordSearch",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"keywordSearch"),r.prototype),g()(r.prototype,"changeSearchOption",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"changeSearchOption"),r.prototype),g()(r.prototype,"changeSearchType",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"changeSearchType"),r.prototype),g()(r.prototype,"open",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"open"),r.prototype),g()(r.prototype,"close",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),g()(r.prototype,"resetAll",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"resetAll"),r.prototype),g()(r.prototype,"insertItem",[m.preventOnComponentProcessing,i,y.d],Object.getOwnPropertyDescriptor(r.prototype,"insertItem"),r.prototype),g()(r.prototype,"nextPage",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"nextPage"),r.prototype),g()(r.prototype,"reset",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"reset"),r.prototype),g()(r.prototype,"openDetailLayer",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"openDetailLayer"),r.prototype),g()(r.prototype,"openPaidPhotoNotificationLayer",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"openPaidPhotoNotificationLayer"),r.prototype),g()(r.prototype,"removeItemById",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"removeItemById"),r.prototype),g()(r.prototype,"focusInput",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"focusInput"),r.prototype),g()(r.prototype,"blurInput",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"blurInput"),r.prototype),g()(r.prototype,"refresh",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"refresh"),r.prototype),g()(r.prototype,"_triggerServerError",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"_triggerServerError"),r.prototype),r);t.a=S},397:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f=n(56),m=n.n(f),y=n(60),v=n.n(y),_=n(1),b=n.n(_),S=n(58),C=n.n(S),I=n(0),O=n.n(I),T=n(50),L=n.n(T),E=(n(61),n(16)),P=n(96),w=n(253),k=n(497),x=n(569),D=n(748),A=n(51),j=n(49),R=n(84),N=["photo","travel","book","movie","broadcast","music","show","shopping","news"],M=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,v()(n,"initialized",r,C()(n)),v()(n,"opened",o,C()(n)),v()(n,"searchOption",a,C()(n)),v()(n,"total",s,C()(n)),v()(n,"next",c,C()(n)),v()(n,"start",l,C()(n)),v()(n,"searchType",u,C()(n)),v()(n,"items",p,C()(n)),v()(n,"isFetchNextPageError",d,C()(n)),v()(n,"errorStatus",h,C()(n)),v()(n,"alreadySearchedState",g,C()(n));var i=t.state,f=void 0===i?{}:i;return n.name="search",n._searchPanelConfig=n._makeSearchPanelConfig(),n.initialized=Object(E.a)(f,"initialized",n.initialized),n.opened=Object(E.a)(f,"opened",n.opened),n.searchOption=Object(E.a)(f,"searchOption",n.searchOption),n.total=Object(E.a)(f,"total",n.total),n.next=Object(E.a)(f,"next",n.next),n.start=Object(E.a)(f,"start",n.start),n.searchType=Object(E.a)(f,"searchType",n.initialSearchType),n.items=Object(E.a)(f,"items",n.items),n.isFetchNextPageError=Object(E.a)(f,"isFetchNextPageError",n.isFetchNextPageError),n}O()(t,e);var n=t.prototype;return n._makeSearchPanelConfig=function(){var e=A.W.get("configAgent"),t=e.get("productConfig.searchPanel")||{},n=e.get("plugins.excludeComponents");return n&&(n.includes("image")&&(t.photo=!1),n.includes("material")&&Object(D.a)(N,"photo").forEach(function(e){t[e]=!1})),t},n.open=function(){this.opened=!0},n.close=function(){this.opened=!1,this.errorStatus=!1},n.update=function(e){this._replaceHttpThumbnailToHttps(e.items),this._update(e)},n.updateErrorStatus=function(e){this.errorStatus=e},n.removeItemById=function(e){var t=this._getPlainItemsAndIndexById(e),n=t.plainItems,i=t.index;n.splice(i,1),this.items=n},n._getPlainItemsAndIndexById=function(e){var t=j.f.toJS(this.items);return{plainItems:t,index:Object(P.a)(t,function(t){return t.id===e})}},n.append=function(e){this._replaceHttpThumbnailToHttps(e.items),this._append(e)},n.changeSearchType=function(e){this.searchType=e},n.changeSearchOption=function(e){var t=Object(w.a)(Object(E.a)(e,"keyword",this.searchOption.keyword));this.searchOption=m()({},this.searchOption,e,{keyword:t})},n._update=function(e){Object.assign(this,{next:{}},e),this.initialized=!0},n._replaceHttpThumbnailToHttps=function(e){e.forEach(function(e){if(e.image){e.image=e.image.replace("http://sstatic.naver.net","https://ssl.pstatic.net/sstatic")}})},n._append=function(e){var t=e.items,n=e.searchOption,i=e.next,r=e.total,o=e.isFetchNextPageError;t&&(this.items=this.items.concat(t)),this.next=i,this.total!==r&&(this.total=o?this.total:r),("photo"!==this.searchType||!n||Object(R.a)(n.keyword,this.searchOption.keyword)&&Object(R.a)(n.orientation,j.f.toJS(this.searchOption.orientation))&&Object(R.a)(n.paid,j.f.toJS(this.searchOption.paid)))&&(this.isFetchNextPageError=!!o)},n.reset=function(){this.initialized=!1,this.items=[],this.total=0,this.start="1",this.next={},this.isFetchNextPageError=!1,this.errorStatus=!1},n.resetAll=function(){if(this.reset(),this.searchOption={keyword:""},this.searchType=this.initialSearchType,this._searchPanelConfig.photo){var e=this._searchPanelConfig.photo.license;this.searchOption.paid=e||["F","P"]}},n.getItemByIndex=function(e){return this.items[e]},n.availableMaterials=function(){var e=Object(x.a)(this._searchPanelConfig,function(e,t,n){!t&&N.includes(n)&&e.push(n)},[]);return Object(k.a)(N,e)},n.getPanelConfig=function(e){var t=Object(E.a)(this._searchPanelConfig,e,{});return!0===t?{}:t},n.setSearchedState=function(e){this.alreadySearchedState=e},b()(t,[{key:"initialSearchType",get:function(){var e=this.availableMaterials();return Object(E.a)(this._searchPanelConfig,"activate",e[0])}},{key:"item",get:function(){return{initialized:this.initialized,keyword:this.keyword,searchType:this.searchType,searchOption:this.searchOption,total:this.total,next:this.next,items:this.items,isFetchNextPageError:this.isFetchNextPageError}}},{key:"alreadySearched",get:function(){return this.alreadySearchedState}}]),t}(A.w),r=L()(i.prototype,"initialized",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=L()(i.prototype,"opened",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=L()(i.prototype,"searchOption",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{keyword:""}}}),s=L()(i.prototype,"total",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=L()(i.prototype,"next",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=L()(i.prototype,"start",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"1"}}),u=L()(i.prototype,"searchType",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"photo"}}),p=L()(i.prototype,"items",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=L()(i.prototype,"isFetchNextPageError",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=L()(i.prototype,"errorStatus",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=L()(i.prototype,"alreadySearchedState",[j.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L()(i.prototype,"item",[j.e],Object.getOwnPropertyDescriptor(i.prototype,"item"),i.prototype),i);t.a=M},399:function(e,t,n){"use strict";var i,r,o=n(56),a=n.n(o),s=n(12),c=n.n(s),l=n(18),u=n.n(l),p=n(0),d=n.n(p),h=n(50),g=n.n(h),f=n(51),m=n(52),y=n(49),v=n(121),_=(i=Object(m.history)({sync:!1}),r=function(e){function t(){var t;return(t=e.call(this)||this)._i18n=f.W.get("i18n"),t._momentPanelLayoutService=f.W.get("momentPanelLayoutService"),t._editingService=f.W.get("editingService"),t._toastLayerService=f.W.get("toastLayerService"),t._dragAndDropService=f.W.get("dragAndDropService"),t}d()(t,e);var n=t.prototype;return n.search=function(){var e=u()(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.resetAll(),e.prev=1,e.next=4,this._momentPanelLayoutService.search(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.failed&&this._triggerServerError();case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(t){return e.apply(this,arguments)}}(),n.changeMomentOption=function(e){this._momentPanelLayoutService.changeMomentOption(e)},n.open=function(){this._momentPanelLayoutService.open()},n.close=function(){this._momentPanelLayoutService.close()},n.resetAll=function(){this._momentPanelLayoutService.resetAll()},n.insertItem=function(){var e=u()(c.a.mark(function e(t,n){var i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._momentPanelLayoutService.itemDataToStore(t);case 2:return i=e.sent,e.abrupt("return",this._editingService.insert(a()({sourceComponents:[i]},n)));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.dragStart=function(){var e=u()(c.a.mark(function e(t,n){var i,r,o,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.dragType,!(r=n.itemData).isPrivate){e.next=4;break}return this.showWarning(this._i18n("momentPanelLayout:error_drag_private_item")),e.abrupt("return",!1);case 4:return o=this._momentPanelLayoutService.convertToDragItem(r),this._dragAndDropService.dragStart({event:t,items:[o],type:i}),e.next=8,this._momentPanelLayoutService.itemDataToCompData(r);case 8:a=e.sent,this._dragAndDropService.setItem(a,i);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.nextPage=function(){var e=u()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._momentPanelLayoutService.nextPage();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}(),n.reset=function(){this._momentPanelLayoutService.reset()},n.removeItemById=function(e){this._momentPanelLayoutService.removeItemById(e)},n.showWarning=function(e){this._toastLayerService.warningMessage(e)},n.makeDThumbUrl=function(e){return v.a.makeDthumbHttpsUrl(e)},n.refresh=function(){var e=u()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._momentPanelLayoutService.updateErrorStatus(!1),e.prev=1,e.next=4,this._momentPanelLayoutService.search(this._momentPanelLayoutService.getMomentOption());case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.failed&&this._triggerServerError();case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),n._triggerServerError=function(){this._momentPanelLayoutService.updateErrorStatus(!0),this.showWarning(this._i18n("momentPanelLayout:error_server_data_load"))},t}(f.m),g()(r.prototype,"search",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"search"),r.prototype),g()(r.prototype,"changeMomentOption",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"changeMomentOption"),r.prototype),g()(r.prototype,"open",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"open"),r.prototype),g()(r.prototype,"close",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),g()(r.prototype,"resetAll",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"resetAll"),r.prototype),g()(r.prototype,"insertItem",[m.preventOnComponentProcessing,i,y.d],Object.getOwnPropertyDescriptor(r.prototype,"insertItem"),r.prototype),g()(r.prototype,"dragStart",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"dragStart"),r.prototype),g()(r.prototype,"nextPage",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"nextPage"),r.prototype),g()(r.prototype,"reset",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"reset"),r.prototype),g()(r.prototype,"removeItemById",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"removeItemById"),r.prototype),g()(r.prototype,"refresh",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"refresh"),r.prototype),g()(r.prototype,"_triggerServerError",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"_triggerServerError"),r.prototype),r);t.a=_},400:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return a});var i={ORDER:"ordering"},r={ordering:"latest"},o="moment",a=10},401:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g=n(56),f=n.n(g),m=n(60),y=n.n(m),v=n(1),_=n.n(v),b=n(58),S=n.n(b),C=n(0),I=n.n(C),O=n(50),T=n.n(O),L=(n(61),n(16)),E=n(96),P=n(51),w=n(49),k=n(400),x=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,y()(n,"initialized",r,S()(n)),y()(n,"opened",o,S()(n)),y()(n,"momentOption",a,S()(n)),y()(n,"total",s,S()(n)),y()(n,"next",c,S()(n)),y()(n,"start",l,S()(n)),y()(n,"momentType",u,S()(n)),y()(n,"items",p,S()(n)),y()(n,"isFetchNextPageError",d,S()(n)),y()(n,"errorStatus",h,S()(n));var i=t.state,g=void 0===i?{}:i;return n.name="moment",n._configAgent=P.W.get("configAgent"),n._momentPanelConfig=n._configAgent.get("productConfig.momentPanel"),n.initialized=Object(L.a)(g,"initialized",n.initialized),n.opened=Object(L.a)(g,"opened",n.opened),n.momentOption=Object(L.a)(g,"momentOption",n.momentOption),n.total=Object(L.a)(g,"total",n.total),n.next=Object(L.a)(g,"next",n.next),n.start=Object(L.a)(g,"start",n.start),n.momentType=Object(L.a)(g,"momentType",Object(L.a)(n._momentPanelConfig,"activate",n.momentType)),n.items=Object(L.a)(g,"items",n.items),n.isFetchNextPageError=Object(L.a)(g,"isFetchNextPageError",n.isFetchNextPageError),n}I()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1,this.errorStatus=!1},n.update=function(e){this._replaceHttpThumbnailToHttps(e.items),this._update(e)},n.updateErrorStatus=function(e){this.errorStatus=e},n.removeItemById=function(e){var t=this._getPlainItemsAndIndexById(e),n=t.plainItems,i=t.index;n.splice(i,1),this.items=n},n._getPlainItemsAndIndexById=function(e){var t=w.f.toJS(this.items);return{plainItems:t,index:Object(E.a)(t,function(t){return t.id===e})}},n.append=function(e){this._replaceHttpThumbnailToHttps(e.items),this._append(e)},n.changeMomentOption=function(e){this.items=[],this.momentOption=f()({},this.momentOption,e)},n._update=function(e){Object.assign(this,{next:{}},e),this.initialized=!0,this.isFetchNextPageError=!1},n._replaceHttpThumbnailToHttps=function(e){e.forEach(function(e){if(e.image){e.image.url=e.image.url.replace("http://sstatic.naver.net","https://ssl.pstatic.net/sstatic")}})},n._append=function(e){var t=e.items,n=e.next,i=e.total,r=e.isFetchNextPageError;t&&(this.items=this.items.concat(t)),this.next=n,this.total!==i&&(this.total=r?this.total:i),this.isFetchNextPageError=!!r},n.reset=function(){this.initialized=!1,this.items=[],this.total=0,this.start="1",this.next={},this.isFetchNextPageError=!1,this.errorStatus=!1},n.resetAll=function(){this.reset(),this.momentOption=k.a,this.momentType=Object(L.a)(this._momentPanelConfig,"activate","moment")},n.getItemByIndex=function(e){return this.items[e]},n.getPanelConfig=function(e){return Object(L.a)(this._momentPanelConfig,e,{})},_()(t,[{key:"item",get:function(){return{initialized:this.initialized,momentType:this.momentType,momentOption:this.momentOption,total:this.total,next:this.next,items:this.items,isFetchNextPageError:this.isFetchNextPageError}}}]),t}(P.w),r=T()(i.prototype,"initialized",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=T()(i.prototype,"opened",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=T()(i.prototype,"momentOption",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.a}}),s=T()(i.prototype,"total",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=T()(i.prototype,"next",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=T()(i.prototype,"start",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"1"}}),u=T()(i.prototype,"momentType",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.c}}),p=T()(i.prototype,"items",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=T()(i.prototype,"isFetchNextPageError",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=T()(i.prototype,"errorStatus",[w.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T()(i.prototype,"item",[w.e],Object.getOwnPropertyDescriptor(i.prototype,"item"),i.prototype),i);t.a=x},402:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(51),h=n(52),g=n(49),f=n(403),m=(i=function(e){function t(){var t;return(t=e.call(this)||this)._editingService=d.W.get("editingService"),t._stickerPanelLayoutService=d.W.get("stickerPanelLayoutService"),t._documentToolbarLayoutService=d.W.get("documentToolbarLayoutService"),t._toastLayerService=d.W.get("toastLayerService"),t._storageService=d.W.get("storageService"),t._dragAndDropService=d.W.get("dragAndDropService"),t._localStorageKey="STICKER_PANEL//STORAGE",t._i18n=d.W.get("i18n"),t}l()(t,e);var n=t.prototype;return n.closeStickerRefreshLayer=function(){this._stickerPanelLayoutService.closeRefreshPanel()},n.refreshSticker=function(){var e=s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._stickerPanelLayoutService.closeRefreshPanel(),e.prev=1,e.next=4,this._stickerPanelLayoutService.updateCategory();case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.failed,this._stickerPanelLayoutService.updateErrorStatus(!0),this._toastLayerService.warningMessage(this._i18n("stickerPanelLayout:error_server_data_load"));case 11:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),n.loadInitializeData=function(){var e=s()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._storageService.getStorageData(this._localStorageKey),e.prev=1,e.next=4,this._stickerPanelLayoutService.loadInitializeData(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.failed&&this._triggerErrorToast();case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),n.clickMarketLink=function(){this._stickerPanelLayoutService.openRefreshPanel(f.a.BUY_STICKER)},n.clickStickerSettings=function(){this._stickerPanelLayoutService.openRefreshPanel(f.a.CHANGE_SETTING)},n.open=function(){this._stickerPanelLayoutService.open()},n.close=function(){this._stickerPanelLayoutService.close()},n.dragStart=function(e,t){var n=this._stickerPanelLayoutService.getStickerCompData(t);this._dragAndDropService.dragStart({event:e,items:[n],type:"aside",dropCallback:this._handleDropCallback.bind(this,t)})},n._handleDropCallback=function(e){this._pushUsedSticker(e)},n.updateStickerPack=function(){var e=s()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._stickerPanelLayoutService.updateStickerPack(t);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.failed&&this._triggerErrorToast();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),n.updateUsedStickerPack=function(){var e=this._storageService.getStorageData(this._localStorageKey);this._stickerPanelLayoutService.updateUsedStickerPack(e)},n.insertSticker=function(e){var t=this._stickerPanelLayoutService.insertItem(e);this._editingService.insert({sourceComponents:[t]}),this._pushUsedSticker(e)},n._pushUsedSticker=function(e){var t=this._storageService.getStorageData(this._localStorageKey)||[],n=this._stickerPanelLayoutService.getUsedStickerList(t,e);this._storageService.setStorageData(this._localStorageKey,n)},n.refresh=function(){this._stickerPanelLayoutService.updateErrorStatus(!1),this.loadInitializeData()},n._triggerErrorToast=function(){this._stickerPanelLayoutService.updateErrorStatus(!0),this._toastLayerService.warningMessage(this._i18n("stickerPanelLayout:error_server_data_load"))},t}(d.m),p()(i.prototype,"loadInitializeData",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"loadInitializeData"),i.prototype),p()(i.prototype,"clickMarketLink",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"clickMarketLink"),i.prototype),p()(i.prototype,"clickStickerSettings",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"clickStickerSettings"),i.prototype),p()(i.prototype,"open",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"open"),i.prototype),p()(i.prototype,"close",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),p()(i.prototype,"dragStart",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"dragStart"),i.prototype),p()(i.prototype,"updateStickerPack",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"updateStickerPack"),i.prototype),p()(i.prototype,"updateUsedStickerPack",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"updateUsedStickerPack"),i.prototype),p()(i.prototype,"insertSticker",[h.preventOnComponentProcessing,h.history,g.d],Object.getOwnPropertyDescriptor(i.prototype,"insertSticker"),i.prototype),p()(i.prototype,"refresh",[g.d],Object.getOwnPropertyDescriptor(i.prototype,"refresh"),i.prototype),i);t.a=m},403:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={BUY_STICKER:"sticker-refresh-layer//buySticker",CHANGE_SETTING:"sticker-refresh-layer//changeSetting"}},404:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p=n(60),d=n.n(p),h=n(1),g=n.n(h),f=n(58),m=n.n(f),y=n(0),v=n.n(y),_=n(50),b=n.n(_),S=(n(61),n(16)),C=n(78),I=n(96),O=n(51),T=n(49),L=n(403),E=74,P=0,w=82,k=160,x=3,D=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,d()(n,"opened",r,m()(n)),d()(n,"initialized",o,m()(n)),d()(n,"categoryInfo",a,m()(n)),d()(n,"stickerPack",s,m()(n)),d()(n,"activeIndex",c,m()(n)),d()(n,"errorStatus",l,m()(n)),d()(n,"refreshType",u,m()(n));var i=t.state,p=void 0===i?{}:i;return n.name="sticker",n.opened=Object(S.a)(p,"opened",n.opened),n.initialized=Object(S.a)(p,"initialized",n.initialized),n.categoryInfo=Object(S.a)(p,"categoryInfo",n.categoryInfo),n.stickerPack=Object(S.a)(p,"stickerPack",n.stickerPack),n.activeIndex=Object(S.a)(p,"activeIndex",n.activeIndex),n}v()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1,this.errorStatus=!1,this.refreshType=""},n.updateErrorStatus=function(e){this.errorStatus=e},n.updateCategory=function(e){this._updateCategory(e),this.initialized=!0},n.updateStickerPack=function(e){var t=e.stickerPack,n=e.packCode;this._updateStickerPack(t),this._updateActiveIndexByPackCode(n)},n.updateActiveIndexByPackCode=function(e){this._updateActiveIndexByPackCode(e)},n.updateUsedStickerPack=function(e){this._updateStickerPack(e),this._updateActiveIndexByPackCode("used")},n._updateActiveIndexByPackCode=function(e){var t=this._getPackIndexByPackCode(e);this.activeIndex=t},n._updateCategory=function(e){this.categoryInfo=e},n._updateStickerPack=function(e){this.stickerPack=e},n._getPackIndexByPackCode=function(e){return Object(I.a)(this.categoryInfo.list,function(t){return t.packCode===e})},n._getStickerXPosition=function(e){var t=P,n=w,i=k;switch(e){case 0:return t;case 1:return n;case 2:return i}},n.openRefreshPanel=function(e){e===L.a.BUY_STICKER||e===L.a.CHANGE_SETTING?this.refreshType=e:this.refreshType=""},n.closeRefreshPanel=function(){this.refreshType=""},g()(t,[{key:"categoryList",get:function(){var e=this.categoryInfo.info;return Object(C.a)(this.categoryInfo.list,function(t){var n=e.domain+"/"+t.packCode;return{packCode:t.packCode,isAnimated:t.isAnimated,activeIcon:n+"/"+e.tabOnName,inactiveIcon:n+"/"+e.tabOffName,stickerPackImage:n+"/"+e.previewName}})}},{key:"stickerList",get:function(){var e=this,t=this.categoryInfo.info,n=t.domain,i=t.previewName,r=E,o=x;return Object(C.a)(this.stickerPack,function(t){var a=t.packCode,s=t.seq,c=t.stickerInfo,l=t.animated,u=n+"/"+a+"/"+i,p=(s-1)%o,d=-e._getStickerXPosition(p),h=-Math.floor((s-1)/o)*r,g=c.originalUrl+"?"+c.type.animated;return{packCode:a,stickerCode:c.stickerCode,seq:s,animated:l,animatedUrl:g,url:u,backgroundPosition:d+"px "+h+"px"}})}}]),t}(O.w),r=b()(i.prototype,"opened",[T.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=b()(i.prototype,"initialized",[T.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=b()(i.prototype,"categoryInfo",[T.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{info:{},list:[]}}}),s=b()(i.prototype,"stickerPack",[T.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=b()(i.prototype,"activeIndex",[T.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=b()(i.prototype,"errorStatus",[T.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=b()(i.prototype,"refreshType",[T.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b()(i.prototype,"categoryList",[T.e],Object.getOwnPropertyDescriptor(i.prototype,"categoryList"),i.prototype),b()(i.prototype,"stickerList",[T.e],Object.getOwnPropertyDescriptor(i.prototype,"stickerList"),i.prototype),i);t.a=D},405:function(e,t,n){"use strict";var i,r,o=n(12),a=n.n(o),s=n(18),c=n.n(s),l=n(58),u=n.n(l),p=n(0),d=n.n(p),h=n(50),g=n.n(h),f=n(69),m=n(52),y=n(49),v=n(51),_=(i=Object(m.history)({sync:!1}),r=function(e){function t(){var t;return(t=e.call(this)||this)._i18n=v.W.get("i18n"),t._componentListStore=v.W.get("componentListStore"),t._libraryPanelLayoutService=v.W.get("libraryPanelLayoutService"),t._imageDetailLayerService=v.W.get("imageDetailLayerService"),t._editingService=v.W.get("editingService"),t._dragAndDropService=v.W.get("dragAndDropService"),t._imageBehavior=v.W.get("imageBehavior"),t._toastLayerService=v.W.get("toastLayerService"),t._documentService=v.W.get("documentService"),t._eventDispatcherService=v.W.get("eventDispatcherService"),t._documentToolbarLayoutService=v.W.get("documentToolbarLayoutService"),t._stickerRefreshLayerService=v.W.get("stickerRefreshLayerService"),t._panelContainerLayerService=v.W.get("panelContainerLayerService"),t._eventDispatcherService.on(v.z.DOCUMENT_LOADED,t._documentLoaded.bind(u()(t))),t._eventDispatcherService.on(v.z.DOCUMENT_CHANGED,t._documentChanged.bind(u()(t))),t}d()(t,e);var n=t.prototype;return n.open=function(){this._libraryPanelLayoutService.open()},n.close=function(){this._libraryPanelLayoutService.close()},n.updateMediaList=function(){this._libraryPanelLayoutService.updateMediaList()},n._isNewDocument=function(){return this._documentService.getDocumentStatus()===v.v.NORMAL},n._autoPopup=function(){this._libraryPanelLayoutService.isTimeToAutoPopup(this._isNewDocument())&&this._panelContainerLayerService.getPanelType()===v.M.SIDEBAR&&(this._libraryPanelLayoutService.openTab("current_document"),this._documentToolbarLayoutService.setPanelButtonEnable("library",!0),this._panelContainerLayerService.openPanel("library"))},n._documentLoaded=function(){var e=this;setTimeout(function(){e.updateMediaList()},0)},n._documentChanged=function(){this.updateMediaList(),this._autoPopup()},n.removeItemBy=function(e){var t=this._libraryPanelLayoutService.getSyncUnitList(e);t.length&&this._editingService.eraseUnit(t),this._libraryPanelLayoutService.removeItemBy(e)},n.dragStart=function(){var e=c()(a.a.mark(function e(t,n){var i,r,o,s,c,l,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.dragType,r=n.itemIndex,o=n.itemData,this._dragAndDropService.dragStart({event:t,items:[o],type:i}),"purchased_list"!==(s=this._libraryPanelLayoutService.getLibraryType())){e.next=11;break}return c=Object(f.a)({},{fromText:this._i18n("libraryPanelLayout:from_text",{username:o.username,providerdisplayname:o.providerDisplayName})},o),e.next=7,this._libraryPanelLayoutService.itemDataToCompData(c);case 7:l=e.sent,this._dragAndDropService.setItem(l,i),e.next=17;break;case 11:if("current_document"!==s){e.next=17;break}return e.next=14,this._libraryPanelLayoutService.getCompData(r);case 14:(u=e.sent).represent=!1,this._dragAndDropService.setItem(u,i);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.changeLibraryType=function(e,t){this._libraryPanelLayoutService.changeLibraryType(e,t)},n.changeOrderOption=function(e){this._libraryPanelLayoutService.changeOrderOption(e)},n.setRepresentativeImage=function(e){var t=this._libraryPanelLayoutService.getSyncUnitList(e)[0];v.W.get("representativeImageService").setRepresentativeImage(t),this._libraryPanelLayoutService.updateMediaList()},n.insertItem=function(){var e=c()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._libraryPanelLayoutService.itemDataToCompData(t);case 2:return n=e.sent,e.next=5,this._imageBehavior.insertImageFromCompData([n]);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.nextPage=function(){var e=c()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._libraryPanelLayoutService.nextPage();case 2:(t=e.sent)&&this.showWarning(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.openDetailLayer=function(e){this._imageDetailLayerService.open(e)},n.showWarning=function(e){this._toastLayerService.warningMessage(e)},t}(v.m),g()(r.prototype,"open",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"open"),r.prototype),g()(r.prototype,"close",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),g()(r.prototype,"updateMediaList",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"updateMediaList"),r.prototype),g()(r.prototype,"removeItemBy",[m.history,y.d],Object.getOwnPropertyDescriptor(r.prototype,"removeItemBy"),r.prototype),g()(r.prototype,"dragStart",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"dragStart"),r.prototype),g()(r.prototype,"changeLibraryType",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"changeLibraryType"),r.prototype),g()(r.prototype,"changeOrderOption",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"changeOrderOption"),r.prototype),g()(r.prototype,"setRepresentativeImage",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"setRepresentativeImage"),r.prototype),g()(r.prototype,"insertItem",[i,y.d],Object.getOwnPropertyDescriptor(r.prototype,"insertItem"),r.prototype),g()(r.prototype,"nextPage",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"nextPage"),r.prototype),g()(r.prototype,"openDetailLayer",[y.d],Object.getOwnPropertyDescriptor(r.prototype,"openDetailLayer"),r.prototype),r);t.a=_},406:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f=n(56),m=n.n(f),y=n(60),v=n.n(y),_=n(1),b=n.n(_),S=n(58),C=n.n(S),I=n(0),O=n.n(I),T=n(50),L=n.n(T),E=(n(61),n(16)),P=n(78),w=n(1122),k=n(1121),x=n(241),D=n(110),A=n(1284),j=n(119),R=n(112),N=n(51),M=n(49),B=n(34),W=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,v()(n,"opened",r,C()(n)),v()(n,"initialized",o,C()(n)),v()(n,"libraryKeyList",a,C()(n)),v()(n,"libraryDataMap",s,C()(n)),v()(n,"libraryType",c,C()(n)),v()(n,"items",l,C()(n)),v()(n,"orderOption",u,C()(n)),v()(n,"total",p,C()(n)),v()(n,"next",d,C()(n)),v()(n,"start",h,C()(n)),v()(n,"isFetchNextPageError",g,C()(n)),n.thumbnailTypeMap={},n.autoPopupMode=B.b.DEFAULT;var i=t.state,f=void 0===i?{}:i;n._configAgent=N.W.get("configAgent"),n._infraConfig=n._configAgent.get("infraConfig"),n._libraryConfig=n._makeLibraryPanelConfig(),n.thumbnailTypeMap=n._configAgent.get("editorInfo.thumbnailType")||n.thumbnailTypeMap,n.useThumbnail=Object(E.a)(n._infraConfig,"image.useThumbnail",!0),n.name="library",n.opened=Object(E.a)(f,"opened",n.opened),n.initialized=Object(E.a)(f,"initialized",n.initialized),n.libraryKeyList=Object(E.a)(f,"libraryKeyList",n.libraryKeyList),n.libraryDataMap=Object(E.a)(f,"libraryDataMap",n.libraryDataMap),n.libraryType=Object(E.a)(f,"libraryType",n.libraryType),n.orderOption=Object(E.a)(f,"orderOption",n.orderOption),n.total=Object(E.a)(f,"total",n.total),n.next=Object(E.a)(f,"next",n.next),n.start=Object(E.a)(f,"start",n.start),n.items=Object(E.a)(f,"items",n.items),n.isFetchNextPageError=Object(E.a)(f,"isFetchNextPageError",n.isFetchNextPageError),n.librarySrcMap={},n._availableLibrary=["current_document"];var m=!1===n._libraryConfig?B.b.INACTIVE:Object(E.a)(n._libraryConfig,"autoPopup",n.autoPopupMode);return Object(R.a)(B.b,m)&&(n.autoPopupMode=m),!1!==Object(E.a)(n._libraryConfig,"purchase")&&n._availableLibrary.push("purchased_list"),n}O()(t,e);var n=t.prototype;return n._makeLibraryPanelConfig=function(){var e=N.W.get("configAgent"),t=e.get("productConfig.libraryPanel")||{},n=e.get("plugins.excludeComponents");return n&&n.includes("image")&&(t.purchase=!1),t},n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},n.update=function(e){this._update(e)},n.append=function(e){this._append(e)},n.changeLibraryType=function(e){this.libraryType=e},n.changeOrderOption=function(e){this.items=[],this.orderOption=m()({},this.orderOption,e)},n.reset=function(){this.initialized=!1,this.items=[],this.total=0,this.start="1",this.next={},this.isFetchNextPageError=!1},n._update=function(e){Object.assign(this,{next:{}},e),this.initialized=!0},n._append=function(e){e.items&&(this.items=this.items.concat(e.items)),this.next=e.next,this.isFetchNextPageError=!!e.isFetchNextPageError},n.updateMediaList=function(e,t){var n=this._refineNewMediaDataMap(e,t);this._updateLibraryKeyList(n),this._updateLibraryDataMap(n),this.initialized=!0},n.removeItemByIndex=function(e){var t=this.libraryKeyList.splice(e,1);Object(k.a)(this.libraryDataMap,t)},n._refineNewMediaDataMap=function(e,t){var n=this;return Object.keys(this.librarySrcMap).length?(Object.keys(t).forEach(function(e){var t=n.librarySrcMap[e];n.libraryKeyList.forEach(function(e,i){e===t&&n.removeItemByIndex(i)})}),this.librarySrcMap=t,Object(w.a)(e,"key")):(this.librarySrcMap=t,Object(w.a)(e,"key"))},n._updateLibraryKeyList=function(e){this.libraryKeyList=Object(x.a)(this.libraryKeyList.concat(Object(D.a)(e)))},n._updateLibraryDataMap=function(e){var t=this;this.libraryDataMap=Object(A.a)(this.libraryKeyList,Object(P.a)(this.libraryKeyList,function(n){var i=Object(E.a)(e,n,[]);if(0===i.length)return t.libraryDataMap[n].syncUnitList=[],Object.assign(t.libraryDataMap[n],{syncUnitList:[]});var r=e[n],o=Object(j.a)(r),a=r.some(function(e){var n=!0===t._configAgent.get("productConfig.representativeEnabled");return!0===e.data.represent&&n}),s=Object(E.a)(o,"data"),c=Object(E.a)(o,"thumbnail");if(["image","video","imageNode"].includes(s.ctype)&&(s.represent=a),["image","imageNode"].includes(s.ctype)){var l=""+s.domain+s.path,u=t.thumbnailTypeMap.small?t.thumbnailTypeMap.small:t.thumbnailTypeMap.normal;c=!1===t.useThumbnail?""+l:l+"?type="+u}var p=Object(P.a)(i,function(e){return{compId:e.id,unitId:Object(E.a)(e,"data.id",e.id),paraId:Object(E.a)(e,"data.paraId"),nodeId:Object(E.a)(e,"data.nodeId")}});return{type:Object(E.a)(o,"data.ctype"),thumbnail:c,baseCompData:s,syncUnitList:p}}))},n.getItemByIndex=function(e){var t=M.f.toJS(Object(E.a)(this.libraryItemList,e));return Object(k.a)(t,"baseCompData.id"),t},n.getLibraryItems=function(){return this.libraryItemList},n.availableLibrary=function(){return this._availableLibrary},b()(t,[{key:"libraryItemList",get:function(){var e=this;return Object(P.a)(this.libraryKeyList,function(t){return Object(E.a)(e.libraryDataMap,t)})}},{key:"showPurchaseBanner",get:function(){return!1!==Object(E.a)(this._libraryConfig,"purchase.banner")}},{key:"item",get:function(){return{initialized:this.initialized,orderOption:this.orderOption,total:this.total,next:this.next,items:this.items,isFetchNextPageError:this.isFetchNextPageError}}}]),t}(N.w),r=L()(i.prototype,"opened",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=L()(i.prototype,"initialized",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=L()(i.prototype,"libraryKeyList",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=L()(i.prototype,"libraryDataMap",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=L()(i.prototype,"libraryType",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"current_document"}}),l=L()(i.prototype,"items",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=L()(i.prototype,"orderOption",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{ordering:"latest"}}}),p=L()(i.prototype,"total",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=L()(i.prototype,"next",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),h=L()(i.prototype,"start",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"1"}}),g=L()(i.prototype,"isFetchNextPageError",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L()(i.prototype,"libraryItemList",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"libraryItemList"),i.prototype),L()(i.prototype,"item",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"item"),i.prototype),i);t.a=W},407:function(e,t,n){"use strict";var i,r,o,a=n(12),s=n.n(a),c=n(18),l=n.n(c),u=n(0),p=n.n(u),d=n(50),h=n.n(d),g=n(51),f=n(49),m=n(52),y=n(242),v=(i=Object(m.history)({sync:!1}),r=Object(m.history)({sync:!1}),o=function(e){function t(){var t;return(t=e.call(this)||this)._templatePanelLayoutService=g.W.get("templatePanelLayoutService"),t._editingService=g.W.get("editingService"),t._canvasScrollingService=g.W.get("canvasScrollingService"),t._toastLayerService=g.W.get("toastLayerService"),t._loadingLayerService=g.W.get("loadingLayerService"),t._documentToolbarLayoutService=g.W.get("documentToolbarLayoutService"),t._loadingProgressLayoutService=g.W.get("loadingProgressLayoutService"),t._documentValidateService=g.W.get("documentValidateService"),t._i18n=g.W.get("i18n"),t._documentService=g.W.get("documentService"),t._dragAndDropService=g.W.get("dragAndDropService"),t._eventDispatcherService=g.W.get("eventDispatcherService"),t}p()(t,e);var n=t.prototype;return n.insertPartTemplate=function(e){var t=this._templatePanelLayoutService.getPartTemplateData(e),n=this._documentService.convertComponents(t),i=this._templatePanelLayoutService.getPartTemplateComponentList(n);i&&i.length&&this._editingService.append({sourceComponents:i,followCurrentAlign:!1})},n.applyTemplate=function(e,t){switch(t){case y.a.RECOMMEND:this.applyRecommendTemplate(e);break;case y.a.MY:this.applyMyTemplate(e);break;case y.a.PART:this.insertPartTemplate(e)}return!0},n.applyRecommendTemplate=function(){var e=l()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._applyTemplateAfterCheck("applyRecommendTemplate",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.applyMyTemplate=function(){var e=l()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._applyTemplateAfterCheck("applyMyTemplate",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.addMyTemplate=function(){var e=l()(s.a.mark(function e(){var t,n,i,r,o,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._documentService.getDocumentData(),e.next=3,this._documentValidateService.validateAsync(t.document);case 3:if(!1!==(n=e.sent).valid){e.next=7;break}return this._showInvalidDocumentWarn(n),e.abrupt("return");case 7:return delete t.document.id,this._loadingProgressLayoutService.show(),e.prev=9,i=this._i18n("templatePanelLayout:info_save_my_template"),e.next=13,this._templatePanelLayoutService.addMyTemplate(t);case 13:return r=e.sent,o=r.message,a=void 0===o?null:o,this._toastLayerService.infoMessage(a||i),e.next=19,this._templatePanelLayoutService.loadMyTemplateList();case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),e.t0.failed&&this._triggerServerError();case 25:return e.prev=25,this._loadingProgressLayoutService.hide(),e.finish(25);case 28:case"end":return e.stop()}},e,this,[[9,21,25,28]])}));return function(){return e.apply(this,arguments)}}(),n._showInvalidDocumentWarn=function(e){var t="";switch(e.reason){case g.T.TITLE_REQUIRED:t=this._i18n("documentValidate:warn_title_required"),this._canvasScrollingService.focusTitle();break;case g.T.CONTENT_REQUIRED:t=this._i18n("documentValidate:warn_contents_required"),this._canvasScrollingService.focusToFirstComp();break;case g.T.TITLE_CONTENT_REQUIRED:t=this._i18n("documentValidate:warn_title_contents_required"),this._canvasScrollingService.focusTitle()}t&&this._showWarning(t)},n.deleteMyTemplate=function(){var e=l()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==confirm(this._i18n("templatePanelLayout:confirm_to_delete_my_template"))){e.next=2;break}return e.abrupt("return");case 2:return this._loadingProgressLayoutService.show(),e.prev=3,e.next=6,this._templatePanelLayoutService.deleteMyTemplate(t);case 6:return e.next=8,this._templatePanelLayoutService.loadMyTemplateList();case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0.failed&&this._triggerServerError();case 14:return e.prev=14,this._loadingProgressLayoutService.hide(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[3,10,14,17]])}));return function(t){return e.apply(this,arguments)}}(),n.dragStart=function(e,t){var n=this._templatePanelLayoutService.getPartTemplateData(t),i=this._documentService.convertComponents(n);this._dragAndDropService.dragStart({event:e,items:i,type:"template"})},n.open=function(){this._templatePanelLayoutService.open()},n.close=function(){this._templatePanelLayoutService.close()},n.loadRecommendList=function(){var e=l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._templatePanelLayoutService.showLoadingIcon(),e.next=4,this._templatePanelLayoutService.loadRecommendList();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 10:return e.prev=10,this._templatePanelLayoutService.hideLoadingIcon(),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,6,10,13]])}));return function(){return e.apply(this,arguments)}}(),n.loadPartTemplateList=function(){var e=l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._templatePanelLayoutService.showLoadingIcon(),e.next=4,this._templatePanelLayoutService.loadPartTemplateList();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 10:return e.prev=10,this._templatePanelLayoutService.hideLoadingIcon(),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,6,10,13]])}));return function(){return e.apply(this,arguments)}}(),n.loadMyTemplateList=function(){var e=l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._templatePanelLayoutService.showLoadingIcon(),e.next=4,this._templatePanelLayoutService.loadMyTemplateList();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 10:return e.prev=10,this._templatePanelLayoutService.hideLoadingIcon(),e.finish(10);case 13:case"end":return e.stop()}},e,this,[[0,6,10,13]])}));return function(){return e.apply(this,arguments)}}(),n.changeTemplateType=function(){var e=l()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._templatePanelLayoutService.changeTemplateType(t),e.t0=t,e.next=e.t0===y.a.RECOMMEND?4:e.t0===y.a.MY?7:e.t0===y.a.PART?10:13;break;case 4:return e.next=6,this.loadRecommendList();case 6:return e.abrupt("break",13);case 7:return e.next=9,this.loadMyTemplateList();case 9:return e.abrupt("break",13);case 10:return e.next=12,this.loadPartTemplateList();case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._showWarning=function(e){this._toastLayerService.warningMessage(e)},n._applyTemplateAfterCheck=function(){var e=l()(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._loadingLayerService.open(),e.next=3,this._applyTemplate(t,n);case 3:this._loadingLayerService.close();case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n._applyTemplate=function(){var e=l()(s.a.mark(function e(t,n){var i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._templatePanelLayoutService[t](n);case 2:(i=e.sent)&&(delete i.document.id,this._documentService.setDocumentData(i),this._canvasScrollingService.focusToInitialCursorIndex());case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n._triggerServerError=function(){this.updateErrorStatus(!0),this._showWarning(this._i18n("templatePanelLayout:error_load_data"))},n.updateErrorStatus=function(e){this._templatePanelLayoutService.updateErrorStatus(e)},t}(g.m),h()(o.prototype,"insertPartTemplate",[m.preventOnDocumentProcessing,m.history,f.d],Object.getOwnPropertyDescriptor(o.prototype,"insertPartTemplate"),o.prototype),h()(o.prototype,"applyRecommendTemplate",[m.preventOnDocumentProcessing,i,f.d],Object.getOwnPropertyDescriptor(o.prototype,"applyRecommendTemplate"),o.prototype),h()(o.prototype,"applyMyTemplate",[m.preventOnDocumentProcessing,r,f.d],Object.getOwnPropertyDescriptor(o.prototype,"applyMyTemplate"),o.prototype),h()(o.prototype,"addMyTemplate",[m.preventOnDocumentProcessing,f.d],Object.getOwnPropertyDescriptor(o.prototype,"addMyTemplate"),o.prototype),h()(o.prototype,"deleteMyTemplate",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"deleteMyTemplate"),o.prototype),h()(o.prototype,"dragStart",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"dragStart"),o.prototype),h()(o.prototype,"open",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"open"),o.prototype),h()(o.prototype,"close",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"close"),o.prototype),h()(o.prototype,"loadRecommendList",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"loadRecommendList"),o.prototype),h()(o.prototype,"loadPartTemplateList",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"loadPartTemplateList"),o.prototype),h()(o.prototype,"loadMyTemplateList",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"loadMyTemplateList"),o.prototype),h()(o.prototype,"changeTemplateType",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"changeTemplateType"),o.prototype),h()(o.prototype,"updateErrorStatus",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"updateErrorStatus"),o.prototype),o);t.a=v},408:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p=n(60),d=n.n(p),h=n(58),g=n.n(h),f=n(0),m=n.n(f),y=n(50),v=n.n(y),_=(n(61),n(16)),b=n(99),S=n(194),C=n(69),I=n(51),O=n(49),T=n(242),L=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,d()(n,"initialized",r,g()(n)),d()(n,"opened",o,g()(n)),d()(n,"isLoading",a,g()(n)),d()(n,"errorStatus",s,g()(n)),d()(n,"total",c,g()(n)),d()(n,"selectedTemplateType",l,g()(n)),d()(n,"items",u,g()(n)),n.usePreview=!0;var i=t,p=i.state,h=void 0===p?{}:p,f=i.config,m=void 0===f?{}:f;return n._configAgent=I.W.get("configAgent"),n._panelConfig=n._configAgent.get("productConfig.templatePanel")||{},n._availableTemplates=Object(S.a)([T.a.RECOMMEND,T.a.PART,T.a.MY],function(e){return!1!==n._panelConfig[e]}),n.name="template",n.initialized=Object(_.a)(h,"initialized",n.initialized),n.opened=Object(_.a)(h,"opened",n.opened),n.isLoading=Object(_.a)(h,"isLoading",n.isLoading),n.total=Object(_.a)(h,"total",n.total),n.selectedTemplateType=Object(_.a)(n._panelConfig,"activate",n._availableTemplates[0]),n.items=Object(_.a)(h,"items",n.items),n.usePreview=Object(_.a)(m,"usePreview",n.usePreview),n}m()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1,this.errorStatus&&(this.initialized=!1,this.errorStatus=!1)},n.showLoadingIcon=function(){this.isLoading=!0},n.hideLoadingIcon=function(){this.isLoading=!1},n.update=function(e,t){this._update(e,t)},n.changeTemplateType=function(e){this.selectedTemplateType=e},n.getItemById=function(e){var t=this.toValidJSON().items[this.selectedTemplateType];return Object(b.a)(t,{templateNo:parseInt(e)})},n.updateErrorStatus=function(e){this.errorStatus=e},n._update=function(e,t){var n;void 0===t&&(t=this.selectedTemplateType);var i=e.items,r=e.totalCount;Object.assign(this,{items:Object(C.a)({},(n={},n[t]=i,n),this.items)}),t===this.selectedTemplateType&&(this.total=r)},n.initialize=function(){this.initialized=!0},n.availableTemplates=function(){return this._availableTemplates},n.reset=function(){Object.assign(this,{initialized:!1,total:0,items:{recommend:[],part:[],my:[]},errorStatus:!1})},t}(I.w),r=v()(i.prototype,"initialized",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=v()(i.prototype,"opened",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=v()(i.prototype,"isLoading",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=v()(i.prototype,"errorStatus",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=v()(i.prototype,"total",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=v()(i.prototype,"selectedTemplateType",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"recommend"}}),u=v()(i.prototype,"items",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{recommend:[],part:[],my:[]}}}),i);t.a=L},409:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(51),h=n(49),g=n(52),f=(i=function(e){function t(){var t;return(t=e.call(this)||this)._linkLayerService=d.W.get("linkLayerService"),t._crawlerService=d.W.get("crawlerService"),t._editingService=d.W.get("editingService"),t._toastLayerService=d.W.get("toastLayerService"),t._eventDispatcherService=d.W.get("eventDispatcherService"),t}l()(t,e);var n=t.prototype;return n.updatePreview=function(){var e=s()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._beforeUpdatePreview(),e.next=3,this._crawlerService.crawlFrom(t);case 3:n=e.sent,this._linkLayerService.updatePreview(n),this._linkLayerService.setLoading(!1);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._beforeUpdatePreview=function(){this._linkLayerService.setLoading(!0)},n.changeToTextLayout=function(){this._linkLayerService.changeToTextLayout()},n.insertComponent=function(e){this._editingService.insert({sourceComponents:[e]}),"image"===e.ctype&&this._eventDispatcherService.dispatch(d.C.ADD_XCAM_CONTENTS,{ctype:"image"})},n.close=function(){this._linkLayerService.close()},n.resetLinkLayer=function(){this._linkLayerService.reset()},n.showToast=function(e){this._toastLayerService.infoMessage(e)},t}(d.m),p()(i.prototype,"changeToTextLayout",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"changeToTextLayout"),i.prototype),p()(i.prototype,"insertComponent",[g.history,h.d],Object.getOwnPropertyDescriptor(i.prototype,"insertComponent"),i.prototype),p()(i.prototype,"close",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),p()(i.prototype,"resetLinkLayer",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"resetLinkLayer"),i.prototype),i);t.a=f},41:function(e,t,n){"use strict";t.a={REGION_TYPE:{BOTH:"both",DOMESTIC:"domestic",OVERSEAS:"overseas"}}},410:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i,r,o=n(12),a=n.n(o),s=n(18),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=n(51),g=n(49),f=n(52),m=n(411),y=(i=Object(f.history)({sync:!1}),r=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=h.W.get("configAgent"),t._cloudSnsLayerService=h.W.get("cloudSnsLayerService"),t._imageTypeLayerService=h.W.get("imageTypeLayerService"),t._canvasLayoutService=h.W.get("canvasLayoutService"),t._imageBehavior=h.W.get("imageBehavior"),t._complexImageLayoutsEnabled=t._configAgent.get("productConfig.complexImageLayoutsEnabled"),t}u()(t,e);var n=t.prototype;return n.close=function(){this._cloudSnsLayerService.close()},n.openCloudSNSWindowPopup=function(){var e=c()(a.a.mark(function e(t){var n,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cloudSnsLayerService.openCloudSNSWindowPopup({type:t});case 2:return n=e.sent,i=t||"ncloud",e.next=6,this._insertImageFromUrls(i,n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._insertImageFromUrls=function(){var e=c()(a.a.mark(function e(t,n){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.length,!this._canUseComplexLayouts(i)){e.next=5;break}this._imageTypeLayerService.open({type:m.a.SNS,payload:n,serviceType:t}),e.next=7;break;case 5:return e.next=7,this._imageBehavior.insertImageFromUrls(n,t);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n._canUseComplexLayouts=function(e){return e>1&&this._complexImageLayoutsEnabled},t}(h.m),d()(r.prototype,"close",[g.d],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),d()(r.prototype,"openCloudSNSWindowPopup",[g.d],Object.getOwnPropertyDescriptor(r.prototype,"openCloudSNSWindowPopup"),r.prototype),d()(r.prototype,"_insertImageFromUrls",[i,g.d],Object.getOwnPropertyDescriptor(r.prototype,"_insertImageFromUrls"),r.prototype),r)},411:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={SNS:"sns",FILE:"file"}},412:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(16)),g=n(51),f=n(49),m=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,a()(n,"opened",r,c()(n));var i=t.state,o=void 0===i?{}:i;return n.opened=Object(h.a)(o,"opened",n.opened),n}u()(t,e);var n=t.prototype;return n.openCloudSnsPopup=function(){this.opened=!0},n.closeCloudSnsPopup=function(){this.opened=!1},t}(g.e),r=d()(i.prototype,"opened",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=m},413:function(e,t,n){"use strict";var i,r,o=n(12),a=n.n(o),s=n(18),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=n(51),g=n(49),f=n(52),m=(i=Object(f.history)({sync:!1}),r=function(e){function t(){var t;return(t=e.call(this)||this)._imageDetailLayerService=h.W.get("imageDetailLayerService"),t._searchPanelLayoutService=h.W.get("searchPanelLayoutService"),t._paidPhotoNotificationLayerService=h.W.get("paidPhotoNotificationLayerService"),t._searchPanelLayoutService=h.W.get("searchPanelLayoutService"),t._imageBehavior=h.W.get("imageBehavior"),t}u()(t,e);var n=t.prototype;return n.insertImage=function(){var e=c()(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._searchPanelLayoutService.itemDataToCompData(t);case 2:return n=e.sent,e.next=5,this._imageBehavior.insertImageFromCompData([n]);case 5:this.close();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.close=function(){this._imageDetailLayerService.close()},n.closeLoadingLayer=function(){this._imageDetailLayerService.closeLoadingLayer()},n.openPaidPhotoNotificationLayer=function(){this.close(),this._paidPhotoNotificationLayerService.open()},t}(h.m),d()(r.prototype,"insertImage",[i,g.d],Object.getOwnPropertyDescriptor(r.prototype,"insertImage"),r.prototype),d()(r.prototype,"close",[g.d],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),d()(r.prototype,"closeLoadingLayer",[g.d],Object.getOwnPropertyDescriptor(r.prototype,"closeLoadingLayer"),r.prototype),r);t.a=m},414:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(51),h=n(49),g=n(52),f=(i=function(e){function t(){var t;return(t=e.call(this)||this)._editingService=d.W.get("editingService"),t._componentFactory=d.W.get("componentFactory"),t._placeLayerService=d.W.get("placeLayerService"),t._scheduleComponentService=d.W.get("scheduleComponentService"),t._scheduleLayerService=d.W.get("scheduleLayerService"),t}l()(t,e);var n=t.prototype;return n.insertScheduleComponent=function(e){if(!1!==this._isValidConfirm(e)){var t=this._scheduleLayerService.toScheduleComponentData(),n=this._componentFactory.createComponentWithCompData(t);this._editingService.insert({sourceComponents:[n]}),this._scheduleLayerService.close()}},n.updateScheduleComponent=function(e){if(!1!==this._isValidConfirm(e)){var t=this._scheduleLayerService.toScheduleComponentData();this._scheduleComponentService.updateComponent(t),this._scheduleComponentService.updateSchedule(t.id),this._scheduleLayerService.close()}},n.disableEmptyTitleWarning=function(){this._scheduleLayerService.disableEmptyTitleWarning()},n.setRepetitionInfo=function(e){this._scheduleLayerService.setRepetitionInfo(e)},n.removeLocation=function(){this._scheduleLayerService.removePlacesMap()},n.openPlaceLayer=function(){var e=s()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._placeLayerService.editPlaces({isUpdateMode:!0,maxPlaceCount:1});case 2:(t=e.sent)&&this._scheduleLayerService.updatePlacesMap(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.handleInput=function(e,t){var n,i=t.target,r=i.type,o=i.checked,a=i.value,s="checkbox"===r?o:a;this._scheduleLayerService.updateProperty(((n={})[e]=s,n))},n.updateProperty=function(e){this._scheduleLayerService.updateProperty(e)},n.setDateAt=function(e,t){this._scheduleLayerService.setDateAt(e,t)},n.setNotification=function(e){this._scheduleLayerService.setNotification(e)},n.setRepetition=function(e){this._scheduleLayerService.setRepetition(e)},n.close=function(){this._scheduleLayerService.close()},n._isValidConfirm=function(e){return""===e.title.trim()?(this._scheduleLayerService.enableEmptyTitleWarning(),!1):!e.isInvalidEndDate&&(!(e.repetition&&!e.repetitionInfo)||(this._scheduleLayerService.showAndHideRepetitionWarning(),!1))},t}(d.m),p()(i.prototype,"insertScheduleComponent",[g.history,h.d],Object.getOwnPropertyDescriptor(i.prototype,"insertScheduleComponent"),i.prototype),p()(i.prototype,"updateScheduleComponent",[g.history,h.d],Object.getOwnPropertyDescriptor(i.prototype,"updateScheduleComponent"),i.prototype),p()(i.prototype,"disableEmptyTitleWarning",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"disableEmptyTitleWarning"),i.prototype),p()(i.prototype,"setRepetitionInfo",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"setRepetitionInfo"),i.prototype),p()(i.prototype,"removeLocation",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"removeLocation"),i.prototype),p()(i.prototype,"openPlaceLayer",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"openPlaceLayer"),i.prototype),p()(i.prototype,"handleInput",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"handleInput"),i.prototype),p()(i.prototype,"updateProperty",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"updateProperty"),i.prototype),p()(i.prototype,"setDateAt",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"setDateAt"),i.prototype),p()(i.prototype,"setNotification",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"setNotification"),i.prototype),p()(i.prototype,"setRepetition",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"setRepetition"),i.prototype),p()(i.prototype,"close",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),i);t.a=f},415:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m,y,v,_=n(56),b=n.n(_),S=n(60),C=n.n(S),I=n(1),O=n.n(I),T=n(58),L=n.n(T),E=n(0),P=n.n(E),w=n(50),k=n.n(w),x=(n(61),n(16)),D=n(66),A=n(221),j=n(71),R=n(122),N=n(51),M=n(49),B=n(53),W=n(209),U=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,C()(n,"opened",r,L()(n)),C()(n,"visibleEndDate",o,L()(n)),C()(n,"isModifyMode",a,L()(n)),C()(n,"dateOnly",s,L()(n)),C()(n,"emptyTitleWarning",c,L()(n)),C()(n,"repetitionInfo",l,L()(n)),C()(n,"isShowRepetitionWarning",u,L()(n)),C()(n,"title",p,L()(n)),C()(n,"startAt",d,L()(n)),C()(n,"endAt",h,L()(n)),C()(n,"placesMap",g,L()(n)),C()(n,"linkUrl",f,L()(n)),C()(n,"content",m,L()(n)),C()(n,"notification",y,L()(n)),C()(n,"repetition",v,L()(n)),n.scheduleId=null;var i=t.state,_=void 0===i?{}:i;return n.opened=Object(x.a)(_,"opened",n.opened),n.visibleEndDate=Object(x.a)(_,"visibleEndDate",n.visibleEndDate),n.isModifyMode=Object(x.a)(_,"isModifyMode",n.isModifyMode),n.dateOnly=Object(x.a)(_,"dateOnly",n.dateOnly),n.title=Object(x.a)(_,"title",n.title),n.emptyTitleWarning=Object(x.a)(_,"emptyTitleWarning",n.emptyTitleWarning),n.startAt=Object(x.a)(_,"startAt",n.startAt),n.endAt=Object(x.a)(_,"endAt",n.endAt),n.placesMap=Object(x.a)(_,"placesMap",n.placesMap),n.linkUrl=Object(x.a)(_,"linkUrl",n.linkUrl),n.content=Object(x.a)(_,"content",n.content),n.scheduleId=Object(x.a)(_,"scheduleId",n.scheduleId),n._moment=B.a.time.getMomentInstance,n.notification=Object(x.a)(_,"notification",n.notification),n.repetition=Object(x.a)(_,"repetition",n.repetition),n}P()(t,e);var n=t.prototype;return n.open=function(e){var t=b()({visibleEndDate:!1,isModifyMode:!1,dateOnly:!1,emptyTitleWarning:!1,title:"",startAt:null,endAt:null,placesMap:null,linkUrl:"",content:"",repetition:null,notification:null},e);t.visibleEndDate=!1===Object(D.a)(t.endAt),t.startAt=this._resolveDateTimeWithCeilMinute(t.startAt),t.endAt=this._resolveEndAt(t.startAt,t.endAt),this.updateProperty(t),this.isModifyMode=Object(A.a)(t,"id"),this.opened=!0},n._resetAll=function(){this.visibleEndDate=!1,this.isModifyMode=!1,this.dateOnly=!1,this.title="",this.emptyTitleWarning=!1,this.startAt=null,this.endAt=null,this.placesMap=null,this.linkUrl="",this.content="",this.notification=null,this.repetition=null,this.scheduleId=null},n.close=function(){this._resetAll(),this.opened=!1},n.updatePlacesMap=function(e){this.updateProperty({placesMap:e})},n.updateProperty=function(e){var t=this;Object(j.a)(e,function(e,n){t.hasOwnProperty(n)&&(t[n]=e)})},n.setNotification=function(e){this.notification=e},n.setRepetition=function(e){this.repetition=e},n.enableEmptyTitleWarning=function(){this.emptyTitleWarning=!0},n.disableEmptyTitleWarning=function(){this.emptyTitleWarning=!1},n.setRepetitionInfo=function(e){this.repetitionInfo=e},n.showAndHideRepetitionWarning=function(){var e=this;this.isShowRepetitionWarning=!0,setTimeout(function(){e.isShowRepetitionWarning=!1},2e3)},n.setDateAt=function(e,t){this[e]=t},n.toScheduleComponentData=function(){var e=this.toValidJSON();e.ctype="schedule",!1===e.visibleEndDate&&(e.endAt=null),e.linkUrl=B.a.url.prependProtocol(e.linkUrl);var t=["opened","visibleEndDate","emptyTitleWarning","isInvalidEndDate","resolvedEndAt","repetitionInfo","isShowRepetitionWarning"];return this.isModifyMode||t.push("id"),Object(R.a)(e,t)},n._resolveEndAt=function(e,t){return Object(D.a)(t)?this._moment(e).add(1,"h").format():t},n._resolveDateTimeWithCeilMinute=function(e){return Object(D.a)(e)&&(e={}),B.a.time.getTimeCeilMinuteWith(e,5).format()},n._isInvalidDate=function(){var e=this.visibleEndDate;if(!this.dateOnly&&e){var t=this.startAt,n=this.endAt;if(this._moment(n).diff(this._moment(t))<=0)return!0}return!1},O()(t,[{key:"isInvalidEndDate",get:function(){return this._isInvalidDate()}},{key:"resolvedEndAt",get:function(){var e=this.startAt;return this._moment(e).add(1,"h").format()}},{key:"isMonthly",get:function(){return this.repetition&&this.repetition.repetitionType.ctype===W.f.EVERY_MONTH}},{key:"hasRepetition",get:function(){return!!this.repetition}},{key:"hasNotification",get:function(){return!!this.notification}},{key:"hasRepetitionDateGroup",get:function(){return!!this.repetition.repetitionType.dateGroup}},{key:"isTimeDisabled",get:function(){return this.dateOnly||!!this.hasRepetition}},{key:"_durationDateCount",get:function(){var e=this._moment(this.startAt);return this._moment(this.endAt).diff(e,"days")}},{key:"isOverMonth",get:function(){var e=this._moment(this.startAt).format(W.a).split("-"),t=e[0],n=e[1],i=e[2],r=this._moment(this.endAt).format(W.a).split("-"),o=r[0],a=r[1],s=r[2];return+t<+o||t===o&&(+n+1<+a||+n+1==+a&&+i<=+s)}},{key:"isShowRepetition",get:function(){return this._durationDateCount>=14}},{key:"hasDateGroup",get:function(){var e=this.repetition.repetitionType.dateGroup;return e&&e.startDay}},{key:"locationTitle",get:function(){return this.placesMap?this.placesMap.places[0].name:""}}]),t}(N.e),r=k()(i.prototype,"opened",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=k()(i.prototype,"visibleEndDate",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=k()(i.prototype,"isModifyMode",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=k()(i.prototype,"dateOnly",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=k()(i.prototype,"emptyTitleWarning",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=k()(i.prototype,"repetitionInfo",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=k()(i.prototype,"isShowRepetitionWarning",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=k()(i.prototype,"title",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=k()(i.prototype,"startAt",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=k()(i.prototype,"endAt",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=k()(i.prototype,"placesMap",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=k()(i.prototype,"linkUrl",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=k()(i.prototype,"content",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=k()(i.prototype,"notification",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=k()(i.prototype,"repetition",[M.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k()(i.prototype,"isInvalidEndDate",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"isInvalidEndDate"),i.prototype),k()(i.prototype,"resolvedEndAt",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"resolvedEndAt"),i.prototype),k()(i.prototype,"isMonthly",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"isMonthly"),i.prototype),k()(i.prototype,"hasRepetition",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"hasRepetition"),i.prototype),k()(i.prototype,"hasNotification",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"hasNotification"),i.prototype),k()(i.prototype,"hasRepetitionDateGroup",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"hasRepetitionDateGroup"),i.prototype),k()(i.prototype,"isTimeDisabled",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"isTimeDisabled"),i.prototype),k()(i.prototype,"_durationDateCount",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"_durationDateCount"),i.prototype),k()(i.prototype,"isOverMonth",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"isOverMonth"),i.prototype),k()(i.prototype,"isShowRepetition",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"isShowRepetition"),i.prototype),k()(i.prototype,"hasDateGroup",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"hasDateGroup"),i.prototype),k()(i.prototype,"locationTitle",[M.e],Object.getOwnPropertyDescriptor(i.prototype,"locationTitle"),i.prototype),i);t.a=U},416:function(e,t,n){"use strict";var i=n(750);t.a=i.a},417:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(16)),g=n(71),f=n(51),m=n(49),y=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,a()(n,"opened",r,c()(n));var i=t.state,o=void 0===i?{}:i;return n.opened=Object(h.a)(o,"opened",n.opened),n}u()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},n.updateProperty=function(e){var t=this;Object(g.a)(e,function(e,n){t.hasOwnProperty(n)&&(t[n]=e)})},t}(f.e),r=d()(i.prototype,"opened",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=y},418:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=(i=function(e){function t(){var t;return(t=e.call(this)||this)._libraryPanelLayoutService=c.W.get("libraryPanelLayoutService")||{openTab:function(){}},t._searchPanelLayoutService=c.W.get("searchPanelLayoutService")||{close:function(){}},t._paidPhotoNotificationLayerService=c.W.get("paidPhotoNotificationLayerService")||{close:function(){}},t._panelContainerLayerService=c.W.get("panelContainerLayerService"),t._documentToolbarLayoutService=c.W.get("documentToolbarLayoutService"),t}o()(t,e);var n=t.prototype;return n.close=function(){this._paidPhotoNotificationLayerService.close()},n.openPurchasedListTab=function(){this._paidPhotoNotificationLayerService.close(),this._searchPanelLayoutService.close(),this._documentToolbarLayoutService.setPanelButtonEnable("library",!0),this._panelContainerLayerService.openPanel("library"),this._libraryPanelLayoutService.openTab("purchased_list")},t}(c.m),s()(i.prototype,"close",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),s()(i.prototype,"openPurchasedListTab",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"openPurchasedListTab"),i.prototype),i);t.a=u},419:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(16)),g=n(51),f=n(49),m=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,a()(n,"opened",r,c()(n));var i=t.state,o=void 0===i?{}:i;return n.opened=Object(h.a)(o,"opened",n.opened),n}u()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},t}(g.e),r=d()(i.prototype,"opened",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=m},420:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(51),h=n(49),g=n(52),f=10110,m=(i=function(e){function t(){var t;return(t=e.call(this)||this)._spellCheckLayoutService=d.W.get("spellCheckLayoutService"),t._canvasScrollingService=d.W.get("canvasScrollingService"),t._toastLayerService=d.W.get("toastLayerService"),t._loadingLayerService=d.W.get("loadingLayerService"),t._viewModeLayoutService=d.W.get("viewModeLayoutService"),t._i18n=d.W.get("i18n"),t._alertLayerService=d.W.get("alertLayerService"),t}l()(t,e);var n=t.prototype;return n.checkAgain=function(){var e=s()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._loadingLayerService.open(),e.next=3,this._spellCheckAgain(t);case 3:this._loadingLayerService.close();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.cancelSpellCheck=function(){this._spellCheckLayoutService.cancelSpellCheck()},n.close=function(){this.cancelSpellCheck()},n.confirmSpellCheck=function(e){this._spellCheckLayoutService.confirmSpellCheck(e),this._canvasScrollingService.focusToFirstComp()},n.togglePopup=function(e){this._spellCheckLayoutService.togglePopup(e)},n.correctAll=function(){this._spellCheckLayoutService.correctAll()},n._toastEmptyErrata=function(e){e||this._toastLayerService.infoMessage(this._i18n("spellCheckLayout:empty_errata"))},n._spellCheckAgain=function(){var e=s()(o.a.mark(function e(t){var n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._spellCheckLayoutService.getParagraphList(t.spellCheckDocument),e.next=3,this._spellCheckLayoutService.getResultSpellCheck(n);case 3:if(i=e.sent,!1!==this._isValidCheckResult(i)){e.next=6;break}return e.abrupt("return");case 6:return e.abrupt("return",this._spellCheckLayoutService.checkAgain(i,t));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._isValidCheckResult=function(e){return e.errorCode===f?(this._alertLayerService.open({type:"alert",title:this._i18n("spellCheckLayout:spell_check_fail_title"),description:this._i18n("spellCheckLayout:spell_check_length_error")}),!1):!e.aborted&&(e.failed?(this._alertLayerService.open({type:"alert",title:this._i18n("spellCheckLayout:spell_check_fail_title"),description:this._i18n("spellCheckLayout:spell_check_fail")}),!1):!!this._spellCheckLayoutService.hasSpellCheckTarget()||(this._toastLayerService.infoMessage(this._i18n("spellCheckLayout:empty_errata")),!1))},n.getViewMode=function(){var e=d.U.VIEW_MODE_PC;return this._viewModeLayoutService&&(e=this._viewModeLayoutService.getViewMode()),e},t}(d.m),p()(i.prototype,"checkAgain",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"checkAgain"),i.prototype),p()(i.prototype,"cancelSpellCheck",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"cancelSpellCheck"),i.prototype),p()(i.prototype,"confirmSpellCheck",[h.d,g.history],Object.getOwnPropertyDescriptor(i.prototype,"confirmSpellCheck"),i.prototype),p()(i.prototype,"togglePopup",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"togglePopup"),i.prototype),p()(i.prototype,"correctAll",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"correctAll"),i.prototype),p()(i.prototype,"_toastEmptyErrata",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"_toastEmptyErrata"),i.prototype),i);t.a=m},421:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(51),a=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._mathEditorLayerService=o.W.get("mathEditorLayerService"),t}r()(t,e);var n=t.prototype;return n.startMathEditor=function(e){this._mathEditorLayerService.startMathEditor(e)},n.close=function(){this._mathEditorLayerService.close()},t}(o.m);t.a=a},422:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(1),c=n.n(s),l=n(58),u=n.n(l),p=n(0),d=n.n(p),h=n(50),g=n.n(h),f=(n(61),n(16)),m=n(51),y=n(49),v=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,a()(n,"opened",r,u()(n));var i=t.state,o=void 0===i?{}:i;return n.opened=Object(f.a)(o,"opened",n.opened),n}d()(t,e);var n=t.prototype;return n.open=function(e){this.opened=!0,this._params=e},n.close=function(){this.opened=!1},c()(t,[{key:"params",get:function(){return this._params}}]),t}(m.e),r=g()(i.prototype,"opened",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=v},423:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=(i=function(e){function t(){var t;return(t=e.call(this)||this)._helpPanelLayoutService=c.W.get("helpPanelLayoutService"),t._storageService=c.W.get("storageService"),t._localStorageKey="HELP_PANEL//STORAGE",t}o()(t,e);var n=t.prototype;return n.__ON_LAZY__=function(){this._storageService.getStorageData(this._localStorageKey)?this._helpPanelLayoutService.close():(this._storageService.setStorageData(this._localStorageKey,{alreadyOpened:!0}),this._helpPanelLayoutService.open())},n.openHelpLayer=function(e,t){this._helpPanelLayoutService.openLayer(e,t)},n.closeHelpLayer=function(){this._helpPanelLayoutService.closeLayer()},n.close=function(){this._helpPanelLayoutService.close(),this._helpPanelLayoutService.closeLayer()},t}(c.m),s()(i.prototype,"openHelpLayer",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"openHelpLayer"),i.prototype),s()(i.prototype,"closeHelpLayer",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"closeHelpLayer"),i.prototype),s()(i.prototype,"close",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),i);t.a=u},424:function(e,t,n){"use strict";var i,r,o,a,s,c=n(60),l=n.n(c),u=n(58),p=n.n(u),d=n(0),h=n.n(d),g=n(50),f=n.n(g),m=(n(61),n(16)),y=n(49),v=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,l()(n,"opened",r,p()(n)),l()(n,"isLayerOpen",o,p()(n)),l()(n,"layerKey",a,p()(n)),l()(n,"layerTitle",s,p()(n)),n.unmountDelayTime=400;var i=t.state,c=void 0===i?{}:i;return n.opened=Object(m.a)(c,"opened",n.opened),n.isLayerOpen=Object(m.a)(c,"isLayerOpen",n.isLayerOpen),n.layerKey=Object(m.a)(c,"layerKey",n.layerKey),n.layerTitle=Object(m.a)(c,"layerTitle",n.layerTitle),n}h()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},n.openLayer=function(){this.isLayerOpen=!0},n.closeLayer=function(){this.isLayerOpen=!1},n.setLayerKey=function(e){this.layerKey=e},n.setLayerTitle=function(e){this.layerTitle=e},t}(n(51).w),r=f()(i.prototype,"opened",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=f()(i.prototype,"isLayerOpen",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=f()(i.prototype,"layerKey",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"START_INTERFACE"}}),s=f()(i.prototype,"layerTitle",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i);t.a=v},425:function(e,t,n){"use strict";var i,r,o,a,s=n(60),c=n.n(s),l=n(58),u=n.n(l),p=n(0),d=n.n(p),h=n(50),g=n.n(h),f=(n(61),n(51)),m=n(49),y=n(231).a.NOT_MACOS,v=[{command:"cut",className:"cut",hotkey:y?"Ctrl+X":"⌘+X"},{command:"copy",className:"copy",hotkey:y?"Ctrl+C":"⌘+C"},{command:"paste",className:"paste",hotkey:y?"Ctrl+V":"⌘+V"},{command:"selectAll",className:"select-all",hotkey:y?"Ctrl+A":"⌘+A"},{command:"saveAs",className:"save-as",hotkey:""},{command:"delete",className:"delete",hotkey:"Delete"},{command:"undo",className:"undo",hotkey:y?"Ctrl+Z":"⌘+Z"},{command:"redo",className:"redo",hotkey:y?"Ctrl+Y":"⌘+Shift+Z"}],_=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,c()(n,"opened",r,u()(n)),c()(n,"top",o,u()(n)),c()(n,"left",a,u()(n)),n.saveAsUrl=null,n.itemGroups=[];var i=t.state,s=void 0===i?{}:i;return n._excludes=f.W.get("configAgent").get("productConfig.contextMenu.exclude")||[],n._selectionInfoStore=f.W.get("selectionInfoStore"),n.opened=s.opened||n.opened,n}d()(t,e);var n=t.prototype;return n.open=function(e){void 0===e&&(e={});var t=e,n=t.top,i=t.left,r=t.saveAsUrl;this.top=n||0,this.left=i||0,this.saveAsUrl=r,this.itemGroups=this._makeItemGroups(e),this.opened=!0},n._makeItemGroups=function(e){var t=e.selectAllable,n=e.undoable,i=e.redoable,r=this._selectionInfoStore.collapsed,o=v.map(function(e){switch(e.command){case"copy":case"cut":case"delete":e.disabled=r;break;case"selectAll":e.disabled=!t;break;case"undo":e.disabled=!n;break;case"redo":e.disabled=!i;break;default:e.disabled=!1}return e});return[this._group("editing",o.slice(0,4)),this.saveAsUrl&&this._group("image",o.slice(4,5)),this._group("delete",o.slice(5,6)),this._group("history",o.slice(6,8))].filter(function(e){return!!e})},n._group=function(e,t){var n=this;if(void 0===t&&(t=[]),(t=t.filter(function(e){return!n._excludes.includes(e.command)})).length>0)return{key:e,items:t}},n.close=function(){this.opened=!1},t}(f.e),r=g()(i.prototype,"opened",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=g()(i.prototype,"top",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=g()(i.prototype,"left",[m.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i);t.a=_},426:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=(i=function(e){function t(){var t;return(t=e.call(this)||this)._a11yHelpLayerService=c.W.get("a11yHelpLayerService"),t}o()(t,e);var n=t.prototype;return n.open=function(){this._a11yHelpLayerService.open()},n.close=function(){this._a11yHelpLayerService.close()},t}(c.m),s()(i.prototype,"open",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"open"),i.prototype),s()(i.prototype,"close",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),i);t.a=u},427:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(16)),g=n(51),f=n(49),m=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,a()(n,"opened",r,c()(n));var i=t.state,o=void 0===i?{}:i;return n.opened=Object(h.a)(o,"opened",n.opened),n}u()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},t}(g.e),r=d()(i.prototype,"opened",[f.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=m},428:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(51),h=n(49),g=n(52),f=n(555),m=(i=function(e){function t(){var t;return(t=e.call(this)||this)._imageComponentService=d.W.get("imageComponentService"),t._imageTagLayerService=d.W.get("imageTagLayerService"),t._toastLayerService=d.W.get("toastLayerService"),t._alertLayerService=d.W.get("alertLayerService"),t._crawlerService=d.W.get("crawlerService"),t._searchLayerService=d.W.get("searchLayerService"),t._i18n=d.W.get("i18n"),t}l()(t,e);var n=t.prototype;return n.open=function(){this._imageTagLayerService.open()},n.close=function(){var e=this;if(this._imageTagLayerService.getTagChanged()){var t={i18nTitle:"title_confirm_close_layer",i18nDesc:"confirm_sure_to_close",funcConfirm:function(){return e._imageTagLayerService.close()},funcCancel:function(){return e._alertLayerService.close()}};this._showConfirmLayer(t)}else this._imageTagLayerService.close()},n.showToast=function(e){this._toastLayerService.warningMessage(e)},n.changeTab=function(e){var t=this;void 0===e&&(e="");var n=this._imageTagLayerService,i=n.getDuplicateConfig(),r=0===n.getTags().length,o=n.checkOnlyUrlTags(),a=n.getCurrentTabIndex();if(!(n.getTabIdByIndex(a)===e))if(i||r||o)this._changeTab(e);else{var s={i18nTitle:"title_confirm_layer",i18nDesc:"confirm_sure_to_change_tab",funcConfirm:function(){return t._changeTab(e,!0)},funcCancel:function(){return t._alertLayerService.close()}};this._showConfirmLayer(s)}},n._changeTab=function(e,t){void 0===t&&(t=!1),this._imageTagLayerService.changeTab(e,t)},n.changeToMaterialTab=function(e){this._searchLayerService.requestData(e)},n.changeSubCategory=function(e){var t=this,n=this._imageTagLayerService,i=n.getDuplicateConfig(),r=0===n.getTags().length;if(!(n.getcurrentSubCategoryIndex()===e))if(i||r)this._imageTagLayerService.changeSubCategory(e);else{var o={i18nTitle:"title_confirm_layer",i18nDesc:"confirm_sure_to_change_tab",funcConfirm:function(){return t._imageTagLayerService.changeSubCategory(e,!0)},funcCancel:function(){return t._alertLayerService.close()}};this._showConfirmLayer(o)}},n.setIsUrl=function(e){this._imageTagLayerService.setIsUrl(e)},n.search=function(e){this._imageTagLayerService.clearSearchResult(),this.setIsUrl(!1);var t=e.keyword;this._checkUrlPattern(t)?this._crawlUrl(t):this._imageTagLayerService.search(e)},n._crawlUrl=function(){var e=s()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setIsUrl(!0),this._imageTagLayerService.setLoadingState(!0),e.prev=2,e.next=5,this._crawlerService.crawlFromReturnRaw(t);case 5:(n=e.sent)||this._imageTagLayerService.searchFail(),this._imageTagLayerService.updateCrawledResult(n,t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this._imageTagLayerService.searchFail();case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),n.updateKeyword=function(e){this._imageTagLayerService.updateKeyword(e)},n.addNewTag=function(e){this._imageTagLayerService.addNewTag(e)},n.checkAddibleTag=function(e){return this._imageTagLayerService.checkAddibleTag(e)},n.delTag=function(e){var t=this,n={i18nTitle:"title_confirm_delete_tag",i18nDesc:"confirm_sure_to_delete",funcConfirm:function(){return t._imageTagLayerService.delTag(e)},funcCancel:function(){return t._alertLayerService.close()}};this._showConfirmLayer(n)},n.updateTag=function(e,t){this._imageTagLayerService.updateTag(e,t)},n.nextPage=function(){var e=s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._imageTagLayerService.nextPage();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.failed&&this._triggerServerError();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(){return e.apply(this,arguments)}}(),n.clearSearchLayer=function(){this._imageTagLayerService.clearSearchLayer()},n.clearSearchResult=function(){this._imageTagLayerService.clearSearchResult()},n.confirmTags=function(){var e=this._imageTagLayerService.getTags(),t=this._imageTagLayerService.getCompId();this._imageComponentService.removeLink(t),this._imageComponentService.updateMediaTag(t,e),this._imageTagLayerService.close()},n.updatePinPoint=function(e){this._imageTagLayerService.updatePinPoint(e)},n._triggerServerError=function(){this.showToast(this._i18n("imageTagLayer:error_server_data_load"))},n._showConfirmLayer=function(e){var t=e.i18nTitle,n=e.i18nDesc,i=e.funcConfirm,r=e.funcCancel;this._alertLayerService.open({type:"confirm",className:"se-popup-tag-delete",title:this._i18n("imageTagLayer:"+t),description:this._i18n("imageTagLayer:"+n),onClickConfirm:i,onClickCancel:r,isDimUse:!1})},n._checkUrlPattern=function(e){void 0===e&&(e="");var t=f.a.getUrlPattern().test(e),n=this._imageTagLayerService.getAllowUrlAttach();return t&&n},t}(d.m),p()(i.prototype,"nextPage",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"nextPage"),i.prototype),p()(i.prototype,"confirmTags",[g.history],Object.getOwnPropertyDescriptor(i.prototype,"confirmTags"),i.prototype),p()(i.prototype,"_triggerServerError",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"_triggerServerError"),i.prototype),i);t.a=m},429:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m,y,v=n(60),_=n.n(v),b=n(1),S=n.n(b),C=n(58),I=n.n(C),O=n(0),T=n.n(O),L=n(50),E=n.n(L),P=(n(61),n(16)),w=n(157),k=n(51),x=n(49),D=n(753),A={titleMaxLength:40,descMaxLength:20,link:!0,category:{categorySet:D.c,additionalCategories:[]},allowDuplicate:!0,allowTitleEditing:!0,allowDescriptionEditing:!0,allowTagOverlap:!0},j=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,_()(n,"opened",r,I()(n)),_()(n,"isLoading",o,I()(n)),_()(n,"imageUrl",a,I()(n)),_()(n,"searchItems",s,I()(n)),_()(n,"currentPage",c,I()(n)),_()(n,"totalPage",l,I()(n)),_()(n,"totalCount",u,I()(n)),_()(n,"keyword",p,I()(n)),_()(n,"tags",d,I()(n)),_()(n,"currentTabIndex",h,I()(n)),_()(n,"currentSubCategoryIndex",g,I()(n)),_()(n,"subCategories",f,I()(n)),_()(n,"isFetchNextPageError",m,I()(n)),_()(n,"isUrl",y,I()(n)),n.nonEditableCategories=D.b;var i=t,v=i.state,b=void 0===v?{}:v,S=i.config,C=void 0===S?{}:S;n.opened=Object(P.a)(b,"opened",n.opened),n.dimColor=Object(P.a)(C,"dimColor","transparent"),n.maxTagItems=D.d,n.preservedTag=[],n._configAgent=k.W.get("configAgent"),n.serviceId=n._configAgent.get("serviceInfo.appCode");var O=n._configAgent.get("productConfig.imageTag");if(!1===O)n._isUrlAttachEnabled=!1,n._isDuplicateAllowed=!1,n._isTitleEditingAllowed=!1,n._isDescriptionEditingAllowed=!1,n.category={categorySet:[],categoryInfos:[]};else{n._titleMaxLength=Object(P.a)(O,"titleMaxLength",A.titleMaxLength),n._descMaxLength=Object(P.a)(O,"descMaxLength",A.descMaxLength),n._isUrlAttachEnabled=Object(P.a)(O,"link",A.link),n._isDuplicateAllowed=Object(P.a)(O,"allowDuplicate",A.allowDuplicate),n._isTitleEditingAllowed=Object(P.a)(O,"allowTitleEditing",A.allowTitleEditing),n._isDescriptionEditingAllowed=Object(P.a)(O,"allowDescriptionEditing",A.allowDescriptionEditing),n._isTagOverlapAllowed=Object(P.a)(O,"allowTagOverlap",A.allowTagOverlap),n._lastUsedCategory=0,n._lastUsedSubCategory=0;var T=Object(P.a)(O,"category.categorySet",A.category.categorySet),L=Object(P.a)(O,"category.additionalCategories",A.category.additionalCategories),E=D.a.concat(L).reduce(function(e,t){return e[t.id]=t,e},{});n.category={categorySet:T,categoryInfos:T.map(function(e){return E[e]})}}return n.subCategories=[],n.indexMap={},n}T()(t,e);var n=t.prototype;return n.initialize=function(e){void 0===e&&(e={});var t=e,n=t.compId,i=t.imageUrl,r=t.width,o=t.height,a=t.tags;this.imageComponentId=n,this.imageUrl=i,this.imageWidth=r,this.imageHeight=o,this.preservedTag=a||[],this.tags=a||[],this.keyword="",this.searchItems=[],this.currentPage=1,this.totalPage=1,this.totalCount=0,this.isFetchNextPageError=!1,this.isUrl=!1,this.setIndexMap(),this.setCategory()},n.open=function(e){this.initialize(e),this.opened=!0},n.close=function(){this.opened=!1},n.addNewTag=function(e){this.tags.length<this.maxTagItems&&this.tags.push(e)},n.updateLastUsedCategory=function(e,t){this._lastUsedCategory=e,this._lastUsedSubCategory=t},n.delTag=function(e){void 0===e&&(e=-1),e>=0&&e<this.tags.length&&this.tags.remove(this.tags[e])},n.updateTag=function(e,t){if(void 0===e&&(e=-1),void 0===t&&(t={}),e>=0&&e<this.tags.length){var n=this.tags[e].links;n[0].title=t.title,n[0].description=t.description}},n._findCategory=function(e){if(!e)return{tab:0,subCategory:0};var t=e.links[0].categoryId,n=this.indexMap[t]||this.indexMap[this._getFirstCategoryId()];return n?{tab:-1===n.parentIndex?n.selfIndex:n.parentIndex,subCategory:-1===n.parentIndex?0:n.selfIndex}:{tab:0,subCategory:0}},n._getlastUsedCategory=function(){var e=0,t=0;if(this.tags.length>0){var n=this.tags.length,i=n-1,r=n>0?this.tags[i]:null,o=this._findCategory(r);e=o.tab,t=o.subCategory}else e=this._lastUsedCategory>0?this._lastUsedCategory:0,t=this._lastUsedSubCategory>0?this._lastUsedSubCategory:0;return{tab:e,subCategory:t}},n.setIndexMap=function(){var e={};this.category.categoryInfos.map(function(t,n){t.categoryId?e[t.categoryId]={parentIndex:-1,selfIndex:n,iconType:t.iconType||D.e.NONE}:t.subCategories.map(function(t,i){e[t.categoryId]={parentIndex:n,selfIndex:i,iconType:t.iconType||D.e.NONE}})}),this.indexMap=e},n.setCategory=function(){var e=this._getlastUsedCategory(),t=e.tab,n=e.subCategory;this.currentTabIndex=t,this.currentSubCategoryIndex=n;var i=this.category.categoryInfos[this.currentTabIndex]||{};this.subCategories=Object(P.a)(i,"subCategories",[])},n.changeTabIndex=function(e){this.currentTabIndex=e},n.changeSubCategory=function(e){this.currentSubCategoryIndex=e},n.updateSubCategory=function(e){this.subCategories=e||[]},n.updateSearchResult=function(e){var t=e.searchItems,n=e.totalCount,i=e.totalPage;this.searchItems=this.searchItems.concat(t),this.totalCount=n,this.totalPage=i},n.clearSearchResult=function(){this.searchItems=[],this.totalCount=0,this.totalPage=1,this.currentPage=1,this.isFetchNextPageError=!1},n.clearSearchKeyword=function(){this.keyword=""},n.updateKeyword=function(e){void 0===e&&(e=""),this.keyword=e},n.updateCurrentPage=function(e){void 0===e&&(e=1),this.currentPage=e},n.setIsUrl=function(e){this.isUrl=e},n.setLoadingState=function(e){this.isLoading=e},n.setCurrentPage=function(e){this.currentPage=e},n.updatePinPoint=function(e,t,n){var i=this.tags[e].point;i.x=t,i.y=n},n._getFirstCategoryId=function(){for(var e=0,t=Object.entries(this.indexMap);e<t.length;e++){var n=t[e],i=n[0],r=n[1];if(-1===r.parentIndex&&0===r.selfIndex)return i}},n.getTabIdByIndex=function(e){var t=e||this.currentTabIndex,n=this.customCategoryTabList;return Object(P.a)(n[t],"identifier",null)},n.getTabLabelByIndex=function(e){var t=e||this.currentTabIndex;return this.customCategoryTabList[t].label},n.getCurrentCategoryIdByIndex=function(){var e=this.currentTabIndex,t=this.currentSubCategoryIndex,n=this.category.categoryInfos[e],i=(n.subCategories&&n.subCategories[t]||[]).categoryId||n.categoryId;return String(i)},n.getTabIndexById=function(e){for(var t=this.customCategoryTabList,n=t.length,i=0,r=0;r<n;r++)t[r].identifier===e&&(i=r);return i},n.getProvider=function(){return this.serviceId},n.getIconType=function(e){return this.indexMap[e].iconType},S()(t,[{key:"isBuiltInSet",get:function(){var e=this.getCurrentCategoryIdByIndex();return D.b.includes(e)}},{key:"customCategoryTabList",get:function(){var e=this.category,t=e.categorySet,n=e.categoryInfos;return Object(w.a)(t,function(e,t){var i=n.find(function(e){return e.id===t});return i&&e.push({i18n:i.i18n||"",label:i.name,className:"",identifier:i.id,categoryId:i.categoryId,dataLog:"imgtl."+i.logId}),e},[])}},{key:"preservedTags",get:function(){return x.f.toJS(this.preservedTag)}},{key:"plainSearchItems",get:function(){return x.f.toJS(this.searchItems)}},{key:"plainSubCategories",get:function(){return x.f.toJS(this.subCategories)}},{key:"plainTagItem",get:function(){return x.f.toJS(this.tags)}},{key:"imageCompId",get:function(){return this.imageComponentId}},{key:"duplicateConfig",get:function(){return this._isDuplicateAllowed}},{key:"allowTitleEditing",get:function(){return this._isTitleEditingAllowed}},{key:"allowDescriptionEditing",get:function(){return this._isDescriptionEditingAllowed}},{key:"allowUrlAttach",get:function(){return this._isUrlAttachEnabled}},{key:"allowTagOverlap",get:function(){return this._isTagOverlapAllowed}},{key:"titleMaxLength",get:function(){return this._titleMaxLength}},{key:"descMaxLength",get:function(){return this._descMaxLength}}]),t}(k.e),r=E()(i.prototype,"opened",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=E()(i.prototype,"isLoading",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),a=E()(i.prototype,"imageUrl",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=E()(i.prototype,"searchItems",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=E()(i.prototype,"currentPage",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),l=E()(i.prototype,"totalPage",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),u=E()(i.prototype,"totalCount",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=E()(i.prototype,"keyword",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=E()(i.prototype,"tags",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=E()(i.prototype,"currentTabIndex",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=E()(i.prototype,"currentSubCategoryIndex",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=E()(i.prototype,"subCategories",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=E()(i.prototype,"isFetchNextPageError",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=E()(i.prototype,"isUrl",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E()(i.prototype,"customCategoryTabList",[x.e],Object.getOwnPropertyDescriptor(i.prototype,"customCategoryTabList"),i.prototype),i);t.a=j},430:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(49),l=n(376),u=n(54),p=n.n(u),d=n(52),h=n(296),g=n(557),f=n(253),m=(i=function(e){function t(){var t;return(t=e.call(this)||this)._refLayer=c.b.createRef(),t.state={value:""},t}o()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.setState(this.mapStateFromProps(this.props))},n.UNSAFE_componentWillReceiveProps=function(e){var t=this;this.setState(function(){return t.mapStateFromProps(e)})},n.render=function(){var e=this.props,t=e.applyLabel,n=e.placeholder,i=e.i18n,r=e.logAreaId+".urlok",o=p()("se-custom-layer-link-apply-button",{"se-custom-layer-link-apply-button-has-url":!!this.state.value}),a=p()("se-custom-layer-option","se-custom-layer-option-link");return c.b.createElement(h.a,{forwardRef:this._refLayer,className:a,"data-log":r},c.b.createElement("input",{className:"se-custom-layer-link-input",type:"url","data-role":"input",placeholder:i(n),value:this.state.value,onKeyPress:this._onKeyPressHandler,onChange:this.handleChangeInput}),c.b.createElement("button",{type:"button",className:o,title:i(t),"data-role":"confirm",onClick:this.handleClickConfirm},c.b.createElement("span",{className:"se-blind"},i(t))))},n.decodeUrl=function(e){return g.a.getDecodeUrl(e)},n.mapStateFromProps=function(e){var t=e.value?e.value:"";return{value:t?this.decodeUrl(t):""}},n.handleChangeInput=function(e){var t=e.target.value;this.setState({value:t}),this.props.onInput({event:e,value:t})},n.handleClickConfirm=function(e){this._onConfirm(e)},n._onKeyPressHandler=function(e){"Enter"===e.key&&this._onConfirm(e)},n._onConfirm=function(e){var t=this._toValidUrl();this.props.onConfirm({event:e,value:t})},n._toValidUrl=function(){return g.a.getEncodeUrl(Object(f.a)(this.state.value))},t}(c.b.Component),s()(i.prototype,"handleChangeInput",[d.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleChangeInput"),i.prototype),s()(i.prototype,"handleClickConfirm",[d.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleClickConfirm"),i.prototype),s()(i.prototype,"_onKeyPressHandler",[d.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_onKeyPressHandler"),i.prototype),i);m.defaultProps={placeholder:"",value:"",onConfirm:function(){},onInput:function(){},i18n:function(e){return e},applyLabel:""},m.propTypes={placeholder:c.a.string,value:c.a.string,onConfirm:c.a.func,onInput:c.a.func,i18n:c.a.func,applyLabel:c.a.string,logAreaId:c.a.string,confirmLogId:c.a.string},t.a=Object(l.b)(m)},431:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(54),p=n.n(u),d=n(49),h=n(376),g=n(52),f=n(755),m=n(296),y=(i=function(e){function t(){var t;return(t=e.call(this)||this).state={inputValue:""},t._refLayer=d.b.createRef(),t}s()(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.name,i=t.options,r=t.optionType,a=p()("se-toolbar-option","se-toolbar-option-"+n),s=Object.keys(i).map(function(t,n){return d.b.createElement(f.a,o()({optionId:t,optionType:r,inputValue:e.state.inputValue,onClickOptionList:e._handleClickOption,onChangeInputValue:e._handleChangeInputValue,onConfirmInputValue:e._handleConfirmInputValue},e.props,{key:t+"_"+n}))});return d.b.createElement(m.a,{forwardRef:this._refLayer,className:a,role:"listbox"},s)},n._handleClickOption=function(e){var t=this.props,n=t.id,i=t.name,r=t.options,o=t.action,a=t.onClickOption,s=e.currentTarget.getAttribute("data-value"),c=r[s],l=c.useInput,u=c.label,p=c.submenuOpen;a({event:e,id:n,name:i,value:l?""+this.state.inputValue:s,label:u,submenuOpen:p,action:o}),l||this.setState({inputValue:""}),e.preventDefault()},n._handleChangeInputValue=function(e){this.setState({inputValue:e})},n._handleConfirmInputValue=function(e){var t=this.props,n=t.id,i=t.name,r=t.options,o=t.action,a=t.onClickOption,s=r[e.currentTarget.getAttribute("data-value")].label;a({event:e,id:n,name:i,value:""+this.state.inputValue,label:s,action:o})},t}(d.b.Component),l()(i.prototype,"_handleClickOption",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickOption"),i.prototype),l()(i.prototype,"_handleChangeInputValue",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChangeInputValue"),i.prototype),l()(i.prototype,"_handleConfirmInputValue",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleConfirmInputValue"),i.prototype),i);y.defaultProps={id:"",name:"",value:"",optionType:"",options:{},onClickOption:function(){}},y.propTypes={id:d.a.string,name:d.a.string,value:d.a.string,action:d.a.string,optionType:d.a.string,options:d.a.oneOfType([d.a.array,d.a.object]),onClickOption:d.a.func},t.a=Object(h.b)(y)},432:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(122),p=n(1287),d=n(54),h=n.n(d),g=n(49),f=n(376),m=n(52),y=(i=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._inputRef=g.b.createRef(),t}s()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.setState(this._mapStateFromProps(this.props)),this.isCompositionChange=!1},n.UNSAFE_componentWillReceiveProps=function(e){var t=this;this.setState(function(){return t._mapStateFromProps(e)})},n.render=function(){var e=this.props,n=e.className,i=e.placeholder,r=e.title,a=Object(u.a)(this.props,Object.keys(t.propTypes)),s=this.state.value,c=h()(n);return g.b.createElement("input",o()({className:c,type:"text",placeholder:i,value:s,title:r,ref:this._inputRef,onChange:this._handleChangeInputValue,onCompositionUpdate:this._handleCompositionChange,onKeyDown:this._handleKeyDownHandler,onKeyPress:this._handleKeyPressHandler,onBlur:this._handleBlur,onClick:this._handleClick},a))},n.focus=function(){this._inputRef.current.focus()},n._handleCompositionChange=function(){this.isCompositionChange=!0},n._mapStateFromProps=function(e){return{min:e.min,max:e.max,value:e.value}},n._handleKeyDownHandler=function(e){var t=this.state.value,n=this.props.maxLength,i=t.toString(),r=e.key,o=e.keyCode>58&&!(e.keyCode>=96&&e.keyCode<=105),a=n&&i.length+1>n;(o||!1===isNaN(r)&&a)&&e.preventDefault()},n._handleKeyPressHandler=function(e){"Enter"===e.key&&this._triggerConfirmEvent(e)},n._handleBlur=function(){var e=this.state,t=e.min,n=e.max,i=e.value;if(!1===this._isValid(i)){var r=Math.abs(i-t),o=Math.max(i-n);this.setState({value:o>r?n:t}),this.props.onConfirm(event,this.state.value)}},n._handleChangeInputValue=function(e){var t=""===e.target.value?"":Number(e.target.value);isNaN(t)||this.isCompositionChange?this.isCompositionChange=!1:(this.setState({value:t}),this.props.onChange(t),this.isCompositionChange=!1)},n._triggerConfirmEvent=function(e){this.props.onConfirm(e,this.state.value)},n._isValid=function(e){var t=this.state,n=t.min,i=t.max,r=Number(e),o=!1===Object(p.a)(r,n,i+1);return""===e||!o},n._handleClick=function(){this.props.autofocus&&this.focus()},t}(g.b.Component),l()(i.prototype,"_handleCompositionChange",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleCompositionChange"),i.prototype),l()(i.prototype,"_handleKeyDownHandler",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleKeyDownHandler"),i.prototype),l()(i.prototype,"_handleKeyPressHandler",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleKeyPressHandler"),i.prototype),l()(i.prototype,"_handleBlur",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleBlur"),i.prototype),l()(i.prototype,"_handleChangeInputValue",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChangeInputValue"),i.prototype),l()(i.prototype,"_handleClick",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);y.defaultProps={className:"",placeholder:"",value:"",min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,autofocus:!1,onChange:function(){},onConfirm:function(){}},y.propTypes={className:g.a.string,placeholder:g.a.oneOfType([g.a.number,g.a.string]),value:g.a.oneOfType([g.a.number,g.a.string]),maxLength:g.a.number,min:g.a.number,max:g.a.number,autofocus:g.a.bool,onChange:g.a.func,onConfirm:g.a.func},t.a=Object(f.b)(y)},433:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(54),l=n.n(c),u=n(49),p=n(376),d=n(251),h=n(1311),g=n(52),f=n(59),m=n(431),y=n(129),v=n(51),_=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={selectedValue:"default"},n}o()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e="click.se-toolbar-icon-select-"+this.props.name;h.a.on(e,this._handleClickButtonOutside)},n.componentWillUnmount=function(){var e="click.se-toolbar-icon-select-"+this.props.name;h.a.off(e)},t.getDerivedStateFromProps=function(e,t){return e.selectedValue!==t.selectedValue?{selectedValue:e.selectedValue}:null},n.render=function(){var e,t,n,i=this.props,r=i.id,o=i.isActivated,a=i.name,s=i.title,c=i.label,p=i.selectorLabel,d=i.value,h=i.action,g=i.namespace,_=i.documentToolbarIconType,b=i.deviceType,S=i.options,C=i.logAreaId,I=i.i18n,O=i.type,T=i.focused,L=i.logId,E=r,P=I(c),w=I(p),k=g===f.e.DOCUMENT,x=b===v.t.DESKTOP,D=l()("__se-sentry","se-"+g+"-toolbar-"+O+"-container",o&&"se-is-activated","__select-container",((e={})["se-"+g+"-toolbar-"+_+"-container"]=x&&k,e)),A=l()("se-"+g+"-toolbar-"+O+"-button","se-"+a+"-"+this.state.selectedValue+"-toolbar-button",((t={})["se-"+_+"-toolbar-button"]=x&&k,t)),j=l()("se-"+g+"-toolbar-select-option-button",o&&"se-is-activated",((n={})["se-"+_+"-toolbar-select-option-button"]=x&&k,n));return u.b.createElement("div",{className:D,"data-group":g+"Toolbar","data-type":f.b.ICON_SELECT,"data-name":a},u.b.createElement(y.a,{logId:L,namespace:g,type:O,dataName:E,dataValue:this.state.selectedValue,i18n:I,focused:T,className:A,logAreaId:C,handleClick:this.handleClick},u.b.createElement("span",{className:"se-toolbar-icon"}),u.b.createElement("span",{className:"se-toolbar-tooltip"},I(s))),u.b.createElement(y.a,{className:j,namespace:g,type:O,dataName:E,i18n:I,handleClick:this.handleClickSelector,ariaExpanded:""+o,ariaHasPopup:"true"},u.b.createElement("span",{className:"se-toolbar-label","aria-hidden":"true"},w),u.b.createElement("span",{className:"se-toolbar-tooltip"},w)),u.b.createElement("span",{className:"se-toolbar-label","aria-hidden":"true"},P),o&&u.b.createElement(m.a,{id:r,name:a,options:S,value:d,action:h,namespace:g,type:O,optionType:f.c.ICON,logAreaId:C,i18n:I,onClickOption:this._handleClickOption}))},n.handleClick=function(e){var t=this.props,n=t.onClick,i=t.type,r=t.id,o=t.name,a=t.label,s=t.title,c=t.value,l=t.options,u=t.action;n.apply(this,[{event:e,type:i,id:r,name:o,label:a,title:s,value:c,action:u,options:l,selectedValue:this.state.selectedValue}])},n._handleClickOption=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.setState({selectedValue:t[0].value}),this.props.onClickOption.apply(this,t)},n._handleClickButtonOutside=function(e){var t=e.target;this.props.isActivated&&d.a.isOutsideElementbySelector(t,".__select-container")&&this.handleClickSelector({})},n.handleClickSelector=function(e){var t=this.props,n=t.onClickSelector,i=t.type,r=t.id,o=t.name,a=t.label;n.apply(this,[{event:e,type:i,id:r,name:o,label:a}])},t}(u.b.Component),s()(i.prototype,"handleClick",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleClick"),i.prototype),s()(i.prototype,"_handleClickOption",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickOption"),i.prototype),s()(i.prototype,"_handleClickButtonOutside",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickButtonOutside"),i.prototype),s()(i.prototype,"handleClickSelector",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"handleClickSelector"),i.prototype),i);_.defaultProps={label:"",title:"",id:"",name:"",value:"",namespace:"",options:{},logAreaId:"",logId:"",onClick:function(){},onClickSelector:function(){},onClickOption:function(){},isActivated:!1,focused:!1,i18n:function(e){return e},selectedValue:""},_.propTypes={type:u.a.oneOf([f.b.ICON_SELECT]).isRequired,id:u.a.string,name:u.a.string,label:u.a.string,selectorLabel:u.a.string,action:u.a.string,title:u.a.string,value:u.a.string,namespace:u.a.string,options:u.a.oneOfType([u.a.array,u.a.object]),documentToolbarIconType:u.a.string,deviceType:u.a.string,logAreaId:u.a.string,logId:u.a.string,onClick:u.a.func,onClickSelector:u.a.func,onClickOption:u.a.func,i18n:u.a.func,isActivated:u.a.bool,focused:u.a.bool,selectedValue:u.a.string},t.a=Object(p.b)(_)},434:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=n(52),p="INSERT",d="DELETE",h="UPDATE",g=(i=function(e){function t(){var t;return(t=e.call(this)||this)._formulaComponentService=c.W.get("formulaComponentService"),t._mathEditorLayerService=c.W.get("mathEditorLayerService"),t._editingService=c.W.get("editingService"),t._propertyChangeService=c.W.get("propertyChangeService"),t._themeService=c.W.get("themeService"),t._imageUploadService=c.W.get("imageUploadService"),t}o()(t,e);var n=t.prototype;return n.insertFormula=function(){var e=this._formulaComponentService.getFormulaListWithNewFormula(),t=e.compList,n=e.newFormula;this._mathEditorLayerService.open({activeCompData:n,compList:t,uploadThumbnails:this._uploadThumbnails.bind(this),callback:this._updateFormulaDataList.bind(this),fontSizeCode:this._getDefaultFontSizeCode()})},n.editFormula=function(e){var t=this._formulaComponentService.getFormulaCompList(),n=e||this._formulaComponentService.activeCompData();this._mathEditorLayerService.open({activeCompData:n,compList:t,uploadThumbnails:this._uploadThumbnails.bind(this),callback:this._updateFormulaDataList.bind(this),fontSizeCode:this._getDefaultFontSizeCode()})},n._uploadThumbnails=function(e,t){var n=e.map(function(e,t){return{id:t,source:e}});this._imageUploadService.uploadImages(n).then(function(e){return Promise.all(e)}).then(function(e){var n=e.map(function(e){var t=e.code,n=e.response,i=n.domain,r=n.url,o=n.width,a=n.height,s=n.fileSize,c=n.file;return"FAIL"===t?{src:c}:{src:i+r,width:o,height:a,size:s}});t(n)})},n._getDefaultFontSizeCode=function(){return((this._themeService.getComponentThemeStyle("formula")||{}).default||{}).fontSizeCode},n._updateFormulaDataList=function(e){var t=this;e.forEach(function(e){var n=t._resolveFormulaComponentData(e);n.mode===p?t._insertFormulaComponent(n):n.mode===h?t._updateFormulaComponent(n):n.mode===d&&t._removeFormulaComponent(n)})},n._resolveFormulaComponentData=function(e){return e.fontSizeCode="fs"+e.fontSize,e},n._insertFormulaComponent=function(e){var t={sourceComponents:[this._formulaComponentService.createComponent(e)]};this._editingService.insert(t)},n._updateFormulaComponent=function(e){this._formulaComponentService.updateComponent(e)},n._removeFormulaComponent=function(e){this._editingService.eraseComponent(e.id)},t}(c.c),s()(i.prototype,"insertFormula",[u.preventOnComponentProcessing,l.d],Object.getOwnPropertyDescriptor(i.prototype,"insertFormula"),i.prototype),s()(i.prototype,"editFormula",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"editFormula"),i.prototype),s()(i.prototype,"_updateFormulaDataList",[u.history],Object.getOwnPropertyDescriptor(i.prototype,"_updateFormulaDataList"),i.prototype),i)},435:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),r=n.n(i),o=n(51),a=function(e){function t(){var t;return(t=e.call(this)||this)._chatLayerService=o.W.get("chatLayerService"),t._documentService=o.W.get("documentService"),t._chatComponentService=o.W.get("chatComponentService"),t._storageService=o.W.get("storageService"),t}r()(t,e);var n=t.prototype;return n.insertChat=function(){var e=this._getLastWriters()||[];this._chatLayerService.open({writers:e})},n.editChat=function(){var e=this._chatComponentService.getSelectedCompStore(),t=e.messages,n=e.writers,i=e.id;this._chatLayerService.open({messages:t,writers:n,compId:i})},n._getLastWriters=function(){var e=this._storageService.getStorageData("chat-layer-last-writers");if(!e)return null;var t=this._documentService.getDocumentId(),n=e.docId,i=e.writers;return t===n?i:(this._storageService.setStorageData("chat-layer-last-writers",null),null)},t}(o.c)},436:function(e,t,n){"use strict";var i,r,o=n(0),a=n.n(o),s=n(50),c=n.n(s),l=n(51),u=n(49),p=n(52),d=(i=Object(p.history)({throttle:!0}),r=function(e){function t(){var t;return(t=e.call(this)||this)._specialLetterLayerService=l.W.get("specialLetterLayerService"),t._editingService=l.W.get("editingService"),t._storageService=l.W.get("storageService"),t}a()(t,e);var n=t.prototype;return n.close=function(){this._specialLetterLayerService.close()},n.insertSpecialLetter=function(e){var t=this._specialLetterLayerService.getRecentSpecialLetterList(e),n=t.key,i=t.list;this._editingService.writeSpecialCharacter(e),this._specialLetterLayerService.updateRecentSpecialLetterList(i),this._storageService.setStorageData(n,i)},n.changeLetterGroup=function(e){this._specialLetterLayerService.changeLetterGroup(e)},n.hasChangedPosition=function(){this._specialLetterLayerService.hasChangedPosition()},t}(l.m),c()(r.prototype,"close",[u.d],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),c()(r.prototype,"insertSpecialLetter",[i,u.d],Object.getOwnPropertyDescriptor(r.prototype,"insertSpecialLetter"),r.prototype),c()(r.prototype,"changeLetterGroup",[u.d],Object.getOwnPropertyDescriptor(r.prototype,"changeLetterGroup"),r.prototype),c()(r.prototype,"hasChangedPosition",[u.d],Object.getOwnPropertyDescriptor(r.prototype,"hasChangedPosition"),r.prototype),r);t.a=d},437:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={SPECIAL_LETTER_ID:"special-letter",STORAGE_VALUE_MAX_LENGTH:120,POPUP_OFFSET_CORRECTION:11}},438:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(51),h=n(49),g=n(52),f=n(212),m=n(231),y=(i=function(e){function t(){var t;return(t=e.call(this)||this)._placeLayerService=d.W.get("placeLayerService"),t._eventDispatcherService=d.W.get("eventDispatcherService"),t._editingService=d.W.get("editingService"),t._i18n=d.W.get("i18n"),t._finderService=d.W.get("finderService"),t._alertLayerService=d.W.get("alertLayerService"),t._selectionInfoStore=d.W.get("selectionInfoStore"),t._locationPrivacyService=d.W.get("locationPrivacyService"),t}l()(t,e);var n=t.prototype;return n.open=function(e){var t=void 0===e?{}:e,n=t.option,i=void 0===n?{}:n,r=t.events,o=void 0===r?{}:r;this._events=o,this._placeLayerService.open(i)},n.confirm=function(){var e=s()(o.a.mark(function e(t){var n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=[]),e.next=3,this._placeLayerService.fetchStaticMap(t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:this._events&&this._events.confirm?this._events.confirm({places:t,thumbnail:n}):(i=this._placeLayerService.createComponent({places:t,imgUrl:n}),this._placeLayerService.isUpdateMode()?this._placeLayerService.resolve(i):this._editingService.insert({sourceComponents:[i]})),this.close();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.cancel=function(){this._events&&this._events.cancel&&this._events.cancel(),this.close()},n.close=function(){this._placeLayerService.resolve(null),this._placeLayerService.close(),this._events=null},n.loadInitializeData=function(){var e=s()(o.a.mark(function e(){var t,n,i,r,a,s,c,l,u,p,d,h,g;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.a.IS_IE||!this._placeLayerService.isOverseas()){e.next=5;break}this.close(),this._alertUnsupported(),e.next=46;break;case 5:if(this._placeLayerService.isJsLoadError()){e.next=45;break}if(t=this._locationPrivacyService.isAllowedAccess(),n=this._placeLayerService.getSupportRegion(),i={initialized:!0,supportRegion:n},!t){e.next=42;break}if(r=this._finderService.getInternalResourceImagesOnDocument(),a=this._placeLayerService.groupByLocation(r),s=a.queries,c=a.coordinates,l=s.length>0,u=c.length>0,!l&&!u||n!==f.e.BOTH||m.a.IS_IE){e.next=37;break}if(p=[],!l){e.next=23;break}return e.next=19,this._placeLayerService.fetchImageExif(s);case 19:if(e.t0=e.sent,e.t0){e.next=22;break}e.t0=[];case 22:p=e.t0;case 23:if(this._locationPrivacyService.writeUserLocation(),!u){e.next=32;break}return e.next=27,this._placeLayerService.fetchDomesticBulkCheck(c);case 27:if(e.t1=e.sent,e.t1){e.next=30;break}e.t1=[];case 30:(d=e.t1).length>0&&(d.forEach(function(e,t){c[t].isLocalCoordinate=e.isLocalCoordinate}),p=p.concat(c));case 32:if(!(p.length>0)){e.next=37;break}return e.next=35,this._placeLayerService.getSuggestion(p);case 35:(h=e.sent)&&(i.initialSearch=h);case 37:if(i.initialSearch){e.next=42;break}return e.next=40,this._placeLayerService.fetchCoordByIp();case 40:(g=e.sent)&&(i.initialCenter=g);case 42:this._placeLayerService.updateInitializeData(i),e.next=46;break;case 45:this.close();case 46:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.autocomplete=function(){var e=s()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._placeLayerService.fetchAutocomplete(t);case 2:(n=e.sent)&&this._placeLayerService.updateAutocompleteData(n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.selectKeyword=function(){var e=s()(o.a.mark(function e(t){var n,i,r,a,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.description,i=t.placeId,r=t.terms,a=void 0===r?[]:r,!i){e.next=9;break}return e.next=4,this._placeLayerService.fetchSearchByPlaceId(i);case 4:(s=e.sent).name=this._refinePlaceName(s,n,a),this._placeLayerService.updateSearchData({items:[s],pagination:{itemCount:1,currentPage:1,hasNextPage:!1}}),e.next=11;break;case 9:return e.next=11,this.search(n);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.search=function(){var e=s()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._placeLayerService.startSearching(),e.prev=1,e.next=4,this._placeLayerService.fetchSearch(t);case 4:n=e.sent,this._placeLayerService.updateSearchData(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.failed&&this._showSearchError();case 12:return e.prev=12,this._placeLayerService.stopSearching(),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,8,12,15]])}));return function(t){return e.apply(this,arguments)}}(),n.nextpage=function(){var e=s()(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._placeLayerService.fetchNextPage(t);case 3:n=e.sent,this._placeLayerService.updateSearchData(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.failed&&this._showSearchError();case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),n.addPlace=function(){var e=s()(o.a.mark(function e(t){var n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.place,!this._placeLayerService.isAddedPlace(n)){e.next=3;break}return e.abrupt("return",null);case 3:if(this._placeLayerService.isIdenticalRegionOfAddedPlace(n)){e.next=6;break}return this._showAlert({title:"error_different_region_type_title",description:"error_different_region_type_desc"}),e.abrupt("return",null);case 6:if(this._placeLayerService.getSupportRegion()!==f.e.BOTH){e.next=13;break}return e.next=10,this._checkPlaceCoordinate(n);case 10:if(e.sent){e.next=13;break}return e.abrupt("return",null);case 13:if(!this._placeLayerService.isFullPlace()){e.next=17;break}return i=this._placeLayerService.getMaxPlaceCount(),this._placeLayerService.showToast({type:f.f.EXCEEDED_MAX_LIMIT,payload:{maxPlaceCount:i}}),e.abrupt("return",null);case 17:this._placeLayerService.addPlaces([n]);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.addPlaceByInfoWindow=function(e){this._placeLayerService.updateEditingInfoWindowData(null),this.addPlace({place:e})},n.openEditingInfoWindow=function(){var e=s()(o.a.mark(function e(t){var n,i=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._placeLayerService.fetchGeocode(t);case 3:if(!(n=e.sent)){e.next=10;break}if(!this._placeLayerService.isAddedPlace(n)){e.next=7;break}return e.abrupt("return");case 7:this._placeLayerService.updateEditingInfoWindowData(n),e.next=11;break;case 10:this._showAlert({title:"error_geocoding_title",description:"error_geocoding_desc",onClickConfirm:function(){i.changeIndicatorStatus(!1)}});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.failed&&this._showAlert({title:"error_geocoding_title",description:"error_geocoding_api_desc",onClickConfirm:function(){i.changeIndicatorStatus(!1)}});case 17:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),n.removePlace=function(e){this._placeLayerService.removePlace(e)},n.changeIndicatorStatus=function(e){this._placeLayerService.updateIndicatorStatus(e),e||this._placeLayerService.updateEditingInfoWindowData(null)},n.updateEditingInfoWindow=function(e){this._placeLayerService.updateEditingInfoWindowData(e)},n._checkPlaceCoordinate=function(){var e=s()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.__isDomestic){e.next=3;break}return e.abrupt("return",!0);case 3:return e.next=5,this._placeLayerService.fetchDomesticCheck(t.latlng);case 5:if(!e.sent){e.next=9;break}return this._showAlert({title:"error_domestic_item_with_google_title",description:"error_domestic_item_with_google"}),e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.highlight=function(e){if("click"===e.type){var t=e.item;this._placeLayerService.isIdenticalRegion(t)||this._placeLayerService.updateRegionType(t.__isDomestic?f.c.DOMESTIC:f.c.OVERSEAS,!0)}this._placeLayerService.updateHighlightData(e)},n.updateRegionType=function(e){var t=this,n=this._placeLayerService.hasPlaces();if(m.a.IS_IE)return this._alertUnsupported(),!1;n?this._showAlert({type:d.n.CONFIRM,title:"has_places_title",description:"has_places_description",onClickConfirm:function(){return t._placeLayerService.updateRegionType(e)}}):this._placeLayerService.updateRegionType(e)},n._showAlert=function(e){var t=e.type,n=void 0===t?d.n.ALERT:t,i=e.title,r=e.description,o=e.onClickConfirm,a=void 0===o?function(){}:o;this._alertLayerService.open({type:n,isDimUse:!1,title:this._i18n("placeLayer:"+i),description:this._i18n("placeLayer:"+r),onClickConfirm:a})},n._showSearchError=function(){this._showAlert({title:"error_search_title",description:"error_search_desc"})},n._alertUnsupported=function(){this._alertLayerService.open({type:d.n.ALERT,isDimUse:!1,title:this._i18n("commonPopup:recommended_browser_title"),description:this._i18n("commonPopup:recommended_browser_description")})},n.updateJsLoadErrorStatus=function(e){this._placeLayerService.updateJsLoadErrorStatus(e)},n.overPlaceNameLength=function(e){this._placeLayerService.showToast({type:f.f.EXCEEDED_MAX_PLACE_NAME,payload:{maxPlaceNameLength:e}})},n._refinePlaceName=function(e,t,n){return(n[0]||{}).value||t||e.name},t}(d.m),p()(i.prototype,"confirm",[g.history,h.d],Object.getOwnPropertyDescriptor(i.prototype,"confirm"),i.prototype),p()(i.prototype,"close",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"close"),i.prototype),p()(i.prototype,"loadInitializeData",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"loadInitializeData"),i.prototype),p()(i.prototype,"autocomplete",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"autocomplete"),i.prototype),p()(i.prototype,"selectKeyword",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"selectKeyword"),i.prototype),p()(i.prototype,"search",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"search"),i.prototype),p()(i.prototype,"nextpage",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"nextpage"),i.prototype),p()(i.prototype,"addPlace",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"addPlace"),i.prototype),p()(i.prototype,"addPlaceByInfoWindow",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"addPlaceByInfoWindow"),i.prototype),p()(i.prototype,"openEditingInfoWindow",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"openEditingInfoWindow"),i.prototype),p()(i.prototype,"removePlace",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"removePlace"),i.prototype),p()(i.prototype,"changeIndicatorStatus",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"changeIndicatorStatus"),i.prototype),p()(i.prototype,"updateEditingInfoWindow",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"updateEditingInfoWindow"),i.prototype),p()(i.prototype,"highlight",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"highlight"),i.prototype),p()(i.prototype,"updateRegionType",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"updateRegionType"),i.prototype),p()(i.prototype,"updateJsLoadErrorStatus",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"updateJsLoadErrorStatus"),i.prototype),p()(i.prototype,"overPlaceNameLength",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"overPlaceNameLength"),i.prototype),i);t.a=y},439:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m,y,v,_,b=n(56),S=n.n(b),C=n(60),I=n.n(C),O=n(1),T=n.n(O),L=n(58),E=n.n(L),P=n(0),w=n.n(P),k=n(50),x=n.n(k),D=(n(61),n(16)),A=n(324),j=n(84),R=n(96),N=n(113),M=n(112),B=n(51),W=n(49),U=n(212),F=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,I()(n,"regionType",r,E()(n)),I()(n,"opened",o,E()(n)),I()(n,"indicatorActivated",a,E()(n)),I()(n,"initialized",s,E()(n)),I()(n,"autocompleteData",c,E()(n)),I()(n,"searchData",l,E()(n)),I()(n,"editingInfoWindowData",u,E()(n)),I()(n,"isSearching",p,E()(n)),I()(n,"initialKeyword",d,E()(n)),I()(n,"places",h,E()(n)),I()(n,"highlightData",g,E()(n)),I()(n,"maxPlaceCount",f,E()(n)),I()(n,"toastInfo",m,E()(n)),I()(n,"initialCenter",y,E()(n)),I()(n,"jsErrorStatus",v,E()(n)),I()(n,"supportRegion",_,E()(n)),n.maxPageSize=5,n.maxItemsPerPage=7,n.maxItemsOfAutocomplete=8,n.maxItemsAdded=5,n.channel="naver_editorpencil",n.gmapApiKey="AIzaSyDKo6MfoC1plkhfaMG_fS87pSQjOUMlOhA",n.maxPlaceNameLength=1/0;var i=t,b=i.state,S=void 0===b?{}:b,C=i.config,O=void 0===C?{}:C;return n.regionType=Object(D.a)(S,"regionType",n.regionType),n.opened=Object(D.a)(S,"opened",n.opened),n.indicatorActivated=Object(D.a)(S,"indicatorActivated",n.indicatorActivated),n.initialized=Object(D.a)(S,"initialized",n.initialized),n.autocompleteData=Object(D.a)(S,"autocompleteData",n.autocompleteData),n.searchData=Object(D.a)(S,"searchData",n.searchData),n.editingInfoWindowData=Object(D.a)(S,"editingInfoWindowData",n.editingInfoWindowData),n.isSearching=Object(D.a)(S,"isSearching",n.isSearching),n.initialKeyword=Object(D.a)(S,"initialKeyword",n.initialKeyword),n.places=Object(D.a)(S,"places",n.places),n.maxPageSize=Object(D.a)(O,"maxPageSize",n.maxPageSize),n.maxItemsPerPage=Object(D.a)(O,"maxItemsPerPage",n.maxItemsPerPage),n.maxItemsOfAutocomplete=Object(D.a)(O,"maxItemsOfAutocomplete",n.maxItemsOfAutocomplete),n.maxItemsAdded=Object(D.a)(O,"maxItemsAdded",n.maxItemsAdded),n.maxWidthOfInfoWindow=Object(D.a)(O,"maxWidthOfInfoWindow",n.maxWidthOfInfoWindow),n.maxPlaceNameLength=Object(D.a)(O,"maxPlaceNameLength",n.maxPlaceNameLength),n._updateVariableByExternalConfig(),n}w()(t,e);var n=t.prototype;return n._updateVariableByExternalConfig=function(){var e=B.W.get("configAgent");this.markerIcons=e.get("editorInfo.placesMapInfo");var t=e.get("plugins.layoutSettings.placeLayer.config.supportRegion");this.supportRegion=Object(M.a)(U.e,t)?t:this.supportRegion,this.channel=e.get("infraInfo.mapInfra.googleMapChannelId")||this.channel,this.gmapApiKey=e.get("infraInfo.mapInfra.googleMapClientKey")||this.gmapApiKey},n.open=function(){this.opened=!0},n.close=function(){this.opened=!1,this._reset()},n.updateAutocompleteData=function(e){this.autocompleteData=e},n.updateSearchingStatus=function(e){e&&(this.autocompleteData=null,this.searchData=null),this.isSearching=e},n.updateHighlightData=function(e){this.highlightData=e},n.updateInitializeData=function(e){var t=e.initialCenter,n=void 0===t?null:t,i=e.initialPlaces,r=void 0===i?this.places:i,o=e.initialKeyword,a=void 0===o?"":o,s=e.initialSearch,c=void 0===s?null:s,l=e.maxPlaceCount,u=e.supportRegion,p=void 0===u?null:u,d=e.initialized,h=void 0===d?this.initialized:d,g=Object(D.a)(c,"items",null),f=this._hasOverseas(g)||this._hasOverseas(r);this.initialized=h,this.supportRegion=Object(M.a)(U.e,p)?p:this.supportRegion,(this.supportRegion===U.e.BOTH&&f||this.supportRegion===U.e.OVERSEAS)&&(this.regionType=U.c.OVERSEAS),this.places=r,this.maxPlaceCount=l||this.maxPlaceCount||this.maxItemsAdded,this.initialKeyword=a,this.searchData=c,this.initialCenter=n},n.updateJsLoadErrorStatus=function(e){this.jsErrorStatus=e},n.showToast=function(e){this.toastInfo=S()({id:B.cb.generate()},e)},n.hideToast=function(){this.toastInfo=null},n.addPlaces=function(e){var t=this.places.slice();this.places=[].concat(t,e),this.indicatorActivated=!1},n.removePlace=function(e){Object(A.a)(this.places,function(t){return Object(j.a)(t,e)})},n.resetPlaces=function(){this.places.replace([])},n._reset=function(){this.initialized=!1,this.maxPlaceCount=this.maxItemsAdded,this.initialKeyword="",this.regionType=U.c.DOMESTIC,this._resetLayer()},n._resetLayer=function(){this.searchData=null,this.editingInfoWindowData=null,this.isSearching=!1,this.indicatorActivated=!1,this.highlightData=null,this.toastInfo=null,this.places=[],this.jsErrorStatus=!1},n._isAdded=function(e){return Object(R.a)(this.places,e)>-1},n._isHighlight=function(e){var t=this.highlightData&&this.highlightData.item||{};return!this.editingInfoWindowData&&e.name===t.name&&e.address===t.address&&e.placeId===t.placeId},n._makeUid=function(e){var t=e.latlng;return t.latitude+","+t.longitude+","+e.placeId},n._refinePlaces=function(){var e=this,t=[];return this.places.forEach(function(n,i){t.push(S()({},n,{pIndex:i,zIndex:100,uid:e._makeUid(n),isAdded:!0,isHighlight:e._isHighlight(n)}))}),t},n._refineSearchResultExceptAdded=function(){var e=this,t=[];return Object(D.a)(this.searchData,"items",[]).forEach(function(n){if(!e._isAdded(n)){var i=e._isHighlight(n),r=i?200:1;t.push(S()({},n,{zIndex:r,uid:e._makeUid(n),isAdded:!1,isHighlight:i}))}}),t},n.updateSearchData=function(e){var t=Object(D.a)(e,"items",null);if(t&&t.length>0){var n=this._hasOverseas(t)?U.c.OVERSEAS:U.c.DOMESTIC;this.regionType!==n&&(this.regionType=n)}this.editingInfoWindowData=null,this.indicatorActivated=!1,this.highlightData=null,this.searchData=e},n.updateIndicatorStatus=function(e){e&&(this.searchData=null,this.autocompleteData=null,this.editingInfoWindowData=null),this.indicatorActivated=e},n.updateEditingInfoWindowData=function(e){this.editingInfoWindowData=e},n.updateRegionType=function(e,t){t||this._resetLayer(),this.autocompleteData=null,this.regionType=e},n.updateCompData=function(e){this.compData=e},n._hasOverseas=function(e){return!!e&&Object(N.a)(e,["__isDomestic",!1])},T()(t,[{key:"isDomestic",get:function(){return this.regionType===U.c.DOMESTIC}},{key:"isFullPlace",get:function(){return this.places.length===this.maxPlaceCount}},{key:"mapCursor",get:function(){var e=this.regionType===U.c.DOMESTIC?"open":"url("+window.location.protocol+"//maps.gstatic.com/mapfiles/openhand_8_8.cur),default";return this.indicatorActivated?"crosshair":e}},{key:"refinedSearchResult",get:function(){var e=this,t=[],n=Object(D.a)(this.searchData,"items",[]),i=Object(D.a)(this.searchData,"pagination"),r=Object(D.a)(this.searchData,"status");return n.forEach(function(n){var i=e._isHighlight(n);t.push(S()({},n,{uid:e._makeUid(n),isAdded:e._isAdded(n),isHighlight:i,zIndex:i?100:1}))}),{items:t,pagination:i,status:r}}},{key:"mapMarkers",get:function(){var e=this._refineSearchResultExceptAdded(),t=this._refinePlaces();return[].concat(e,t)}},{key:"mapModel",get:function(){var e=Object(D.a)(this.highlightData,"type",null),t=Object(D.a)(this.searchData,"items",null),n=this.editingInfoWindowData,i=this.isDomestic,r=U.a.overseas,o=U.a.domestic,a=this.initialCenter;i||(a=null);var s={};if(n)return s.zoom=i?o:r,s.center=n.latlng,s;switch(e){case"click":s.zoom=i?o:r,s.center=this.highlightData.item.latlng;break;case"mouseenter":break;default:s.boundary=t||(this.places.length?this.places:null),s.boundary?s.zoom=i?o:r:s.zoom=a?o:i?o:1,s.center=a}return s}}]),t}(B.e),r=x()(i.prototype,"regionType",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.c.DOMESTIC}}),o=x()(i.prototype,"opened",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=x()(i.prototype,"indicatorActivated",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=x()(i.prototype,"initialized",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=x()(i.prototype,"autocompleteData",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=x()(i.prototype,"searchData",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=x()(i.prototype,"editingInfoWindowData",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=x()(i.prototype,"isSearching",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=x()(i.prototype,"initialKeyword",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=x()(i.prototype,"places",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=x()(i.prototype,"highlightData",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=x()(i.prototype,"maxPlaceCount",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=x()(i.prototype,"toastInfo",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=x()(i.prototype,"initialCenter",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x()(i.prototype,"jsErrorStatus",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=x()(i.prototype,"supportRegion",[W.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.e.BOTH}}),x()(i.prototype,"isDomestic",[W.e],Object.getOwnPropertyDescriptor(i.prototype,"isDomestic"),i.prototype),x()(i.prototype,"isFullPlace",[W.e],Object.getOwnPropertyDescriptor(i.prototype,"isFullPlace"),i.prototype),x()(i.prototype,"mapCursor",[W.e],Object.getOwnPropertyDescriptor(i.prototype,"mapCursor"),i.prototype),x()(i.prototype,"refinedSearchResult",[W.e],Object.getOwnPropertyDescriptor(i.prototype,"refinedSearchResult"),i.prototype),x()(i.prototype,"mapMarkers",[W.e],Object.getOwnPropertyDescriptor(i.prototype,"mapMarkers"),i.prototype),x()(i.prototype,"mapModel",[W.e],Object.getOwnPropertyDescriptor(i.prototype,"mapModel"),i.prototype),i);t.a=F},440:function(e,t,n){"use strict";var i,r,o,a=n(12),s=n.n(a),c=n(18),l=n.n(c),u=n(0),p=n.n(u),d=n(50),h=n.n(d),g=n(51),f=n(49),m=n(52),y=n(213),v=n(411),_=(i=Object(m.history)({sync:!1}),r=Object(m.history)({sync:!1}),o=function(e){function t(){var t;return(t=e.call(this)||this)._imageTypeLayerService=g.W.get("imageTypeLayerService"),t._imageBehavior=g.W.get("imageBehavior"),t._imageUploadService=g.W.get("imageUploadService"),t}p()(t,e);var n=t.prototype;return n.confirm=function(){var e=l()(s.a.mark(function e(t){var n,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,i=t.data,this.close(),e.t0=n,e.next="list"===e.t0?5:"gif"===e.t0?8:"collage"===e.t0?9:"slide"===e.t0?12:15;break;case 5:return e.next=7,this._insertImage(i);case 7:case 8:return e.abrupt("break",16);case 9:return e.next=11,this._insertGroupImage(y.b.COLLAGE,i);case 11:return e.abrupt("break",16);case 12:return e.next=14,this._insertGroupImage(y.b.SLIDE,i);case 14:case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.close=function(){this._imageTypeLayerService.close()},n._insertImage=function(){var e=l()(s.a.mark(function e(t){var n,i,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.type,i=t.payload,r=t.insertInterceptor,o=t.serviceType,n!==v.a.FILE){e.next=6;break}return e.next=4,this._imageBehavior.insertImage(i,r);case 4:e.next=9;break;case 6:if(n!==v.a.SNS){e.next=9;break}return e.next=9,this._imageBehavior.insertImageFromUrls(i,o);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n._insertGroupImage=function(){var e=l()(s.a.mark(function e(t,n){var i,r,o,a,c,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.type,r=n.payload,o=n.insertInterceptor,a=n.serviceType,c=r.validFiles,l=void 0===c?[]:c,u=this._imageUploadService.getExceededCountByMax(l.length),1!==l.length-u){e.next=9;break}return e.next=7,this._imageBehavior.insertImage(r,o);case 7:e.next=17;break;case 9:if(i!==v.a.FILE){e.next=14;break}return e.next=12,this._imageBehavior.insertGroupImage(t,r,o);case 12:e.next=17;break;case 14:if(i!==v.a.SNS){e.next=17;break}return e.next=17,this._imageBehavior.insertImageGroupFromUrls(t,r,a);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t}(g.m),h()(o.prototype,"confirm",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"confirm"),o.prototype),h()(o.prototype,"close",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"close"),o.prototype),h()(o.prototype,"_insertImage",[i,f.d],Object.getOwnPropertyDescriptor(o.prototype,"_insertImage"),o.prototype),h()(o.prototype,"_insertGroupImage",[r,f.d],Object.getOwnPropertyDescriptor(o.prototype,"_insertGroupImage"),o.prototype),o);t.a=_},441:function(e,t,n){"use strict";var i,r,o,a,s=n(60),c=n.n(s),l=n(58),u=n.n(l),p=n(0),d=n.n(p),h=n(50),g=n.n(h),f=(n(61),n(16)),m=n(51),y=n(49),v=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,c()(n,"data",r,u()(n)),c()(n,"opened",o,u()(n)),c()(n,"isGroupImageAvailable",a,u()(n)),n.maxGroupImageLength=10;var i=t,s=i.state,l=void 0===s?{}:s,p=i.config,d=void 0===p?{}:p;return n.data=Object(f.a)(l,"data",n.data),n.opened=Object(f.a)(l,"opened",n.opened),n.dimColor=Object(f.a)(d,"dimColor","transparent"),n.isGroupImageAvailable=Object(f.a)(l,"isGroupImageAvailable",n.isGroupImageAvailable),n.maxGroupImageLength=Object(f.a)(d,"maxGroupImageLength",n.maxGroupImageLength),n}d()(t,e);var n=t.prototype;return n.open=function(e){this.data=e,this.opened=!0,this.isGroupImageAvailable=e.payload.length<=this.maxGroupImageLength},n.close=function(){this.data={},this.opened=!1},t}(m.e),r=g()(i.prototype,"data",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=g()(i.prototype,"opened",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=g()(i.prototype,"isGroupImageAvailable",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),i);t.a=v},442:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=(i=function(e){function t(){var t;return(t=e.call(this)||this)._imageLocationEditLayerService=c.W.get("imageLocationEditLayerService"),t}o()(t,e);var n=t.prototype;return n.removeLocation=function(){this._imageLocationEditLayerService.remove(),this.close()},n.changeLocation=function(){this._imageLocationEditLayerService.change(),this.close()},n.close=function(){this._imageLocationEditLayerService.close()},t}(c.m),s()(i.prototype,"removeLocation",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"removeLocation"),i.prototype),s()(i.prototype,"changeLocation",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"changeLocation"),i.prototype),i);t.a=u},443:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(51)),g=n(49),f=(i=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a()(t,"opened",r,c()(t)),t}u()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1},t}(h.e),r=d()(i.prototype,"opened",[g.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=f},444:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m,y,v,_,b,S,C,I,O,T,L,E,P,w,k=n(17),x=n.n(k),D=n(60),A=n.n(D),j=n(1),R=n.n(j),N=n(58),M=n.n(N),B=n(0),W=n.n(B),U=n(50),F=n.n(U),z=(n(61),n(69)),V=n(119),G=n(16),H=n(3),q=n(24),J=n(70),K=n(172),X=n(20),Y=n(112),Q=n(102),Z=n(51),$=n(1079),ee=n(1313),te=n(49),ne=n(214),ie=n(1365),re=n(1080),oe=n(557),ae=n(563),se=n(192),ce=["contentMode","link","resizing"],le=Object(q.a)(function(e){return new Promise(function(t,n){var i=new Image;i.onload=function(){t({width:i.width,height:i.height})},i.onerror=function(t){le.cache.delete(e),n(t)},i.src=e})}),ue=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"query",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},n.domain="",n.thumbnailTypeMap={},n.imageMinimumHeight=0,n.imageMinimumWidth=0,n.documentWidth=null,n.imageTag={},A()(n,"layout",r,M()(n)),A()(n,"contentMode",o,M()(n)),A()(n,"align",a,M()(n)),A()(n,"src",s,M()(n)),A()(n,"width",c,M()(n)),A()(n,"height",l,M()(n)),A()(n,"originalWidth",u,M()(n)),A()(n,"originalHeight",p,M()(n)),A()(n,"alt",d,M()(n)),A()(n,"caption",h,M()(n)),A()(n,"place",g,M()(n)),A()(n,"location",f,M()(n)),A()(n,"path",m,M()(n)),A()(n,"internalResource",y,M()(n)),A()(n,"fileSize",v,M()(n)),A()(n,"link",_,M()(n)),A()(n,"widthPercentage",b,M()(n)),A()(n,"format",S,M()(n)),A()(n,"displayFormat",C,M()(n)),A()(n,"phase",I,M()(n)),A()(n,"represent",O,M()(n)),A()(n,"mediaMeta",T,M()(n)),A()(n,"origin",L,M()(n)),A()(n,"imageLoaded",E,M()(n)),A()(n,"mediaTags",P,M()(n)),A()(n,"representativeEnabled",w,M()(n)),n.serviceData=null,n._strictMinimumScale=!1;var i=t,k=i.state,x=void 0===k?{}:k,D=i.config,j=void 0===D?{}:D;n._config=j,n._configAgent=Z.W.get("configAgent"),n._infraConfig=n._configAgent.get("infraConfig"),n._componentFactory=Z.W.get("componentFactory"),n._sentryManager=Z.W.get("sentryManager"),n.attributes=Object(J.a)(n.attributes,j.attributes),n.thumbnailTypeMap=j.thumbnailTypeMap||n._configAgent.get("editorInfo.thumbnailType")||n.thumbnailTypeMap,n.useThumbnail=Object(G.a)(n._infraConfig,"image.useThumbnail",!0),n.imageMinimumHeight=n._configAgent.get("editorInfo.imageMinimumHeight"),n.imageMinimumWidth=n._configAgent.get("editorInfo.imageMinimumWidth"),n.documentWidth=n._configAgent.get("productConfig.documentWidth"),n.enableLocation=!1!==Object(G.a)(j,"enableLocation",!1);var R=n._configAgent.get("productConfig.imageTag");if("boolean"==typeof R?R||(n.imageTag=null):"object"==typeof R&&(n.imageTag=R),x.key)n.id=Object(G.a)(x,"key",n.id),n.src=x.domain+x.path||n.src,n.domain=Object(G.a)(x,"domain",n.domain),n.path=Object(G.a)(x,"path",n.path),n.originalWidth=Object(G.a)(x,"width",n.originalWidth),n.originalHeight=Object(G.a)(x,"height",n.originalHeight),n.internalResource=!0,n.represent=!1;else{n.layout=Object(G.a)(x,"layout",n.layout),n.align=Object(G.a)(x,"align",n.align),n.src=n._getValidSrc(Object(G.a)(x,"src",n.src)),n.width=Object(G.a)(x,"width"),n.height=Object(G.a)(x,"height"),n.originalWidth=x.originalWidth||n.width,n.originalHeight=x.originalHeight||n.height,n.originalWidth&&n.originalHeight?n.width&&n.height?n._resolveWidthAndHeight({width:n.width,height:n.height}):(n._updateSize(n.originalWidth,n.originalHeight),n._resolveWidthAndHeight({width:n.width,height:n.height})):(delete x.contentMode,le(n._infraOriginalImageUrl).then(function(e){var t=e.width,i=e.height;n._updateSize(t,i),n.originalWidth=n.width,n.originalHeight=n.height,n._resolveWidthAndHeight({width:n.width,height:n.height}),n._resolveContentModeBySize()}).catch(function(){}));var N=Object(G.a)(x,"path",n.path);n.path=oe.a.getEncodeUrl(N),n.alt=Object(G.a)(x,"alt",n.alt),n.caption=n._createCaptionTextUnitStore(x.caption,j.caption),n.place=Object(G.a)(x,"place",n.place),n.location=n._extractLocation(x),n.domain=Object(G.a)(x,"domain",n._configAgent.get("infraInfo.photoInfra.imageHost")),n.internalResource=Object(G.a)(x,"internalResource",n.internalResource),n.fileSize=Object(G.a)(x,"fileSize",n.fileSize),n.fileName=Object(G.a)(x,"fileName",n.fileName),n.link=Object(G.a)(x,"link",n.link),n.widthPercentage=Object(G.a)(x,"widthPercentage",n.widthPercentage),n.format=Object(G.a)(x,"format",n.format),n.displayFormat=Object(G.a)(x,"displayFormat",n.displayFormat),n.phase=n._resolveComponentPhase(x),n.represent=Object(G.a)(x,"represent",n.represent),n.mediaMeta=Object(G.a)(x,"mediaMeta",n.mediaMeta),n.contentMode=Object(G.a)(x,"contentMode"),n.allowVR360OrPanorama=Object(G.a)(x,"allowVR360OrPanorama",!0),n.mediaTags=Object(G.a)(x,"mediaTags",n.mediaTags),n.serviceData=Object(G.a)(x,"serviceData",n.serviceData)}return n.origin=Object(G.a)(x,"origin",{ctype:"imageOrigin",srcFrom:"local"}),n.imageLoaded=Object(G.a)(x,"imageLoaded",!1),n.updateConfig(),n._resolveImageFormat(x),n._resolveThumbnailType(),x.contentMode?n._resolveSizeByContentMode():n._resolveContentModeBySize(),!0===n.internalResource&&""===n.path&&n.phase===Z.O.DONE&&n._sentryManager.withScope(function(e){e.setLevel("info"),e.setTag("se-logger","ImageComponentStore"),e.setExtra("Logger","ImageComponentStore.constructor"),e.setExtra("Cause","포토 플랫폼 업로드 리소스로 필수 값인 path 누락"),e.setExtra("Error Data",n.toPlainJSON()),n._sentryManager.captureMessage("[문서 데이터] 이미지 컴포넌트 생성 오류")}),n}W()(t,e);var n=t.prototype;return n._getValidSrc=function(e){var t=oe.a.isImageTag(e)?oe.a.getSrcFromImageTag(e):e;return/^data:image\/[a-zA-Z]*;base64,/.test(t)?t:oe.a.prependProtocol(oe.a.getEncodeUrl(t))},n.setState=function(e){var t=this,n=e.width,i=e.height,r=e.caption;if(r){var o=this._createCaptionTextUnitStore(r,this._config.caption);delete e.caption,this.caption=o}return this.domain=Object(G.a)(e,"domain",this.domain),this.layout=Object(G.a)(e,"layout",this.layout),this.contentMode=Object(G.a)(e,"contentMode",this.contentMode),this.align=Object(G.a)(e,"align",this.align),this.src=Object(G.a)(e,"src",this.src),this.alt=Object(G.a)(e,"alt",this.alt),this.place=Object(G.a)(e,"place",this.place),this.location=this._extractLocation(e),this.path=Object(G.a)(e,"path",this.path),this.fileSize=Object(G.a)(e,"fileSize",this.fileSize),this.fileName=Object(G.a)(e,"fileName",this.fileName),this.internalResource=Object(G.a)(e,"internalResource",this.internalResource),this.link=Object(G.a)(e,"link",this.link),this.widthPercentage=Object(G.a)(e,"widthPercentage",this.widthPercentage),this.format=Object(G.a)(e,"format",this.format),this.displayFormat=Object(G.a)(e,"displayFormat",this.displayFormat),this.represent=Object(G.a)(e,"represent",this.represent),this.origin=Object(G.a)(e,"origin",this.origin),this._resolveImageFormat(e),this._resolveThumbnailType(),n=Object(G.a)(e,"width",this.width),i=Object(G.a)(e,"height",this.height),this._updateSize(n,i),this._resolveWidthAndHeight({width:this.width,height:this.height}),this.originalWidth=Object(G.a)(e,"originalWidth",this.originalWidth),this.originalHeight=Object(G.a)(e,"originalHeight",this.originalHeight),n&&this._resolveContentModeBySize(),this.phase=Object(G.a)(e,"phase",this.phase),!0===this.internalResource&&""===this.path&&this.phase===Z.O.DONE&&this._sentryManager.withScope(function(e){e.setLevel("info"),e.setTag("se-logger","ImageComponentStore"),e.setExtra("Logger","ImageComponentStore.setState"),e.setExtra("Cause","포토 플랫폼 업로드 리소스로 필수 값인 path 누락"),e.setExtra("Error Data",t.toPlainJSON()),t._sentryManager.captureMessage("[문서 데이터] 이미지 교체 오류")}),this},n.resetWidthPercentage=function(){this.widthPercentage=0},n._extractLocation=function(e){var t=Object(G.a)(e,"location",this.location);return t&&t.longitude&&t.latitude?t:null},n.changeContentMode=function(e){var t=Z.D.NORMAL,n=Z.D.ANIMATED;(e!==se.a.NORMAL||[t,n].includes(this.displayFormat))&&(this.contentMode=e,this._resolveSizeByContentMode())},n.updateImageSize=function(e,t){this._updateSize(e,t),this._resolveContentModeBySize()},n.updateServiceData=function(e){this.serviceData=e},n.changeSize=function(e){if([Z.D.NORMAL,Z.D.ANIMATED].includes(this.displayFormat)){var t=e.width,n=e.height,i=e.isReset,r=this.width/this.height,o=t,a=n,s=!0;o?a||(a=t/r):o=n*r,i&&(o=this.originalWidth,a=this.originalHeight,s=!1),this._resolveWidthAndHeight({width:o,height:a,strictMinimumScale:s}),this._resolveContentModeBySize()}},n._updateSize=function(e,t){this.width=Math.floor(e),this.height=Math.max(Math.floor(t),1),this._correctOriginalSize(e,t)},n._correctOriginalSize=function(e,t){var n=this,i=t/e*1e3,r=this.originalHeight/this.originalWidth*1e3;Math.abs(i-r)<5||le(this._infraOriginalImageUrl).then(function(e){var t=e.width,i=e.height;n.originalWidth=t,n.originalHeight=i}).catch(function(){})},n.changeLink=function(e,t){return void 0===e&&(e={}),!0===this.caption.isFocused?this.caption.changeLink(this.checkProtocol(e),t):(this.link=e.value?this.checkProtocol(e).value:null,[this.getStartPoint()])},n.removeImageLink=function(){this.link=null},n.updateProperty=function(e,t){var n=e.contentMode,i=e.link,r=e.resizing,o=x()(e,ce);if(n&&this.changeContentMode(n),r&&this.changeSize(r),Object(Q.a)(this,o),i)return this.changeLink(i,t)},n.changeAlign=function(e){e&&(this.align=e)},n.changeUserLocation=function(e){this.location=e},n.togglePanoramaDisplay=function(){var e=Z.D.PANORAMA,t=Z.D.NORMAL,n=this.displayFormat===e?t:e;this.layout="default",this.contentMode=se.a.FIT,this.displayFormat=n,this._resolveSizeByContentMode(),this._resolveThumbnailType()},n.merge=function(e,t,n){void 0===n&&(n={});var i=Object(V.a)(e),r=n.targetCompOfInsertPoint;if("image"===i.ctype){var o=0===t.offset?[i,this]:[this,i],a=this.caption;r?a=r.caption:this.caption.isEmpty()&&(a=i.caption);var s=ae.a.dropProperty(a.toValidJSON(),"id"),c=this._componentFactory.createComponentWithCompData({ctype:"imageStrip",align:this.align,caption:s});return o.forEach(function(e){e.format!==Z.D.PANORAMA&&e.format!==Z.D.VR360||(e.displayFormat=Z.D.NORMAL,e._resolveThumbnailType())}),c.merge(o,t),{components:[c]}}return{components:[this].concat(e)}},n.updatePlace=function(e){this.place=e},n.completeImageLoad=function(){this.imageLoaded=!0},n.applyEditedImage=function(e){var t=this;Object(te.h)(function(){var n=e.photos[0];if(n.modified){var i=t._refineIntoImageData(n),r=i.fileSize,o=i.height,a=i.path,s=i.src,c=i.width,l=c/o,u=l!==t.originalWidth/t.originalHeight;t.src=s,t.path=a,t.fileSize=r,t.originalWidth=c,t.originalHeight=o,u&&t._updateSize(t.width,t.width/l),t.phase=Z.O.DONE}})},n._refineIntoImageData=function(e){var t=e.key,n=e.fileSize,i=e.height,r=e.width,o=e.domain,a=e.path,s=""+o+a;return{fileSize:n,height:i,width:r,path:a,id:t,src:!1===this.useThumbnail?s:s+"?type="+this.thumbnailTypeMap.normal}},n.getStoreById=function(e){return e===this.id?this:e===this.caption.id?this.caption:null},n.collectStyle=function(e){var t="justify"===this.align||null===this.align?"left":this.align,n={layout:this.layout,contentMode:this.contentMode,size:{width:this.width,height:this.height},link:{value:this.link},align:t,displayFormat:this.displayFormat,mediaTags:this.mediaTags};if(e&&!0===this.caption.isFocused){var i=this.caption.collectStyle(e),r=Object(K.a)(i,function(e){return""===e||null===e});n.caption=r}return n},n.getSelectedAlign=function(){return{align:this.align}},n._resolveWidthAndHeight=function(e){var t=e.width,n=void 0===t?this.width:t,i=e.height,r=void 0===i?this.height:i,o=e.strictMinimumScale,a=void 0!==o&&o,s=this.width/this.height,c=n,l=r;if(this._strictMinimumScale=a,this.strictMinimumScale&&l<this.imageMinimumHeight&&(c=(l=this.imageMinimumHeight)*s),this.strictMinimumScale&&c<this.imageMinimumWidth)l=(c=this.imageMinimumWidth)/s;else if(c>this.documentWidth){var u=this.documentWidth/n;c=this.documentWidth,l=Math.floor(r*u)}this._updateSize(c,l)},n._resolveThumbnailType=function(){var e=this.domain,t=this.path,n=this.internalResource,i=""+e+t;if(t&&!1!==n)if(!1!==this.useThumbnail){var r=this.displayFormat,o=this.thumbnailTypeMap,a=o.normal,s=o.vr360,c=o.panorama,l="?type="+a;r&&"vr360"===r&&s&&(l="?type="+s),r&&"panorama"===r&&c&&(l="?type="+c),this.src=""+i+l}else this.src=i},n._resolveImageFormat=function(e){void 0===e&&(e={});var t=this.path;if("string"!=typeof t||!this.allowVR360OrPanorama)return!1;var n=t.indexOf("PM-1.P-eq")>=0,i=t.indexOf("PM-1.P-pa")>=0,r=this.format;!0===n?r=Z.D.VR360:!0===i&&(r=Z.D.PANORAMA),this.format=r;var o=e.displayFormat;this.displayFormat=o||r},n._getDefaultContentMode=function(e){if(e){var t=this.getLayoutThemeStyle(this.themeStyle)||{};return Object(G.a)(t,"component.contentMode",se.a.FIT)}return se.a.NORMAL},n._validateContentMode=function(e){return e&&Object(Y.a)(se.a,e)},n._resolveContentModeBySize=function(){var e=this.isLonggerThanDocumentWidth(this.width)||this.isWidthEqualToDocumentWidth(this.width),t=this._config.contentMode,n=Object(X.a)(t)?t({width:this.width,height:this.height,largerThanDocumentWidth:e}):t;this._validateContentMode(n)?this.contentMode=n:this.contentMode=this._getDefaultContentMode(e)},n.isWidthEqualToDocumentWidth=function(e,t){return void 0===t&&(t=""),this._isNumber(e)?e===this.documentWidth:!!this._isNumber(t)&&t*this.width/this.height===this.documentWidth},n.isLonggerThanDocumentWidth=function(e,t){return void 0===t&&(t=""),this._isNumber(e)?e>this.documentWidth:!!this._isNumber(t)&&t*this.width/this.height>this.documentWidth},n.isSmallerThanMinimumHeight=function(e,t){return void 0===e&&(e=""),this._isNumber(t)?t<this.imageMinimumHeight:!!this._isNumber(e)&&e*this.height/this.width<this.imageMinimumHeight},n.isSmallerThanMinimumWidth=function(e,t){return void 0===t&&(t=""),this._isNumber(e)?e<this.imageMinimumWidth:!!this._isNumber(t)&&t*this.width/this.height<this.imageMinimumWidth},n._isNumber=function(e){return"number"==typeof e},n.queryDragAndDrop=function(e){var t=e.type,n=e.items,i=e.dropPoint,r=e.insertDirection,o=e.itemIds,a=e.isOnEdge;if(o.includes(this.id))return null;var s=Object(V.a)(n),c=this._configAgent.get("plugins.excludeComponents")||[];return"external-file"===t||n.length>1||s&&"image"!==s.ctype||a||c.includes("imageStrip")?{insertPoint:i,insertCommand:r===Z.x.BOTTOM?"append":"prepend",direction:r}:{insertPoint:i,insertCommand:"query",direction:0===i.offset?Z.x.LEFT:Z.x.RIGHT}},n._shouldUploadImage=function(){return this.src&&!this.path},n.isLibraryComponent=function(){return!1===this._shouldUploadImage()&&!0===this.internalResource},n.getLibraryItemData=function(){var e=this.toValidJSON();return e.widthPercentage=0,e.caption=null,{id:this.id,key:""+this.domain+this.path,thumbnail:this.src,data:e}},n.getRepresentativeImageURL=function(){return""+this.domain+this.path},n.getRepresentativeInnerData=function(){return this.toValidJSON()},n._resolveComponentPhase=function(e){if(!Object(G.a)(e,"internalResource"))return Z.O.DONE;var t=Object(G.a)(e,"src"),n=Object(G.a)(e,"width",e.originalWidth),i=Object(G.a)(e,"height",e.originalHeight),r=Object(G.a)(e,"path",""),o=Object(G.a)(e,"phase",Z.O.EMPTY);return t&&n&&i&&r?Z.O.DONE:o},n._createCaptionTextUnitStore=function(e,t){var n={state:e,config:Object(z.a)({},t,{attributes:{cursor:"trapped",selection:"trapped",insertion:"append",drop:"only-text",paste:"only-text",lineBreak:{enter:"move-to-next-text",shiftEnter:"line-break-in-paragraph"},erasure:"trapped-text"},maxLength:1/0,filterTextStyle:{fontFamily:ne.b.NOT_ALLOWED,fontSizeCode:ne.b.NOT_ALLOWED,fontColor:ne.b.NOT_ALLOWED,backgroundColor:ne.b.NOT_ALLOWED,italic:ne.b.NOT_ALLOWED,underline:ne.b.NOT_ALLOWED,strikeThrough:ne.b.NOT_ALLOWED,subscript:ne.b.NOT_ALLOWED,superscript:ne.b.NOT_ALLOWED,dropCap:ne.b.NOT_ALLOWED,list:ne.b.NOT_ALLOWED}})},i=Object(G.a)(t,"textStyle",{}),r=n.config.filterTextStyle;return n.config.filterTextStyle=Object(J.a)(r,i),new ie.a(n)},n._resolveSizeByContentMode=function(){var e=this.documentWidth/this.width,t=se.a.NORMAL,n=se.a.FIT,i=se.a.EXTEND,r=se.a.PAGEFULL,o=Z.D.NORMAL,a=Z.D.ANIMATED;if(this.contentMode===t&&[o,a].includes(this.displayFormat))if(this.width<this.documentWidth)this._updateSize(this.width,this.height);else if(this.width>this.documentWidth||this.originalWidth>=this.documentWidth){var s=.75*this.documentWidth,c=this.height*e*.75;this._updateSize(s,c)}else this.originalWidth<this.documentWidth&&this._resolveWidthAndHeight({width:this.originalWidth,height:this.originalHeight});else if([n,i,r].includes(this.contentMode)){var l=Math.floor(this.height*e);this._updateSize(this.documentWidth,l)}},n.updateConfig=function(){e.prototype.updateConfig.call(this),this.representativeEnabled=!1!==this._configAgent.get("productConfig.representativeEnabled")},n.isRepresentativeImage=function(){return e.prototype.isRepresentativeImage.call(this)&&!this.isSmallerThanMinimumSize(this.width,this.height)},n.isSmallerThanMinimumSize=function(e,t){return this.isSmallerThanMinimumWidth(e,t)||this.isSmallerThanMinimumHeight(e,t)},n.getMediaTagData=function(){var e=this.mediaTags?this.mediaTags:[];return te.f.toJS(e)},n.updateMediaTag=function(e){this.mediaTags=e},n.removeMediaTag=function(){this.mediaTags=null},n.toPlainJSON=function(e,t){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),this._isOnCaption(e,t)?{ctype:re.a.TEXT,value:this.caption.toPlainJSON(e,t)}:{id:this.id,ctype:this.ctype,layout:this.layout,contentMode:this.contentMode,align:this.align,src:this.src,width:this.width,height:this.height,alt:this.alt,caption:this.caption.toPlainJSON(),place:te.f.toJS(this.place),location:te.f.toJS(this.location),path:this.path,internalResource:this.internalResource,fileSize:this.fileSize,fileName:this.fileName,link:this.link,widthPercentage:this.widthPercentage,format:this.format,displayFormat:this.displayFormat,mediaTags:te.f.toJS(this.mediaTags),phase:this.phase,represent:this.represent,mediaMeta:te.f.toJS(this.mediaMeta),origin:te.f.toJS(this.origin),originalWidth:this.originalWidth,originalHeight:this.originalHeight,serviceData:this.serviceData,domain:this.domain}},R()(t,[{key:"editable",get:function(){return!1!==this._configAgent.get("modules.photoEditor")&&!1!==this.internalResource&&this.displayFormat===Z.D.NORMAL}},{key:"strictMinimumScale",get:function(){return!0===this._configAgent.get("editorInfo.strictMinimumScale")||this._strictMinimumScale}},{key:"showLocationButton",get:function(){return this.enableLocation}},{key:"isLoaded",get:function(){return this.phase===Z.O.LOADED}},{key:"isUploaded",get:function(){var e=this.phase;return e===Z.O.LOADED||e===Z.O.DONE}},{key:"_infraOriginalImageUrl",get:function(){return this.path?""+this.domain+this.path:this.src}},{key:"imageTagEnabled",get:function(){return Object(H.a)(this.imageTag)}},{key:"translationEnabled",get:function(){return"none"!==this.caption.selection}}]),t}(Object(Z.Z)(Object(Z.bb)(Z.h))),r=F()(i.prototype,"layout",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),o=F()(i.prototype,"contentMode",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return se.a.FIT}}),a=F()(i.prototype,"align",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=F()(i.prototype,"src",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=F()(i.prototype,"width",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=F()(i.prototype,"height",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=F()(i.prototype,"originalWidth",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=F()(i.prototype,"originalHeight",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=F()(i.prototype,"alt",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=F()(i.prototype,"caption",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=F()(i.prototype,"place",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=F()(i.prototype,"location",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=F()(i.prototype,"path",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=F()(i.prototype,"internalResource",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=F()(i.prototype,"fileSize",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=F()(i.prototype,"link",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=F()(i.prototype,"widthPercentage",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=F()(i.prototype,"format",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.D.NORMAL}}),C=F()(i.prototype,"displayFormat",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.D.NORMAL}}),I=F()(i.prototype,"phase",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.O.EMPTY}}),O=F()(i.prototype,"represent",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=F()(i.prototype,"mediaMeta",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=F()(i.prototype,"origin",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=F()(i.prototype,"imageLoaded",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=F()(i.prototype,"mediaTags",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=F()(i.prototype,"representativeEnabled",[te.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F()(i.prototype,"showLocationButton",[te.e],Object.getOwnPropertyDescriptor(i.prototype,"showLocationButton"),i.prototype),F()(i.prototype,"isLoaded",[te.e],Object.getOwnPropertyDescriptor(i.prototype,"isLoaded"),i.prototype),F()(i.prototype,"isUploaded",[te.e],Object.getOwnPropertyDescriptor(i.prototype,"isUploaded"),i.prototype),F()(i.prototype,"_infraOriginalImageUrl",[te.e],Object.getOwnPropertyDescriptor(i.prototype,"_infraOriginalImageUrl"),i.prototype),i);ue.ctype="image",ue.schema={id:$.a.string.isRequired,ctype:$.a.string.isRequired,layout:$.a.string.isRequired,align:$.a.string,src:$.a.string.isRequired,internalResource:$.a.bool,represent:$.a.bool.isRequired,path:$.a.string,domain:$.a.string,fileSize:$.a.number.isRequired,width:$.a.number.isRequired,widthPercentage:$.a.number,height:$.a.number.isRequired,originalWidth:$.a.number,originalHeight:$.a.number,fileName:$.a.string,caption:$.a.captionTextUnit,location:$.a.shape(ee.g),link:$.a.string,format:$.a.string.isRequired,displayFormat:$.a.string.isRequired,imageLoaded:$.a.bool,mediaTags:$.a.arrayOf($.a.shape({ctype:$.a.string.isRequired,point:$.a.shape(ee.f),links:$.a.arrayOf($.a.shape({ctype:$.a.string.isRequired,url:$.a.string.isRequired,title:$.a.string.isRequired,iconType:$.a.string.isRequired,thumbnail:$.a.shape(ee.h).isRequired,description:$.a.string.isRequired,categoryId:$.a.string.isRequired,provider:$.a.string.isRequired,meta:$.a.object}))})),contentMode:$.a.string.isRequired,place:$.a.shape(ee.e),mediaMeta:$.a.shape(ee.c),origin:$.a.shape(ee.b).isRequired,serviceData:$.a.object},t.a=ue},445:function(e,t,n){"use strict";var i,r=n(12),o=n.n(r),a=n(18),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(51),h=n(49),g=n(52),f=(i=function(e){function t(){var t;return(t=e.call(this)||this)._translationLayerService=d.W.get("translationLayerService"),t._editingService=d.W.get("editingService"),t._toastLayerService=d.W.get("toastLayerService"),t}l()(t,e);var n=t.prototype;return n.applyToDoc=function(e){this._editingService.writeTextWithSoftLineBreak(e),this._translationLayerService.close()},n.translate=function(e,t,n){this._translationLayerService.translate(e,t,n)},n.close=function(){this._translationLayerService.close()},n.changeLangCode=function(){var e=s()(o.a.mark(function e(t){var n,i,r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.code,i=t.sourceLayer,r=t.fromCode,a=t.toCode,!i){e.next=6;break}return e.next=4,this._translationLayerService.changeSourceLangCode({code:n,fromCode:r,toCode:a});case 4:e.next=8;break;case 6:return e.next=8,this._translationLayerService.changeTargetLangCode({code:n,fromCode:r,toCode:a});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.warningMessage=function(e){this._toastLayerService.warningMessage(e)},n.resetTextOvered=function(){this._translationLayerService.resetTextOvered()},t}(d.m),p()(i.prototype,"applyToDoc",[h.d,g.history],Object.getOwnPropertyDescriptor(i.prototype,"applyToDoc"),i.prototype),p()(i.prototype,"translate",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"translate"),i.prototype),p()(i.prototype,"changeLangCode",[h.d],Object.getOwnPropertyDescriptor(i.prototype,"changeLangCode"),i.prototype),i);t.a=f},446:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p=n(60),d=n.n(p),h=n(1),g=n.n(h),f=n(58),m=n.n(f),y=n(0),v=n.n(y),_=n(50),b=n.n(_),S=(n(61),n(51)),C=n(49),I=n(783),O=(i=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),p=0;p<n;p++)i[p]=arguments[p];return t=e.call.apply(e,[this].concat(i))||this,d()(t,"opened",r,m()(t)),d()(t,"_fromCode",o,m()(t)),d()(t,"_toCode",a,m()(t)),d()(t,"translatedText",s,m()(t)),d()(t,"loading",c,m()(t)),d()(t,"unknownLangCode",l,m()(t)),d()(t,"textOvered",u,m()(t)),t.MAX_LENGTH=5e3,t._detectionMode=!0,t._sourceText="",t}v()(t,e);var n=t.prototype;return n.open=function(){this.opened=!0},n.close=function(){this.opened=!1,this.unknownLangCode=!1},n.update=function(e,t,n,i){this.translatedText=e,this._sourceText=t,this._toCode=n,this._fromCode=i},n.setDetectionMode=function(e){this._detectionMode=e},g()(t,[{key:"sourceText",get:function(){return this._sourceText}},{key:"fromCode",get:function(){return this._fromCode}},{key:"toCode",get:function(){return this._toCode}},{key:"detectionMode",get:function(){return this._detectionMode}}]),t}(S.w),r=b()(i.prototype,"opened",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=b()(i.prototype,"_fromCode",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.b}}),a=b()(i.prototype,"_toCode",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.c}}),s=b()(i.prototype,"translatedText",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b()(i.prototype,"loading",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=b()(i.prototype,"unknownLangCode",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=b()(i.prototype,"textOvered",[C.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);t.a=O},447:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i={DEFAULT:"default",CUSTOM:"custom"},r={INSERT:"insert",EDIT:"edit"}},448:function(e,t,n){"use strict";var i,r,o,a=n(17),s=n.n(a),c=n(60),l=n.n(c),u=n(1),p=n.n(u),d=n(58),h=n.n(d),g=n(0),f=n.n(g),m=n(50),y=n.n(m),v=(n(61),n(70)),_=n(69),b=n(78),S=n(16),C=n(102),I=n(51),O=n(49),T=n(1079),L=n(214),E=n(1365),P=["layout","link"],w=(i=function(e){f()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).isSelectable=!1,n.attributes={cursor:null,selection:null,insertion:"text",drop:"text",paste:"text",erasure:"text"},l()(n,"layout",r,h()(n)),l()(n,"value",o,h()(n));var i=t,a=i.state,s=void 0===a?{}:a,c=i.config,u=void 0===c?{}:c;n.attributes=Object(v.a)(n.attributes,u.attributes),n._configAgent=I.W.get("configAgent");var p=Object(_.a)({},u.value,{filterTextStyle:{fontSizeCode:L.b.conditionalAllowed(["fs11","fs13","fs15","fs16","fs19","fs24","fs28","fs30","fs34","fs38"])},attributes:{selection:"text",insertion:"text",drop:"text",paste:"text",lineBreak:{enter:"line-break-in-paragraph",shiftEnter:"line-break-in-paragraph"},erasure:"text"}}),d=s.value||n.value,g=Object(S.a)(u,"value.textStyle",{}),f=p.filterTextStyle;return p.filterTextStyle=Object(v.a)(f,g),n.value=new E.a({state:d,config:p}),n}return t.toPlainJSON=function(e,t){return void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint()),{id:this.id,ctype:this.ctype,layout:this.layout,value:this.value.toPlainJSON(e,t)}},t.getStoreById=function(e){return e===this.id?this:e===this.value.id?this.value:null},t.changeLink=function(e,t){var n=this.refineSelection(t);return this.getText().changeLink(this.checkProtocol(e),n)},t.changeLayout=function(e){this.layout=e,this.updateTheme()},t.updateProperty=function(e,t){var n=e.layout,i=e.link,r=s()(e,P);if(n&&this.changeLayout(n),Object(C.a)(this,r),i)return this.changeLink(i,t)},t.applyUserDefinedStyle=function(e){if(this.getText().isEmpty()){this.updateUserDefinedStyle(e);var t=e.align;t&&(this.align=t)}},t.updateUserDefinedStyle=function(e){var t=this.getText(),n={start:t.getStartPoint(),end:t.getEndPoint()};this.updateStyles(e,n)},t.collectStyle=function(e){var t=this.getText().collectStyle(e);return Object(_.a)({textFormat:this.ctype,layout:this.layout,textLayout:this.layout,hasInlineImage:this.hasInlineImageInParagraph(e),isStartWithEmoji:this.hasParagraphStartsWithEmoji(e)},t)},t.hasDropCapInParagraph=function(e){return this.getText().hasDropCapInParagraph(e)},t.hasInlineImageOnly=function(){return this.getText().hasInlineImageOnly()},t.hasInlineImageInParagraph=function(e){return this.getText().hasInlineImageInParagraph(e)},t.isLibraryComponent=function(){return this.getText().isLibraryComponent()},t.getLibraryItemData=function(){return this.getText().getLibraryItemData({compId:this.id})},t.hasParagraphStartsWithEmoji=function(e){return this.getText().hasParagraphStartsWithEmoji(e)},t.setRepresentativeImage=function(e){var t=e.paraId,n=e.nodeId;this.getText().setRepresentativeImage(t,n)},t.updateConfig=function(){this.getText().updateConfig()},t.releaseRepresentativeImage=function(e){this.getText().releaseRepresentativeImage(e)},t.hasRepresentativeImage=function(){return this.getText().hasRepresentativeImage()},t.isRepresentativeImage=function(){return this.getText().isRepresentativeImage()},t.getRepresentativeId=function(){var e=this,t=this.getText().getRepresentativeId();return Object(b.a)(t,function(t){return""+e.id+t})},t.getRepresentativeInnerData=function(){return this.getText().getRepresentativeInnerData()},t.setAvailableContentLength=function(e){this.getText().setAvailableContentLength(e)},t.resetAvailableContentLength=function(){this.getText().resetAvailableContentLength()},t.isAvailableForDropcap=function(e){return!this.hasInlineImageInParagraph(e)&&!this.hasParagraphStartsWithEmoji(e)&&!this.getText().isCenterOrRightAlign(e)},t.canBeListBySpace=function(e){return this.value.canBeListBySpace(e)},t.convertToList=function(e){return this.value.convertToList(e)},p()(n,[{key:"textLength",get:function(){return this.getText().textLength}},{key:"translationEnabled",get:function(){return"none"!==this.value.selection}}]),n}(Object(I.Z)(I.j)),r=y()(i.prototype,"layout",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),o=y()(i.prototype,"value",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i);w.ctype="text",w.schema={id:T.a.string.isRequired,layout:T.a.string.isRequired,ctype:T.a.string.isRequired,value:T.a.textUnit.isRequired},t.a=w},450:function(e,t,n){"use strict";var i,r=n(56),o=n.n(r),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(52),p=n(49),d=n(376),h=n(51),g=n(88),f=n(825),m=n(309),y=n(790),v=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this)._labelMemoized=!1,n}s()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.store,n=e.parentProps,i=e.i18n,r=e.useCase,o=this._resolveComponentSectionStyle();return this._memoizeLabel(),p.b.createElement(g.a,{parentProps:n,blockWrapperProps:t,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext,style:o},this._renderImageUnit(),p.b.createElement(m.a,{store:t,useCase:r,i18n:i,onLimitTextLength:this._handleLimitTextLength}),this._renderBtnLocation())},n._resolveComponentSectionStyle=function(){var e=this.props.store,t=e.width,n=e.contentMode,i=this._isBiggerThanDocument(t),r={};return n===h.r.NORMAL&&!1===i&&t>0&&(r.maxWidth=t+"px"),r},n._renderImageUnit=function(){var e=this.props,t=e.store,n=e.i18n,i=e.children,r=e.useCase,a=e.resizable,s=e.useMediaTag,c=t.representativeEnabled,l=o()({},this.props.additionalOption,{showRepresentative:!!c&&t.isRepresentativeImage()});return p.b.createElement(f.a,{onDoubleClick:this._handleDblClickImage,onClickRepresentative:this._handleClickRepresentative,onToggleVR360Display:this._handleToggleVR360Display,onCompleteImage:this._handleCompleteImage,additionalOption:l,labelLink:this._labelLink,labelThumbnail:this._labelThumbnail,labelDeleteImage:this._labelDeleteImage,labelThisIs360VR:this._labelThisIs360VR,labelUse360vr:this._labelUse360vr,resizable:a,useMediaTag:s,i18n:n,store:t,useCase:r},i)},n._renderBtnLocation=function(){var e=this.props,t=e.additionalOption.showLocationButton,n=e.store.place,i=n&&t;return p.b.createElement(y.a,{enabled:i,locationInfo:n,onMouseDown:this._handleMouseDownLocation,onClick:this._handleClickLocation})},n._isBiggerThanDocument=function(e){return e>=this.props.store.documentWidth},n._memoizeLabel=function(){var e=this.props.i18n;!1===this._labelMemoized&&(this._labelLink=e("imageUnit:label_link"),this._labelThumbnail=e("imageUnit:label_thumbnail"),this._labelDeleteImage=e("imageUnit:label_delete_image"),this._labelThisIs360VR=e("imageUnit:label_this_is_360vr"),this._labelUse360vr=e("imageUnit:label_use_360vr"),this._labelMemoized=!0)},n._handleDblClickImage=function(){var e=p.f.toJS(this.props.store);(0,this.props.onDblClickImage)(e)},n._handleToggleVR360Display=function(){(0,this.props.onClickPanoramaDisplay)()},n._handleClickRepresentative=function(e){(0,this.props.onClickRepresentative)(e)},n._handleMouseDownLocation=function(e){e.nativeEvent.stopImmediatePropagation()},n._handleClickLocation=function(){(0,this.props.onClickLocation)()},n._handleCompleteImage=function(){(0,this.props.onCompleteImage)()},n._handleLimitTextLength=function(){var e=this.props.onLimitTextLength;e&&e()},n._handleMoveToPrev=function(){this.props.onMoveToPrev()},n._handleMoveToNext=function(){this.props.onMoveToNext()},t}(p.b.Component),l()(i.prototype,"_renderBtnLocation",[u.muteIfReadOnly],Object.getOwnPropertyDescriptor(i.prototype,"_renderBtnLocation"),i.prototype),l()(i.prototype,"_handleDblClickImage",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleDblClickImage"),i.prototype),l()(i.prototype,"_handleToggleVR360Display",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleToggleVR360Display"),i.prototype),l()(i.prototype,"_handleClickRepresentative",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickRepresentative"),i.prototype),l()(i.prototype,"_handleMouseDownLocation",[u.autobind,u.muteIfReadOnly],Object.getOwnPropertyDescriptor(i.prototype,"_handleMouseDownLocation"),i.prototype),l()(i.prototype,"_handleClickLocation",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickLocation"),i.prototype),l()(i.prototype,"_handleCompleteImage",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleCompleteImage"),i.prototype),l()(i.prototype,"_handleLimitTextLength",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleLimitTextLength"),i.prototype),l()(i.prototype,"_handleMoveToPrev",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleMoveToPrev"),i.prototype),l()(i.prototype,"_handleMoveToNext",[u.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleMoveToNext"),i.prototype),i);v.defaultProps={config:{},blockSelected:!1,onCompleteImage:function(){},onMoveToNext:function(){},onMoveToPrev:function(){},additionalOption:{backgroundImage:!1,hasCoverLayer:!1},resizable:!1,useMediaTag:!1},v.propTypes={parentProps:p.a.instanceOf(h.b),store:p.a.object.isRequired,useCase:p.a.instanceOf(h.c),children:p.a.oneOfType([p.a.element,p.a.array]),i18n:p.a.func,config:p.a.object,onDblClickImage:p.a.func,onClickPanoramaDisplay:p.a.func,onClickRepresentative:p.a.func,onClickLocation:p.a.func,onCompleteImage:p.a.func,onLimitTextLength:p.a.func,onMoveToNext:p.a.func,onMoveToPrev:p.a.func,additionalOption:p.a.object,resizable:p.a.bool,useMediaTag:p.a.bool},t.a=Object(d.b)(v)},451:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t}(n(51).c);t.a=o},452:function(e,t,n){"use strict";var i,r,o,a=n(17),s=n.n(a),c=n(60),l=n.n(c),u=n(58),p=n.n(u),d=n(0),h=n.n(d),g=n(50),f=n.n(g),m=(n(61),n(16)),y=n(70),v=n(102),_=n(51),b=n(1079),S=n(49),C=n(310),I=["layout"],O=(i=function(e){h()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},l()(n,"layout",r,p()(n)),l()(n,"align",o,p()(n));var i=t,a=i.state,s=void 0===a?{}:a,c=i.config,u=void 0===c?{}:c,d=_.W.get("configAgent").get("productConfig.horizontalLine.layouts");return n.layout=Object(m.a)(s,"layout",d&&d[0]||n.layout),n.align=Object(m.a)(s,"align",n.align),n.attributes=Object(y.a)(n.attributes,u.attributes),n}return t.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,layout:this.layout,align:this.align}},t.updateProperty=function(e){var t=e.layout,n=s()(e,I);t&&(this.layout=t),Object(v.a)(this,n)},t.collectStyle=function(){var e="justify"===this.align||null===this.align?"left":this.align;return{layout:this.layout,align:e}},t.rotationLayout=function(){var e=Object.keys(C.a).map(function(e){return e.toLowerCase()}),t=e[e.indexOf(this.layout)+1];this.layout=t||e[0]},n}(_.g),r=f()(i.prototype,"layout",[S.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),o=f()(i.prototype,"align",[S.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i);O.ctype="horizontalLine",O.schema={id:b.a.string.isRequired,layout:b.a.string.isRequired,align:b.a.string,ctype:b.a.string.isRequired},t.a=O},453:function(e,t,n){"use strict";var i=n(435);t.a=i.a},454:function(e,t,n){"use strict";var i,r,o,a,s,c=n(17),l=n.n(c),u=n(60),p=n.n(u),d=n(58),h=n.n(d),g=n(0),f=n.n(g),m=n(50),y=n.n(m),v=(n(61),n(16)),_=n(70),b=n(102),S=n(51),C=n(1079),I=n(1313),O=n(49),T=n(455),L=["layout"],E=(i=function(e){f()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},p()(n,"layout",r,h()(n)),p()(n,"align",o,h()(n)),p()(n,"messages",a,h()(n)),p()(n,"writers",s,h()(n));var i=t,c=i.state,l=void 0===c?{}:c,u=i.config,d=void 0===u?{}:u,g=S.W.get("configAgent").get("productConfig.chat.layouts");return n.layout=Object(v.a)(l,"layout",g&&g[0]||n.layout),n.align=Object(v.a)(l,"align",n.align),n.writers=Object(v.a)(l,"writers",n.writers),n.messages=Object(v.a)(l,"messages",n.messages),n.attributes=Object(_.a)(n.attributes,d.attributes),n}return t.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,layout:this.layout,align:this.align,messages:this.messages,writers:this.writers}},t.updateChat=function(e){var t=e.messages,n=e.writers;this.messages=t,this.writers=n},t.updateProperty=function(e){var t=e.layout,n=l()(e,L);t&&(this.layout=t),Object(b.a)(this,n)},t.collectStyle=function(){return{layout:this.layout,align:this.align||T.a.LEFT}},n}(S.g),r=y()(i.prototype,"layout",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.b.DEFAULT}}),o=y()(i.prototype,"align",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=y()(i.prototype,"messages",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=y()(i.prototype,"writers",[O.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i);E.ctype="chat",E.schema={id:C.a.string.isRequired,layout:C.a.string.isRequired,align:C.a.string,ctype:C.a.string.isRequired,writers:C.a.array.isRequired,messages:C.a.arrayOf(C.a.shape(I.a)).isRequired},t.a=E},455:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i={LEFT:"left",CENTER:"center",RIGHT:"right"},r={DEFAULT:"default"}},456:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t}(n(51).c);t.a=o},457:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m,y,v,_,b,S,C,I,O=n(17),T=n.n(O),L=n(60),E=n.n(L),P=n(1),w=n.n(P),k=n(58),x=n.n(k),D=n(0),A=n.n(D),j=n(50),R=n.n(j),N=(n(61),n(70)),M=n(16),B=n(102),W=n(20),U=n(112),F=n(51),z=n(1079),V=n(49),G=n(458),H=n(247),q=["contentMode"],J=(i=function(e){A()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},n.documentWidth=null,E()(n,"layout",r,x()(n)),E()(n,"contentMode",o,x()(n)),E()(n,"align",a,x()(n)),E()(n,"type",s,x()(n)),E()(n,"version",c,x()(n)),E()(n,"title",l,x()(n)),E()(n,"description",u,x()(n)),E()(n,"originalWidth",p,x()(n)),E()(n,"originalHeight",d,x()(n)),E()(n,"html",h,x()(n)),E()(n,"authorName",g,x()(n)),E()(n,"authorUrl",f,x()(n)),E()(n,"providerName",m,x()(n)),E()(n,"providerUrl",y,x()(n)),E()(n,"thumbnailUrl",v,x()(n)),E()(n,"thumbnailWidth",_,x()(n)),E()(n,"thumbnailHeight",b,x()(n)),E()(n,"inputUrl",S,x()(n)),E()(n,"cacheAge",C,x()(n)),E()(n,"viewMode",I,x()(n)),n.oembedSign="";var i=t,O=i.state,T=void 0===O?{}:O,L=i.config,P=void 0===L?{}:L;return n._configAgent=F.W.get("configAgent"),n.documentWidth=n._configAgent.get("productConfig.documentWidth"),n.attributes=Object(N.a)(n.attributes,P.attributes),n.type=Object(M.a)(T,"type",n.type),n.layout=Object(M.a)(T,"layout",n.layout),n.align=Object(M.a)(T,"align",n.align),n.version=Object(M.a)(T,"version",n.version),n.title=Object(M.a)(T,"title",n.title),n.description=Object(M.a)(T,"description",n.description),n.originalWidth=Object(M.a)(T,"originalWidth",n.originalWidth),n.originalHeight=Object(M.a)(T,"originalHeight",n.originalHeight),n.html=Object(M.a)(T,"html",n.html),n.authorName=Object(M.a)(T,"authorName",n.authorName),n.authorUrl=Object(M.a)(T,"authorUrl",n.authorUrl),n.providerName=Object(M.a)(T,"providerName",n.providerName),n.providerUrl=Object(M.a)(T,"providerUrl",n.providerUrl),n.thumbnailUrl=Object(M.a)(T,"thumbnailUrl",n.thumbnailUrl),n.thumbnailWidth=Object(M.a)(T,"thumbnailWidth",n.thumbnailWidth),n.thumbnailHeight=Object(M.a)(T,"thumbnailHeight",n.thumbnailHeight),n.inputUrl=Object(M.a)(T,"inputUrl",n.inputUrl),n.contentMode=Object(M.a)(T,"contentMode",n._getDefaultContentMode(P)),n.config=P,n.oembedSign=T.oembedSign||n.oembedSign,n}return t.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,layout:this.layout,contentMode:this.contentMode,align:this.align,type:this.type,version:this.version,title:this.title,description:this.description,originalWidth:this.originalWidth,originalHeight:this.originalHeight,html:this.html,authorName:this.authorName,authorUrl:this.authorUrl,providerName:this.providerName,providerUrl:this.providerUrl,thumbnailUrl:this.thumbnailUrl,thumbnailWidth:this.thumbnailWidth,thumbnailHeight:this.thumbnailHeight,inputUrl:this.inputUrl,cacheAge:this.cacheAge,viewMode:this.viewMode,oembedSign:this.oembedSign}},t._getDefaultContentMode=function(e){var t=e.contentMode,n=Object(W.a)(t)?t():t;if(this._validateContentMode(n))return n;var i=this.getLayoutThemeStyle(this.themeStyle)||{},r=Object(M.a)(i,"component.contentMode");return r||(this.type===H.c.VIDEO?H.a.FIT:H.a.NORMAL)},t._validateContentMode=function(e){return e&&Object(U.a)(H.a,e)},t.changeContentMode=function(e){this.contentMode=e},t.changeViewMode=function(e){this.viewMode=e},t.updateProperty=function(e){var t=e.contentMode,n=T()(e,q);t&&this.changeContentMode(t),Object(B.a)(this,n)},t.collectStyle=function(){var e="justify"===this.align||null===this.align?"left":this.align;return{id:this.id,layout:this.layout,contentMode:this.contentMode,align:e}},t.updateSign=function(e){var t=e.oembedSign,n=e.authorUrl,i=e.thumbnailUrl,r=e.html;this.oembedSign=t,this.authorUrl=n,this.thumbnailUrl=i,this.html=r},t.getSelectedAlign=function(){return{align:this.align}},w()(n,[{key:"emptySign",get:function(){return!this.oembedSign}},{key:"isScriptRenderType",get:function(){return/<script.*<\/script>|<script.*>/gi.test(this.html)}},{key:"isOembedNotSupported",get:function(){return G.a.isOembedNotSupported}}]),n}(F.g),r=R()(i.prototype,"layout",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.b.DEFAULT}}),o=R()(i.prototype,"contentMode",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.a.NORMAL}}),a=R()(i.prototype,"align",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=R()(i.prototype,"type",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=R()(i.prototype,"version",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"1.0"}}),l=R()(i.prototype,"title",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=R()(i.prototype,"description",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=R()(i.prototype,"originalWidth",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=R()(i.prototype,"originalHeight",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=R()(i.prototype,"html",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=R()(i.prototype,"authorName",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=R()(i.prototype,"authorUrl",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=R()(i.prototype,"providerName",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=R()(i.prototype,"providerUrl",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=R()(i.prototype,"thumbnailUrl",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_=R()(i.prototype,"thumbnailWidth",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=R()(i.prototype,"thumbnailHeight",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=R()(i.prototype,"inputUrl",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=R()(i.prototype,"cacheAge",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=R()(i.prototype,"viewMode",[V.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.U.VIEW_MODE_PC}}),R()(i.prototype,"isScriptRenderType",[V.e],Object.getOwnPropertyDescriptor(i.prototype,"isScriptRenderType"),i.prototype),R()(i.prototype,"isOembedNotSupported",[V.e],Object.getOwnPropertyDescriptor(i.prototype,"isOembedNotSupported"),i.prototype),i);J.ctype="oembed",J.schema={id:z.a.string.isRequired,ctype:z.a.string.isRequired,layout:z.a.string.isRequired,align:z.a.string,type:z.a.string.isRequired,version:z.a.string.isRequired,html:z.a.string.isRequired,originalWidth:z.a.number,originalHeight:z.a.number,authorName:z.a.string,authorUrl:z.a.string,cacheAge:z.a.number,providerName:z.a.string,providerUrl:z.a.string.isRequired,thumbnailUrl:z.a.string,thumbnailWidth:z.a.number,thumbnailHeight:z.a.number,title:z.a.string.isRequired,description:z.a.string,inputUrl:z.a.string.isRequired,contentMode:z.a.string.isRequired,oembedSign:z.a.string},t.a=J},458:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(56),r=n.n(i),o=n(1),a=n.n(o),s=n(97),c=n(231),l=n(70),u=n(122),p=n(16),d=n(51),h=function(){function e(e){this.config=e,this._sentryManager=d.W.get("sentryManager")}var t=e.prototype;return t._fetch=function(e,t){return s.b.get(this.config.url,{params:{url:e},options:{withCredentials:!0,useCache:!0},success:t,error:function(){return null}})},t.fetchByCtype=function(e,t){return this._fetch(e,this._convertByCtype.bind(this,{url:e,ctype:t}))},t._convertByCtype=function(e,t){var n=e.url,i=e.ctype,r=t.oembed,o=t.oglink,a=t.oembedSign,s=t.oglinkSign;return this._hasError(t,n)?null:"oembed"===i&&r?Object(l.a)({ctype:"oembed",oembedSign:a},this._convertOembed(r,o)):o?Object(l.a)({ctype:"oglink",oglinkSign:s,thumbnail:this._convertImage(o.summary.image)},this._convertOglink(o)):null},t.fetch=function(e){return this._fetch(e,this._convert.bind(this,{url:e}))},t._hasError=function(e,t){var n=this,i=Object(p.a)(e,"oglink.error");return!!i&&(this._sentryManager.withScope(function(e){e.setLevel("error"),e.setTag("se-logger","CrawlerRepository"),e.setExtra("Logger","CrawlerRepository._hasError"),e.setExtra("Cause","Crawler API 오류"),e.setExtra("Url",t),e.setExtra("Error Code",i.code),e.setExtra("Error Message",i.message),n._sentryManager.captureMessage("[크롤링 API] 응답 데이터 오류 - "+i.message)}),!0)},t._convert=function(t,n){var i=t.url,r=n.oembed,o=n.image,a=n.oglink,s=n.oembedSign,c=n.oglinkSign,u=r&&!1===e.isOembedNotSupported;return this._hasError(n,i)?null:r&&u?Object(l.a)({ctype:"oembed",oembedSign:s},this._convertOembed(r,a)):o?Object(l.a)({ctype:"image",internalResource:!1,origin:{ctype:"imageOrigin",srcFrom:"copyUrl"}},o):a?Object(l.a)({ctype:"oglink",oglinkSign:c,thumbnail:this._convertImage(a.summary.image)},this._convertOglink(a)):null},t._convertOembed=function(e,t){var n=this._getOgAlternateInfo(e,t.summary),i=n.providerUrl,o=n.title,a=n.description;return r()({},e,{providerUrl:i,title:o,description:a,originalWidth:e.width,originalHeight:e.height,inputUrl:t.url})},t._getOgAlternateInfo=function(e,t){var n=e.providerUrl,i=e.title,r=t.description?t.description.replace(/\u21b5|\n/gi,"\n"):"";return{providerUrl:n||t.domain,title:i||t.title,description:r}},t._convertOglink=function(e){var t=e.summary;("video"===t.type&&(t.video=!0),t.site&&""!==t.site)&&("moment"===t.site.toLowerCase()&&(t.layout="moment"));return t.isAffiliate=this._isAffiliate(e),t.link=e.url,Object(u.a)(t,["allImages","type"])},t._isAffiliate=function(e){return e.predefinedUrlPattern&&"shoppingAffiliate"===e.predefinedUrlPattern},t._convertImage=function(e){return e&&e.url?{ctype:"thumbnail",src:e.url,width:e.width,height:e.height}:null},a()(e,null,[{key:"isOembedNotSupported",get:function(){return c.a.IS_IE}}]),e}()},459:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(49),a=n(555),s=n(85),c=n(121),l=function(e){function t(){return e.apply(this,arguments)||this}r()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.title,n=e.className,i=e.onLoad,r=e.onError;return o.b.createElement(s.b,{className:n,src:this._makeThumbnailSource(),alt:a.a.restoreSpecialChar(t),onLoad:i,onError:r})},n._makeThumbnailSource=function(){var e=this.props,t=e.src,n=e.type,i=e.service;return c.a.makeDthumbUrl(t,n,i)},t}(o.b.Component);l.defaultProps={service:"",title:"",onError:function(){}},l.propTypes={src:o.a.string.isRequired,type:o.a.string.isRequired,service:o.a.string,title:o.a.string,className:o.a.string.isRequired,onLoad:o.a.func,onError:o.a.func},t.a=l},460:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t}(n(51).c);t.a=o},461:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g=n(60),f=n.n(g),m=n(1),y=n.n(m),v=n(58),_=n.n(v),b=n(0),S=n.n(b),C=n(50),I=n.n(C),O=(n(61),n(106)),T=n(70),L=n(16),E=n(51),P=n(49),w=n(1079),k=n(1313),x=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},n.standardImageSizeInfo=null,f()(n,"type",r,_()(n)),f()(n,"title",o,_()(n)),f()(n,"link",a,_()(n)),f()(n,"layout",s,_()(n)),f()(n,"align",c,_()(n)),f()(n,"detailInfo",l,_()(n)),f()(n,"dataId",u,_()(n)),f()(n,"subId",p,_()(n)),f()(n,"thumbnail",d,_()(n)),f()(n,"volNo",h,_()(n)),n._configAgent=E.W.get("configAgent");var i=t,g=i.state,m=void 0===g?{}:g,y=i.config,v=void 0===y?{}:y;return n.standardImageSizeInfo=Object(O.a)(n.standardImageSizeInfo,v.standardImageSizeInfo),n.attributes=Object(T.a)(n.attributes,v.attributes),n.type=Object(L.a)(m,"type",n.type),n.title=Object(L.a)(m,"title",n.title),n.link=Object(L.a)(m,"link",n.link),n.layout=Object(L.a)(m,"layout",n.layout),n.align=Object(L.a)(m,"align",n.align),n.detailInfo=Object(L.a)(m,"detailInfo",n.detailInfo),n.dataId=Object(L.a)(m,"dataId",n.dataId),n.subId=Object(L.a)(m,"subId",n.subId),n.thumbnail=Object(L.a)(m,"thumbnail",n.thumbnail),n.volNo=Object(L.a)(m,"volNo",n.volNo),n}return S()(t,e),t.prototype.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,type:this.type,title:this.title,link:this.link,layout:this.layout,align:this.align,detailInfo:this.detailInfo.map(function(e){return P.f.toJS(e)}),dataId:this.dataId,subId:this.subId,thumbnail:P.f.toJS(this.thumbnail),volNo:this.volNo}},y()(t,[{key:"isBigSizeImage",get:function(){if(!this.standardImageSizeInfo)return!1;var e=this.thumbnail;if(!e)return!1;var t=this.standardImageSizeInfo.width,n=this.standardImageSizeInfo.height;return e.width>=t&&e.height>=n}},{key:"item",get:function(){var e=this.id,t=this.subId,n=this.title,i=this.thumbnail,r=this.detailInfo,o=this.isBigSizeImage;return{id:e,subId:t,title:n,thumbnail:i,detailInfo:P.f.toJS(r),isBigSizeImage:o}}}]),t}(E.g),r=I()(i.prototype,"type",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=I()(i.prototype,"title",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=I()(i.prototype,"link",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=I()(i.prototype,"layout",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),c=I()(i.prototype,"align",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=I()(i.prototype,"detailInfo",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=I()(i.prototype,"dataId",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=I()(i.prototype,"subId",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=I()(i.prototype,"thumbnail",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=I()(i.prototype,"volNo",[P.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I()(i.prototype,"isBigSizeImage",[P.e],Object.getOwnPropertyDescriptor(i.prototype,"isBigSizeImage"),i.prototype),I()(i.prototype,"item",[P.e],Object.getOwnPropertyDescriptor(i.prototype,"item"),i.prototype),i);x.ctype="material",x.schema={id:w.a.string.isRequired,ctype:w.a.string.isRequired,align:w.a.string,layout:w.a.string.isRequired,type:w.a.string.isRequired,title:w.a.string.isRequired,link:w.a.string.isRequired,detailInfo:w.a.arrayOf(w.a.shape({ctype:w.a.string.isRequired,label:w.a.string,labelName:w.a.string,values:w.a.arrayOf(w.a.shape({ctype:w.a.string.isRequired,value:w.a.string.isRequired,url:w.a.string,code:w.a.string}))})).isRequired,dataId:w.a.string.isRequired,subId:w.a.string,thumbnail:w.a.shape(k.i),volNo:w.a.string},t.a=x},462:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t}(n(51).c);t.a=o},463:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h=n(60),g=n.n(h),f=n(58),m=n.n(f),y=n(0),v=n.n(y),_=n(50),b=n.n(_),S=(n(61),n(16)),C=n(70),I=n(102),O=n(51),T=n(1079),L=n(49),E=n(312),P=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},g()(n,"layout",r,m()(n)),g()(n,"phase",o,m()(n)),g()(n,"align",a,m()(n)),g()(n,"audioId",s,m()(n)),g()(n,"fileName",c,m()(n)),g()(n,"fileSize",l,m()(n)),g()(n,"internalResource",u,m()(n)),g()(n,"count",p,m()(n)),g()(n,"totalCount",d,m()(n)),n.serviceData=null;var i=t,h=i.state,f=void 0===h?{}:h,y=i.config,v=void 0===y?{}:y;return n.layout=Object(S.a)(f,"layout",n.layout),n.align=Object(S.a)(f,"align",n.align),n.audioId=Object(S.a)(f,"audioId",n.audioId),n.fileName=Object(S.a)(f,"fileName",n.fileName),n.fileSize=Object(S.a)(f,"fileSize",n.fileSize),n.internalResource=Object(S.a)(f,"internalResource",n.internalResource),n.count=Object(S.a)(f,"count",n.count),n.totalCount=Object(S.a)(f,"totalCount",n.totalCount),n.attributes=Object(C.a)(n.attributes,v.attributes),n.serviceData=Object(S.a)(f,"serviceData",n.serviceData),n.audioId&&(n.phase=O.O.DONE),n}v()(t,e);var n=t.prototype;return n.setState=function(e){Object(I.a)(this,e)},n.updateProperty=function(e){Object(I.a)(this,e)},n.updateAudio=function(e){var t=e.audioId,n=e.fileName,i=e.fileSize;this.audioId=t,this.fileName=n,this.fileSize=i},n.updateServiceData=function(e){this.serviceData=e},n.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,layout:this.layout,phase:this.phase,align:this.align,audioId:this.audioId,fileName:this.fileName,fileSize:this.fileSize,internalResource:this.internalResource,count:this.count,totalCount:this.totalCount,serviceData:this.serviceData}},t}(O.g),r=b()(i.prototype,"layout",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.a.DEFAULT}}),o=b()(i.prototype,"phase",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.O.EMPTY}}),a=b()(i.prototype,"align",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=b()(i.prototype,"audioId",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b()(i.prototype,"fileName",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=b()(i.prototype,"fileSize",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=b()(i.prototype,"internalResource",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),p=b()(i.prototype,"count",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=b()(i.prototype,"totalCount",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i);P.ctype="audio",P.schema={id:T.a.string.isRequired,ctype:T.a.string.isRequired,layout:T.a.string.isRequired,align:T.a.string,audioId:T.a.string.isRequired,fileName:T.a.string.isRequired,fileSize:T.a.number.isRequired,serviceData:T.a.object},t.a=P},464:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(52),u=(i=function(e){function t(){var t;return(t=e.call(this)||this)._oglinkComponentService=c.W.get("oglinkComponentService"),t}return o()(t,e),t.prototype.changeToTextLayout=function(e){this._oglinkComponentService.changeToTextLayout(e)},t}(c.c),s()(i.prototype,"changeToTextLayout",[l.history],Object.getOwnPropertyDescriptor(i.prototype,"changeToTextLayout"),i.prototype),i);t.a=u},465:function(e,t,n){"use strict";var i,r,o,a=n(12),s=n.n(a),c=n(18),l=n.n(c),u=n(0),p=n.n(u),d=n(50),h=n.n(d),g=n(51),f=n(52),m=n(49),y=n(126),v=(i=Object(f.history)({sync:!1}),r=Object(f.history)({sync:!1}),o=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=g.W.get("configAgent"),t._imageBehavior=g.W.get("imageBehavior"),t._imageComponentService=g.W.get("imageComponentService"),t._imageUploadService=g.W.get("imageUploadService"),t._imageEditService=g.W.get("imageEditService"),t._wrappingParagraphComponentService=g.W.get("wrappingParagraphComponentService"),t._libraryPanelLayoutService=g.W.get("libraryPanelLayoutService")||{updateMediaList:function(){}},t._toastLayerService=g.W.get("toastLayerService"),t._eventDispatcherService=g.W.get("eventDispatcherService"),t._i18n=g.W.get("i18n"),t._contentTextMaxLength=t._configAgent.get("productConfig.contentTextMaxLength"),t}p()(t,e);var n=t.prototype;return n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId,i=e.paraId,r=e.nodeId;g.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n,paraId:i,nodeId:r}),this._libraryPanelLayoutService.updateMediaList()},n.changeImage=function(){var e=l()(s.a.mark(function e(){var t,n,i,r=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._wrappingParagraphComponentService.getSelectedWrappedSection(),e.next=3,this._imageUploadService.openFileDialog();case 3:return n=e.sent,i=t.toPlainJSON(),e.abrupt("return",this._imageBehavior.changeImage({targetStore:t,selectedImages:n},{onEachUpload:y.a}).then(function(e){var n=e.succeededImages;return 0===n.length?r._imageComponentService.changeImageByState(t,i):r._imageComponentService.changeImage(t,n[0].response),e}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.editImage=function(){var e=l()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._wrappingParagraphComponentService.getSelectedWrappedSection(),e.next=3,this._imageEditService.editImage({activeCompId:t.id});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.showOverContentLengthLimitWarn=function(){this._eventDispatcherService.emit(g.z.ON_MAX_CONTENT_TEXT_LENGTH),this._toastLayerService.warningMessage(this._i18n("textUnit:warning_limit_over_max_text_length",{maxLength:this._contentTextMaxLength}))},t}(Object(g.Y)(g.c)),h()(o.prototype,"setRepresentativeImage",[f.history,m.d],Object.getOwnPropertyDescriptor(o.prototype,"setRepresentativeImage"),o.prototype),h()(o.prototype,"changeImage",[i,m.d],Object.getOwnPropertyDescriptor(o.prototype,"changeImage"),o.prototype),h()(o.prototype,"editImage",[f.preventOnDocumentProcessing,r,m.d],Object.getOwnPropertyDescriptor(o.prototype,"editImage"),o.prototype),o);t.a=v},466:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(49),l=n(52),u=n(51),p=(i=function(e){function t(){var t;return(t=e.call(this)||this)._editingService=u.W.get("editingService"),t._propertyChangeService=u.W.get("propertyChangeService"),t._tableComponentService=u.W.get("tableComponentService"),t._viewModeLayoutService=u.W.get("viewModeLayoutService"),t._libraryPanelLayoutService=u.W.get("libraryPanelLayoutService")||{updateMediaList:function(){}},t}o()(t,e);var n=t.prototype;return n.mergeCells=function(){this._tableComponentService.mergeCells()},n.splitRowCells=function(){this._tableComponentService.splitRowCells()},n.splitColumnCells=function(){this._tableComponentService.splitColumnCells()},n.adjustToEqualWidth=function(){this._tableComponentService.adjustToEqualWidth()},n.deleteCell=function(){this._editingService.erase()},n.insertColumn=function(e){this._tableComponentService.insertColumn(e)},n.insertRow=function(e){this._tableComponentService.insertRow(e)},n.changeCellWidth=function(e,t){this._propertyChangeService.updateProperty({cellWidth:{id:e,widthToAdd:t}})},n.changeCellHeight=function(e,t){this._propertyChangeService.updateProperty({cellHeight:{id:e,heightToAdd:t}})},n.selectRowByIds=function(e){this._tableComponentService.selectRowByIds(e)},n.selectColByIds=function(e){this._tableComponentService.selectColByIds(e)},n.selectAll=function(){this._tableComponentService.selectAll()},n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId,i=e.paraId,r=e.nodeId;u.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n,paraId:i,nodeId:r}),this._libraryPanelLayoutService.updateMediaList()},n.getViewMode=function(){var e=u.U.VIEW_MODE_PC;return this._viewModeLayoutService&&(e=this._viewModeLayoutService.getViewMode()),e},t}(Object(u.Y)(u.c)),s()(i.prototype,"mergeCells",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"mergeCells"),i.prototype),s()(i.prototype,"splitRowCells",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"splitRowCells"),i.prototype),s()(i.prototype,"splitColumnCells",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"splitColumnCells"),i.prototype),s()(i.prototype,"adjustToEqualWidth",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"adjustToEqualWidth"),i.prototype),s()(i.prototype,"deleteCell",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"deleteCell"),i.prototype),s()(i.prototype,"insertColumn",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"insertColumn"),i.prototype),s()(i.prototype,"insertRow",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"insertRow"),i.prototype),s()(i.prototype,"changeCellWidth",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"changeCellWidth"),i.prototype),s()(i.prototype,"changeCellHeight",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"changeCellHeight"),i.prototype),s()(i.prototype,"selectRowByIds",[c.d],Object.getOwnPropertyDescriptor(i.prototype,"selectRowByIds"),i.prototype),s()(i.prototype,"selectColByIds",[c.d],Object.getOwnPropertyDescriptor(i.prototype,"selectColByIds"),i.prototype),s()(i.prototype,"selectAll",[c.d],Object.getOwnPropertyDescriptor(i.prototype,"selectAll"),i.prototype),s()(i.prototype,"setRepresentativeImage",[l.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"setRepresentativeImage"),i.prototype),i);t.a=p},468:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(52),u=(i=function(e){function t(){var t;return(t=e.call(this)||this)._selectionInfoStore=c.W.get("selectionInfoStore"),t._i18n=c.W.get("i18n"),t._codeComponentService=c.W.get("codeComponentService"),t._toastLayerService=c.W.get("toastLayerService"),t._virtualEditable=c.W.get("virtualEditable"),t}o()(t,e);var n=t.prototype;return n.showToastForOverflowMaxLength=function(){var e=this._i18n("codeComponent:code_input_text_max_length");this._toastLayerService.warningMessage(e)},n.updateCodeContents=function(e,t){this._codeComponentService.updateCodeContents(e,t)},n.activateUnit=function(e){this._selectionInfoStore.selectUnit({compId:e,unitId:e})},n.blurVirtualEditable=function(){this._virtualEditable.blur()},t}(c.c),s()(i.prototype,"updateCodeContents",[l.history],Object.getOwnPropertyDescriptor(i.prototype,"updateCodeContents"),i.prototype),i);t.a=u},469:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=n(52),p=(i=function(e){function t(){var t;return(t=e.call(this)||this)._editingService=c.W.get("editingService"),t._scheduleLayerService=c.W.get("scheduleLayerService"),t._scheduleComponentService=c.W.get("scheduleComponentService"),t}o()(t,e);var n=t.prototype;return n.openScheduleLayer=function(e){this._scheduleLayerService.open(e)},n.removeMapImage=function(e){this._scheduleComponentService.removeMapImage(e)},n.newSchedule=function(e){var t=e.compId,n=e.callback;n.error=this.delete.bind(this),this._scheduleComponentService.newSchedule({compId:t,callback:n})},n.delete=function(){this._editingService.eraseComponent()},t}(c.c),s()(i.prototype,"openScheduleLayer",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"openScheduleLayer"),i.prototype),s()(i.prototype,"removeMapImage",[u.history,l.d],Object.getOwnPropertyDescriptor(i.prototype,"removeMapImage"),i.prototype),s()(i.prototype,"newSchedule",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"newSchedule"),i.prototype),s()(i.prototype,"delete",[u.history,l.d],Object.getOwnPropertyDescriptor(i.prototype,"delete"),i.prototype),i);t.a=p},470:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m=n(60),y=n.n(m),v=n(58),_=n.n(v),b=n(0),S=n.n(b),C=n(50),I=n.n(C),O=(n(61),n(16)),T=n(70),L=n(122),E=n(71),P=n(51),w=n(1079),k=n(1313),x=n(49),D=n(305),A=n(471),j=(i=function(e){S()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},y()(n,"dateOnly",r,_()(n)),y()(n,"title",o,_()(n)),y()(n,"startAt",a,_()(n)),y()(n,"endAt",s,_()(n)),y()(n,"content",c,_()(n)),y()(n,"linkUrl",l,_()(n)),y()(n,"placesMap",u,_()(n)),y()(n,"layout",p,_()(n)),y()(n,"align",d,_()(n)),y()(n,"scheduleId",h,_()(n)),y()(n,"repetition",g,_()(n)),y()(n,"notification",f,_()(n)),n._componentFactory=P.W.get("componentFactory");var i=t,m=i.state,v=void 0===m?{}:m,b=i.config,S=void 0===b?{}:b,C=Object(O.a)(v,"placesMap",n.placesMap);return n.attributes=Object(T.a)(n.attributes,S.attributes),n.dateOnly=Object(O.a)(v,"dateOnly",n.dateOnly),n.title=Object(O.a)(v,"title",n.title),n.startAt=Object(O.a)(v,"startAt",n.startAt),n.endAt=Object(O.a)(v,"endAt",n.endAt),n.content=Object(O.a)(v,"content",n.content),n.linkUrl=Object(O.a)(v,"linkUrl",n.linkUrl),n.layout=Object(O.a)(v,"layout",n.layout),n.align=Object(O.a)(v,"align",n.align),n.scheduleId=Object(O.a)(v,"scheduleId",n.scheduleId),n.repetition=Object(O.a)(v,"repetition",n.repetition),n.notification=Object(O.a)(v,"notification",n.notification),n.placesMap=C?n._componentFactory.createComponentWithCompData(C):null,n}return t.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,title:this.title,startAt:this.startAt,endAt:this.endAt,content:this.content,linkUrl:this.linkUrl,placesMap:this._toPlainPlacesMapJSON(),layout:this.layout,align:this.align,scheduleId:this.scheduleId,repetition:x.f.toJS(this.repetition),notification:x.f.toJS(this.notification),dateOnly:this.dateOnly}},t._toPlainPlacesMapJSON=function(){return this.placesMap&&this.placesMap.toPlainJSON?this.placesMap.toPlainJSON():this.placesMap},t.removeMapImage=function(){Object(T.a)(this,{placesMap:{layout:D.a.MAP_TEXT}})},t.updateProperty=function(e){var t=this;e=Object(L.a)(e,["id","layout"]),Object(E.a)(e,function(e,n){if("object"==typeof e){var i=t[n];t[n]=Object(T.a)(i,e)}t.hasOwnProperty(n)&&(t[n]=e)})},t.setState=function(e){var t=this;Object(E.a)(e,function(e,n){t.hasOwnProperty(n)&&(t[n]=e)})},n}(P.g),r=I()(i.prototype,"dateOnly",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=I()(i.prototype,"title",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=I()(i.prototype,"startAt",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=I()(i.prototype,"endAt",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=I()(i.prototype,"content",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=I()(i.prototype,"linkUrl",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=I()(i.prototype,"placesMap",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=I()(i.prototype,"layout",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),d=I()(i.prototype,"align",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=I()(i.prototype,"scheduleId",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=I()(i.prototype,"repetition",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=I()(i.prototype,"notification",[x.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i);j.ctype="schedule",j.schema={id:w.a.string.isRequired,ctype:w.a.string.isRequired,layout:w.a.string.isRequired,align:w.a.string,title:w.a.string.isRequired,startAt:w.a.string.isRequired,endAt:w.a.string,scheduleId:w.a.number,placesMap:w.a.shape(A.a.schema),linkUrl:w.a.string,content:w.a.string,dateOnly:w.a.bool,repetition:w.a.shape(k.d.Repetition),notification:w.a.shape(k.d.Notification)},t.a=j},471:function(e,t,n){"use strict";var i,r,o,a,s,c,l=n(17),u=n.n(l),p=n(60),d=n.n(p),h=n(1),g=n.n(h),f=n(58),m=n.n(f),y=n(0),v=n.n(y),_=n(50),b=n.n(_),S=(n(61),n(16)),C=n(70),I=n(102),O=n(51),T=n(1079),L=n(1313),E=n(49),P=n(305),w=["layout"],k=(i=function(e){v()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},d()(n,"layout",r,m()(n)),d()(n,"align",o,m()(n)),d()(n,"searchEngine",a,m()(n)),d()(n,"thumbnail",s,m()(n)),d()(n,"places",c,m()(n)),n.serviceData=null;var i=t,l=i.state,u=void 0===l?{}:l,p=i.config,h=void 0===p?{}:p;return n.layout=Object(S.a)(u,"layout",n.layout),n.align=Object(S.a)(u,"align",n.align),n.searchEngine=Object(S.a)(u,"searchEngine",n.searchEngine),n.thumbnail=Object(S.a)(u,"thumbnail",n.thumbnail),n.places=n._makeIsDomestic(Object(S.a)(u,"places",n.places)),n.attributes=Object(C.a)(n.attributes,h.attributes),n.serviceData=Object(S.a)(u,"serviceData",n.serviceData),n}return t.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,layout:this.layout,align:this.align,searchEngine:this.searchEngine,thumbnail:E.f.toJS(this.thumbnail),places:this.places.map(function(e){return E.f.toJS(e)}),serviceData:this.serviceData}},t.updatePlacesAndStaticMap=function(e){var t=e.places,n=e.thumbnail,i=e.searchEngine;this.places=t,this.thumbnail.src=n.src,this.searchEngine=i},t.updateServiceData=function(e){this.serviceData=e},t.updateLayout=function(e){this.layout=e},t.updateProperty=function(e){var t=e.layout,n=u()(e,w);t&&this.updateLayout(t),Object(I.a)(this,n)},t.updateStyle=function(e){var t=e.align;this.align=t},t.collectStyle=function(){var e="justify"===this.align||null===this.align?"left":this.align;return{layout:this.layout,align:e,edit:{id:this.id,places:this.places}}},t.isLibraryComponent=function(){return!0},t.getLibraryItemData=function(){var e=this.thumbnail.src;return{id:this.id,key:e,thumbnail:e,data:this.toValidJSON()}},t._makeIsDomestic=function(e){var t="naver"===this.searchEngine;return e.map(function(e){return void 0===e.__isDomestic&&(e.__isDomestic=t),e})},g()(n,[{key:"hasMultiplePlaces",get:function(){return this.places.length>1}}]),n}(O.g),r=b()(i.prototype,"layout",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.a.DEFAULT}}),o=b()(i.prototype,"align",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=b()(i.prototype,"searchEngine",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"naver"}}),s=b()(i.prototype,"thumbnail",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{src:"",ctype:"thumbnail"}}}),c=b()(i.prototype,"places",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b()(i.prototype,"hasMultiplePlaces",[E.e],Object.getOwnPropertyDescriptor(i.prototype,"hasMultiplePlaces"),i.prototype),i);k.ctype="placesMap",k.schema={id:T.a.string.isRequired,ctype:T.a.string.isRequired,layout:T.a.string.isRequired,align:T.a.string,searchEngine:T.a.string.isRequired,thumbnail:T.a.shape(L.i).isRequired,places:T.a.arrayOf(T.a.shape(L.e)).isRequired,serviceData:T.a.object},t.a=k},472:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t}(n(51).c);t.a=o},473:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h=n(60),g=n.n(h),f=n(58),m=n.n(f),y=n(0),v=n.n(y),_=n(50),b=n.n(_),S=(n(61),n(16)),C=n(70),I=n(102),O=n(51),T=n(1079),L=n(49),E=n(314),P=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},g()(n,"layout",r,m()(n)),g()(n,"align",o,m()(n)),g()(n,"fileId",a,m()(n)),g()(n,"fileName",s,m()(n)),g()(n,"fileSize",c,m()(n)),g()(n,"internalResource",l,m()(n)),g()(n,"count",u,m()(n)),g()(n,"totalCount",p,m()(n)),g()(n,"phase",d,m()(n));var i=t,h=i.state,f=void 0===h?{}:h,y=i.config,v=void 0===y?{}:y;return n.layout=Object(S.a)(f,"layout",n.layout),n.align=Object(S.a)(f,"align",n.align),n.fileId=Object(S.a)(f,"fileId",n.fileId),n.fileName=Object(S.a)(f,"fileName",n.fileName),n.fileSize=Object(S.a)(f,"fileSize",n.fileSize),n.internalResource=Object(S.a)(f,"internalResource",n.internalResource),n.count=Object(S.a)(f,"count",n.count),n.totalCount=Object(S.a)(f,"totalCount",n.totalCount),n.attributes=Object(C.a)(n.attributes,v.attributes),n.fileId&&(n.phase=O.O.DONE),n}v()(t,e);var n=t.prototype;return n.setState=function(e){Object(I.a)(this,e)},n.updateProperty=function(e){Object(I.a)(this,e)},n.updateFile=function(e){var t=e.fileId,n=e.fileName,i=e.fileSize;this.fileId=t,this.fileName=n,this.fileSize=i},n.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,phase:this.phase,align:this.align,fileId:this.fileId,fileName:this.fileName,fileSize:this.fileSize,internalResource:this.internalResource,count:this.count,totalCount:this.totalCount}},t}(O.g),r=b()(i.prototype,"layout",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.a.DEFAULT}}),o=b()(i.prototype,"align",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=b()(i.prototype,"fileId",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=b()(i.prototype,"fileName",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=b()(i.prototype,"fileSize",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=b()(i.prototype,"internalResource",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=b()(i.prototype,"count",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=b()(i.prototype,"totalCount",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=b()(i.prototype,"phase",[L.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.O.EMPTY}}),i);P.ctype="file",P.schema={id:T.a.string.isRequired,layout:T.a.string.isRequired,ctype:T.a.string.isRequired,align:T.a.string,fileId:T.a.string.isRequired,fileName:T.a.string.isRequired,fileSize:T.a.number.isRequired},t.a=P},474:function(e,t,n){"use strict";var i=n(434);t.a=i.a},475:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u=n(60),p=n.n(u),d=n(58),h=n.n(d),g=n(0),f=n.n(g),m=n(50),y=n.n(m),v=(n(61),n(16)),_=n(70),b=n(51),S=n(1079),C=n(1313),I=n(49),O=(i=function(e){f()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},p()(n,"latex",r,h()(n)),p()(n,"html",o,h()(n)),p()(n,"align",a,h()(n)),p()(n,"layout",s,h()(n)),p()(n,"fontSizeCode",c,h()(n)),p()(n,"thumbnail",l,h()(n));var i=t,u=i.state,d=void 0===u?{}:u,g=i.config,f=void 0===g?{}:g;return n.latex=Object(v.a)(d,"latex",n.latex),n.html=Object(v.a)(d,"html",n.html),n.layout=Object(v.a)(d,"layout",n.layout),n.align=Object(v.a)(d,"align",n.align),n.fontSizeCode=Object(v.a)(d,"fontSizeCode",n.fontSizeCode),n.thumbnail=Object(v.a)(d,"thumbnail",n.thumbnail),n.attributes=Object(_.a)(n.attributes,f.attributes),n}return t.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,latex:this.latex,html:this.html,align:this.align,layout:this.layout,fontSizeCode:this.fontSizeCode,thumbnail:I.f.toJS(this.thumbnail)}},t.updateFormulaData=function(e){var t=e.thumbnail||{};this.latex=e.latex,this.html=e.html,this.thumbnail.src=t.src,this.thumbnail.width=Number(t.width),this.thumbnail.height=Number(t.height),this.fontSizeCode=e.fontSizeCode},t.collectStyle=function(){return{align:"justify"===this.align||null===this.align?"left":this.align,fontSizeCode:this.fontSizeCode}},n}(b.g),r=y()(i.prototype,"latex",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=y()(i.prototype,"html",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=y()(i.prototype,"align",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=y()(i.prototype,"layout",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"default"}}),c=y()(i.prototype,"fontSizeCode",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"fs15"}}),l=y()(i.prototype,"thumbnail",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{ctype:"thumbnail",src:"",width:0,height:0}}}),i);O.ctype="formula",O.schema={id:S.a.string.isRequired,ctype:S.a.string.isRequired,layout:S.a.string.isRequired,align:S.a.string,latex:S.a.string.isRequired,html:S.a.string.isRequired,thumbnail:S.a.shape(C.i).isRequired,fontSizeCode:S.a.string.isRequired},t.a=O},483:function(e,t,n){"use strict";var i,r=n(51),o=n(55),a=n.n(o),s=n(0),c=n.n(s),l=n(50),u=n.n(l),p=n(54),d=n.n(p),h=n(49),g=n(376),f=n(52),m=n(86),y=n(87),v=n(88),_=n(793),b=n(792),S=n(471),C=(i=function(e){function t(){return e.apply(this,arguments)||this}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.layout,a=this._renderMapModule();return h.b.createElement(m.a,{id:i,ctype:r,layout:o,i18n:n},h.b.createElement(y.a,{compId:i,compStore:t},a))},n._renderMapModule=function(){var e=this.props.store,t=e.layout,n=e.hasMultiplePlaces,i="default"===t?this._renderDefaultMap():this._renderTextMap(),r=d()({"se-section-placesMap-multiple":n});return h.b.createElement(v.a,{blockWrapperProps:e,className:r,onDoubleClick:this._handleDoubleClick,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext,draggable:"true"},i)},n._renderPlaceList=function(e,t,n){var i,r={name:e.name,address:e.address,className:d()(((i={})["se-module-map-text-spot-"+t]=n.length>1,i))};return h.b.createElement(b.a,a()({key:t},r))},n._renderDefaultMap=function(){var e=this.props,t=e.store,n=e.children,i=t.places,r=t.thumbnail;if(!r)return!1;var o=r.src,a=i.map(this._renderPlaceList);return h.b.createElement(h.b.Fragment,null,h.b.createElement(_.a,{src:o,units:n,onLoad:this._handleLoadMapImage,onError:this._handleErrorMapImage}),a)},n._renderTextMap=function(){var e=this.props,t=e.store,n=e.children,i=t.places,r=t.hasMultiplePlaces,o=i.map(this._renderPlaceList),a=r?null:h.b.createElement("div",{className:"se-map-marker"});return h.b.createElement(h.b.Fragment,null,a,o,n)},n._handleDoubleClick=function(){var e=this.props,t=e.useCase,n=e.store,i=n.places,r=n.id;t.editPlaces(i.toJS(),r)},n._handleLoadMapImage=function(){this.props.useCase.repaintCursor()},n._handleErrorMapImage=function(){this.props.useCase.repaintCursor()},n._handleMoveToPrev=function(){this.props.useCase.moveToPrev(this.props.store.id)},n._handleMoveToNext=function(){this.props.useCase.moveToNext(this.props.store.id)},t}(h.b.Component),u()(i.prototype,"_handleDoubleClick",[f.autobind,f.muteIfReadOnly],Object.getOwnPropertyDescriptor(i.prototype,"_handleDoubleClick"),i.prototype),u()(i.prototype,"_handleLoadMapImage",[f.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleLoadMapImage"),i.prototype),u()(i.prototype,"_handleErrorMapImage",[f.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleErrorMapImage"),i.prototype),u()(i.prototype,"_handleMoveToPrev",[f.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleMoveToPrev"),i.prototype),u()(i.prototype,"_handleMoveToNext",[f.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleMoveToNext"),i.prototype),i);C.defaultProps={i18n:function(e){return e}},C.propTypes={shouldForceRefresh:h.a.bool,i18n:h.a.func,store:h.a.instanceOf(S.a).isRequired,children:h.a.oneOfType([h.a.element,h.a.array])};var I,O,T,L,E,P,w,k,x,D=Object(g.b)(C),A=n(12),j=n.n(A),R=n(18),N=n.n(R),M=(I=Object(f.history)({sync:!1}),O=function(e){function t(){var t;return(t=e.call(this)||this)._placeLayerService=r.W.get("placeLayerService"),t._mapComponentService=r.W.get("mapComponentService"),t}return c()(t,e),t.prototype.editPlaces=function(){var e=N()(j.a.mark(function e(t,n){var i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._placeLayerService.editPlaces({initialPlaces:t,isUpdateMode:!0});case 2:(i=e.sent)&&this._mapComponentService.updatePlacesAndStaticMap(i,n);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t}(r.c),u()(O.prototype,"editPlaces",[I,h.d],Object.getOwnPropertyDescriptor(O.prototype,"editPlaces"),O.prototype),O),B=function(e){function t(){var t;return(t=e.call(this)||this)._selectionInfoStore=r.W.get("selectionInfoStore"),t}c()(t,e);var n=t.prototype;return n.updatePlacesAndStaticMap=function(e,t){this.getComponentStore(t).updatePlacesAndStaticMap(e)},n.getActiveCompId=function(){return this._selectionInfoStore.start.compId},n.getClonedPlaces=function(e){return this.getComponentStore(e).places.toJS()},t}(r.a),W=n(64),U=n(17),F=n.n(U),z=n(104),V=n(59),G=["type","title","label","groups","value"],H=(T=function(e){function t(){return e.apply(this,arguments)||this}c()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?V.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"mapLayout:title":i,o=e.label,s=void 0===o?"mapLayout:label":o,c=e.groups,l=void 0===c?[{value:"default",title:"mapLayout:default_title",label:"mapLayout:default_label",logId:"mapimg"},{value:"map_text",title:"mapLayout:text_title",label:"mapLayout:text_label",logId:"maptext"}]:c,u=e.value,p=void 0===u?"default":u,d=F()(e,G);return h.b.createElement(z.a,a()({type:n,title:r,label:s,groups:l,value:p},d,{onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeLayout(e)},t}(h.b.Component),u()(T.prototype,"_handleChange",[f.autobind],Object.getOwnPropertyDescriptor(T.prototype,"_handleChange"),T.prototype),T),q=n(298),J=["type","title","label","value","groups"],K=(L=function(e){function t(){return e.apply(this,arguments)||this}c()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?V.b.CYCLE_TOGGLE:t,i=e.title,r=void 0===i?"mapLayout:title":i,o=e.label,s=void 0===o?"mapLayout:label":o,c=e.value,l=void 0===c?"map_text":c,u=e.groups,p=void 0===u?[{value:"default",title:"mapLayout:default_title",label:"mapLayout:default_label",logId:"mapimg"},{value:"map_text",title:"mapLayout:text_title",label:"mapLayout:text_label",logId:"maptext"}]:u,d=F()(e,J);return h.b.createElement(q.a,a()({type:n,title:r,label:s,value:l,groups:p},d,{onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeLayout(e)},t}(h.b.Component),u()(L.prototype,"_handleChange",[f.autobind],Object.getOwnPropertyDescriptor(L.prototype,"_handleChange"),L.prototype),L),X=n(63),Y=["type","title","label","labelVisible","logId"],Q=(E=function(e){function t(){return e.apply(this,arguments)||this}c()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?V.b.BASIC:t,i=e.title,r=void 0===i?"mapEdit:title":i,o=e.label,s=void 0===o?"mapEdit:label":o,c=e.labelVisible,l=void 0===c||c,u=e.logId,p=void 0===u?"edit":u,d=F()(e,Y);return h.b.createElement(X.a,a()({type:n,title:r,label:s,logId:p,labelVisible:l},d,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editPlaces()},t}(h.b.Component),u()(E.prototype,"_handleClick",[f.autobind],Object.getOwnPropertyDescriptor(E.prototype,"_handleClick"),E.prototype),E),Z=n(782),$=["type","title","logId"],ee=(P=function(e){function t(){return e.apply(this,arguments)||this}c()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?V.b.BASIC:t,i=e.title,r=void 0===i?"mapEdit:title":i,o=e.logId,s=void 0===o?"edit":o,c=F()(e,$);return h.b.createElement(X.a,a()({type:n,title:r,logId:s},c,{onClick:this._handleClick}))},n._handleClick=function(){var e=this.props,t=e.useCase,n=e.value,i=h.f.toJS(n);t.editPlaces(Object(Z.a)(i))},t}(h.b.Component),u()(P.prototype,"_handleClick",[f.autobind],Object.getOwnPropertyDescriptor(P.prototype,"_handleClick"),P.prototype),P),te=n(299),ne=(w=Object(f.history)({sync:!1}),k=Object(f.history)({sync:!1}),x=function(e){function t(){var t;return(t=e.call(this)||this)._placeLayerService=r.W.get("placeLayerService"),t._mapComponentService=r.W.get("mapComponentService"),t._propertyChangeService=r.W.get("propertyChangeService"),t._selectionInfoStore=r.W.get("selectionInfoStore"),t._componentListStore=r.W.get("componentListStore"),t}c()(t,e);var n=t.prototype;return n.editPlaces=function(){var e=N()(j.a.mark(function e(){var t,n,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._mapComponentService.getActiveCompId(),n=this._mapComponentService.getClonedPlaces(t),e.next=4,this._placeLayerService.editPlaces({initialPlaces:n,isUpdateMode:!0});case 4:(i=e.sent)&&this._mapComponentService.updatePlacesAndStaticMap(i,t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.changeLayout=function(e){this._propertyChangeService.changeLayout(e.value)},t}(r.m),u()(x.prototype,"editPlaces",[f.sentryCatch,w,h.d],Object.getOwnPropertyDescriptor(x.prototype,"editPlaces"),x.prototype),u()(x.prototype,"changeLayout",[f.sentryCatch,k,h.d],Object.getOwnPropertyDescriptor(x.prototype,"changeLayout"),x.prototype),x),ie={"map-layout":{view:H,useCase:te.a,propertyName:"layout",styleName:"map"},"map-layout-toggle":{view:K,useCase:ne,propertyName:"layout",styleName:"map-layout-toggle"},"map-edit-right-label":{view:Q,useCase:ne,propertyName:"edit",styleName:"map-edit"},"map-edit":{view:ee,useCase:ne,propertyName:"edit",styleName:"map-edit"}},re={propertyToolbar:{align:Object(W.a)("align-group"),"map-layout":ie["map-layout"],"map-edit-right-label":ie["map-edit-right-label"],"separator-bar":Object(W.a)("separator-bar")},contextToolbar:{"cycle-align":Object(W.a)("cycle-align"),"map-edit":ie["map-edit"],"map-layout":ie["map-layout"],delete:Object(W.a)("delete"),"separator-bar":Object(W.a)("separator-bar"),"map-layout-toggle":ie["map-layout-toggle"],"additional-info":Object(W.a)("additional-info")}},oe={propertyToolbar:function(){return["align","separator-bar","map-layout","separator-bar","map-edit-right-label"]},contextToolbar:Object(W.b)(function(e){var t=["map-edit","separator-bar","map-layout","separator-bar","delete"];return"map_text"===e.selectedComponents[0].layout&&t.unshift("cycle-align","separator-bar"),{buttons:t}})},ae=function(e){function t(){return e.call(this,{buttonSetMap:re,buttonResolver:oe})||this}return c()(t,e),t}(r.l),se=r.q.extend({name:"MapComponent",view:D,useCase:M,service:B,store:S.a,toolbar:ae});t.a=se},486:function(e,t,n){"use strict";var i=n(49),r=n(88),o=n(215),a=n(376),s=n(169),c=n(217),l={useToolbarSlot:!1},u=function(e){var t={placeholder:e.i18n("quotationComponent:value_text_placeholder")};return i.b.createElement(s.a,{className:"se-quote",compId:e.store.id,text:e.store.value,options:l,additionalOption:t,onLimitTextLength:e.onLimitTextLength})};u.defaultProps={i18n:function(e){return e}},u.propTypes={onLimitTextLength:i.a.func,store:i.a.instanceOf(c.a).isRequired,i18n:i.a.func};var p=Object(a.b)(u),d=n(0),h=n.n(d),g={useToolbarSlot:!1},f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._elementRef=i.b.createRef(),n}h()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){var e=this;this.props.store.source.disable||(this._disposeReaction=i.f.reaction(function(){return{sourceTextOn:e.props.store.isSourceTextOn}},function(t){t.sourceTextOn?e._elementRef.current.classList.add("se-is-on"):e._elementRef.current.classList.remove("se-is-on")}))},n.componentDidMount=function(){this.props.store.source.disable||(this.props.store.isSourceTextOn?this._elementRef.current.classList.add("se-is-on"):this._elementRef.current.classList.remove("se-is-on"))},n.componentWillUnmount=function(){this._disposeReaction&&this._disposeReaction()},n.render=function(){var e=this.props.store,t=e.source,n=e.id;if(t.disable)return null;var r={placeholder:this.props.i18n("quotationComponent:source_text_placeholder")};return i.b.createElement(s.a,{text:t,compId:n,forwardRef:this._elementRef,options:g,additionalOption:r,className:"se-cite",onLimitTextLength:this.props.onLimitTextLength})},t}(i.b.Component);f.defaultProps={i18n:function(e){return e}},f.propTypes={onLimitTextLength:i.a.func,store:i.a.instanceOf(c.a).isRequired,i18n:i.a.func};var m=Object(a.b)(f),y=function(e){return i.b.createElement(r.a,{id:e.subCompId,className:"__se-unit",blockWrapperProps:e.store,parentProps:e.parentProps,onMoveToPrev:e.onMoveToPrev,onMoveToNext:e.onMoveToNext},e.useQuotationToolbarSlot&&Object(o.a)({}),i.b.createElement("div",{className:"se-quotation-container"},i.b.createElement(p,e),i.b.createElement(m,e)))};y.defaultProps={i18n:function(e){return e},onMoveToPrev:function(){},onMoveToNext:function(){}},y.propTypes={store:i.a.instanceOf(c.a).isRequired,i18n:i.a.func,sectionClassName:i.a.string,subCompId:i.a.string,useQuotationToolbarSlot:i.a.bool,onMoveToPrev:i.a.func,onMoveToNext:i.a.func};t.a=y},490:function(e,t,n){"use strict";var i,r,o,a,s=n(60),c=n.n(s),l=n(1),u=n.n(l),p=n(58),d=n.n(p),h=n(0),g=n.n(h),f=n(50),m=n.n(f),y=(n(61),n(16)),v=n(51),_=n(49),b={cc0:"CC0",ccl:"CCL",public:"PUBLIC"},S=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,c()(n,"opened",r,d()(n)),c()(n,"isLoading",o,d()(n)),c()(n,"imageInfo",a,d()(n));var i=t.state,s=void 0===i?{}:i;return n.opened=Object(y.a)(s,"opened",n.opened),n.isLoading=Object(y.a)(s,"isLoading",n.isLoading),n.imageInfo=Object(y.a)(s,"imageInfo",n.imageInfo),n}g()(t,e);var n=t.prototype;return n.openImageDetailLayer=function(e){void 0===e&&(e={}),this.isLoading=!0,this._updateImageInfo(e),this.opened=!0},n.closeImageDetailLayer=function(){this._resetImageDetailLayer()},n.openLoadingLayer=function(){this.isLoading=!0},n.closeLoadingLayer=function(){this.isLoading=!1},n._updateImageInfo=function(e){Object.assign(this.imageInfo,e)},n._resetImageDetailLayer=function(){this.opened=!1,this.isLoading=!1,this.imageInfo={provider:"",providerDisplayName:"",username:"",createdAt:"",width:0,height:0,urls:{img:"",link:"",thumb:""},rights:""}},n._getCclCode=function(e){return e?b[e]:"CC0"},u()(t,[{key:"ccl",get:function(){var e=this.imageInfo.rights;return this._getCclCode(e)}}]),t}(v.e),r=m()(i.prototype,"opened",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=m()(i.prototype,"isLoading",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=m()(i.prototype,"imageInfo",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{provider:"",providerDisplayName:"",username:"",createdAt:"",width:0,height:0,urls:{img:"",link:"",thumb:""},rights:""}}}),m()(i.prototype,"ccl",[_.e],Object.getOwnPropertyDescriptor(i.prototype,"ccl"),i.prototype),i);t.a=S},491:function(e,t,n){"use strict";var i,r,o=n(0),a=n.n(o),s=n(50),c=n.n(s),l=n(51),u=n(49),p=n(52),d=n(751),h=n(231),g=n(723),f=n(719),m=h.a.NOT_MACOS?"Ctrl":"CMD",y=(i=function(e){function t(){return e.apply(this,arguments)||this}a()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.i18n,n=e.custom,i=t("contextMenuLayer:alert_hotkey"),r=t("contextMenuLayer:alert_info_title"),o=t("contextMenuLayer:"+(g.a.readPermissionSupported?"alert_setting_desc":"alert_info_desc"),function(e,t){return void 0===t&&(t=!1),{hotkeyLink:t?'<a href="#" className="se-popup-text-link">'+e+"</a>":e,hotkeyCopy:m+"+C",hotkeyCut:m+"+X",hotkeyPaste:m+"+V",interpolation:{escapeValue:!1}}}(i,n.useCase.hasHelpPanel()));return u.b.createElement(u.b.Fragment,null,u.b.createElement("div",{className:"se-popup-header"},u.b.createElement("strong",{className:"se-popup-title"},r),u.b.createElement(d.a,{onClick:this._handleClickClose})),u.b.createElement("div",{className:"se-popup-content"},u.b.createElement("div",{className:"se-popup-alert-text",onClick:this._handleClickText,dangerouslySetInnerHTML:{__html:o.replace(/\n/g,"<br/>")}})))},n._handleClickClose=function(e){this.props.onClickClose(e),f.a.log(e.nativeEvent,"ctminf.close")},n._handleClickText=function(e){var t=e.target;t&&"A"===t.tagName&&(e.preventDefault(),this.props.custom.useCase.showHelpHotkey(),f.a.log(e.nativeEvent,"ctminf.hotkey"))},t}(u.b.Component),c()(i.prototype,"_handleClickClose",[p.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickClose"),i.prototype),c()(i.prototype,"_handleClickText",[p.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickText"),i.prototype),i);y.defaultProps={i18n:function(e){return e},custom:{},onClickClose:function(){}},y.propTypes={i18n:u.a.func,custom:u.a.object.isRequired,onClickClose:u.a.func.isRequired};var v=(r=function(e){function t(){var t;(t=e.call(this)||this)._i18n=l.W.get("i18n"),t._contextmenuLayerService=l.W.get("contextmenuLayerService"),t._editingService=l.W.get("editingService"),t._selectionService=l.W.get("selectionService"),t._historyService=l.W.get("historyService"),t._alertLayerService=l.W.get("alertLayerService"),t._canvasScrollingService=l.W.get("canvasScrollingService"),t._helpPanelLayoutService=l.W.get("helpPanelLayoutService");var n=l.W.get("configAgent").get("productConfig")||{},i=n.help,r=n.layoutType;return t._useHelpPanel=!0===i&&r!==l.I.EMBED,t}a()(t,e);var n=t.prototype;return n._fallbackPaste=function(){this._alertLayerService.open({type:"custom",custom:{Layout:y,useCase:this},className:"se-popup-contextmenu",isDimUse:!1})},n.hasHelpPanel=function(){return this._useHelpPanel},n.showHelpHotkey=function(){this._alertLayerService.close(),this._helpPanelLayoutService.open(),this._helpPanelLayoutService.openLayer("START_SHORTCUT","스마트에디터 단축키")},n.close=function(){this._contextmenuLayerService.close()},n.execute=function(e){switch(e.command){case"cut":this._editingService.cut();break;case"copy":this._copy();break;case"paste":this._paste();break;case"selectAll":this._selectAll();break;case"saveAs":this._saveAs();break;case"undo":this._undo();break;case"redo":this._redo();break;case"delete":this._erase()}this.close()},n._copy=function(){this._editingService.copy()},n._paste=function(){this._editingService.paste(this._fallbackPaste)},n._selectAll=function(){this._selectionService.selectAll()},n._saveAs=function(){this._contextmenuLayerService.saveAsCurrentFile()},n._erase=function(){this._editingService.erase(void 0,l.u.RIGHT)},n._undo=function(){this._historyService.undo(),this._canvasScrollingService.scrollToFocus()},n._redo=function(){this._historyService.redo(),this._canvasScrollingService.scrollToFocus()},t}(l.m),c()(r.prototype,"_fallbackPaste",[p.autobind],Object.getOwnPropertyDescriptor(r.prototype,"_fallbackPaste"),r.prototype),c()(r.prototype,"close",[u.d],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),c()(r.prototype,"_copy",[u.d],Object.getOwnPropertyDescriptor(r.prototype,"_copy"),r.prototype),c()(r.prototype,"_paste",[u.d],Object.getOwnPropertyDescriptor(r.prototype,"_paste"),r.prototype),c()(r.prototype,"_selectAll",[u.d],Object.getOwnPropertyDescriptor(r.prototype,"_selectAll"),r.prototype),c()(r.prototype,"_saveAs",[u.d],Object.getOwnPropertyDescriptor(r.prototype,"_saveAs"),r.prototype),c()(r.prototype,"_erase",[p.preventOnComponentProcessing,p.history,u.d],Object.getOwnPropertyDescriptor(r.prototype,"_erase"),r.prototype),c()(r.prototype,"_undo",[p.preventOnDocumentProcessing,u.d],Object.getOwnPropertyDescriptor(r.prototype,"_undo"),r.prototype),c()(r.prototype,"_redo",[p.preventOnDocumentProcessing,u.d],Object.getOwnPropertyDescriptor(r.prototype,"_redo"),r.prototype),r);t.a=v},492:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d=n(60),h=n.n(d),g=n(1),f=n.n(g),m=n(58),y=n.n(m),v=n(0),_=n.n(v),b=n(50),S=n.n(b),C=(n(61),n(16)),I=n(70),O=n(51),T=n(1079),L=n(1313),E=n(49),P={TEXT:"text",VERTICAL_IMAGE:"vertical_image",IMAGE:"image",LARGE_IMAGE:"large_image",AFFILIATE_TEXT:"shopping_affiliate_text",AFFILIATE_IMAGE:"shopping_affiliate_image",MOMENT:"moment"},w=480,k=270,x=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},n._externalLayout=null,n.useBsizeThumbnail=!0,n.isAffiliate=!1,h()(n,"layout",r,y()(n)),h()(n,"align",o,y()(n)),h()(n,"title",a,y()(n)),h()(n,"link",s,y()(n)),h()(n,"domain",c,y()(n)),h()(n,"thumbnail",l,y()(n)),h()(n,"description",u,y()(n)),h()(n,"video",p,y()(n)),n.oglinkSign="",n._configAgent=O.W.get("configAgent");var i=t,d=i.state,g=void 0===d?{}:d,f=i.config,m=void 0===f?{}:f;return n._externalLayout=Object(C.a)(m,"layout",n._externalLayout),n.useBsizeThumbnail=Object(C.a)(m,"useBsizeThumbnail",n.useBsizeThumbnail),n.attributes=Object(I.a)(n.attributes,m.attributes),n.title=Object(C.a)(g,"title",n.title),n.link=Object(C.a)(g,"link",n.link),n.domain=Object(C.a)(g,"domain",n.domain),n.thumbnail=Object(C.a)(g,"thumbnail",n.thumbnail),n.description=Object(C.a)(g,"description",n.description),n.video=Object(C.a)(g,"video",n.video),n.isAffiliate=Object(C.a)(g,"isAffiliate",n.isAffiliate),n.align=Object(C.a)(g,"align",n.align),n.layout=n._resolveLayout(Object(C.a)(g,"layout")),n.oglinkSign=g.oglinkSign||n.oglinkSign,n}_()(t,e);var n=t.prototype;return n._resolveLayout=function(e){return this._externalLayout?"function"==typeof this._externalLayout?this._externalLayout(this.toPlainJSON()):this._externalLayout:e||(this.isAffiliate?this.affiliateLayoutType:this.layoutType)},n._isBigSize=function(){if(!this.thumbnail)return!1;var e=this.thumbnail,t=e.width,n=e.height;return t>=w&&n>=k},n._isVerticalRatio=function(){if(!this.thumbnail)return!1;var e=this.thumbnail;return(e.width/e.height).toFixed(2)<=9/16},n.changeLayout=function(){},n.changeLayoutWithThumbnail=function(){this.layout=this._resolveLayout()},n.changeToTextLayout=function(){this.isAffiliate?this.layout=P.AFFILIATE_TEXT:this.layout=P.TEXT},n.collectStyle=function(){var e="justify"===this.align||null===this.align?"left":this.align;return{layoutType:this.layout.indexOf("image")>-1?"image":"text",layout:this.layout,thumbnail:this.thumbnail,align:e}},n.updateSign=function(e){var t=e.oglinkSign,n=e.link,i=e.thumbnail;this.oglinkSign=t,this.link=n,this.thumbnail=i,this.layout!==P.TEXT&&this.layout!==P.AFFILIATE_TEXT&&(this.layout=this._resolveLayout())},n.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,layout:this.layout,align:this.align,title:this.title,link:this.link,domain:this.domain,thumbnail:E.f.toJS(this.thumbnail),description:this.description,video:this.video,oglinkSign:this.oglinkSign}},f()(t,[{key:"layoutType",get:function(){return this.thumbnail?this._isVerticalRatio()?P.VERTICAL_IMAGE:this.useBsizeThumbnail&&this._isBigSize()?P.LARGE_IMAGE:P.IMAGE:P.TEXT}},{key:"affiliateLayoutType",get:function(){return this.thumbnail?P.AFFILIATE_IMAGE:P.AFFILIATE_TEXT}},{key:"isMomentLayout",get:function(){return this.layout===P.MOMENT}},{key:"emptySign",get:function(){return!this.oglinkSign}}]),t}(O.g),r=S()(i.prototype,"layout",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.TEXT}}),o=S()(i.prototype,"align",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=S()(i.prototype,"title",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=S()(i.prototype,"link",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=S()(i.prototype,"domain",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=S()(i.prototype,"thumbnail",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=S()(i.prototype,"description",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=S()(i.prototype,"video",[E.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);x.ctype="oglink",x.schema={id:T.a.string.isRequired,ctype:T.a.string.isRequired,layout:T.a.string.isRequired,align:T.a.string,title:T.a.string.isRequired,domain:T.a.string.isRequired,link:T.a.string.isRequired,thumbnail:T.a.shape(L.i),description:T.a.string,video:T.a.bool.isRequired,oglinkSign:T.a.string};t.a=x},493:function(e,t,n){"use strict";var i,r,o,a,s,c=n(17),l=n.n(c),u=n(60),p=n.n(u),d=n(58),h=n.n(d),g=n(0),f=n.n(g),m=n(50),y=n.n(m),v=(n(61),n(16)),_=n(70),b=n(102),S=n(51),C=n(1079),I=n(49),O={DEFAULT:"default",CODE_STRIPE:"code_stripe",CODE_BLACK:"code_black"},T=["layout"],L=(i=function(e){f()(n,e);var t=n.prototype;function n(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},n.codeTextMaxLength=5e3,p()(n,"align",r,h()(n)),p()(n,"layout",o,h()(n)),p()(n,"fontSizeCode",a,h()(n)),p()(n,"codeContents",s,h()(n));var i=t,c=i.state,l=void 0===c?{}:c,u=i.config,d=void 0===u?{}:u;return n._configAgent=S.W.get("configAgent"),n._componentFactory=S.W.get("componentFactory"),n.codeTextMaxLength=Object(v.a)(d,"codeTextMaxLength",n.codeTextMaxLength),n.attributes=Object(_.a)(n.attributes,d.attributes),n.layout=Object(v.a)(l,"layout",n.layout),n.fontSizeCode=Object(v.a)(l,"fontSizeCode",n.fontSizeCode),n.codeContents=Object(v.a)(l,"codeContents",n.codeContents),n}return t.toPlainJSON=function(){return{id:this.id,ctype:this.ctype,align:this.align,layout:this.layout,fontSizeCode:this.fontSizeCode,codeContents:this.codeContents}},t.changeFontSize=function(e){this.fontSizeCode=e},t.changeLayout=function(e){this.layout=e},t.setState=function(e){Object(b.a)(this,e)},t.updateProperty=function(e){var t=e.layout,n=l()(e,T);t&&this.changeLayout(t),Object(b.a)(this,n)},t.updateStyle=function(e){var t=e.fontSizeCode,n=e.align;t&&this.changeFontSize(t),n&&this.changeAlign(n)},t.updateCodeContents=function(e){this.codeContents=e},t.collectStyle=function(){return{align:"justify"===this.align||null===this.align?"left":this.align,layout:this.layout,fontSizeCode:this.fontSizeCode}},n}(S.g),r=y()(i.prototype,"align",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=y()(i.prototype,"layout",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.DEFAULT}}),a=y()(i.prototype,"fontSizeCode",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"fs13"}}),s=y()(i.prototype,"codeContents",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i);L.ctype="code",L.schema={id:C.a.string.isRequired,ctype:C.a.string.isRequired,layout:C.a.string.isRequired,fontSizeCode:C.a.string.isRequired,codeContents:C.a.string.isRequired,align:C.a.string};t.a=L},59:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return s});var i={BASIC:"basic",SEPARATOR_BAR:"separator-bar",TOGGLE:"toggle",GROUP_TOGGLE:"group-toggle",LABEL_SELECT:"label-select",ICON_SELECT:"icon-select",DROP_DOWN:"drop-down",COLOR_PICKER:"color-picker",INPUT:"input",CUSTOM_LAYER:"custom-layer",CYCLE_TOGGLE:"cycle-toggle",RANGE_SLIDER:"range-slider",CUSTOM:"custom",MORE_VIEW:"more-view",BASIC_SELECT:"basic-select",CUSTOM_SELECT:"custom-select"},r={TEXT:"text",ICON:"icon",MORE_VIEW:"more-view"},o={CONTEXT:"context",PROPERTY:"property",DOCUMENT:"document",CONTENTS:"contents",TEXT:"text"},a={TEXT_ICON:"text-icon",ICON:"icon"},s={fs10:{label:"fontSizeCode:label_fs10",value:"fs10",logId:"size10"},fs11:{label:"fontSizeCode:label_fs11",value:"fs11",logId:"size11"},fs12:{label:"fontSizeCode:label_fs12",value:"fs12",logId:"size12"},fs13:{label:"fontSizeCode:label_fs13",value:"fs13",logId:"size13"},fs14:{label:"fontSizeCode:label_fs14",value:"fs14",logId:"size14"},fs15:{label:"fontSizeCode:label_fs15",value:"fs15",logId:"size15"},fs16:{label:"fontSizeCode:label_fs16",value:"fs16",logId:"size16"},fs17:{label:"fontSizeCode:label_fs17",value:"fs17",logId:"size17"},fs18:{label:"fontSizeCode:label_fs18",value:"fs18",logId:"size18"},fs19:{label:"fontSizeCode:label_fs19",value:"fs19",logId:"size19"},fs20:{label:"fontSizeCode:label_fs20",value:"fs20",logId:"size20"},fs21:{label:"fontSizeCode:label_fs21",value:"fs21",logId:"size21"},fs22:{label:"fontSizeCode:label_fs22",value:"fs22",logId:"size22"},fs23:{label:"fontSizeCode:label_fs23",value:"fs23",logId:"size23"},fs24:{label:"fontSizeCode:label_fs24",value:"fs24",logId:"size24"},fs25:{label:"fontSizeCode:label_fs25",value:"fs25",logId:"size25"},fs26:{label:"fontSizeCode:label_fs26",value:"fs26",logId:"size26"},fs27:{label:"fontSizeCode:label_fs27",value:"fs27",logId:"size27"},fs28:{label:"fontSizeCode:label_fs28",value:"fs28",logId:"size28"},fs29:{label:"fontSizeCode:label_fs29",value:"fs29",logId:"size29"},fs30:{label:"fontSizeCode:label_fs30",value:"fs30",logId:"size30"},fs31:{label:"fontSizeCode:label_fs31",value:"fs31",logId:"size31"},fs32:{label:"fontSizeCode:label_fs32",value:"fs32",logId:"size32"},fs33:{label:"fontSizeCode:label_fs33",value:"fs33",logId:"size33"},fs34:{label:"fontSizeCode:label_fs34",value:"fs34",logId:"size34"},fs35:{label:"fontSizeCode:label_fs35",value:"fs35",logId:"size35"},fs36:{label:"fontSizeCode:label_fs36",value:"fs36",logId:"size36"},fs37:{label:"fontSizeCode:label_fs37",value:"fs37",logId:"size37"},fs38:{label:"fontSizeCode:label_fs38",value:"fs38",logId:"size38"},fs39:{label:"fontSizeCode:label_fs39",value:"fs39",logId:"size39"},fs40:{label:"fontSizeCode:label_fs40",value:"fs40",logId:"size40"}}},63:function(e,t,n){"use strict";var i,r=n(1),o=n.n(r),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(54),p=n.n(u),d=n(49),h=n(376),g=n(52),f=n(59),m=n(51),y=n(129),v=n(757),_=n(1125),b=["ai-write"],S=(i=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._setInstance=function(e){t._lottie=e},t._handleMouseOver=function(){t._lottie&&t._lottie.play()},t}s()(t,e);var n=t.prototype;return n.render=function(){var e,t=this.props,n=t.id,i=t.name,r=t.namespace,o=t.documentToolbarIconType,a=t.moreViewButton,s=t.deviceType,c=t.title,l=t.label,u=t.type,h=t.i18n,g=t.focused,S=t.logAreaId,C=t.logId,I=t.labelVisible,O=t.highlight,T=t.disabled,L=h(l),E=h(c),P=s===m.t.DESKTOP,w=r===f.e.DOCUMENT,k=o===f.d.TEXT_ICON,x=b.includes(i)&&!T&&k,D=!x&&(k||I),A=p()(((e={})["se-"+i+"-toolbar-button"]=!!i,e["se-"+r+"-toolbar-"+u+"-button"]=!w||!a,e["se-"+r+"-toolbar-"+u+"-more-button"]=w&&a,e["se-"+o+"-toolbar-button"]=P&&w,e)),j=x?"se-blind":"se-toolbar-icon",R=D?"se-toolbar-label":"se-blind";return d.b.createElement(y.a,{focused:g,disabled:T,namespace:r,logAreaId:S,logId:C,highlight:O,type:u,className:A,dataName:n,i18n:h,handleClick:this._handleClick,handleMouseOver:this._handleMouseOver},x&&d.b.createElement(v.a,{src:_,lottieRef:this._setInstance,style:this._lottieSize}),d.b.createElement("span",{className:j}),d.b.createElement("span",{className:R,"aria-hidden":P},L),P&&d.b.createElement("span",{className:"se-toolbar-tooltip"},E))},n._handleClick=function(e){var t=this.props,n=t.onClick,i=t.id,r=t.type,o=t.name,a=t.title,s=t.label,c=t.action,l=t.i18n,u=l(s),p=l(a);document.activeElement&&document.activeElement.blur(),n.apply(this,[{event:e,id:i,type:r,name:o,label:u,action:c,title:p}])},o()(t,[{key:"_lottieSize",get:function(){return{height:"54px",width:"48px"}}}]),t}(d.b.Component),l()(i.prototype,"_lottieSize",[d.e],Object.getOwnPropertyDescriptor(i.prototype,"_lottieSize"),i.prototype),l()(i.prototype,"_handleClick",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);S.defaultProps={id:"",focused:!1,labelVisible:!1,moreViewButton:!1,disabled:!1,label:"",action:"",name:"",namespace:"",title:"",highlight:{},onClick:function(){},i18n:function(e){return e}},S.propTypes={type:d.a.oneOf([f.b.BASIC]).isRequired,id:d.a.string,focused:d.a.bool,moreViewButton:d.a.bool,name:d.a.string,namespace:d.a.string,deviceType:d.a.string,documentToolbarIconType:d.a.string,labelVisible:d.a.bool,label:d.a.string,action:d.a.string,title:d.a.string,onClick:d.a.func,i18n:d.a.func,highlight:d.a.object,logAreaId:d.a.string,logId:d.a.string,disabled:d.a.bool},t.a=Object(h.b)(S)},64:function(e,t,n){"use strict";var i,r,o,a,s,c,l,u,p,d,h,g,f,m,y=n(56),v=n.n(y),_=n(55),b=n.n(_),S=n(17),C=n.n(S),I=n(0),O=n.n(I),T=n(50),L=n.n(T),E=n(49),P=n(52),w=n(153),k=n(59),x=["type","title","label","logId","options","optionType","useIconUpdate","value"],D=(i=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.DROP_DOWN:t,i=e.title,r=void 0===i?{inactive:"alignDropDown:title_inactive",active:"alignDropDown:title_active"}:i,o=e.label,a=void 0===o?"alignDropDown:label":o,s=e.logId,c=void 0===s?"align":s,l=e.options,u=void 0===l?{left:{title:"alignDropDown:left_title",label:"alignDropDown:left_label",logId:"left"},center:{title:"alignDropDown:center_title",label:"alignDropDown:center_label",logId:"center"},right:{title:"alignDropDown:right_title",label:"alignDropDown:right_label",logId:"right"}}:l,p=e.optionType,d=void 0===p?k.c.ICON:p,h=e.useIconUpdate,g=void 0===h||h,f=e.value,m=void 0===f?"":f,y=C()(e,x);return E.b.createElement(w.a,b()({},y,{type:n,title:r,label:a,value:m,logId:c,options:u,optionType:d,useIconUpdate:g,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeAlign(e),this.props.onClickSelector(e)},t}(E.b.Component),L()(i.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickOption"),i.prototype),i),A=["type","title","label","logId","options","optionType","value","useIconUpdate"],j=(r=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.DROP_DOWN:t,i=e.title,r=void 0===i?{inactive:"alignDropDown:title_inactive",active:"alignDropDown:title_active"}:i,o=e.label,a=void 0===o?"alignDropDown:label":o,s=e.logId,c=void 0===s?"align":s,l=e.options,u=void 0===l?{left:{title:"alignDropDown:left_title",label:"alignDropDown:left_label",logId:"left"},center:{title:"alignDropDown:center_title",label:"alignDropDown:center_label",logId:"center"},right:{title:"alignDropDown:right_title",label:"alignDropDown:right_label",logId:"right"},justify:{title:"alignDropDown:justify_title",label:"alignDropDown:justify_label",logId:"justify"}}:l,p=e.optionType,d=void 0===p?k.c.ICON:p,h=e.value,g=void 0===h?"":h,f=e.useIconUpdate,m=void 0===f||f,y=C()(e,A);return E.b.createElement(w.a,b()({},y,{type:n,title:r,label:a,value:g,logId:c,options:u,optionType:d,useIconUpdate:m,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeAlign(e),this.props.onClickSelector(e)},t}(E.b.Component),L()(r.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(r.prototype,"_handleClickOption"),r.prototype),r),R=["type","title","label","logId","options","optionType","value","useIconUpdate"],N=(o=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.DROP_DOWN:t,i=e.title,r=void 0===i?{inactive:"alignDropDown:title_inactive",active:"alignDropDown:title_active"}:i,o=e.label,a=void 0===o?"alignDropDown:label":o,s=e.logId,c=void 0===s?"align":s,l=e.options,u=void 0===l?{left:{title:"alignDropDown:left_title",label:"alignDropDown:left_label",logId:"left"},center:{title:"alignDropDown:center_title",label:"alignDropDown:center_label",logId:"center"}}:l,p=e.optionType,d=void 0===p?k.c.ICON:p,h=e.value,g=void 0===h?"":h,f=e.useIconUpdate,m=void 0===f||f,y=C()(e,R);return E.b.createElement(w.a,b()({},y,{type:n,title:r,label:a,value:g,logId:c,options:u,optionType:d,useIconUpdate:m,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeAlign(e),this.props.onClickSelector(e)},t}(E.b.Component),L()(o.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(o.prototype,"_handleClickOption"),o.prototype),o),M=n(298),B=["type","title","label","value","groups"],W=(a=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.CYCLE_TOGGLE:t,i=e.title,r=void 0===i?"alignGroup:title":i,o=e.label,a=void 0===o?"alignGroup:label":o,s=e.value,c=void 0===s?"left":s,l=e.groups,u=void 0===l?[{value:"left",title:"alignGroup:left_title",label:"alignGroup:left_label",logId:"left"},{value:"center",title:"alignGroup:center_title",label:"alignGroup:center_label",logId:"center"},{value:"right",title:"alignGroup:right_title",label:"alignGroup:right_label",logId:"right"}]:l,p=C()(e,B);return E.b.createElement(M.a,b()({},p,{type:n,title:r,label:a,value:c,groups:u,onChange:this._changeAlign}))},n._changeAlign=function(e){this.props.useCase.changeAlign(e)},t}(E.b.Component),L()(a.prototype,"_changeAlign",[P.autobind],Object.getOwnPropertyDescriptor(a.prototype,"_changeAlign"),a.prototype),a),U=["type","title","label","value","groups"],F=(s=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.CYCLE_TOGGLE:t,i=e.title,r=void 0===i?"alignGroupWithJustify:title":i,o=e.label,a=void 0===o?"alignGroupWithJustify:label":o,s=e.value,c=void 0===s?"left":s,l=e.groups,u=void 0===l?[{value:"left",title:"alignGroupWithJustify:left_title",label:"alignGroupWithJustify:left_label",logId:"left"},{value:"center",title:"alignGroupWithJustify:center_title",label:"alignGroupWithJustify:center_label",logId:"center"},{value:"right",title:"alignGroupWithJustify:right_title",label:"alignGroupWithJustify:right_label",logId:"right"},{value:"justify",title:"alignGroupWithJustify:justify_title",label:"alignGroupWithJustify:justify_label",logId:"justify"}]:l,p=C()(e,U);return E.b.createElement(M.a,b()({},p,{type:n,title:r,label:a,value:c,groups:u,onChange:this._changeAlign}))},n._changeAlign=function(e){this.props.useCase.changeAlign(e)},t}(E.b.Component),L()(s.prototype,"_changeAlign",[P.autobind],Object.getOwnPropertyDescriptor(s.prototype,"_changeAlign"),s.prototype),s),z=n(104),V=["type","title","label","groups","value"],G=(c=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"alignGroup:title":i,o=e.label,a=void 0===o?"alignGroup:label":o,s=e.groups,c=void 0===s?[{value:"left",title:"alignGroup:left_title",label:"alignGroup:left_label",logId:"left"},{value:"center",title:"alignGroup:center_title",label:"alignGroup:center_label",logId:"center"},{value:"right",title:"alignGroup:right_title",label:"alignGroup:right_label",logId:"right"}]:s,l=e.value,u=void 0===l?"":l,p=C()(e,V);return E.b.createElement(z.a,b()({},p,{type:n,title:r,label:a,groups:c,value:u,onChange:this._changeAlign}))},n._changeAlign=function(e){this.props.useCase.changeAlign(e)},t}(E.b.Component),L()(c.prototype,"_changeAlign",[P.autobind],Object.getOwnPropertyDescriptor(c.prototype,"_changeAlign"),c.prototype),c),H=["type","title","label","groups","value"],q=(l=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"alignGroupWithJustify:title":i,o=e.label,a=void 0===o?"alignGroupWithJustify:label":o,s=e.groups,c=void 0===s?[{value:"left",title:"alignGroupWithJustify:left_title",label:"alignGroupWithJustify:left_label",logId:"left"},{value:"center",title:"alignGroupWithJustify:center_title",label:"alignGroupWithJustify:center_label",logId:"center"},{value:"right",title:"alignGroupWithJustify:right_title",label:"alignGroupWithJustify:right_label",logId:"right"},{value:"justify",title:"alignGroupWithJustify:justify_title",label:"alignGroupWithJustify:justify_label",logId:"justify"}]:s,l=e.value,u=void 0===l?"left":l,p=C()(e,H);return E.b.createElement(z.a,b()({},p,{type:n,title:r,label:a,groups:c,value:u,onChange:this._changeAlign}))},n._changeAlign=function(e){this.props.useCase.changeAlign(e)},t}(E.b.Component),L()(l.prototype,"_changeAlign",[P.autobind],Object.getOwnPropertyDescriptor(l.prototype,"_changeAlign"),l.prototype),l),J=["type","title","label","groups","value"],K=(u=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"alignGroupWithoutRight:title":i,o=e.label,a=void 0===o?"alignGroupWithoutRight:label":o,s=e.groups,c=void 0===s?[{value:"left",title:"alignGroupWithoutRight:left_title",label:"alignGroupWithoutRight:left_label",logId:"left"},{value:"center",title:"alignGroupWithoutRight:center_title",label:"alignGroupWithoutRight:center_label",logId:"center"}]:s,l=e.value,u=void 0===l?"left":l,p=C()(e,J);return E.b.createElement(z.a,b()({},p,{type:n,title:r,label:a,groups:c,value:u,onChange:this._changeAlign}))},n._changeAlign=function(e){this.props.useCase.changeAlign(e)},t}(E.b.Component),L()(u.prototype,"_changeAlign",[P.autobind],Object.getOwnPropertyDescriptor(u.prototype,"_changeAlign"),u.prototype),u),X=n(113),Y=n(322),Q=n(555),Z=["type","title","label","useBackground","useCurrentColor","useColorDetailFlag","option","value","defaultValue","logId"],$=(p=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.COLOR_PICKER:t,i=e.title,r=void 0===i?"backgroundColor:title":i,o=e.label,a=void 0===o?"backgroundColor:label":o,s=e.useBackground,c=void 0===s||s,l=e.useCurrentColor,u=void 0===l||l,p=e.useColorDetailFlag,d=void 0===p||p,h=e.option,g=void 0===h?{recentColors:[]}:h,f=e.value,m=void 0===f?"":f,y=e.defaultValue,v=void 0===y?"#fff":y,_=e.logId,S=void 0===_?"bgcolor":_,I=C()(e,Z);return E.b.createElement(Y.a,b()({},I,{type:n,title:r,label:a,useBackground:c,useCurrentColor:u,useColorDetailFlag:d,option:g,value:m,defaultValue:v,logId:S,onChange:this._handleChange,recentColors:g.recentColors}))},n._handleChange=function(e){var t=this.props,n=t.useCase,i=t.onClickSelector,r=(0,t.i18n)("colorPickerButton:specify_different_color");n.compareStyle({styleName:"fontColor",warningMessage:r},function(t){return Object(X.a)(t,function(t){return t&&Q.a.isSameHexColors(t,e.value)})})&&(n.changeBackgroundColor(e),i(e))},t}(E.b.Component),L()(p.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(p.prototype,"_handleChange"),p.prototype),p),ee=n(756),te=["type"],ne=function(e){function t(){return e.apply(this,arguments)||this}return O()(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.SEPARATOR_BAR:t,i=C()(e,te);return E.b.createElement(ee.a,b()({},i,{type:n}))},t}(E.b.Component),ie=n(107),re=["type","value","title","label","logId"],oe=(d=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.value,r=void 0!==i&&i,o=e.title,a=void 0===o?{inactive:"bold:title_inactive",active:"bold:title_active"}:o,s=e.label,c=void 0===s?"bold:label":s,l=e.logId,u=void 0===l?"bold":l,p=C()(e,re);return E.b.createElement(ie.a,b()({},p,{type:n,value:r,title:a,label:c,logId:u,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.toggleBold(e)},t}(E.b.Component),L()(d.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(d.prototype,"_handleChange"),d.prototype),d),ae=n(758),se=n(759),ce=["type","title","label","groups","value"],le=(h=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"contentModeGroupWithoutExtendPagefull:title":i,o=e.label,a=void 0===o?"contentModeGroupWithoutExtendPagefull:label":o,s=e.groups,c=void 0===s?[{value:"normal",title:"contentModeGroupWithoutExtendPagefull:normal_title",label:"contentModeGroupWithoutExtendPagefull:normal_label",logId:"arrnml"},{value:"fit",title:"contentModeGroupWithoutExtendPagefull:fit_title",label:"contentModeGroupWithoutExtendPagefull:fit_label",logId:"arrfit"}]:s,l=e.value,u=void 0===l?"fit":l,p=C()(e,ce);return E.b.createElement(z.a,b()({},p,{type:n,title:r,label:a,groups:c,value:u,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeContentMode(e)},t}(E.b.Component),L()(h.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(h.prototype,"_handleChange"),h.prototype),h),ue=n(761),pe=n(760),de=n(762),he=n(763),ge=["type","value","title","label","logId"],fe=(g=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.value,r=void 0!==i&&i,o=e.title,a=void 0===o?{inactive:"dropCap:title_inactive",active:"dropCap:title_active"}:o,s=e.label,c=void 0===s?"dropCap:label":s,l=e.logId,u=void 0===l?"dropcap":l,p=C()(e,ge);return E.b.createElement(ie.a,b()({},p,{type:n,value:r,title:a,label:c,logId:u,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.toggleDropCap(e)},t}(E.b.Component),L()(g.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(g.prototype,"_handleChange"),g.prototype),g),me=["type","title","label","option","value","defaultValue","useCurrentColor","useColorDetailFlag","logId"],ye=(f=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.COLOR_PICKER:t,i=e.title,r=void 0===i?"fontColor:title":i,o=e.label,a=void 0===o?"fontColor:label":o,s=e.option,c=void 0===s?{recentColors:[]}:s,l=e.value,u=void 0===l?"":l,p=e.defaultValue,d=void 0===p?"#000":p,h=e.useCurrentColor,g=void 0===h||h,f=e.useColorDetailFlag,m=void 0===f||f,y=e.logId,v=void 0===y?"color":y,_=C()(e,me);return E.b.createElement(Y.a,b()({},_,{type:n,title:r,label:a,option:c,value:u,defaultValue:d,useCurrentColor:g,useColorDetailFlag:m,logId:v,onChange:this._handleChange,recentColors:c.recentColors}))},n._handleChange=function(e){var t=this.props,n=t.useCase,i=t.onClickSelector,r=(0,t.i18n)("colorPickerButton:specify_different_color");n.compareStyle({styleName:"backgroundColor",warningMessage:r},function(t){return Object(X.a)(t,function(t){return t&&Q.a.isSameHexColors(t,e.value)})})&&(n.changeFontColor(e),i(e))},t}(E.b.Component),L()(f.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(f.prototype,"_handleChange"),f.prototype),f),ve=n(211),_e=n(51),be=["type","title","label","hasIcon","value","logId","highlight","buttonConfig"];var Se,Ce,Ie,Oe=(m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._fontSpec=_e.W.get("fontManager").getCurrentFontSpec(),n}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.LABEL_SELECT:t,i=e.title,r=void 0===i?"fontFamily:title":i,o=e.label,a=void 0===o?"fontFamily:label":o,s=e.hasIcon,c=void 0!==s&&s,l=e.value,u=void 0===l?"system":l,p=e.logId,d=void 0===p?"font":p,h=e.highlight,g=e.buttonConfig,f=C()(e,be),m=function(e,t){return void 0===t&&(t=Object.keys(e)),t.reduce(function(t,n){var i=e[n];return i&&(t[n]={label:i.label,class:i.class,logId:i.logId}),t},{})}(this._fontSpec,g&&g.allowList);return E.b.createElement(ve.a,b()({},f,{type:n,title:r,label:a,hasIcon:c,logId:d,onClickOption:this._handleClickOption,options:m,highlight:h,value:u||Object.keys(m)[0]}))},n._handleClickOption=function(e){this.props.useCase.changeFontFamily(e),this.props.onClickSelector(e)},t}(E.b.Component),L()(m.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(m.prototype,"_handleClickOption"),m.prototype),m),Te=n(134),Le=["type","title","label","hasIcon","value","logId","buttonConfig"],Ee=["fs11","fs13","fs15","fs16","fs19","fs24","fs28","fs30","fs34","fs38"],Pe=(Se=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.LABEL_SELECT:t,i=e.title,r=void 0===i?"fontSizeCode:title":i,o=e.label,a=void 0===o?"fontSizeCode:label":o,s=e.hasIcon,c=void 0!==s&&s,l=e.value,u=void 0===l?"fs16":l,p=e.logId,d=void 0===p?"size":p,h=e.buttonConfig,g=C()(e,Le),f=this._refineOptions(h&&h.allowList);return E.b.createElement(ve.a,b()({},g,{type:n,title:r,label:a,hasIcon:c,value:u,logId:d,options:f,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeFontSize(e),this.props.onClickSelector(e)},n._refineOptions=function(e){return Object(Te.a)(k.a,e||Ee)},t}(E.b.Component),L()(Se.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(Se.prototype,"_handleClickOption"),Se.prototype),Se),we=["type","value","title","label","logId"],ke=(Ce=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.value,r=void 0!==i&&i,o=e.title,a=void 0===o?{inactive:"italic:title_inactive",active:"italic:title_active"}:o,s=e.label,c=void 0===s?"italic:label":s,l=e.logId,u=void 0===l?"italic":l,p=C()(e,we);return E.b.createElement(ie.a,b()({},p,{type:n,value:r,title:a,label:c,logId:u,onChange:this._handleClick}))},n._handleClick=function(e){this.props.useCase.toggleItalic(e)},t}(E.b.Component),L()(Ce.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Ce.prototype,"_handleClick"),Ce.prototype),Ce),xe=["type","title","label","applyLabel","value","logId","options","optionType"];var De={150:{label:"lineHeight:label_150",logId:"line150"},160:{label:"lineHeight:label_160",logId:"line160"},170:{label:"lineHeight:label_170",logId:"line170"},180:{label:"lineHeight:label_180",logId:"line180"},190:{label:"lineHeight:label_190",logId:"line190"},200:{label:"lineHeight:label_200",logId:"line200"},210:{label:"lineHeight:label_210",logId:"line210"},"option-value":{label:"",useInput:!0,placeholder:"lineHeight:placeholder",logId:"linec"}},Ae=(Ie=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.DROP_DOWN:t,i=e.title,r=void 0===i?{inactive:"lineHeight:title_inactive",active:"lineHeight:title_active"}:i,o=e.label,a=void 0===o?"lineHeight:label":o,s=e.applyLabel,c=void 0===s?"lineHeight:apply_label":s,l=e.value,u=void 0===l?"":l,p=e.logId,d=void 0===p?"line":p,h=e.options,g=void 0===h?De:h,f=e.optionType,m=void 0===f?k.c.TEXT:f,y=C()(e,xe),v=(100*u).toFixed();return E.b.createElement(w.a,b()({},y,{type:n,title:r,label:a,applyLabel:c,value:v,logId:d,options:g,optionType:m,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){var t=this.props,n=t.value,i=void 0===n?"":n,r=t.options,o=void 0===r?De:r,a=t.useCase,s=t.onClickSelector;(function(e,t,n){var i=""===e.value,r=!1===Object.keys(n).includes(t);return i&&r&&""!==t})(e,i,o)&&(e.value=(100*i).toFixed()),a.changeLineHeight(e),s(e)},t}(E.b.Component),L()(Ie.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(Ie.prototype,"_handleClickOption"),Ie.prototype),Ie);Ae.propTypes={useCase:E.a.object,onClickSelector:E.a.func};var je,Re,Ne,Me,Be,We,Ue,Fe,ze,Ve,Ge,He,qe,Je,Ke,Xe,Ye,Qe,Ze=Ae,$e=n(210),et=n(430),tt=["type","value","title","label","labelVisible","selectIfHasValue","onValidateValue","custom","logId"],nt=(je=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.CUSTOM_LAYER:t,i=e.value,r=void 0===i?"":i,o=e.title,a=void 0===o?{inactive:"link:title_inactive",active:"link:title_active"}:o,s=e.label,c=void 0===s?"link:label":s,l=e.labelVisible,u=void 0!==l&&l,p=e.selectIfHasValue,d=void 0===p||p,h=e.onValidateValue,g=void 0===h?Q.a.hasValue:h,f=e.custom,m=void 0===f?{CustomLayer:et.a,customProps:{placeholder:"link:custom_placeholder",applyLabel:"link:apply_label"}}:f,y=e.logId,v=void 0===y?"urllink":y,_=C()(e,tt);return E.b.createElement($e.a,b()({},_,{type:n,title:a,label:c,labelVisible:u,selectIfHasValue:d,onValidateValue:g,logId:v,custom:m,onClick:this._handleClick,onChange:this._handleChange,value:r||""}))},n._handleClick=function(e){this.props.useCase.toggleButton(e),this.props.onClickSelector(e)},n._handleChange=function(e){this.props.useCase.changeLink(e),this.props.onClickSelector(e)},t}(E.b.Component),L()(je.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(je.prototype,"_handleClick"),je.prototype),L()(je.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(je.prototype,"_handleChange"),je.prototype),je),it=n(764),rt=["type","title","label","labelVisible","useIcon","value","logId","groups"],ot=(Re=function(e){function t(){var t;t=e.call(this)||this;var n=_e.W.get("configAgent");return t._allowLayouts=n.get("productConfig.quotation.layouts"),t}O()(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.type,i=void 0===n?k.b.GROUP_TOGGLE:n,r=t.title,o=void 0===r?"quotationLayout:title":r,a=t.label,s=void 0===a?"quotationLayout:label":a,c=t.labelVisible,l=void 0===c||c,u=t.useIcon,p=void 0!==u&&u,d=t.value,h=void 0===d?"default":d,g=t.logId,f=void 0===g?"quota":g,m=t.groups,y=void 0===m?[{value:"default",title:"quotationLayout:default_title",label:"quotationLayout:default_label",logId:"quota0"},{value:"quotation_line",title:"quotationLayout:line_title",label:"quotationLayout:line_label",logId:"quota1"},{value:"quotation_bubble",title:"quotationLayout:bubble_title",label:"quotationLayout:bubble_label",logId:"quota2"},{value:"quotation_underline",title:"quotationLayout:underline_title",label:"quotationLayout:underline_label",logId:"quota3"},{value:"quotation_postit",title:"quotationLayout:postit_title",label:"quotationLayout:postit_label",logId:"quota4"},{value:"quotation_corner",title:"quotationLayout:corner_title",label:"quotationLayout:corner_label",logId:"quota5"}]:m,v=C()(t,rt),_=y;return this._allowLayouts&&(_=_.filter(function(t){return e._allowLayouts.includes(t.value)})),E.b.createElement(z.a,b()({},v,{type:i,title:o,label:s,labelVisible:l,useIcon:p,value:h,logId:f,groups:_,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeQuotationLayout(e)},t}(E.b.Component),L()(Re.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(Re.prototype,"_handleChange"),Re.prototype),Re),at=["type","title","label","value","groups"],st=(Ne=function(e){function t(){var t;t=e.call(this)||this;var n=_e.W.get("configAgent");return t._allowLayouts=n.get("productConfig.sectionTitle.layouts"),t}O()(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.type,i=void 0===n?k.b.GROUP_TOGGLE:n,r=t.title,o=void 0===r?"sectionTitleLayout:title":r,a=t.label,s=void 0===a?"sectionTitleLayout:label":a,c=t.value,l=void 0===c?"default":c,u=t.groups,p=void 0===u?[{value:"default",title:"sectionTitleLayout:default_title",label:"sectionTitleLayout:default_label",logId:"section-title-layout-default"},{value:"heading1",title:"sectionTitleLayout:heading1_title",label:"sectionTitleLayout:heading1_label",logId:"section-title-layout-heading1"},{value:"heading2",title:"sectionTitleLayout:heading2_title",label:"sectionTitleLayout:heading2_label",logId:"section-title-layout-heading2"}]:u,d=C()(t,at),h=p;return this._allowLayouts&&(h=h.filter(function(t){return e._allowLayouts.includes(t.value)})),E.b.createElement(z.a,b()({},d,{type:i,title:o,label:s,value:l,groups:h,onChange:this._handleChange}))},n._handleChange=function(e){var t=e.value;this.props.useCase.changeLayout({value:t}),this.props.onClickSelector(e)},t}(E.b.Component),L()(Ne.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(Ne.prototype,"_handleChange"),Ne.prototype),Ne),ct=n(63),lt=["type","title","label","logId"],ut=function(e,t,n,i){var r=_e.W.get("domAccessor").getScrollTarget(document.documentElement).scrollTop,o=i+r,a=e+t+r,s=a+350;return s>o?a-(s-o)-50:a},pt=(Me=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"specialLetter:title":i,o=e.label,a=void 0===o?"specialLetter:label":o,s=e.logId,c=void 0===s?"spclet":s,l=C()(e,lt);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(e){var t=e.event,n=_e.W.get("domAccessor").getContentContainer().getBoundingClientRect(),i=n.left,r=(n.top,n.bottom),o=t.currentTarget.getBoundingClientRect(),a=o.top,s=o.left,c=o.height,l={pageX:s+o.width-i,pageY:ut(a,c,0,r),activated:"text"};this.props.useCase.openSpecialLetter(l)},t}(E.b.Component),L()(Me.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Me.prototype,"_handleClick"),Me.prototype),Me),dt=["type","title","label","logId","labelVisible"],ht=(Be=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"speller:title":i,o=e.label,a=void 0===o?"speller:label":o,s=e.logId,c=void 0===s?"spl":s,l=e.labelVisible,u=void 0===l||l,p=C()(e,dt);return E.b.createElement(ct.a,b()({},p,{type:n,title:r,label:a,logId:c,labelVisible:u,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.startSpellCheck()},t}(E.b.Component),L()(Be.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Be.prototype,"_handleClick"),Be.prototype),Be),gt=["type","value","title","label","logId"],ft=(We=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.value,r=void 0!==i&&i,o=e.title,a=void 0===o?{inactive:"strikeThrough:title_inactive",active:"strikeThrough:title_active"}:o,s=e.label,c=void 0===s?"strikeThrough:label":s,l=e.logId,u=void 0===l?"strike":l,p=C()(e,gt);return E.b.createElement(ie.a,b()({},p,{type:n,value:r,title:a,label:c,logId:u,onChange:this._handleChange}))},n._handleChange=function(){this.props.useCase.toggleStrikeThrough()},t}(E.b.Component),L()(We.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(We.prototype,"_handleChange"),We.prototype),We),mt=["type","value","title","label","logId"],yt=(Ue=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.value,r=void 0!==i&&i,o=e.title,a=void 0===o?{inactive:"subscript:title_inactive",active:"subscript:title_active"}:o,s=e.label,c=void 0===s?"subscript:label":s,l=e.logId,u=void 0===l?"subsct":l,p=C()(e,mt);return E.b.createElement(ie.a,b()({},p,{type:n,value:r,title:a,label:c,logId:u,onChange:this._handleChange}))},n._handleChange=function(){this.props.useCase.toggleSubscript()},t}(E.b.Component),L()(Ue.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(Ue.prototype,"_handleChange"),Ue.prototype),Ue),vt=["type","value","title","label","logId"],_t=(Fe=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.value,r=void 0!==i&&i,o=e.title,a=void 0===o?{inactive:"superscript:title_inactive",active:"superscript:title_active"}:o,s=e.label,c=void 0===s?"superscript:label":s,l=e.logId,u=void 0===l?"supsct":l,p=C()(e,vt);return E.b.createElement(ie.a,b()({},p,{type:n,value:r,title:a,label:c,logId:u,onChange:this._handleChange}))},n._handleChange=function(){this.props.useCase.toggleSuperscript()},t}(E.b.Component),L()(Fe.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(Fe.prototype,"_handleChange"),Fe.prototype),Fe),bt=n(767),St=["type","title","label","logId","options","optionType","value","selectedComponentType"],Ct=["text","sectionTitle"],It=["quotation"],Ot=(ze=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=_e.W.get("configAgent"),n._option={heading1:{title:"textFormatDropdown:heading1_title",label:"textFormatDropdown:heading1_label",ctype:"sectionTitle",logId:"fmtHeading1"},heading2:{title:"textFormatDropdown:heading2_title",label:"textFormatDropdown:heading2_label",ctype:"sectionTitle",logId:"fmtHeading2"},default:{title:"textFormatDropdown:text_title",label:"textFormatDropdown:text_label",ctype:"text",logId:"fmtDefault"}},n}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.DROP_DOWN:t,i=e.title,r=void 0===i?{inactive:"textFormatDropdown:title_inactive",active:"textFormatDropdown:title_active"}:i,o=e.label,a=void 0===o?"textFormatDropdown:label":o,s=e.logId,c=void 0===s?"fmt":s,l=e.options,u=void 0===l?this._option:l,p=e.optionType,d=void 0===p?k.c.TEXT:p,h=e.value,g=void 0===h?"":h,f=e.selectedComponentType,m=void 0===f?"":f,y=C()(e,St),v=!Ct.includes(m),_=!!g;return E.b.createElement(w.a,b()({},y,{type:n,title:r,label:a,value:g,logId:c,disabled:v,options:u,optionType:d,useIconUpdate:_,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){var t=this._refineClickMeta(e),n=t.textFormat,i=t.layout;this.props.useCase.changeTextLayout(n,i,It),this.props.onClickSelector(e)},n._refineClickMeta=function(e){var t=e.value;return{textFormat:this._option[t].ctype,layout:t}},t}(E.b.Component),L()(ze.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(ze.prototype,"_handleClickOption"),ze.prototype),ze),Tt=["type","value","title","label","logId"],Lt=(Ve=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.value,r=void 0!==i&&i,o=e.title,a=void 0===o?{inactive:"underline:title_inactive",active:"underline:title_active"}:o,s=e.label,c=void 0===s?"underline:label":s,l=e.logId,u=void 0===l?"underline":l,p=C()(e,Tt);return E.b.createElement(ie.a,b()({},p,{type:n,value:r,title:a,label:c,logId:u,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.toggleUnderline(e)},t}(E.b.Component),L()(Ve.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(Ve.prototype,"_handleChange"),Ve.prototype),Ve),Et=n(768),Pt=n(769),wt=["type","title","label","logId"],kt=(Ge=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.title,r=void 0===i?{inactive:"library:title",active:"library:title"}:i,o=e.label,a=void 0===o?"library:label":o,s=e.logId,c=void 0===s?"lib":s,l=C()(e,wt),u=l.isActivated,p=void 0!==u&&u;return E.b.createElement(ie.a,b()({},l,{type:n,value:p,title:r,label:a,logId:c,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.toggle(e)},t}(E.b.Component),L()(Ge.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(Ge.prototype,"_handleChange"),Ge.prototype),Ge),xt=["type","title","label","logId"],Dt=(He=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"codeInsert:title":i,o=e.label,a=void 0===o?"codeInsert:label":o,s=e.logId,c=void 0===s?"code":s,l=C()(e,xt);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,logId:c,label:a,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.insertSourceCode()},t}(E.b.Component),L()(He.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(He.prototype,"_handleClick"),He.prototype),He),At=["type","title","label","logId"],jt=(qe=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"chatInsert:title":i,o=e.label,a=void 0===o?"chatInsert:label":o,s=e.logId,c=void 0===s?"chat":s,l=C()(e,At);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.insertChat()},t}(E.b.Component),L()(qe.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(qe.prototype,"_handleClick"),qe.prototype),qe),Rt=n(433),Nt=["title","label","selectorLabel","logId","options"],Mt=(Je=function(e){function t(){var t;t=e.call(this)||this;var n=_e.W.get("configAgent").get("productConfig.horizontalLine")||{};return t._allowLayouts=n.layouts,t._useBasicButton=n.useBasicButton,t}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.title,n=void 0===t?"horizontalLineInsert:title":t,i=e.label,r=void 0===i?"horizontalLineInsert:label":i,o=e.selectorLabel,a=void 0===o?"horizontalLineInsert:selector_label":o,s=e.logId,c=void 0===s?"horizt":s,l=e.options,u=void 0===l?{default:{label:"horizontalLineInsert:default_label",logId:"horizt0"},line1:{label:"horizontalLineInsert:line1_label",logId:"horizt1"},line2:{label:"horizontalLineInsert:line2_label",logId:"horizt2"},line3:{label:"horizontalLineInsert:line3_label",logId:"horizt3"},line4:{label:"horizontalLineInsert:line4_label",logId:"horizt4"},line5:{label:"horizontalLineInsert:line5_label",logId:"horizt5"},line6:{label:"horizontalLineInsert:line6_label",logId:"horizt6"},line7:{label:"horizontalLineInsert:line7_label",logId:"horizt7"}}:l,p=C()(e,Nt),d=u,h=Rt.a,g=k.b.ICON_SELECT;return this._allowLayouts&&(d=Object(Te.a)(d,this._allowLayouts)),this._useBasicButton&&(h=ct.a,g=k.b.BASIC),E.b.createElement(h,b()({},p,{type:g,title:n,label:r,selectorLabel:a,logId:c,options:d,onClick:this._handleClick,onClickOption:this._handleClickOption}))},n._handleClick=function(e){var t=e.selectedValue;this.props.useCase.insertHorizontalLine(t)},n._handleClickOption=function(e){var t=e.value;this.props.useCase.insertHorizontalLine(t),this.props.onClickSelector(e)},t}(E.b.Component),L()(Je.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Je.prototype,"_handleClick"),Je.prototype),L()(Je.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(Je.prototype,"_handleClickOption"),Je.prototype),Je),Bt=n(771),Wt=["type","title","label","logId"],Ut=(Ke=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"formulaInsert:title":i,o=e.label,a=void 0===o?"formulaInsert:label":o,s=e.logId,c=void 0===s?"formula":s,l=C()(e,Wt);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(e){this.props.useCase.insertFormula(e)},t}(E.b.Component),L()(Ke.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Ke.prototype,"_handleClick"),Ke.prototype),Ke),Ft=["title","label","selectorLabel","logId","options"],zt=(Xe=function(e){function t(){var t;t=e.call(this)||this;var n=_e.W.get("configAgent").get("productConfig.quotation")||{};return t._allowLayouts=n.layouts,t._useBasicButton=n.useBasicButton,t}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.title,n=void 0===t?"quotationInsert:title":t,i=e.label,r=void 0===i?"quotationInsert:label":i,o=e.selectorLabel,a=void 0===o?"quotationInsert:selector_label":o,s=e.logId,c=void 0===s?"quota":s,l=e.options,u=void 0===l?{default:{label:"quotationInsert:default_label",logId:"quota0"},quotation_line:{label:"quotationInsert:line_label",logId:"quota1"},quotation_bubble:{label:"quotationInsert:bubble_label",logId:"quota2"},quotation_underline:{label:"quotationInsert:underline_label",logId:"quota3"},quotation_postit:{label:"quotationInsert:postit_label",logId:"quota4"},quotation_corner:{label:"quotationInsert:corner_label",logId:"quota5"}}:l,p=C()(e,Ft),d=u,h=Rt.a,g=k.b.ICON_SELECT;return this._allowLayouts&&(d=Object(Te.a)(d,this._allowLayouts)),this._useBasicButton&&(h=ct.a,g=k.b.BASIC),E.b.createElement(h,b()({},p,{type:g,title:n,label:r,selectorLabel:a,logId:c,options:d,onClick:this._handleClick,onClickOption:this._handleClickOption}))},n._handleClick=function(e){var t=e.selectedValue;this._useBasicButton?this.props.useCase.changeTextLayout(t):this.props.useCase.insertQuotation(t)},n._handleClickOption=function(e){var t=e.value;this.props.useCase.insertQuotation(t),this.props.onClickSelector(e)},t}(E.b.Component),L()(Xe.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Xe.prototype,"_handleClick"),Xe.prototype),L()(Xe.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(Xe.prototype,"_handleClickOption"),Xe.prototype),Xe),Vt=["type","title","label","logId"],Gt=(Ye=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"tableInsert:title":i,o=e.label,a=void 0===o?"tableInsert:label":o,s=e.logId,c=void 0===s?"table":s,l=C()(e,Vt);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.insertTable()},t}(E.b.Component),L()(Ye.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Ye.prototype,"_handleClick"),Ye.prototype),Ye),Ht=["type","title","label","logId"],qt=(Qe=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"videoInsert:title":i,o=e.label,a=void 0===o?"videoInsert:label":o,s=e.logId,c=void 0===s?"video":s,l=C()(e,Ht);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openVideoUploader()},t}(E.b.Component),L()(Qe.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Qe.prototype,"_handleClick"),Qe.prototype),Qe);qt.propTypes={useCase:E.a.object};var Jt,Kt,Xt,Yt,Qt,Zt,$t,en=qt,tn=["type","title","label","logId"],nn=(Jt=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"audioInsert:title":i,o=e.label,a=void 0===o?"audioInsert:label":o,s=e.logId,c=void 0===s?"audio":s,l=C()(e,tn);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._insertAudio}))},n._insertAudio=function(e){this.props.useCase.insertAudio(e)},t}(E.b.Component),L()(Jt.prototype,"_insertAudio",[P.autobind],Object.getOwnPropertyDescriptor(Jt.prototype,"_insertAudio"),Jt.prototype),Jt),rn=["type","title","label","logId"],on=(Kt=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"socialMediaImageInsert:title":i,o=e.label,a=void 0===o?"socialMediaImageInsert:label":o,s=e.logId,c=void 0===s?"snsimg":s,l=C()(e,rn);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openPopup()},t}(E.b.Component),L()(Kt.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Kt.prototype,"_handleClick"),Kt.prototype),Kt),an=["type","title","label","logId"],sn=(Xt=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"fileInsert:title":i,o=e.label,a=void 0===o?"fileInsert:label":o,s=e.logId,c=void 0===s?"file":s,l=C()(e,an);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.insertFile()},t}(E.b.Component),L()(Xt.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Xt.prototype,"_handleClick"),Xt.prototype),Xt),cn=["type","title","label","logId"],ln=(Yt=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"oglinkInsert:title":i,o=e.label,a=void 0===o?"oglinkInsert:label":o,s=e.logId,c=void 0===s?"link":s,l=C()(e,cn);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openLinkLayer()},t}(E.b.Component),L()(Yt.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Yt.prototype,"_handleClick"),Yt.prototype),Yt),un=["type","title","label","logId"],pn=(Qt=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"mapInsert:title":i,o=e.label,a=void 0===o?"mapInsert:label":o,s=e.logId,c=void 0===s?"map":s,l=C()(e,un);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openPlacePopup()},t}(E.b.Component),L()(Qt.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Qt.prototype,"_handleClick"),Qt.prototype),Qt),dn=["type","title","label","logId"],hn=(Zt=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"scheduleInsert:title":i,o=e.label,a=void 0===o?"scheduleInsert:label":o,s=e.logId,c=void 0===s?"schedule":s,l=C()(e,dn);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openScheduleLayer()},t}(E.b.Component),L()(Zt.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Zt.prototype,"_handleClick"),Zt.prototype),Zt),gn=["type","title","label","logId"],fn=($t=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.title,r=void 0===i?{inactive:"searchButton:title",active:"searchButton:title"}:i,o=e.label,a=void 0===o?"searchButton:label":o,s=e.logId,c=void 0===s?"search":s,l=C()(e,gn),u=l.isActivated,p=void 0!==u&&u;return E.b.createElement(ie.a,b()({},l,{type:n,value:p,title:r,label:a,logId:c,onChange:this._handleChange}))},n._handleChange=function(){this.props.useCase.toggle()},t}(E.b.Component),L()($t.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor($t.prototype,"_handleChange"),$t.prototype),$t);fn.propTypes={useCase:E.a.object};var mn,yn=fn,vn=["type","title","label","logId"],_n=(mn=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.title,r=void 0===i?{inactive:"moment:title",active:"moment:title"}:i,o=e.label,a=void 0===o?"moment:label":o,s=e.logId,c=void 0===s?"moment":s,l=C()(e,vn),u=l.isActivated,p=void 0!==u&&u;return E.b.createElement(ie.a,b()({},l,{type:n,value:p,title:r,label:a,logId:c,onChange:this._handleChange}))},n._handleChange=function(){this.props.useCase.toggle()},t}(E.b.Component),L()(mn.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(mn.prototype,"_handleChange"),mn.prototype),mn);_n.propTypes={useCase:E.a.object};var bn,Sn,Cn,In,On,Tn=_n,Ln=["type","title","label","logId"],En=(bn=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.title,r=void 0===i?{inactive:"stickerInsert:title",active:"stickerInsert:title"}:i,o=e.label,a=void 0===o?"stickerInsert:label":o,s=e.logId,c=void 0===s?"sticker":s,l=C()(e,Ln),u=l.isActivated,p=void 0!==u&&u;return E.b.createElement(ie.a,b()({},l,{type:n,value:p,title:r,label:a,logId:c,onChange:this._handleChange}))},n._handleChange=function(){this.props.useCase.toggle()},t}(E.b.Component),L()(bn.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(bn.prototype,"_handleChange"),bn.prototype),bn),Pn=["type","title","label","logId"],wn=(Sn=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.title,r=void 0===i?{inactive:"template:title",active:"template:title"}:i,o=e.label,a=void 0===o?"template:label":o,s=e.logId,c=void 0===s?"template":s,l=C()(e,Pn),u=l.isActivated,p=void 0!==u&&u;return E.b.createElement(ie.a,b()({},l,{type:n,value:p,title:r,label:a,logId:c,onChange:this._handleChange}))},n._handleChange=function(){this.props.useCase.toggle()},t}(E.b.Component),L()(Sn.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(Sn.prototype,"_handleChange"),Sn.prototype),Sn),kn=n(775),xn=["type","title","label","logId","labelVisible"],Dn=(Cn=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"toText:title":i,o=e.label,a=void 0===o?"toText:label":o,s=e.logId,c=void 0===s?"fmttext":s,l=e.labelVisible,u=void 0===l||l,p=C()(e,xn);return E.b.createElement(ct.a,b()({},p,{type:n,title:r,label:a,logId:c,labelVisible:u,onClick:this._handleClick}))},n._handleClick=function(e){e.value="text",this.props.useCase.changeTextFormat(e),this.props.onClickSelector(e)},t}(E.b.Component),L()(Cn.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Cn.prototype,"_handleClick"),Cn.prototype),Cn),An=n(246),jn=n(300),Rn=n(301),Nn=n(302),Mn=n(303),Bn=n(304),Wn=n(776),Un=n(777),Fn=["type","title","label","labelVisible","isSelected","custom","logId"],zn=(In=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.CUSTOM_LAYER:t,i=e.title,r=void 0===i?{inactive:"videoResizing:title_inactive",active:"videoResizing:title_active"}:i,o=e.label,a=void 0===o?"videoResizing:label":o,s=e.labelVisible,c=void 0===s||s,l=e.isSelected,u=void 0!==l&&l,p=e.custom,d=void 0===p?{CustomLayer:Un.a,customProps:{applyAllLabel:"videoResizing:apply_all_label",widthLabel:"videoResizing:width_label",heightLabel:"videoResizing:height_label",resetLabel:"videoResizing:reset_label",applyLabel:"videoResizing:apply_label"}}:p,h=e.logId,g=void 0===h?"qsize":h,f=C()(e,Fn);return E.b.createElement($e.a,b()({},f,{type:n,title:r,label:a,labelVisible:c,isSelected:u,custom:d,logId:g,onClick:this._handleClick,onChange:this._handleChange}))},n._handleClick=function(e){this.props.onClickSelector(e)},n._handleChange=function(e){this.props.useCase.changeSize(e)},t}(E.b.Component),L()(In.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(In.prototype,"_handleClick"),In.prototype),L()(In.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(In.prototype,"_handleChange"),In.prototype),In),Vn=["type","title","logId"],Gn=(On=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"inlineImage:title":i,o=e.logId,a=void 0===o?"inline":o,s=C()(e,Vn);return E.b.createElement(ct.a,b()({},s,{type:n,title:r,logId:a,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.convertImageToNode()},t}(E.b.Component),L()(On.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(On.prototype,"_handleClick"),On.prototype),On),Hn=["type","title","logId"],qn=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._handleClick=function(){t.props.useCase.open()},t}return O()(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"translationLayer:translate":i,o=e.logId,a=void 0===o?"translation":o,s=C()(e,Hn);return E.b.createElement(ct.a,b()({},s,{type:n,title:r,logId:a,onClick:this._handleClick}))},t}(E.b.Component);qn.propTypes={useCase:E.a.shape({open:E.a.func.isRequired}).isRequired};var Jn,Kn=qn,Xn=["type","title","label","logId"],Yn=(Jn=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"webtoonInsert:title":i,o=e.label,a=void 0===o?"webtoonInsert:label":o,s=e.logId,c=void 0===s?"webtoon":s,l=C()(e,Xn);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openWebtoonLayer()},t}(E.b.Component),L()(Jn.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(Jn.prototype,"_handleClick"),Jn.prototype),Jn),Qn=["type","title","label","logId"],Zn=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._handleClick=function(){t.props.useCase.open()},t}return O()(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"translationLayer:translate":i,o=e.label,a=void 0===o?"translationLayer:translate":o,s=e.logId,c=void 0===s?"translation":s,l=C()(e,Qn);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c,labelVisible:!0,onClick:this._handleClick}))},t}(E.b.Component);Zn.propTypes={useCase:E.a.shape({open:E.a.func.isRequired}).isRequired};var $n,ei=Zn,ti=n(54),ni=n.n(ti),ii=n(376),ri=n(129),oi=["onClick"],ai=($n=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e,t=this.props,n=t.id,i=t.name,r=t.namespace,o=t.documentToolbarIconType,a=t.moreViewButton,s=t.deviceType,c=t.option,l=t.type,u=t.focused,p=t.logAreaId,d=t.highlight,h=c.label,g=c.logId,f=c.title,m=c.useBeta,y=s===_e.t.DESKTOP,v=r===k.e.DOCUMENT,_=o===k.d.TEXT_ICON,b=ni()("se-"+i+"-toolbar-button",((e={})["se-"+r+"-toolbar-"+l+"-button"]=!v||!a,e["se-"+r+"-toolbar-"+l+"-more-button"]=v&&a,e["se-"+o+"-toolbar-button"]=y&&v,e)),S=_?"se-toolbar-label":"se-blind";return E.b.createElement(ri.a,{focused:u,namespace:r,logAreaId:p,logId:g,type:l,dataName:n,className:b,useBeta:m,highlight:d,onClick:this._handleClick},E.b.createElement("span",{className:"se-toolbar-custom-icon"}),E.b.createElement("span",{className:S,"aria-hidden":y},h),y&&E.b.createElement("span",{className:"se-toolbar-tooltip"},f))},n._handleClick=function(e){var t=this.props.option,n=t.onClick,i=void 0===n?function(){}:n,r=C()(t,oi);document.activeElement&&document.activeElement.blur(),i(v()({event:e.nativeEvent},r))},t}(E.b.Component),L()($n.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor($n.prototype,"_handleClick"),$n.prototype),$n);ai.defaultProps={id:"",focused:!1,name:"custom",namespace:"",logAreaId:"",highlight:{}},ai.propTypes={type:E.a.oneOf([k.b.CUSTOM]).isRequired,id:E.a.string,focused:E.a.bool,name:E.a.string,namespace:E.a.string,deviceType:E.a.string,documentToolbarIconType:E.a.string,moreViewButton:E.a.bool,logAreaId:E.a.string,option:E.a.object.isRequired,highlight:E.a.object};var si,ci=Object(ii.b)(ai),li=["type"],ui=function(e){function t(){return e.apply(this,arguments)||this}return O()(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.CUSTOM:t,i=C()(e,li);return i.id=i.option.name,i.name=i.option.name,E.b.createElement(ci,b()({type:n},i))},t}(E.b.Component),pi=n(251),di=n(1311),hi=(si=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.options,i=t.optionType,r=ni()("se-toolbar-"+i+"-option","se-"+i+"-option"),o=n.map(function(t,n){var i=t.buttonView,r=v()({moreViewButton:!0},t.props),o=t.id;return E.b.createElement("div",{key:t.buttonName+"_"+n,className:"__more_view_option se-more-view-option-item se-more-view-option-"+o,onClick:e._handleClickOption},i(r))});return E.b.createElement("div",{className:r},o)},n._handleClickOption=function(e){this.props.onClickOption(e)},t}(E.b.Component),L()(si.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(si.prototype,"_handleClickOption"),si.prototype),si);hi.defaultProps={id:"",name:"",optionType:"",options:{},onClickOption:{}},hi.propTypes={id:E.a.string,name:E.a.string,optionType:E.a.string,options:E.a.oneOfType([E.a.array,E.a.object]),onClickOption:E.a.func};var gi,fi=Object(ii.b)(hi),mi=(gi=function(e){function t(){var t;return(t=e.call(this)||this).state={opened:!1},t}O()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e="click.se-toolbar-more-view-"+this.props.namespace;di.a.on(e,this._handleClickButtonOutside)},n.componentWillUnmount=function(){var e="click.se-toolbar-more-view-"+this.props.namespace;di.a.off(e)},n.render=function(){var e,t=this.props,n=t.id,i=t.title,r=t.label,o=t.name,a=t.type,s=t.namespace,c=t.documentToolbarIconType,l=t.deviceType,u=t.options,p=t.i18n,d=t.logAreaId,h=t.focused,g=t.logId,f=n,m=this.state.opened,y=p(r),v=l===_e.t.DESKTOP,_=s===k.e.DOCUMENT,b=c===k.d.TEXT_ICON,S=ni()("se-more-view-button-container","__select-container","__more-view-container"),C=ni()("se-"+s+"-toolbar-more-view-button","se-"+o+"-toolbar-button",((e={})["se-"+c+"-toolbar-button"]=v&&_,e["se-is-activated"]=m,e)),I=b?"se-toolbar-label":"se-blind",O=p(i[m?"active":"inactive"]);return E.b.createElement("div",{className:S,"data-type":a,"data-name":o},E.b.createElement(ri.a,{focused:h,namespace:s,logAreaId:d,logId:g,type:a,dataName:f,className:C,handleClick:this.handleClick,i18n:p,ariaExpanded:""+m,ariaHasPopup:"true"},E.b.createElement("span",{className:"se-toolbar-icon"}),E.b.createElement("span",{className:I,"aria-hidden":v},y),v&&E.b.createElement("span",{className:"se-toolbar-tooltip"},O)),m&&E.b.createElement(fi,{id:n,name:o,options:u,namespace:s,optionType:k.c.MORE_VIEW,onClickOption:this.onClickOption,i18n:p}))},n.onClickOption=function(e){var t=e.target,n=pi.a.closest(t,".__select-container").dataset.type,i=t.dataset.role;this.props.namespace===k.e.DOCUMENT&&(i&&("selector"===i||this._isSubMenuButtonType(n))||this._changeMoreViewDisplay(!1))},n.handleClick=function(e){var t=this.state.opened;this._changeMoreViewDisplay(!t);var n=this.props,i=n.onClickSelector,r=n.type,o=n.id,a=n.name,s=n.title,c=n.label,l=n.isActivated;i.apply(this,[{event:e,type:r,id:o,name:a,title:s,label:c,isActivated:l}])},n._handleClickButtonOutside=function(e){var t=e.target,n=this.props.namespace,i=this.state.opened;if(n===k.e.DOCUMENT){var r=pi.a.isOutsideElementbySelector(t,".__select-container");i&&r&&this._changeMoreViewDisplay(!1)}},n._changeMoreViewDisplay=function(e){this.setState({opened:e})},n._isSubMenuButtonType=function(e){return[k.b.ICON_SELECT].includes(e)},t}(E.b.Component),L()(gi.prototype,"onClickOption",[P.autobind],Object.getOwnPropertyDescriptor(gi.prototype,"onClickOption"),gi.prototype),L()(gi.prototype,"handleClick",[P.autobind],Object.getOwnPropertyDescriptor(gi.prototype,"handleClick"),gi.prototype),L()(gi.prototype,"_handleClickButtonOutside",[P.autobind],Object.getOwnPropertyDescriptor(gi.prototype,"_handleClickButtonOutside"),gi.prototype),gi);mi.defaultProps={name:"",id:"",label:"",title:{inactive:"",active:""},isActivated:!1,namespace:"",focused:!1,options:{},onClickSelector:function(){},i18n:function(e){return e}},mi.propTypes={type:E.a.oneOf([k.b.MORE_VIEW]).isRequired,id:E.a.string,name:E.a.string,label:E.a.string,title:E.a.shape({inactive:E.a.string,active:E.a.string}),namespace:E.a.string,documentToolbarIconType:E.a.string,deviceType:E.a.string,isActivated:E.a.bool,focused:E.a.bool,options:E.a.oneOfType([E.a.array,E.a.object]),onClickSelector:E.a.func,i18n:E.a.func,logAreaId:E.a.string,logId:E.a.string};var yi,vi,_i,bi=Object(ii.b)(mi),Si=["type","title","label","logId","options"],Ci=function(e){function t(){return e.apply(this,arguments)||this}return O()(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.MORE_VIEW:t,i=e.title,r=void 0===i?{inactive:"moreViewButton:title_inactive",active:"moreViewButton:title_active"}:i,o=e.label,a=void 0===o?"moreViewButton:label":o,s=e.logId,c=void 0===s?"moveView":s,l=e.options,u=C()(e,Si);return E.b.createElement(bi,b()({},u,{type:n,title:r,label:a,logId:c,options:l}))},t}(E.b.Component),Ii=["type","title","label","value","logId","useHighlight","useIconUpdate","options"],Oi=(yi=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.DROP_DOWN:t,i=e.title,r=void 0===i?{inactive:"list:title_inactive",active:"list:title_active"}:i,o=e.label,a=void 0===o?"list:label":o,s=e.value,c=void 0===s?"":s,l=e.logId,u=void 0===l?"list":l,p=e.useHighlight,d=void 0===p||p,h=e.useIconUpdate,g=void 0===h||h,f=e.options,m=void 0===f?{bullet:{title:"list:bullet",label:"list:bullet",logId:"listbullet"},decimal:{title:"list:decimal",label:"list:decimal",logId:"listdecimal"},reset:{title:"list:reset_label",label:"list:reset_label",logId:"listreset"}}:f,y=C()(e,Ii);return E.b.createElement(w.a,b()({},y,{type:n,title:r,label:a,value:c,logId:u,options:m,useHighlight:d,useIconUpdate:g,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeListType(e),this.props.onClickSelector(e)},t}(E.b.Component),L()(yi.prototype,"_handleClickOption",[P.autobind],Object.getOwnPropertyDescriptor(yi.prototype,"_handleClickOption"),yi.prototype),yi),Ti=n(66),Li=["type","value","title","label","logId"],Ei=(vi=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.TOGGLE:t,i=e.value,r=e.title,o=void 0===r?{inactive:"imageTag:title",active:"imageTag:title"}:r,a=e.label,s=void 0===a?"imageTag:label":a,c=e.logId,l=void 0===c?"imgtag":c,u=C()(e,Li),p=!Object(Ti.a)(i);return E.b.createElement(ie.a,b()({},u,{type:n,value:p,title:o,label:s,logId:l,onChange:this._handleChange}))},n._handleChange=function(){this.props.useCase.openImageTagPopup()},t}(E.b.Component),L()(vi.prototype,"_handleChange",[P.autobind],Object.getOwnPropertyDescriptor(vi.prototype,"_handleChange"),vi.prototype),vi),Pi=["type","title","label","logId"],wi=(_i=function(e){function t(){return e.apply(this,arguments)||this}O()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"talktalkInsert:title":i,o=e.label,a=void 0===o?"talktalkInsert:label":o,s=e.logId,c=void 0===s?"talktalk":s,l=C()(e,Pi);return E.b.createElement(ct.a,b()({type:n,title:r,label:a,logId:c},l,{onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.openTalktalkEditLayer()},t}(E.b.Component),L()(_i.prototype,"_handleClick",[P.autobind],Object.getOwnPropertyDescriptor(_i.prototype,"_handleClick"),_i.prototype),_i),ki=n(778),xi=["type","title","label","logId"],Di=function(e){function t(){return e.apply(this,arguments)||this}return O()(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"additionalInfoButton:title":i,o=e.label,a=void 0===o?"additionalInfoButton:label":o,s=e.logId,c=void 0===s?"additionalInfoButton":s,l=C()(e,xi);return E.b.createElement(ct.a,b()({},l,{type:n,title:r,label:a,logId:c}))},t}(E.b.Component);Di.propTypes={useCase:E.a.object};var Ai=Di,ji=n(231),Ri=["type","title","label","logId","labelVisible","disabled"],Ni=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._handleClick=function(){t.props.useCase.openAiModalLayer()},t}return O()(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=void 0===t?k.b.BASIC:t,i=e.title,r=void 0===i?"aiWrite:title":i,o=e.label,a=void 0===o?"aiWrite:label":o,s=e.logId,c=void 0===s?"ai":s,l=e.labelVisible,u=void 0===l||l,p=e.disabled,d=void 0!==p&&p,h=C()(e,Ri);return E.b.createElement(ct.a,b()({},h,{type:n,title:r,logId:c,label:a,disabled:ji.a.IS_IE||d,labelVisible:u,onClick:this._handleClick}))},t}(E.b.Component);Ni.propTypes={useCase:E.a.shape({openAiModalLayer:E.a.func.isRequired}).isRequired};var Mi,Bi,Wi,Ui,Fi,zi,Vi,Gi,Hi,qi,Ji,Ki,Xi,Yi,Qi,Zi,$i,er,tr,nr,ir,rr,or,ar,sr,cr,lr,ur,pr,dr=Ni,hr=n(295),gr=n(754),fr=(Mi=function(){function e(){this._propertyChangeService=_e.W.get("propertyChangeService")}return e.prototype.changeAlign=function(e){this._propertyChangeService.updateStyle(e)},e}(),L()(Mi.prototype,"changeAlign",[P.preventOnComponentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(Mi.prototype,"changeAlign"),Mi.prototype),Mi),mr=(Bi=function(){function e(){this._editingService=_e.W.get("editingService")}return e.prototype.erase=function(){this._editingService.eraseComponent()},e}(),L()(Bi.prototype,"erase",[P.preventOnComponentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(Bi.prototype,"erase"),Bi.prototype),Bi),yr=(Wi=function(){function e(){this._editingService=_e.W.get("editingService")}return e.prototype.erase=function(){this._editingService.erase(void 0,_e.u.RIGHT)},e}(),L()(Wi.prototype,"erase",[P.preventOnComponentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(Wi.prototype,"erase"),Wi.prototype),Wi),vr=n(12),_r=n.n(vr),br=n(18),Sr=n.n(br),Cr=(Ui=Object(P.history)({sync:!1}),Fi=Object(P.history)({sync:!1}),zi=Object(P.history)({sync:!1}),Vi=Object(P.history)({sync:!1}),Gi=Object(P.history)({sync:!1}),Hi=Object(P.history)({sync:!1}),qi=function(e){function t(){var t;return(t=e.call(this)||this)._i18n=_e.W.get("i18n"),t._propertyChangeService=_e.W.get("propertyChangeService"),t._toastLayerService=_e.W.get("toastLayerService"),t._imageEditService=_e.W.get("imageEditService"),t._imageUploadService=_e.W.get("imageUploadService"),t._imageComponentService=_e.W.get("imageComponentService"),t._imageBehavior=_e.W.get("imageBehavior"),t._placeLayerService=_e.W.get("placeLayerService"),t}O()(t,e);var n=t.prototype;return n.changeImage=function(){var e=Sr()(_r.a.mark(function e(){var t,n,i=this;return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog();case 2:return t=e.sent,n=this._imageComponentService.getFirstSelectedImageComp(),e.next=6,this._imageBehavior.changeImage({targetStore:n,selectedImages:t}).then(function(e){var t=e.invalidImageErrors;return i._imageBehavior.cleanUpImage(t),e});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n._openPhotoEditor=function(){var e=Sr()(_r.a.mark(function e(t){var n;return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._imageComponentService.getFirstSelectedImageComp().id,e.next=3,this._imageEditService.editImage({activeCompId:n,direct:t});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.editImage=function(){var e=Sr()(_r.a.mark(function e(){return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.adjustImage=function(){var e=Sr()(_r.a.mark(function e(){return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("adjust");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.cropImage=function(){var e=Sr()(_r.a.mark(function e(){return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("crop");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.filterImage=function(){var e=Sr()(_r.a.mark(function e(){return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openPhotoEditor("filter");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n.changeSize=function(e){var t=this._imageComponentService.checkLimitedSize(e),n=t.hasBiggerThanContentWidth,i=t.hasSmallerThanMinHeight,r=t.hasSmallerThanMinWidth,o=e.value,a=o.isReset;this._propertyChangeService.changeSize(o,"image"),a||(n?this._toastLayerService.warningMessage(this._i18n("imageComponent:update_has_bigger_image")):r||r&&i?this._toastLayerService.warningMessage(this._i18n("imageComponent:update_has_smaller_image_width")):i&&this._toastLayerService.warningMessage(this._i18n("imageComponent:update_has_smaller_image")))},n.convertImageToNode=function(){this._imageComponentService.convertImageToNode()},n.editLocation=function(){var e=Sr()(_r.a.mark(function e(){var t,n,i;return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._imageComponentService.getFirstSelectedImageComp(),n=t.place,e.next=4,this._placeLayerService.editPlaces({isUpdateMode:!0,maxPlaceCount:1,initialPlaces:n?[n]:[]});case 4:(i=e.sent)&&this._imageComponentService.updatePlace(t.id,i.places[0]);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(_e.m),L()(qi.prototype,"changeImage",[P.sentryCatch,P.preventOnDocumentProcessing,Ui,E.d],Object.getOwnPropertyDescriptor(qi.prototype,"changeImage"),qi.prototype),L()(qi.prototype,"editImage",[P.sentryCatch,P.preventOnDocumentProcessing,Fi,E.d],Object.getOwnPropertyDescriptor(qi.prototype,"editImage"),qi.prototype),L()(qi.prototype,"adjustImage",[P.sentryCatch,P.preventOnDocumentProcessing,zi,E.d],Object.getOwnPropertyDescriptor(qi.prototype,"adjustImage"),qi.prototype),L()(qi.prototype,"cropImage",[P.sentryCatch,P.preventOnDocumentProcessing,Vi,E.d],Object.getOwnPropertyDescriptor(qi.prototype,"cropImage"),qi.prototype),L()(qi.prototype,"filterImage",[P.sentryCatch,P.preventOnDocumentProcessing,Gi,E.d],Object.getOwnPropertyDescriptor(qi.prototype,"filterImage"),qi.prototype),L()(qi.prototype,"changeSize",[P.preventOnComponentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(qi.prototype,"changeSize"),qi.prototype),L()(qi.prototype,"convertImageToNode",[P.preventOnDocumentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(qi.prototype,"convertImageToNode"),qi.prototype),L()(qi.prototype,"editLocation",[P.preventOnComponentProcessing,Hi,E.d],Object.getOwnPropertyDescriptor(qi.prototype,"editLocation"),qi.prototype),qi),Ir=(Ji=function(e){function t(){var t;(t=e.call(this)||this)._toastLayerService=_e.W.get("toastLayerService"),t._propertyChangeService=_e.W.get("propertyChangeService"),t._configAgent=_e.W.get("configAgent"),t._i18n=_e.W.get("i18n"),t._videoComponentService=_e.W.get("videoComponentService");var n=t._configAgent.get("editorInfo");return t._config={videoMinimumWidth:n.videoMinimumWidth,videoMinimumHeight:n.videoMinimumHeight,documentWidth:t._configAgent.get("productConfig.documentWidth")},t}return O()(t,e),t.prototype.changeSize=function(e){var t=this._videoComponentService.checkLimitedSize(e),n=t.hasBiggerThanContentWidth,i=t.hasSmallerThanMinHeight,r=t.hasSmallerThanMinWidth,o=e.value,a=o.isReset;this._propertyChangeService.changeSize(o,"video"),a||(n?this._toastLayerService.warningMessage(this._i18n("video:max_width")):r||r&&i?this._toastLayerService.warningMessage(this._i18n("video:min_width")):i&&this._toastLayerService.warningMessage(this._i18n("video:min_height")))},t}(_e.m),L()(Ji.prototype,"changeSize",[P.preventOnComponentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(Ji.prototype,"changeSize"),Ji.prototype),Ji),Or=n(299),Tr=n(119),Lr="CHANGE_MODE",Er="INSERT_MODE",Pr=(Ki=function(){function e(){this._finderService=_e.W.get("finderService"),this._componentFactory=_e.W.get("componentFactory"),this._editingService=_e.W.get("editingService"),this._selectionInfoStore=_e.W.get("selectionInfoStore"),this._propertyChangeService=_e.W.get("propertyChangeService")}var t=e.prototype;return t.changeTextFormat=function(e,t){var n=e.value;this._propertyChangeService.changeTextFormat(n,t)},t.changeTextLayout=function(e,t,n){void 0===n&&(n=[]);var i=this._getUpdatedModes();i===Lr?this._changeTextLayout(e,t,n):i===Er&&this._insertComponentByLayout(e,t)},t._changeTextLayout=function(e,t,n){void 0===n&&(n=[]),this._propertyChangeService.changeTextFormat(e,void 0,n),this._propertyChangeService.changeLayout(t,n)},t._insertComponentByLayout=function(e,t){var n=this._componentFactory.createComponentWithCompData({ctype:e,layout:t});this._editingService.insert({sourceComponents:[n]})},t._getUpdatedModes=function(){var e=this._selectionInfoStore.mode,t=this._finderService.getSelectedComponents();switch(e){case _e.P.BLOCK:return Lr;case _e.P.SINGLE_COMP:case _e.P.MULTI_COMP:return Er;case _e.P.CURSOR:return["sectionTitle","text"].includes(Object(Tr.a)(t).ctype)?Lr:Er}return Lr},e}(),L()(Ki.prototype,"changeTextFormat",[P.history,E.d],Object.getOwnPropertyDescriptor(Ki.prototype,"changeTextFormat"),Ki.prototype),L()(Ki.prototype,"changeTextLayout",[P.history,E.d],Object.getOwnPropertyDescriptor(Ki.prototype,"changeTextLayout"),Ki.prototype),Ki),wr=function(e){function t(){var t;return(t=e.call(this)||this)._target="library",t._documentToolbarLayoutService=_e.W.get("documentToolbarLayoutService"),t._panelContainerLayerService=_e.W.get("panelContainerLayerService"),t._libraryPanelLayoutService=_e.W.get("libraryPanelLayoutService"),t}return O()(t,e),t.prototype.toggle=function(){var e=this,t=this._panelContainerLayerService,n=this._libraryPanelLayoutService;t.toggleLayout(this._target,n,function(t,n){e._documentToolbarLayoutService.setPanelButtonEnable(t,n)})},t}(_e.i),kr=(Xi=function(){function e(){this._specialLetterLayerService=_e.W.get("specialLetterLayerService")}return e.prototype.openSpecialLetter=function(e){this._specialLetterLayerService.toggle(e)},e}(),L()(Xi.prototype,"openSpecialLetter",[E.d],Object.getOwnPropertyDescriptor(Xi.prototype,"openSpecialLetter"),Xi.prototype),Xi),xr=(Yi=function(){function e(){this._componentFactory=_e.W.get("componentFactory"),this._editingService=_e.W.get("editingService")}return e.prototype.insertSourceCode=function(){var e=this._componentFactory.createComponentWithCompData({ctype:"code"});this._editingService.insert({sourceComponents:[e]})},e}(),L()(Yi.prototype,"insertSourceCode",[P.preventOnComponentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(Yi.prototype,"insertSourceCode"),Yi.prototype),Yi),Dr=n(435),Ar=n(770),jr=n(772),Rr=n(434),Nr=n(773),Mr=(Qi=function(){function e(){this._editingService=_e.W.get("editingService"),this._tableComponentService=_e.W.get("tableComponentService")}return e.prototype.insertTable=function(){var e=this._tableComponentService.createComponent();this._editingService.insert({sourceComponents:[e]})},e}(),L()(Qi.prototype,"insertTable",[P.preventOnComponentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(Qi.prototype,"insertTable"),Qi.prototype),Qi),Br=n(833),Wr=n(16),Ur=n(718),Fr=n(1309),zr=n(1310),Vr=1,Gr=(Zi=Object(P.history)({sync:!1}),$i=function(){function e(){this._configAgent=_e.W.get("configAgent"),this._eventDispatcherService=_e.W.get("eventDispatcherService"),this._componentListStore=_e.W.get("componentListStore"),this._editingService=_e.W.get("editingService"),this._toastLayerService=_e.W.get("toastLayerService"),this._audioUploadService=_e.W.get("audioUploadService"),this._audioComponentService=_e.W.get("audioComponentService"),this._i18n=_e.W.get("i18n"),this._externalConfig=this._configAgent.get("modules.audioUploader.config"),this.audioMaxUploadCount=this._configAgent.get("infraConfig.audio.maxUploadCount")||Vr}var t=e.prototype;return t.insertAudio=function(){var e=Sr()(_r.a.mark(function e(){var t,n,i,r,o,a,s=this;return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isOverMaxUploadCount()){e.next=3;break}return this._showOverMaxUploadError(),e.abrupt("return");case 3:return e.next=5,this._audioUploadService.openFileDialog();case 5:if(t=e.sent,n=t.validFiles,i=t.invalidFiles,r=n[0]||{},!(i.length>0)){e.next=12;break}return this._showErrorMessage(this._i18n("audioInsertUseCase:error_invalid_ext")),e.abrupt("return");case 12:if(!this._isOverFileSizeLimit(r.size)){e.next=15;break}return this._showFileSizeLimitMessage(),e.abrupt("return");case 15:return o=this._audioComponentService.createAudioComponent(r),a=o.id,this._eventDispatcherService.emit(_e.z.IN_PROGRESS),this._editingService.insert({sourceComponents:[o]}),e.next=21,this._audioUploadService.uploadLocalFile(r,a,{progress:this._onUploadProgress.bind(this)}).then(function(e){s._onUploadSuccess(e,a);var t=Object(Wr.a)(s._externalConfig,"onUploadSuccess",function(){});t&&t({file:r,compId:a,data:e})}).catch(function(e){s._onUploadError(e,a)});case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._isOverMaxUploadCount=function(){return this._componentListStore.countBy("audio")>=this.audioMaxUploadCount},t._isOverFileSizeLimit=function(e){return e>this._configAgent.get("infraConfig.audio.maxAudioUploadSize")},t._showOverMaxUploadError=function(){var e=this._i18n("limits:audio_description_exceeded_count_by_max",{maxcount:this.audioMaxUploadCount});this._showErrorMessage(e)},t._showFileSizeLimitMessage=function(){var e=this._configAgent.get("infraConfig.audio.maxAudioUploadSize"),t=Ur.a.convertToMB(e),n=this._i18n("audioComponent:audio_upload_limit_size_msg",{maxlength:t+"MB"});this._showErrorMessage(n)},t._onUploadProgress=function(e,t){this._audioComponentService.updateProgress(t,e)},t._onUploadSuccess=function(e,t){this._audioComponentService.updateComponent(t,e);var n=Object(Fr.a)(zr.b.AUDIO,e);n&&this._eventDispatcherService.dispatch(_e.z.RESOURCE_UPLOADED,n),this._eventDispatcherService.emit(_e.z.PROGRESS_COMPLETED)},t._onUploadError=function(e,t){this._removeAudioComponent(t),this._showErrorMessage(this._i18n("audioComponent:upload_server_error_msg")),this._eventDispatcherService.emit(_e.z.PROGRESS_COMPLETED)},t._showErrorMessage=function(e){this._toastLayerService.warningMessage(e)},t._removeAudioComponent=function(e){this._editingService.eraseComponent(e)},e}(),L()($i.prototype,"insertAudio",[P.sentryCatch,P.preventOnComponentProcessing,Zi,E.d],Object.getOwnPropertyDescriptor($i.prototype,"insertAudio"),$i.prototype),$i),Hr=function(){function e(){this._webtoonLayerService=_e.W.get("webtoonLayerService")}return e.prototype.openWebtoonLayer=function(){this._webtoonLayerService.open()},e}(),qr=(er=function(){function e(){this._cloudSnsLayerService=_e.W.get("cloudSnsLayerService"),this._i18n=_e.W.get("i18n"),this._alertLayerService=_e.W.get("alertLayerService")}return e.prototype.openPopup=function(){ji.a.UNDER_IE11?this._alertLayerService.open({type:_e.n.ALERT,isDimUse:!1,title:this._i18n("commonPopup:recommended_browser_title"),description:this._i18n("commonPopup:recommended_browser_description")}):this._cloudSnsLayerService.open()},e}(),L()(er.prototype,"openPopup",[P.preventOnComponentProcessing],Object.getOwnPropertyDescriptor(er.prototype,"openPopup"),er.prototype),er),Jr=(tr=function(e){function t(){var t;return(t=e.call(this)||this)._useFileUploaderLayer=!!t._configAgent.get("apiInfo.addNCloudFile")&&!1===ji.a.UNDER_IE11,t}return O()(t,e),t.prototype.insertFile=function(){this._useFileUploaderLayer?this._fileUploadLayerService.open():this.uploadLocalFile()},t}(n(750).a),L()(tr.prototype,"insertFile",[P.preventOnComponentProcessing,E.d],Object.getOwnPropertyDescriptor(tr.prototype,"insertFile"),tr.prototype),tr),Kr=(nr=function(){function e(){this._linkLayerService=_e.W.get("linkLayerService")}return e.prototype.openLinkLayer=function(){this._linkLayerService.open()},e}(),L()(nr.prototype,"openLinkLayer",[P.preventOnComponentProcessing,E.d],Object.getOwnPropertyDescriptor(nr.prototype,"openLinkLayer"),nr.prototype),nr),Xr=(ir=function(){function e(){this._placeLayerService=_e.W.get("placeLayerService")}return e.prototype.openPlacePopup=function(){this._placeLayerService.openPlacePopup()},e}(),L()(ir.prototype,"openPlacePopup",[P.preventOnComponentProcessing,E.d],Object.getOwnPropertyDescriptor(ir.prototype,"openPlacePopup"),ir.prototype),ir),Yr=(rr=function(){function e(){this._scheduleLayerService=_e.W.get("scheduleLayerService")}return e.prototype.openScheduleLayer=function(){this._scheduleLayerService.open()},e}(),L()(rr.prototype,"openScheduleLayer",[P.preventOnComponentProcessing],Object.getOwnPropertyDescriptor(rr.prototype,"openScheduleLayer"),rr.prototype),rr),Qr=n(774),Zr=function(e){function t(){var t;return(t=e.call(this)||this)._target="moment",t._documentToolbarLayoutService=_e.W.get("documentToolbarLayoutService"),t._panelContainerLayerService=_e.W.get("panelContainerLayerService"),t._momentPanelLayoutService=_e.W.get("momentPanelLayoutService"),t}return O()(t,e),t.prototype.toggle=function(){var e=this,t=this._panelContainerLayerService,n=this._momentPanelLayoutService;t.toggleLayout(this._target,n,function(t,n){e._documentToolbarLayoutService.setPanelButtonEnable(t,n)})},t}(_e.i),$r=10110,eo=(or=function(){function e(){this._spellCheckLayoutService=_e.W.get("spellCheckLayoutService"),this._toastLayerService=_e.W.get("toastLayerService"),this._loadingLayerService=_e.W.get("loadingLayerService"),this._i18n=_e.W.get("i18n"),this._alertLayerService=_e.W.get("alertLayerService")}var t=e.prototype;return t.startSpellCheck=function(){var e=this._spellCheckLayoutService.getParagraphList();0===e.length?this._toastLayerService.infoMessage(this._i18n("spellCheckLayout:empty_errata")):this._spellCheck(e)},t._spellCheck=function(){var e=Sr()(_r.a.mark(function e(t){var n;return _r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._loadingLayerService.open(),e.next=3,this._spellCheckLayoutService.getResultSpellCheck(t);case 3:if(n=e.sent,!1!==this._isValidCheckResult(n)){e.next=6;break}return e.abrupt("return");case 6:this._loadingLayerService.close(),this._spellCheckLayoutService.startSpellCheck(n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t._isValidCheckResult=function(e){return e.errorCode===$r?(this._loadingLayerService.close(),this._alertLayerService.open({type:"alert",title:this._i18n("spellCheckLayout:spell_check_fail_title"),description:this._i18n("spellCheckLayout:spell_check_length_error")}),!1):e.aborted?(this._loadingLayerService.close(),!1):e.failed?(this._loadingLayerService.close(),this._alertLayerService.open({type:"alert",title:this._i18n("spellCheckLayout:spell_check_fail_title"),description:this._i18n("spellCheckLayout:spell_check_fail")}),!1):0!==e.length||(this._loadingLayerService.close(),this._toastLayerService.infoMessage(this._i18n("spellCheckLayout:empty_errata")),!1)},e}(),L()(or.prototype,"startSpellCheck",[E.d],Object.getOwnPropertyDescriptor(or.prototype,"startSpellCheck"),or.prototype),or),to=n(765),no=n(766),io=(ar=function(e){function t(){var t;return(t=e.call(this)||this)._wrappingParagraphComponentService=_e.W.get("wrappingParagraphComponentService"),t}return O()(t,e),t.prototype.changeWrappingLayout=function(e){var t=e.value;this._wrappingParagraphComponentService.composeWrappingComponent(t)},t}(_e.m),L()(ar.prototype,"changeWrappingLayout",[P.preventOnComponentProcessing,P.history,E.d],Object.getOwnPropertyDescriptor(ar.prototype,"changeWrappingLayout"),ar.prototype),ar),ro=(sr=function(){function e(){this._finderService=_e.W.get("finderService"),this._translationLayerService=_e.W.get("translationLayerService")}return e.prototype.open=function(){var e=this._finderService.getPlainTextWithEmojiOfWritingTargetWithinSelection();this._translationLayerService.open(e)},e}(),L()(sr.prototype,"open",[E.d],Object.getOwnPropertyDescriptor(sr.prototype,"open"),sr.prototype),sr),oo=(cr=function(){function e(){this._imageTagLayerService=_e.W.get("imageTagLayerService"),this._selectionInfoStore=_e.W.get("selectionInfoStore"),this._imageComponentService=_e.W.get("imageComponentService"),this._alertLayerService=_e.W.get("alertLayerService"),this._i18n=_e.W.get("i18n")}var t=e.prototype;return t._getActiveCompId=function(){return this._selectionInfoStore.start.compId},t.openImageTagPopup=function(){var e=this,t=this._getActiveCompId();this._imageComponentService.isLinkedImage(t)?this._alertLayerService.open({type:"confirm",title:this._i18n("imageTag:confirm_added_link_title"),description:this._i18n("imageTag:confirm_convert_to_tag_description"),onClickConfirm:function(){return e._openImageTagLayer(t)},onClickCancel:function(){return e._alertLayerService.close()}}):this._openImageTagLayer(t)},t._openImageTagLayer=function(e){var t=this._imageComponentService.getMediaTagData(e),n=t.src,i=t.width,r=t.height,o={compId:e,imageUrl:n,tags:t.mediaTags,width:i,height:r};this._imageTagLayerService.open(o)},e}(),L()(cr.prototype,"openImageTagPopup",[P.preventOnComponentProcessing,E.d],Object.getOwnPropertyDescriptor(cr.prototype,"openImageTagPopup"),cr.prototype),cr),ao=(lr=function(e){function t(){var t;return(t=e.call(this)||this)._talktalkEditLayerService=_e.W.get("talktalkEditLayerService"),t}return O()(t,e),t.prototype.openTalktalkEditLayer=function(){this._talktalkEditLayerService.open()},t}(_e.m),L()(lr.prototype,"openTalktalkEditLayer",[E.d],Object.getOwnPropertyDescriptor(lr.prototype,"openTalktalkEditLayer"),lr.prototype),lr),so=n(191),co=(ur=Object(P.history)({sync:!1,transaction:!0}),pr=function(){function e(){this._contentsToolbarLayoutService=_e.W.get("contentsToolbarLayoutService"),this._aiLayerService=_e.W.get("aiLayerService"),this._componentListStore=_e.W.get("componentListStore"),this._aiHistoryService=_e.W.get("aiHistoryService"),this._selectionService=_e.W.get("selectionService"),this._aiBannerLayoutService=_e.W.get("aiBannerLayoutService"),this._specialLetterLayerService=_e.W.get("specialLetterLayerService"),this._panelContainerLayerService=_e.W.get("panelContainerLayerService"),this._documentToolbarLayoutService=_e.W.get("documentToolbarLayoutService"),this._helpPanelLayoutService=_e.W.get("helpPanelLayoutService"),this._canvasScrollingService=_e.W.get("canvasScrollingService")}var t=e.prototype;return t.openAiModalLayer=function(){var e=this;this._prepareModalOpen();var t=this._aiLayerService.resolveStep();return t===so.a.TOOLBOX?(this._aiLayerService.cursorAtWritingTarget&&this._selectionService.selectCurrentParagraph(),this._aiHistoryService.resetHistory(),this._aiHistoryService.pushWholeState(),this._canvasScrollingService.scrollToAdjustedCursor().then(function(){return e._aiLayerService.open(t)})):this._aiLayerService.open(t)},t._prepareModalOpen=function(){var e=this._panelContainerLayerService.getTarget();this._documentToolbarLayoutService.setPanelButtonEnable(e,!1),this._helpPanelLayoutService.close(),this._helpPanelLayoutService.closeLayer(),this._specialLetterLayerService.close(),this._panelContainerLayerService.closePanel(),this._aiBannerLayoutService.open(),this._contentsToolbarLayoutService.hide()},e}(),L()(pr.prototype,"openAiModalLayer",[P.preventOnDocumentProcessing,E.d,ur],Object.getOwnPropertyDescriptor(pr.prototype,"openAiModalLayer"),pr.prototype),pr);n.d(t,"a",function(){return uo}),n.d(t,"b",function(){return po});var lo={"align-drop-down":{view:D,useCase:fr,propertyName:"align",styleName:"align"},"align-drop-down-with-justify":{view:j,useCase:fr,propertyName:"align",styleName:"align"},"align-drop-down-without-right":{view:N,useCase:fr,propertyName:"align",styleName:"align"},"align-group":{view:G,useCase:fr,propertyName:"align",styleName:"align"},"align-group-with-justify":{view:q,useCase:fr,propertyName:"align",styleName:"align"},"align-group-without-right":{view:K,useCase:fr,propertyName:"align",styleName:"align"},"caption-align-group":{view:G,useCase:fr,propertyName:"caption.align",styleName:"align"},"background-color":{view:$,useCase:hr.a,propertyName:"backgroundColor",styleName:"background-color",option:{storagePolicy:{key:"backgroundColor",property:"recentColors"}}},"separator-bar":{view:ne,useCase:hr.a,propertyName:"separatorBar",styleName:"separator-bar"},bold:{view:oe,useCase:hr.a,propertyName:"bold",styleName:"bold"},"to-text":{view:Dn,useCase:Pr,propertyName:"toText",styleName:"to-text"},"cycle-align":{view:W,useCase:fr,propertyName:"align",styleName:"align"},"cycle-align-with-justify":{view:F,useCase:fr,propertyName:"align",styleName:"align"},"caption-align":{view:W,useCase:fr,propertyName:"caption.align",styleName:"align"},"caption-bold":{view:oe,useCase:hr.a,propertyName:"caption.bold",styleName:"bold"},"caption-link":{view:nt,useCase:gr.a,propertyName:"caption.link.url",styleName:"link"},"content-mode-group":{view:ae.a,useCase:Or.a,propertyName:"contentMode",styleName:"object-arrangement"},"content-mode-group-without-default":{view:se.a,useCase:Or.a,propertyName:"contentMode",styleName:"object-arrangement"},"content-mode-group-without-extend-pagefull":{view:le,useCase:Or.a,propertyName:"contentMode",styleName:"object-arrangement"},"content-mode-group-without-pagefull":{view:pe.a,useCase:Or.a,propertyName:"contentMode",styleName:"object-arrangement"},"content-mode-group-fit-and-extend":{view:ue.a,useCase:Or.a,propertyName:"contentMode",styleName:"object-arrangement"},"content-mode-justify":{view:de.a,useCase:Or.a,propertyName:"contentMode",styleName:"object-arrangement-fit"},delete:{view:he.a,useCase:mr,styleName:"delete"},"drop-cap":{view:fe,useCase:hr.a,propertyName:"dropCap",styleName:"drop-cap"},"font-color":{view:ye,useCase:hr.a,propertyName:"fontColor",styleName:"font-color",option:{storagePolicy:{key:"fontColor",property:"recentColors"}}},"font-family":{view:Oe,useCase:hr.a,propertyName:"fontFamily",styleName:"font-family"},"font-size":{view:Pe,useCase:hr.a,propertyName:"fontSizeCode",styleName:"font-size-code"},"image-link":{view:nt,useCase:gr.a,propertyName:"link.value",styleName:"link"},italic:{view:ke,useCase:hr.a,propertyName:"italic",styleName:"italic"},"line-height":{view:Ze,useCase:hr.a,propertyName:"lineHeight",styleName:"line-height"},"text-link":{view:nt,useCase:gr.a,propertyName:"link.url",styleName:"link"},"quotation-layout":{view:it.a,useCase:Or.a,propertyName:"layout",styleName:"quotation"},"quotation-layout-label":{view:ot,useCase:Or.a,propertyName:"layout",styleName:"quotation"},"section-title-layout":{view:st,useCase:Or.a,propertyName:"layout",styleName:"section-title"},"special-letter":{view:pt,useCase:kr,styleName:"special-letter"},speller:{view:ht,useCase:eo,styleName:"speller"},sticker:{view:En,useCase:to.a,styleName:"sticker"},strikethrough:{view:ft,useCase:hr.a,propertyName:"strikeThrough",styleName:"strikethrough"},subscript:{view:yt,useCase:hr.a,propertyName:"subscript",styleName:"subscript"},superscript:{view:_t,useCase:hr.a,propertyName:"superscript",styleName:"superscript"},template:{view:wn,useCase:no.a,styleName:"template"},"text-format":{view:bt.a,useCase:Pr,propertyName:"textFormat",styleName:"text-format"},"text-format-drop-down":{view:Ot,useCase:Pr,propertyName:"textLayout",styleName:"text-format"},underline:{view:Lt,useCase:hr.a,propertyName:"underline",styleName:"underline"},"wrapping-layout-drop-down":{view:Et.a,useCase:io,styleName:"text-arrangement"},"wrapping-layout-group":{view:Pt.a,useCase:io,propertyName:"wrappingLayout",styleName:"text-arrangement"},code:{view:Dt,useCase:xr,styleName:"code"},"horizontal-line":{view:Mt,useCase:Ar.a,styleName:"insert-horizontal-line"},image:{view:Bt.a,useCase:jr.a,styleName:"image"},formula:{view:Ut,useCase:Rr.a,styleName:"formula"},quotation:{view:zt,useCase:Nr.a,styleName:"insert-quotation"},table:{view:Gt,useCase:Mr,styleName:"table"},video:{view:en,useCase:Br.a,styleName:"video"},audio:{view:nn,useCase:Gr,styleName:"audio"},"social-media-image":{view:on,useCase:qr,styleName:"social-media-image"},file:{view:sn,useCase:Jr,styleName:"file"},library:{view:kt,useCase:wr,styleName:"library"},oglink:{view:ln,useCase:Kr,styleName:"oglink"},map:{view:pn,useCase:Xr,styleName:"map"},schedule:{view:hn,useCase:Yr,styleName:"schedule"},search:{view:yn,useCase:Qr.a,styleName:"search"},"to-quotation":{view:kn.a,useCase:Pr,styleName:"to-quotation"},"image-edit-right-label":{view:An.a,useCase:Cr,styleName:"image-edit"},"image-edit":{view:jn.a,useCase:Cr,styleName:"image-edit"},"image-adjust":{view:Rn.a,useCase:Cr,styleName:"image-adjust"},"image-crop":{view:Nn.a,useCase:Cr,styleName:"image-crop"},"image-filter":{view:Mn.a,useCase:Cr,styleName:"image-filter"},"image-replacement":{view:Bn.a,useCase:Cr,styleName:"image-replacement"},"image-resizing":{view:Wn.a,useCase:Cr,propertyName:"size",styleName:"resizing"},"image-location":{view:ki.a,useCase:Cr,styleName:"image-location"},"video-resizing":{view:zn,useCase:Ir,propertyName:"size",styleName:"resizing"},"inline-image":{view:Gn,useCase:Cr,styleName:"inline-image"},"delete-with-selection":{view:he.a,useCase:yr,styleName:"delete"},"additional-button":{view:ui,useCase:function(){},styleName:"additional-button"},"more-view":{view:Ci,useCase:function(){},styleName:"more-view"},list:{view:Oi,useCase:hr.a,propertyName:"list",styleName:"list"},"image-tag":{view:Ei,useCase:oo,propertyName:"mediaTags",styleName:"image-tag"},talktalk:{view:wi,useCase:ao,styleName:"talktalk"},moment:{view:Tn,useCase:Zr,styleName:"moment"},translation:{view:Kn,useCase:ro,styleName:"translation"},"translation-right-label":{view:ei,useCase:ro,styleName:"translation"},webtoon:{view:Yn,useCase:Hr,styleName:"webtoon"},chat:{view:jt,useCase:Dr.a,styleName:"chat"},"additional-info":{view:Ai,useCase:function(){},styleName:"additional-info"},"ai-write":{view:dr,useCase:co,styleName:"ai-write"}};function uo(e){return lo[e]}function po(e){return void 0===e&&(e=function(e){return e}),function(t){var n=t.selectedComponents,i=t.defaultButtonSet;if(!n||1!==n.length)return[];if(Array.isArray(i))return i||[];var r=e(t),o=r.buttons,a=void 0===o?[]:o,s=r.payload,c=void 0===s?{}:s;if("function"==typeof i){var l=n[0],u=["layout","contentMode"].reduce(function(e,t){return e[t]=l[t],e},{});return i(v()({},u,c,{defaultButtons:a}))||[]}return a}}},740:function(e,t,n){"use strict";n.d(t,"a",function(){return H}),n.d(t,"c",function(){return J}),n.d(t,"b",function(){return K});var i=n(1),r=n.n(i),o=n(17),a=n.n(o),s=n(55),c=n.n(s),l=n(60),u=n.n(l),p=n(58),d=n.n(p),h=n(0),g=n.n(h),f=n(50),m=n.n(f),y=(n(61),n(139)),v=n.n(y),_=n(49),b=n(376),S=n(16),C=n(23),I=n(126),O=n(186),T=n(720),L=n(722),E=n(190),P=n(831),w=n(383),k=n(84),x=n(150),D=n(1105),A=n(386),j=n(112),R=["isShow","onRequireNextItem"],N=function(e,t){return function(){return"chunk_"+t++}}(0,0);function M(e,t){for(var n=0,i=e[n];i&&i.length<=t;)t-=i.length,i=++n<e.length&&e[n];return i?[i[t],n,t]:[]}function B(e,t,n){for(var i=0;i<t;i++)n+=e[i].length;return n}var W=function(){function e(e){this._mat=e}var t=e.prototype;return t.get=function(e){return M(this._mat,e)[0]},t.size=function(){return this._mat.reduce(function(e,t){return e+t.length},0)},e}();function U(e,t,n,i,r,o){void 0===r&&(r=I.a),void 0===o&&(o=I.a);for(var a=t.length,s=0,c=0,l=new W(e),u=new T.a.ArrayLike(t),p=0;p<a;p++){e.length<=s&&(e[s]=[]);var d=e[s],h=d.length>c&&d[c];if(!h||r(h)!==o(t[p])){var g=T.a.findIndexPairOfSameValueAtArrayLike(l,u,B(e,s,c),p,r,o),f=g[0],m=g[1],y=M(e,f),v=y[1],_=y[2];if(v!==s||_!==c){var b=z(e,s,c,v,_);s=b[0],c=b[1]}if(e.length<=s&&(e[s]=[]),d=e[s],m!==p){var S,C=t.slice(p,m);(S=d).splice.apply(S,[c,0].concat(C)),c+=C.length,p=m}}d.length>c&&d[c]!==t[p]&&(d[c]=t[p]),d.length<=++c&&(c=0,s++)}return e.length>s&&z(e,s,c),function(e,t,n){var i=e.length;for(;--i>=0;)F(e,i,t,n);e.length}(e,n,i),e}function F(e,t,n,i){for(var r=e[t],o=r.length;o>=i||o<=n;){if(i<=o){var a=i/2|0,s=r.splice(a,o-a);e.splice(++t,0,s)}else if(n>=o){if(1===e.length)break;var c,l;if(t)(c=e[t-1]).push.apply(c,e.splice(t--,1)[0]);else(l=e[t]).push.apply(l,e.splice(t+1,1)[0])}o=(r=e[t]).length}return t}function z(e,t,n,i,r){void 0===i&&(i=e.length-1),void 0===r&&(r=e[i].length);var o=e[t],a=o.length,s=e[i];if(t===i){if(n===r)return[t,n+1];var c=r-n;return c===a?e.splice(t,1):o.splice(n,c),[t,n]}return r===s.length?i++:s.splice(0,r),0===n?t--:o.splice(n,a-n),e.splice(t+1,i-t-1),[t+1,0]}var V=function(e){return e.id},G=function(e,t){for(var n,i=v()(t);!(n=i()).done;){var r=n.value,o=Object(S.a)(e,r);if(o)return o}},H=function(e,t){var n,i,r=(n=function(n){function r(e){var r;r=n.call(this,e)||this,u()(r,"list",i,d()(r));var o=t.path;return r._applyList(G(r.props,Object(O.a)(o)?[o]:o)),r}g()(r,n);var o=r.prototype;return o.componentDidMount=function(){this.registerChange()},o.componentDidUpdate=function(e){var n=t.path,i=G(e,Object(O.a)(n)?[n]:n),r=G(this.props,Object(O.a)(n)?[n]:n);i!==r&&(this._applyList(r),this.unregisterChange(),this.registerChange())},o.componentWillUnmount=function(){this._disposer()},o.render=function(){var n={};return Object(C.a)(n,t.output||"list",this.list),_.b.createElement(e,c()({},this.props,n))},o._applyList=function(e){U(this.list,e,4,16,V,V),this.list.forEach(function(e){e.id||(e.id=N())})},o.registerChange=function(){var e=this,n=t.path;this._disposer=_.f.autorun(function(){var t=G(e.props,Object(O.a)(n)?[n]:n);e._applyList(t)})},o.unregisterChange=function(){this._disposer&&this._disposer()},r}(_.b.Component),i=m()(n.prototype,"list",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),n);return Object(b.b)(r)},q=function(e){return new Promise(function(t){setTimeout(t,e)})},J=function(e,t){void 0===t&&(t={});var n=t.getKey||function(e,t){return t},i=t.path||"list",r=t.output||"list";return Object(b.b)(function(t){var o=Object(S.a)(t,i);return _.b.createElement(_.b.Fragment,null,o.map(function(i,o){var a=n(i,o);if(!Object(D.a)(a)&&!Object(A.a)(a)){var s={};return Object(C.a)(s,r,i),_.b.createElement(e,c()({},t,{key:a},s))}}))})},K=function(e,t){var n,i;void 0===t&&(t={});var o=t.path||"list",s=t.output||"list",l=t.getKey||function(e,t){return t},p=t.reorder||I.a,h=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._timer=null,e}g()(n,t);var i=n.prototype;return i.componentDidUpdate=function(e){var t=this.props,n=t.isShow,i=t.onRequireNextItem;!e.isShow&&n&&i()},i.render=function(){var t=this.props,n=t.isShow,i=(t.onRequireNextItem,a()(t,R));return n?_.b.createElement(e,i):null},n}(_.b.PureComponent),f=(n=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,u()(t,"_waitQueue",i,d()(t)),t._prevIds=[],t._started=!1,t._flows=void 0,t._popAndDelay=function(){if(t._waitQueue.length)return t._waitQueue.shift(),q(250)},t._onRequireNextItem=function(){t._flows.fork("loading").next(t._popAndDelay)},t}g()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._flows=new L.a},n.componentDidUpdate=function(){this._waitQueue.length&&this._started&&(this._started=!1,this._onRequireNextItem())},n.componentWillUnmount=function(){this._flows.abort()},n.render=function(){var e=this,t=this.props,n=Object(S.a)(t,o);return _.b.createElement(_.b.Fragment,null,n.map(function(t,n){var i=l(t,n);if(!Object(D.a)(i)&&!Object(A.a)(i)){var r={};return Object(C.a)(r,s,t),_.b.createElement(h,c()({key:i,isShow:!e._isWaiting(i)},e.props,r,{onRequireNextItem:e._onRequireNextItem}))}}))},n.componentWillReact=function(){if(!Object(k.a)(this._prevIds,this.ids)){this._started=!0;var e=[].concat(Object(E.a)(this.ids,this._prevIds),Object(P.a)(Object(w.a)(this._waitQueue),this.ids));this._flows.abort("loading"),this._waitQueue.replace(p(e,this.props)),this._prevIds=this.ids}},n._isWaiting=function(e){return this._waitQueue.some(function(t){return Object(x.a)(t)?Object(j.a)(t,e):t===e})},r()(t,[{key:"ids",get:function(){return Object(S.a)(this.props,o).map(l)}}]),t}(_.b.Component),m()(n.prototype,"ids",[_.e],Object.getOwnPropertyDescriptor(n.prototype,"ids"),n.prototype),i=m()(n.prototype,"_waitQueue",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),n);return Object(b.b)(f)}},749:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=15},750:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i,r,o,a=n(12),s=n.n(a),c=n(18),l=n.n(c),u=n(0),p=n.n(u),d=n(50),h=n.n(d),g=n(51),f=n(49),m=n(718),y=n(52),v=n(1309),_=n(1310),b=(i=Object(y.history)({sync:!1}),r=Object(y.history)({sync:!1}),o=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=g.W.get("configAgent"),t._eventDispatcherService=g.W.get("eventDispatcherService"),t._componentListStore=g.W.get("componentListStore"),t._editingService=g.W.get("editingService"),t._toastLayerService=g.W.get("toastLayerService"),t._fileUploadService=g.W.get("fileUploadService"),t._fileUploadLayerService=g.W.get("fileUploadLayerService"),t._fileComponentService=g.W.get("fileComponentService"),t._canvasLayoutService=g.W.get("canvasLayoutService"),t._i18n=g.W.get("i18n"),t._fileMaxUploadCount=t._configAgent.get("infraConfig.file.maxUploadCount")||1/0,t}p()(t,e);var n=t.prototype;return n.uploadLocalFile=function(){var e=l()(s.a.mark(function e(t){var n,i,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=this._getInsertMeta()),!this._isOverMaxUploadCount()){e.next=4;break}return this._showOverMaxUploadError(),e.abrupt("return");case 4:return e.next=6,this._fileUploadService.openFileDialog();case 6:if(n=e.sent,n&&n.size>0){e.next=11;break}return this._onUploadEmptyFile(),e.abrupt("return");case 11:if(!this._isOverFileSizeLimit(n.size)){e.next=14;break}return this._onOverFileSizeLimit(),e.abrupt("return");case 14:return i=this._insertFileComponent(n,t),r=i.id,this._fileUploadLayerService&&this._fileUploadLayerService.close(),this._eventDispatcherService.emit(g.z.IN_PROGRESS),e.next=20,this._fileUploadService.uploadLocalFile(n,r,{progress:this._onUploadProgress.bind(this),success:this._onUploadSuccess.bind(this),error:this._onUploadError.bind(this)});case 20:(o=e.sent)&&o.defaultPrevented&&this._removeFileComponent(r);case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.uploadCloudFile=function(){var e=l()(s.a.mark(function e(t){var n,i,r,o,a,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=this._getInsertMeta()),!this._isOverMaxUploadCount()){e.next=4;break}return this._showOverMaxUploadError(),e.abrupt("return");case 4:return e.prev=4,e.next=7,this._fileUploadService.openMyboxPopup();case 7:if(n=e.sent,i=this._resolveMyboxFileInfo(n[0]),!this._isOverFileSizeLimit(i.size)){e.next=12;break}return this._onOverFileSizeLimit(),e.abrupt("return");case 12:return r=this._refineCloudFileInfo(i),o=this._insertFileComponent(r,t),a=o.id,this._fileUploadLayerService&&this._fileUploadLayerService.close(),this._eventDispatcherService.emit(g.z.IN_PROGRESS),e.next=19,this._fileUploadService.uploadCloudFile(i,a,{progress:this._onUploadProgress.bind(this),success:this._onUploadSuccess.bind(this),error:this._onUploadError.bind(this)});case 19:(c=e.sent)&&c.defaultPrevented&&this._removeFileComponent(a),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(4),this._onUploadError(e.t0);case 26:case"end":return e.stop()}},e,this,[[4,23]])}));return function(t){return e.apply(this,arguments)}}(),n._resolveMyboxFileInfo=function(e){return{downloadUrl:e.downloadUrl,key:e.fileId,name:e.title,size:e.fileSize,type:e.fileType}},n._getInsertMeta=function(){return{setting:{fileUploadLimitFileSize:this._configAgent.get("editorInfo.fileUploadLimitFileSize")}}},n._isOverMaxUploadCount=function(){return this._componentListStore.countBy("file")>=this._fileMaxUploadCount},n._showOverMaxUploadError=function(){var e=this._i18n("limits:file_description_exceeded_count_by_max",{maxcount:this._fileMaxUploadCount});this._showErrorMessage(e)},n._isOverFileSizeLimit=function(e){return e>this._configAgent.get("editorInfo.fileUploadLimitFileSize")},n._onOverFileSizeLimit=function(){var e=this._configAgent.get("editorInfo.fileUploadLimitFileSize"),t=m.a.convertToMB(e),n=this._i18n("fileUploadUseCase:error_overflow_size",{maxlength:t+"MB"});this._showErrorMessage(n)},n._onUploadProgress=function(e,t){this._fileComponentService.updateProgress(t,e)},n._onUploadSuccess=function(e,t){this._eventDispatcherService.dispatch(g.C.ADD_XCAM_CONTENTS,{ctype:"file"}),this._fileComponentService.updateComponent(t,e);var n=Object(v.a)(_.b.FILE,e);n&&this._eventDispatcherService.dispatch(g.z.RESOURCE_UPLOADED,n),this._onCompleteUpload()},n._onUploadError=function(e,t){var n=e.response;412===(void 0===n?{}:n).status?this._showErrorMessage(this._i18n("fileUploadUseCase:prohibits_filename")):this._showErrorMessage(this._i18n("fileUploadUseCase:error_temporary")),this._removeFileComponent(t),this._onCompleteUpload()},n._onUploadEmptyFile=function(){this._showErrorMessage(this._i18n("fileUploadUseCase:check_original_file"))},n._onCompleteUpload=function(){this._eventDispatcherService.emit(g.z.PROGRESS_COMPLETED)},n._showErrorMessage=function(e){this._toastLayerService.warningMessage(e)},n._insertFileComponent=function(e){var t=this._fileComponentService.createFileComponent(e);return this._insertComponent(t),t},n._insertComponent=function(e){return this._editingService.insert({sourceComponents:[e]})},n._removeFileComponent=function(e){e&&this._editingService.eraseComponent(e)},n._refineCloudFileInfo=function(e){return{name:e.name,size:e.size}},n.close=function(){this._fileUploadService.closeMyboxPopup(),this._fileUploadLayerService&&this._fileUploadLayerService.close()},t}(g.m),h()(o.prototype,"uploadLocalFile",[y.sentryCatch,i,f.d],Object.getOwnPropertyDescriptor(o.prototype,"uploadLocalFile"),o.prototype),h()(o.prototype,"uploadCloudFile",[y.sentryCatch,r,f.d],Object.getOwnPropertyDescriptor(o.prototype,"uploadCloudFile"),o.prototype),h()(o.prototype,"close",[f.d],Object.getOwnPropertyDescriptor(o.prototype,"close"),o.prototype),o)},751:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(49),l=n(52),u=(i=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this.props.visibility;this.element.style.visibility=e},n.render=function(){var e=this.props,t=e.onClick,n=e.text;return c.b.createElement("button",{type:"button",className:"se-popup-close-button",ref:this._ref,onClick:t},c.b.createElement("span",{className:"se-blind"},n))},n._ref=function(e){this.element=e},t}(c.b.Component),s()(i.prototype,"_ref",[l.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_ref"),i.prototype),i);u.defaultProps={onClick:function(){},text:"",visibility:!0},u.propTypes={onClick:c.a.func,text:c.a.string,visibility:c.a.bool},t.a=u},752:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){if(!e)return!1;var t=e.split("/").pop().split("?").shift();if(window.ActiveXObject||"ActiveXObject"in window){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){var e=new Blob([n.response],{type:"application/octet-stream"});navigator.msSaveOrOpenBlob(e,t)},n.send()}else{var i=new Image;i.onload=function(){var n=document.createElement("a");n.style.display="none",n.setAttribute("download",t),n.setAttribute("target","_blank"),n.setAttribute("href",e),document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n)},100)},i.src=e}}},753:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s});var i=5,r={NONE:"none",NORMAL:"normal"},o=[{id:"material-travel",i18n:"imageTagLayer:tab_material-travel",logId:"travel"},{id:"material-book",i18n:"imageTagLayer:tab_material-book",logId:"book"},{id:"material-movie",i18n:"imageTagLayer:tab_material-movie",logId:"movie"},{id:"material-broadcast",i18n:"imageTagLayer:tab_material-broadcast",logId:"tv"},{id:"material-show",i18n:"imageTagLayer:tab_material-show",logId:"show"},{id:"material-music",i18n:"imageTagLayer:tab_material-music",logId:"music"},{id:"material-shopping",i18n:"imageTagLayer:tab_material-shopping",logId:"goods"},{id:"material-news",i18n:"imageTagLayer:tab_material-news",logId:"news"}].map(function(e){var t=e.id,n=e.i18n,i=e.logId;return{i18n:n,id:t,categoryId:t,iconType:r.NORMAL,logId:i,name:"",api:""}}),a=o.map(function(e){return e.id}),s=a.filter(function(e){return"material-travel"!==e})},754:function(e,t,n){"use strict";var i,r=n(50),o=n.n(r),a=n(51),s=n(49),c=n(52),l=(i=function(){function e(){this._i18n=a.W.get("i18n"),this._propertyChangeService=a.W.get("propertyChangeService"),this._propertyToolbarLayoutService=a.W.get("propertyToolbarLayoutService"),this._imageComponentService=a.W.get("imageComponentService"),this._toastLayerService=a.W.get("toastLayerService"),this._alertLayerService=a.W.get("alertLayerService")}var t=e.prototype;return t.changeLink=function(e){var t=e.value.trim();if(this._propertyChangeService.isValidLink(t))this._imageComponentService.removeMediaTag(),this._propertyChangeService.changeLink({type:"url",value:t});else{var n=this._i18n("textComponent:is_valid_link");this._toastLayerService.warningMessage(n)}},t.toggleButton=function(e){var t=this,n=e.id;e.showConfirm&&"image-link"===n&&this._imageComponentService.isTaggedImage()&&this._alertLayerService.open({type:"confirm",title:this._i18n("imageTag:confirm_added_tag_title"),description:this._i18n("imageTag:confirm_convert_to_link_description"),onClickConfirm:function(){return t._propertyToolbarLayoutService.toggleButton(n)},onClickCancel:function(){return t._alertLayerService.close()}})},e}(),o()(i.prototype,"changeLink",[c.preventOnComponentProcessing,c.history,s.d],Object.getOwnPropertyDescriptor(i.prototype,"changeLink"),i.prototype),o()(i.prototype,"toggleButton",[s.d],Object.getOwnPropertyDescriptor(i.prototype,"toggleButton"),i.prototype),i);t.a=l},755:function(e,t,n){"use strict";var i=n(55),r=n.n(i),o=n(54),a=n.n(o),s=n(49),c=n(376),l=n(432),u=n(59),p=n(294),d=n(239),h=function(e){var t,n=e.id,i=e.type,o=e.optionId,c=e.options,h=e.namespace,g=e.name,f=e.optionType,m=e.inputValue,y=e.value,v=e.onChangeInputValue,_=e.onConfirmInputValue,b=e.onClickOptionList,S=e.applyLabel,C=e.logAreaId,I=e.i18n,O=c[o],T=y===o,L=f===u.c.TEXT,E=n+":"+o,P=a()("__se-sentry","se-toolbar-option-"+f+"-button","se-toolbar-option-"+g+"-"+o+"-button",T?"se-is-selected":"",O.badge&&!d.b.shown(E,d.a.BADGE)?"__se-highlight-button se-highlight-toolbar-button":""),w=C+"."+O.logId;if(O.useInput){var k=y>0&&!c[y],x=m||k,D=k?y:I(O.placeholder),A="se-"+g+"-"+o+"-container",j="se-"+g+"-"+o+"-input",R=a()("se-"+g+"-"+o+"-apply-button");return s.b.createElement("div",{className:A,"data-log":w},s.b.createElement(l.a,{placeholder:D,className:j,"data-value":o,onChange:v,onConfirm:_,value:m,maxLength:3}),x&&s.b.createElement("button",{type:"button",className:R,"data-value":o,onClick:b},s.b.createElement("span",{className:"se-blind"},I(S))))}var N=a()(((t={"se-toolbar-option-label":!0})[O.class]=O.class,t)),M={"data-group":h+"Toolbar","data-name":n||g,"data-role":"option","data-value":o,"data-type":i,"data-log":w};return s.b.createElement(p.a,r()({type:"button",title:"",className:P,onClick:b},M,{"aria-current":T?"true":"false"}),L&&s.b.createElement("span",{className:N,"aria-hidden":"true"},I(O.label)),s.b.createElement("span",{className:"se-toolbar-tooltip"},I(O.label)),T&&s.b.createElement("span",{className:"se-blind"},"선택됨"))};h.defaultProps={optionId:"",options:{},name:"",optionType:"",value:"",applyLabel:"",logAreaId:"",i18n:function(e){return e},onConfirmInputValue:function(){},onChangeInputValue:function(){},onClickOptionList:function(){}},h.propTypes={optionId:s.a.string,options:s.a.oneOfType([s.a.object,s.a.array]),name:s.a.string,optionType:s.a.string,value:s.a.string,applyLabel:s.a.string,logAreaId:s.a.string,inputValue:s.a.oneOfType([s.a.number,s.a.string]),namespace:s.a.string,onChangeInputValue:s.a.func,onConfirmInputValue:s.a.func,onClickOptionList:s.a.func,i18n:s.a.func},t.a=Object(c.b)(h)},756:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(54),a=n.n(o),s=n(49),c=n(376),l=n(59),u=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){var e=this.props,t=e.name,n=e.type,i=a()("se-"+n+"-button","se-toolbar-button-"+t);return s.b.createElement("div",{"data-type":n,"data-name":t,className:i},s.b.createElement("span",{className:"se-toolbar-icon"}))},t}(s.b.Component);u.defaultProps={id:"",name:""},u.propTypes={type:s.a.oneOf([l.b.SEPARATOR_BAR]).isRequired,id:s.a.string,name:s.a.string},t.a=Object(c.b)(u)},758:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(104),f=n(59),m=["type","title","label","groups"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"contentModeGroup:title":i,a=e.label,c=void 0===a?"contentModeGroup:label":a,l=e.groups,u=void 0===l?[{value:"normal",title:"contentModeGroup:normal_title",label:"contentModeGroup:normal_label",logId:"arrnml"},{value:"fit",title:"contentModeGroup:fit_title",label:"contentModeGroup:fit_label",logId:"arrfit"},{value:"extend",title:"contentModeGroup:extend_title",label:"contentModeGroup:extend_label",logId:"arrext"},{value:"pagefull",title:"contentModeGroup:pagefull_title",label:"contentModeGroup:pagefull_label",logId:"arrfull"}]:l,p=s()(e,m);return d.b.createElement(g.a,o()({},p,{type:n,title:r,label:c,groups:u,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeContentMode(e)},t}(d.b.Component),p()(i.prototype,"_handleChange",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChange"),i.prototype),i);t.a=y},759:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(104),f=n(59),m=["type","title","label","groups","value"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"contentModeGroupWithoutDefault:title":i,a=e.label,c=void 0===a?"contentModeGroupWithoutDefault:label":a,l=e.groups,u=void 0===l?[{value:"fit",title:"contentModeGroupWithoutDefault:fit_title",label:"contentModeGroupWithoutDefault:fit_label",logId:"arrfit"},{value:"extend",title:"contentModeGroupWithoutDefault:extend_title",label:"contentModeGroupWithoutDefault:extend_label",logId:"arrext"},{value:"pagefull",title:"contentModeGroupWithoutDefault:pagefull_title",label:"contentModeGroupWithoutDefault:pagefull_label",logId:"arrfull"}]:l,p=e.value,h=void 0===p?"fit":p,y=s()(e,m);return d.b.createElement(g.a,o()({},y,{type:n,title:r,label:c,groups:u,value:h,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeContentMode(e)},t}(d.b.Component),p()(i.prototype,"_handleChange",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChange"),i.prototype),i);t.a=y},76:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(54),f=n.n(g),m=n(215),y=["children","tagName","className","ctype","isUnitSelector","useToolbarSlot","forwardRef","store","onChangeSelection"],v=["se-is-activated","se-is-selected","se-is-on","se-is-focused"],_=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this)._elementRef=d.b.createRef(),n._originStore=null,n}l()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this._observeSelectionChanged()},n.componentDidMount=function(){var e=this.props.store;e&&this._updateSelectionClasses(e.selection)},n.componentDidUpdate=function(){this._wasStoreChanged()&&this._reobserveSelectionChanged()},n.componentWillUnmount=function(){this._unobserveSelectionChanged()},n.render=function(){var e=this.props,t=e.children,n=e.tagName,i=void 0===n?"div":n,r=e.className,a=void 0===r?"":r,c=e.ctype,l=void 0===c?"":c,u=e.isUnitSelector,p=void 0===u||u,h=e.useToolbarSlot,g=void 0===h||h,f=e.forwardRef,v=(e.store,e.onChangeSelection,s()(e,y)),_=i,b=this._resolveClassNames({ctype:l,isUnitSelector:p,className:a}),S=g&&"div"===i,C=f||this._elementRef;return d.b.createElement(_,o()({},v,{ref:C,className:b}),t,S&&Object(m.a)({}))},n._wasStoreChanged=function(){return this.props.store&&this._originStore!==this.props.store},n._resolveClassNames=function(e){var t,n=e.ctype,i=e.isUnitSelector,r=e.className,o=((t={})["se-module se-module-"+n]=!!n,t["__se-unit"]=i,t),a=this._getDOMReference().current;if(a){var s=a.classList;v.forEach(function(e){o[e]=s.contains(e)})}return f()([o,r])},n._handleSelectionChange=function(e){this._updateSelectionClasses(e),this.props.onChangeSelection()},n._getDOMReference=function(){return this.props.forwardRef||this._elementRef},n._updateSelectionClasses=function(e){var t=this._getDOMReference().current;if(t){var n=t.classList;switch(e){case"single":case"multi":return n.add("se-is-activated"),void n.remove("se-is-selected");case"block":return n.remove("se-is-activated"),void n.add("se-is-selected");default:n.remove("se-is-activated"),n.remove("se-is-selected")}}},n._unobserveSelectionChanged=function(){this._disposeReaction&&this._disposeReaction()},n._observeSelectionChanged=function(){var e=this,t=this.props.store;t&&(this._originStore=t,this._disposeReaction=d.f.reaction(function(){return e.props.store.selection},this._handleSelectionChange,{fireImmediately:!0}))},n._reobserveSelectionChanged=function(){this._unobserveSelectionChanged(),this._observeSelectionChanged()},t}(d.b.Component),p()(i.prototype,"_handleSelectionChange",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleSelectionChange"),i.prototype),i);_.defaultProps={tagName:"div",className:"",ctype:"",isUnitSelector:!0,useToolbarSlot:!0,onChangeSelection:function(){},children:null},_.propTypes={forwardRef:d.a.oneOfType([d.a.func,d.a.shape({current:d.a.instanceOf(Element)})]),tagName:d.a.string,className:d.a.string,ctype:d.a.string,isUnitSelector:d.a.bool,useToolbarSlot:d.a.bool,onChangeSelection:d.a.func,children:d.a.oneOfType([d.a.element,d.a.array])},t.a=_},760:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(104),f=n(59),m=["type","title","label","groups"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"contentModeGroupWithoutPagefull:title":i,a=e.label,c=void 0===a?"contentModeGroupWithoutPagefull:label":a,l=e.groups,u=void 0===l?[{value:"normal",title:"contentModeGroupWithoutPagefull:normal_title",label:"contentModeGroupWithoutPagefull:normal_label",logId:"arrnml"},{value:"fit",title:"contentModeGroupWithoutPagefull:fit_title",label:"contentModeGroupWithoutPagefull:fit_label",logId:"arrfit"},{value:"extend",title:"contentModeGroupWithoutPagefull:extend_title",label:"contentModeGroupWithoutPagefull:extend_label",logId:"arrext"}]:l,p=s()(e,m);return d.b.createElement(g.a,o()({},p,{type:n,title:r,label:c,groups:u,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeContentMode(e)},t}(d.b.Component),p()(i.prototype,"_handleChange",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChange"),i.prototype),i);y.propTypes={useCase:d.a.object},t.a=y},761:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(104),f=n(59),m=["type","title","label","groups"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"contentModeGroupFitAndExtend:title":i,a=e.label,c=void 0===a?"contentModeGroupFitAndExtend:label":a,l=e.groups,u=void 0===l?[{value:"fit",title:"contentModeGroupFitAndExtend:fit_title",label:"contentModeGroupFitAndExtend:fit_label",logId:"arrfit"},{value:"extend",title:"contentModeGroupFitAndExtend:extend_title",label:"contentModeGroupFitAndExtend:extend_label",logId:"arrext"}]:l,p=s()(e,m);return d.b.createElement(g.a,o()({},p,{type:n,title:r,label:c,groups:u,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeContentMode(e)},t}(d.b.Component),p()(i.prototype,"_handleChange",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChange"),i.prototype),i);t.a=y},762:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(107),f=n(59),m=["type","title","label","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.TOGGLE:t,i=e.title,r=void 0===i?{active:"contentModeJustify:title_active",inactive:"contentModeJustify:title_inactive"}:i,a=e.label,c=void 0===a?"contentModeJustify:label":a,l=e.logId,u=void 0===l?"arrfit":l,p=s()(e,m);return d.b.createElement(g.a,o()({},p,{type:n,title:r,label:c,logId:u,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeContentMode(e)},t}(d.b.Component),p()(i.prototype,"_handleChange",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChange"),i.prototype),i);y.propTypes={useCase:d.a.object},t.a=y},763:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","label","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"deleteButton:title":i,a=e.label,c=void 0===a?"deleteButton:label":a,l=e.logId,u=void 0===l?"del":l,p=s()(e,m);return d.b.createElement(g.a,o()({},p,{type:n,title:r,label:c,logId:u,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.erase()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);y.propTypes={useCase:d.a.object},t.a=y},764:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(51),g=n(52),f=n(104),m=n(59),y=["type","title","label","value","logId","groups"],v=(i=function(e){function t(){var t;t=e.call(this)||this;var n=h.W.get("configAgent");return t._allowLayouts=n.get("productConfig.quotation.layouts"),t}l()(t,e);var n=t.prototype;return n.render=function(){var e=this,t=this.props,n=t.type,i=void 0===n?m.b.GROUP_TOGGLE:n,r=t.title,a=void 0===r?"quotationLayout:title":r,c=t.label,l=void 0===c?"quotationLayout:label":c,u=t.value,p=void 0===u?"default":u,h=t.logId,g=void 0===h?"quota":h,v=t.groups,_=void 0===v?[{value:"default",title:"quotationLayout:default_title",label:"quotationLayout:default_label",logId:"quota0"},{value:"quotation_line",title:"quotationLayout:line_title",label:"quotationLayout:line_label",logId:"quota1"},{value:"quotation_bubble",title:"quotationLayout:bubble_title",label:"quotationLayout:bubble_label",logId:"quota2"},{value:"quotation_underline",title:"quotationLayout:underline_title",label:"quotationLayout:underline_label",logId:"quota3"},{value:"quotation_postit",title:"quotationLayout:postit_title",label:"quotationLayout:postit_label",logId:"quota4"},{value:"quotation_corner",title:"quotationLayout:corner_title",label:"quotationLayout:corner_label",logId:"quota5"}]:v,b=s()(t,y),S=_;return this._allowLayouts&&(S=S.filter(function(t){return e._allowLayouts.includes(t.value)})),d.b.createElement(f.a,o()({},b,{type:i,title:a,label:l,value:p,logId:g,groups:S,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeQuotationLayout(e)},t}(d.b.Component),p()(i.prototype,"_handleChange",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChange"),i.prototype),i);t.a=v},765:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),r=n.n(i),o=n(51),a=function(e){function t(){var t;return(t=e.call(this)||this)._target="sticker",t._documentToolbarLayoutService=o.W.get("documentToolbarLayoutService"),t._panelContainerLayerService=o.W.get("panelContainerLayerService"),t._stickerPanelLayoutService=o.W.get("stickerPanelLayoutService"),t}return r()(t,e),t.prototype.toggle=function(){var e=this,t=this._panelContainerLayerService,n=this._stickerPanelLayoutService;t.toggleLayout(this._target,n,function(t,n){e._documentToolbarLayoutService.setPanelButtonEnable(t,n),n||e._stickerPanelLayoutService.closeRefreshPanel()})},t}(o.i)},766:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(58),r=n.n(i),o=n(0),a=n.n(o),s=n(51),c=function(e){function t(){var t;return t=e.call(this)||this,!1===s.W.get("configAgent").get("productConfig.templatePanel")?(t.toggle=function(){},r()(t)):(t._target="template",t._documentToolbarLayoutService=s.W.get("documentToolbarLayoutService"),t._panelContainerLayerService=s.W.get("panelContainerLayerService"),t._templatePanelLayoutService=s.W.get("templatePanelLayoutService"),t)}return a()(t,e),t.prototype.toggle=function(){var e=this,t=this._panelContainerLayerService,n=this._templatePanelLayoutService;t.toggleLayout(this._target,n,function(t,n){e._documentToolbarLayoutService.setPanelButtonEnable(t,n)})},t}(s.i)},767:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(51),g=n(52),f=n(211),m=n(59),y=["type","title","label","hasIcon","value","logId","options"],v=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this)._configAgent=h.W.get("configAgent"),n}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?m.b.LABEL_SELECT:t,i=e.title,r=void 0===i?"textFormat:title":i,a=e.label,c=void 0===a?"textFormat:label":a,l=e.hasIcon,u=void 0!==l&&l,p=e.value,h=void 0===p?"text":p,g=e.logId,v=void 0===g?"fmt":g,_=e.options,b=void 0===_?{text:{label:"textFormat:text_label",logId:"fmttext"},sectionTitle:{label:"textFormat:sectionTitle_label",logId:"fmtquot"},quotation:{label:"textFormat:quotation_label",logId:"fmtstit"}}:_,S=s()(e,y),C=this._refineOptions(b);return d.b.createElement(f.a,o()({},S,{type:n,title:r,label:c,hasIcon:u,value:h,logId:v,options:C,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeTextFormat(e),this.props.onClickSelector(e)},n._refineOptions=function(e){var t=this._configAgent.get("plugins.excludeComponents")||[],n={text:e.text};return["sectionTitle","quotation"].forEach(function(i){-1===t.indexOf(i)&&(n[i]=e[i])}),n},t}(d.b.Component),p()(i.prototype,"_handleClickOption",[g.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickOption"),i.prototype),i);t.a=v},768:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(153),f=n(59),m=["type","title","label","value","logId","options","useHighlight","useIconUpdate"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.DROP_DOWN:t,i=e.title,r=void 0===i?{inactive:"wrappingLayoutDropDown:title_inactive",active:"wrappingLayoutDropDown:title_active"}:i,a=e.label,c=void 0===a?"wrappingLayoutDropDown:label":a,l=e.value,u=void 0===l?"":l,p=e.logId,h=void 0===p?"wpmode":p,y=e.options,v=void 0===y?{"inner-left":{title:"wrappingLayoutDropDown:inner_left_title",label:"wrappingLayoutDropDown:inner_left_label",logId:"wpinleft"},"inner-right":{title:"wrappingLayoutDropDown:inner_right_title",label:"wrappingLayoutDropDown:inner_right_label",logId:"wpinright"},"inner-big-left":{title:"wrappingLayoutDropDown:inner_big_left_title",label:"wrappingLayoutDropDown:inner_big_left_label",logId:"wpoutleft"},"inner-big-right":{title:"wrappingLayoutDropDown:inner_big_right_title",label:"wrappingLayoutDropDown:inner_big_right_label",logId:"wpoutright"}}:y,_=e.useHighlight,b=void 0===_||_,S=e.useIconUpdate,C=void 0===S||S,I=s()(e,m);return d.b.createElement(g.a,o()({},I,{type:n,title:r,label:c,value:u,logId:h,options:v,useHighlight:b,useIconUpdate:C,onClickOption:this._handleClickOption}))},n._handleClickOption=function(e){this.props.useCase.changeWrappingLayout(e),this.props.onClickSelector(e)},t}(d.b.Component),p()(i.prototype,"_handleClickOption",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClickOption"),i.prototype),i);t.a=y},769:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(104),f=n(59),m=["type","title","label","value","logId","groups"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.GROUP_TOGGLE:t,i=e.title,r=void 0===i?"wrappingLayoutGroup:title":i,a=e.label,c=void 0===a?"":a,l=e.value,u=void 0===l?"":l,p=e.logId,h=void 0===p?"wpmode":p,y=e.groups,v=void 0===y?[{value:"inner-left",title:"wrappingLayoutGroup:inner_left_title",label:"wrappingLayoutGroup:inner_left_label",logId:"wpinleft"},{value:"inner-right",title:"wrappingLayoutGroup:inner_right_title",label:"wrappingLayoutGroup:inner_right_label",logId:"wpinright"},{value:"inner-big-left",title:"wrappingLayoutGroup:inner_big_left_title",label:"wrappingLayoutGroup:inner_big_left_label",logId:"wpoutleft"},{value:"inner-big-right",title:"wrappingLayoutGroup:inner_big_right_title",label:"wrappingLayoutGroup:inner_big_right_label",logId:"wpoutright"}]:y,_=s()(e,m);return d.b.createElement(g.a,o()({},_,{type:n,title:r,label:c,value:u,logId:h,groups:v,onChange:this._handleChange}))},n._handleChange=function(e){this.props.useCase.changeWrappingLayout(e)},t}(d.b.Component),p()(i.prototype,"_handleChange",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChange"),i.prototype),i);t.a=y},770:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i,r=n(50),o=n.n(r),a=n(51),s=n(52),c=n(49),l=(i=function(){function e(){this._editingService=a.W.get("editingService"),this._horizontalLineComponentService=a.W.get("horizontalLineComponentService"),this._documentToolbarLayoutService=a.W.get("documentToolbarLayoutService")}return e.prototype.insertHorizontalLine=function(e){var t=this._horizontalLineComponentService.createComponent({layout:e});this._editingService.insert({sourceComponents:[t]}),this._documentToolbarLayoutService.updateHorizontalSelectedValue(t.layout)},e}(),o()(i.prototype,"insertHorizontalLine",[s.preventOnComponentProcessing,s.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"insertHorizontalLine"),i.prototype),i)},771:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","label","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"imageInsert:title":i,a=e.label,c=void 0===a?"imageInsert:label":a,l=e.logId,u=void 0===l?"img":l,p=s()(e,m);return d.b.createElement(g.a,o()({},p,{type:n,title:r,label:c,logId:u,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.insertImage()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},772:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i,r,o,a,s,c,l,u=n(139),p=n.n(u),d=n(12),h=n.n(d),g=n(18),f=n.n(g),m=n(0),y=n.n(m),v=n(50),_=n.n(v),b=n(78),S=n(51),C=n(49),I=n(52),O=n(39),T=(i=Object(I.command)(O.a.IMAGE.INSERT_IMAGES),r=Object(I.command)(O.a.IMAGE.INSERT_IMAGE_FILES),o=Object(I.history)({sync:!1}),a=Object(I.command)(O.a.IMAGE.INSERT_IMAGE_URLS),s=Object(I.history)({sync:!1}),c=Object(I.history)({sync:!1}),l=function(e){function t(){var t;return(t=e.call(this)||this)._imageUploadService=S.W.get("imageUploadService"),t._imageBehavior=S.W.get("imageBehavior"),t._selectionInfoStore=S.W.get("selectionInfoStore"),t._componentListStore=S.W.get("componentListStore"),t}y()(t,e);var n=t.prototype;return n._isInlineImage=function(){var e=this._selectionInfoStore.focus,t=e.compId,n=e.unitId,i=this._componentListStore.getComponentById(t).getStoreById(n);return"inline-image-allowed-append"===i.attributes.insertion&&"child"===i.selection},n.insertImages=function(){var e=f()(h.a.mark(function e(t){var n,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,i=t.data,e.t0=n,e.next="file"===e.t0?4:"url"===e.t0?7:10;break;case 4:return e.next=6,this.insertImagesByFile({data:i});case 6:return e.abrupt("break",11);case 7:return e.next=9,this.insertImagesByUrl({data:i});case 9:return e.abrupt("break",11);case 10:throw new Error("Please, Input data type");case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.insertImagesByFile=function(){var e=f()(h.a.mark(function e(t){var n,i,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,i=Object(b.a)(n,function(e){var t=e.file,n=e.fileName;return t.fileName=n,t}),r=this._imageUploadService.validateImages(i),!this._isInlineImage()){e.next=8;break}return e.next=6,this._imageBehavior.insertInlineImage(r);case 6:e.next=10;break;case 8:return e.next=10,this._imageBehavior.insertImage(r);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.insertImagesByUrl=function(){var e=f()(h.a.mark(function e(t){var n,i,r,o,a,s,c,l;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,i=n.reduce(function(e,t){var n=t.url,i=t.origin,r=void 0===i?"local":i,o=e.urlsByOrigin;if(e.prevOrigin!==r)o.push({urls:[{url:n}],origin:r}),e.prevOrigin=r;else{var a=o.pop();a.urls.push({url:n}),o.push(a)}return e},{urlsByOrigin:[]}),r=i.urlsByOrigin,o=p()(r);case 3:if((a=o()).done){e.next=15;break}if(s=a.value,c=s.urls,l=s.origin,!this._isInlineImage()){e.next=11;break}return e.next=9,this._imageBehavior.insertInlineImageFromUrls(c,l);case 9:e.next=13;break;case 11:return e.next=13,this._imageBehavior.insertImageFromUrls(c,l);case 13:e.next=3;break;case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.insertImage=function(){var e=f()(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._imageUploadService.openFileDialog({multiple:!0});case 2:return t=e.sent,e.next=5,this._imageBehavior.insertImage(t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t}(S.m),_()(l.prototype,"insertImages",[I.sentryCatch,i,C.d],Object.getOwnPropertyDescriptor(l.prototype,"insertImages"),l.prototype),_()(l.prototype,"insertImagesByFile",[I.sentryCatch,r,I.preventOnDocumentProcessing,o,C.d],Object.getOwnPropertyDescriptor(l.prototype,"insertImagesByFile"),l.prototype),_()(l.prototype,"insertImagesByUrl",[I.sentryCatch,a,I.preventOnDocumentProcessing,s,C.d],Object.getOwnPropertyDescriptor(l.prototype,"insertImagesByUrl"),l.prototype),_()(l.prototype,"insertImage",[I.sentryCatch,I.preventOnDocumentProcessing,c,C.d],Object.getOwnPropertyDescriptor(l.prototype,"insertImage"),l.prototype),l)},773:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i,r=n(50),o=n.n(r),a=n(51),s=n(52),c=n(49),l=n(119),u=n(113),p="CHANGE_MODE",d="INSERT_MODE",h=(i=function(){function e(){this._selectionInfoStore=a.W.get("selectionInfoStore"),this._quotationComponentService=a.W.get("quotationComponentService"),this._editingService=a.W.get("editingService"),this._documentToolbarLayoutService=a.W.get("documentToolbarLayoutService"),this._propertyChangeService=a.W.get("propertyChangeService"),this._finderService=a.W.get("finderService")}var t=e.prototype;return t._insertQuotation=function(e){var t=this._quotationComponentService.createWithLayout(e);this._editingService.insert({sourceComponents:[t]}),this._documentToolbarLayoutService.updateQuotationSelectedValue(t.layout)},t.insertQuotation=function(e){this._insertQuotation(e)},t.changeTextLayout=function(e){var t=this._getUpdatedModes();t===p?this._changeQuoatation(e):t===d&&this._insertQuotation(e)},t._changeQuoatation=function(e){this._propertyChangeService.changeTextFormat("quotation"),this._propertyChangeService.changeLayout(e)},t._getUpdatedModes=function(){var e=this._selectionInfoStore.mode,t=this._finderService.getSelectedComponents();switch(e){case a.P.BLOCK:return Object(u.a)(t,function(e){return!1===["sectionTitle","text"].includes(e.ctype)})?d:p;case a.P.SINGLE_COMP:case a.P.MULTI_COMP:return d;case a.P.CURSOR:return["sectionTitle","text"].includes(Object(l.a)(t).ctype)?p:d}return p},e}(),o()(i.prototype,"insertQuotation",[s.preventOnComponentProcessing,s.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"insertQuotation"),i.prototype),o()(i.prototype,"changeTextLayout",[s.preventOnComponentProcessing,s.history,c.d],Object.getOwnPropertyDescriptor(i.prototype,"changeTextLayout"),i.prototype),i)},774:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(12),r=n.n(i),o=n(18),a=n.n(o),s=n(0),c=n.n(s),l=n(51),u=function(e){function t(){var t;return(t=e.call(this)||this)._target="search",t._documentToolbarLayoutService=l.W.get("documentToolbarLayoutService"),t._panelContainerLayerService=l.W.get("panelContainerLayerService"),t._searchPanelLayoutService=l.W.get("searchPanelLayoutService"),t._toastLayerService=l.W.get("toastLayerService"),t._i18n=l.W.get("i18n"),t}return c()(t,e),t.prototype.toggle=function(){var e=this,t=this._panelContainerLayerService,n=this._searchPanelLayoutService;t.toggleLayout(this._target,n,function(){var t=a()(r.a.mark(function t(i,o){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._documentToolbarLayoutService.setPanelButtonEnable(i,o),t.prev=1,!o){t.next=5;break}return t.next=5,n.requestData(n.getSearchType(),n.getSearchOption());case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.failed&&(n.updateErrorStatus(!0),e._toastLayerService.warningMessage(e._i18n("searchPanelLayout:error_server_data_load")));case 11:case"end":return t.stop()}},t,null,[[1,7]])}));return function(e,n){return t.apply(this,arguments)}}())},t}(l.i)},775:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","label","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"toQuotation:title":i,a=e.label,c=void 0===a?"toQuotation:label":a,l=e.logId,u=void 0===l?"fmtquot":l,p=s()(e,m);return d.b.createElement(g.a,o()({},p,{type:n,title:r,label:c,logId:u,onClick:this._handleClick}))},n._handleClick=function(e){e.value="quotation",this.props.useCase.changeTextFormat(e)},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},776:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(210),f=n(777),m=n(59),y=["type","title","label","labelVisible","isSelected","custom","logId"],v=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?m.b.CUSTOM_LAYER:t,i=e.title,r=void 0===i?{inactive:"imageResizing:title_inactive",active:"imageResizing:title_active"}:i,a=e.label,c=void 0===a?"imageResizing:label":a,l=e.labelVisible,u=void 0===l||l,p=e.isSelected,h=void 0!==p&&p,v=e.custom,_=void 0===v?{CustomLayer:f.a,customProps:{applyAllLabel:"imageResizing:apply_all_label",widthLabel:"imageResizing:width_label",heightLabel:"imageResizing:height_label",resetLabel:"imageResizing:reset_label",applyLabel:"imageResizing:apply_label"}}:v,b=e.logId,S=void 0===b?"qsize":b,C=s()(e,y);return d.b.createElement(g.a,o()({},C,{type:n,title:r,label:c,labelVisible:u,isSelected:h,custom:_,logId:S,onClick:this._handleClick,onChange:this._handleChange}))},n._handleClick=function(e){this.props.onClickSelector(e)},n._handleChange=function(e){this.props.useCase.changeSize(e)},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),p()(i.prototype,"_handleChange",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleChange"),i.prototype),i);t.a=v},777:function(e,t,n){"use strict";var i,r=n(56),o=n.n(r),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(16),p=n(69),d=n(84),h=n(49),g=n(376),f=n(432),m=n(52),y=(i=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._widthInputRef=h.b.createRef(),t}s()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this.setState(this.mapStateFromProps(this.props))},n.UNSAFE_componentWillReceiveProps=function(e){var t=this;this.setState(function(){return t.mapStateFromProps(e)})},n.componentDidUpdate=function(e,t){this.state.isValid=this._isValid(t)},n.render=function(){var e=this.props,t=e.applyAllLabel,n=e.widthLabel,i=e.heightLabel,r=e.resetLabel,o=e.applyLabel,a=e.i18n,s=e.logAreaId,c=Object(u.a)(this.state,"value.width",""),l=Object(u.a)(this.state,"value.height",""),p=Object(u.a)(this.state,"value.isApplyAllChecked",!1),d=s+".qsizew",g=s+".qsizeh",m=s+".qsizeall",y=s+".qsizeok",v=s+".qsizereset";return h.b.createElement("div",{className:"se-custom-layer-option se-custom-layer-option-resizing"},h.b.createElement("div",{className:"se-custom-layer-resizing-input-group"},h.b.createElement("div",{className:"se-custom-layer-resizing-input-width","data-log":d},h.b.createElement("label",{className:"se-custom-layer-resizing-guide",htmlFor:"resizing-input-width"},"W"),h.b.createElement(f.a,{className:"se-custom-layer-resizing-input",ref:this._widthInputRef,id:"resizing-input-width",placeholder:this.state.widthPlaceholder,title:a(n),value:c,maxLength:4,autofocus:!0,onChange:this._onChangeWidthHandler,onConfirm:this._onKeyPressHandler,autoComplete:"off"})),h.b.createElement("div",{className:"se-custom-layer-resizing-input-height","data-log":g},h.b.createElement("label",{className:"se-custom-layer-resizing-guide",htmlFor:"resizing-input-height"},"H"),h.b.createElement(f.a,{className:"se-custom-layer-resizing-input",id:"resizing-input-height",placeholder:this.state.heightPlaceholder,title:a(i),value:l,maxLength:4,autofocus:!0,onChange:this._onChangeHeightHandler,onConfirm:this._onKeyPressHandler,autoComplete:"off"}))),h.b.createElement("div",{className:"se-custom-layer-resizing-option-group"},h.b.createElement("span",{className:"se-custom-layer-resizing-all","data-log":m},h.b.createElement("input",{type:"checkbox",className:"se-custom-layer-resizing-checkbox",id:"resizing-apply-all",checked:p,onChange:this._onCheckApplyAllHandler}),h.b.createElement("label",{htmlFor:"resizing-apply-all",className:"se-custom-layer-resizing-checkbox-label"},a(t))),h.b.createElement("button",{type:"button",className:"se-custom-layer-resizing-reset-button","data-role":"reset","data-log":v,onClick:this._onResetHandler},h.b.createElement("span",{className:"se-custom-layer-resizing-reset-label"},a(r)))),h.b.createElement("button",{type:"button",className:"se-custom-layer-resizing-apply-button",title:a(o),"data-role":"confirm","data-log":y,onClick:this._onConfirmHandler},h.b.createElement("span",{className:"se-custom-layer-resizing-apply-button-label"},a(o))))},n.mapStateFromProps=function(e){return{value:{width:"",height:"",isApplyAllChecked:Object(u.a)(e,"value.isApplyAllChecked",!1),isReset:!1},widthPlaceholder:Object(u.a)(e,"value.width"),heightPlaceholder:Object(u.a)(e,"value.height"),isValid:!1}},n.triggerConfirm=function(e){if(!1===this.state.isValid)return!1;this.props.onConfirm({event:e,value:this.state.value}),this.props.onClose()},n._onCheckApplyAllHandler=function(e){var t=e.target.checked,n=o()({},this.state,{value:o()({},this.state.value,{isApplyAllChecked:t,width:"",height:""})});t?(n.widthPlaceholder=null,n.heightPlaceholder=null,this._focusOnWidthInput()):(n.widthPlaceholder=Object(u.a)(this.props,"value.width"),n.heightPlaceholder=Object(u.a)(this.props,"value.height")),this._updateState(n)},n._focusOnWidthInput=function(){this._widthInputRef.current.focus()},n._onResetHandler=function(e){var t=this.props.value;this._updateState({value:{width:"",height:""},widthPlaceholder:t?t.width:"",heightPlaceholder:t?t.height:""}),this.props.onConfirm({event:e,value:o()({},this.state.value,{isReset:!0})})},n._onChangeWidthHandler=function(e){var t=e,n="";if(Number(e)>0&&(t=e?Math.round(e):"",!this.state.value.isApplyAllChecked)){var i=this._getSizeRate().heightRate;n=i>-1?Math.round(e*i):""}var r=Object(p.a)({width:t,height:n},this.state.value);this._updateState({value:r})},n._onChangeHeightHandler=function(e){var t="",n=e;if(Number(e)>0&&(n=e?Math.round(e):"",!this.state.value.isApplyAllChecked)){var i=this._getSizeRate().widthRate;t=i>-1?Math.round(e*i):""}var r=Object(p.a)({width:t,height:n},this.state.value);this._updateState({value:r})},n._onConfirmHandler=function(e){this.triggerConfirm(e)},n._onKeyPressHandler=function(e){this.triggerConfirm(e)},n._getSizeRate=function(){var e={widthRate:-1,heightRate:-1},t=Object(u.a)(this.props,"value.width"),n=Object(u.a)(this.props,"value.height");return!0===!(!t||!n)&&(e={widthRate:t/n,heightRate:n/t}),this._getSizeRate=function(){return e},e},n._isValid=function(e){var t=!1===Object(d.a)(this.state.value,e.value),n=this._isValidValue(this.state.value);return t&&n},n._isValidValue=function(e){if(!e)return!1;var t=!0,n=0===Number(e.width),i=0===Number(e.height);return n&&i&&(t=!1),t},n._updateState=function(e){this.setState(e),this.props.onInput({event:event,value:this.state.value})},t}(h.b.Component),l()(i.prototype,"triggerConfirm",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"triggerConfirm"),i.prototype),l()(i.prototype,"_onCheckApplyAllHandler",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_onCheckApplyAllHandler"),i.prototype),l()(i.prototype,"_onResetHandler",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_onResetHandler"),i.prototype),l()(i.prototype,"_onChangeWidthHandler",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_onChangeWidthHandler"),i.prototype),l()(i.prototype,"_onChangeHeightHandler",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_onChangeHeightHandler"),i.prototype),l()(i.prototype,"_onConfirmHandler",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_onConfirmHandler"),i.prototype),l()(i.prototype,"_onKeyPressHandler",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_onKeyPressHandler"),i.prototype),i);y.defaultProps={value:{width:"",height:"",isApplyAllChecked:!1,isReset:!1},isValid:!1,widthPlaceholder:"",heightPlaceholder:"",onConfirm:function(){},onInput:function(){},onClose:function(){},applyAllLabel:"",widthLabel:"",heightLabel:"",resetLabel:"",applyLabel:"",i18n:function(e){return e}},y.propTypes={applyAllLabel:h.a.string,widthLabel:h.a.string,heightLabel:h.a.string,resetLabel:h.a.string,applyLabel:h.a.string,i18n:h.a.func,value:h.a.shape({width:h.a.oneOfType([h.a.string,h.a.number]),height:h.a.oneOfType([h.a.string,h.a.number]),isApplyAllChecked:h.a.bool,isReset:h.a.bool}),isValid:h.a.bool,widthPlaceholder:h.a.oneOfType([h.a.string,h.a.number]),heightPlaceholder:h.a.oneOfType([h.a.string,h.a.number]),onConfirm:h.a.func,onInput:h.a.func,onClose:h.a.func,logAreaId:h.a.string},t.a=Object(g.b)(y)},778:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(59),f=n(63),m=["type","title","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?g.b.BASIC:t,i=e.title,r=void 0===i?"imageLocation:title":i,a=e.logId,c=void 0===a?"location":a,l=s()(e,m);return d.b.createElement(f.a,o()({},l,{type:n,title:r,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.editLocation()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},779:function(e,t,n){"use strict";var i,r,o,a,s,c=n(60),l=n.n(c),u=n(58),p=n.n(u),d=n(0),h=n.n(d),g=n(50),f=n.n(g),m=(n(61),n(16)),y=n(241),v=n(51),_=n(49),b=n(437),S=n(780),C=(i=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this,t)||this,l()(n,"opened",r,p()(n)),l()(n,"activeLetterGroup",o,p()(n)),l()(n,"position",a,p()(n)),l()(n,"activated",s,p()(n)),n.defaultLetterGroup="used",n.letterGroupList=S.a.getDefinitions(["used","general","num","round","hangul","greece","japan"]),n.persistentPolicy={used:{key:"special-letter/used-letter",property:"items"}},n.movedPopup=!1;var i=t,c=i.state,u=void 0===c?{}:c,d=i.config,h=void 0===d?{}:d,g=v.W.get("configAgent").get("productConfig.layoutType");return n._storage=v.W.get("storagePolicy"),n.opened=Object(m.a)(u,"opened",n.opened),n.activeLetterGroup=Object(m.a)(u,"activeLetterGroup",n.activeLetterGroup),n.position=Object(m.a)(u,"position",n.position),n.activated=Object(m.a)(u,"activated",n.activated),n.defaultLetterGroup=Object(m.a)(h,"defaultLetterGroup",n.defaultLetterGroup),n.letterGroupList=Object(m.a)(h,"letterGroupList",n.letterGroupList),n.persistentPolicy=Object(m.a)(h,"persistentPolicy",n.persistentPolicy),n.draggingZone=Object(m.a)(h,"draggingZone",g===v.I.EMBED?"browser":"container"),n.letterGroupList=n._getLatestLetterGroupListByPolicy(),n}h()(t,e);var n=t.prototype;return n.togglePopup=function(e){var t=void 0===e?{}:e,n=t.pageX,i=void 0===n?0:n,r=t.pageY,o=void 0===r?0:r,a=t.activated;this.opened=!this.opened,this._setPopupPosition(i,o),this._setActivateToolbar(a)},n.openPopup=function(e){var t=void 0===e?{}:e,n=t.pageX,i=void 0===n?0:n,r=t.pageY,o=void 0===r?0:r,a=t.activated;this.opened=!0,this._setPopupPosition(i,o),this._setActivateToolbar(a)},n.closePopup=function(){this.opened=!1},n.changeLetterGroup=function(e){void 0===e&&(e=""),this.activeLetterGroup=e},n.updateRecentSpecialLetterList=function(e){var t=this.persistentPolicy,n=void 0===t?[]:t,i=this.letterGroupList,r=Object.keys(n)[0],o=n[r].property;i[r][o]=e},n._getLatestLetterGroupListByPolicy=function(){var e=this.letterGroupList,t=this.persistentPolicy,n=this._storage;return e&&Object.keys(e).forEach(function(i){if(t&&t[i]){var r=t[i],o=r.key,a=r.property,s=Object(y.a)((n.get(o)||[]).concat(e[i][a]));e[i][a]=s.slice(0,b.a.STORAGE_VALUE_MAX_LENGTH)}}),e},n._setPopupPosition=function(e,t){this.position={leftPos:e+b.a.POPUP_OFFSET_CORRECTION,topPos:t+b.a.POPUP_OFFSET_CORRECTION}},n._setActivateToolbar=function(e){this.activated=e},t}(v.e),r=f()(i.prototype,"opened",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=f()(i.prototype,"activeLetterGroup",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=f()(i.prototype,"position",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{leftPos:0,topPos:0}}}),s=f()(i.prototype,"activated",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i);t.a=C},780:function(e,t,n){"use strict";var i={used:{label:"specialLetterLayer:used",items:["※","☆","★","●","·","◆","→","↑","▶","♥","♬","♪","☞","©","☎","㉿","∞","￥","￡","℃"]},general:{label:"specialLetterLayer:general",items:["｛","｝","〔","〕","〈","〉","《","》","「","」","『","』","【","】","‘","’","“","”","、","。","·","‥","…","§","※","☆","★","○","●","◎","◇","◆","□","■","△","▲","▽","▼","◁","◀","▷","▶","♤","♠","♡","♥","♧","♣","⊙","◈","▣","◐","◑","▒","▤","▥","▨","▧","▦","▩","±","×","÷","≠","≤","≥","∞","∴","°","′","″","∠","⊥","⌒","∂","≡","≒","≪","≫","√","∽","∝","∵","∫","∬","∈","∋","⊆","⊇","⊂","⊃","∪","∩","∧","∨","￢","⇒","⇔","∀","∃","´","～","ˇ","˘","˝","˚","˙","¸","˛","¡","¿","ː","∮","∑","∏","♭","♩","♪","♬","㉿","→","←","↑","↓","↔","↕","↗","↙","↖","↘","㈜","№","㏇","™","㏂","㏘","℡","♨","☏","☎","☜","☞","¶","†","‡","®","ª","º","♂","♀"]},num:{label:"specialLetterLayer:num",items:["½","⅓","⅔","¼","¾","⅛","⅜","⅝","⅞","¹","²","³","⁴","ⁿ","₁","₂","₃","₄","Ⅰ","Ⅱ","Ⅲ","Ⅳ","Ⅴ","Ⅵ","Ⅶ","Ⅷ","Ⅸ","Ⅹ","ⅰ","ⅱ","ⅲ","ⅳ","ⅴ","ⅵ","ⅶ","ⅷ","ⅸ","ⅹ","￦","$","￥","￡","€","℃","Å","℉","￠","¤","‰","㎕","㎖","㎗","ℓ","㎘","㏄","㎣","㎤","㎥","㎦","㎙","㎚","㎛","㎜","㎝","㎞","㎟","㎠","㎡","㎢","㏊","㎍","㎎","㎏","㏏","㎈","㎉","㏈","㎧","㎨","㎰","㎱","㎲","㎳","㎴","㎵","㎶","㎷","㎸","㎹","㎀","㎁","㎂","㎃","㎄","㎺","㎻","㎼","㎽","㎾","㎿","㎐","㎑","㎒","㎓","㎔","Ω","㏀","㏁","㎊","㎋","㎌","㏖","㏅","㎭","㎮","㎯","㏛","㎩","㎪","㎫","㎬","㏝","㏐","㏓","㏃","㏉","㏜","㏆"]},round:{label:"specialLetterLayer:round",items:["㉠","㉡","㉢","㉣","㉤","㉥","㉦","㉧","㉨","㉩","㉪","㉫","㉬","㉭","㉮","㉯","㉰","㉱","㉲","㉳","㉴","㉵","㉶","㉷","㉸","㉹","㉺","㉻","ⓐ","ⓑ","ⓒ","ⓓ","ⓔ","ⓕ","ⓖ","ⓗ","ⓘ","ⓙ","ⓚ","ⓛ","ⓜ","ⓝ","ⓞ","ⓟ","ⓠ","ⓡ","ⓢ","ⓣ","ⓤ","ⓥ","ⓦ","ⓧ","ⓨ","ⓩ","①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩","⑪","⑫","⑬","⑭","⑮","㈀","㈁","㈂","㈃","㈄","㈅","㈆","㈇","㈈","㈉","㈊","㈋","㈌","㈍","㈎","㈏","㈐","㈑","㈒","㈓","㈔","㈕","㈖","㈗","㈘","㈙","㈚","㈛","⒜","⒝","⒞","⒟","⒠","⒡","⒢","⒣","⒤","⒥","⒦","⒧","⒨","⒩","⒪","⒫","⒬","⒭","⒮","⒯","⒰","⒱","⒲","⒳","⒴","⒵","⑴","⑵","⑶","⑷","⑸","⑹","⑺","⑻","⑼","⑽","⑾","⑿","⒀","⒁","⒂"]},hangul:{label:"specialLetterLayer:hangul",items:["ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄸ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅃ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ","ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ","ㅥ","ㅦ","ㅧ","ㅨ","ㅩ","ㅪ","ㅫ","ㅬ","ㅭ","ㅮ","ㅯ","ㅰ","ㅱ","ㅲ","ㅳ","ㅴ","ㅵ","ㅶ","ㅷ","ㅸ","ㅹ","ㅺ","ㅻ","ㅼ","ㅽ","ㅾ","ㅿ","ㆀ","ㆁ","ㆂ","ㆃ","ㆄ","ㆅ","ㆆ","ㆇ","ㆈ","ㆉ","ㆊ","ㆋ","ㆌ","ㆍ","ㆎ"]},greece:{label:"specialLetterLayer:greece",items:["Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","τ","υ","φ","χ","ψ","ω","Æ","Ð","Ħ","Ĳ","Ŀ","Ł","Ø","Œ","Þ","Ŧ","Ŋ","æ","đ","ð","ħ","I","ĳ","ĸ","ŀ","ł","ł","œ","ß","þ","ŧ","ŋ","ŉ","Б","Г","Д","Ё","Ж","З","И","Й","Л","П","Ц","Ч","Ш","Щ","Ъ","Ы","Ь","Э","Ю","Я","б","в","г","д","ё","ж","з","и","й","л","п","ф","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"]},japan:{label:"specialLetterLayer:japan",items:["ぁ","あ","ぃ","い","ぅ","う","ぇ","え","ぉ","お","か","が","き","ぎ","く","ぐ","け","げ","こ","ご","さ","ざ","し","じ","す","ず","せ","ぜ","そ","ぞ","た","だ","ち","ぢ","っ","つ","づ","て","で","と","ど","な","に","ぬ","ね","の","は","ば","ぱ","ひ","び","ぴ","ふ","ぶ","ぷ","へ","べ","ぺ","ほ","ぼ","ぽ","ま","み","む","め","も","ゃ","や","ゅ","ゆ","ょ","よ","ら","り","る","れ","ろ","ゎ","わ","ゐ","ゑ","を","ん","ァ","ア","ィ","イ","ゥ","ウ","ェ","エ","ォ","オ","カ","ガ","キ","ギ","ク","グ","ケ","ゲ","コ","ゴ","サ","ザ","シ","ジ","ス","ズ","セ","ゼ","ソ","ゾ","タ","ダ","チ","ヂ","ッ","ツ","ヅ","テ","デ","ト","ド","ナ","ニ","ヌ","ネ","ノ","ハ","バ","パ","ヒ","ビ","ピ","フ","ブ","プ","ヘ","ベ","ペ","ホ","ボ","ポ","マ","ミ","ム","メ","モ","ャ","ヤ","ュ","ユ","ョ","ヨ","ラ","リ","ル","レ","ロ","ヮ","ワ","ヰ","ヱ","ヲ","ン","ヴ","ヵ","ヶ"]}};t.a={getDefinitions:function(e){var t={};return e.map(function(e){t[e]=i[e]}),t}}},781:function(e,t,n){"use strict";var i,r,o,a,s=n(56),c=n.n(s),l=n(60),u=n.n(l),p=n(1),d=n.n(p),h=n(58),g=n.n(h),f=n(0),m=n.n(f),y=n(50),v=n.n(y),_=(n(61),n(16)),b=n(75),S=n(253),C=n(1079),I=n(49),O=n(214),T=n(555),L=n(193),E=(i=Object(I.e)({keepAlive:!0}),r=Object(I.e)({keepAlive:!0}),o=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).ctype="textNode",u()(n,"value",a,g()(n));var i=t.state,r=void 0===i?{}:i;return n.value=Object(_.a)(r,"value",n.value),n}m()(t,e);var n=t.prototype;return n.writeValue=function(e){var t=e.offset,n=e.imeOffset,i=e.value,r=this.value,o=r.substring(0,n),a=o+i+r.substring(t);return this.value=a,{nodeId:this.id,offset:o.length+i.length}},n.mergeValue=function(e){var t=this.value+e.value;this.value=t},n.cutValue=function(e,t){this.value=this.value.substring(e,t)},n.split=function(e){var n=this.toPlainJSON();delete n.id,n.themeStyle=I.f.toJS(this.themeStyle),n.value=this.value.substring(e);var i=new t({state:n});return this.cutValue(0,e),{front:this,back:i}},n.isTextNode=function(){return!0},n.isAiTextNode=function(){return!!this.style.ai},n.isEmpty=function(){return this.empty},n.isMergeable=function(e){if(!e)return!1;var t=this.hasSameStyle(e),n=this.hasSameLink(e),i="textNode"===e.ctype;return t&&n&&i},n.getStartPoint=function(){return{nodeId:this.id,offset:0}},n.getEndPoint=function(){return{nodeId:this.id,offset:this.value.length}},n.getPositionByOffset=function(e){return 0===e?O.d.NODE_START:e===this.value.length?O.d.NODE_END:O.d.NODE_BODY},n.getUrlInNode=function(e){var n=this.toValidJSON();delete n.id;var i=new t({state:n});i.cutValue(0,e.offset);var r=T.a.getUrlPatternMatches(i.value,!1);if(!i.hasUrlLink()&&r.length){var o=Object(b.a)(r)[0],a=i.getNodeLength();if(o===i.value.substr(a-o.length,o.length))return{url:Object(S.a)(o),range:{start:c()({},e,{offset:e.offset-o.length}),end:e}}}return null},n.getNodeLength=function(){return this.value.length},n.getPlainTextLength=function(){return this.getNodeLength()},n.cloneNode=function(){var e=new t({state:this.toValidJSON()});return e.updateTheme(I.f.toJS(this.themeStyle)),e},n.toPlainJSON=function(e,t){void 0===e&&(e=this.getStartPoint()),void 0===t&&(t=this.getEndPoint());var n=e.nodeId===this.id?e.offset:0,i=t.nodeId===this.id?t.offset:this.value.length,r=this.value.slice(n,i);return c()({},this._toPlainJSON,{value:r})},d()(t,[{key:"empty",get:function(){return""===this.value}},{key:"_toPlainJSON",get:function(){return{id:this.id,ctype:this.ctype,value:this.value,style:I.f.toJS(this.style),link:I.f.toJS(this.link),themeStyle:I.f.toJS(this.themeStyle)}}}]),t}(L.a),a=v()(o.prototype,"value",[I.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v()(o.prototype,"empty",[i],Object.getOwnPropertyDescriptor(o.prototype,"empty"),o.prototype),v()(o.prototype,"_toPlainJSON",[r],Object.getOwnPropertyDescriptor(o.prototype,"_toPlainJSON"),o.prototype),o);E.schema={id:C.a.string,ctype:C.a.string.isRequired,value:C.a.string.isRequired,style:C.a.shape({ctype:C.a.string.isRequired,fontColor:C.a.string,fontFamily:C.a.string,fontSizeCode:C.a.string,backgroundColor:C.a.string,bold:C.a.bool,italic:C.a.bool,underline:C.a.bool,strikeThrough:C.a.bool,subscript:C.a.bool,superscript:C.a.bool,ai:C.a.bool}),link:C.a.shape({ctype:C.a.string.isRequired,url:C.a.string.isRequired})},t.a=E},783:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o});var i=["auto","ko","en","ja","zh-CN","zh-TW","es","fr","de","ru","pt","it","vi","th","id","hi"],r="ko",o="en"},784:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=/([a-zA-Z가-힣])/;function r(e){return""===e||new RegExp(i).test(e)}},785:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(49),l=n(376),u=n(54),p=n.n(u),d=n(51),h=n(52),g=c.b.createContext({spellCheckMap:[],selectedId:""}),f=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this)._componentRendererCollector=d.W.get("componentRendererCollector"),n}o()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.spellCheckMap,n=e.selectedId,i=this._renderSpellCheckDocument(),r=this._resolveCanvasClass();return c.b.createElement(g.Provider,{value:{spellCheckMap:t,selectedId:n}},c.b.createElement("div",{className:"se-spellcheck-article-content",ref:this._ref},c.b.createElement("section",{className:r},c.b.createElement("article",{className:"se-components-wrap"},i))))},n._ref=function(e){this.scrollContent=e},n._resolveCanvasClass=function(){var e=this.props.viewMode;return p()({"se-spellcheck-canvas":!0,"se-theme-default":!0,"se-l-viewport-tablet":[d.U.VIEW_MODE_PC,d.U.VIEW_MODE_TABLET].includes(e),"se-l-viewport-desktop":e===d.U.VIEW_MODE_PC})},n._renderSpellCheckDocument=function(){var e=this,t=this.props,n=t.spellCheckDocument,i=t.i18n,r=t.viewMode;return n.map(function(t){var n=t.ctype,o=t.id,a=e._componentRendererCollector.getRenderer(n),s={viewMode:r,key:o,store:t,i18n:i};return a&&c.b.createElement(a,s)})},t}(c.b.Component),s()(i.prototype,"_ref",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_ref"),i.prototype),i);f.defaultProps={viewMode:"",spellCheckDocument:[],spellCheckList:[]},f.propTypes={i18n:c.a.func,viewMode:c.a.string,spellCheckDocument:c.a.oneOfType([c.a.array,c.a.object])},t.b=Object(l.b)(f)},786:function(e,t,n){"use strict";var i=n(49),r=n(376),o=n(54),a=n.n(o),s=function(e){var t=e.store,n=e.additionalOption.showRepresentative,r=e.status,o=e.labelThumbnail,s=e.onClick;if("complete"===r&&n){var c=a()({"se-set-rep-image-button":!0,"se-is-selected":t.represent});return i.b.createElement("button",{type:"button",className:c,onClick:s},i.b.createElement("span",{className:"se-set-rep-image-button-text"},o))}return null};s.propTypes={store:i.a.object,additionalOption:i.a.object,status:i.a.string,labelThumbnail:i.a.string,onClick:i.a.func},t.a=Object(r.b)(s)},787:function(e,t,n){"use strict";var i=n(49),r=function(e){var t=e.labelThisIs360VR,n=e.enabled,r=e.onDoubleClick,o=void 0===r?function(){}:r;return n?i.b.createElement("div",{className:"se-360vr-icon",onDoubleClick:o},i.b.createElement("span",{className:"se-blind"},t)):null};r.propTypes={labelThisIs360VR:i.a.string,enabled:i.a.bool,onDoubleClick:i.a.func},t.a=r},790:function(e,t,n){"use strict";var i=n(49),r=function(e){var t=e.enabled,n=e.locationInfo,r=e.onMouseDown,o=e.onClick;return t?i.b.createElement("button",{type:"button",className:"se-image-extra-place",onMouseDown:r,onClick:o},i.b.createElement("span",{className:"se-image-extra-place-info"},i.b.createElement("span",{className:"se-image-extra-place-name"},n.name))):null};r.propTypes={enabled:i.a.bool,locationInfo:i.a.object,onMouseDown:i.a.func,onClick:i.a.func},t.a=r},791:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(49),h=n(52),g=n(63),f=n(59),m=["type","title","logId"],y=(i=function(e){function t(){return e.apply(this,arguments)||this}l()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.type,n=void 0===t?f.b.BASIC:t,i=e.title,r=void 0===i?"imageReplacementWithoutLabel:title":i,a=e.logId,c=void 0===a?"imgchg":a,l=s()(e,m);return d.b.createElement(g.a,o()({},l,{type:n,title:r,logId:c,onClick:this._handleClick}))},n._handleClick=function(){this.props.useCase.changeImage()},t}(d.b.Component),p()(i.prototype,"_handleClick",[h.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleClick"),i.prototype),i);t.a=y},792:function(e,t,n){"use strict";var i=n(49),r=n(376),o=n(76),a=function(e){var t=e.name,n=e.address,r=e.className,a=e.useToolbarSlot,s="boolean"!=typeof a||a;return i.b.createElement(o.a,{ctype:"map-text",className:r,useToolbarSlot:s},i.b.createElement("div",{className:"se-map-info"},i.b.createElement("strong",{className:"se-map-title"},t),i.b.createElement("p",{className:"se-map-address"},n)),i.b.createElement("div",{className:"se-map-frame"}))};a.propTypes={name:i.a.string,address:i.a.string,children:i.a.oneOfType([i.a.element,i.a.array]),className:i.a.string,useToolbarSlot:i.a.bool},t.a=Object(r.b)(a)},793:function(e,t,n){"use strict";var i=n(49),r=n(376),o=n(76),a=n(85),s=function(e){var t=e.src,n=e.units,r=e.useToolbarSlot,s=e.onLoad,c=e.onError,l=e.children,u="boolean"!=typeof r||r;return i.b.createElement(o.a,{ctype:"map-image",useToolbarSlot:u},i.b.createElement(a.b,{src:t,className:"se-map-image",onLoad:s,onError:c}),i.b.createElement("div",{className:"se-map-frame"}),n,l)};s.propTypes={src:i.a.string,children:i.a.oneOfType([i.a.element,i.a.array]),units:i.a.oneOfType([i.a.element,i.a.array]),useToolbarSlot:i.a.bool,onLoad:i.a.func,onError:i.a.func},t.a=Object(r.b)(s)},794:function(e,t,n){"use strict";var i=n(55),r=n.n(i),o=n(0),a=n.n(o),s=n(1132),c=n.n(s),l=n(49),u=n(90),p=n(109),d=n(231),h=function(e){function t(t){var n;return(n=e.call(this,t)||this)._elementRef=l.b.createRef(),n.resizeWithDebounced=null,n.panel=null,n._container=null,n._prevChildrenCount=0,n}a()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._createNativeImagePanel(this._elementRef.current),this.resizeWithDebounced=Object(u.a)(function(){return e._resize()},50),this._prevChildrenCount=Object(p.a)(this.props.children).length,(d.a.isIE()||d.a.isEdge())&&(this.panel._view.style["-ms-user-select"]="",this.panel._view.style["-ms-touch-select"]="")},n.componentDidUpdate=function(){var e=this.props,t=e.drag,n=e.wheel,i=e.deceleration,r=e.overflow,o=e.right,a=e.children,s=e.onReset,c=Object(p.a)(a).length;c!==this._prevChildrenCount&&(this._prevChildrenCount=c,this._container=null,this._createNativeImagePanel(this._elementRef.current),s()),this.panel.options.drag=t,this.panel.options.wheel=n,this.panel.options.deceleration=i,this.panel.options.overflow=r,this.panel.options.right=o,this.resizeWithDebounced()},n.componentWillUnmount=function(){this.panel&&this.panel.destroy(),this.panel=null,this._container=null,this.resizeWithDebounced=null,this._prevChildrenCount=0},n.render=function(){var e=this.props,n=e.tag,i={};for(var o in e)o in t.propTypes||(i[o]=e[o]);return l.b.createElement(n,r()({},i,{ref:this._elementRef}),e.children)},n._createNativeImagePanel=function(e){var t=this,n=this.props,i=n.viewer,r=n.deceleration,o=n.progress,a=n.thumb,s=n.right,l=n.drag,u=n.wheel,p=n.overflow,d=e.querySelector(i);d!==this._container&&(this._container=d,this.panel&&this.panel.destroy(),this.panel=new c.a(e.querySelector(i),{drag:l,wheel:u,deceleration:r,overflow:p,right:s,progress:o&&e.querySelector(o),thumb:a&&e.querySelector(a)}),this.panel.on("scroll",function(e){return t.props.onScroll(e)}),this.panel.on("scrollEnd",function(e){return t.props.onScrollEnd(e)}),this.panel.on("resize",function(e){return t.props.onResize(e)}),this.panel.on("showBar",function(e){return t.props.onShowBar(e)}),this.panel.on("hideBar",function(e){return t.props.onHideBar(e)}))},n._resize=function(){this.panel&&this.panel.resize()},n.next=function(e){this.panel.next(e)},n.prev=function(e){this.panel.prev(e)},t}(l.b.Component);h.propTypes={tag:l.a.string,deceleration:l.a.number,viewer:l.a.string,contentMode:l.a.string,progress:l.a.string,thumb:l.a.string,drag:l.a.bool,wheel:l.a.bool,right:l.a.bool,overflow:l.a.string,onScroll:l.a.func,onScrollEnd:l.a.func,onResize:l.a.func,onShowBar:l.a.func,onHideBar:l.a.func,onReset:l.a.func},h.defaultProps={tag:"div",deceleration:6e-4,viewer:".viewer",progress:"",thumb:"",drag:!0,right:!1,wheel:!0,overflow:"auto",onScroll:function(){},onScrollEnd:function(){},onResize:function(){},onShowBar:function(){},onHideBar:function(){},onReset:function(){}},t.a=h},795:function(e,t,n){"use strict";var i,r,o,a,s=n(60),c=n.n(s),l=n(58),u=n.n(l),p=n(0),d=n.n(p),h=n(50),g=n.n(h),f=(n(61),n(16)),m=n(70),y=n(51),v=n(1079),_=n(444),b=n(49),S=n(796),C=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},c()(n,"align",r,u()(n)),c()(n,"image",o,u()(n)),c()(n,"layout",a,u()(n));var i=t,s=i.state,l=void 0===s?{}:s,p=i.config,d=void 0===p?{}:p;return n.align=Object(f.a)(l,"align",n.align),n.layout=Object(f.a)(l,"layout",n.layout),n.accountId=Object(f.a)(l,"accountId",null),n.profileName=Object(f.a)(l,"profileName",null),n._resolveImage(Object(f.a)(l,"image",null)),n.attributes=Object(m.a)(n.attributes,d.attributes),n}d()(t,e);var n=t.prototype;return n.updateAccount=function(e){this.layout=e.layout,this.accountId=e.accountId,this.profileName=e.profileName},n.updateImage=function(e){this.image=e},n._resolveImage=function(e){e&&(this.image=new _.a({state:e}))},t}(y.g),r=g()(i.prototype,"align",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=g()(i.prototype,"image",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=g()(i.prototype,"layout",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.a.DEFAULT}}),i);C.ctype="talktalk",C.schema={ctype:v.a.string.isRequired,id:v.a.string.isRequired,layout:v.a.string.isRequired,accountId:v.a.string.isRequired,align:v.a.string,profileName:v.a.string,image:v.a.shape(_.a.schema)},t.a=C},796:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={DEFAULT:"default",CUSTOM:"custom"}},797:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(119),l=n(49),u=n(52),p=n(51),d=(i=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.editTalkTalk=function(){var e=p.W.get("selectionInfoStore").toValidJSON(),t=p.W.get("componentListStore").getSelectedComponents(e),n=Object(c.a)(t).toValidJSON();this._talktalkEditLayerService=p.W.get("talktalkEditLayerService"),this._talktalkEditLayerService.open({bannerType:n.layout,accountId:n.accountId,image:n.image})},t}(p.c),s()(i.prototype,"editTalkTalk",[u.history,l.d],Object.getOwnPropertyDescriptor(i.prototype,"editTalkTalk"),i.prototype),i);t.a=d},798:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(16)),g=n(70),f=n(51),m=n(1079),y=n(1313),v=n(49),_=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},a()(n,"align",r,c()(n));var i=t,o=i.state,s=void 0===o?{}:o,l=i.config,u=void 0===l?{}:l;return n.align=Object(h.a)(s,"align",n.align),n.layout=Object(h.a)(s,"layout",n.layout),n.title=Object(h.a)(s,"title",n.title),n.link=Object(h.a)(s,"link",n.link),n.linkedPageTitle=Object(h.a)(s,"linkedPageTitle",n.linkedPageTitle),n.sinceDate=Object(h.a)(s,"sinceDate",n.sinceDate),n.sinceYear=Object(h.a)(s,"sinceYear",n.sinceYear),n.logNo=Object(h.a)(s,"logNo",n.logNo),n.thumbnail=Object(h.a)(s,"thumbnail",n.thumbnail),n.content=Object(h.a)(s,"content",n.content),n.attributes=Object(g.a)(n.attributes,u.attributes),n}return u()(t,e),t}(f.g),r=d()(i.prototype,"align",[v.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i);_.ctype="anniversarySection",_.schema={ctype:m.a.string.isRequired,id:m.a.string.isRequired,layout:m.a.string.isRequired,align:m.a.string,title:m.a.string.isRequired,link:m.a.string.isRequired,linkedPageTitle:m.a.string.isRequired,sinceDate:m.a.string.isRequired,sinceYear:m.a.number.isRequired,logNo:m.a.number.isRequired,thumbnail:m.a.shape(y.i),content:m.a.string},t.a=_},799:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t}(n(51).c);t.a=o},800:function(e,t,n){"use strict";var i,r,o=n(60),a=n.n(o),s=n(58),c=n.n(s),l=n(0),u=n.n(l),p=n(50),d=n.n(p),h=(n(61),n(16)),g=n(70),f=n(1134),m=n.n(f),y=n(51),v=n(1079),_=n(49),b=(i=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this,t)||this).attributes={cursor:"select",selection:"object",insertion:"append",drop:"object",paste:"append",lineBreak:{enter:"move-to-next-text",shiftEnter:"move-to-next-text"},erasure:"self"},a()(n,"align",r,c()(n));var i=t,o=i.state,s=void 0===o?{}:o,l=i.config,u=void 0===l?{}:l;return n.align=Object(h.a)(s,"align",n.align),n.layout=Object(h.a)(s,"layout","default"),n.title=Object(h.a)(s,"title",null),n.talkCode=Object(h.a)(s,"talkCode",null),n.contents=m.a.sanitize(Object(h.a)(s,"contents",null)),n.attributes=Object(g.a)(n.attributes,u.attributes),n}return u()(t,e),t}(y.g),r=d()(i.prototype,"align",[_.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i);b.ctype="mrBlog",b.schema={ctype:v.a.string.isRequired,id:v.a.string.isRequired,layout:v.a.string.isRequired,align:v.a.string,talkCode:v.a.string.isRequired,title:v.a.string.isRequired,contents:v.a.string.isRequired},t.a=b},801:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t}(n(51).c);t.a=o},804:function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=function(){function e(){this._front=null,this._rear=null,this._size=0}var t=e.prototype;return t.enqueue=function(e){var t=new function(e,t){void 0===t&&(t=null),this.value=e,this.next=t}(e);null===this._rear?(this._front=t,this._rear=t):(this._rear.next=t,this._rear=t),this._size++},t.dequeue=function(){if(this.empty)throw new Error("Queue is empty");var e=this._front;return this._front=this._front.next,null===this._front&&(this._rear=null),this._size--,e.value},t.clear=function(){this._front=null,this._rear=null,this._size=0},t.toArray=function(){for(var e=[],t=this._front;t;)e.push(t.value),t=t.next;return e},r()(e,[{key:"empty",get:function(){return 0===this._size}},{key:"size",get:function(){return this._size}}]),e}();t.a=o},805:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return new Promise(function(t){return setTimeout(t,e)})}},820:function(e,t,n){"use strict";var i=n(56),r=n.n(i),o=n(55),a=n.n(o),s=n(0),c=n.n(s),l=n(50),u=n.n(l),p=n(66),d=n(49),h=n(376),g=n(52),f=n(54),m=n.n(f),y=n(555),v=function(e){var t=e.style,n=e.pointerType,i=e.labelDragToSelect;return d.b.createElement("button",{type:"button",className:"se-spectrum-selector",style:t,"data-type":n,"data-role":"pointer"},d.b.createElement("span",{className:"se-blind"},i))};v.defaultProps={style:{},pointerType:""},v.propTypes={style:d.a.object,pointerType:d.a.string,labelDragToSelect:d.a.string.isRequired};var _,b=Object(h.b)(v),S=function(){function e(e,t,n){if(r(e,t,n)){var i=0,o=0,a=Math.max(e,t,n),s=a-Math.min(e,t,n);return(o=a?s/a:0)&&(e===a?i=60*(t-n)/s:t===a?i=120+60*(n-e)/s:n===a&&(i=240+60*(e-t)/s),i<0&&(i+=360)),function(e,t,n){return{h:e,s:t,v:n}}(i,o*=100,a=a/255*100)}}function t(e,t,n){if(o(e,t,n)){e=e%360/60,t/=100,n/=100;var i=0,r=0,a=0,s=Math.floor(e),c=e-s,l=n*(1-t),u=n*(1-t*c),p=n*(1-t*(1-c));switch(s){case 0:i=n,r=p,a=l;break;case 1:i=u,r=n,a=l;break;case 2:i=l,r=n,a=p;break;case 3:i=l,r=u,a=n;break;case 4:i=p,r=l,a=n;break;case 5:i=n,r=l,a=u}return function(e,t,n){return{r:e,g:t,b:n}}(i*=255,r*=255,a*=255)}}function n(e,t,n){if(r(e,t,n))return 1===(e=Math.round(e).toString(16)).length&&(e="0"+e),1===(t=Math.round(t).toString(16)).length&&(t="0"+t),1===(n=Math.round(n).toString(16)).length&&(n="0"+n),e+t+n}function i(e){if(a(e)){var t=e.match(/#?([0-9a-f]{6}|[0-9a-f]{3})/i);return t=3===t[1].length?t[1].match(/./g).filter(function(e){return e+e}):t[1].match(/../g),{r:Number("0x"+t[0]),g:Number("0x"+t[1]),b:Number("0x"+t[2])}}}function r(e,t,n){return"number"==typeof e&&e>=0&&e<=255&&("number"==typeof t&&t>=0&&t<=255)&&("number"==typeof n&&n>=0&&n<=255)}function o(e,t,n){return"number"==typeof e&&e>=0&&e<=360&&("number"==typeof t&&t>=0&&t<=100)&&("number"==typeof n&&n>=0&&n<=100)}function a(e){return!("string"!=typeof e||!e.match(/#?([0-9a-f]{6}|[0-9a-f]{3})/i))}return{rgb2hsv:e,hsv2rgb:t,rgb2hex:n,hex2rgb:i,hsv2hex:function(e){var i=void 0===e?{}:e,r=i.h,a=i.s,s=i.v;if(o(r,a,s)){var c=t(r,a,s);return n(c.r,c.g,c.b)}},hex2hsv:function(t){if(a(t)){var n=i(t);return e(n.r,n.g,n.b)}}}}(),C=(_=function(e){function t(){var t;return(t=e.call(this)||this).isDragging=!1,t.width=0,t.height=0,t}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._initiateCanvas()},n.render=function(){var e=this.props,t=e.selectedHueColor,n=e.hsvPointer,i=e.labelDragToSelect,r={left:n.x+"px",top:n.y+"px"},o={background:t};return d.b.createElement("div",{className:"se-spectrum se-spectrum-color",style:o,"data-type":"hsv"},d.b.createElement("canvas",{className:"se-spectrum-canvas",width:"151",height:"90",ref:this._ref}),d.b.createElement(b,{style:r,labelDragToSelect:i,pointerType:"hsv"}))},n._ref=function(e){this.hsvWrapper=e},n._initiateCanvas=function(){var e=this.hsvWrapper,t=this.props,n=t.onChangeColor,i=t.hsvColor,r=window.getComputedStyle(e,null),o=r.width,a=r.height,s=parseInt(o)||151,c=parseInt(a)||90;e.setAttribute("width",s),e.setAttribute("height",c);var l=e.getContext("2d");this._fillColorsOnHSV(l,s,c),this.width=s,this.height=c,n(i,s,c,"hsv")},n._fillColorsOnHSV=function(e,t,n){if(this.props.enableHue){var i=e.createLinearGradient(0,0,t,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=i,e.fillRect(0,0,t,n),(i=e.createLinearGradient(0,0,0,n)).addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=i,e.fillRect(0,0,t,n)}else{for(var r=e.createLinearGradient(0,0,0,n),o=0;o<7;o++){var a=S.hsv2rgb(o/6*360,100,100);r.addColorStop(o/6,"rgb("+Object.values(a).join(",")+")")}e.fillStyle=r,e.fillRect(0,0,t,n),(r=e.createLinearGradient(0,0,t,0)).addColorStop(0,"rgba(255,255,255,1)"),r.addColorStop(.5,"rgba(255,255,255,0)"),r.addColorStop(.5,"rgba(0,0,0,0)"),r.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=r,e.fillRect(0,0,t,n)}},t}(d.b.Component),u()(_.prototype,"_ref",[g.autobind],Object.getOwnPropertyDescriptor(_.prototype,"_ref"),_.prototype),_);C.defaultProps={hsvColor:{h:0,s:0,v:0},hsvPointer:{x:0,y:0},selectedHueColor:"#ff0000",onChangeColor:function(){},enableHue:!0},C.propTypes={hsvColor:d.a.object,hsvPointer:d.a.object,selectedHueColor:d.a.string,onChangeColor:d.a.func,enableHue:d.a.bool,labelDragToSelect:d.a.string.isRequired};var I,O=Object(h.b)(C),T=(I=function(e){function t(){var t;return(t=e.call(this)||this).isDragging=!1,t.width=0,t.height=0,t}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._initiateHueArea()},n.render=function(){var e=this.props,t=e.huePointer,n=e.enableHue,i=e.labelDragToSelect,r={};return"number"==typeof t.y?r.top=t.y+"px":"number"==typeof t.x&&(r.left=t.x+"px"),n?d.b.createElement("div",{className:"se-spectrum se-spectrum-hue","data-type":"hue",ref:this._ref},d.b.createElement(b,{style:r,labelDragToSelect:i,pointerType:"hue"})):null},n._ref=function(e){this.hueWrapper=e},n._initiateHueArea=function(){var e=this.props,t=e.onChangeColor,n=e.hsvColor;if(e.enableHue&&(!this.width||!this.height)){var i=this.hueWrapper,r=window.getComputedStyle(i,null),o=r.width,a=r.height,s=parseInt(o)||0,c=parseInt(a)||0;i.setAttribute("width",s),i.setAttribute("height",c),this.width=s,this.height=c,t({h:n.h},s,c,"hue")}},t}(d.b.Component),u()(I.prototype,"_ref",[g.autobind],Object.getOwnPropertyDescriptor(I.prototype,"_ref"),I.prototype),I);T.defaultProps={hsvColor:{h:0,s:0,v:0},huePointer:{x:0,y:0},enableHue:!0,useVertical:!0,onChangeColor:function(){}},T.propTypes={hsvColor:d.a.object,huePointer:d.a.object,enableHue:d.a.bool,useVertical:d.a.bool,onChangeColor:d.a.func,labelDragToSelect:d.a.string.isRequired};var L=Object(h.b)(T),E=function(e){var t=e.selectedColor,n=e.customColor,i=e.onChangeCustomColor;return d.b.createElement("div",{className:"se-selected-color"},d.b.createElement("div",{className:"se-selected-color-palette",style:{backgroundColor:t}}),d.b.createElement("input",{type:"text",className:"se-selected-color-hex",value:n,onChange:i}))};E.defaultProps={selectedColor:"",customColor:"",onChangeCustomColor:function(){}},E.propTypes={selectedColor:d.a.string,customColor:d.a.string,onChangeCustomColor:d.a.func};var P,w=Object(h.b)(E),k=(P=function(e){function t(){var t;return(t=e.call(this)||this)._handleClickColor=function(e){var n=t.state.customColor;t.props.onClickColor(e,n)},t._startPos=null,t._startOffsetPos=null,t.dragType=null,t.state={customColor:""},t}c()(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){this.setState(function(){return{customColor:e.selectedColor||""}})},n.render=function(){var e=this.props,t=e.foldDetailPicker,n=e.selectedColor,i=e.labelConfirm,r=this.state.customColor,o=m()(["se-color-picker",{"se-is-activated":!t}]),a=this._renderHueArea(),s=this._renderHSVArea();return d.b.createElement("div",{className:o,onMouseDown:this._handleMouseDown,onMouseMove:this._handleMouseMove,onMouseLeave:this._handleMouseUp,onMouseUp:this._handleMouseUp},s,a,d.b.createElement("div",{className:"se-color-picker-value"},d.b.createElement(w,{onChangeCustomColor:this._handleChangeCustomColor,customColor:r,selectedColor:n}),d.b.createElement("button",{type:"button",className:"se-color-picker-apply-button",onClick:this._handleClickColor},d.b.createElement("span",{className:"se-color-picker-apply-label"},i))))},n._renderHSVArea=function(){var e=this.props,t=e.foldDetailPicker,n=e.hsvPointer,i=e.selectedHSV,r=e.enableHue,o=e.labelDragToSelect;if(t)return null;var a="#"+S.hsv2hex({h:i.h,s:100,v:100});return d.b.createElement(O,{onChangeColor:this._handleChangeColor,hsvPointer:n,selectedHueColor:a,hsvColor:i,enableHue:r,labelDragToSelect:o})},n._renderHueArea=function(){var e=this.props,t=e.foldDetailPicker,n=e.huePointer,i=e.useHueVertical,r=e.enableHue,o=e.selectedHSV,a=e.labelDragToSelect;return t?null:d.b.createElement(L,{onChangeColor:this._handleChangeColor,huePointer:n,hsvColor:o,useHueVertical:i,enableHue:r,labelDragToSelect:a})},n._handleMouseDown=function(e){this.dragType=e.target.dataset.type,this._setStartPosition(e)},n._handleMouseUp=function(e){this._changeColorUsingPointerPosition(e),this.dragType=null},n._handleMouseMove=function(e){this._changeColorUsingPointerPosition(e)},n._handleChangeCustomColor=function(e){var t=e.currentTarget.value;t.length<=7&&this.setState(function(){return{customColor:t}}),-1===t.indexOf("#")&&(t="#"+t),7===t.length&&this.props.onChangeColorUsingHex(e,t)},n._handleChangeColor=function(e,t,n,i){this.props.onChangeColorUsingHSV(e,t,n,i)},n._getPagePos=function(e){return"pageX"in e?[e.pageX,e.pageY]:"pageX"in(e=e.nativeEvent||{})?[e.pageX,e.pageY]:[0,0]},n._getOffsetPos=function(e){return"offsetX"in e?[e.offsetX,e.offsetY]:"layerX"in e?[e.layerX,e.layerY]:"offsetX"in(e=e.nativeEvent||{})?[e.offsetX,e.offsetY]:"layerX"in e?[e.layerX,e.layerY]:[0,0]},n._setStartPosition=function(e){this.dragType&&(this._startPos=this._getPagePos(e),this._startOffsetPos=this._getOffsetPos(e),"pointer"===e.target.dataset.role&&(this._startOffsetPos[0]+=e.target.offsetLeft,this._startOffsetPos[1]+=e.target.offsetTop))},n._getHueFromPosition=function(e){var t,n,i=this.props,r=i.useHueVertical,o=i.canvasSize,a=this._startOffsetPos[0]+(e[0]-this._startPos[0]),s=this._startOffsetPos[1]+(e[1]-this._startPos[1]);return r?(t=s,n=o.hue.height):(t=a,n=o.hue.width),{h:Math.min(Math.max(t,0),n)/n*360}},n._getHSVFromPosition=function(e){var t=this.props,n=t.canvasSize,i=t.enableHue,r=this._startOffsetPos[0]+(e[0]-this._startPos[0]),o=this._startOffsetPos[1]+(e[1]-this._startPos[1]),a=n.hsv.width,s=n.hsv.height;if(r=Math.max(Math.min(r,a),0),o=Math.max(Math.min(o,s),0),!i){var c={h:o/s*360},l=a/2;return r<l?(c.s=r/l*100,c.v=100):(c.s=100,c.v=(a-r)/l*100),c}return{s:Math.max(r/a*100,0),v:Math.max((s-o)/s*100,0)}},n._changeColorUsingPointerPosition=function(e){var t=this._getPagePos(e),n=this.props,i=n.canvasSize,r=n.onChangeColorUsingHSV;this.dragType&&(i[this.dragType]&&r("hsv"===this.dragType?this._getHSVFromPosition(t):this._getHueFromPosition(t),i[this.dragType].width,i[this.dragType].height))},t}(d.b.Component),u()(P.prototype,"_handleMouseDown",[g.autobind],Object.getOwnPropertyDescriptor(P.prototype,"_handleMouseDown"),P.prototype),u()(P.prototype,"_handleMouseUp",[g.autobind],Object.getOwnPropertyDescriptor(P.prototype,"_handleMouseUp"),P.prototype),u()(P.prototype,"_handleMouseMove",[g.autobind],Object.getOwnPropertyDescriptor(P.prototype,"_handleMouseMove"),P.prototype),u()(P.prototype,"_handleChangeCustomColor",[g.autobind],Object.getOwnPropertyDescriptor(P.prototype,"_handleChangeCustomColor"),P.prototype),u()(P.prototype,"_handleChangeColor",[g.autobind],Object.getOwnPropertyDescriptor(P.prototype,"_handleChangeColor"),P.prototype),P);k.defaultProps={canvasSize:null,hsvPointer:null,huePointer:null,useHueVertical:!1,enableHue:!1,selectedHSV:{h:0,s:0,v:0},onChangeColorUsingHSV:function(){},onChangeColorUsingHex:function(){},foldDetailPicker:!1},k.propTypes={canvasSize:d.a.object,hsvPointer:d.a.object,huePointer:d.a.object,useHueVertical:d.a.bool,enableHue:d.a.bool,foldDetailPicker:d.a.bool,selectedHSV:d.a.object,selectedColor:d.a.string,customColor:d.a.string,onChangeColorUsingHSV:d.a.func,onChangeColorUsingHex:d.a.func,onClickColor:d.a.func,labelConfirm:d.a.string.isRequired,labelDragToSelect:d.a.string.isRequired};var x=Object(h.b)(k),D=function(e){var t=e.colors,n=e.onClickColor,i=e.selectedColor,r=e.labelResetColor;return d.b.createElement("ul",{className:"se-color-swatches-list",onClick:n},t.map(function(e,t){var n=m()({"se-color-palette":!0},{"se-color-palette-no-color":-1===e.indexOf("#")},{"se-is-selected":e===i}),o=-1===e.indexOf("#")?r:e;return d.b.createElement("li",{className:"se-color-swatches-item",key:e+"_"+t},d.b.createElement("button",{type:"button",className:n,"data-color":-1===e.indexOf("#")?"":e,style:{backgroundColor:e},title:o},d.b.createElement("span",{className:"se-blind"},o)))}))};D.defaultProps={colors:[],selectedColor:"",onClickColor:function(){},labelResetColor:""},D.propTypes={colors:d.a.oneOfType([d.a.array,d.a.object]),selectedColor:d.a.string,onClickColor:d.a.func,labelResetColor:d.a.string};var A=Object(h.b)(D),j=function(e){var t=e.presetColor,n=e.currentSelectedColor,i=e.labelSetNewColor,r=e.labelResetColor,o=e.onClickColor;return d.b.createElement("div",{className:"se-color-swatches se-color-swatches-preset"},d.b.createElement("strong",{className:"se-blind"},i),d.b.createElement(A,{colors:t,selectedColor:n,onClickColor:o,labelResetColor:r}))};j.defaultProps={presetColor:[],currentSelectedColor:"",labelResetColor:""},j.propTypes={presetColor:d.a.array,currentSelectedColor:d.a.string,onClickColor:d.a.func,labelSetNewColor:d.a.string.isRequired,labelResetColor:d.a.string};var R=Object(h.b)(j),N=function(e){var t=e.recentColors,n=e.onClickColor,i=e.labelRecentlyUsed,r=e.currentSelectedColor,o=e.labelResetColor;return d.b.createElement("div",{className:"se-color-swatches se-color-swatches-used"},d.b.createElement("strong",{className:"se-color-swathces-label"},i),d.b.createElement(A,{colors:t,selectedColor:r,onClickColor:n,labelResetColor:o}))};N.defaultProps={recentColors:[],currentSelectedColor:""},N.propTypes={recentColors:d.a.oneOfType([d.a.array,d.a.object]),currentSelectedColor:d.a.string,onClickColor:d.a.func,labelRecentlyUsed:d.a.string.isRequired,labelResetColor:d.a.string};var M,B=Object(h.b)(N),W=n(296),U=(M=function(e){function t(t){var n;(n=e.call(this,t)||this).canvasSize={},n.state=n._mapStateFromProps(t),n._refLayer=d.b.createRef();var i=n.props,r=i.i18n,o=i.label;return n._messages={confirm:r("colorPickerButton:confirm"),dragToSelect:r("colorPickerButton:drag_to_select"),setNewColor:r("colorPickerButton:set_new_color"),recentlyUsedLabel:r("colorPickerButton:recently_used_label",{label:o}),more:r("colorPickerButton:more"),fold:r("colorPickerButton:fold"),resetColor:r("colorPickerButton:reset_color")},n}c()(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var t=this;this.setState(function(){return t._mapStateFromProps(e)})},n.render=function(){var e=this.props,t=e.presetColor,n=e.color,i=this._messages,r=this._renderRecentColors(),o=this._renderDetailColors(),a=m()("se-color-picker-option",this.props.className);return d.b.createElement(W.a,{forwardRef:this._refLayer,className:a},r,d.b.createElement(R,{presetColor:t,currentSelectedColor:n,onClickColor:this._handleClickColor,labelResetColor:i.resetColor,labelSetNewColor:i.setNewColor}),o)},n._renderRecentColors=function(){var e=this.props,t=e.recentColors,n=e.color,i=this._messages;return Object(p.a)(t)?null:d.b.createElement(B,{recentColors:t,currentSelectedColor:n,onClickColor:this._handleClickColor,labelResetColor:i.resetColor,labelRecentlyUsed:i.recentlyUsedLabel})},n._renderDetailColors=function(){var e=this.props,t=e.enableHue,n=e.useHueVertical;if(!e.useDetail)return null;var i=this._messages,r=this.state.foldDetailPicker?i.more:i.fold;return d.b.createElement(d.b.Fragment,null,d.b.createElement(x,a()({},this.state,{canvasSize:this.canvasSize,useHueVertical:n,enableHue:t,onChangeColorUsingHSV:this._handleChangeColorUsingHSV,onChangeColorUsingHex:this._handleChangeColorUsingHex,onClickColor:this._handleClickColor,labelConfirm:i.confirm,labelDragToSelect:i.dragToSelect})),d.b.createElement("div",{className:"se-color-picker-more-button",onClick:this._handleClickToggleDetail,"data-role":"toggle","aria-hidden":"true",tabIndex:"-1"},d.b.createElement("span",{className:"se-color-picker-more-label"},r)))},n._handleClickColor=function(e,t){var n=/^#([a-f\d]{3}|[a-f\d]{6})$/i.test(t)?"#"+y.a.hex2six(t):"#"+S.hsv2hex(this.state.selectedHSV),i=e.target.dataset.color,r={event:e,value:void 0!==i?i:n};this.props.onChangeColor(r)},n._handleChangeColorUsingHSV=function(e,t,n,i){var o=e.h;e&&(this._updateHuePointer(o,t,n),this._updateHSVPointer(e,t,n),this.setState(function(t){var n=r()({},t.selectedHSV,e);return{selectedHSV:n,selectedColor:"#"+S.hsv2hex(n)}}),i&&this._setCanvasSize(i,t,n))},n._resetColor=function(){this.setState(function(e){return{selectedHSV:e.selectedHSV,selectedColor:e.selectedColor}})},n._validateHex=function(e){return void 0===e&&(e=""),/^#[a-f\d]{6}$/i.test(e)},n._handleChangeColorUsingHex=function(e,t){var n=t||e.currentTarget.value;if(this._validateHex(n)){var i=S.hex2hsv(n);i?(this._updateHuePointer(i.h,this.canvasSize.hue.width,this.canvasSize.hue.height),this._updateHSVPointer(i,this.canvasSize.hsv.width,this.canvasSize.hsv.height),this.setState(function(){return{selectedHSV:i,selectedColor:n}})):this._resetColor()}else this._resetColor()},n._handleClickToggleDetail=function(){this.setState(function(e){return{foldDetailPicker:!e.foldDetailPicker}})},n._updateHSVPointer=function(e,t,n){var i={};if("number"==typeof e.s&&"number"==typeof e.v){if(this.props.enableHue)i.x=e.s/100*t-4,i.y=(100-e.v)/100*n-4;else{var r=t/2;i.x=e.v>e.s?e.s/100*r:(100-e.v)/100*r+r,i.y=e.h/360*n}return this.setState(function(){return{hsvPointer:i}}),i}},n._updateHuePointer=function(e,t,n){var i=this.props,r=i.enableHue,o=i.useHueVertical,a=o?n:t,s={};if(r){var c=e/360*a-5;s[o?"y":"x"]=Math.min(Math.max(c,0),Math.max(a,0)),this.setState(function(){return{huePointer:s}})}},n._setCanvasSize=function(e,t,n){this.canvasSize[e]={width:t,height:n}},n._mapStateFromProps=function(e){var t=e.color;return{foldDetailPicker:!0,selectedColor:t,selectedHSV:S.hex2hsv(t),hsvPointer:{x:0,y:0},huePointer:{x:null,y:null}}},t}(d.b.Component),u()(M.prototype,"_handleClickColor",[g.autobind],Object.getOwnPropertyDescriptor(M.prototype,"_handleClickColor"),M.prototype),u()(M.prototype,"_handleChangeColorUsingHSV",[g.autobind],Object.getOwnPropertyDescriptor(M.prototype,"_handleChangeColorUsingHSV"),M.prototype),u()(M.prototype,"_handleChangeColorUsingHex",[g.autobind],Object.getOwnPropertyDescriptor(M.prototype,"_handleChangeColorUsingHex"),M.prototype),u()(M.prototype,"_handleClickToggleDetail",[g.autobind],Object.getOwnPropertyDescriptor(M.prototype,"_handleClickToggleDetail"),M.prototype),M);U.defaultProps={presetColor:["","#999999","#ffcdc0","#ffe3c8","#fff8b2","#e3fdc8","#c2f4db","#bdfbfa","#b0f1ff","#9bdfff","#fdd5f5","#ffb7de","#ffffff","#777777","#ffad98","#ffd1a4","#fff593","#badf98","#3fcc9c","#15d0ca","#28e1ff","#5bc7ff","#cd8bc0","#ff97c1","#f7f7f7","#555555","#ff5f45","#ffa94f","#ffef34","#98d36c","#00b976","#00bfb5","#00cdff","#0095e9","#bc61ab","#ff65a8","#e2e2e2","#333333","#ff0010","#ff9300","#ffd300","#54b800","#00a84b","#009d91","#00b3f2","#0078cb","#aa1f91","#ff008c","#c2c2c2","#141414","#ba0000","#b85c00","#ac9a00","#36851e","#007433","#00756a","#007aa6","#004e82","#740060","#bb005c","#9c9c9c","#000000","#700001","#823f00","#6a5f00","#245b12","#004e22","#00554c","#004e6a","#003960","#4f0041","#830041"],color:"",useHueVertical:!0,enableHue:!0,label:"",useDetail:!0},U.propTypes={presetColor:d.a.array,recentColors:d.a.oneOfType([d.a.array,d.a.object]),color:d.a.string,useHueVertical:d.a.bool,enableHue:d.a.bool,onChangeColor:d.a.func,label:d.a.string,className:d.a.string,i18n:d.a.func.isRequired,useDetail:d.a.bool};t.a=Object(h.b)(U)},822:function(e,t,n){"use strict";var i,r,o=n(51),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(52),p=n(49),d=n(376),h=n(54),g=n.n(h),f=n(86),m=n(87),y=n(169),v=n(448),_=(i=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=o.W.get("configAgent"),t._libraryPanelLayoutService=o.W.get("libraryPanelLayoutService")||{updateMediaList:function(){}},t._toastLayerService=o.W.get("toastLayerService"),t._eventDispatcherService=o.W.get("eventDispatcherService"),t._i18n=o.W.get("i18n"),t._contentTextMaxLength=t._configAgent.get("productConfig.contentTextMaxLength"),t}s()(t,e);var n=t.prototype;return n.setRepresentativeImage=function(e){var t=e.compId,n=e.unitId,i=e.paraId,r=e.nodeId;o.W.get("representativeImageService").setRepresentativeImage({compId:t,unitId:n,paraId:i,nodeId:r}),this._libraryPanelLayoutService.updateMediaList()},n.showOverContentLengthLimitWarn=function(){this._eventDispatcherService.emit(o.z.ON_MAX_CONTENT_TEXT_LENGTH),this._toastLayerService.warningMessage(this._i18n("textUnit:warning_limit_over_max_text_length",{maxLength:this._contentTextMaxLength}))},t}(Object(o.Y)(o.c)),l()(i.prototype,"setRepresentativeImage",[u.history,p.d],Object.getOwnPropertyDescriptor(i.prototype,"setRepresentativeImage"),i.prototype),i),b={useToolbarSlot:!1},S=(r=function(e){function t(){return e.apply(this,arguments)||this}s()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=e.useCase,r=t.id,o=t.ctype,a=t.value,s=t.layout,c=t.isFocused,l=this._getAdditionalOption(a),u=this._resolveSectionClassName({ctype:o,layout:s,isFocused:c});return p.b.createElement(f.a,{id:r,ctype:o,i18n:n},p.b.createElement(m.a,{compId:r,compStore:t},p.b.createElement("div",{className:u},p.b.createElement(y.a,{compId:r,useCase:i,text:a,additionalOption:l,options:b,onLimitTextLength:this._handleContentLengthLimit,onClickRepresentative:this._handleClickRepresentative}))))},n._getAdditionalOption=function(e){var t=this.props,n=t.i18n;return{placeholder:t.shouldPlaceholderShown&&e.unchangedFirstNodeStyle?n("textComponent:placeholder"):null,uploadProgressTitle:n("textComponent:upload_process_title"),representativeTitle:n("textComponent:representative"),notFoundImageTitle:n("textComponent:image_404")}},n._resolveSectionClassName=function(e){var t,n=e.ctype,i=e.layout,r=e.isFocused;return g()(((t={})["se-section se-section-"+n]=!!n,t["se-l-"+(i||"default")]=!0,t["se-is-focused"]=r,t))},n._handleClickRepresentative=function(e){var t=e.compId,n=e.unitId,i=e.paraId,r=e.nodeId;this.props.useCase.setRepresentativeImage({compId:t,unitId:n,paraId:i,nodeId:r})},n._handleContentLengthLimit=function(){this.props.useCase.showOverContentLengthLimitWarn()},t}(p.b.Component),l()(r.prototype,"_handleClickRepresentative",[u.autobind],Object.getOwnPropertyDescriptor(r.prototype,"_handleClickRepresentative"),r.prototype),l()(r.prototype,"_handleContentLengthLimit",[u.autobind],Object.getOwnPropertyDescriptor(r.prototype,"_handleContentLengthLimit"),r.prototype),r);S.defaultProps={i18n:function(e){return e},shouldPlaceholderShown:!1},S.propTypes={shouldForceRefresh:p.a.bool,i18n:p.a.func,useCase:p.a.instanceOf(_).isRequired,store:p.a.instanceOf(v.a).isRequired,shouldPlaceholderShown:p.a.bool};var C=Object(d.b)(S),I=function(e){function t(){return e.apply(this,arguments)||this}return s()(t,e),t}(o.a),O=n(64),T={propertyToolbar:{"text-format":Object(O.a)("text-format"),"font-family":Object(O.a)("font-family"),"font-size":Object(O.a)("font-size"),bold:Object(O.a)("bold"),italic:Object(O.a)("italic"),underline:Object(O.a)("underline"),strikethrough:Object(O.a)("strikethrough"),"font-color":Object(O.a)("font-color"),"background-color":Object(O.a)("background-color"),"align-drop-down-with-justify":Object(O.a)("align-drop-down-with-justify"),list:Object(O.a)("list"),"line-height":Object(O.a)("line-height"),"drop-cap":Object(O.a)("drop-cap"),superscript:Object(O.a)("superscript"),subscript:Object(O.a)("subscript"),"special-letter":Object(O.a)("special-letter"),"text-link":Object(O.a)("text-link"),speller:Object(O.a)("speller"),"separator-bar":Object(O.a)("separator-bar"),"translation-right-label":Object(O.a)("translation-right-label")},contentsToolbar:{"font-family":Object(O.a)("font-family"),"font-size":Object(O.a)("font-size"),bold:Object(O.a)("bold"),italic:Object(O.a)("italic"),"text-link":Object(O.a)("text-link"),"font-color":Object(O.a)("font-color"),"to-quotation":Object(O.a)("to-quotation"),"cycle-align":Object(O.a)("cycle-align-with-justify"),"cycle-align-without-justify":Object(O.a)("cycle-align"),list:Object(O.a)("list"),"separator-bar":Object(O.a)("separator-bar"),translation:Object(O.a)("translation"),"ai-write":Object(O.a)("ai-write")}},L=n(449),E=n(96),P=n(231);function w(e,t){var n=function(e){return Object(L.a)(e.map(function(e){return(e.value||e.text.value).paragraphs.map(function(e){return{id:e.id,list:e.isListParagraph()}})}))}(e),i=function(e,t){var n=Object(E.a)(e,function(e){return e.id===t.start.paraId}),i=Object(E.a)(e,function(e){return e.id===t.end.paraId});return n<i?{lowIndex:n,highIndex:i}:{lowIndex:i,highIndex:n}}(n,t),r=i.lowIndex,o=i.highIndex,a=r===o,s=!1;if(!(r<0||o<0)){for(var c=r;c<=o;c++)!0===n[c].list&&(s=!0);return s&&a||!s}}var k={propertyToolbar:function(e){var t=e.selectedComponents,n=e.selectionInfoStore,i=["text-format","font-family","font-size","separator-bar","bold","italic","underline","strikethrough","font-color","background-color","separator-bar","align-drop-down-with-justify","line-height","list","separator-bar"],r=t.filter(function(e){return"text"===e.ctype}),o=t.filter(function(e){return"wrappingParagraph"===e.ctype}),a=r.every(function(e){return e.isAvailableForDropcap(n)}),s=r.concat(o),c=s.length===t.length,l=o.every(function(e){return e.checkNoWrappedCompSelected(n)});(a&&i.push("drop-cap"),i.push("superscript","subscript","special-letter","text-link"),c&&l)&&(s.every(function(e){var t=e.translationEnabled,i=w(s,n);return t&&i})&&i.push("separator-bar","translation-right-label"));return i.push("separator-bar","speller"),i},contentsToolbar:function(e){var t=e.selectedComponents,n=e.selectionInfoStore,i=e.defaultButtonSet,r=e.configAgent,o=t.filter(function(e){return"text"===e.ctype}),a=t.filter(function(e){return"wrappingParagraph"===e.ctype}),s=o.concat(a),c=s.length===t.length;if(!1===c)return[];if(i)return i;var l=s.every(function(e){var t=e.translationEnabled,i=a.every(function(e){return e.checkNoWrappedCompSelected(n)}),r=w(s,n);return t&&c&&i&&r}),u=["font-family","separator-bar","font-size","separator-bar","bold","italic","separator-bar","font-color","separator-bar","to-quotation","separator-bar","cycle-align","list"];return r.get("productConfig.aiAssistant")&&!P.a.IS_IE&&u.unshift("ai-write","separator-bar"),l&&u.push("separator-bar","translation"),u}},x=function(e){function t(){return e.call(this,{buttonSetMap:T,buttonResolver:k})||this}return s()(t,e),t}(o.l),D=o.q.extend({name:"TextComponent",view:C,useCase:_,service:I,store:v.a,toolbar:x});t.a=D},823:function(e,t,n){"use strict";var i,r=n(51),o=n(55),a=n.n(o),s=n(0),c=n.n(s),l=n(50),u=n.n(l),p=n(49),d=n(376),h=n(86),g=n(87),f=n(52),m=n(486),y=n(217),v=function(e){function t(){var t;return(t=e.call(this)||this)._configAgent=r.W.get("configAgent"),t._toastLayerService=r.W.get("toastLayerService"),t._eventDispatcherService=r.W.get("eventDispatcherService"),t._i18n=r.W.get("i18n"),t._contentTextMaxLength=t._configAgent.get("productConfig.contentTextMaxLength"),t}return c()(t,e),t.prototype.showOverContentLengthLimitWarn=function(){this._eventDispatcherService.emit(r.z.ON_MAX_CONTENT_TEXT_LENGTH),this._toastLayerService.warningMessage(this._i18n("textUnit:warning_limit_over_max_text_length",{maxLength:this._contentTextMaxLength}))},t}(r.c),_=n(215),b=(i=function(e){function t(){return e.apply(this,arguments)||this}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.shouldForceRefresh&&this.props.useCase.refreshAfterLazy()},n.render=function(){var e=this.props,t=e.store,n=e.i18n,i=t.id,r=t.ctype,o=t.layout;return p.b.createElement(h.a,{id:i,ctype:r,layout:o,i18n:n},Object(_.a)({}),p.b.createElement(g.a,{compId:i,compStore:t},p.b.createElement(m.a,a()({},this.props,{onLimitTextLength:this._handleContentLengthLimit,onMoveToPrev:this._handleMoveToPrev,onMoveToNext:this._handleMoveToNext}))))},n._handleMoveToPrev=function(){this.props.useCase.moveToPrev(this.props.store.id)},n._handleMoveToNext=function(){this.props.useCase.moveToNext(this.props.store.id)},n._handleContentLengthLimit=function(){this.props.useCase.showOverContentLengthLimitWarn()},t}(p.b.Component),u()(i.prototype,"_handleMoveToPrev",[f.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleMoveToPrev"),i.prototype),u()(i.prototype,"_handleMoveToNext",[f.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleMoveToNext"),i.prototype),u()(i.prototype,"_handleContentLengthLimit",[f.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleContentLengthLimit"),i.prototype),i);b.defaultProps={i18n:function(e){return e}},b.propTypes={shouldForceRefresh:p.a.bool,i18n:p.a.func,store:p.a.instanceOf(y.a).isRequired,useCase:p.a.instanceOf(v).isRequired};var S=Object(d.b)(b),C=function(e){function t(){var t;return(t=e.call(this)||this)._componentFactory=r.W.get("componentFactory"),t}return c()(t,e),t.prototype.createWithLayout=function(e){var t={ctype:"quotation",layout:e};return this._componentFactory.createComponentWithCompData(t)},t}(r.a),I=n(64),O={propertyToolbar:{"text-format":Object(I.a)("text-format"),"font-size":Object(I.a)("font-size"),bold:Object(I.a)("bold"),italic:Object(I.a)("italic"),underline:Object(I.a)("underline"),"font-color":Object(I.a)("font-color"),"quotation-layout":Object(I.a)("quotation-layout"),"content-mode-justify":Object(I.a)("content-mode-justify"),"wrapping-layout":Object(I.a)("wrapping-layout-drop-down"),"line-height":Object(I.a)("line-height"),"special-letter":Object(I.a)("special-letter"),speller:Object(I.a)("speller"),"translation-right-label":Object(I.a)("translation-right-label"),"separator-bar":Object(I.a)("separator-bar")},contextToolbar:{"font-size":Object(I.a)("font-size"),"quotation-layout":Object(I.a)("quotation-layout"),"quotation-layout-label":Object(I.a)("quotation-layout-label"),"to-text":Object(I.a)("to-text"),delete:Object(I.a)("delete"),translation:Object(I.a)("translation"),"separator-bar":Object(I.a)("separator-bar")}},T={propertyToolbar:function(e){var t=e.configAgent,n=e.selectedComponents,i=e.selectionInfoStore,r=t.get("productConfig.quotation.layouts"),o=["text-format","font-size","separator-bar","bold","italic","underline","font-color"];(!(r&&1===r.length)&&o.push("separator-bar","quotation-layout"),o.push("separator-bar","content-mode-justify","wrapping-layout","separator-bar","line-height","special-letter"),"cursor"===i.mode||"block"===i.mode)&&(n.every(function(e){return e.translationEnabled})&&o.push("separator-bar","translation-right-label"));return o.push("separator-bar","speller"),o},contextToolbar:Object(I.b)(function(e){return{buttons:1===(e.configAgent.get("productConfig.quotation.layouts")||[]).length?["to-text","separator-bar","delete"]:["quotation-layout","separator-bar","to-text","separator-bar","delete"]}})},L=function(e){function t(){return e.call(this,{buttonSetMap:O,buttonResolver:T})||this}return c()(t,e),t}(r.l),E=r.q.extend({name:"QuotationComponent",view:S,useCase:v,service:C,store:y.a,toolbar:L});t.a=E},825:function(e,t,n){"use strict";var i=n(56),r=n.n(i),o=n(55),a=n.n(o),s=n(0),c=n.n(s),l=n(50),u=n.n(l),p=n(54),d=n.n(p),h=n(51),g=n(49),f=n(376),m=n(52),y=n(66),v=n(87),_=n(76),b=n(216),S=n(85),C=function(e){return g.b.createElement("div",{className:"se-image-status-404"},g.b.createElement("div",{className:"se-image-status-404-detail"},g.b.createElement("p",{className:"se-image-status-404-text"},e)))},I=n(786),O=function(e){var t=e.label,n=e.enabled,i=e.onClick;return n?g.b.createElement("button",{type:"button",className:"se-image-delete-button",onClick:i},g.b.createElement("span",{className:"se-blind"},t)):null};O.propTypes={label:g.a.string,enabled:g.a.bool,onClick:g.a.func};var T=O,L=n(787),E=function(e){var t=e.label;return e.enabled?g.b.createElement("span",{className:"se-image-link-icon"},g.b.createElement("span",{className:"se-blind"},t)):null};E.propTypes={label:g.a.string,enabled:g.a.bool};var P=E;function w(){}var k=function(e){var t=e.id,n=e.isVR360Format,i=e.enabled,r=e.label,o=e.onClick,a="vr360-toggle-"+t;return i?g.b.createElement("div",{className:"se-360vr-toggle-container"},g.b.createElement("div",{className:"se-360vr-toggle",onClick:o},g.b.createElement("input",{type:"checkbox",id:a,checked:n,onChange:w,className:"se-360vr-toggle-checkbox"}),g.b.createElement("label",{htmlFor:a,className:"se-360vr-toggle-label"},g.b.createElement("span",{className:"se-blind"},r)))):null};k.propTypes={id:g.a.string,isVR360Format:g.a.bool,enabled:g.a.bool,label:g.a.string,onClick:g.a.func};var x,D=k,A=n(71),j=n(1312),R=j.a.TOP_CENTER,N=j.a.TOP_LEFT,M=j.a.TOP_RIGHT,B=j.a.BOTTOM_CENTER,W=j.a.BOTTOM_LEFT,U=j.a.BOTTOM_RIGHT,F=(x=function(e){function t(){return e.apply(this,arguments)||this}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._refineLayerPosition()},n.componentDidUpdate=function(){this._refineLayerPosition()},n.render=function(){var e=this.props.mediaTags;if(Object(y.a)(e))return null;var t=this._resolveImageTags(e);return g.b.createElement("div",{ref:this._tagWrapperRef,className:"se-image-tag-area"},t)},n._tagWrapperRef=function(e){this._tagWrapper=e},n._resolveImageTags=function(e){var t=this,n=this.props.onDoubleClick;return e.map(function(e,i){var o=r()({},{top:e.point.y+"%"},{left:e.point.x+"%"}),a=d()(["se-image-tag","se-image-tag-custom"]),s=t._resolveImageTagLinks(e.links);return g.b.createElement("div",{key:"tag-"+i,"data-top":""+e.point.y,"data-left":""+e.point.x,className:a,style:o,onDoubleClick:n},g.b.createElement("div",{className:"se-image-tag-layer"},g.b.createElement("div",{className:"se-image-tag-layer-dim"}),s))})},n._resolveImageTagLinks=function(e){var t=(0,this.props.i18n)("materialComponent:not_registerd");return e.map(function(e,n){var i=d()({"se-image-tag-detail":!0,"se-image-tag-simple-detail":"none"===e.iconType}),r=d()(["se-image-tag-detail-icon","se-image-tag-detail-icon-"+e.iconType]);return g.b.createElement("div",{key:"link-"+n,className:i},g.b.createElement("span",{className:r}),g.b.createElement("strong",{className:"se-image-tag-detail-title"},""+(e.title||t)),e.description&&g.b.createElement("p",{className:"se-image-tag-detail-descripion"},""+(e.description||t)))})},n._refineLayerPosition=function(){var e=this.props,t=e.mediaTags,n=e.imageWidth,i=e.imageHeight,r=e.imageAlignRight;Object(y.a)(t)||this._changeTagLayerArrowStyle(n,i,r)},n._changeTagLayerArrowStyle=function(e,t,n){var i=this._tagWrapper.querySelectorAll(".se-image-tag");Object(A.a)(i,function(i){var r=i.querySelector(".se-image-tag-layer"),o=r.offsetWidth,a=r.offsetHeight,s=o/e*100,c=a/t*100,l=Number(i.dataset.top)||0,u=Number(i.dataset.left)||0,p="top",d="center";c+l>100&&(p="bottom"),u-s/2<0&&!(n&&e<o)?d="left":s/2+u>100&&(d="right"),i.classList.remove("se-image-tag-pin-position-"+R),i.classList.remove("se-image-tag-pin-position-"+N),i.classList.remove("se-image-tag-pin-position-"+M),i.classList.remove("se-image-tag-pin-position-"+B),i.classList.remove("se-image-tag-pin-position-"+W),i.classList.remove("se-image-tag-pin-position-"+U),i.classList.add("se-image-tag-pin-position-"+p+"-"+d)})},t}(g.b.Component),u()(x.prototype,"_tagWrapperRef",[m.autobind],Object.getOwnPropertyDescriptor(x.prototype,"_tagWrapperRef"),x.prototype),x);F.propTypes={i18n:g.a.func,mediaTags:g.a.oneOfType([g.a.object,g.a.array]),imageWidth:g.a.number,imageHeight:g.a.number,imageAlignRight:g.a.bool,onDoubleClick:g.a.func};var z,V,G,H,q=F,J=n(60),K=n.n(J),X=n(1),Y=n.n(X),Q=n(58),Z=n.n(Q),$=(n(61),n(719)),ee=n(132),te=n(24),ne=[{className:"se-resizer-top-left",index:0},{className:"se-resizer-bottom-left",index:1},{className:"se-resizer-top-right",index:2},{className:"se-resizer-bottom-right",index:3}],ie=2,re={0:"se-top-left-clicked",1:"se-bottom-left-clicked",2:"se-top-right-clicked",3:"se-bottom-right-clicked"},oe=(z=function(e){function t(t){var n;n=e.call(this,t)||this,K()(n,"_index",V,Z()(n)),K()(n,"_width",G,Z()(n)),K()(n,"_height",H,Z()(n)),n._prevX=0,n._renderResizer=function(e,t){var i=e.index,r=e.style,o=e.className;return g.b.createElement("div",{key:t,className:"se-resizer "+o,style:r,onMouseDown:n._handleMouseDown(i)})},n._handleMouseDown=Object(te.a)(function(e){return function(t){t.preventDefault(),n._attachEventHandlers(),n._prevX=n._scrollTarget.scrollLeft+t.pageX,n._index=e,n.props.resizing.set(!0)}}),n._handleMouseMove=function(e){n._resizeGuideBox(e),e.stopPropagation()},n._resizeGuideBox=Object(ee.a)(function(e){var t=n._getSizeByDeltaWidth(n._getDeltaWidthByEvent(e));n._width=t[0],n._height=t[1]},50),n._handleMouseUp=function(e){var t=n.props,i=t.store,r=t.useCase;n._detachEventHandlers(),r.handleMouseUpOnResizer(i,n._width,n._height),n._resizeGuideBox.cancel(),n._index=null,n.props.resizing.set(!1),$.a.log(e,"imect.resizer")},n._attachEventHandlers=function(){document.addEventListener("mousemove",n._handleMouseMove,!0),document.addEventListener("mouseup",n._handleMouseUp)},n._detachEventHandlers=function(){document.removeEventListener("mousemove",n._handleMouseMove,!0),document.removeEventListener("mouseup",n._handleMouseUp)},n._configAgent=h.W.get("configAgent");var i=t.store,r=i.width,o=i.height,a=i.originalWidth,s=i.originalHeight,c=t.minWidth,l=t.minHeight,u=t.maxWidth;return n._width=r,n._height=o,n._ratioOfWidthToHeight=a/s,n._minWidth=c||n._configAgent.get("editorInfo.imageMinimumWidth"),n._minHeight=l||n._configAgent.get("editorInfo.imageMinimumHeight"),n._maxWidth=u||n._configAgent.get("productConfig.documentWidth"),n}c()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._scrollTarget=h.W.get("domAccessor").getScrollTarget()},n.componentWillUnmount=function(){this._detachEventHandlers()},n.render=function(){var e=this.props,t=e.show,n=e.store;return n.width,n.height,n.originalWidth,n.originalHeight,t&&this._renderResizers()},n.componentWillReact=function(){var e=this.props.store,t=e.width,n=e.originalWidth,i=e.originalHeight;this._ratioOfWidthToHeight=n/i;var r=t!==this._prevWidth||this._prevOrgWidth!==n||this._prevOrgHeight!==i,o=r?t:this._width,a=r?Math.floor(t/this._ratioOfWidthToHeight):this._height;this._width=o,this._height=a,this._prevWidth=t,this._prevOrgWidth=n,this._prevOrgHeight=i},n._renderResizers=function(){var e,t=d()("se-resize-guide-box",((e={})[re[this._index]]=this._resizing,e["se-is-resizing"]=this._resizing,e));return this._width&&this._height?g.b.createElement("div",{className:t,style:{width:this._width,height:this._height}},this._resizing&&this._renderStyleTagForCursor(),this._resizing&&this._renderBackgroundImage(),this._resizing&&this._renderResizeInfo(),ne.map(this._renderResizer)):null},n._renderBackgroundImage=function(){return g.b.createElement("div",{className:"se-resize-guide-box-bg",style:{backgroundImage:'url("'+this.props.store.src+'")'}})},n._renderStyleTagForCursor=function(){var e=[1,2].includes(this._index)?"nesw-resize":"nwse-resize";return g.b.createElement("style",{dangerouslySetInnerHTML:{__html:".se-body * {cursor: "+e+" !important}"}})},n._renderResizeInfo=function(){return g.b.createElement("div",{className:"se-resize-px-info "+[re[this._index]]},this._width," ",g.b.createElement("span",{className:"se-resize-px-info-multiply"})," ",this._height)},n._getDeltaWidthByEvent=function(e){var t=this._scrollTarget.scrollLeft+e.pageX-this._prevX;return this._index&ie?t:-t},n._getSizeByDeltaWidth=function(e){var t=this.props.store.width,n=t+e,i=(t+e)/this._ratioOfWidthToHeight;return i<this._minHeight&&(i=this._minHeight,n=this._minHeight*this._ratioOfWidthToHeight),n<this._minWidth?i=(n=this._minWidth)/this._ratioOfWidthToHeight:n>this._maxWidth&&(i=(n=this._maxWidth)/this._ratioOfWidthToHeight),[n,i].map(Math.floor)},Y()(t,[{key:"_resizing",get:function(){return null!==this._index}}]),t}(g.b.Component),u()(z.prototype,"_resizing",[g.e],Object.getOwnPropertyDescriptor(z.prototype,"_resizing"),z.prototype),V=u()(z.prototype,"_index",[g.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=u()(z.prototype,"_width",[g.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=u()(z.prototype,"_height",[g.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z);oe.defaultProps={show:!1},oe.propTypes={children:g.a.oneOfType([g.a.element,g.a.array]),useCase:g.a.object.isRequired,store:g.a.object.isRequired,minWidth:g.a.number,minHeight:g.a.number,maxWidth:g.a.number,maxHeight:g.a.number,show:g.a.bool,resizing:g.a.object};var ae,se,ce=Object(f.b)(oe),le=n(252),ue={LOADING:"loading",COMPLETE:"complete",ERROR:"error"},pe=((se=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={status:ue.LOADING},n._src="",n._resizing=g.g.box(!1),n._elRef=g.b.createRef(),n._canShowBtnRepresentative=g.g.box(!0),n}c()(t,e);var n=t.prototype;return n.UNSAFE_componentWillUpdate=function(e){this._src&&this._src!==e.store.src&&this._resetComponent()},n.componentDidUpdate=function(){this._resolveBtnRepresentative()},n.render=function(){var e=this.props,t=e.children,n=e.store,i=this.state.status,r=this._resolveWrapperRestProps();return g.b.createElement(_.a,a()({ctype:"image",forwardRef:this._elRef,store:n},r),this._renderImageTag(),this._renderResizer(),i===ue.ERROR?this._renderErrorImage():this._renderImage(),this._renderImagePlaceholder(),this._renderBtnRepresentative(),this._renderBtnDelete(),this._renderVR360Mark(),this._renderVR360Toggle(),this._renderLinkMark(),t)},n._renderResizer=function(){var e=this.props,t=e.store,n=e.useCase;if(e.resizable){var i=t.selection,r=t.contentMode,o="single"===i&&[h.r.NORMAL,h.r.FIT].includes(r);return g.b.createElement(ce,{show:o,store:t,useCase:n,resizing:this._resizing})}},n._resolveWrapperRestProps=function(){return{className:this._resolveWrapperClassName(),id:this.props.store.id,style:this._resolveWrapperStyle(),draggable:this.props.additionalOption.hasCoverLayer}},n._resolveWrapperClassName=function(){var e,t=this.props.className;return d()(((e={})[t]=!0,e["se-is-progress"]=this._isProgressing(),e["se-is-resizing"]=this._resizing.get(),e))},n._resolveWrapperStyle=function(){var e=this.props,t=e.store,n=e.additionalOption.backgroundImage,i=r()({},this.props.style);return n&&(i.backgroundImage="url('"+t.src+"')"),i},n._isProgressing=function(){var e=this.props.store,t=e.internalResource,n=e.path,i=e.src,r=e.phase,o=t&&""===n&&""!==i;return r===h.O.PROCESSING||o},n._renderImagePlaceholder=function(){if(!this._isProgressing())return null;var e=this.props.store,t=e.width,n=e.height,i=this._resolveImageAreaStyle();return Object(b.a)({inlineStyle:i,message:this.props.i18n("imageUnit:uploading"),width:t,height:n})},n._renderImage=function(){var e=this.props.store,t=e.phase,n=e.src,i=e.alt,r=e.width,o=e.id,a=e.originalWidth,s=e.originalHeight,c=e.selection;return"processing"===t?null:(this._src=n,g.b.createElement(v.a,{unitId:o,compStore:e},g.b.createElement(S.b,{src:this._src,type:"none"!==c||this.context.readOnly?S.a.normal:S.a.lazyLoad,alt:i,className:"se-image-resource",width:r,originalWidth:a,originalHeight:s,onLoad:this._handleLoadImage,onError:this._handleErrorImage,onMouseDown:this._handleMouseDownImage,onClick:this._handleClickImage,onDragStart:this._handleDragStart,onDoubleClick:this._handleDblClickImage})))},n._renderErrorImage=function(){var e=this.props.store,t=e.id;return g.b.createElement(v.a,{unitId:t,compStore:e},C(this.props.i18n("imageComponent:image_404")))},n._renderBtnRepresentative=function(){var e=this.props,t=e.store,n=e.additionalOption,i=e.labelThumbnail;return this._resizing.get()||!this._canShowBtnRepresentative.get()?null:g.b.createElement(I.a,{store:t,additionalOption:n,labelThumbnail:i,status:this.state.status,onClick:this._handleClickBtnRepresentative})},n._renderBtnDelete=function(){return T({label:this.props.labelDeleteImage,enabled:!this._isProgressing(),onClick:this._handleClickBtnDelete})},n._renderImageTag=function(){var e=this.props,t=e.useMediaTag,n=e.store,i=e.i18n,r=n.align,o=n.width,a=n.height,s=n.displayFormat,c=n.mediaTags,l=[h.D.NORMAL,h.D.ANIMATED].includes(s),u=r===h.o.RIGHT;return t&&!Object(y.a)(c)&&l?g.b.createElement(q,{mediaTags:c,imageWidth:o,imageHeight:a,imageAlignRight:u,onDoubleClick:this._handleDblClickImage,i18n:i}):null},n._renderVR360Mark=function(){var e=this.props,t=e.labelThisIs360VR,n=e.store.displayFormat;return Object(L.a)({label:t,enabled:n===h.D.PANORAMA||n===h.D.VR360,onDoubleClick:this._handleDblClickImage})},n._renderVR360Toggle=function(){var e=this.props,t=e.store,n=e.labelUse360vr;return D({id:t.id,isVR360Format:t.displayFormat===h.D.PANORAMA,enabled:t.format===h.D.PANORAMA&&this.state.status===ue.COMPLETE,label:n,onClick:this._handleToggleVR360Display})},n._renderLinkMark=function(){var e=this.props,t=e.labelLink,n=e.store.link;return P({label:t,enabled:!!n})},n._resolveImageAreaStyle=function(){var e=this.props.store,t=e.width;return{paddingTop:""+e.height/t*100+"%"}},n._handleLoadImage=function(){var e=ue.COMPLETE;this.state.status!==e&&(this.setState({status:e}),this.props.onCompleteImage(e))},n._resolveBtnRepresentative=function(){if(this._elRef.current){var e=this._elRef.current.getBoundingClientRect(),t=e.width,n=e.height,i=!this.props.store.isSmallerThanMinimumSize(t,n);this._canShowBtnRepresentative.set(i)}},n._handleErrorImage=function(){var e=ue.ERROR;this.setState({status:e}),this.props.onCompleteImage(e)},n._handleMouseDownImage=function(e){this.props.onMouseDown(e)},n._handleClickImage=function(e){this.props.onClick(e)},n._handleDblClickImage=function(e){this.props.onDoubleClick(e,this.props.store)},n._handleDragStart=function(e){this.props.onDragStart(e)},n._handleClickBtnRepresentative=function(e){this.props.onClickRepresentative(e,this.props.store)},n._handleClickBtnDelete=function(e){e.stopPropagation(),this.props.onClickDelete(e,this.props.store)},n._handleToggleVR360Display=function(e){e.preventDefault(),this.props.onToggleVR360Display(e)},n._resetComponent=function(){this.state.status!==ue.LOADING&&this.setState({status:ue.LOADING})},t}(g.b.Component)).contextType=le.a,ae=se,u()(ae.prototype,"_renderImagePlaceholder",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_renderImagePlaceholder"),ae.prototype),u()(ae.prototype,"_renderBtnRepresentative",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_renderBtnRepresentative"),ae.prototype),u()(ae.prototype,"_renderBtnDelete",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_renderBtnDelete"),ae.prototype),u()(ae.prototype,"_renderVR360Mark",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_renderVR360Mark"),ae.prototype),u()(ae.prototype,"_renderVR360Toggle",[m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_renderVR360Toggle"),ae.prototype),u()(ae.prototype,"_handleLoadImage",[m.autobind],Object.getOwnPropertyDescriptor(ae.prototype,"_handleLoadImage"),ae.prototype),u()(ae.prototype,"_handleErrorImage",[m.autobind],Object.getOwnPropertyDescriptor(ae.prototype,"_handleErrorImage"),ae.prototype),u()(ae.prototype,"_handleMouseDownImage",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_handleMouseDownImage"),ae.prototype),u()(ae.prototype,"_handleClickImage",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_handleClickImage"),ae.prototype),u()(ae.prototype,"_handleDblClickImage",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_handleDblClickImage"),ae.prototype),u()(ae.prototype,"_handleDragStart",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_handleDragStart"),ae.prototype),u()(ae.prototype,"_handleClickBtnRepresentative",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_handleClickBtnRepresentative"),ae.prototype),u()(ae.prototype,"_handleClickBtnDelete",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_handleClickBtnDelete"),ae.prototype),u()(ae.prototype,"_handleToggleVR360Display",[m.autobind,m.muteIfReadOnly],Object.getOwnPropertyDescriptor(ae.prototype,"_handleToggleVR360Display"),ae.prototype),ae);pe.defaultProps={className:"",style:{},onMouseDown:function(){},onDoubleClick:function(){},onClick:function(){},onClickRepresentative:function(){},onClickDelete:function(){},onToggleVR360Display:function(){},onDragStart:function(){},onCompleteImage:function(){},additionalOption:{},resizable:!1},pe.propTypes={className:g.a.string,store:g.a.object,style:g.a.object,onMouseDown:g.a.func,onDoubleClick:g.a.func,onClick:g.a.func,onClickRepresentative:g.a.func,onClickDelete:g.a.func,onDragStart:g.a.func,onCompleteImage:g.a.func,onToggleVR360Display:g.a.func,children:g.a.oneOfType([g.a.element,g.a.array]),i18n:g.a.func,labelLink:g.a.string.isRequired,labelThumbnail:g.a.string.isRequired,labelDeleteImage:g.a.string.isRequired,labelThisIs360VR:g.a.string.isRequired,labelUse360vr:g.a.string.isRequired,additionalOption:g.a.object,resizable:g.a.bool};t.a=Object(f.b)(pe)},832:function(e,t,n){"use strict";var i=n(51),r=n(1307),o=n(414),a=n(0),s=n.n(a),c=function(e){function t(){return e.apply(this,arguments)||this}s()(t,e);var n=t.prototype;return n.open=function(e){this._pauseDocumentEdit(),this._store.open(e)},n.updatePlacesMap=function(e){this._store.updatePlacesMap(e)},n.updateProperty=function(e){this._store.updateProperty(e)},n.setDateAt=function(e,t){this._store.setDateAt(e,t)},n.setNotification=function(e){this._store.setNotification(e)},n.setRepetition=function(e){this._store.setRepetition(e)},n.enableEmptyTitleWarning=function(){this._store.enableEmptyTitleWarning()},n.disableEmptyTitleWarning=function(){this._store.disableEmptyTitleWarning()},n.setRepetitionInfo=function(e){this._store.setRepetitionInfo(e)},n.showAndHideRepetitionWarning=function(){this._store.showAndHideRepetitionWarning()},n.removePlacesMap=function(){this._store.updatePlacesMap(null)},n.toScheduleComponentData=function(){return this._store.toScheduleComponentData()},n.close=function(){this._store.close(),this._unpauseDocumentEdit()},t}(i.d),l=n(415),u=n(209),p=i.G.extend({name:"ScheduleLayer",view:Object(r.a)({Loader:function(){return Promise.all([n.e(78),n.e(37)]).then(n.bind(null,1354))}}),useCase:o.a,service:c,store:l.a,consts:u.i});t.a=p},833:function(e,t,n){"use strict";var i,r,o=n(12),a=n.n(o),s=n(18),c=n.n(s),l=n(50),u=n.n(l),p=n(51),d=n(52),h=n(49),g=n(718),f=n(78),m=n(1),y=n.n(m),v=function(){function e(e){var t=e.id,n=e.code,i=e.file,r=e.errorCodeMap,o=void 0===r?{}:r,a=e.errorDescriptionMap,s=void 0===a?{}:a;this.id=t,this.code=n||i.code,this.file=i,this.errorCodeMap=o,this.errorDescriptionMap=s}return y()(e,[{key:"fileName",get:function(){return this.file.name}},{key:"fileSize",get:function(){return this.file.size}},{key:"cause",get:function(){return this.errorCodeMap[this.code]}},{key:"description",get:function(){var e=this.errorDescriptionMap[this.code];return"UNSUPPORTED_EXTENSION"===this.code&&(e=this.file.name+e),e}},{key:"descriptionWithoutFileName",get:function(){return this.errorDescriptionMap[this.code]}}]),e}(),_=n(398),b=n(1309),S=n(1310);n.d(t,"a",function(){return O});var C=10,I=(i=function(){function e(){this._configAgent=p.W.get("configAgent"),this._videoUploadService=p.W.get("videoUploadService"),this._editingService=p.W.get("editingService"),this._alertLayerService=p.W.get("alertLayerService"),this._editorStatusStore=p.W.get("editorStatusStore"),this._videoComponentService=p.W.get("videoComponentService"),this._uploadProgressLayerService=p.W.get("uploadProgressLayerService"),this._eventDispatcherService=p.W.get("eventDispatcherService"),this._i18n=p.W.get("i18n"),this._uploadingFiles=[],this._erroredFiles=[],this._progressStatus={totalCount:0,progressCount:0,errorInfos:[]},this._errorCodeMap={EXCEEDED_UPLOAD_COUNT:this._i18n("errorCauseMap:limitation_by_session_count"),EXCEEDED_UPLOAD_SIZE:this._i18n("errorCauseMap:limitation_by_session_size"),INVALID_PARAMETER:this._i18n("errorCauseMap:invalid_parameter"),UNSUPPORTED_EXTENSION:this._i18n("errorCauseMap:unsupported_extension")},this._errorCodeDescription={EXCEEDED_UPLOAD_COUNT:this._i18n("naverVideoUploader:UP_TO_N_CAN_BE_DONE").replace(/%s/g,C),EXCEEDED_UPLOAD_SIZE:this._i18n("errorDescriptionMap:limitation_by_session_size",{maxImageUploadSize:this._configAgent.get("infraConfig.video.maxVideoUploadSize")}),INVALID_PARAMETER:this._i18n("errorDescriptionMap:invalid_parameter"),UNSUPPORTED_EXTENSION:this._i18n("naverVideoUploader:ONLY_VIDEO")}}var t=e.prototype;return t._removeItem=function(e){var t=this._uploadingFiles.findIndex(function(t){return t===e});t>=0&&this._uploadingFiles.splice(t,1)},t._moveErrorItem=function(e){var t=this._uploadingFiles.findIndex(function(t){return t===e});t>=0&&this._erroredFiles.push(this._uploadingFiles.splice(t,1)[0])},t._insertVideoComponent=function(e){var t=this._videoComponentService.createVideoComponent(e);this._editingService.insert({sourceComponents:[t]})},t._onEachFinally=function(e){this._removeItem(e),this._uploadingFiles.length||this._onCloseProgress()},t._onOpenProgress=function(e){var t=e.count,n=void 0===t?0:t;this._progressStatus.totalCount+=n,this._progressStatus.progressCount+=n,this._uploadProgressLayerService.start({title:this._i18n("videoUploader:ready"),description:this._i18n("videoUploader:file_count",{fileCount:this._progressStatus.totalCount}),totalCount:this._progressStatus.totalCount})},t._onError=function(e){var t=this,n=e.unprocessedFiles,i=void 0===n?[]:n;this._editorStatusStore.idle();var r=this._progressStatus.errorInfos,o=i.map(function(e){return t._makeVideoUploadErrorInfo(e,"INVALID_PARAMETER")});r.push.apply(r,o),this._clearUpload(r)},t._onCloseProgress=function(){if(this._editorStatusStore.idle(),this._progressStatus.progressCount<=0){var e=this._progressStatus.errorInfos;this._clearUpload(e)}},t._clearUpload=function(e){var t=this;e&&e.length>0?(this._alertLayerService.open(this._reolveAlertInfos(e)),this._progressStatus.errorInfos=[]):this._eventDispatcherService.dispatch(p.C.ADD_XCAM_CONTENTS,{ctype:"video"}),this._progressStatus.totalCount=0,this._progressStatus.progressCount=0,this._progressStatus.errorInfos=[],setTimeout(function(){t._uploadProgressLayerService.end()},1e3)},t._onEachUploadStart=function(e){var t=e.fileName;this._uploadProgressLayerService.updateProgress({title:t,description:this._i18n("videoUploader:ready")})},t._onEachUploadProgress=function(e){var t=e.fileName,n=e.fileSize,i=e.uploaded,r=g.a.fileSizeSI(i)+"/"+g.a.fileSizeSI(n);this._uploadProgressLayerService.updateProgress({title:t,description:r})},t._onEachExtractThumbanil=function(e){var t=e.fileName,n=this._i18n("naverVideoUploader:EXTRACTING_REPRE_IMG");this._uploadProgressLayerService.updateProgress({title:t,description:n})},t._onEachUploadError=function(e,t){var n=this._progressStatus.errorInfos,i=this._makeVideoUploadErrorInfo(t,"INVALID_PARAMETER");this._progressStatus.progressCount--,n.push(i)},t._onEachUploadComplete=function(e){var t=this,n=e.fileName,i=e.fileSize;this._insertVideoComponent(e),this._progressStatus.progressCount--,this._uploadProgressLayerService.update({title:n,description:""+g.a.fileSizeSI(i),doneStateResolver:function(){return{title:t._i18n("videoUploader:completed"),description:t._i18n("videoUploader:video_inserted")}}})},t.openVideoUploader=function(){var e=this;this._uploadingFiles=[],this._erroredFiles=[],this._videoUploadService.openFileDialog({accept:"video/*",multiple:!0}).then(function(t){e._preprocForLimits(t,function(t){if(t.length>0){e._editorStatusStore.busy(),e._onOpenProgress({count:t.length}),e._uploadingFiles=[].concat(t);try{e._videoUploadService.uploadForSimple(Object(f.a)(t,function(t){return{file:t,events:{onuploadstart:function(t){return e._onEachUploadStart(t)},onerror:function(n){e._onEachUploadError(n,t),e._onEachFinally(t)},onuploadprogress:function(t){return e._onEachUploadProgress(t)},onuploadcomplete:function(t){return e._onEachExtractThumbanil(t)},onthumbstart:function(){},onthumbcomplete:function(n){e._onEachUploadComplete(n);var i=Object(b.a)(S.b.VIDEO,n);i&&e._eventDispatcherService.dispatch(p.z.RESOURCE_UPLOADED,i),e._onEachFinally(t)}}}}))}catch(t){e._onError(e._uploadingFiles),e._videoUploadService.reset()}}else e._onError(e._uploadingFiles),e._videoUploadService.reset()})})},t._preprocForLimits=function(){var e=c()(a.a.mark(function e(t,n){var i=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=function(e){return e}),e.next=3,this._checkMaxCountInDocument(t).then(function(e){return i._checkValidateVideos(e)}).then(function(e){return i._checkLimits(e)}).then(function(e){return n(e)}).catch(_.a);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t._checkMaxCountInDocument=function(e){var t=this;return new Promise(function(n,i){0===e.length&&i();var r=t._videoUploadService.isExceededMaxCount(e),o=t._videoUploadService.videoMaxUploadCount;r&&t._alertLayerService.open({type:"alert",title:t._i18n("limits:title_exceeded_count_by_max"),description:t._i18n("limits:video_description_exceeded_count_by_max",{maxCount:o}),isDimUse:!1,onClickConfirm:function(){n(e)},onClickCancel:function(){i()}}),n(e)})},t._checkValidateVideos=function(e){var t=this,n=e.validFiles,i=e.invalidFiles;return new Promise(function(e){0===i.length&&e(n);var r=i.reduce(function(e,t){return e.invalidFileInfos.push({file:t,code:"UNSUPPORTED_EXTENSION"}),e},{invalidFileInfos:[]}).invalidFileInfos;if(r.length>0){var o=t._progressStatus.errorInfos;o.push.apply(o,t._makeErrorInfos(r))}e(n)})},t._checkLimits=function(e){var t=this;return new Promise(function(n){var i=t._configAgent.get("infraConfig.video.maxVideoUploadSize"),r=e.reduce(function(e,n){var r=n.size,o=e.validFiles,a=e.invalidFileInfos;return r>i?a.push({file:n,code:"EXCEEDED_UPLOAD_SIZE"}):o.length+t._progressStatus.totalCount>=C?a.push({file:n,code:"EXCEEDED_UPLOAD_COUNT"}):o.push(n),e},{validFiles:[],invalidFileInfos:[]}),o=r.validFiles,a=r.invalidFileInfos;if(a.length>0){var s=t._progressStatus.errorInfos;s.push.apply(s,t._makeErrorInfos(a))}n(o)})},t._makeErrorInfos=function(e){var t=this;return e.map(function(e){var n=e.file,i=e.code;return t._makeVideoUploadErrorInfo(n,i)})},t._makeVideoUploadErrorInfo=function(e,t){var n=e.id;return new v({id:n,code:t,file:e,errorCodeMap:this._errorCodeMap,errorDescriptionMap:this._errorCodeDescription})},t._reolveAlertInfos=function(e){var t=this,n=e||this._progressStatus.errorInfos,i=n.length,r={};return r.title=this._i18n("imageBehavior:upload_failed"),r.type="file",r.fileType="video",r.description=this._i18n("imageBehavior:upload_failed_desc",{failUploadCount:i}),r.errorList=n,this._progressStatus.totalCount!==e.length&&(r.onClickConfirm=function(){return t._eventDispatcherService.dispatch(p.C.ADD_XCAM_CONTENTS,{ctype:"video"})}),r},e}(),u()(i.prototype,"_onEachUploadComplete",[d.history],Object.getOwnPropertyDescriptor(i.prototype,"_onEachUploadComplete"),i.prototype),i),O=(r=function(){function e(){this._configAgent=p.W.get("configAgent"),this._videoUploadLayerService=p.W.get("videoUploadLayerService"),this._simpleUploadUseCase=new I}return e.prototype.openVideoUploader=function(){"simple"!==(this._configAgent.get("modules.videoUploader.config")||{}).uploadMode?this._videoUploadLayerService.openVideoUploader():this._simpleUploadUseCase.openVideoUploader()},e}(),u()(r.prototype,"openVideoUploader",[d.preventOnDocumentProcessing,h.d],Object.getOwnPropertyDescriptor(r.prototype,"openVideoUploader"),r.prototype),r)},834:function(e,t,n){"use strict";var i=n(1),r=n.n(i),o=n(0),a=n.n(o),s=n(12),c=n.n(s),l=n(18),u=n.n(l),p=n(51),d=n(555),h=n(721),g=n(111),f=n(191),m=n(1080),y=n(97),v=function(){function e(e){var t=void 0===e?{}:e,n=t.configAgent,i=t.documentDataStore;this._configAgent=n,this._documentDataStore=i}var t=e.prototype;return t.abort=function(){y.b.abort()},t.outline=function(e){var t=this._configAgent.get("apiInfo.fetchOutline"),n=this._documentDataStore.seDocumentId;return y.b.post(t+"?se_doc_id="+n,{options:{useAbort:!0},data:{purpose:e,se_doc_id:n},success:function(e){var t=e.writing_materials;if(0===t.length)throw new Error("Not enough materials");return t.slice(0,f.c).map(function(e){return e.text})},error:function(e){throw e}})},t.filter=function(e){var t=this._configAgent.get("apiInfo.fetchFilter"),n=this._documentDataStore.seDocumentId;return y.b.post(t+"?se_doc_id="+n,{options:{useAbort:!0},data:{textlist:e,se_doc_id:n},success:function(e){return e.invalid.map(function(e){return e.target})},error:function(e){throw e}})},t.personaInsights=function(){var e=this._configAgent.get("apiInfo.fetchSearch"),t=this._documentDataStore.seDocumentId;return y.b.post(e+"?se_doc_id="+t,{data:{se_doc_id:t},success:function(e){var t=e.persona,n=t.system,i=t.user,r=n||i||{};return{interest:r.interest,writingStyle:r.writing_style,preferredExpression:r.preferred_expression}},error:function(e){throw e}})},e}(),_=n(49),b=n(77);function S(e,t,n){var i=n.value;return{configurable:!0,value:function(){var n=u()(c.a.mark(function n(){var r,o,a=arguments;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this!==e.prototype&&!this.hasOwnProperty(t)&&"function"==typeof i){n.next=2;break}return n.abrupt("return",i);case 2:if((r=p.W.get("aiHistoryService")).startRecording({}),!((o=i.apply(this,a))instanceof Promise)){n.next=10;break}return n.next=8,o.then(function(){return r.endRecording()}).catch(function(){return r.endRecording()});case 8:n.next=11;break;case 10:r.endRecording({});case 11:return n.abrupt("return",o);case 12:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()}}n.d(t,"b",function(){return S});var C=function(e){function t(t){var n;return(n=e.call(this,t)||this)._deferred=void 0,n._selectionInfoStore=p.W.get("selectionInfoStore"),n._componentListStore=p.W.get("componentListStore"),n._aiMaterialProvider=new v({configAgent:p.W.get("configAgent"),documentDataStore:p.W.get("documentDataStore")}),n._editorStatusStore=p.W.get("editorStatusStore"),n}a()(t,e);var n=t.prototype;return n.setPersonaStatus=function(e){this._store.setPersonaStatus(e)},n.resetPersonaInsights=function(){this._store.setPersonaInsights({})},n.updatePersonaInsights=function(){var e=u()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Object.values(this._store.personaInsights).some(function(e){return!!e})){e.next=3;break}return e.abrupt("return");case 3:return this._store.setPersonaStatus(g.j.INSIGHT),e.next=6,this._aiMaterialProvider.personaInsights();case 6:t=e.sent,Object.values(t).every(function(e){return!e})&&this._store.setPersonaStatus(g.j.NO_DATA),t&&this._store.loadEnd(),this._store.setPersonaInsights(t),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),this._store.loadEnd(),e.t0.response?this._store.setPersonaStatus(g.j.ERROR_API):this._store.setPersonaStatus(g.j.ERROR);case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),n.resolveStep=function(){if(!this._store.personaInsightsExist)return f.a.PERSONA;var e=this._componentListStore.getContentText();return d.a.RX.WHITESPACE_ONLY.test(e)?f.a.SUBJECT:f.a.TOOLBOX},n._pauseDocumentEdit=function(){++p.d._openLayers>1||(this._virtualEditable.changeToAiMode(),this._hotkeyBinder.pause(),this._editorStatusStore.pause(),this._dragAndDropService.disable(),this._eventDispatcher.emit(p.z.PAUSED))},n._unpauseDocumentEdit=function(){--p.d._openLayers>0||(this._virtualEditable.changeToNormal(),this._dragAndDropService.enable(),this._hotkeyBinder.unpause(),this._editorStatusStore.unpause(),this._virtualEditable.refresh(),this._eventDispatcher.emit(p.z.RESUMED))},n.open=function(e){return this._store.open(e),this._pauseDocumentEdit(),this._deferred=new h.a,this._deferred.promise},n.close=function(){var e=this._store,t=e.writingType,n=e.undoable,i=t===f.j.ARTICLE;i||!i&&n?this._deferred.resolve():this._deferred.reject(),this._aiMaterialProvider.abort(),this._store.close(),this._unpauseDocumentEdit()},n.loadStart=function(){this._store.loadStart()},n.loadEnd=function(){this._store.loadEnd()},n.setSubject=function(e){this._store.setSubject(e)},n.setStep=function(e){this._store.resetToast(),this._store.setStep(e)},n.setKeywordLayerClosing=function(e){this._store.setKeywordLayerClosing(e)},n.setInvalid=function(e,t){this._store.setInvalid(e,t)},n.resetInvalid=function(e,t){this._store.resetInvalid(e,t)},n.addKeyword=function(e){this._store.addKeyword(e),this._store.setToast(g.l.KEYWORD_INPUT,null)},n.updateKeywordValue=function(e,t){this._store.updateKeywordValue(e,t),this._store.setToast(g.l.KEYWORD_INPUT,null)},n.deleteKeyword=function(e){this._store.deleteKeyword(e)},n.goKeywordStep=function(){var e=u()(c.a.mark(function e(){var t,n,i=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._store.subject.trim(),Object(_.h)(function(){i._store.loadStart()}),e.prev=2,e.next=5,this._aiMaterialProvider.outline(t);case 5:n=e.sent,Object(_.h)(function(){i.setSubject(t),i._store.updateKeywords(n),i.setStep(f.a.KEYWORD)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Object(_.h)(function(){var t=e.t0.errorCode;i._showErrorToast(t)});case 12:return e.prev=12,Object(_.h)(function(){i._store.loadEnd()}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[2,9,12,15]])}));return function(){return e.apply(this,arguments)}}(),n.updateSubject=function(){var e=u()(c.a.mark(function e(t){var n,i=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(_.h)(function(){i._store.resetToast(),i._store.loadStart()}),e.prev=1,e.next=4,this._aiMaterialProvider.outline(t);case 4:n=e.sent,Object(_.h)(function(){i._store.setSubject(t),i._store.updateKeywords(n),i._store.resetInvalid()}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),Object(_.h)(function(){var t=e.t0.errorCode;i._showErrorToast(t)}),e.t0;case 12:return e.prev=12,Object(_.h)(function(){i._store.loadEnd()}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,8,12,15]])}));return function(t){return e.apply(this,arguments)}}(),n._showErrorToast=function(e){if(e===f.e.FILTERED_DATA)this._store.setToast(g.l.SUBJECT,g.m.SUBJECT.FILTERED_WORD),this._store.setInvalid(g.e.SUBJECT,g.g.FILTERED_WORD);else if(e===f.e.TIMEOUT){var t=g.m.SUBJECT.TIMEOUT;this._store.setToast(g.l.SUBJECT,t)}else{var n=f.b.includes(e)?g.m.SUBJECT.AI_TEMPORARY_ERROR:g.m.SUBJECT.NETWORK_ERROR;this._store.setToast(g.l.SUBJECT,n)}},n.filterKeywords=function(){var e=this._store.keywords.map(function(e){return e.value});return this._aiMaterialProvider.filter(e)},n.updateInvalidKeywords=function(e){this._store.updateInvalidKeywords(e)},n.updateInsertedRange=function(e){this._store.updateInsertedRange(e)},n.setWritingPhase=function(e){this._store.setWritingPhase(e)},n.setRangeToAiInserted=function(){this._selectionInfoStore.setRange(this._store.insertedRange)},n.setUndoable=function(e){this._store.setUndoable(e)},n.setRedoable=function(e){this._store.setRedoable(e)},n.setWritingType=function(e){this._store.setWritingType(e)},n.setToast=function(e,t){this._store.setToast(e,t)},n.resetToast=function(){this._store.resetToast()},n.reset=function(){this._store.reset()},n.selectClosestComp=function(){this._selectionInfoStore.setRange(this._closestCompRange)},n.busy=function(){this._editorStatusStore.busy()},n.idle=function(){this._editorStatusStore.idle()},r()(t,[{key:"subject",get:function(){return this._store.subject}},{key:"keywords",get:function(){return this._store.keywords}},{key:"insertedRange",get:function(){return this._store.insertedRange}},{key:"cursorAtWritingTarget",get:function(){var e=this._selectionInfoStore.toPlainJSON(),t=e.mode,n=e.end;if(t!==b.d.CURSOR)return!1;var i=this._componentListStore.getComponentById(n.compId);return!!f.i.includes(i.ctype)&&(i.ctype!==m.a.WRAPPING_PARAGRAPH||!!i.text.getStoreById(n.unitId))}},{key:"_closestCompRange",get:function(){var e=this._selectionInfoStore.toPlainJSON().end,t=this._componentListStore.getComponentById(e.compId);return t.ctype===m.a.WRAPPING_PARAGRAPH?!!t.text.getStoreById(e.unitId)?t.getComponentActiveRange():t.getCompStartRange():t.getComponentActiveRange()}}]),t}(p.d);t.a=C},837:function(e,t,n){"use strict";var i,r,o,a,s=n(0),c=n.n(s),l=n(51),u=n(75),p=n(60),d=n.n(p),h=n(50),g=n.n(h),f=(n(61),n(1)),m=n.n(f),y=n(49),v=l.F.DECIMAL,_=l.F.BULLET,b=l.F.NONE,S=l.F.UL,C=l.F.OL,I=[S,C],O=[v],T=function(e){return O.includes(e)?C:S},L=function(){var e=new N({type:null,level:-1});return e._filler=!1,e},E=function(e){var t=e.listType,n=e.listLevel;return new N({type:t,level:n,paragraph:e})},P=function(e,t){void 0===t&&(t=T(e.type));var n=e.level,i=new N({type:t,level:n});return i.appendChild(e),i},w=function(e){var t=e.getChildAt(0),n=t.type,i=t.level,r=new N({type:n,level:i-1});return r.appendChild(e),P(r)},k=function(e,t,n,i){void 0===n&&(n=0);var r=e.spliceChildren(n,i);t.appendChild.apply(t,r)},x=function(e){return e.parent.children.findIndex(function(t){return t===e})},D=function(e){var t=L(),n=new R(t);return e.forEach(function(e){var t=E(e),i=t.level,r=t.type,o=n.peek(),a=o.level;if(a<i){for(var s=P(t),c=[],l=i-a,u=s;--l;){var p=(u=w(u)).getChildAt(0);c.unshift(u,p)}o.appendChild(u),n.push.apply(n,c.concat([s,t]))}else{a>i&&n.popUntilSize(1+2*(i+1));var d=n.pop(),h=n.pop(),g=d.type,f=h.type;if(g===r||r===b||g===b&&(f===C&&r===v||f===S&&r===_))h.appendChild(t),n.push(h,t);else{var m=n.pop(),y=P(t);m.appendChild(y),n.push(m,y,t)}}}),t},A=function(e){var t=e.parent,n=e.children,i=x(e),r=x(t);if(0===i)if(r>0){var o=t.parent,a=o.getChildAt(r-1),s=a.degree-1;if(1===t.degree){var c;o.removeChildAt(r),o.refineChildren(),e.removeAllChildren(),t.increaseLevel(),(c=a.getChildAt(s)).appendChild.apply(c,[t].concat(n.slice()))}else{var l;t.removeChildAt(i),e.removeAllChildren();var u=P(e,t.type);u.increaseLevel(),(l=a.getChildAt(s)).appendChild.apply(l,[u].concat(n.slice()))}}else{t.removeChildAt(i),e.removeAllChildren();var p=e.clone(),d=P(e,t.type);d.increaseLevel(),p.appendChild.apply(p,[d].concat(n.slice())),t.appendChildAt(i,p)}else{var h=t.getChildAt(i-1);t.removeChildAt(i),e.removeAllChildren();var g=P(e,t.type);g.increaseLevel(),h.appendChild.apply(h,[g].concat(n.slice()))}},j=function(e){var t=e.parent,n=t.parent,i=n.parent,r=i.parent,o=x(e),a=x(t),s=x(n),c=x(i);if(0!==o){var l=[],u=t.clone();if(e.degree){var p=e.getChildAt(0).getChildAt(0).clone();p.decreaseLevel(),k(e,p),l.push(P(p))}if(k(t,u,o+1),t.removeChildAt(o),e.decreaseLevel(),u.degree&&l.push(u),e.appendChild.apply(e,l),k(n,e,a+1),t.type===i.type)i.appendChildAt(s+1,e);else{var d=P(e,t.type),h=i.clone();k(i,h,s+1),h.degree?r.appendChildAt(c+1,d,h):r.appendChildAt(c+1,d)}}else{t.removeChildAt(o),t.degree||n.removeChildAt(a);var g=[];if(e.degree){var f=e.getChildAt(0).getChildAt(0).clone();f.decreaseLevel(),k(e,f),g.push(P(f))}if(e.decreaseLevel(),e.appendChild.apply(e,g),t.type===i.type)n.filler&&0===a?(i.removeChildAt(s),k(n,e,a),i.appendChildAt(s,e)):(k(n,e,a),i.appendChildAt(s+1,e));else{k(n,e,a);var m=P(e,t.type),y=i.clone();k(i,y,s+1),y.degree?r.appendChildAt(c+1,m,y):r.appendChildAt(c+1,m)}}},R=function(){function e(e){this._data=e?[e]:[]}var t=e.prototype;return t.pop=function(){return this._data.pop()},t.popUntilSize=function(e){for(var t=[];this.size>e;)t.push(this.pop());return t},t.push=function(){var e;(e=this._data).push.apply(e,arguments)},t.prepend=function(){var e;(e=this._data).unshift.apply(e,arguments)},t.peek=function(){return this._data[this.size-1]},m()(e,[{key:"size",get:function(){return this._data.length}}]),e}(),N=(i=function(){function e(e){d()(this,"_children",r,this),d()(this,"_type",o,this),d()(this,"_filler",a,this),this._parent=null,this.key=l.cb.generate(),this._initialize(e)}var t=e.prototype;return t._initialize=function(e){var t=e.type,n=e.level,i=e.paragraph,r=void 0===i?null:i;this._type=t,this._level=n,this._paragraph=r,this._filler=!(I.includes(t)||r),this._size=r?1:0},t.convertToFiller=function(){this._paragraph=null,this._filler=!0,this._updateSize()},t.getChildAt=function(e){return 0<=e&&e<this.degree?this.children[e]:null},t.spliceChildren=function(e,t){return this._spliceChildren(e,t)},t.appendChild=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.appendChildAt.apply(this,[this.degree].concat(t))},t.appendChildAt=function(e){for(var t,n=this,i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];r.length&&(r.forEach(function(e){e._parent=n}),(t=this.children).splice.apply(t,[e,0].concat(r)),this.refineChildren(),this._updateSize())},t.refineChildren=function(){this.degree<=1||(I.includes(this.type)?this._refineChildrenOfWrapper():this._refineChildrenOfInner())},t._refineChildrenOfWrapper=function(){for(var e=this.children[this.degree-1],t=this.degree-2;t>=0;t--){var n=this.children[t];e.filler&&(this.removeChildAt(t+1),n.appendChild.apply(n,e.children)),e=n}},t._refineChildrenOfInner=function(){for(var e=this.children[this.degree-1],t=this.degree-2;t>=0;t--){var n=this.children[t],i=e.children[0];if(i.filler){var r=n.children[n.degree-1];r.appendChild.apply(r,i.children),e.removeChildAt(0),e.degree||(e=this.getChildAt(t+2)||{},this.removeChildAt(t+1))}e.type===n.type&&(n.appendChild.apply(n,e.children),this.removeChildAt(t+1)),e=n}},t.removeChildAt=function(e){this._spliceChildren(e,1)},t._spliceChildren=function(e,t){void 0===t&&(t=this.degree-e);var n=this.children.splice(e,t);return n.forEach(function(e){e._parent=null}),this._updateSize(),this.removeEmptyChildren(),n},t.removeAllChildren=function(){this._children=[],this._updateSize()},t.updateType=function(e){this._type!==e&&(this._type=e)},t.increaseLevel=function(){this._level++,this._children.forEach(function(e){e.increaseLevel()})},t.decreaseLevel=function(){this._level--,this._children.forEach(function(e){e.decreaseLevel()})},t._updateSize=function(){this._size=this.children.reduce(function(e,t){return e+=t.size},0)+(this.paragraph?1:0),this._parent&&this._parent._updateSize()},t.removeEmptyChildren=function(e){void 0===e&&(e=!1);for(var t=this.degree-1;t>=0;t--)this.children[t].size||this.children.splice(t,1);e&&this.parent&&this.parent.removeEmptyChildren(e)},t.findNodeWithPath=function(e,t){if(void 0===t&&(t=[]),this.paragraph&&e--,!this.degree||-1===e)return[this,t];for(var n=0;n<this.degree;n++){var i=this.children[n];if(e<i.size)return t.push(n),i.findNodeWithPath(e,t);e-=i.size}return[null,[]]},t.clone=function(t){var n=(void 0===t?{}:t).paragraph,i=void 0!==n&&n;return new e({type:this.type,level:this.level,paragraph:i?this.paragraph:null})},m()(e,[{key:"type",get:function(){return this._type}},{key:"level",get:function(){return this._level}},{key:"paragraph",get:function(){return this._paragraph}},{key:"parent",get:function(){return this._parent}},{key:"children",get:function(){return this._children}},{key:"filler",get:function(){return this._filler}},{key:"degree",get:function(){return this.children.length}},{key:"size",get:function(){return this._size}}]),e}(),r=g()(i.prototype,"_children",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=g()(i.prototype,"_type",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=g()(i.prototype,"_filler",[y.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);n.d(t,"a",function(){return V});var M=l.F.DECIMAL,B=l.F.BULLET,W=l.F.NONE,U=l.F.UL,F=l.F.OL,z=[U,F],V=function(e){function t(t){var n,i=t.paragraphs,r=void 0===i?[]:i,o=t.root,a=void 0===o?null:o;return(n=e.call(this)||this).paragraphs=r,n.root=a||D(r),n}c()(t,e);var n=t.prototype;return n.mergeWith=function(e){var t,n,i,r,o=this.root.getChildAt(this.root.degree-1),a=e.root.getChildAt(0),s=e.root.size;return 0===s?this:0===this.root.size?e:this.root.size>=s?(o.type===a.type&&(o.appendChild.apply(o,a.children),e.root.removeChildAt(0)),(i=this.root).appendChild.apply(i,e.root.children),(r=this.paragraphs).push.apply(r,e.paragraphs),this):(o.type===a.type&&(a.appendChildAt.apply(a,[0].concat(o.children.slice())),this.root.removeChildAt(this.root.degree-1)),(t=e.root).appendChildAt.apply(t,[0].concat(this.root.children.slice())),(n=e.paragraphs).unshift.apply(n,this.paragraphs),e)},n._indexOf=function(e){return this.paragraphs.findIndex(function(t){return t.id===e.id})},n.hasParagraph=function(e){return this._indexOf(e)>-1},n.updateListType=function(e){var t=this.findMatchedNodeWithPath(e)[0],n=e.listType;t.type!==n&&this._updateType(t,n)},n.updateListLevel=function(e){var t=this.findMatchedNodeWithPath(e)[0],n=e.listLevel-t.level;0!==n&&this._updateLevelByDiff(t,n)},n._updateType=function(e,t){if(z.includes(e.type)){if(e.parent.refineChildren(),!e.parent.filler)return;this._updateType(e.parent,t)}else{e.updateType(t);var n=e.parent,i=n.parent,r=x(e),o=x(n),a=e.filler?[e]:this.getNodesInSameListItem(e.paragraph);n.removeChildAt(r);var s=P(e,T(t));a.length>1&&k(n,s,r,a.length-1);var c=n.clone(),l=o+r;k(n,c,r),n.degree||i.removeChildAt(o),c.degree?i.appendChildAt(l,s,c):i.appendChildAt(l,s),0===l&&this._updateType(s,t)}},n._updateLevelByDiff=function(e,t){if(t>0)for(;t--;)A(e);else if(t<0)for(;t++;)j(e)},n.indexOf=function(e){return this._indexOf(e)},n.findMatchedNodeWithPath=function(e){var t=this._indexOf(e);return this.root.findNodeWithPath(t)},n.split=function(e){if(e>=this.paragraphs.length)return[this,null];if(e<=0)return[null,this];var n=this.root.findNodeWithPath(e),i=n[0],r=n[1],o=i;r.reverse().forEach(function(e,t){var n,r=i.parent,a=[o].concat(r.spliceChildren(e+1));0===t&&r.removeChildAt(e),(n=o=r.clone()).appendChild.apply(n,a),i=r});var a=L();k(o,a);var s=new t({root:a,paragraphs:this.paragraphs.splice(e)}),c=s.findMatchedNodeWithPath(s.paragraphs[0])[0];return s._updateType(c,c.type),[this,s]},n.getSiblingType=function(e){return this.findMatchedNodeWithPath(e)[0].parent.type===F?M:B},n.getSiblings=function(e){return this.findMatchedNodeWithPath(e)[0].parent.children.reduce(function(e,t){return t.filler||e.push(t.paragraph),e},[])},n.getNodesInSameListItem=function(e){var t=this.findMatchedNodeWithPath(e),n=t[0],i=t[1],r=i[i.length-1],o=n.parent.children,a=[n];if(n.type===W){for(var s=r-1;s>=0;s--){var c=o[s];if(c.filler||a.push(c),c.type!==W)break}a.reverse()}for(var l=r+1;l<o.length;l++){var u=o[l];if(u.type!==W)break;u.filler||a.push(u)}return a},n.getParagraphsInSameListItem=function(e){return this.getNodesInSameListItem(e).map(function(e){return e.paragraph})},n.addParagraphAfter=function(e,t){var n,i,r,o=this.findMatchedNodeWithPath(e),a=o[0],s=o[1],c=a.children,l=t.map(function(e){return E(e)});(n=Object(u.a)(l)).appendChild.apply(n,c),a.removeAllChildren();var p=Object(u.a)(s),d=this._indexOf(e);(i=a.parent).appendChildAt.apply(i,[p+1].concat(l)),(r=this.paragraphs).splice.apply(r,[d+1,0].concat(t))},n.removeParagraph=function(e){var t=this.findMatchedNodeWithPath(e),n=t[0],i=t[1],r=function(e){return e.parent.getChildAt(x(e)-1)}(n),o=this._indexOf(e);if(this.paragraphs.splice(o,1),r)n.parent.removeChildAt(i[i.length-1]),r.appendChild.apply(r,n.children);else{n.convertToFiller(),n.removeEmptyChildren(!0);var a=this._getParaAt(o);if(!a)return;var s=this.findMatchedNodeWithPath(a)[0];n.type!==s.type&&this._updateType(s,s.type)}},n._removeParagraphs=function(e){var t=this;e.forEach(function(e){t.removeParagraph(e)})},n._getParaAt=function(e){return 0<=e&&e<this.paragraphs.length?this.paragraphs[e]:null},n.moveParagraphsAfter=function(e,t){this._removeParagraphs(t),this.addParagraphAfter(e,t)},t}(l.w)},85:function(e,t,n){"use strict";var i,r,o=n(56),a=n.n(o),s=n(55),c=n.n(s),l=n(60),u=n.n(l),p=n(58),d=n.n(p),h=n(0),g=n.n(h),f=(n(61),n(50)),m=n.n(f),y=n(122),v=n(134),_=n(52),b=n(49),S=n(376),C=n(84),I=function(){function e(e,t){this._prevElement=null,this._callback=e,this._replacement=t}var t=e.prototype;return t.replaceWith=function(e){var t=this;e&&e!==this._prevElement&&(this._stop(),this._prevElement=e,this._replacement.add(e,function(e){t._callback(e)}))},t.stop=function(){this._stop()},t._stop=function(){this._prevElement&&this._replacement.remove(this._prevElement)},e}(),O=function(){function e(e){var t=this;this._elementMap=new WeakMap,this._callback=function(e){e.forEach(function(e){var n=e.target,i=t._elementMap.get(n);i&&i(e)})},this._io=new IntersectionObserver(this._callback,e)}var t=e.prototype;return t.add=function(e,t){this._elementMap.has(e)||(this._elementMap.set(e,t),this._io.observe(e))},t.remove=function(e){this._elementMap.delete(e),this._io.unobserve(e)},t.disconnect=function(){this._elementMap.clear(),this._io.disconnect()},t.createItem=function(e){return new I(e,this)},e}(),T={_replacements:[],create:function(e){if(!e)throw new Error("need options");var t=this._replacements.find(function(t){return Object(C.a)(t.key,e)});return t?t.value:(this._replacements.push(t={key:e,value:new O(e)}),t.value)}},L=n(51);n.d(t,"a",function(){return E});var E={lazyLoad:Symbol("lazyLoad"),normal:Symbol("normal"),autoReplace:Symbol("autoReplace")},P=function(e){return function(t,n){void 0===t&&(t="auto"),void 0===n&&(n="auto");var i=t+","+n;if(e.has(i))return e.get(i);var r="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+n+'" viewBox="0 0 '+t+" "+n+'"><rect width="100%" height="100%" fill="#FCFCFC"/></svg>');return e.set(i,r),r}}(new(function(){function e(e,t){void 0===e&&(e={}),this._dataArray=[],this._reverseArray=[],this._map=null,this._maxLength=10,this._map=new Map(Object.entries(e)),this._dataArray=Object.keys(e),this._maxLength=t}var t=e.prototype;return t.get=function(e){return this.has(e)?this._map.get(e):null},t.set=function(e,t){var n=this._dataArray.length,i=this._reverseArray.length,r=n+i,o=this.has(e);if(r>=this._maxLength&&!o){var a=this._maxLength+1-r,s=a-i;s<=0?this._deleteCount(a):(this._deleteCount(this._reverseArray.length),this._reverseArray=this._dataArray.reverse(),this._dataArray=[],this._deleteCount(s))}o||this._dataArray.push(e),this._map.set(e,t)},t.has=function(e){return this._map.has(e)},t._deleteCount=function(e){for(var t=0;t<e;t++){var n=this._reverseArray.pop();this._delete(n)}},t._delete=function(e){this._map.delete(e)},e}())({},100)),w=function(e){return e!==E.normal},k=(i=function(e){function t(t){var n;(n=e.call(this,t)||this)._mounted=!1,u()(n,"_shown",r,d()(n)),n.state={src:null,imageWidth:0,imageHeight:0},n._domAccessor=L.W.get("domAccessor"),n._elementRef=t.elementRef||b.b.createRef(),window.frameElement&&L.W.get("configAgent").isMobile()&&(n._shown=!0);var i=n._domAccessor.getScrollTarget(null),o="100% 0% 100% 0%";return(window.frameElement||i&&"BODY"===i.tagName)&&(i=void 0,o="0px"),n._replacement=T.create({root:i,threshold:0,rootMargin:o}),n._resetIOC(),n}g()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this._mounted=!0,this._loadImageSource(this.props)},n.componentDidMount=function(){this._replace.replaceWith(this._elementRef.current)},n.UNSAFE_componentWillReceiveProps=function(e){this._loadImageSource(e)},n.componentDidUpdate=function(e){this.props.type!==e.type&&this._resetIOC(),this._replace.replaceWith(this._elementRef.current)},n.componentWillUnmount=function(){this._mounted=!1,this._replace.stop()},n.render=function(){var e=this.state,t=e.src,n=e.imageWidth,i=e.imageHeight,r=this.props,o=r.width,a=r.height,s=r.originalWidth,l=r.originalHeight,u=this._filterImageAttrs(),p=n||s||o,d=i||l||a;return t&&this._isVisible(this.props)?b.b.createElement("img",c()({ref:this._elementRef,src:t},u)):!t&&p&&d?b.b.createElement("img",c()({ref:this._elementRef,src:P(p,d)},u)):b.b.createElement("span",{ref:this._elementRef})},n._filterImageAttrs=function(){return Object(y.a)(this.props,["src","onLoad","onError","forceTriggerOnloadEvent","originalHeight","originalWidth","elementRef","type"])},n._isVisible=function(e){return this.context.readOnly||!w(e.type)||this._shown},n._loadImageSource=function(e){var t=e.forceTriggerOnloadEvent,n=e.src;if((t||this.state.src!==n)&&"string"==typeof n&&this._isVisible(e)){var i=new Image;i.onerror=this._handleOnError,i.onload=this._handleOnLoad.bind(this,e),i.src=n}},n._handleOnLoad=function(e,t){if(this._mounted){var n=t.currentTarget;(e.forceTriggerOnloadEvent||n.src!==this.state.src)&&(w(this.props.type)||(this._shown=!0),this.setState({src:n.src,imageWidth:n.width,imageHeight:n.height}),this._callOnLoadEvent(n))}},n._callOnLoadEvent=function(e){var t=this._filterImageAttrs(),n=Object(v.a)(e,["width","height"]);this.props.onLoad(a()({},e,n,t))},n._handleOnError=function(e){this._mounted&&(this.setState({src:null}),this.props.onError(e))},n._replaceCallback=function(e){return e.isIntersecting!==this._shown&&(this.props.type!==E.autoReplace&&this._shown||(this._shown=!this._shown),this._shown&&this._loadImageSource(this.props),!0)},n._resetIOC=function(){this._replace&&this._replace.stop(),w(this.props.type)?this._replace=this._replacement.createItem(this._replaceCallback):this._replace={replaceWith:function(){},stop:function(){}}},t}(b.b.Component),m()(i.prototype,"_handleOnLoad",[_.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleOnLoad"),i.prototype),m()(i.prototype,"_handleOnError",[_.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleOnError"),i.prototype),m()(i.prototype,"_replaceCallback",[_.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_replaceCallback"),i.prototype),r=m()(i.prototype,"_shown",[b.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i);k.defaultProps={elementRef:null,src:null,onLoad:function(){},onError:function(){},forceTriggerOnloadEvent:!1,type:E.normal},k.propTypes={elementRef:b.a.oneOfType([b.a.func,b.a.shape({current:b.a.instanceOf(Element)})]),src:b.a.oneOfType([b.a.string,b.a.object]),onLoad:b.a.func,onError:b.a.func,forceTriggerOnloadEvent:b.a.bool,type:b.a.symbol};t.b=Object(S.b)(k)},86:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(50),s=n.n(a),c=n(51),l=n(49),u=n(376),p=n(52),d=n(54),h=n.n(d),g=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this)._elementRef=l.b.createRef(),n._originComponentWrapperStore=null,n}o()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this._observeSelectionChanged()},n.componentDidMount=function(){var e=this.props.store;e&&(this._updateSelectionClass(e.selection),this._originComponentWrapperStore=e)},n.componentDidUpdate=function(){this._observeSelectionChanged()},n.componentWillUnmount=function(){this._unobserveSelectionChanged()},n.render=function(){var e=this.props,t=e.className,n=e.id,i=e.ctype,r=e.layout,o=e.contentMode,a=e.children,s=e.head,c=e.tail,u=e.i18n,p=this._resolveClassName({className:t,ctype:i,layout:r}),d=this._resolveContentClassName(o),h=this._resolveTitle(i,u),g=this._renderEdgeButton();return l.b.createElement("div",{ref:this._elementRef,className:p,id:n,"data-compid":n,"data-a11y-title":h},g,s,l.b.createElement("div",{className:d,ref:this._ref},a),c)},n._ref=function(e){this.content=e},n._handleSelectionChange=function(e){this._updateSelectionClass(e)},n._updateSelectionClass=function(e){var t=this._elementRef.current;"none"===e?t.classList.remove("se-is-selected"):t.classList.add("se-is-selected")},n._resolveClassName=function(e){var t,n=e.className,i=e.ctype,r=e.layout,o=((t={})["se-component se-"+i]=!!i,t["se-l-"+(r||"default")]=!0,t);if(this._elementRef.current){var a=this._elementRef.current;o["se-is-selected"]=a.classList.contains("se-is-selected")}return h()([n,o])},n._resolveContentClassName=function(e){var t,n=this.props.contentClassName;return h()(((t={})[n]=!!n,t["se-component-content"]=!0,t["se-component-content-"+e]=!!e,t))},n._resolveTitle=function(){var e=this.props,t=e.ctype;return(0,e.i18n)(t+"Component:title","")},n._renderEdgeButton=function(){var e=this.props,t=e.id,n=e.ctype;return!["documentTitle","text","sectionTitle"].includes(n)?l.b.createElement("button",{className:"se-component-edge-button se-component-edge-button-top __edge-area",type:"button","tab-index":"-1","data-compid":t,"data-direction":c.x.TOP}):null},n._observeSelectionChanged=function(){var e=this.props.store;e&&e!==this._originComponentWrapperStore&&(this._originComponentWrapperStore=e,this._unobserveSelectionChanged(),this._disposeReaction=l.f.reaction(function(){return e.selection},this._handleSelectionChange))},n._unobserveSelectionChanged=function(){this._disposeReaction&&this._disposeReaction()},t}(l.b.Component),s()(i.prototype,"_ref",[p.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_ref"),i.prototype),s()(i.prototype,"_handleSelectionChange",[p.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleSelectionChange"),i.prototype),i);g.defaultProps={id:"",ctype:"",layout:"",contentMode:"",className:"",head:null,tail:null,children:null},g.propTypes={id:l.a.string,store:l.a.instanceOf(c.b),forwardRef:l.a.oneOfType([l.a.func,l.a.shape({current:l.a.instanceOf(Element)})]),ctype:l.a.string,layout:l.a.string,contentMode:l.a.string,className:l.a.string,contentClassName:l.a.string,head:l.a.element,tail:l.a.element,children:l.a.node,i18n:l.a.func.isRequired},t.a=Object(u.b)(g)},87:function(e,t,n){"use strict";var i,r=n(0),o=n.n(r),a=n(49),s=n(376),c=n(54),l=n.n(c),u=n(51),p=((i={})[u.x.TOP]="se-drop-indicator-top",i[u.x.LEFT]="se-drop-indicator-left",i[u.x.RIGHT]="se-drop-indicator-right",i[u.x.BOTTOM]="se-drop-indicator-bottom",i),d=function(e){function t(){return e.apply(this,arguments)||this}o()(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.children,n=e.unitId,i=e.compId,r=e.style,o=this._resolveClassName();return a.b.createElement("div",{className:o,style:r,"data-unitid":n,"data-compid":i,"data-direction":u.x.TOP},t)},n._resolveClassName=function(){var e=this.props,t=e.compStore,n=e.className,i=t.dragAndDrop,r=i.isOnDrop,o=i.direction,a=["se-drop-indicator",n];return r&&a.push(p[o]),l()(a)},t}(a.b.Component);d.defaultProps={compId:"",unitId:"",children:null,compStore:{dragAndDrop:{isOnDrop:!1,direction:"",dragDataType:""}},className:"",style:{}},d.propTypes={compId:a.a.string,unitId:a.a.string,children:a.a.oneOfType([a.a.element,a.a.array]),compStore:a.a.object,style:a.a.object,className:a.a.string},t.a=Object(s.b)(d)},88:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(17),s=n.n(a),c=n(0),l=n.n(c),u=n(50),p=n.n(u),d=n(16),h=n(49),g=n(376),f=n(51),m=n(54),y=n.n(m),v=n(52),_=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this)._i18n=f.W.get("i18n"),n.state={containerWidth:1/0},n}l()(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this.props.container;if(e){var t=e.current;this._updateContainerWidth(t)}},n.componentWillUnmount=function(){this._clearTimeout()},n.render=function(){var e=this.props.blockWrapperProps,t=e.captionFocused,n=void 0!==t&&t,i=e.selection,r=e.movableType,o=e.imageLoaded,a=void 0===o||o,s=(e.contentMode,e.align),c={display:"block"};!a||n||"single"!==i||r===f.K.NONE?(c.display="none",this._displayed=!1):this._displayed=!0;var l=this.state.containerWidth<100&&(!s||"left"===s||"justify"===s),u=y()({"se-component-layer-move":!0,"se-component-layer-move-position-right":!l,"se-component-layer-move-position-left":l});return h.b.createElement("div",{className:u,style:c},h.b.createElement("button",{type:"button",className:"se-component-button-move se-component-button-move-up",disabled:!function(e){return!!(e&f.K.UP)}(r),onClick:this._handleMoveToPrev},h.b.createElement("span",{className:"se-blind"},this._i18n("verticalMoveButton:up"))),h.b.createElement("button",{type:"button",className:"se-component-button-move se-component-button-move-down",disabled:!function(e){return!!(e&f.K.DOWN)}(r),onClick:this._handleMoveToNext},h.b.createElement("span",{className:"se-blind"},this._i18n("verticalMoveButton:down"))))},n._updateContainerWidth=function(e){var t=this;e&&e.offsetWidth<10?(this._clearTimeout(),this._timer=setTimeout(function(){t.setState(function(){return{containerWidth:e.offsetWidth}})},300)):this.state.containerWidth!==e.offsetWidth&&this.setState(function(){return{containerWidth:e.offsetWidth}})},n._clearTimeout=function(){this._timer&&clearTimeout(this._timer)},n._handleMoveToPrev=function(){this.props.onMoveToPrev()},n._handleMoveToNext=function(){this.props.onMoveToNext()},t}(h.b.Component),p()(i.prototype,"_handleMoveToPrev",[v.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleMoveToPrev"),i.prototype),p()(i.prototype,"_handleMoveToNext",[v.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_handleMoveToNext"),i.prototype),i);_.defaultProps={movableType:0,blockWrapperProps:{},onMoveToPrev:function(){},onMoveToNext:function(){}},_.propTypes={movableType:h.a.number,onMoveToPrev:h.a.func,onMoveToNext:h.a.func,blockWrapperProps:h.a.object,container:h.a.oneOfType([h.a.func,h.a.shape({current:h.a.instanceOf(Element)})])};var b,S=Object(g.b)(_),C=["forwardRef","children","className","blockWrapperProps","hasSelection","parentProps","onMoveToPrev","onMoveToNext"],I="se-is-block-selected",O=(b=function(e){function t(t){var n;return(n=e.call(this,t)||this)._elementRef=h.b.createRef(),n._originBlockWrapperProps=null,n._deviceType=null,n}l()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this._deviceType=f.W.get("configAgent").get("productEnv.deviceType"),this._observeSelectionChanged()},n.componentDidMount=function(){var e=this._decideSelection(this.props.blockWrapperProps.selection);this._updateSelectionClasses(e),this._originBlockWrapperProps=this.props.blockWrapperProps},n.componentDidUpdate=function(){this._wasBlockWrapperChanged()&&this._reobserveSelectionChanged()},n.componentWillUnmount=function(){this._unobserveSelectionChanged()},n.render=function(){var e=this.props,t=(e.forwardRef,e.children),n=e.className,i=e.blockWrapperProps,r=e.hasSelection,a=(e.parentProps,e.onMoveToPrev,e.onMoveToNext,s()(e,C)),c=i.ctype,l=this._resolveClassName({className:n,blockWrapperProps:i,hasSelection:r}),u=this._getDOMReference(),p="image"===c||"video"===c;return this._deviceType===f.t.MOBILE&&p?h.b.createElement("div",o()({},a,{className:l,ref:u}),t[0],this._renderVerticalMoveButton(),t[1]):h.b.createElement("div",o()({},a,{className:l,ref:u}),t,this._renderVerticalMoveButton())},n._renderVerticalMoveButton=function(){return this._deviceType===f.t.MOBILE?h.b.createElement(S,o()({},this.props,{container:this._getDOMReference()})):null},n._getDOMReference=function(){return this.props.forwardRef||this._elementRef},n._handleSelectionChange=function(e){var t=e.selection,n=e.blockSelected;this._updateSelectionClasses(this._decideSelection(t,n))},n._updateSelectionClasses=function(e){var t=this._getDOMReference().current;if(t){var n=t.classList,i=this.props.blockWrapperProps.captionFocused,r=void 0!==i&&i;"none"===e?n.remove("se-is-selected"):n.add("se-is-selected"),"single"===e||"multi"===e||r?(n.add("se-is-activated"),n.remove(I)):"block"===e?(n.add(I),n.remove("se-is-activated")):(n.remove(I),n.remove("se-is-activated"))}},n._decideSelection=function(e,t){return t?"block":this.props.hasSelection?e:null},n._resolveClassName=function(e){var t,n=e.className,i=e.blockWrapperProps,r=i.ctype,o=i.layout,a=i.align,s=i.themeStyle,c=void 0===s?{}:s,l=Object(d.a)(c[o],"component.align","left"),u=((t={})["se-section se-section-"+r]=!!r,t["se-l-"+(o||"default")]=!0,t["se-section-align-"+(a||l)]=!0,t),p=this._getDOMReference().current;if(p){var h=p.classList;u[I]=h.contains(I),u["se-is-selected"]=h.contains("se-is-selected"),u["se-is-activated"]=h.contains("se-is-activated")}return y()([u,n])},n._observeSelectionChanged=function(){var e=this.props,t=e.blockWrapperProps,n=e.parentProps,i=void 0===n?{}:n;this._disposeReaction=h.f.reaction(function(){return{selection:t.selection,blockSelected:i.isBlockSelected}},this._handleSelectionChange,{fireImmediately:!0}),this._originBlockWrapperProps=t},n._unobserveSelectionChanged=function(){this._disposeReaction()},n._reobserveSelectionChanged=function(){this._unobserveSelectionChanged(),this._observeSelectionChanged()},n._wasBlockWrapperChanged=function(){return this._originBlockWrapperProps!==this.props.blockWrapperProps},t}(h.b.Component),p()(b.prototype,"_handleSelectionChange",[v.autobind],Object.getOwnPropertyDescriptor(b.prototype,"_handleSelectionChange"),b.prototype),b);O.defaultProps={className:"",children:null,blockWrapperProps:{},hasSelection:!0,onMoveToPrev:function(){},onMoveToNext:function(){}},O.propTypes={forwardRef:h.a.oneOfType([h.a.func,h.a.shape({current:h.a.instanceOf(Element)})]),className:h.a.string,children:h.a.oneOfType([h.a.element,h.a.array]),blockWrapperProps:h.a.object,hasSelection:h.a.bool,onMoveToNext:h.a.func,onMoveToPrev:h.a.func};t.a=Object(g.b)(O)},93:function(e,t,n){"use strict";var i,r=n(55),o=n.n(r),a=n(0),s=n.n(a),c=n(50),l=n.n(c),u=n(49),p=n(54),d=n.n(p),h=n(1279),g=n(51),f=n(1107),m=n(52),y=n(58),v=n.n(y),_=n(1108),b=n.n(_),S=n(69),C=(i=function(e){function t(t){var n;return(n=e.call(this,t)||this).bindDragStart=n._bindDragStart.bind(v()(n)),n.bindDragMove=n._bindDragMove.bind(v()(n)),n.bindDragEnd=n._bindDragEnd.bind(v()(n)),n.bindPointerDown=n._bindPointerDown.bind(v()(n)),n.bindPointerMove=n._bindPointerMove.bind(v()(n)),n.bindPointerUp=n._bindPointerUp.bind(v()(n)),n._draggable=null,n.rootElement=null,n}s()(t,e);var n=t.prototype;return n.componentDidMount=function(){this._draggable=this.createDraggable(this.rootElement,{containment:".se-wrap"}),this._draggable.on("dragStart",this.bindDragStart),this._draggable.on("dragMove",this.bindDragMove),this._draggable.on("dragEnd",this.bindDragEnd),this._draggable.on("pointerDown",this.bindPointerDown),this._draggable.on("pointerMove",this.bindPointerMove),this._draggable.on("pointerUp",this.bindPointerUp)},n.componentWillUnmount=function(){this._draggable.off("dragStart",this.bindDragStart),this._draggable.off("dragMove",this.bindDragMove),this._draggable.off("dragEnd",this.bindDragEnd),this._draggable.off("pointerDown",this.bindPointerDown),this._draggable.off("pointerMove",this.bindPointerMove),this._draggable.off("pointerUp",this.bindPointerUp),this._draggable.destroy()},n.render=function(){var e=this.props,t=e.inlineStyle,n=e.className,i=Object(S.a)({},t),r=d()(["__dragHandler","draggable",n]);return u.b.createElement("div",{className:r,ref:this._ref,style:i},this.props.children)},n._ref=function(e){this.rootElement=e},n.createDraggable=function(e,t){return new b.a(e,t)},n._bindDragStart=function(e,t){this.props.dragStart(e,t)},n._bindDragMove=function(e,t,n){this.props.dragMove(e,t,n)},n._bindDragEnd=function(e,t){this.props.dragEnd(e,t)},n._bindPointerDown=function(e,t){this.props.pointerDown(e,t)},n._bindPointerMove=function(e,t,n){this.props.pointerMove(e,t,n)},n._bindPointerUp=function(e,t){this.props.pointerUp(e,t)},t}(u.b.Component),l()(i.prototype,"_ref",[m.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_ref"),i.prototype),i);C.defaultProps={children:null,dragStart:function(){},dragMove:function(){},dragEnd:function(){},pointerDown:function(){},pointerMove:function(){},pointerUp:function(){},inlineStyle:{},className:""},C.propTypes={children:u.a.element,dragStart:u.a.func,dragMove:u.a.func,dragEnd:u.a.func,pointerDown:u.a.func,pointerMove:u.a.func,pointerUp:u.a.func,inlineStyle:u.a.object,className:u.a.string};var I,O=C,T=n(274),L=n(719),E={top:"se-popup-position-top",bottom:"se-popup-position-bottom",center:"se-popup-position-center",top_right:"se-popup-position-top-right"},P={white:"se-popup-dim-white",black:"se-popup-dim-black",transparent:"se-popup-dim-transparent"},w=(I=function(e){function t(t){var n;return(n=e.call(this,t)||this)._movePoint={leftPos:0,topPos:0},n._rootRef=u.b.createRef(),n._dragHandlerRef=u.b.createRef(),n._dimmedRef=u.b.createRef(),n._domAccessor=g.W.get("domAccessor"),n._draggingZone=n.props.draggingZone,n}s()(t,e);var n=t.prototype;return n.UNSAFE_componentWillMount=function(){this._storeKey="POPUP_POS_"+this.props.popupId,this.setState({popupId:this.props.popupId,opened:this.props.opened||!1,isDimUse:this.props.isDimUse,isDraggable:this.props.isDraggable||!1,position:this._getStartPosition()||null})},n.componentDidMount=function(){this._checkDndPosition(),this._attachEvents()},n.UNSAFE_componentWillReceiveProps=function(e){this.setState(function(t){return{opened:e.opened||!1,isDimUse:e.isDimUse||!1,position:e.position||t.position}})},n.componentDidUpdate=function(){this._checkDndPosition()},n.componentWillUnmount=function(){this._detachEvents()},n.render=function(){var e=this.props,t=e.className,n=e.dimColor,i=e.useFocusLock,r=this.state,o=r.isDraggable,a=r.position,s=r.popupId,c=d()([t||""]),l=d()(["se-popup-dim",P[n]]),p=this._getPositionClass(a),g=d()([].concat(["se-popup","__se-sentry",c,p,{"se-popup-draggable":o}])),f={animationDuration:this.state.animationDuration},m=i?h.a:u.b.Fragment;return u.b.createElement(m,null,u.b.createElement("div",{className:g,onMouseUp:this._handleMouseUp,ref:this._rootRef,"data-group":"popupLayer","data-name":c},this._drawDimArea(l),u.b.createElement("div",{className:"se-popup-container __se-pop-layer",style:f,"data-layerid":s},this.props.children),this._drawDragHandler()))},n._attachEvents=function(){this.props.isDraggable&&this._domAccessor.getScrollTarget(window).addEventListener("scroll",this._handleScrollEvent),this._dimmedRef.current&&(this._dimmedRef.current.addEventListener("wheel",this._handleWheelDimmedArea,T.a.NON_PASSIVE_OPTION),this._scrollLock())},n._detachEvents=function(){this._domAccessor.getScrollTarget(window).removeEventListener("scroll",this._handleScrollEvent),this._dimmedRef.current&&(this._dimmedRef.current.removeEventListener("wheel",this._handleWheelDimmedArea,T.a.NON_PASSIVE_OPTION),this._scrollUnLock())},n._handleWheelDimmedArea=function(e){e.preventDefault()},n._scrollLock=function(){if(!this._disableScroll){var e=window,t=e.pageXOffset,n=e.pageYOffset;this._disableScroll=function(){return window.scrollTo(t,n)},window.addEventListener("scroll",this._disableScroll,!1)}},n._scrollUnLock=function(){window.removeEventListener("scroll",this._disableScroll,!1),this._disableScroll=null},n._handleScrollEvent=function(){this._resetPosition()},n._resetPosition=function(){this._movePoint=this._adjustPointToBeContained({x:0,y:0},this.state.position),this.setState({position:this._movePoint})},n._handleMouseUp=function(e){L.a.log(e.nativeEvent)},n._getStartPosition=function(){var e=this.props.position||null;return!this.props.isDraggable||null===this._storeKey||null!==e&&"object"==typeof e?e:f.a.get(this._storeKey)},n._getPositionClass=function(e){return"string"==typeof e&&E[e]||""},n._isModeless=function(){var e=this.state,t=e.isDraggable,n=e.isDimUse;return!0===t||!1===n},n._drawDimArea=function(e){return this._isModeless()?"":u.b.createElement("div",{className:e,onClick:this._handleClickDimmedArea,ref:this._dimmedRef})},n._drawDragHandler=function(){if(!1!==this.state.isDraggable){var e=this.state.position||{},t=e.topPos,n=e.leftPos,i={inlineStyle:{top:(t||0)+"px",left:(n||0)+"px"},className:"se-popup-draghandler",dragMove:this._handleDragMove,dragEnd:this._handleDragEnd};return u.b.createElement(O,o()({},i,{ref:this._dragHandlerRef}))}},n._checkDndPosition=function(){var e=this.state,t=e.opened,n=e.isDraggable,i=e.position;if(!1!==t&&!1!==n)if(null!==i&&"object"==typeof i){var r=this._adjustPointToBeContained({x:0,y:0},i);this._movePopupOn(r)}else this._initializePositionState()},n._movePopupOn=function(e){var t=e.topPos,n=e.leftPos,i=this._rootRef.current;i.style.top=t+"px",i.style.left=n+"px";var r=this._dragHandlerRef.current;r.rootElement.style.top=t+"px",r.rootElement.style.left=n+"px"},n._initializePositionState=function(){var e=this._rootRef.current,t=Math.floor((window.innerHeight-e.offsetHeight)/2),n=Math.floor((window.innerWidth-e.offsetWidth)/2);this._changePositionState({topPos:t,leftPos:n})},n._handleDragMove=function(e,t,n){this._movePoint=this._adjustPointToBeContained(n,this.state.position),this._movePopupOn(this._movePoint)},n._keepInContainer=function(e,t){var n,i,r=this._rootRef.current,o=r.offsetHeight,a=r.offsetWidth,s=0,c=0;if("browser"===this._draggingZone)n=window.innerHeight-o,i=window.innerWidth-a;else{var l=this._domAccessor.getContentContainer().getBoundingClientRect();s=l.top,c=l.left,n=l.bottom-o,i=c+l.width-a}return{topPos:this._getProperPosition(e,s,n),leftPos:this._getProperPosition(t,c,i)}},n._getProperPosition=function(e,t,n){return e>n?n:e<t?t:e},n._adjustPointToBeContained=function(e,t){var n=t.topPos,i=t.leftPos;return this._keepInContainer(n+e.y,i+e.x)},n._handleDragEnd=function(){this._changePositionState(this._movePoint),this.props.onDragEndPopup()},n._handleClickDimmedArea=function(){this.props.useDimClose&&this._closePopup()},n._changePositionState=function(e){this.setState({position:e}),this._storeKey&&f.a.set(this._storeKey,e)},n._closePopup=function(){this.setState({opened:!1})},t}(u.b.Component),l()(I.prototype,"_handleWheelDimmedArea",[m.autobind],Object.getOwnPropertyDescriptor(I.prototype,"_handleWheelDimmedArea"),I.prototype),l()(I.prototype,"_handleScrollEvent",[m.autobind],Object.getOwnPropertyDescriptor(I.prototype,"_handleScrollEvent"),I.prototype),l()(I.prototype,"_handleMouseUp",[m.autobind],Object.getOwnPropertyDescriptor(I.prototype,"_handleMouseUp"),I.prototype),l()(I.prototype,"_handleDragMove",[m.autobind],Object.getOwnPropertyDescriptor(I.prototype,"_handleDragMove"),I.prototype),l()(I.prototype,"_handleDragEnd",[m.autobind],Object.getOwnPropertyDescriptor(I.prototype,"_handleDragEnd"),I.prototype),l()(I.prototype,"_handleClickDimmedArea",[m.autobind],Object.getOwnPropertyDescriptor(I.prototype,"_handleClickDimmedArea"),I.prototype),I);w.defaultProps={popupId:"",opened:!1,isDimUse:!0,useDimClose:!1,isDraggable:!1,useFocusLock:!1,dimColor:"transparent",position:null,children:null,className:"",onDragEndPopup:function(){}},w.propTypes={popupId:u.a.string.isRequired,opened:u.a.bool,isDimUse:u.a.bool,isDraggable:u.a.bool,useFocusLock:u.a.bool,dimColor:u.a.oneOf(["transparent","white","black"]),position:u.a.oneOfType([u.a.string,u.a.shape({topPos:u.a.number,leftPos:u.a.number})]),children:u.a.oneOfType([u.a.element,u.a.array]),className:u.a.string,useDimClose:u.a.bool,onDragEndPopup:u.a.func};t.a=w}}]);